require=function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){(function(t){"use strict";var i=e("./globalEvents"),r=BaseObject.extend({initialize:function(e){this.target=e,this.pendingActionOperations=[],this.pendingRequest=null,this.actionsInProgress=0,o.push(this)},createActionOperation:function(e,t,n){return{action:e,operation:t,options:n}},createOptions:function(e){var n=this,i=_.clone(e.options)||{},r=i.complete;i.complete=function(){if(n.pendingActionOperation!==e)throw console.warn("Pending action:"+t._getUnderscore(n).soak("pendingActionOperation.name")),console.warn("Expected action:"+_.soak(e,"name")),new Error("Pending action was not expected action!");n.pendingActionOperation=null,r&&r.apply(this,arguments),n.startNextActionIfPossible(),a()};var o=i.beforeSend;return i.beforeSend=function(){n.pendingActionOperation=e,o&&o.apply(this,arguments)},i},addOperation:function(e,t,n){var i=this.createActionOperation(e,t,n);this.pendingActionOperations.push(i),this.options.queueing&&this.options.queueing(e),this.actionsInProgress||this.startNextActionIfPossible()},startNextActionIfPossible:function(){if(null==this.pendingActionOperation&&0!==this.pendingActionOperations.length){this.actionsInProgress++;var e=this.pendingActionOperations.shift(),t=e.action,n=e.operation;t.refreshModel(),t[n](this.createOptions(e)),this.startNextActionIfPossible(),this.actionsInProgress--,a()}null==this.pendingActionOperations&&0===this.pendingActionOperations.length&&(this.remove(),a())},remove:function(){o=_.without(o,this)}}),o=n.queues=[],s=(n.findOrCreateQueue=function(e){var t=_.find(o,function(t){return t.target===e});return t||(t=new r(e)),t},n.countQueuedActions=function(){return _.reduce(o,function(e,t){var n=t.pendingActionOperation?1:0;return n+t.pendingActionOperations.length+e},0)}),a=function(){0===s()&&i.trigger("noQueuedActions")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./globalEvents":22}],2:[function(e,t,n){"use strict";var i=e("backbone"),r=e("./actionQueue"),o=t.exports,s={},a=n.Action=function(){this.initialize.apply(this,arguments)};_.extend(a.prototype,{initialize:function(){},replaceUndefinedWithNull:function(e){return _.each(e,function(t,n){void 0===t&&(e[n]=null)}),e},refreshModel:function(){if(this.model&&this.collection){var e=this.collection.get(this.model.id);e&&(this.model=e)}},normalizeModel:function(){if(this.model&&this.parent){var e=this.parent.getHasManyChildModel(this.model);e&&(this.model=e,e.collection&&(this.collection=e.collection))}},perform:function(){throw new Error("perform not implemented")},revert:function(){throw new Error("can't undo")},reperform:function(e){return this.perform(e)},"do":function(e){return e=_.extend({},e,this.defaultOptions),this.getQueue().addOperation(this,"perform",e),this.push()},push:function(){return o.history.push(this),this},undo:function(e){return e=_.extend({},e,this.defaultOptions),this.getQueue().addOperation(this,"revert",e),this},redo:function(e){return e=_.extend({},e,this.defaultOptions),this.getQueue().addOperation(this,"reperform",e),this},getQueue:function(){return r.findOrCreateQueue(this.queueTarget())},queueTarget:function(){return this.collection?this.collection.queueTarget():this.model?this.model.queueTarget():s}}),a=extendable(a),a.wrapSuccess=function(e){var t=this;return t.extend({wrapOptions:function(t){var n=this;t=t||{};var i=t.success||_.noop;return t.success=function(){return e.call(n,i,arguments)},t},perform:function(e){return e=this.wrapOptions(e),t.prototype.perform.call(this,e)},reperform:function(e){return e=this.wrapOptions(e),t.prototype.reperform.call(this,e)},revert:function(e){return e=this.wrapOptions(e),t.prototype.revert.call(this,e)}})};var l=(n.Add=a.extend({name:"add",initialize:function(e,t){this.collection=e,this.parent=e.parent,this.attrs=t},perform:function(e){this.model=i.Collection.prototype.create.call(this.collection,this.attrs,e)},revert:function(e){this.normalizeModel(),i.Model.prototype.destroy.call(this.model,e)},reperform:function(e){this.normalizeModel(),this.collection.restore(this.model,e)}}),n.CreateOrUpdate=a.extend({name:"createOrUpdate",initialize:function(e,t,n){this.model=e,this.collection=e.collection,this.parent=e.getParent(),this.attrs=t,this.previousAttrs=this.replaceUndefinedWithNull(n)},initializeIsNewIfNecessary:function(){null==this.isNew&&(this.isNew=this.model.isNew())},perform:function(e){this.initializeIsNewIfNecessary(),this.normalizeModel(),this.isNew?(this.model.set(this.attrs),this.model.save(null,e)):this.model.save(this.attrs,_.extend({patch:!0},e))},revert:function(e){this.initializeIsNewIfNecessary(),this.normalizeModel(),this.isNew?i.Model.prototype.destroy.call(this.model,e):this.model.save(this.previousAttrs,_.extend({patch:!0},e))},reperform:function(e){return this.initializeIsNewIfNecessary(),this.normalizeModel(),this.isNew?void this.collection.restore(this.model,e):this.perform(e)},queueTarget:function(){return this.model.queueTarget()}}),n.Move=a.extend({name:"move",initialize:function(e,t,n){this.collection=e,this.model=t,this.parent=t.getParent(),this.index=n,this.prevIndex=e.indexOf(t)},move:function(e,t){this.normalizeModel();var n={op:"move",id:this.model.id,path:"/"+e};this.collection.patch([n],_.extend(t,{reset:!1})),this.collection.remove(this.model,{silent:!0}),this.collection.add(this.model,{at:e,silent:!0}),this.collection.trigger("sort",this.collection)},perform:function(e){this.move(this.index,e)},revert:function(e){this.move(this.prevIndex,e)}}),n.Delete=a.extend({name:"delete",initialize:function(e){this.model=e,this.collection=e.collection,this.parent=e.getParent()},perform:function(e){this.normalizeModel(),i.Model.prototype.destroy.call(this.model,e)},revert:function(e){this.normalizeModel(),this.collection.restore(this.model,e)}}),n.Custom=a.extend({name:"custom",initialize:function(e){this.performFunction=e.perform,this.revertFunction=e.revert,this.reperformFunction=e.reperform||e.perform,this.target=e.queueTarget},perform:function(){this.performFunction.apply(this,arguments)},revert:function(){this.revertFunction.apply(this,arguments)},reperform:function(){this.reperformFunction.apply(this,arguments)},queueTarget:function(){return this.target?this.target:a.prototype.queueTarget.apply(this,arguments)}}));n.performCustomAction=function(e){var t=new l({perform:e.perform,revert:e.revert,reperform:e.reperform,queueTarget:e.queueTarget});t.do()};var c=n.ActionHistory=function(){this.stack=[],this.redoStack=[],this.currentActions=null,this.captureDepth=0};_.extend(c.prototype,i.Events,{capture:function(e){this.beginCapture();try{e()}finally{this.endCapture()}},beginCapture:function(){return this.currentActions?void this.captureDepth++:void(this.currentActions=[])},endCapture:function(){return this.captureDepth>0?void this.captureDepth--:(this.currentActions.length>0&&(this.stack.push(this.currentActions),this.redoStack.length=0,this.trigger("do")),void(this.currentActions=null))},canUndo:function(){return this.stack.length>0},canRedo:function(){return this.redoStack.length>0},push:function(e){this.currentActions&&this.currentActions.push(e)},undo:function(e){var t=this.stack.pop();t&&(_.each(t,function(t){t.undo(e)}),this.redoStack.push(t),this.trigger("undo"))},redo:function(e){var t=this.redoStack.pop();t&&(_.each(t,function(t){t.redo(e)}),this.stack.push(t),this.trigger("redo"))},revertUndo:function(){var e=this.redoStack.pop();e&&(this.stack.push(e),this.trigger("do"))},revertRedo:function(){var e=this.stack.pop();e&&(this.redoStack.push(e),this.trigger("do"))},reset:function(){this.stack.length=0,this.redoStack.length=0,this.trigger("reset")}}),n.history=new c},{"./actionQueue":1,backbone:"backbone"}],3:[function(e,t){"use strict";var n=e("./eventable"),i=BaseObject.extend({});t.exports=n(i)},{"./eventable":10}],4:[function(e,t){(function(n){"use strict";var i=e("backbone"),r=e("node-uuid"),o=e("./models"),s=e("../common/strings"),a=e("../common/syncedTime"),l=e("./globalEvents"),c=e("./actionQueue"),u=e("../common/version"),d=e("./csrf"),h=e("./models/deferredRequestController"),f={record:"handleRecordChange",schema:"handleSchemaChange",recordDelete:"handleRecordDelete",ordinal:"handleOrdinalChange",sheet:"handleSheetChange",field:"handleFieldChange",collection:"handleCollectionChange",book:"handleBookChange",sideEffects:"handleSideEffects",jobSuccess:"handleJobSuccess",jobError:"handleJobError",jobProgress:"handleJobProgress"},p=function(){m.changes++},m=t.exports=BaseObject.extend({propertyNames:function(){return["book"]},socketEndpoint:function(){return"?csrf="+d.token},initialize:function(){if(this.socketId=r.v4(),this.delayedActions=[],/^https:\/\/localhost/.test(window.location.href))return void console.warn("HTTPS on local host does not work with socket.io, not initializing realtime updates");if(!n.io)return console.log("No io available, making debug requeset"),void $.ajax("/socket.io/socket.io.js",{dataType:"text",error:function(e,t,n){console.log("Got ajax error: ",e,t,n)},complete:function(e,t){throw console.log("Response text",e.responseText),console.log("Completed request",e,t),new Error("No io found")}});this.socket=io.connect(this.socketEndpoint(),{transports:["websocket"],forceNew:!0});var e=this;this.socket.on("connect",function(){e.socket.emit("subscribeBook",{clientId:e.socketId,bookId:e.book.id})}),this.socket.on("change",function(t,n){e.handleChanges(t,!1,n)}),this.socket.on("syncTime",this.handleSyncTime.bind(this)),this.socket.on("queueEstablished",function(t){console.log("Established update queue connection"),e.hasEstablished=!0,window.clientId=e.socketId,u.isEqual(t.serverVersion)||(console.error("Got conflicting versions! Client: "+u.versionString()+" "+t.serverVersion),e.trigger("badVersion",t.serverVersion),e.close())}),this.socket.on("error",this.networkError.bind(this)),this.socket.on("authError",this.networkError.bind(this)),$(window).on("unload",this.goodbye.bind(this)),this.globalListener=this.dispatchedDelayedActions.bind(this),l.on("noQueuedActions",this.globalListener)},dispatchedDelayedActions:function(){var e=this.delayedActions;this.delayedActions=[],n._getUnderscore(e).invoke("call")},networkError:function(e,t){console.warn("Network Error connecting websocket: ",e),m.error=e,this.socket.disconnect(),this.handleSchemaChange({bookId:this.book.id,modelType:"book",message:s["schema-update-network-error"]()}),t&&t()},goodbye:function(){this.socket&&(console.log("sending goodbye"),this.socket.emit("goodbye"),l.off("noQueuedActions",this.globalListener))},close:function(){this.goodbye()},noDelayChangeTypes:n._getUnderscore(["jobSuccess","jobError","jobProgress"]).makeSet(),handleChanges:function(e,t,i){var r=this;if(_.isArray(e)||(e=[e]),c.countQueuedActions()>0||this.delayedActions.length>0){var o=n._getUnderscore(e).partition(function(e){return r.noDelayChangeTypes[e.type]}),s=o[0],a=o[1];if(a.length){var u=i;i=_.noop,this.delayedActions.push(function(){r.handleChanges(a,t,u)})}e=s}l.addInflightChange(),n._getUnderscore(e).each(function(e){r.handleChange(e,t)}),l.removeInflightChange(),i()},handleChange:function(e,t){var n=e.type;if(p(),e.originatingRequestId&&!t&&o.backbone.hasSentRequestId(e.originatingRequestId))return void m.ignoredChanges++;if(!(n in f))throw new Error("unknown change type received: "+n);this[f[n]](e)},handleRecordChange:function(e){var t=o.Record.findIfExists(e.recordId);if(t){t=o.Record.find(e.recordId);var n=t.effectiveSheetId();t.nonLocalSet(e.attrs);var i=o.Sheet.find(t.effectiveSheetId()).get("records");if(n!==t.effectiveSheetId()){var r=o.Sheet.find(n).get("records");r&&r.remove(t),i&&i.add(t)}else i&&!i.contains(t)&&i.add(t)}else{t=o.Record.add(e.attrs);var s=t.effectiveSheetId();o.Sheet.qfind(s).thenImmediate(function(e){var n=e.get("records");n&&n.add(t),t.changed={},t.dirty=!1,t.fetched=!0,t.onNameChange()}).done()}t.trigger("sync",t)},handleRecordDelete:function(e){var t=e.recordId,n=o.Record.findIfExists(t);n&&n.localDestroy()},handleOrdinalChange:function(e){o.Sheet.qfind(e.sheetId).thenImmediate(function(t){var n=t.get("records");n.set(e.recordUpdates)}).done()},handleSheetChange:function(e){var t=e.sheetId;o.Sheet.qfind(t).thenImmediate(function(t){t.nonLocalSet(e.attrs)}).done()},handleFieldChange:function(e){var t=e.sheetId,n=e.fieldKey;o.Sheet.qfind(t).thenImmediate(function(t){var i=t.fieldWithKey(n);i&&i.nonLocalSet(e.attrs)}).done()},handleCollectionChange:function(e){var t=o[e.parentType.capitalize()];if(!t)throw new Error("Parent constructor does not exist: "+e.parentType);var n=t.findIfExists(e.parentId);n&&n.runWhileSetting(function(){n.set(e.collectionName,e.collection);var t="deleted"+e.collectionName.capitalize();n.set(t,e.deletedCollection)})},handleBookChange:function(e){var t=e.bookId,n=o.Book.findIfExists(t);n&&n.nonLocalSet(e.attrs)},handleSchemaChange:function(e){var t,n=this;e.senderId!==this.socketId&&(o.Book.exists(e.bookId)&&(t=o.Book.find(e.bookId),n.trigger("bookChange",e.message)),e.closeConnection&&this.socket.close())},handleSyncTime:function(e){a.singleton.sync(e.timestamp)},handleSideEffects:function(e){Fieldbook.models.Model.handleSideEffects(e.sideEffects)},handleJobSuccess:function(e){h.controller.onJobSuccess(e.requestId,e.result)},handleJobError:function(e){h.controller.onJobError(e.requestId,e.error)},handleJobProgress:function(e){h.controller.onJobProgress(e.requestId,e.progress)}});m.changes=0,m.ignoredChanges=0,m.error="",_.extend(m.prototype,i.Events)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../common/strings":249,"../common/syncedTime":250,"../common/version":258,"./actionQueue":1,"./csrf":6,"./globalEvents":22,"./models":47,"./models/deferredRequestController":37,backbone:"backbone","node-uuid":695}],5:[function(e,t){(function(n){"use strict";var i=(e("backbone"),{bubble:function(e,t){var i=this;if(_.isArray(e))_.each(e,function(e){i.bubble(e,t)});else{var r=t.split(/\s+/);n._getUnderscore(r).each(function(t){"all"===t?i.listenTo(e,t,_.bind(i.trigger,i)):i.listenTo(e,t,_.bind(i.trigger,i,t))})}}}),r=function(e){return _.defaults(e.prototype,i),e};t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{backbone:"backbone"}],6:[function(e,t,n){"use strict";var i="X-CSRF-Token";n.headers=function(){var e={};return this.token&&(e[i]=this.token),e},n.addToken=function(e){this.token&&e.setRequestHeader(i,this.token)}},{}],7:[function(e,t){(function(e){"use strict";e.dev=e.dev||O({add:function(e,t){Object.defineProperty(this,e,{get:t})}}),t.exports=e.dev,dev.$=function(){return document.querySelector.apply(document,arguments)},dev.drawBox=function(e,t,i){e=n(e),i=null==i?.5:i,t=t||"orange";var r=$("<div>").addClass("debug-box");return r.css({position:"fixed",top:e.top,left:e.left,width:e.width,height:e.height,opacity:i,background:t,zIndex:1e5,pointerEvents:"none"}),$("body").append(r),r},dev.clearBoxes=function(){$(".debug-box").remove()};var n=function(e){return e instanceof jQuery?e.bounds():"nodeType"in e?$(e).bounds():e};dev.add("_",function(){return _(this)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t){"use strict";var n=e("../common/strings"),i=function(e){var i="set"+n.capitalize(e);t.exports[i]=function(n){t.exports[e]=n}};i("enablePerformanceMetrics"),i("remotePerformanceReportThreshold"),i("useAlertForErrors"),i("disableExceptionCatching"),i("droppableTolerance"),i("disableDropzone")},{"../common/strings":249}],9:[function(e,t){"use strict";var n=e("../common/errors.js");n.NeedsLogin=n.AppError.extend({name:"NeedsLogin"}),n.ServerError=n.AppError.extend({name:"ServerError",initialize:function(e,t){this.message=e,this.networkReport=t}}),n.ModelRemoved=n.AppError.extend({name:"ModelRemovedError",initialize:function(e){this.message=e+" was removed",this.modelType=e}}),t.exports=n},{"../common/errors.js":242}],10:[function(e,t){"use strict";var n=e("backbone");t.exports=function(e){return _.extend(e.prototype,n.Events),e}},{backbone:"backbone"}],11:[function(e){"use strict";var t=e("fastclick");t(document.body)},{fastclick:662}],12:[function(e,t){(function(n){"use strict";var i=e("../views/view"),r=e("../views/autocompleteDelegateHelper"),o=e("../views/fastAutocompleteView"),s=e("../keys"),a=e("../../common/constants"),l=e("../views/geometry"),c=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/attachmentUploader"),u=1,d=0,h=i,f=t.exports=h.extend({className:"form-view",initialize:function(){this.pickProperties(),this.autocompleteViews={},this.imageDataUris={},this.imageFiles={}},render:function(){this.$form.each(function(e,t){t=$(t),t.append('<input type="submit" tab-index="-1">')})},keyForInput:function(e){return this.closestComponent(e,"$fields").data("key")},gatherAttributes:function(){var e=this,t={};return n._getUnderscore(this.$inputs).each(function(n){var i=e.canonicalValueForInput($(n));t[n.name]=e.parseInputFromElement(n,i)}),t},clearForm:function(){n._getUnderscore(this.$form).invoke("reset")},showFormValidationMessage:function(){this.$formValidationMessage.show(),this.$saveButtons.addClass("disabled"),this.$saveButtons.blur()},unlockForm:function(){this.$formValidationMessage.hide(),this.$saveButtons.removeClass("disabled")},onSave:function(e,t){return this.updateValidationForAllInputs(),this.isAnyInputInvalid()?void this.showFormValidationMessage():void this.saveRecord({goToRecord:!0,target:t})},onSaveAndNew:function(e,t){return this.updateValidationForAllInputs(),this.isAnyInputInvalid()?void this.showFormValidationMessage():void this.saveRecord({goToRecord:!1,target:t})},showAutocomplete:function(e){var t=this.findOrCreateAutocompleteView(e);t.render()},removeCommaIfNeeded:function(e){var t=e.val();t=t.replace(/,\s*$/,""),e.val(t)},appendCommaIfNeeded:function(e){var t=e.prop("selectionEnd"),n=e.val().length;n&&t===n&&(this.removeCommaIfNeeded(e),e.val(e.val()+", "))},hideAutocomplete:function(e){if(this.hasActiveAutocomplete(e)){var t=this.keyForInput(e),n=this.autocompleteViews[t];n.remove(),this.autocompleteViews[t]=void 0}},hasActiveAutocomplete:function(e){var t=this.keyForInput(e);return!!this.autocompleteViews[t]},findOrCreateAutocompleteView:function(e){var t=this.keyForInput(e),n=this.autocompleteViews[t];if(n)return n;var i=new this.constructor.FormAutocompleteDelegate({formView:this,input:e});n=new o({input:e,delegate:i,chitMode:!0}),this.autocompleteViews[t]=n,i.autocompleteView=n,this.$el.append(n.el);var r=e.bounds();r=l.rectRelativeToRect(r,this.$el.bounds());var s=this.el.scrollTop;return n.$el.css({position:"absolute",left:r.left-d,top:r.bottom+u+s}),n.update(),n},canonicalValueForInput:function(e){return this.getValidatorForInput(e).canonicalValue()},formatOptionsForInput:function(e){var t=this.keyForInput(e);return this.formatOptionsForFieldKey(t)},updateValidationForInput:function(e){var t=this.canonicalValueForInput(e),n=!t.isInputError();this.clearValidationForInput(e);var i=e.closest(".control-group"),r=i.find(".help-inline");if(n){var o=this.formatOptionsForInput(e);e.val(t.displayValue(o))}else{var s=t.getError();i.addClass("error"),r.text(s.getMessage())}},focusNextInputFrom:function(e){var t=this.$focusable,n=t.index(e),i=t.eq(n+1);i.focus()},clearValidationForInput:function(e){var t=e.closest(".control-group"),n=t.find(".help-inline");t.removeClass("error"),n.empty()},updateValidationForAllInputs:function(){var e=this;n._getUnderscore(this.$inputs).each(function(t){e.updateValidationForInput($(t))})},isAnyInputInvalid:function(){var e=this;return n._getUnderscore(this.$inputs).any(function(t){var n=e.canonicalValueForInput($(t));return n.isInputError()})},hideAutocompleteAndFocusNext:function(e,t){!function(n){if(1===n){t=e;var i=[];e=i[0]}}(arguments.length),this.hideAutocomplete(t),this.focusNextInputFrom(t)},onUploadInputChange:function(e,t){n._getUnderscore(t).soak("0.files.length")&&(this.setFile(t,t[0].files),this.updateImagePreviewFromFile(t),this.qUploadImageFromInput(t).done())},qGetDataUri:function(e){var t=n._getUnderscore(e).soak("0.files.0");return t?Q.Promise(function(e,n){var i=new FileReader;i.onload=e,i.onerror=n,i.readAsDataURL(t)}).then(function(e){return e.target.result}):Q()},normalizeKey:function(e,t){var i;i=n._getUnderscore(t).isString()?t:this.keyForInput(t);var r=n._getUnderscore(arguments).tail();return r[0]=i,e.apply(this,r)},getFile:function(e){return this.imageFiles[e]}.wrap("normalizeKey"),setFile:function(e,t){return null!==n._getUnderscore(t).soak("length")&&(t=t[0]),this.imageFiles[e]=t}.wrap("normalizeKey"),updateImagePreviewFromFile:function(e){var t=this,n=this.findCousin(e,"$fields","$imagePreview");return this.qGetDataUri(e).then(function(i){if(i)n.attr("src",i);else{n.removeAttr("src");var r=t.findCousin(e,"$fields","$imageUrlField");r.val(""),t.updateValidationForInput(e)}}).done()},qUploadImageFromInput:function(e){var t=this,n=this.getFile(e);if(!n)return Q();var i=void 0,r=this.closestComponent(e,"$form"),o=new c({formData:new FormData(r[0]),filename:n.name,formId:t.getFormId()});return o.qImportFile().then(function(n){i=n;var r=t.findCousin(e,"$fields","$imageUrlField");return r.val(n),t.qGetDataUri(e)}).then(function(e){t.imageDataUris[i]=e})},removeDropzoneHighlight:function(e,t){var n=this.findCousin(t,"$fields","$dropzone");n.removeClass("dragover")},events:{"click .save":"onSave","click .save-and-new":"onSaveAndNew","blur .user-form-input":function(e,t){this.updateValidationForInput(t)},"click $hiddenSubmit":function(e){e.preventDefault(),this.$saveButtons.first().click()},"change select.user-form-input":function(e,t){this.updateValidationForInput(t),this.unlockForm()},"keydown $inputs":function(e,t){s.isModKeyEvent(e)||(this.clearValidationForInput(t),this.unlockForm())},"submit form":function(e){this.onSave(),e.preventDefault()},"focus $joinInputs":function(e,t){this.onNextTick(function(){this.appendCommaIfNeeded(t),this.showAutocomplete(t)})},"blur $joinInputs":function(e,t){this.removeCommaIfNeeded(t),this.hideAutocomplete(t)},"keydown $joinInputs":function(e,t){return e.keyCode===s.ESC?(this.hideAutocomplete(t),void e.preventDefault()):e.keyCode===s.RETURN&&this.hasActiveAutocomplete(t)?(this.focusNextInputFrom(t),void e.preventDefault()):void(s.isModKeyEvent(e)||this.hasActiveAutocomplete(t)||this.showAutocomplete(t))},"autocomplete-key-enter $joinInputs":"hideAutocompleteAndFocusNext","change $fileInput":"onUploadInputChange","click $clearImageButton":function(e,t){var n=this.findCousin(t,"$fields","$fileInput"),i=this.findCousin(n,"$fields","$imageUrlField");this.setFile(t,null),n.val(""),i.val(""),n.trigger("change"),this.clearValidationForInput(i),this.updateImagePreviewFromFile(n)},"blur $imageUrlField":function(e,t){var n=this.findCousin(t,"$fields","$imagePreview"),i=t.val();i=this.imageDataUris[i]||i,i?n.attr("src",i):n.removeAttr("src")},"dragenter $fileInput":function(e,t){var n=this.findCousin(t,"$fields","$dropzone");n.addClass("dragover")},"dragleave $fileInput":"removeDropzoneHighlight","dragexit $fileInput":"removeDropzoneHighlight","dragend $fileInput":"removeDropzoneHighlight","drop $fileInput":"removeDropzoneHighlight"}}).addComponents({form:"form",inputs:".field .user-form-input",joinInputs:".join-field-input",hiddenSubmit:'input[type="submit"]',formValidationMessage:".form-validation-message",focusable:".field .user-form-input, .btn",fieldsContainer:".fields",fields:".field.control-group",saveButtons:".btn.save, .btn.save-and-new",errorMessage:".help-inline",fileInput:".file-upload-input",dropzone:".form-image-dropzone",imagePreview:".form-image-preview",imageUrlField:".form-image-url",clearImageButton:".clear-image-button"}),p=function(e){_.thrower("Must implement "+e)},m=function(e,t){n._getUnderscore(t).each(function(t){e[t]=p(t)})};m(f.prototype,["parseInputFromElement","formatOptionsForFieldKey","goToRecord","saveRecord","getValidatorForInput","getFormId"]),f.FormAutocompleteDelegate=BaseObject.extend({constructorName:"formAutocompleteDelegate",chitMode:function(){return this.formView.isComponent(this.input,"$joinInputs")},initialize:function(){this.helper=new r({delegate:this})},autoselectTypes:r.autoselectTypes,renderAutocompleteValue:function(e){return this.helper.renderAutocompleteValue(e)},hasActiveAutocomplete:function(){return this.helper.hasActiveAutocomplete()},getRawValue:function(){return this.input.val()},acceptValue:function(e){this.helper.acceptValue(this.chitMode(),this.input,e)},getQueryValue:function(){return this.helper.getQueryValue(this.chitMode())},shouldSelectFirstItemOnDisplay:function(e,t){return this.helper.shouldSelectFirstItemOnDisplay(this.chitMode(),e,t)},getValueWithCursor:function(e){return this.helper.getValueWithCursor(this.input,e)},autocompleteValues:function(e){return this.helper.autocompleteValues(this.chitMode(),e)},shouldOfferAutocompletions:function(e){return e.length<=a.MAX_AUTOCOMPLETE_LENGTH}}).addProperties("formView","input"),m(f.FormAutocompleteDelegate.prototype,["getCompletionValuesForQuery"])}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/constants":239,"../keys":25,"../views/autocompleteDelegateHelper":125,"../views/fastAutocompleteView":160,"../views/geometry":183,"../views/view":236,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/attachmentUploader":123}],13:[function(e,t){(function(n){"use strict";var i=e("./baseFormView"),r=e("../../common/values"),o=e("../csrf"),s=e("backbone"),a=e("../views/view"),l=(e("../parser").cursorToken,e("../viewModels/refCompletion")),c=e("../models/account"),u=i,d=t.exports=u.extend({initialize:function(){this.setElement(this.options.element)}.after(u.prototype.initialize),parseInputFromElement:function(e,t){return e=$(e),this.isComponent(e,"$joinInputs")?this.parseJoinValue(t,e):r.create(t)},parseJoinValue:function(e,t){var n=this;return r.stringToRef(e.displayValue(),function(e){return n.valueForName(e,t)})},formFieldForKey:function(e){return n._getUnderscore(this.fields).find({key:e})},formatOptionsForFieldKey:function(e){var t=this.formFieldForKey(e);return t.formatOptions},getValidatorForInput:function(e){var t=this.keyForInput(e),n=this.formFieldForKey(t),i=e.val();return r.createValidator(n.validation,{input:i,"enum":n.enum,required:n.required,localeOptions:c.account.localeOptions()})},nameMapForElement:function(e){var t=e.data("linkedSheetIndex"),n=ExternalForm.recordNameMaps[t];if(!n)throw new Error("No mapping for linked sheet index: "+t+", field key: "+this.keyForInput(e));return n},valueForName:function(e,t){var n=this.nameMapForElement(t),i=n[e];return r.makeRef(i,"REDACTED",e)},renderSuccess:function(){this.$el.html(a.templates.formSubmitSuccess()),document.body.scrollTop=0},getFormId:function(){return ExternalForm.uuid},saveRecord:function(e){var t=this,n=e.target,i=this.gatherAttributes();this.addSpinner(n,this.greyButtonSpinnerOptions),i._csrf=o.token,s.ajax({type:"POST",url:ExternalForm.endpoint,data:JSON.stringify(i),contentType:"application/json",success:function(){t.stopSpinning(n),t.renderSuccess()},error:this.errorHandler({action:"submit-form",bare:!0})})}}).addProperties("fields");d.FormAutocompleteDelegate=i.FormAutocompleteDelegate.extend({constructorName:"externalFormAutocompleteDelegate",getCompletionValuesForQuery:function(e){var t=this.formView.nameMapForElement(this.input),i=n._getUnderscore(t).keys();return l.autocomplete({query:e,recordNames:i})}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/values":253,"../csrf":6,"../models/account":27,"../parser":74,"../viewModels/refCompletion":106,"../views/view":236,"./baseFormView":12,backbone:"backbone"}],14:[function(e,t,n){(function(t){"use strict";var i=e("../../common/values");n.parse=function(e){return e.map(function(e){if(e){var n={};return t._getUnderscore(e).each(function(e){var t=i.parseType(e.name).displayValue();n[t]=e.id}),n}})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/values":253}],15:[function(e,t,n){(function(i){var r=function(){function t(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,word:3,WORD:4,cmd:5,SOLOCURSOR:6,'"':7,"'":8,ARGS:9,output:10,$accept:0,$end:1},terminals_:{2:"error",4:"WORD",6:"SOLOCURSOR",7:'"',8:"'",9:"ARGS"},productions_:[0,[3,1],[3,2],[5,1],[5,1],[5,3],[5,3],[5,2],[5,2],[5,2],[10,1]],performAction:function(e,t,n,i,r,o){var s=o.length-1;switch(r){case 2:return o[s-1]+o[s];case 3:return null;case 4:return i.makeCommand("","%%TOKEN%% "+o[s]);case 5:return i.makeCommand("","%%TOKEN%% "+o[s-2]+o[s-1]+o[s]);case 6:return i.makeCommand("","%%TOKEN%% "+o[s-2]+o[s-1]+o[s]);case 7:return i.makeCommand("","%%TOKEN%% "+o[s-1]+o[s]);case 8:return i.makeCommand("","%%TOKEN%% "+o[s-1]+o[s]);case 9:return i.makeCommand(o[s-1],o[s]);case 10:return o[s]}},table:[{3:4,4:[1,7],5:2,6:[1,3],7:[1,5],8:[1,6],10:1},{1:[3]},{1:[2,10]},{1:[2,3]},{1:[2,4],4:[1,9],9:[1,8]},{3:10,4:[1,7]},{3:11,4:[1,7]},{1:[2,1],4:[2,1],7:[2,1],8:[2,1],9:[2,1]},{1:[2,9]},{1:[2,2],4:[2,2],7:[2,2],8:[2,2],9:[2,2]},{1:[2,7],4:[1,9],7:[1,12]},{1:[2,8],4:[1,9],8:[1,13]},{1:[2,5]},{1:[2,6]}],defaultActions:{2:[2,10],3:[2,3],8:[2,9],12:[2,5],13:[2,6]},parseError:function(e,t){if(!t.recoverable)throw new Error(e);this.trace(e)},parse:function(e){function t(){var e;return e=n.lexer.lex()||h,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,i=[0],r=[null],o=[],s=this.table,a="",l=0,c=0,u=0,d=2,h=1;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var f=this.lexer.yylloc;o.push(f);var p=this.lexer.options&&this.lexer.options.ranges;this.parseError="function"==typeof this.yy.parseError?this.yy.parseError:Object.getPrototypeOf(this).parseError;for(var m,g,v,b,y,w,x,k,_,S={};;){if(v=i[i.length-1],this.defaultActions[v]?b=this.defaultActions[v]:((null===m||"undefined"==typeof m)&&(m=t()),b=s[v]&&s[v][m]),"undefined"==typeof b||!b.length||!b[0]){var C="";_=[];for(w in s[v])this.terminals_[w]&&w>d&&_.push("'"+this.terminals_[w]+"'");C=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+_.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(l+1)+": Unexpected "+(m==h?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[m]||m,line:this.lexer.yylineno,loc:f,expected:_})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+m);switch(b[0]){case 1:i.push(m),r.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(b[1]),m=null,g?(m=g,g=null):(c=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,f=this.lexer.yylloc,u>0&&u--);break;case 2:if(x=this.productions_[b[1]][1],S.$=r[r.length-x],S._$={first_line:o[o.length-(x||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(x||1)].first_column,last_column:o[o.length-1].last_column},p&&(S._$.range=[o[o.length-(x||1)].range[0],o[o.length-1].range[1]]),y=this.performAction.call(S,a,c,l,this.yy,b[1],r,o),"undefined"!=typeof y)return y;x&&(i=i.slice(0,-1*x*2),r=r.slice(0,-1*x),o=o.slice(0,-1*x)),i.push(this.productions_[b[1]][0]),r.push(S.$),o.push(S._$),k=s[i[i.length-2]][i[i.length-1]],i.push(k);
break;case 3:return!0}}return!0}},i=function(){var t={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),i=e[0].match(/(?:\r\n?|\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in r)this[o]=r[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,i;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;o<r.length;o++)if(n=this._input.match(this.rules[r[o]]),n&&(!t||n[0].length>t[0].length)){if(t=n,i=o,this.options.backtrack_lexer){if(e=this.test_match(n,r[o]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?(e=this.test_match(t,r[i]),e!==!1?e:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,n,i,r){var o=e("./expressionParser").parse;t.makeCommand=function(e,t){var n=-1!==e.indexOf("‸");e=e.replace("‸",""),":"===e.slice(-1)&&(e=e.slice(0,-1),t="%%TOKEN%% "+t),"("===t[0]&&(t=t.slice(1),t=t.replace(/\)\s*‸?\s*$/,""));var i=o(t);return{cmd:e,cursor:n||i.cursor||_.chain(i).pluck("cursor").any(_.identity).value(),arguments:i}};switch(i){case 0:return 6;case 1:return this.begin("ARGS"),4;case 2:return this.begin("QUOTE"),"'";case 3:return this.popState(),"'";case 4:this.begin("ESC");break;case 5:return 4;case 6:return this.begin("DBLQUOTE"),7;case 7:return this.popState(),7;case 8:this.begin("ESC");break;case 9:return 4;case 10:return this.popState(),4;case 11:return":";case 12:return 9;case 13:this.begin("PAREN");break;case 14:return 9;case 15:return}},rules:[/^(?:^‸$)/,/^(?:[_‸0-9A-Za-zA-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]+:?)/,/^(?:')/,/^(?:')/,/^(?:\\)/,/^(?:[^'\\]+)/,/^(?:")/,/^(?:")/,/^(?:\\)/,/^(?:[^"\\]+)/,/^(?:.)/,/^(?:":)/,/^(?:.+)/,/^(?:\()/,/^(?:[^\)]+)/,/^(?:\))/],conditions:{ARGS:{rules:[12,13],inclusive:!1},ESC:{rules:[10],inclusive:!1},DBLQUOTE:{rules:[7,8,9],inclusive:!1},QUOTE:{rules:[3,4,5],inclusive:!1},PAREN:{rules:[14,15],inclusive:!1},INITIAL:{rules:[0,1,2,6,11],inclusive:!0}}};return t}();return n.lexer=i,t.prototype=n,n.Parser=t,new t}();"undefined"!=typeof e&&"undefined"!=typeof n&&(n.parser=r,n.Parser=r.Parser,n.parse=function(){return r.parse.apply(r,arguments)},n.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),i.exit(1));var r=e("fs").readFileSync(e("path").normalize(t[1]),"utf8");return n.parser.parse(r)},"undefined"!=typeof t&&e.main===t&&n.main(i.argv.slice(1)))}).call(this,e("_process"))},{"./expressionParser":16,_process:705,fs:602,path:702}],16:[function(e,t,n){(function(i){var r=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,empty:3,"boolean":4,TRUE:5,FALSE:6,string:7,CHARS:8,BACKSLASH_CHARS:9,quotedstring:10,"'":11,'"':12,REGEXQUOTE:13,cursorquoted:14,CURSOR:15,EOF:16,token:17,WORD:18,NUMBER:19,cursortoken:20,field:21,dotexpr:22,".":23,cursordotexpr:24,value:25,cursorvalue:26,expr:27,"(":28,")":29,"+":30,"-":31,"*":32,"/":33,"^":34,"**":35,":":36,"=":37,"<":38,">":39,"<=":40,">=":41,"!=":42,"<>":43,and:44,"&&":45,"&":46,or:47,"||":48,"|":49,not:50,"!":51,"if":52,then:53,"else":54,asc:55,desc:56,arguments:57,cursorexpr:58,openfn:59,closedcursorarguments:60,"CURSOR(":61,cursorarguments:62,missingop:63,nonemptyarguments:64,",":65,cursorargument:66,opencursorarguments:67,cursorformula:68,output:69,TOKEN:70,FORMULA:71,$accept:0,$end:1},terminals_:{2:"error",5:"TRUE",6:"FALSE",8:"CHARS",9:"BACKSLASH_CHARS",11:"'",12:'"',13:"REGEXQUOTE",15:"CURSOR",16:"EOF",18:"WORD",19:"NUMBER",23:".",28:"(",29:")",30:"+",31:"-",32:"*",33:"/",34:"^",35:"**",36:":",37:"=",38:"<",39:">",40:"<=",41:">=",42:"!=",43:"<>",44:"and",45:"&&",46:"&",47:"or",48:"||",49:"|",50:"not",51:"!",52:"if",53:"then",54:"else",55:"asc",56:"desc",61:"CURSOR(",65:",",70:"TOKEN",71:"FORMULA"},productions_:[0,[3,0],[4,1],[4,1],[7,1],[7,2],[7,2],[10,3],[10,3],[10,3],[14,5],[14,5],[14,5],[14,5],[14,5],[14,5],[17,1],[17,1],[17,1],[17,1],[20,2],[20,1],[21,1],[22,1],[22,3],[24,3],[25,1],[25,1],[25,1],[25,1],[26,1],[27,1],[27,1],[27,3],[27,3],[27,3],[27,3],[27,3],[27,3],[27,3],[27,2],[27,3],[27,3],[27,3],[27,3],[27,3],[27,3],[27,3],[27,3],[27,3],[27,3],[27,3],[27,3],[27,3],[27,3],[27,2],[27,2],[27,4],[27,6],[27,2],[27,2],[27,4],[58,1],[58,1],[58,2],[58,2],[58,2],[58,3],[58,3],[58,3],[58,3],[58,4],[58,3],[58,3],[58,3],[58,4],[58,3],[58,3],[58,3],[58,4],[58,3],[58,3],[58,3],[58,4],[58,3],[58,3],[58,3],[58,4],[58,3],[58,3],[58,3],[58,4],[58,3],[58,3],[58,3],[58,4],[58,3],[58,3],[58,3],[58,4],[58,3],[58,3],[58,3],[58,4],[58,3],[58,3],[58,3],[58,4],[58,3],[58,3],[58,3],[58,4],[58,3],[58,3],[58,3],[58,4],[58,3],[58,3],[58,3],[58,4],[58,3],[58,3],[58,3],[58,4],[58,3],[58,3],[58,3],[58,4],[58,3],[58,3],[58,3],[58,4],[58,3],[58,3],[58,3],[58,4],[58,3],[58,3],[58,3],[58,4],[58,3],[58,3],[58,3],[58,4],[58,3],[58,3],[58,3],[58,2],[58,2],[58,3],[58,2],[58,2],[58,3],[58,2],[58,2],[58,3],[58,2],[58,2],[58,2],[58,2],[58,3],[58,4],[58,4],[58,5],[58,6],[58,6],[58,7],[58,5],[58,4],[58,4],[59,3],[59,3],[59,3],[63,3],[63,4],[63,4],[63,4],[63,4],[63,4],[63,4],[63,4],[63,4],[63,4],[63,4],[63,4],[63,4],[63,4],[63,4],[63,4],[63,4],[63,4],[63,4],[63,4],[64,1],[64,3],[64,2],[57,1],[57,1],[66,1],[66,1],[60,1],[60,3],[60,3],[60,3],[67,1],[67,3],[62,1],[62,1],[68,1],[68,1],[68,1],[69,0],[69,1],[69,1],[69,2],[69,2],[69,2],[69,1],[69,2],[69,2],[69,2]],performAction:function(e,t,n,i,r,o){var s=o.length-1;switch(r){case 4:this.$="";break;case 5:this.$=o[s-1].concat(o[s]);break;case 6:this.$=o[s-1].concat("\\",o[s]);break;case 7:this.$={op:"'",val:o[s-1]};break;case 8:this.$={op:'"',val:o[s-1]};break;case 9:this.$={op:"re",val:o[s-1]};break;case 10:this.$={op:"'",val:o[s-3],cursor:!0};break;case 11:this.$={op:'"',val:o[s-3],cursor:!0};break;case 12:this.$={op:"re",val:o[s-3],cursor:!0};break;case 13:this.$={op:"'",val:o[s-3],cursor:!0};break;case 14:this.$={op:'"',val:o[s-3],cursor:!0};break;case 15:this.$={op:"re",val:o[s-3],cursor:!0};break;case 16:this.$={op:"bareword",val:o[s]};break;case 17:this.$={op:"bareword",val:o[s]};break;case 18:this.$={op:"bareword",val:o[s]};break;case 20:this.$=_.extend(o[s-1],{cursor:!0});break;case 22:this.$={field:o[s]};break;case 24:this.$={op:".",expr1:o[s-2],expr2:o[s]};break;case 25:this.$={op:".",expr1:o[s-2],expr2:{cursor:!0},cursor:!0};break;case 26:this.$={op:"bareword",val:!0};break;case 27:this.$={op:"bareword",val:!1};break;case 28:this.$={op:"bareword",val:parseFloat(o[s])};break;case 33:this.$={op:"(",expr:o[s-1]};break;case 34:this.$={op:"+",expr1:o[s-2],expr2:o[s]};break;case 35:this.$={op:"-",expr1:o[s-2],expr2:o[s]};break;case 36:this.$={op:"*",expr1:o[s-2],expr2:o[s]};break;case 37:this.$={op:"/",expr1:o[s-2],expr2:o[s]};break;case 38:this.$={op:"^",expr1:o[s-2],expr2:o[s]};break;case 39:this.$={op:"**",expr1:o[s-2],expr2:o[s]};break;case 40:this.$={op:"neg",expr:o[s]};break;case 41:this.$={op:":",expr1:o[s-2],expr2:o[s]};break;case 42:this.$={op:"=",expr1:o[s-2],expr2:o[s]};break;case 43:this.$={op:"<",expr1:o[s-2],expr2:o[s]};break;case 44:this.$={op:">",expr1:o[s-2],expr2:o[s]};break;case 45:this.$={op:"<=",expr1:o[s-2],expr2:o[s]};break;case 46:this.$={op:">=",expr1:o[s-2],expr2:o[s]};break;case 47:this.$={op:"!=",expr1:o[s-2],expr2:o[s]};break;case 48:this.$={op:"<>",expr1:o[s-2],expr2:o[s]};break;case 49:this.$={op:"and",expr1:o[s-2],expr2:o[s]};break;case 50:this.$={op:"&&",expr1:o[s-2],expr2:o[s]};break;case 51:this.$={op:"&",expr1:o[s-2],expr2:o[s]};break;case 52:this.$={op:"or",expr1:o[s-2],expr2:o[s]};break;case 53:this.$={op:"||",expr1:o[s-2],expr2:o[s]};break;case 54:this.$={op:"|",expr1:o[s-2],expr2:o[s]};break;case 55:this.$={op:"not",expr:o[s]};break;case 56:this.$={op:"!",expr:o[s]};break;case 57:this.$={op:"if",cond:o[s-2],then:o[s]};break;case 58:this.$={op:"if",cond:o[s-4],then:o[s-2],"else":o[s]};break;case 59:this.$={op:"order",ascending:!0,expr1:o[s-1]};break;case 60:this.$={op:"order",ascending:!1,expr1:o[s-1]};break;case 61:this.$={op:"fn",name:o[s-3],arguments:o[s-1]};break;case 64:this.$=_.extend(o[s-1],{cursor:!0});break;case 65:this.$={cursor:!0,op:"(",expr:{cursor:!0}};break;case 66:this.$={cursor:!0,op:"(",expr:o[s]};break;case 67:this.$={cursor:!0,op:"(",expr:o[s-1]};break;case 68:this.$={cursor:!0,op:"(",expr:o[s-1]};break;case 69:this.$={cursor:!0,op:"+",expr1:o[s-2],expr2:{cursor:!0}};break;case 70:this.$={cursor:!0,op:"+",expr1:o[s-2],expr2:o[s]};break;case 71:this.$={cursor:!0,op:"+",expr1:o[s-3],expr2:o[s-1]};break;case 72:this.$={cursor:!0,op:"+",expr1:o[s-2],expr2:o[s]};break;case 73:this.$={cursor:!0,op:"-",expr1:o[s-2],expr2:{cursor:!0}};break;case 74:this.$={cursor:!0,op:"-",expr1:o[s-2],expr2:o[s]};break;case 75:this.$={cursor:!0,op:"-",expr1:o[s-3],expr2:o[s-1]};break;case 76:this.$={cursor:!0,op:"-",expr1:o[s-2],expr2:o[s]};break;case 77:this.$={cursor:!0,op:"*",expr1:o[s-2],expr2:{cursor:!0}};break;case 78:this.$={cursor:!0,op:"*",expr1:o[s-2],expr2:o[s]};break;case 79:this.$={cursor:!0,op:"*",expr1:o[s-3],expr2:o[s-1]};break;case 80:this.$={cursor:!0,op:"*",expr1:o[s-2],expr2:o[s]};break;case 81:this.$={cursor:!0,op:"/",expr1:o[s-2],expr2:{cursor:!0}};break;case 82:this.$={cursor:!0,op:"/",expr1:o[s-2],expr2:o[s]};break;case 83:this.$={cursor:!0,op:"/",expr1:o[s-3],expr2:o[s-1]};break;case 84:this.$={cursor:!0,op:"/",expr1:o[s-2],expr2:o[s]};break;case 85:this.$={cursor:!0,op:"^",expr1:o[s-2],expr2:{cursor:!0}};break;case 86:this.$={cursor:!0,op:"^",expr1:o[s-2],expr2:o[s]};break;case 87:this.$={cursor:!0,op:"^",expr1:o[s-3],expr2:o[s-1]};break;case 88:this.$={cursor:!0,op:"^",expr1:o[s-2],expr2:o[s]};break;case 89:this.$={cursor:!0,op:"**",expr1:o[s-2],expr2:{cursor:!0}};break;case 90:this.$={cursor:!0,op:"**",expr1:o[s-2],expr2:o[s]};break;case 91:this.$={cursor:!0,op:"**",expr1:o[s-3],expr2:o[s-1]};break;case 92:this.$={cursor:!0,op:"**",expr1:o[s-2],expr2:o[s]};break;case 93:this.$={cursor:!0,op:"<=",expr1:o[s-2],expr2:{cursor:!0}};break;case 94:this.$={cursor:!0,op:"<=",expr1:o[s-2],expr2:o[s]};break;case 95:this.$={cursor:!0,op:"<=",expr1:o[s-3],expr2:o[s-1]};break;case 96:this.$={cursor:!0,op:"<=",expr1:o[s-2],expr2:o[s]};break;case 97:this.$={cursor:!0,op:">=",expr1:o[s-2],expr2:{cursor:!0}};break;case 98:this.$={cursor:!0,op:">=",expr1:o[s-2],expr2:o[s]};break;case 99:this.$={cursor:!0,op:">=",expr1:o[s-3],expr2:o[s-1]};break;case 100:this.$={cursor:!0,op:">=",expr1:o[s-2],expr2:o[s]};break;case 101:this.$={cursor:!0,op:"<>",expr1:o[s-2],expr2:{cursor:!0}};break;case 102:this.$={cursor:!0,op:"<>",expr1:o[s-2],expr2:o[s]};break;case 103:this.$={cursor:!0,op:"<>",expr1:o[s-3],expr2:o[s-1]};break;case 104:this.$={cursor:!0,op:"<>",expr1:o[s-2],expr2:o[s]};break;case 105:this.$={cursor:!0,op:"!=",expr1:o[s-2],expr2:{cursor:!0}};break;case 106:this.$={cursor:!0,op:"!=",expr1:o[s-2],expr2:o[s]};break;case 107:this.$={cursor:!0,op:"!=",expr1:o[s-3],expr2:o[s-1]};break;case 108:this.$={cursor:!0,op:"!=",expr1:o[s-2],expr2:o[s]};break;case 109:this.$={cursor:!0,op:"and",expr1:o[s-2],expr2:{cursor:!0}};break;case 110:this.$={cursor:!0,op:"and",expr1:o[s-2],expr2:o[s]};break;case 111:this.$={cursor:!0,op:"and",expr1:o[s-3],expr2:o[s-1]};break;case 112:this.$={cursor:!0,op:"and",expr1:o[s-2],expr2:o[s]};break;case 113:this.$={cursor:!0,op:"&&",expr1:o[s-2],expr2:{cursor:!0}};break;case 114:this.$={cursor:!0,op:"&&",expr1:o[s-2],expr2:o[s]};break;case 115:this.$={cursor:!0,op:"&&",expr1:o[s-3],expr2:o[s-1]};break;case 116:this.$={cursor:!0,op:"&&",expr1:o[s-2],expr2:o[s]};break;case 117:this.$={cursor:!0,op:"or",expr1:o[s-2],expr2:{cursor:!0}};break;case 118:this.$={cursor:!0,op:"or",expr1:o[s-2],expr2:o[s]};break;case 119:this.$={cursor:!0,op:"or",expr1:o[s-3],expr2:o[s-1]};break;case 120:this.$={cursor:!0,op:"or",expr1:o[s-2],expr2:o[s]};break;case 121:this.$={cursor:!0,op:"||",expr1:o[s-2],expr2:{cursor:!0}};break;case 122:this.$={cursor:!0,op:"||",expr1:o[s-2],expr2:o[s]};break;case 123:this.$={cursor:!0,op:"||",expr1:o[s-3],expr2:o[s-1]};break;case 124:this.$={cursor:!0,op:"||",expr1:o[s-2],expr2:o[s]};break;case 125:this.$={cursor:!0,op:"&",expr1:o[s-2],expr2:{cursor:!0}};break;case 126:this.$={cursor:!0,op:"&",expr1:o[s-2],expr2:o[s]};break;case 127:this.$={cursor:!0,op:"&",expr1:o[s-3],expr2:o[s-1]};break;case 128:this.$={cursor:!0,op:"&",expr1:o[s-2],expr2:o[s]};break;case 129:this.$={cursor:!0,op:"|",expr1:o[s-2],expr2:{cursor:!0}};break;case 130:this.$={cursor:!0,op:"|",expr1:o[s-2],expr2:o[s]};break;case 131:this.$={cursor:!0,op:"|",expr1:o[s-3],expr2:o[s-1]};break;case 132:this.$={cursor:!0,op:"|",expr1:o[s-2],expr2:o[s]};break;case 133:this.$={cursor:!0,op:"=",expr1:o[s-2],expr2:{cursor:!0}};break;case 134:this.$={cursor:!0,op:"=",expr1:o[s-2],expr2:o[s]};break;case 135:this.$={cursor:!0,op:"=",expr1:o[s-3],expr2:o[s-1]};break;case 136:this.$={cursor:!0,op:"=",expr1:o[s-2],expr2:o[s]};break;case 137:this.$={cursor:!0,op:">",expr1:o[s-2],expr2:{cursor:!0}};break;case 138:this.$={cursor:!0,op:">",expr1:o[s-2],expr2:o[s]};break;case 139:this.$={cursor:!0,op:">",expr1:o[s-3],expr2:o[s-1]};break;case 140:this.$={cursor:!0,op:">",expr1:o[s-2],expr2:o[s]};break;case 141:this.$={cursor:!0,op:"<",expr1:o[s-2],expr2:{cursor:!0}};break;case 142:this.$={cursor:!0,op:"<",expr1:o[s-2],expr2:o[s]};break;case 143:this.$={cursor:!0,op:"<",expr1:o[s-3],expr2:o[s-1]};break;case 144:this.$={cursor:!0,op:"<",expr1:o[s-2],expr2:o[s]};break;case 145:this.$={cursor:!0,op:":",expr1:o[s-2],expr2:{cursor:!0}};break;case 146:this.$={cursor:!0,op:":",expr1:o[s-2],expr2:o[s]};break;case 147:this.$={cursor:!0,op:"not",expr:{cursor:!0}};break;case 148:this.$={cursor:!0,op:"not",expr:o[s]};break;case 149:this.$={cursor:!0,op:"not",expr:o[s-1]};break;case 150:this.$={cursor:!0,op:"!",expr:{cursor:!0}};break;case 151:this.$={cursor:!0,op:"!",expr:o[s]};break;case 152:this.$={cursor:!0,op:"!",expr:o[s-1]};break;case 153:this.$={cursor:!0,op:"order",ascending:!0,expr1:{cursor:!0}};break;case 154:this.$={cursor:!0,op:"order",ascending:!0,expr1:o[s-1]};break;case 155:this.$={cursor:!0,op:"order",ascending:!0,expr1:o[s-2]};break;case 156:this.$={cursor:!0,op:"order",ascending:!1,expr1:{cursor:!0}};break;case 157:this.$={cursor:!0,op:"order",ascending:!1,expr1:o[s-1]};break;case 158:this.$={cursor:!0,op:"if",cond:{cursor:!0}};break;case 159:this.$={cursor:!0,op:"if",cond:o[s]};break;case 160:this.$={cursor:!0,op:"if",cond:o[s-1]};break;case 161:this.$={cursor:!0,op:"if",cond:o[s-2],then:{cursor:!0}};break;case 162:this.$={cursor:!0,op:"if",cond:o[s-2],then:o[s]};break;case 163:this.$={cursor:!0,op:"if",cond:o[s-3],then:o[s-1]};break;case 164:this.$={cursor:!0,op:"if",cond:o[s-4],then:o[s-2],"else":{cursor:!0}};break;case 165:this.$={cursor:!0,op:"if",cond:o[s-4],then:o[s-2],"else":o[s]};break;case 166:this.$={cursor:!0,op:"if",cond:o[s-5],then:o[s-3],"else":o[s-1]};break;case 167:this.$={cursor:!0,op:"fn",name:o[s-4],arguments:o[s-1]};break;case 168:this.$={cursor:!0,op:"fn",name:o[s-3],arguments:o[s-1]};break;case 169:this.$={cursor:!0,op:"fn",name:o[s-3],arguments:o[s-1]};break;case 170:this.$={cursor:!0,op:"fn",name:o[s-2],arguments:o[s]};break;case 171:this.$={cursor:!0,op:"fn",name:o[s-2],arguments:o[s]};break;case 172:this.$={cursor:!0,op:"fn",name:o[s-2],arguments:[]};break;case 173:this.$={cursor:!0,expr1:_.extend(o[s-2],{cursor:!0}),expr2:o[s],op:"NONE"};break;case 174:this.$={cursor:!0,expr1:o[s-3],expr2:_.extend(o[s],{cursor:!0}),op:"NONE"};break;case 175:this.$={cursor:!0,expr1:o[s-3],expr2:_.extend(o[s],{cursor:!0}),op:"NONE"};break;case 176:this.$={cursor:!0,expr1:o[s-3],expr2:_.extend(o[s],{cursor:!0}),op:"NONE"};break;case 177:this.$={cursor:!0,expr1:o[s-3],expr2:_.extend(o[s],{cursor:!0}),op:"NONE"};break;case 178:this.$={cursor:!0,expr1:o[s-3],expr2:_.extend(o[s],{cursor:!0}),op:"NONE"};break;case 179:this.$={cursor:!0,expr1:o[s-3],expr2:_.extend(o[s],{cursor:!0}),op:"NONE"};break;case 180:this.$={cursor:!0,expr1:o[s-3],expr2:_.extend(o[s],{cursor:!0}),op:"NONE"};break;case 181:this.$={cursor:!0,expr1:o[s-3],expr2:_.extend(o[s],{cursor:!0}),op:"NONE"};break;case 182:this.$={cursor:!0,expr1:o[s-3],expr2:_.extend(o[s],{cursor:!0}),op:"NONE"};break;case 183:this.$={cursor:!0,expr1:o[s-3],expr2:_.extend(o[s],{cursor:!0}),op:"NONE"};break;case 184:this.$={cursor:!0,expr1:o[s-3],expr2:_.extend(o[s],{cursor:!0}),op:"NONE"};break;case 185:this.$={cursor:!0,expr1:o[s-3],expr2:_.extend(o[s],{cursor:!0}),op:"NONE"};break;case 186:this.$={cursor:!0,expr1:o[s-3],expr2:_.extend(o[s],{cursor:!0}),op:"NONE"};break;case 187:this.$={cursor:!0,expr1:o[s-3],expr2:_.extend(o[s],{cursor:!0}),op:"NONE"};break;case 188:this.$={cursor:!0,expr1:o[s-3],expr2:_.extend(o[s],{cursor:!0}),op:"NONE"};break;case 189:this.$={cursor:!0,expr1:o[s-3],expr2:_.extend(o[s],{cursor:!0}),op:"NONE"};break;case 190:this.$={cursor:!0,expr1:o[s-3],expr2:_.extend(o[s],{cursor:!0}),op:"NONE"};break;case 191:this.$={cursor:!0,expr1:o[s-3],expr2:_.extend(o[s],{cursor:!0}),op:"NONE"};break;case 192:this.$={cursor:!0,expr1:o[s-3],expr2:_.extend(o[s],{cursor:!0}),op:"NONE"};break;case 193:this.$=[o[s]];break;case 194:this.$=o[s-2].concat(o[s]);break;case 195:this.$=o[s-1];break;case 196:this.$=[];break;case 200:this.$=[o[s]];break;case 201:this.$=o[s-2].concat({empty:!0,cursor:!0});break;case 202:this.$=o[s-2].concat(o[s]);break;case 203:this.$=o[s-2].concat(o[s]);break;case 204:this.$=[o[s]];break;case 205:this.$=o[s-2].concat(o[s]);break;case 210:return{cursor:!0};case 212:return o[s];case 213:return o[s];case 214:return[o[s]];case 215:return[o[s]];case 216:return _.extend([],{cursor:!0});case 217:return _.extend([],{cursor:!0});case 218:var a=o[s],l=a[0];return a=a.slice(1),_.extend(l,{cursor:!0}),[l].concat(a);case 219:return o[s];case 220:return o[s-1]}},table:[{1:[2,211],5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,5],16:[2,211],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:9,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:21,59:11,60:7,62:2,63:22,64:3,66:10,67:8,69:1,70:[1,4],71:[1,6]},{1:[3],16:[1,35]},{1:[2,212],16:[2,212]},{1:[2,213],16:[2,213],65:[1,36]},{4:42,5:[1,45],6:[1,46],10:43,11:[1,31],12:[1,32],13:[1,33],14:44,15:[1,39],17:37,18:[1,40],19:[1,41],20:38},{1:[2,217],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,217],18:[1,57],19:[1,25],21:53,22:51,25:12,27:50,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],64:47},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:61,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{1:[2,206],16:[2,206],65:[1,62]},{1:[2,207],16:[2,207]},{1:[2,193],15:[1,84],16:[2,193],29:[2,193],30:[1,63],31:[1,64],32:[1,65],33:[1,66],34:[1,67],35:[1,68],37:[1,69],38:[1,70],39:[1,71],40:[1,72],41:[1,73],42:[1,74],43:[1,75],44:[1,76],45:[1,77],46:[1,78],47:[1,79],48:[1,80],49:[1,81],55:[1,82],56:[1,83],65:[2,193]},{1:[2,200],16:[2,200],29:[2,200],65:[2,200]},{1:[2,204],16:[2,204]},{1:[2,31],15:[2,31],16:[2,31],29:[2,31],30:[2,31],31:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],37:[2,31],38:[2,31],39:[2,31],40:[2,31],41:[2,31],42:[2,31],43:[2,31],44:[2,31],45:[2,31],46:[2,31],47:[2,31],48:[2,31],49:[2,31],53:[2,31],54:[2,31],55:[2,31],56:[2,31],65:[2,31]},{1:[2,32],15:[2,32],16:[2,32],23:[1,85],29:[2,32],30:[2,32],31:[2,32],32:[2,32],33:[2,32],34:[2,32],35:[2,32],37:[2,32],38:[2,32],39:[2,32],40:[2,32],41:[2,32],42:[2,32],43:[2,32],44:[2,32],45:[2,32],46:[2,32],47:[2,32],48:[2,32],49:[2,32],53:[2,32],54:[2,32],55:[2,32],56:[2,32],65:[2,32]},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,87],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:86,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:88,59:89},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:90,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{1:[2,23],15:[2,23],16:[2,23],23:[2,23],29:[2,23],30:[2,23],31:[2,23],32:[2,23],33:[2,23],34:[2,23],35:[2,23],36:[1,91],37:[2,23],38:[2,23],39:[2,23],40:[2,23],41:[2,23],42:[2,23],43:[2,23],44:[2,23],45:[2,23],46:[2,23],47:[2,23],48:[2,23],49:[2,23],53:[2,23],54:[2,23],55:[2,23],56:[2,23],65:[2,23]},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,93],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:92,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:94,59:95},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,97],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:96,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:98,59:99},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,101],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:100,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:102,59:103},{1:[2,22],15:[2,22],16:[2,22],23:[2,22],28:[1,104],29:[2,22],30:[2,22],31:[2,22],32:[2,22],33:[2,22],34:[2,22],35:[2,22],36:[2,22],37:[2,22],38:[2,22],39:[2,22],40:[2,22],41:[2,22],42:[2,22],43:[2,22],44:[2,22],45:[2,22],46:[2,22],47:[2,22],48:[2,22],49:[2,22],53:[2,22],54:[2,22],55:[2,22],56:[2,22],61:[1,105],65:[2,22]},{1:[2,198],16:[2,198],29:[2,198],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[1,122],38:[1,124],39:[1,123],40:[1,112],41:[1,113],42:[1,115],43:[1,114],44:[1,116],45:[1,117],46:[1,120],47:[1,118],48:[1,119],49:[1,121],65:[2,198]},{1:[2,199],16:[2,199],29:[2,199],65:[2,199]},{1:[2,26],15:[2,26],16:[2,26],29:[2,26],30:[2,26],31:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],37:[2,26],38:[2,26],39:[2,26],40:[2,26],41:[2,26],42:[2,26],43:[2,26],44:[2,26],45:[2,26],46:[2,26],47:[2,26],48:[2,26],49:[2,26],53:[2,26],54:[2,26],55:[2,26],56:[2,26],65:[2,26]},{1:[2,27],15:[2,27],16:[2,27],29:[2,27],30:[2,27],31:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],37:[2,27],38:[2,27],39:[2,27],40:[2,27],41:[2,27],42:[2,27],43:[2,27],44:[2,27],45:[2,27],46:[2,27],47:[2,27],48:[2,27],49:[2,27],53:[2,27],54:[2,27],55:[2,27],56:[2,27],65:[2,27]},{1:[2,28],15:[2,28],16:[2,28],29:[2,28],30:[2,28],31:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],37:[2,28],38:[2,28],39:[2,28],40:[2,28],41:[2,28],42:[2,28],43:[2,28],44:[2,28],45:[2,28],46:[2,28],47:[2,28],48:[2,28],49:[2,28],53:[2,28],54:[2,28],55:[2,28],56:[2,28],65:[2,28]},{1:[2,29],15:[2,29],16:[2,29],29:[2,29],30:[2,29],31:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],37:[2,29],38:[2,29],39:[2,29],40:[2,29],41:[2,29],42:[2,29],43:[2,29],44:[2,29],45:[2,29],46:[2,29],47:[2,29],48:[2,29],49:[2,29],53:[2,29],54:[2,29],55:[2,29],56:[2,29],65:[2,29]},{1:[2,62],16:[2,62],29:[2,62],30:[2,62],31:[2,62],32:[2,62],33:[2,62],34:[2,62],35:[2,62],37:[2,62],38:[2,62],39:[2,62],40:[2,62],41:[2,62],42:[2,62],43:[2,62],44:[2,62],45:[2,62],46:[2,62],47:[2,62],48:[2,62],49:[2,62],65:[2,62]},{1:[2,63],16:[2,63],29:[2,63],30:[2,63],31:[2,63],32:[2,63],33:[2,63],34:[2,63],35:[2,63],37:[2,63],38:[2,63],39:[2,63],40:[2,63],41:[2,63],42:[2,63],43:[2,63],44:[2,63],45:[2,63],46:[2,63],47:[2,63],48:[2,63],49:[2,63],65:[2,63]},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,128],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:127,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:125,59:126},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,128],18:[1,130],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:127,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:129},{3:132,7:131,8:[2,1],9:[2,1],11:[2,1],15:[2,1]},{3:132,7:133,8:[2,1],9:[2,1],12:[2,1],15:[2,1]},{3:132,7:134,8:[2,1],9:[2,1],13:[2,1],15:[2,1]},{1:[2,30],16:[2,30],29:[2,30],30:[2,30],31:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],37:[2,30],38:[2,30],39:[2,30],40:[2,30],41:[2,30],42:[2,30],43:[2,30],44:[2,30],45:[2,30],46:[2,30],47:[2,30],48:[2,30],49:[2,30],65:[2,30]},{1:[2,220],16:[2,220]},{1:[2,195],5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,136],16:[2,195],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:135,28:[1,14],29:[2,195],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:21,59:138,63:22,65:[2,195],66:137},{1:[2,214],15:[1,139],16:[2,214]},{1:[2,215],16:[2,215]},{1:[2,216],16:[2,216]},{1:[2,16],15:[2,16],16:[2,16],29:[2,16],30:[2,16],31:[2,16],32:[2,16],33:[2,16],34:[2,16],35:[2,16],37:[2,16],38:[2,16],39:[2,16],40:[2,16],41:[2,16],42:[2,16],43:[2,16],44:[2,16],45:[2,16],46:[2,16],47:[2,16],48:[2,16],49:[2,16],53:[2,16],54:[2,16],55:[2,16],56:[2,16],65:[2,16]},{1:[2,17],15:[2,17],16:[2,17],29:[2,17],30:[2,17],31:[2,17],32:[2,17],33:[2,17],34:[2,17],35:[2,17],37:[2,17],38:[2,17],39:[2,17],40:[2,17],41:[2,17],42:[2,17],43:[2,17],44:[2,17],45:[2,17],46:[2,17],47:[2,17],48:[2,17],49:[2,17],53:[2,17],54:[2,17],55:[2,17],56:[2,17],65:[2,17]},{1:[2,18],15:[2,18],16:[2,18],29:[2,18],30:[2,18],31:[2,18],32:[2,18],33:[2,18],34:[2,18],35:[2,18],37:[2,18],38:[2,18],39:[2,18],40:[2,18],41:[2,18],42:[2,18],43:[2,18],44:[2,18],45:[2,18],46:[2,18],47:[2,18],48:[2,18],49:[2,18],53:[2,18],54:[2,18],55:[2,18],56:[2,18],65:[2,18]},{1:[2,19],15:[2,19],16:[2,19],29:[2,19],30:[2,19],31:[2,19],32:[2,19],33:[2,19],34:[2,19],35:[2,19],37:[2,19],38:[2,19],39:[2,19],40:[2,19],41:[2,19],42:[2,19],43:[2,19],44:[2,19],45:[2,19],46:[2,19],47:[2,19],48:[2,19],49:[2,19],53:[2,19],54:[2,19],55:[2,19],56:[2,19],65:[2,19]},{1:[2,21],16:[2,21],29:[2,21],30:[2,21],31:[2,21],32:[2,21],33:[2,21],34:[2,21],35:[2,21],37:[2,21],38:[2,21],39:[2,21],40:[2,21],41:[2,21],42:[2,21],43:[2,21],44:[2,21],45:[2,21],46:[2,21],47:[2,21],48:[2,21],49:[2,21],65:[2,21]},{1:[2,2],15:[2,2],16:[2,2],29:[2,2],30:[2,2],31:[2,2],32:[2,2],33:[2,2],34:[2,2],35:[2,2],37:[2,2],38:[2,2],39:[2,2],40:[2,2],41:[2,2],42:[2,2],43:[2,2],44:[2,2],45:[2,2],46:[2,2],47:[2,2],48:[2,2],49:[2,2],53:[2,2],54:[2,2],55:[2,2],56:[2,2],65:[2,2]},{1:[2,3],15:[2,3],16:[2,3],29:[2,3],30:[2,3],31:[2,3],32:[2,3],33:[2,3],34:[2,3],35:[2,3],37:[2,3],38:[2,3],39:[2,3],40:[2,3],41:[2,3],42:[2,3],43:[2,3],44:[2,3],45:[2,3],46:[2,3],47:[2,3],48:[2,3],49:[2,3],53:[2,3],54:[2,3],55:[2,3],56:[2,3],65:[2,3]},{1:[2,218],16:[2,218],65:[1,140]},{1:[2,153],16:[2,153],29:[2,153],30:[2,153],31:[2,153],32:[2,153],33:[2,153],34:[2,153],35:[2,153],37:[2,153],38:[2,153],39:[2,153],40:[2,153],41:[2,153],42:[2,153],43:[2,153],44:[2,153],45:[2,153],46:[2,153],47:[2,153],48:[2,153],49:[2,153],65:[2,153]},{1:[2,156],16:[2,156],29:[2,156],30:[2,156],31:[2,156],32:[2,156],33:[2,156],34:[2,156],35:[2,156],37:[2,156],38:[2,156],39:[2,156],40:[2,156],41:[2,156],42:[2,156],43:[2,156],44:[2,156],45:[2,156],46:[2,156],47:[2,156],48:[2,156],49:[2,156],65:[2,156]},{1:[2,193],16:[2,193],29:[2,193],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,193]},{1:[2,32],15:[2,32],16:[2,32],23:[1,160],29:[2,32],30:[2,32],31:[2,32],32:[2,32],33:[2,32],34:[2,32],35:[2,32],37:[2,32],38:[2,32],39:[2,32],40:[2,32],41:[2,32],42:[2,32],43:[2,32],44:[2,32],45:[2,32],46:[2,32],47:[2,32],48:[2,32],49:[2,32],53:[2,32],54:[2,32],55:[2,32],56:[2,32],65:[2,32]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:161,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{1:[2,23],15:[2,23],16:[2,23],23:[2,23],29:[2,23],30:[2,23],31:[2,23],32:[2,23],33:[2,23],34:[2,23],35:[2,23],36:[1,162],37:[2,23],38:[2,23],39:[2,23],40:[2,23],41:[2,23],42:[2,23],43:[2,23],44:[2,23],45:[2,23],46:[2,23],47:[2,23],48:[2,23],49:[2,23],53:[2,23],54:[2,23],55:[2,23],56:[2,23],65:[2,23]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:163,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:164,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:165,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{1:[2,22],15:[2,22],16:[2,22],23:[2,22],28:[1,166],29:[2,22],30:[2,22],31:[2,22],32:[2,22],33:[2,22],34:[2,22],35:[2,22],36:[2,22],37:[2,22],38:[2,22],39:[2,22],40:[2,22],41:[2,22],42:[2,22],43:[2,22],44:[2,22],45:[2,22],46:[2,22],47:[2,22],48:[2,22],49:[2,22],53:[2,22],54:[2,22],55:[2,22],56:[2,22],65:[2,22]},{3:132,7:167,8:[2,1],9:[2,1],11:[2,1]},{3:132,7:168,8:[2,1],9:[2,1],12:[2,1]},{3:132,7:169,8:[2,1],9:[2,1],13:[2,1]},{1:[2,219],16:[2,219],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:170,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,172],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:171,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:173,59:174},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,176],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:175,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:177,59:178},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,180],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:179,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:181,59:182},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,184],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:183,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:185,59:186},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,188],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:187,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:189,59:190},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,192],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:191,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:193,59:194},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,196],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:195,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:197,59:198},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,200],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:199,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:201,59:202},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,204],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:203,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:205,59:206},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,208],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:207,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:209,59:210},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,212],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:211,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:213,59:214},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,216],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:215,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:217,59:218},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,220],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:219,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:221,59:222},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,224],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:223,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:225,59:226},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,228],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:227,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:229,59:230},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,232],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:231,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:233,59:234},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,236],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:235,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:237,59:238},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,240],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:239,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:241,59:242},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,244],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:243,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:245,59:246},{1:[2,59],15:[2,59],16:[2,59],29:[2,59],30:[2,59],31:[2,59],32:[2,59],33:[2,59],34:[2,59],35:[2,59],37:[2,59],38:[2,59],39:[2,59],40:[2,59],41:[2,59],42:[2,59],43:[2,59],44:[2,59],45:[2,59],46:[2,59],47:[2,59],48:[2,59],49:[2,59],53:[2,59],54:[2,59],55:[2,59],56:[2,59],65:[2,59]},{1:[2,60],15:[2,60],16:[2,60],29:[2,60],30:[2,60],31:[2,60],32:[2,60],33:[2,60],34:[2,60],35:[2,60],37:[2,60],38:[2,60],39:[2,60],40:[2,60],41:[2,60],42:[2,60],43:[2,60],44:[2,60],45:[2,60],46:[2,60],47:[2,60],48:[2,60],49:[2,60],53:[2,60],54:[2,60],55:[2,60],56:[2,60],65:[2,60]},{1:[2,64],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,64],18:[1,57],19:[1,25],21:53,22:51,25:12,27:247,28:[1,52],29:[2,64],30:[2,64],31:[2,64],32:[2,64],33:[2,64],34:[2,64],35:[2,64],37:[2,64],38:[2,64],39:[2,64],40:[2,64],41:[2,64],42:[2,64],43:[2,64],44:[2,64],45:[2,64],46:[2,64],47:[2,64],48:[2,64],49:[2,64],50:[1,54],51:[1,55],52:[1,56],65:[2,64]},{15:[1,249],18:[1,250],21:248},{15:[1,271],29:[1,251],30:[1,252],31:[1,253],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[1,258],38:[1,259],39:[1,260],40:[1,261],41:[1,262],42:[1,263],43:[1,264],44:[1,265],45:[1,266],46:[1,267],47:[1,268],48:[1,269],49:[1,270],55:[1,82],56:[1,83]},{1:[2,65],16:[2,65],29:[2,65],30:[2,65],31:[2,65],32:[2,65],33:[2,65],34:[2,65],35:[2,65],37:[2,65],38:[2,65],39:[2,65],40:[2,65],41:[2,65],42:[2,65],43:[2,65],44:[2,65],45:[2,65],46:[2,65],47:[2,65],48:[2,65],49:[2,65],55:[1,48],56:[1,49],65:[2,65]},{1:[2,66],16:[2,66],29:[2,66],30:[2,66],31:[2,66],32:[2,66],33:[2,66],34:[2,66],35:[2,66],37:[2,66],38:[2,66],39:[2,66],40:[2,66],41:[2,66],42:[2,66],43:[2,66],44:[2,66],45:[2,66],46:[2,66],47:[2,66],48:[2,66],49:[2,66],65:[2,66]},{16:[1,273]},{1:[2,40],15:[2,40],16:[2,40],29:[2,40],30:[2,40],31:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],37:[2,40],38:[2,40],39:[2,40],40:[2,40],41:[2,40],42:[2,40],43:[2,40],44:[2,40],45:[2,40],46:[2,40],47:[2,40],48:[2,40],49:[2,40],53:[2,40],54:[2,40],55:[2,40],56:[2,40],65:[2,40]},{4:42,5:[1,45],6:[1,46],10:43,11:[1,31],12:[1,32],13:[1,33],14:44,15:[1,275],17:274,18:[1,40],19:[1,41],20:276},{1:[2,55],15:[1,271],16:[2,55],29:[2,55],30:[1,252],31:[1,253],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[1,258],38:[1,259],39:[1,260],40:[1,261],41:[1,262],42:[1,263],43:[1,264],44:[2,55],45:[2,55],46:[2,55],47:[2,55],48:[2,55],49:[2,55],53:[2,55],54:[2,55],55:[2,55],56:[2,55],65:[2,55]},{1:[2,147],16:[2,147],29:[2,147],30:[2,147],31:[2,147],32:[2,147],33:[2,147],34:[2,147],35:[2,147],37:[2,147],38:[2,147],39:[2,147],40:[2,147],41:[2,147],42:[2,147],43:[2,147],44:[2,147],45:[2,147],46:[2,147],47:[2,147],48:[2,147],49:[2,147],55:[1,48],56:[1,49],65:[2,147]},{1:[2,148],16:[2,148],29:[2,148],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[1,122],38:[1,124],39:[1,123],40:[1,112],41:[1,113],42:[1,115],43:[1,114],44:[2,148],45:[2,148],46:[2,148],47:[2,148],48:[2,148],49:[2,148],65:[2,148]},{16:[1,277]},{1:[2,56],15:[1,271],16:[2,56],29:[2,56],30:[1,252],31:[1,253],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[1,258],38:[1,259],39:[1,260],40:[1,261],41:[1,262],42:[1,263],43:[1,264],44:[2,56],45:[2,56],46:[2,56],47:[2,56],48:[2,56],49:[2,56],53:[2,56],54:[2,56],55:[2,56],56:[2,56],65:[2,56]},{1:[2,150],16:[2,150],29:[2,150],30:[2,150],31:[2,150],32:[2,150],33:[2,150],34:[2,150],35:[2,150],37:[2,150],38:[2,150],39:[2,150],40:[2,150],41:[2,150],42:[2,150],43:[2,150],44:[2,150],45:[2,150],46:[2,150],47:[2,150],48:[2,150],49:[2,150],55:[1,48],56:[1,49],65:[2,150]},{1:[2,151],16:[2,151],29:[2,151],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[1,122],38:[1,124],39:[1,123],40:[1,112],41:[1,113],42:[1,115],43:[1,114],44:[2,151],45:[2,151],46:[2,151],47:[2,151],48:[2,151],49:[2,151],65:[2,151]},{16:[1,278]},{15:[1,271],30:[1,252],31:[1,253],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[1,258],38:[1,259],39:[1,260],40:[1,261],41:[1,262],42:[1,263],43:[1,264],44:[1,265],45:[1,266],46:[1,267],47:[1,268],48:[1,269],49:[1,270],53:[1,279],55:[1,82],56:[1,83]},{1:[2,158],16:[2,158],29:[2,158],30:[2,158],31:[2,158],32:[2,158],33:[2,158],34:[2,158],35:[2,158],37:[2,158],38:[2,158],39:[2,158],40:[2,158],41:[2,158],42:[2,158],43:[2,158],44:[2,158],45:[2,158],46:[2,158],47:[2,158],48:[2,158],49:[2,158],55:[1,48],56:[1,49],65:[2,158]},{1:[2,159],16:[2,159],29:[2,159],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[1,122],38:[1,124],39:[1,123],40:[1,112],41:[1,113],42:[1,115],43:[1,114],44:[1,116],45:[1,117],46:[1,120],47:[1,118],48:[1,119],49:[1,121],65:[2,159]},{16:[1,280]},{1:[2,1],3:285,5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,283],16:[2,1],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:9,28:[1,14],29:[2,1],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],57:281,58:21,59:11,60:284,62:282,63:22,64:286,66:10,67:8},{3:285,5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:50,28:[1,52],29:[2,1],31:[1,15],50:[1,54],51:[1,55],52:[1,56],57:287,64:288},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:289,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:290,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:291,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:292,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:293,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:294,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:295,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:296,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:297,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:298,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:299,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:300,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:301,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:302,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:303,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:304,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:305,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:306,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:307,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{1:[2,154],16:[2,154],29:[2,154],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[1,122],38:[1,124],39:[1,123],40:[1,112],41:[1,113],42:[1,115],43:[1,114],44:[1,116],45:[1,117],46:[1,120],47:[1,118],48:[1,119],49:[1,121],65:[2,154]},{16:[1,308]},{15:[1,271],30:[1,252],31:[1,253],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[1,258],38:[1,259],39:[1,260],40:[1,261],41:[1,262],42:[1,263],43:[1,264],44:[1,265],45:[1,266],46:[1,267],47:[1,268],48:[1,269],49:[1,270],55:[1,82],56:[1,83]},{55:[1,48],56:[1,49]},{1:[2,157],16:[2,157],29:[2,157],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[1,122],38:[1,124],39:[1,123],40:[1,112],41:[1,113],42:[1,115],43:[1,114],44:[1,116],45:[1,117],46:[1,120],47:[1,118],48:[1,119],49:[1,121],65:[2,157]},{15:[2,22],23:[2,22],28:[1,309],29:[2,22],30:[2,22],31:[2,22],32:[2,22],33:[2,22],34:[2,22],35:[2,22],36:[2,22],37:[2,22],38:[2,22],39:[2,22],40:[2,22],41:[2,22],42:[2,22],43:[2,22],44:[2,22],45:[2,22],46:[2,22],47:[2,22],48:[2,22],49:[2,22],55:[2,22],56:[2,22],61:[1,105],65:[2,22]},{8:[1,312],9:[1,313],11:[1,310],15:[1,311]},{8:[2,4],9:[2,4],11:[2,4],12:[2,4],13:[2,4],15:[2,4],16:[2,4]},{8:[1,312],9:[1,313],12:[1,314],15:[1,315]},{8:[1,312],9:[1,313],13:[1,316],15:[1,317]},{1:[2,194],15:[1,84],16:[2,194],29:[2,194],30:[1,63],31:[1,64],32:[1,65],33:[1,66],34:[1,67],35:[1,68],37:[1,69],38:[1,70],39:[1,71],40:[1,72],41:[1,73],42:[1,74],43:[1,75],44:[1,76],45:[1,77],46:[1,78],47:[1,79],48:[1,80],49:[1,81],55:[1,82],56:[1,83],65:[2,194]},{1:[2,201],16:[2,201],29:[2,201],55:[1,48],56:[1,49],65:[2,201]},{1:[2,202],16:[2,202],29:[2,202],65:[2,202]},{1:[2,205],16:[2,205]},{1:[2,20],16:[2,20],29:[2,20],30:[2,20],31:[2,20],32:[2,20],33:[2,20],34:[2,20],35:[2,20],37:[2,20],38:[2,20],39:[2,20],40:[2,20],41:[2,20],42:[2,20],43:[2,20],44:[2,20],45:[2,20],46:[2,20],47:[2,20],48:[2,20],49:[2,20],65:[2,20]},{1:[2,195],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,195],18:[1,57],19:[1,25],21:53,22:51,25:12,27:318,28:[1,52],29:[2,195],31:[1,15],50:[1,54],51:[1,55],52:[1,56],65:[2,195]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:319,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:320,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:321,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:322,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:323,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:324,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:325,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:326,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:327,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:328,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:329,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:330,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:331,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:332,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:333,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:334,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:335,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:336,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:337,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{18:[1,250],21:248},{29:[1,251],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83]},{4:42,5:[1,45],6:[1,46],10:43,11:[1,58],12:[1,59],13:[1,60],17:338,18:[1,40],19:[1,41]},{1:[2,55],15:[2,55],16:[2,55],29:[2,55],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[2,55],45:[2,55],46:[2,55],47:[2,55],48:[2,55],49:[2,55],53:[2,55],54:[2,55],55:[2,55],56:[2,55],65:[2,55]},{1:[2,56],15:[2,56],16:[2,56],29:[2,56],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[2,56],45:[2,56],46:[2,56],47:[2,56],48:[2,56],49:[2,56],53:[2,56],54:[2,56],55:[2,56],56:[2,56],65:[2,56]},{30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],53:[1,339],55:[1,82],56:[1,83]},{3:285,5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:50,28:[1,52],29:[2,1],31:[1,15],50:[1,54],51:[1,55],52:[1,56],57:340,64:288},{8:[1,312],9:[1,313],11:[1,310]},{8:[1,312],9:[1,313],12:[1,314]},{8:[1,312],9:[1,313],13:[1,316]},{1:[2,203],16:[2,203],29:[2,203],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,203]},{1:[2,34],15:[1,271],16:[2,34],29:[2,34],30:[2,34],31:[2,34],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[2,34],38:[2,34],39:[2,34],40:[2,34],41:[2,34],42:[2,34],43:[2,34],44:[2,34],45:[2,34],46:[2,34],47:[2,34],48:[2,34],49:[2,34],53:[2,34],54:[2,34],55:[2,34],56:[2,34],65:[2,34]},{1:[2,69],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,69],18:[1,57],19:[1,25],21:53,22:51,25:12,27:341,28:[1,52],29:[2,69],30:[2,69],31:[2,69],32:[2,69],33:[2,69],34:[2,69],35:[2,69],37:[2,69],38:[2,69],39:[2,69],40:[2,69],41:[2,69],42:[2,69],43:[2,69],44:[2,69],45:[2,69],46:[2,69],47:[2,69],48:[2,69],49:[2,69],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],65:[2,69]},{1:[2,70],16:[2,70],29:[2,70],30:[2,70],31:[2,70],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[2,70],38:[2,70],39:[2,70],40:[2,70],41:[2,70],42:[2,70],43:[2,70],44:[2,70],45:[2,70],46:[2,70],47:[2,70],48:[2,70],49:[2,70],65:[2,70]},{16:[1,342]},{1:[2,35],15:[1,271],16:[2,35],29:[2,35],30:[2,35],31:[2,35],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[2,35],38:[2,35],39:[2,35],40:[2,35],41:[2,35],42:[2,35],43:[2,35],44:[2,35],45:[2,35],46:[2,35],47:[2,35],48:[2,35],49:[2,35],53:[2,35],54:[2,35],55:[2,35],56:[2,35],65:[2,35]},{1:[2,73],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,73],18:[1,57],19:[1,25],21:53,22:51,25:12,27:343,28:[1,52],29:[2,73],30:[2,73],31:[2,73],32:[2,73],33:[2,73],34:[2,73],35:[2,73],37:[2,73],38:[2,73],39:[2,73],40:[2,73],41:[2,73],42:[2,73],43:[2,73],44:[2,73],45:[2,73],46:[2,73],47:[2,73],48:[2,73],49:[2,73],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],65:[2,73]},{1:[2,74],16:[2,74],29:[2,74],30:[2,74],31:[2,74],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[2,74],38:[2,74],39:[2,74],40:[2,74],41:[2,74],42:[2,74],43:[2,74],44:[2,74],45:[2,74],46:[2,74],47:[2,74],48:[2,74],49:[2,74],65:[2,74]},{16:[1,344]},{1:[2,36],15:[1,271],16:[2,36],29:[2,36],30:[2,36],31:[2,36],32:[2,36],33:[2,36],34:[1,256],35:[1,257],37:[2,36],38:[2,36],39:[2,36],40:[2,36],41:[2,36],42:[2,36],43:[2,36],44:[2,36],45:[2,36],46:[2,36],47:[2,36],48:[2,36],49:[2,36],53:[2,36],54:[2,36],55:[2,36],56:[2,36],65:[2,36]},{1:[2,77],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,77],18:[1,57],19:[1,25],21:53,22:51,25:12,27:345,28:[1,52],29:[2,77],30:[2,77],31:[2,77],32:[2,77],33:[2,77],34:[2,77],35:[2,77],37:[2,77],38:[2,77],39:[2,77],40:[2,77],41:[2,77],42:[2,77],43:[2,77],44:[2,77],45:[2,77],46:[2,77],47:[2,77],48:[2,77],49:[2,77],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],65:[2,77]},{1:[2,78],16:[2,78],29:[2,78],30:[2,78],31:[2,78],32:[2,78],33:[2,78],34:[1,110],35:[1,111],37:[2,78],38:[2,78],39:[2,78],40:[2,78],41:[2,78],42:[2,78],43:[2,78],44:[2,78],45:[2,78],46:[2,78],47:[2,78],48:[2,78],49:[2,78],65:[2,78]},{16:[1,346]},{1:[2,37],15:[1,271],16:[2,37],29:[2,37],30:[2,37],31:[2,37],32:[2,37],33:[2,37],34:[1,256],35:[1,257],37:[2,37],38:[2,37],39:[2,37],40:[2,37],41:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],47:[2,37],48:[2,37],49:[2,37],53:[2,37],54:[2,37],55:[2,37],56:[2,37],65:[2,37]},{1:[2,81],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,81],18:[1,57],19:[1,25],21:53,22:51,25:12,27:347,28:[1,52],29:[2,81],30:[2,81],31:[2,81],32:[2,81],33:[2,81],34:[2,81],35:[2,81],37:[2,81],38:[2,81],39:[2,81],40:[2,81],41:[2,81],42:[2,81],43:[2,81],44:[2,81],45:[2,81],46:[2,81],47:[2,81],48:[2,81],49:[2,81],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],65:[2,81]},{1:[2,82],16:[2,82],29:[2,82],30:[2,82],31:[2,82],32:[2,82],33:[2,82],34:[1,110],35:[1,111],37:[2,82],38:[2,82],39:[2,82],40:[2,82],41:[2,82],42:[2,82],43:[2,82],44:[2,82],45:[2,82],46:[2,82],47:[2,82],48:[2,82],49:[2,82],65:[2,82]},{16:[1,348]},{1:[2,38],15:[1,271],16:[2,38],29:[2,38],30:[2,38],31:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],37:[2,38],38:[2,38],39:[2,38],40:[2,38],41:[2,38],42:[2,38],43:[2,38],44:[2,38],45:[2,38],46:[2,38],47:[2,38],48:[2,38],49:[2,38],53:[2,38],54:[2,38],55:[2,38],56:[2,38],65:[2,38]},{1:[2,85],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,85],18:[1,57],19:[1,25],21:53,22:51,25:12,27:349,28:[1,52],29:[2,85],30:[2,85],31:[2,85],32:[2,85],33:[2,85],34:[2,85],35:[2,85],37:[2,85],38:[2,85],39:[2,85],40:[2,85],41:[2,85],42:[2,85],43:[2,85],44:[2,85],45:[2,85],46:[2,85],47:[2,85],48:[2,85],49:[2,85],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],65:[2,85]},{1:[2,86],16:[2,86],29:[2,86],30:[2,86],31:[2,86],32:[2,86],33:[2,86],34:[2,86],35:[2,86],37:[2,86],38:[2,86],39:[2,86],40:[2,86],41:[2,86],42:[2,86],43:[2,86],44:[2,86],45:[2,86],46:[2,86],47:[2,86],48:[2,86],49:[2,86],65:[2,86]},{16:[1,350]},{1:[2,39],15:[1,271],16:[2,39],29:[2,39],30:[2,39],31:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],37:[2,39],38:[2,39],39:[2,39],40:[2,39],41:[2,39],42:[2,39],43:[2,39],44:[2,39],45:[2,39],46:[2,39],47:[2,39],48:[2,39],49:[2,39],53:[2,39],54:[2,39],55:[2,39],56:[2,39],65:[2,39]},{1:[2,89],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,89],18:[1,57],19:[1,25],21:53,22:51,25:12,27:351,28:[1,52],29:[2,89],30:[2,89],31:[2,89],32:[2,89],33:[2,89],34:[2,89],35:[2,89],37:[2,89],38:[2,89],39:[2,89],40:[2,89],41:[2,89],42:[2,89],43:[2,89],44:[2,89],45:[2,89],46:[2,89],47:[2,89],48:[2,89],49:[2,89],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],65:[2,89]},{1:[2,90],16:[2,90],29:[2,90],30:[2,90],31:[2,90],32:[2,90],33:[2,90],34:[2,90],35:[2,90],37:[2,90],38:[2,90],39:[2,90],40:[2,90],41:[2,90],42:[2,90],43:[2,90],44:[2,90],45:[2,90],46:[2,90],47:[2,90],48:[2,90],49:[2,90],65:[2,90]},{16:[1,352]},{1:[2,42],15:[1,271],16:[2,42],29:[2,42],30:[1,252],31:[1,253],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[2,42],38:[2,42],39:[2,42],40:[2,42],41:[2,42],42:[2,42],43:[2,42],44:[2,42],45:[2,42],46:[2,42],47:[2,42],48:[2,42],49:[2,42],53:[2,42],54:[2,42],55:[2,42],56:[2,42],65:[2,42]},{1:[2,133],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,133],18:[1,57],19:[1,25],21:53,22:51,25:12,27:353,28:[1,52],29:[2,133],30:[2,133],31:[1,15],32:[2,133],33:[2,133],34:[2,133],35:[2,133],37:[2,133],38:[2,133],39:[2,133],40:[2,133],41:[2,133],42:[2,133],43:[2,133],44:[2,133],45:[2,133],46:[2,133],47:[2,133],48:[2,133],49:[2,133],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],65:[2,133]},{1:[2,134],16:[2,134],29:[2,134],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[2,134],38:[2,134],39:[2,134],40:[2,134],41:[2,134],42:[2,134],43:[2,134],44:[2,134],45:[2,134],46:[2,134],47:[2,134],48:[2,134],49:[2,134],65:[2,134]},{16:[1,354]},{1:[2,43],15:[1,271],16:[2,43],29:[2,43],30:[1,252],31:[1,253],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[2,43],38:[2,43],39:[2,43],40:[2,43],41:[2,43],42:[2,43],43:[2,43],44:[2,43],45:[2,43],46:[2,43],47:[2,43],48:[2,43],49:[2,43],53:[2,43],54:[2,43],55:[2,43],56:[2,43],65:[2,43]},{1:[2,141],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,141],18:[1,57],19:[1,25],21:53,22:51,25:12,27:355,28:[1,52],29:[2,141],30:[2,141],31:[1,15],32:[2,141],33:[2,141],34:[2,141],35:[2,141],37:[2,141],38:[2,141],39:[2,141],40:[2,141],41:[2,141],42:[2,141],43:[2,141],44:[2,141],45:[2,141],46:[2,141],47:[2,141],48:[2,141],49:[2,141],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],65:[2,141]},{1:[2,142],16:[2,142],29:[2,142],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[2,142],38:[2,142],39:[2,142],40:[2,142],41:[2,142],42:[2,142],43:[2,142],44:[2,142],45:[2,142],46:[2,142],47:[2,142],48:[2,142],49:[2,142],65:[2,142]},{16:[1,356]},{1:[2,44],15:[1,271],16:[2,44],29:[2,44],30:[1,252],31:[1,253],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[2,44],38:[2,44],39:[2,44],40:[2,44],41:[2,44],42:[2,44],43:[2,44],44:[2,44],45:[2,44],46:[2,44],47:[2,44],48:[2,44],49:[2,44],53:[2,44],54:[2,44],55:[2,44],56:[2,44],65:[2,44]},{1:[2,137],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,137],18:[1,57],19:[1,25],21:53,22:51,25:12,27:357,28:[1,52],29:[2,137],30:[2,137],31:[1,15],32:[2,137],33:[2,137],34:[2,137],35:[2,137],37:[2,137],38:[2,137],39:[2,137],40:[2,137],41:[2,137],42:[2,137],43:[2,137],44:[2,137],45:[2,137],46:[2,137],47:[2,137],48:[2,137],49:[2,137],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],65:[2,137]},{1:[2,138],16:[2,138],29:[2,138],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[2,138],38:[2,138],39:[2,138],40:[2,138],41:[2,138],42:[2,138],43:[2,138],44:[2,138],45:[2,138],46:[2,138],47:[2,138],48:[2,138],49:[2,138],65:[2,138]},{16:[1,358]},{1:[2,45],15:[1,271],16:[2,45],29:[2,45],30:[1,252],31:[1,253],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[2,45],38:[2,45],39:[2,45],40:[2,45],41:[2,45],42:[2,45],43:[2,45],44:[2,45],45:[2,45],46:[2,45],47:[2,45],48:[2,45],49:[2,45],53:[2,45],54:[2,45],55:[2,45],56:[2,45],65:[2,45]},{1:[2,93],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,93],18:[1,57],19:[1,25],21:53,22:51,25:12,27:359,28:[1,52],29:[2,93],30:[2,93],31:[1,15],32:[2,93],33:[2,93],34:[2,93],35:[2,93],37:[2,93],38:[2,93],39:[2,93],40:[2,93],41:[2,93],42:[2,93],43:[2,93],44:[2,93],45:[2,93],46:[2,93],47:[2,93],48:[2,93],49:[2,93],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],65:[2,93]},{1:[2,94],16:[2,94],29:[2,94],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[2,94],38:[2,94],39:[2,94],40:[2,94],41:[2,94],42:[2,94],43:[2,94],44:[2,94],45:[2,94],46:[2,94],47:[2,94],48:[2,94],49:[2,94],65:[2,94]},{16:[1,360]},{1:[2,46],15:[1,271],16:[2,46],29:[2,46],30:[1,252],31:[1,253],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[2,46],38:[2,46],39:[2,46],40:[2,46],41:[2,46],42:[2,46],43:[2,46],44:[2,46],45:[2,46],46:[2,46],47:[2,46],48:[2,46],49:[2,46],53:[2,46],54:[2,46],55:[2,46],56:[2,46],65:[2,46]},{1:[2,97],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,97],18:[1,57],19:[1,25],21:53,22:51,25:12,27:361,28:[1,52],29:[2,97],30:[2,97],31:[1,15],32:[2,97],33:[2,97],34:[2,97],35:[2,97],37:[2,97],38:[2,97],39:[2,97],40:[2,97],41:[2,97],42:[2,97],43:[2,97],44:[2,97],45:[2,97],46:[2,97],47:[2,97],48:[2,97],49:[2,97],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],65:[2,97]},{1:[2,98],16:[2,98],29:[2,98],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[2,98],38:[2,98],39:[2,98],40:[2,98],41:[2,98],42:[2,98],43:[2,98],44:[2,98],45:[2,98],46:[2,98],47:[2,98],48:[2,98],49:[2,98],65:[2,98]},{16:[1,362]},{1:[2,47],15:[1,271],16:[2,47],29:[2,47],30:[1,252],31:[1,253],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[2,47],38:[2,47],39:[2,47],40:[2,47],41:[2,47],42:[2,47],43:[2,47],44:[2,47],45:[2,47],46:[2,47],47:[2,47],48:[2,47],49:[2,47],53:[2,47],54:[2,47],55:[2,47],56:[2,47],65:[2,47]},{1:[2,105],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,105],18:[1,57],19:[1,25],21:53,22:51,25:12,27:363,28:[1,52],29:[2,105],30:[2,105],31:[1,15],32:[2,105],33:[2,105],34:[2,105],35:[2,105],37:[2,105],38:[2,105],39:[2,105],40:[2,105],41:[2,105],42:[2,105],43:[2,105],44:[2,105],45:[2,105],46:[2,105],47:[2,105],48:[2,105],49:[2,105],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],65:[2,105]},{1:[2,106],16:[2,106],29:[2,106],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[2,106],38:[2,106],39:[2,106],40:[2,106],41:[2,106],42:[2,106],43:[2,106],44:[2,106],45:[2,106],46:[2,106],47:[2,106],48:[2,106],49:[2,106],65:[2,106]},{16:[1,364]},{1:[2,48],15:[1,271],16:[2,48],29:[2,48],30:[1,252],31:[1,253],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[2,48],38:[2,48],39:[2,48],40:[2,48],41:[2,48],42:[2,48],43:[2,48],44:[2,48],45:[2,48],46:[2,48],47:[2,48],48:[2,48],49:[2,48],53:[2,48],54:[2,48],55:[2,48],56:[2,48],65:[2,48]},{1:[2,101],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,101],18:[1,57],19:[1,25],21:53,22:51,25:12,27:365,28:[1,52],29:[2,101],30:[2,101],31:[1,15],32:[2,101],33:[2,101],34:[2,101],35:[2,101],37:[2,101],38:[2,101],39:[2,101],40:[2,101],41:[2,101],42:[2,101],43:[2,101],44:[2,101],45:[2,101],46:[2,101],47:[2,101],48:[2,101],49:[2,101],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],65:[2,101]},{1:[2,102],16:[2,102],29:[2,102],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[2,102],38:[2,102],39:[2,102],40:[2,102],41:[2,102],42:[2,102],43:[2,102],44:[2,102],45:[2,102],46:[2,102],47:[2,102],48:[2,102],49:[2,102],65:[2,102]},{16:[1,366]},{1:[2,49],15:[1,271],16:[2,49],29:[2,49],30:[1,252],31:[1,253],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[1,258],38:[1,259],39:[1,260],40:[1,261],41:[1,262],42:[1,263],43:[1,264],44:[2,49],45:[2,49],46:[2,49],47:[2,49],48:[2,49],49:[2,49],53:[2,49],54:[2,49],55:[2,49],56:[2,49],65:[2,49]},{1:[2,109],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,109],18:[1,57],19:[1,25],21:53,22:51,25:12,27:367,28:[1,52],29:[2,109],30:[2,109],31:[1,15],32:[2,109],33:[2,109],34:[2,109],35:[2,109],37:[2,109],38:[2,109],39:[2,109],40:[2,109],41:[2,109],42:[2,109],43:[2,109],44:[2,109],45:[2,109],46:[2,109],47:[2,109],48:[2,109],49:[2,109],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],65:[2,109]},{1:[2,110],16:[2,110],29:[2,110],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[1,122],38:[1,124],39:[1,123],40:[1,112],41:[1,113],42:[1,115],43:[1,114],44:[2,110],45:[2,110],46:[2,110],47:[2,110],48:[2,110],49:[2,110],65:[2,110]},{16:[1,368]},{1:[2,50],15:[1,271],16:[2,50],29:[2,50],30:[1,252],31:[1,253],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[1,258],38:[1,259],39:[1,260],40:[1,261],41:[1,262],42:[1,263],43:[1,264],44:[2,50],45:[2,50],46:[2,50],47:[2,50],48:[2,50],49:[2,50],53:[2,50],54:[2,50],55:[2,50],56:[2,50],65:[2,50]},{1:[2,113],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,113],18:[1,57],19:[1,25],21:53,22:51,25:12,27:369,28:[1,52],29:[2,113],30:[2,113],31:[1,15],32:[2,113],33:[2,113],34:[2,113],35:[2,113],37:[2,113],38:[2,113],39:[2,113],40:[2,113],41:[2,113],42:[2,113],43:[2,113],44:[2,113],45:[2,113],46:[2,113],47:[2,113],48:[2,113],49:[2,113],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],65:[2,113]},{1:[2,114],16:[2,114],29:[2,114],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[1,122],38:[1,124],39:[1,123],40:[1,112],41:[1,113],42:[1,115],43:[1,114],44:[2,114],45:[2,114],46:[2,114],47:[2,114],48:[2,114],49:[2,114],65:[2,114]},{16:[1,370]},{1:[2,51],15:[1,271],16:[2,51],29:[2,51],30:[1,252],31:[1,253],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[1,258],38:[1,259],39:[1,260],40:[1,261],41:[1,262],42:[1,263],43:[1,264],44:[2,51],45:[2,51],46:[2,51],47:[2,51],48:[2,51],49:[2,51],53:[2,51],54:[2,51],55:[2,51],56:[2,51],65:[2,51]},{1:[2,125],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,125],18:[1,57],19:[1,25],21:53,22:51,25:12,27:371,28:[1,52],29:[2,125],30:[2,125],31:[1,15],32:[2,125],33:[2,125],34:[2,125],35:[2,125],37:[2,125],38:[2,125],39:[2,125],40:[2,125],41:[2,125],42:[2,125],43:[2,125],44:[2,125],45:[2,125],46:[2,125],47:[2,125],48:[2,125],49:[2,125],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],65:[2,125]},{1:[2,126],16:[2,126],29:[2,126],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[1,122],38:[1,124],39:[1,123],40:[1,112],41:[1,113],42:[1,115],43:[1,114],44:[2,126],45:[2,126],46:[2,126],47:[2,126],48:[2,126],49:[2,126],65:[2,126]},{16:[1,372]},{1:[2,52],15:[1,271],16:[2,52],29:[2,52],30:[1,252],31:[1,253],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[1,258],38:[1,259],39:[1,260],40:[1,261],41:[1,262],42:[1,263],43:[1,264],44:[2,52],45:[2,52],46:[2,52],47:[2,52],48:[2,52],49:[2,52],53:[2,52],54:[2,52],55:[2,52],56:[2,52],65:[2,52]},{1:[2,117],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,117],18:[1,57],19:[1,25],21:53,22:51,25:12,27:373,28:[1,52],29:[2,117],30:[2,117],31:[1,15],32:[2,117],33:[2,117],34:[2,117],35:[2,117],37:[2,117],38:[2,117],39:[2,117],40:[2,117],41:[2,117],42:[2,117],43:[2,117],44:[2,117],45:[2,117],46:[2,117],47:[2,117],48:[2,117],49:[2,117],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],65:[2,117]},{1:[2,118],16:[2,118],29:[2,118],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[1,122],38:[1,124],39:[1,123],40:[1,112],41:[1,113],42:[1,115],43:[1,114],44:[2,118],45:[2,118],46:[2,118],47:[2,118],48:[2,118],49:[2,118],65:[2,118]},{16:[1,374]},{1:[2,53],15:[1,271],16:[2,53],29:[2,53],30:[1,252],31:[1,253],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[1,258],38:[1,259],39:[1,260],40:[1,261],41:[1,262],42:[1,263],43:[1,264],44:[2,53],45:[2,53],46:[2,53],47:[2,53],48:[2,53],49:[2,53],53:[2,53],54:[2,53],55:[2,53],56:[2,53],65:[2,53]},{1:[2,121],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,121],18:[1,57],19:[1,25],21:53,22:51,25:12,27:375,28:[1,52],29:[2,121],30:[2,121],31:[1,15],32:[2,121],33:[2,121],34:[2,121],35:[2,121],37:[2,121],38:[2,121],39:[2,121],40:[2,121],41:[2,121],42:[2,121],43:[2,121],44:[2,121],45:[2,121],46:[2,121],47:[2,121],48:[2,121],49:[2,121],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],65:[2,121]},{1:[2,122],16:[2,122],29:[2,122],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[1,122],38:[1,124],39:[1,123],40:[1,112],41:[1,113],42:[1,115],43:[1,114],44:[2,122],45:[2,122],46:[2,122],47:[2,122],48:[2,122],49:[2,122],65:[2,122]},{16:[1,376]},{1:[2,54],15:[1,271],16:[2,54],29:[2,54],30:[1,252],31:[1,253],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[1,258],38:[1,259],39:[1,260],40:[1,261],41:[1,262],42:[1,263],43:[1,264],44:[2,54],45:[2,54],46:[2,54],47:[2,54],48:[2,54],49:[2,54],53:[2,54],54:[2,54],55:[2,54],56:[2,54],65:[2,54]},{1:[2,129],5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,129],18:[1,57],19:[1,25],21:53,22:51,25:12,27:377,28:[1,52],29:[2,129],30:[2,129],31:[1,15],32:[2,129],33:[2,129],34:[2,129],35:[2,129],37:[2,129],38:[2,129],39:[2,129],40:[2,129],41:[2,129],42:[2,129],43:[2,129],44:[2,129],45:[2,129],46:[2,129],47:[2,129],48:[2,129],49:[2,129],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],65:[2,129]},{1:[2,130],16:[2,130],29:[2,130],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[1,122],38:[1,124],39:[1,123],40:[1,112],41:[1,113],42:[1,115],43:[1,114],44:[2,130],45:[2,130],46:[2,130],47:[2,130],48:[2,130],49:[2,130],65:[2,130]},{16:[1,378]},{1:[2,173],16:[2,173],29:[2,173],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,173]},{1:[2,24],15:[2,24],16:[2,24],23:[2,24],29:[2,24],30:[2,24],31:[2,24],32:[2,24],33:[2,24],34:[2,24],35:[2,24],37:[2,24],38:[2,24],39:[2,24],40:[2,24],41:[2,24],42:[2,24],43:[2,24],44:[2,24],45:[2,24],46:[2,24],47:[2,24],48:[2,24],49:[2,24],53:[2,24],54:[2,24],55:[2,24],56:[2,24],65:[2,24]},{1:[2,25],16:[2,25],29:[2,25],30:[2,25],31:[2,25],32:[2,25],33:[2,25],34:[2,25],35:[2,25],37:[2,25],38:[2,25],39:[2,25],40:[2,25],41:[2,25],42:[2,25],43:[2,25],44:[2,25],45:[2,25],46:[2,25],47:[2,25],48:[2,25],49:[2,25],65:[2,25]},{1:[2,22],15:[2,22],16:[2,22],23:[2,22],29:[2,22],30:[2,22],31:[2,22],32:[2,22],33:[2,22],34:[2,22],35:[2,22],37:[2,22],38:[2,22],39:[2,22],40:[2,22],41:[2,22],42:[2,22],43:[2,22],44:[2,22],45:[2,22],46:[2,22],47:[2,22],48:[2,22],49:[2,22],53:[2,22],54:[2,22],55:[2,22],56:[2,22],65:[2,22]},{1:[2,33],15:[2,33],16:[2,33],29:[2,33],30:[2,33],31:[2,33],32:[2,33],33:[2,33],34:[2,33],35:[2,33],37:[2,33],38:[2,33],39:[2,33],40:[2,33],41:[2,33],42:[2,33],43:[2,33],44:[2,33],45:[2,33],46:[2,33],47:[2,33],48:[2,33],49:[2,33],53:[2,33],54:[2,33],55:[2,33],56:[2,33],65:[2,33]},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,379],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:171,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:173,59:174},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,380],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:175,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:177,59:178},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,381],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:179,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:181,59:182},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,382],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:183,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:185,59:186},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,383],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:187,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:189,59:190},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,384],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:191,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:193,59:194},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,385],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:195,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:197,59:198},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,386],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:199,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:201,59:202},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,387],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:203,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:205,59:206},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,388],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:207,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:209,59:210},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,389],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:211,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:213,59:214},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,390],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:215,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:217,59:218},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,391],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:219,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:221,59:222},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,392],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:223,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:225,59:226},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,393],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:227,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:229,59:230},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,394],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:231,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:233,59:234},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,395],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:235,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:237,59:238},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,396],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:239,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:241,59:242},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,397],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:243,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:245,59:246},{1:[2,64],16:[2,64],29:[2,64],30:[2,64],31:[2,64],32:[2,64],33:[2,64],34:[2,64],35:[2,64],37:[2,64],38:[2,64],39:[2,64],40:[2,64],41:[2,64],42:[2,64],43:[2,64],44:[2,64],45:[2,64],46:[2,64],47:[2,64],48:[2,64],49:[2,64],65:[2,64]},{1:[2,68],16:[2,68],29:[2,68],30:[2,68],31:[2,68],32:[2,68],33:[2,68],34:[2,68],35:[2,68],37:[2,68],38:[2,68],39:[2,68],40:[2,68],41:[2,68],42:[2,68],43:[2,68],44:[2,68],45:[2,68],46:[2,68],47:[2,68],48:[2,68],49:[2,68],65:[2,68]},{1:[2,67],16:[2,67],29:[2,67],30:[2,67],31:[2,67],32:[2,67],33:[2,67],34:[2,67],35:[2,67],37:[2,67],38:[2,67],39:[2,67],40:[2,67],41:[2,67],42:[2,67],43:[2,67],44:[2,67],45:[2,67],46:[2,67],47:[2,67],48:[2,67],49:[2,67],65:[2,67]},{1:[2,41],15:[1,139],16:[2,41],29:[2,41],30:[2,41],31:[2,41],32:[2,41],33:[2,41],34:[2,41],35:[2,41],37:[2,41],38:[2,41],39:[2,41],40:[2,41],41:[2,41],42:[2,41],43:[2,41],44:[2,41],45:[2,41],46:[2,41],47:[2,41],48:[2,41],49:[2,41],53:[2,41],54:[2,41],55:[2,41],56:[2,41],65:[2,41]},{1:[2,145],16:[2,145],29:[2,145],30:[2,145],31:[2,145],32:[2,145],33:[2,145],34:[2,145],35:[2,145],37:[2,145],38:[2,145],39:[2,145],40:[2,145],41:[2,145],42:[2,145],43:[2,145],44:[2,145],45:[2,145],46:[2,145],47:[2,145],48:[2,145],49:[2,145],65:[2,145]},{1:[2,146],16:[2,146],29:[2,146],30:[2,146],31:[2,146],32:[2,146],33:[2,146],34:[2,146],35:[2,146],37:[2,146],38:[2,146],39:[2,146],40:[2,146],41:[2,146],42:[2,146],43:[2,146],44:[2,146],45:[2,146],46:[2,146],47:[2,146],48:[2,146],49:[2,146],65:[2,146]},{1:[2,149],16:[2,149],29:[2,149],30:[2,149],31:[2,149],32:[2,149],33:[2,149],34:[2,149],35:[2,149],37:[2,149],38:[2,149],39:[2,149],40:[2,149],41:[2,149],42:[2,149],43:[2,149],44:[2,149],45:[2,149],46:[2,149],47:[2,149],48:[2,149],49:[2,149],65:[2,149]},{1:[2,152],16:[2,152],29:[2,152],30:[2,152],31:[2,152],32:[2,152],33:[2,152],34:[2,152],35:[2,152],37:[2,152],38:[2,152],39:[2,152],40:[2,152],41:[2,152],42:[2,152],43:[2,152],44:[2,152],45:[2,152],46:[2,152],47:[2,152],48:[2,152],49:[2,152],65:[2,152]},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,399],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:398,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:400,59:401},{1:[2,160],16:[2,160],29:[2,160],30:[2,160],31:[2,160],32:[2,160],33:[2,160],34:[2,160],35:[2,160],37:[2,160],38:[2,160],39:[2,160],40:[2,160],41:[2,160],42:[2,160],43:[2,160],44:[2,160],45:[2,160],46:[2,160],47:[2,160],48:[2,160],49:[2,160],65:[2,160]},{1:[2,171],16:[2,171],29:[1,402]},{1:[2,170],16:[2,170]},{1:[2,172],3:285,5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],16:[2,172],18:[1,57],19:[1,25],21:53,22:51,25:12,27:50,28:[1,52],29:[2,1],31:[1,15],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],57:403,64:288},{1:[2,206],16:[2,206],29:[1,404],65:[1,62]},{1:[2,196],16:[2,196],29:[2,196]},{1:[2,197],16:[2,197],29:[2,197],65:[1,36]},{29:[1,405]},{29:[2,197],65:[1,140]},{1:[2,72],16:[2,72],29:[2,72],30:[2,72],31:[2,72],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[2,72],38:[2,72],39:[2,72],40:[2,72],41:[2,72],42:[2,72],43:[2,72],44:[2,72],45:[2,72],46:[2,72],47:[2,72],48:[2,72],49:[2,72],55:[1,82],56:[1,83],65:[2,72]},{1:[2,76],16:[2,76],29:[2,76],30:[2,76],31:[2,76],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[2,76],38:[2,76],39:[2,76],40:[2,76],41:[2,76],42:[2,76],43:[2,76],44:[2,76],45:[2,76],46:[2,76],47:[2,76],48:[2,76],49:[2,76],55:[1,82],56:[1,83],65:[2,76]},{1:[2,80],16:[2,80],29:[2,80],30:[2,80],31:[2,80],32:[2,80],33:[2,80],34:[1,145],35:[1,146],37:[2,80],38:[2,80],39:[2,80],40:[2,80],41:[2,80],42:[2,80],43:[2,80],44:[2,80],45:[2,80],46:[2,80],47:[2,80],48:[2,80],49:[2,80],55:[1,82],56:[1,83],65:[2,80]},{1:[2,84],16:[2,84],29:[2,84],30:[2,84],31:[2,84],32:[2,84],33:[2,84],34:[1,145],35:[1,146],37:[2,84],38:[2,84],39:[2,84],40:[2,84],41:[2,84],42:[2,84],43:[2,84],44:[2,84],45:[2,84],46:[2,84],47:[2,84],48:[2,84],49:[2,84],55:[1,82],56:[1,83],65:[2,84]},{1:[2,88],16:[2,88],29:[2,88],30:[2,88],31:[2,88],32:[2,88],33:[2,88],34:[2,88],35:[2,88],37:[2,88],38:[2,88],39:[2,88],40:[2,88],41:[2,88],42:[2,88],43:[2,88],44:[2,88],45:[2,88],46:[2,88],47:[2,88],48:[2,88],49:[2,88],55:[1,82],56:[1,83],65:[2,88]},{1:[2,92],16:[2,92],29:[2,92],30:[2,92],31:[2,92],32:[2,92],33:[2,92],34:[2,92],35:[2,92],37:[2,92],38:[2,92],39:[2,92],40:[2,92],41:[2,92],42:[2,92],43:[2,92],44:[2,92],45:[2,92],46:[2,92],47:[2,92],48:[2,92],49:[2,92],55:[1,82],56:[1,83],65:[2,92]},{1:[2,96],16:[2,96],29:[2,96],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[2,96],38:[2,96],39:[2,96],40:[2,96],41:[2,96],42:[2,96],43:[2,96],44:[2,96],45:[2,96],46:[2,96],47:[2,96],48:[2,96],49:[2,96],55:[1,82],56:[1,83],65:[2,96]},{1:[2,100],16:[2,100],29:[2,100],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[2,100],38:[2,100],39:[2,100],40:[2,100],41:[2,100],42:[2,100],43:[2,100],44:[2,100],45:[2,100],46:[2,100],47:[2,100],48:[2,100],49:[2,100],55:[1,82],56:[1,83],65:[2,100]},{1:[2,104],16:[2,104],29:[2,104],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[2,104],38:[2,104],39:[2,104],40:[2,104],41:[2,104],42:[2,104],43:[2,104],44:[2,104],45:[2,104],46:[2,104],47:[2,104],48:[2,104],49:[2,104],55:[1,82],56:[1,83],65:[2,104]},{1:[2,108],16:[2,108],29:[2,108],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[2,108],38:[2,108],39:[2,108],40:[2,108],41:[2,108],42:[2,108],43:[2,108],44:[2,108],45:[2,108],46:[2,108],47:[2,108],48:[2,108],49:[2,108],55:[1,82],56:[1,83],65:[2,108]},{1:[2,112],16:[2,112],29:[2,112],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[2,112],45:[2,112],46:[2,112],47:[2,112],48:[2,112],49:[2,112],55:[1,82],56:[1,83],65:[2,112]},{1:[2,116],16:[2,116],29:[2,116],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[2,116],45:[2,116],46:[2,116],47:[2,116],48:[2,116],49:[2,116],55:[1,82],56:[1,83],65:[2,116]},{1:[2,120],16:[2,120],29:[2,120],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[2,120],45:[2,120],46:[2,120],47:[2,120],48:[2,120],49:[2,120],55:[1,82],56:[1,83],65:[2,120]},{1:[2,124],16:[2,124],29:[2,124],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[2,124],45:[2,124],46:[2,124],47:[2,124],48:[2,124],49:[2,124],55:[1,82],56:[1,83],65:[2,124]},{1:[2,128],16:[2,128],29:[2,128],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[2,128],45:[2,128],46:[2,128],47:[2,128],48:[2,128],49:[2,128],55:[1,82],56:[1,83],65:[2,128]},{1:[2,132],16:[2,132],29:[2,132],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[2,132],45:[2,132],46:[2,132],47:[2,132],48:[2,132],49:[2,132],55:[1,82],56:[1,83],65:[2,132]},{1:[2,136],16:[2,136],29:[2,136],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[2,136],38:[2,136],39:[2,136],40:[2,136],41:[2,136],42:[2,136],43:[2,136],44:[2,136],45:[2,136],46:[2,136],47:[2,136],48:[2,136],49:[2,136],55:[1,82],56:[1,83],65:[2,136]},{1:[2,140],16:[2,140],29:[2,140],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[2,140],38:[2,140],39:[2,140],40:[2,140],41:[2,140],42:[2,140],43:[2,140],44:[2,140],45:[2,140],46:[2,140],47:[2,140],48:[2,140],49:[2,140],55:[1,82],56:[1,83],65:[2,140]},{1:[2,144],16:[2,144],29:[2,144],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[2,144],38:[2,144],39:[2,144],40:[2,144],41:[2,144],42:[2,144],43:[2,144],44:[2,144],45:[2,144],46:[2,144],47:[2,144],48:[2,144],49:[2,144],55:[1,82],56:[1,83],65:[2,144]},{1:[2,155],16:[2,155],29:[2,155],30:[2,155],31:[2,155],32:[2,155],33:[2,155],34:[2,155],35:[2,155],37:[2,155],38:[2,155],39:[2,155],40:[2,155],41:[2,155],42:[2,155],43:[2,155],44:[2,155],45:[2,155],46:[2,155],47:[2,155],48:[2,155],49:[2,155],65:[2,155]},{3:285,5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,406],18:[1,130],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:9,28:[1,14],29:[2,1],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],57:340,58:21,60:407,63:22,64:408,66:10},{1:[2,7],15:[2,7],16:[2,7],29:[2,7],30:[2,7],31:[2,7],32:[2,7],33:[2,7],34:[2,7],35:[2,7],37:[2,7],38:[2,7],39:[2,7],40:[2,7],41:[2,7],42:[2,7],43:[2,7],44:[2,7],45:[2,7],46:[2,7],47:[2,7],48:[2,7],49:[2,7],53:[2,7],54:[2,7],55:[2,7],56:[2,7],65:[2,7]},{3:132,7:409,8:[2,1],9:[2,1],11:[2,1],16:[2,1]},{8:[2,5],9:[2,5],11:[2,5],12:[2,5],13:[2,5],15:[2,5],16:[2,5]},{8:[2,6],9:[2,6],11:[2,6],12:[2,6],13:[2,6],15:[2,6],16:[2,6]},{1:[2,8],15:[2,8],16:[2,8],29:[2,8],30:[2,8],31:[2,8],32:[2,8],33:[2,8],34:[2,8],35:[2,8],37:[2,8],38:[2,8],39:[2,8],40:[2,8],41:[2,8],42:[2,8],43:[2,8],44:[2,8],45:[2,8],46:[2,8],47:[2,8],48:[2,8],49:[2,8],53:[2,8],54:[2,8],55:[2,8],56:[2,8],65:[2,8]},{3:132,7:410,8:[2,1],9:[2,1],12:[2,1],16:[2,1]},{1:[2,9],15:[2,9],16:[2,9],29:[2,9],30:[2,9],31:[2,9],32:[2,9],33:[2,9],34:[2,9],35:[2,9],37:[2,9],38:[2,9],39:[2,9],40:[2,9],41:[2,9],42:[2,9],43:[2,9],44:[2,9],45:[2,9],46:[2,9],47:[2,9],48:[2,9],49:[2,9],53:[2,9],54:[2,9],55:[2,9],56:[2,9],65:[2,9]},{3:132,7:411,8:[2,1],9:[2,1],13:[2,1],16:[2,1]},{1:[2,194],16:[2,194],29:[2,194],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,194]},{1:[2,34],15:[2,34],16:[2,34],29:[2,34],30:[2,34],31:[2,34],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[2,34],38:[2,34],39:[2,34],40:[2,34],41:[2,34],42:[2,34],43:[2,34],44:[2,34],45:[2,34],46:[2,34],47:[2,34],48:[2,34],49:[2,34],53:[2,34],54:[2,34],55:[2,34],56:[2,34],65:[2,34]},{1:[2,35],15:[2,35],16:[2,35],29:[2,35],30:[2,35],31:[2,35],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[2,35],38:[2,35],39:[2,35],40:[2,35],41:[2,35],42:[2,35],43:[2,35],44:[2,35],45:[2,35],46:[2,35],47:[2,35],48:[2,35],49:[2,35],53:[2,35],54:[2,35],55:[2,35],56:[2,35],65:[2,35]},{1:[2,36],15:[2,36],16:[2,36],29:[2,36],30:[2,36],31:[2,36],32:[2,36],33:[2,36],34:[1,145],35:[1,146],37:[2,36],38:[2,36],39:[2,36],40:[2,36],41:[2,36],42:[2,36],43:[2,36],44:[2,36],45:[2,36],46:[2,36],47:[2,36],48:[2,36],49:[2,36],53:[2,36],54:[2,36],55:[2,36],56:[2,36],65:[2,36]},{1:[2,37],15:[2,37],16:[2,37],29:[2,37],30:[2,37],31:[2,37],32:[2,37],33:[2,37],34:[1,145],35:[1,146],37:[2,37],38:[2,37],39:[2,37],40:[2,37],41:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],47:[2,37],48:[2,37],49:[2,37],53:[2,37],54:[2,37],55:[2,37],56:[2,37],65:[2,37]},{1:[2,38],15:[2,38],16:[2,38],29:[2,38],30:[2,38],31:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],37:[2,38],38:[2,38],39:[2,38],40:[2,38],41:[2,38],42:[2,38],43:[2,38],44:[2,38],45:[2,38],46:[2,38],47:[2,38],48:[2,38],49:[2,38],53:[2,38],54:[2,38],55:[2,38],56:[2,38],65:[2,38]},{1:[2,39],15:[2,39],16:[2,39],29:[2,39],30:[2,39],31:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],37:[2,39],38:[2,39],39:[2,39],40:[2,39],41:[2,39],42:[2,39],43:[2,39],44:[2,39],45:[2,39],46:[2,39],47:[2,39],48:[2,39],49:[2,39],53:[2,39],54:[2,39],55:[2,39],56:[2,39],65:[2,39]},{1:[2,42],15:[2,42],16:[2,42],29:[2,42],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[2,42],38:[2,42],39:[2,42],40:[2,42],41:[2,42],42:[2,42],43:[2,42],44:[2,42],45:[2,42],46:[2,42],47:[2,42],48:[2,42],49:[2,42],53:[2,42],54:[2,42],55:[2,42],56:[2,42],65:[2,42]},{1:[2,43],15:[2,43],16:[2,43],29:[2,43],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[2,43],38:[2,43],39:[2,43],40:[2,43],41:[2,43],42:[2,43],43:[2,43],44:[2,43],45:[2,43],46:[2,43],47:[2,43],48:[2,43],49:[2,43],53:[2,43],54:[2,43],55:[2,43],56:[2,43],65:[2,43]},{1:[2,44],15:[2,44],16:[2,44],29:[2,44],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[2,44],38:[2,44],39:[2,44],40:[2,44],41:[2,44],42:[2,44],43:[2,44],44:[2,44],45:[2,44],46:[2,44],47:[2,44],48:[2,44],49:[2,44],53:[2,44],54:[2,44],55:[2,44],56:[2,44],65:[2,44]},{1:[2,45],15:[2,45],16:[2,45],29:[2,45],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[2,45],38:[2,45],39:[2,45],40:[2,45],41:[2,45],42:[2,45],43:[2,45],44:[2,45],45:[2,45],46:[2,45],47:[2,45],48:[2,45],49:[2,45],53:[2,45],54:[2,45],55:[2,45],56:[2,45],65:[2,45]},{1:[2,46],15:[2,46],16:[2,46],29:[2,46],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[2,46],38:[2,46],39:[2,46],40:[2,46],41:[2,46],42:[2,46],43:[2,46],44:[2,46],45:[2,46],46:[2,46],47:[2,46],48:[2,46],49:[2,46],53:[2,46],54:[2,46],55:[2,46],56:[2,46],65:[2,46]},{1:[2,47],15:[2,47],16:[2,47],29:[2,47],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[2,47],38:[2,47],39:[2,47],40:[2,47],41:[2,47],42:[2,47],43:[2,47],44:[2,47],45:[2,47],46:[2,47],47:[2,47],48:[2,47],49:[2,47],53:[2,47],54:[2,47],55:[2,47],56:[2,47],65:[2,47]},{1:[2,48],15:[2,48],16:[2,48],29:[2,48],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[2,48],38:[2,48],39:[2,48],40:[2,48],41:[2,48],42:[2,48],43:[2,48],44:[2,48],45:[2,48],46:[2,48],47:[2,48],48:[2,48],49:[2,48],53:[2,48],54:[2,48],55:[2,48],56:[2,48],65:[2,48]},{1:[2,49],15:[2,49],16:[2,49],29:[2,49],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[2,49],45:[2,49],46:[2,49],47:[2,49],48:[2,49],49:[2,49],53:[2,49],54:[2,49],55:[2,49],56:[2,49],65:[2,49]},{1:[2,50],15:[2,50],16:[2,50],29:[2,50],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[2,50],45:[2,50],46:[2,50],47:[2,50],48:[2,50],49:[2,50],53:[2,50],54:[2,50],55:[2,50],56:[2,50],65:[2,50]},{1:[2,51],15:[2,51],16:[2,51],29:[2,51],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[2,51],45:[2,51],46:[2,51],47:[2,51],48:[2,51],49:[2,51],53:[2,51],54:[2,51],55:[2,51],56:[2,51],65:[2,51]},{1:[2,52],15:[2,52],16:[2,52],29:[2,52],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[2,52],45:[2,52],46:[2,52],47:[2,52],48:[2,52],49:[2,52],53:[2,52],54:[2,52],55:[2,52],56:[2,52],65:[2,52]},{1:[2,53],15:[2,53],16:[2,53],29:[2,53],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[2,53],45:[2,53],46:[2,53],47:[2,53],48:[2,53],49:[2,53],53:[2,53],54:[2,53],55:[2,53],56:[2,53],65:[2,53]},{1:[2,54],15:[2,54],16:[2,54],29:[2,54],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[2,54],45:[2,54],46:[2,54],47:[2,54],48:[2,54],49:[2,54],53:[2,54],54:[2,54],55:[2,54],56:[2,54],65:[2,54]},{1:[2,41],15:[2,41],16:[2,41],29:[2,41],30:[2,41],31:[2,41],32:[2,41],33:[2,41],34:[2,41],35:[2,41],37:[2,41],38:[2,41],39:[2,41],40:[2,41],41:[2,41],42:[2,41],43:[2,41],44:[2,41],45:[2,41],46:[2,41],47:[2,41],48:[2,41],49:[2,41],53:[2,41],54:[2,41],55:[2,41],56:[2,41],65:[2,41]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:412,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{29:[1,402]},{1:[2,174],16:[2,174],29:[2,174],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,174]},{1:[2,71],16:[2,71],29:[2,71],30:[2,71],31:[2,71],32:[2,71],33:[2,71],34:[2,71],35:[2,71],37:[2,71],38:[2,71],39:[2,71],40:[2,71],41:[2,71],42:[2,71],43:[2,71],44:[2,71],45:[2,71],46:[2,71],47:[2,71],48:[2,71],49:[2,71],65:[2,71]},{1:[2,175],16:[2,175],29:[2,175],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,175]},{1:[2,75],16:[2,75],29:[2,75],30:[2,75],31:[2,75],32:[2,75],33:[2,75],34:[2,75],35:[2,75],37:[2,75],38:[2,75],39:[2,75],40:[2,75],41:[2,75],42:[2,75],43:[2,75],44:[2,75],45:[2,75],46:[2,75],47:[2,75],48:[2,75],49:[2,75],65:[2,75]},{1:[2,177],16:[2,177],29:[2,177],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,177]},{1:[2,79],16:[2,79],29:[2,79],30:[2,79],31:[2,79],32:[2,79],33:[2,79],34:[2,79],35:[2,79],37:[2,79],38:[2,79],39:[2,79],40:[2,79],41:[2,79],42:[2,79],43:[2,79],44:[2,79],45:[2,79],46:[2,79],47:[2,79],48:[2,79],49:[2,79],65:[2,79]},{1:[2,178],16:[2,178],29:[2,178],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,178]},{1:[2,83],16:[2,83],29:[2,83],30:[2,83],31:[2,83],32:[2,83],33:[2,83],34:[2,83],35:[2,83],37:[2,83],38:[2,83],39:[2,83],40:[2,83],41:[2,83],42:[2,83],43:[2,83],44:[2,83],45:[2,83],46:[2,83],47:[2,83],48:[2,83],49:[2,83],65:[2,83]},{1:[2,179],16:[2,179],29:[2,179],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,179]},{1:[2,87],16:[2,87],29:[2,87],30:[2,87],31:[2,87],32:[2,87],33:[2,87],34:[2,87],35:[2,87],37:[2,87],38:[2,87],39:[2,87],40:[2,87],41:[2,87],42:[2,87],43:[2,87],44:[2,87],45:[2,87],46:[2,87],47:[2,87],48:[2,87],49:[2,87],65:[2,87]},{1:[2,176],16:[2,176],29:[2,176],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,176]},{1:[2,91],16:[2,91],29:[2,91],30:[2,91],31:[2,91],32:[2,91],33:[2,91],34:[2,91],35:[2,91],37:[2,91],38:[2,91],39:[2,91],40:[2,91],41:[2,91],42:[2,91],43:[2,91],44:[2,91],45:[2,91],46:[2,91],47:[2,91],48:[2,91],49:[2,91],65:[2,91]},{1:[2,184],16:[2,184],29:[2,184],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,184]},{1:[2,135],16:[2,135],29:[2,135],30:[2,135],31:[2,135],32:[2,135],33:[2,135],34:[2,135],35:[2,135],37:[2,135],38:[2,135],39:[2,135],40:[2,135],41:[2,135],42:[2,135],43:[2,135],44:[2,135],45:[2,135],46:[2,135],47:[2,135],48:[2,135],49:[2,135],65:[2,135]},{1:[2,185],16:[2,185],29:[2,185],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,185]},{1:[2,143],16:[2,143],29:[2,143],30:[2,143],31:[2,143],32:[2,143],33:[2,143],34:[2,143],35:[2,143],37:[2,143],38:[2,143],39:[2,143],40:[2,143],41:[2,143],42:[2,143],43:[2,143],44:[2,143],45:[2,143],46:[2,143],47:[2,143],48:[2,143],49:[2,143],65:[2,143]},{1:[2,186],16:[2,186],29:[2,186],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,186]},{1:[2,139],16:[2,139],29:[2,139],30:[2,139],31:[2,139],32:[2,139],33:[2,139],34:[2,139],35:[2,139],37:[2,139],38:[2,139],39:[2,139],40:[2,139],41:[2,139],42:[2,139],43:[2,139],44:[2,139],45:[2,139],46:[2,139],47:[2,139],48:[2,139],49:[2,139],65:[2,139]},{1:[2,180],16:[2,180],29:[2,180],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,180]},{1:[2,95],16:[2,95],29:[2,95],30:[2,95],31:[2,95],32:[2,95],33:[2,95],34:[2,95],35:[2,95],37:[2,95],38:[2,95],39:[2,95],40:[2,95],41:[2,95],42:[2,95],43:[2,95],44:[2,95],45:[2,95],46:[2,95],47:[2,95],48:[2,95],49:[2,95],65:[2,95]},{1:[2,181],16:[2,181],29:[2,181],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,181]},{1:[2,99],16:[2,99],29:[2,99],30:[2,99],31:[2,99],32:[2,99],33:[2,99],34:[2,99],35:[2,99],37:[2,99],38:[2,99],39:[2,99],40:[2,99],41:[2,99],42:[2,99],43:[2,99],44:[2,99],45:[2,99],46:[2,99],47:[2,99],48:[2,99],49:[2,99],65:[2,99]},{1:[2,182],16:[2,182],29:[2,182],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,182]},{1:[2,107],16:[2,107],29:[2,107],30:[2,107],31:[2,107],32:[2,107],33:[2,107],34:[2,107],35:[2,107],37:[2,107],38:[2,107],39:[2,107],40:[2,107],41:[2,107],42:[2,107],43:[2,107],44:[2,107],45:[2,107],46:[2,107],47:[2,107],48:[2,107],49:[2,107],65:[2,107]},{1:[2,183],16:[2,183],29:[2,183],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,183]},{1:[2,103],16:[2,103],29:[2,103],30:[2,103],31:[2,103],32:[2,103],33:[2,103],34:[2,103],35:[2,103],37:[2,103],38:[2,103],39:[2,103],40:[2,103],41:[2,103],42:[2,103],43:[2,103],44:[2,103],45:[2,103],46:[2,103],47:[2,103],48:[2,103],49:[2,103],65:[2,103]},{1:[2,191],16:[2,191],29:[2,191],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,191]},{1:[2,111],16:[2,111],29:[2,111],30:[2,111],31:[2,111],32:[2,111],33:[2,111],34:[2,111],35:[2,111],37:[2,111],38:[2,111],39:[2,111],40:[2,111],41:[2,111],42:[2,111],43:[2,111],44:[2,111],45:[2,111],46:[2,111],47:[2,111],48:[2,111],49:[2,111],65:[2,111]},{1:[2,187],16:[2,187],29:[2,187],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,187]},{1:[2,115],16:[2,115],29:[2,115],30:[2,115],31:[2,115],32:[2,115],33:[2,115],34:[2,115],35:[2,115],37:[2,115],38:[2,115],39:[2,115],40:[2,115],41:[2,115],42:[2,115],43:[2,115],44:[2,115],45:[2,115],46:[2,115],47:[2,115],48:[2,115],49:[2,115],65:[2,115]},{1:[2,189],16:[2,189],29:[2,189],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,189]},{1:[2,127],16:[2,127],29:[2,127],30:[2,127],31:[2,127],32:[2,127],33:[2,127],34:[2,127],35:[2,127],37:[2,127],38:[2,127],39:[2,127],40:[2,127],41:[2,127],42:[2,127],43:[2,127],44:[2,127],45:[2,127],46:[2,127],47:[2,127],48:[2,127],49:[2,127],65:[2,127]},{1:[2,192],16:[2,192],29:[2,192],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,192]},{1:[2,119],16:[2,119],29:[2,119],30:[2,119],31:[2,119],32:[2,119],33:[2,119],34:[2,119],35:[2,119],37:[2,119],38:[2,119],39:[2,119],40:[2,119],41:[2,119],42:[2,119],43:[2,119],44:[2,119],45:[2,119],46:[2,119],47:[2,119],48:[2,119],49:[2,119],65:[2,119]},{1:[2,188],16:[2,188],29:[2,188],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,188]},{1:[2,123],16:[2,123],29:[2,123],30:[2,123],31:[2,123],32:[2,123],33:[2,123],34:[2,123],35:[2,123],37:[2,123],38:[2,123],39:[2,123],40:[2,123],41:[2,123],42:[2,123],43:[2,123],44:[2,123],45:[2,123],46:[2,123],47:[2,123],48:[2,123],49:[2,123],65:[2,123]},{1:[2,190],16:[2,190],29:[2,190],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],55:[1,82],56:[1,83],65:[2,190]},{1:[2,131],16:[2,131],29:[2,131],30:[2,131],31:[2,131],32:[2,131],33:[2,131],34:[2,131],35:[2,131],37:[2,131],38:[2,131],39:[2,131],40:[2,131],41:[2,131],42:[2,131],43:[2,131],44:[2,131],45:[2,131],46:[2,131],47:[2,131],48:[2,131],49:[2,131],65:[2,131]},{1:[2,69],16:[2,69],29:[2,69],30:[2,69],31:[2,69],32:[2,69],33:[2,69],34:[2,69],35:[2,69],37:[2,69],38:[2,69],39:[2,69],40:[2,69],41:[2,69],42:[2,69],43:[2,69],44:[2,69],45:[2,69],46:[2,69],47:[2,69],48:[2,69],49:[2,69],55:[1,48],56:[1,49],65:[2,69]},{1:[2,73],16:[2,73],29:[2,73],30:[2,73],31:[2,73],32:[2,73],33:[2,73],34:[2,73],35:[2,73],37:[2,73],38:[2,73],39:[2,73],40:[2,73],41:[2,73],42:[2,73],43:[2,73],44:[2,73],45:[2,73],46:[2,73],47:[2,73],48:[2,73],49:[2,73],55:[1,48],56:[1,49],65:[2,73]},{1:[2,77],16:[2,77],29:[2,77],30:[2,77],31:[2,77],32:[2,77],33:[2,77],34:[2,77],35:[2,77],37:[2,77],38:[2,77],39:[2,77],40:[2,77],41:[2,77],42:[2,77],43:[2,77],44:[2,77],45:[2,77],46:[2,77],47:[2,77],48:[2,77],49:[2,77],55:[1,48],56:[1,49],65:[2,77]},{1:[2,81],16:[2,81],29:[2,81],30:[2,81],31:[2,81],32:[2,81],33:[2,81],34:[2,81],35:[2,81],37:[2,81],38:[2,81],39:[2,81],40:[2,81],41:[2,81],42:[2,81],43:[2,81],44:[2,81],45:[2,81],46:[2,81],47:[2,81],48:[2,81],49:[2,81],55:[1,48],56:[1,49],65:[2,81]},{1:[2,85],16:[2,85],29:[2,85],30:[2,85],31:[2,85],32:[2,85],33:[2,85],34:[2,85],35:[2,85],37:[2,85],38:[2,85],39:[2,85],40:[2,85],41:[2,85],42:[2,85],43:[2,85],44:[2,85],45:[2,85],46:[2,85],47:[2,85],48:[2,85],49:[2,85],55:[1,48],56:[1,49],65:[2,85]},{1:[2,89],16:[2,89],29:[2,89],30:[2,89],31:[2,89],32:[2,89],33:[2,89],34:[2,89],35:[2,89],37:[2,89],38:[2,89],39:[2,89],40:[2,89],41:[2,89],42:[2,89],43:[2,89],44:[2,89],45:[2,89],46:[2,89],47:[2,89],48:[2,89],49:[2,89],55:[1,48],56:[1,49],65:[2,89]},{1:[2,133],16:[2,133],29:[2,133],30:[2,133],31:[2,133],32:[2,133],33:[2,133],34:[2,133],35:[2,133],37:[2,133],38:[2,133],39:[2,133],40:[2,133],41:[2,133],42:[2,133],43:[2,133],44:[2,133],45:[2,133],46:[2,133],47:[2,133],48:[2,133],49:[2,133],55:[1,48],56:[1,49],65:[2,133]},{1:[2,141],16:[2,141],29:[2,141],30:[2,141],31:[2,141],32:[2,141],33:[2,141],34:[2,141],35:[2,141],37:[2,141],38:[2,141],39:[2,141],40:[2,141],41:[2,141],42:[2,141],43:[2,141],44:[2,141],45:[2,141],46:[2,141],47:[2,141],48:[2,141],49:[2,141],55:[1,48],56:[1,49],65:[2,141]},{1:[2,137],16:[2,137],29:[2,137],30:[2,137],31:[2,137],32:[2,137],33:[2,137],34:[2,137],35:[2,137],37:[2,137],38:[2,137],39:[2,137],40:[2,137],41:[2,137],42:[2,137],43:[2,137],44:[2,137],45:[2,137],46:[2,137],47:[2,137],48:[2,137],49:[2,137],55:[1,48],56:[1,49],65:[2,137]},{1:[2,93],16:[2,93],29:[2,93],30:[2,93],31:[2,93],32:[2,93],33:[2,93],34:[2,93],35:[2,93],37:[2,93],38:[2,93],39:[2,93],40:[2,93],41:[2,93],42:[2,93],43:[2,93],44:[2,93],45:[2,93],46:[2,93],47:[2,93],48:[2,93],49:[2,93],55:[1,48],56:[1,49],65:[2,93]},{1:[2,97],16:[2,97],29:[2,97],30:[2,97],31:[2,97],32:[2,97],33:[2,97],34:[2,97],35:[2,97],37:[2,97],38:[2,97],39:[2,97],40:[2,97],41:[2,97],42:[2,97],43:[2,97],44:[2,97],45:[2,97],46:[2,97],47:[2,97],48:[2,97],49:[2,97],55:[1,48],56:[1,49],65:[2,97]},{1:[2,105],16:[2,105],29:[2,105],30:[2,105],31:[2,105],32:[2,105],33:[2,105],34:[2,105],35:[2,105],37:[2,105],38:[2,105],39:[2,105],40:[2,105],41:[2,105],42:[2,105],43:[2,105],44:[2,105],45:[2,105],46:[2,105],47:[2,105],48:[2,105],49:[2,105],55:[1,48],56:[1,49],65:[2,105]},{1:[2,101],16:[2,101],29:[2,101],30:[2,101],31:[2,101],32:[2,101],33:[2,101],34:[2,101],35:[2,101],37:[2,101],38:[2,101],39:[2,101],40:[2,101],41:[2,101],42:[2,101],43:[2,101],44:[2,101],45:[2,101],46:[2,101],47:[2,101],48:[2,101],49:[2,101],55:[1,48],56:[1,49],65:[2,101]},{1:[2,109],16:[2,109],29:[2,109],30:[2,109],31:[2,109],32:[2,109],33:[2,109],34:[2,109],35:[2,109],37:[2,109],38:[2,109],39:[2,109],40:[2,109],41:[2,109],42:[2,109],43:[2,109],44:[2,109],45:[2,109],46:[2,109],47:[2,109],48:[2,109],49:[2,109],55:[1,48],56:[1,49],65:[2,109]},{1:[2,113],16:[2,113],29:[2,113],30:[2,113],31:[2,113],32:[2,113],33:[2,113],34:[2,113],35:[2,113],37:[2,113],38:[2,113],39:[2,113],40:[2,113],41:[2,113],42:[2,113],43:[2,113],44:[2,113],45:[2,113],46:[2,113],47:[2,113],48:[2,113],49:[2,113],55:[1,48],56:[1,49],65:[2,113]},{1:[2,125],16:[2,125],29:[2,125],30:[2,125],31:[2,125],32:[2,125],33:[2,125],34:[2,125],35:[2,125],37:[2,125],38:[2,125],39:[2,125],40:[2,125],41:[2,125],42:[2,125],43:[2,125],44:[2,125],45:[2,125],46:[2,125],47:[2,125],48:[2,125],49:[2,125],55:[1,48],56:[1,49],65:[2,125]},{1:[2,117],16:[2,117],29:[2,117],30:[2,117],31:[2,117],32:[2,117],33:[2,117],34:[2,117],35:[2,117],37:[2,117],38:[2,117],39:[2,117],40:[2,117],41:[2,117],42:[2,117],43:[2,117],44:[2,117],45:[2,117],46:[2,117],47:[2,117],48:[2,117],49:[2,117],55:[1,48],56:[1,49],65:[2,117]},{1:[2,121],16:[2,121],29:[2,121],30:[2,121],31:[2,121],32:[2,121],33:[2,121],34:[2,121],35:[2,121],37:[2,121],38:[2,121],39:[2,121],40:[2,121],41:[2,121],42:[2,121],43:[2,121],44:[2,121],45:[2,121],46:[2,121],47:[2,121],48:[2,121],49:[2,121],55:[1,48],56:[1,49],65:[2,121]},{1:[2,129],16:[2,129],29:[2,129],30:[2,129],31:[2,129],32:[2,129],33:[2,129],34:[2,129],35:[2,129],37:[2,129],38:[2,129],39:[2,129],40:[2,129],41:[2,129],42:[2,129],43:[2,129],44:[2,129],45:[2,129],46:[2,129],47:[2,129],48:[2,129],49:[2,129],55:[1,48],56:[1,49],65:[2,129]},{1:[2,57],15:[1,271],16:[2,57],29:[2,57],30:[1,252],31:[1,253],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[1,258],38:[1,259],39:[1,260],40:[1,261],41:[1,262],42:[1,263],43:[1,264],44:[1,265],45:[1,266],46:[1,267],47:[1,268],48:[1,269],49:[1,270],53:[2,57],54:[1,413],55:[2,57],56:[2,57],65:[2,57]},{1:[2,161],16:[2,161],29:[2,161],30:[2,161],31:[2,161],32:[2,161],33:[2,161],34:[2,161],35:[2,161],37:[2,161],38:[2,161],39:[2,161],40:[2,161],41:[2,161],42:[2,161],43:[2,161],44:[2,161],45:[2,161],46:[2,161],47:[2,161],48:[2,161],49:[2,161],55:[1,48],56:[1,49],65:[2,161]},{1:[2,162],16:[2,162],29:[2,162],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[1,122],38:[1,124],39:[1,123],40:[1,112],41:[1,113],42:[1,115],43:[1,114],44:[1,116],45:[1,117],46:[1,120],47:[1,118],48:[1,119],49:[1,121],65:[2,162]},{16:[1,414]},{1:[2,61],15:[2,61],16:[2,61],29:[2,61],30:[2,61],31:[2,61],32:[2,61],33:[2,61],34:[2,61],35:[2,61],37:[2,61],38:[2,61],39:[2,61],40:[2,61],41:[2,61],42:[2,61],43:[2,61],44:[2,61],45:[2,61],46:[2,61],47:[2,61],48:[2,61],49:[2,61],53:[2,61],54:[2,61],55:[2,61],56:[2,61],65:[2,61]},{29:[1,415]},{1:[2,168],16:[2,168],29:[2,168],30:[2,168],31:[2,168],32:[2,168],33:[2,168],34:[2,168],35:[2,168],37:[2,168],38:[2,168],39:[2,168],40:[2,168],41:[2,168],42:[2,168],43:[2,168],44:[2,168],45:[2,168],46:[2,168],47:[2,168],48:[2,168],49:[2,168],65:[2,168]},{1:[2,169],16:[2,169],29:[2,169],30:[2,169],31:[2,169],32:[2,169],33:[2,169],34:[2,169],35:[2,169],37:[2,169],38:[2,169],39:[2,169],40:[2,169],41:[2,169],42:[2,169],43:[2,169],44:[2,169],45:[2,169],46:[2,169],47:[2,169],48:[2,169],49:[2,169],65:[2,169]},{3:285,5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:50,28:[1,52],29:[2,1],31:[1,15],50:[1,54],51:[1,55],52:[1,56],55:[1,48],56:[1,49],57:403,64:288},{29:[1,404],65:[1,62]},{29:[2,197],65:[1,416]},{8:[1,312],9:[1,313],11:[1,418],16:[1,417]},{8:[1,312],9:[1,313],12:[1,420],16:[1,419]},{8:[1,312],9:[1,313],13:[1,422],16:[1,421]},{1:[2,57],15:[2,57],16:[2,57],29:[2,57],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],53:[2,57],54:[1,423],55:[2,57],56:[2,57],65:[2,57]},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,425],18:[1,20],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:424,28:[1,14],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:426,59:427},{1:[2,163],16:[2,163],29:[2,163],30:[2,163],31:[2,163],32:[2,163],33:[2,163],34:[2,163],35:[2,163],37:[2,163],38:[2,163],39:[2,163],40:[2,163],41:[2,163],42:[2,163],43:[2,163],44:[2,163],45:[2,163],46:[2,163],47:[2,163],48:[2,163],49:[2,163],65:[2,163]},{1:[2,167],16:[2,167],29:[2,167],30:[2,167],31:[2,167],32:[2,167],33:[2,167],34:[2,167],35:[2,167],37:[2,167],38:[2,167],39:[2,167],40:[2,167],41:[2,167],42:[2,167],43:[2,167],44:[2,167],45:[2,167],46:[2,167],47:[2,167],48:[2,167],49:[2,167],65:[2,167]},{5:[1,23],6:[1,24],10:26,11:[1,31],12:[1,32],13:[1,33],14:34,15:[1,136],18:[1,130],19:[1,25],21:16,22:13,24:28,25:12,26:27,27:135,28:[1,14],29:[2,195],31:[1,15],50:[1,17],51:[1,18],52:[1,19],55:[1,29],56:[1,30],58:21,63:22,65:[2,195],66:137},{1:[2,10],16:[2,10],29:[2,10],30:[2,10],31:[2,10],32:[2,10],33:[2,10],34:[2,10],35:[2,10],37:[2,10],38:[2,10],39:[2,10],40:[2,10],41:[2,10],42:[2,10],43:[2,10],44:[2,10],45:[2,10],46:[2,10],47:[2,10],48:[2,10],49:[2,10],65:[2,10]},{1:[2,13],16:[2,13],29:[2,13],30:[2,13],31:[2,13],32:[2,13],33:[2,13],34:[2,13],35:[2,13],37:[2,13],38:[2,13],39:[2,13],40:[2,13],41:[2,13],42:[2,13],43:[2,13],44:[2,13],45:[2,13],46:[2,13],47:[2,13],48:[2,13],49:[2,13],65:[2,13]},{1:[2,11],16:[2,11],29:[2,11],30:[2,11],31:[2,11],32:[2,11],33:[2,11],34:[2,11],35:[2,11],37:[2,11],38:[2,11],39:[2,11],40:[2,11],41:[2,11],42:[2,11],43:[2,11],44:[2,11],45:[2,11],46:[2,11],47:[2,11],48:[2,11],49:[2,11],65:[2,11]},{1:[2,14],16:[2,14],29:[2,14],30:[2,14],31:[2,14],32:[2,14],33:[2,14],34:[2,14],35:[2,14],37:[2,14],38:[2,14],39:[2,14],40:[2,14],41:[2,14],42:[2,14],43:[2,14],44:[2,14],45:[2,14],46:[2,14],47:[2,14],48:[2,14],49:[2,14],65:[2,14]},{1:[2,12],16:[2,12],29:[2,12],30:[2,12],31:[2,12],32:[2,12],33:[2,12],34:[2,12],35:[2,12],37:[2,12],38:[2,12],39:[2,12],40:[2,12],41:[2,12],42:[2,12],43:[2,12],44:[2,12],45:[2,12],46:[2,12],47:[2,12],48:[2,12],49:[2,12],65:[2,12]},{1:[2,15],16:[2,15],29:[2,15],30:[2,15],31:[2,15],32:[2,15],33:[2,15],34:[2,15],35:[2,15],37:[2,15],38:[2,15],39:[2,15],40:[2,15],41:[2,15],42:[2,15],43:[2,15],44:[2,15],45:[2,15],46:[2,15],47:[2,15],48:[2,15],49:[2,15],65:[2,15]},{5:[1,23],6:[1,24],10:26,11:[1,58],12:[1,59],13:[1,60],18:[1,57],19:[1,25],21:53,22:51,25:12,27:428,28:[1,52],31:[1,15],50:[1,54],51:[1,55],52:[1,56]},{1:[2,58],15:[1,271],16:[2,58],29:[2,58],30:[1,252],31:[1,253],32:[1,254],33:[1,255],34:[1,256],35:[1,257],37:[1,258],38:[1,259],39:[1,260],40:[1,261],41:[1,262],42:[1,263],43:[1,264],44:[1,265],45:[1,266],46:[1,267],47:[1,268],48:[1,269],49:[1,270],53:[2,58],54:[2,58],55:[2,58],56:[2,58],65:[2,58]},{1:[2,164],16:[2,164],29:[2,164],30:[2,164],31:[2,164],32:[2,164],33:[2,164],34:[2,164],35:[2,164],37:[2,164],38:[2,164],39:[2,164],40:[2,164],41:[2,164],42:[2,164],43:[2,164],44:[2,164],45:[2,164],46:[2,164],47:[2,164],48:[2,164],49:[2,164],55:[1,48],56:[1,49],65:[2,164]},{1:[2,165],16:[2,165],29:[2,165],30:[1,106],31:[1,107],32:[1,108],33:[1,109],34:[1,110],35:[1,111],37:[1,122],38:[1,124],39:[1,123],40:[1,112],41:[1,113],42:[1,115],43:[1,114],44:[1,116],45:[1,117],46:[1,120],47:[1,118],48:[1,119],49:[1,121],65:[2,165]},{16:[1,429]},{1:[2,58],15:[2,58],16:[2,58],29:[2,58],30:[1,141],31:[1,142],32:[1,143],33:[1,144],34:[1,145],35:[1,146],37:[1,147],38:[1,148],39:[1,149],40:[1,150],41:[1,151],42:[1,152],43:[1,153],44:[1,154],45:[1,155],46:[1,156],47:[1,157],48:[1,158],49:[1,159],53:[2,58],54:[2,58],55:[2,58],56:[2,58],65:[2,58]},{1:[2,166],16:[2,166],29:[2,166],30:[2,166],31:[2,166],32:[2,166],33:[2,166],34:[2,166],35:[2,166],37:[2,166],38:[2,166],39:[2,166],40:[2,166],41:[2,166],42:[2,166],43:[2,166],44:[2,166],45:[2,166],46:[2,166],47:[2,166],48:[2,166],49:[2,166],65:[2,166]}],defaultActions:{},parseError:function(e,t){if(!t.recoverable)throw new Error(e);
this.trace(e)},parse:function(e){function t(){var e;return e=n.lexer.lex()||h,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,i=[0],r=[null],o=[],s=this.table,a="",l=0,c=0,u=0,d=2,h=1;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var f=this.lexer.yylloc;o.push(f);var p=this.lexer.options&&this.lexer.options.ranges;this.parseError="function"==typeof this.yy.parseError?this.yy.parseError:Object.getPrototypeOf(this).parseError;for(var m,g,v,b,y,w,x,k,_,S={};;){if(v=i[i.length-1],this.defaultActions[v]?b=this.defaultActions[v]:((null===m||"undefined"==typeof m)&&(m=t()),b=s[v]&&s[v][m]),"undefined"==typeof b||!b.length||!b[0]){var C="";_=[];for(w in s[v])this.terminals_[w]&&w>d&&_.push("'"+this.terminals_[w]+"'");C=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+_.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(l+1)+": Unexpected "+(m==h?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[m]||m,line:this.lexer.yylineno,loc:f,expected:_})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+m);switch(b[0]){case 1:i.push(m),r.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(b[1]),m=null,g?(m=g,g=null):(c=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,f=this.lexer.yylloc,u>0&&u--);break;case 2:if(x=this.productions_[b[1]][1],S.$=r[r.length-x],S._$={first_line:o[o.length-(x||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(x||1)].first_column,last_column:o[o.length-1].last_column},p&&(S._$.range=[o[o.length-(x||1)].range[0],o[o.length-1].range[1]]),y=this.performAction.call(S,a,c,l,this.yy,b[1],r,o),"undefined"!=typeof y)return y;x&&(i=i.slice(0,-1*x*2),r=r.slice(0,-1*x),o=o.slice(0,-1*x)),i.push(this.productions_[b[1]][0]),r.push(S.$),o.push(S._$),k=s[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}},n=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),i=e[0].match(/(?:\r\n?|\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in r)this[o]=r[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,i;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;o<r.length;o++)if(n=this._input.match(this.rules[r[o]]),n&&(!t||n[0].length>t[0].length)){if(t=n,i=o,this.options.backtrack_lexer){if(e=this.test_match(n,r[o]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?(e=this.test_match(t,r[i]),e!==!1?e:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,n,i){switch(n){case 0:break;case 1:return 36;case 2:return 28;case 3:return 29;case 4:return 65;case 5:return 19;case 6:return 19;case 7:return 23;case 8:return 30;case 9:return 31;case 10:return 35;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 40;case 15:return 41;case 16:return 42;case 17:return 43;case 18:return 37;case 19:return 38;case 20:return 39;case 21:return 51;case 22:return 44;case 23:return 47;case 24:return 50;case 25:return 52;case 26:return 53;case 27:return 54;case 28:return 55;case 29:return 55;case 30:return 56;case 31:return 56;case 32:return 5;case 33:return 6;case 34:return 18;case 35:return 61;case 36:return 15;case 37:return 15;case 38:return 15;case 39:return 15;case 40:return 16;case 41:return 16;case 42:return 16;case 43:return 16;case 44:return this.begin("QUOTE"),"'";case 45:return this.popState(),"'";case 46:this.begin("ESC");break;case 47:return 8;case 48:return this.begin("DBLQUOTE"),12;case 49:return this.popState(),12;case 50:this.begin("ESC");break;case 51:return 8;case 52:return this.popState(),8;case 53:return this.begin("REGEXQUOTE"),13;case 54:return this.popState(),13;case 55:this.begin("REGEXESC");break;case 56:return 8;case 57:return this.popState(),8;case 58:return this.popState(),9;case 59:return 70;case 60:return 71}},rules:[/^(?:\s+)/,/^(?::)/,/^(?:\()/,/^(?:\))/,/^(?:,)/,/^(?:\d+(\.\d*)?)/,/^(?:\.\d+)/,/^(?:\.)/,/^(?:\+)/,/^(?:-)/,/^(?:\*\*)/,/^(?:\*)/,/^(?:\/)/,/^(?:\^)/,/^(?:<=)/,/^(?:>=)/,/^(?:!=)/,/^(?:<>)/,/^(?:=)/,/^(?:<)/,/^(?:>)/,/^(?:!)/,/^(?:and\b)/,/^(?:or\b)/,/^(?:not\b)/,/^(?:if\b)/,/^(?:then\b)/,/^(?:else\b)/,/^(?:ascending\b)/,/^(?:asc\b)/,/^(?:descending\b)/,/^(?:desc\b)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:[_0-9A-Za-zA-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]+)/,/^(?:\s*‸\s*\()/,/^(?:‸)/,/^(?:‸)/,/^(?:‸)/,/^(?:‸)/,/^(?:$)/,/^(?:$)/,/^(?:$)/,/^(?:$)/,/^(?:')/,/^(?:')/,/^(?:\\)/,/^(?:[^'\\‸]*)/,/^(?:")/,/^(?:")/,/^(?:\\)/,/^(?:[^"\\‸]*)/,/^(?:.)/,/^(?:@\/)/,/^(?:\/)/,/^(?:\\)/,/^(?:[^\/\\‸]*)/,/^(?:\/)/,/^(?:[^\/])/,/^(?:%%TOKEN%%)/,/^(?:%%FORMULA%%)/],conditions:{REGEXESC:{rules:[57,58],inclusive:!1},ESC:{rules:[52],inclusive:!1},REGEXQUOTE:{rules:[39,42,54,55,56],inclusive:!1},DBLQUOTE:{rules:[38,41,49,50,51],inclusive:!1},QUOTE:{rules:[37,40,45,46,47],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,43,44,48,53,59,60],inclusive:!0}}};return e}();return t.lexer=n,e.prototype=t,t.Parser=e,new e}();"undefined"!=typeof e&&"undefined"!=typeof n&&(n.parser=r,n.Parser=r.Parser,n.parse=function(){return r.parse.apply(r,arguments)},n.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),i.exit(1));var r=e("fs").readFileSync(e("path").normalize(t[1]),"utf8");return n.parser.parse(r)},"undefined"!=typeof t&&e.main===t&&n.main(i.argv.slice(1)))}).call(this,e("_process"))},{_process:705,fs:602,path:702}],17:[function(e,t){t.exports={entries:[{title:"...",onboardingTitle:"View attendees/tickets",integration:"eventbrite",keyWords:"",conditions:["EventbriteOnAttendeesSheet"],content:"<p>Info about each attendee/ticket shows up here, including any custom questions.</p>",cid:"eventbrite-view-attendees"},{title:"...",onboardingTitle:"View orders",integration:"eventbrite",keyWords:"",conditions:["EventbriteOnOrdersSheet"],content:"<p>Info about each order shows up here. An order can have multiple tickets.</p>",cid:"eventbrite-view-orders"},{title:"...",onboardingTitle:"Get reports",integration:"eventbrite",keyWords:"",conditions:["EventbriteOnReportView"],content:"<p>This is a report on attendees. It will always reflect the latest attendee data.</p>",cid:"eventbrite-get-reports"},{onboardingTitle:"Search, sort and filter",title:"How do I search/filter?",keyWords:["power","bar","query"],conditions:["OnSheetDetail","SheetNotEmpty"],integration:"eventbrite",target:".chit-well",pointer:"left",cid:"search-sort-filter",content:"<p><strong>Search here</strong>. Use the dropdown menu to search just one column or filter by a formula.</p>\n\n<h1>Keyboard shortcut: <code>/</code></h1>"},{title:"...",onboardingTitle:"Annotate with custom columns",integration:"eventbrite",keyWords:["field"],conditions:["OnSheetDetail","AddedField"],target:".fast-table-editor",pointer:"bottom-right",content:"<p>Now you can give it a name.</p>",cid:"eventbrite-add-column"},{title:"How do I view the detail page for a record?",onboardingTitle:"View the detail page",conditions:["OnRecordDetail"],content:"<p>This is the detail page for “{{name}}”. It’s like looking at just one row, laid out vertically.</p>",cid:"detail-page"},{title:"...",onboardingTitle:"Link sheets",conditions:["LinkCreated"],content:"<p>This is the new, linked sheet.</p>",cid:"link-sheets"},{title:"...",onboardingTitle:"Sort, filter & group",target:".chit-well",pointer:"left",conditions:["OnSheetDetail","SheetNotEmpty","NotOnFormulaPanel"],content:"<p><strong>Click the query bar</strong> to sort, filter or group.</p>",cid:"sort-filter-group"},{title:"...",onboardingTitle:"Save query",conditions:["OnSheetDetail","QuerySaved"],target:".sheet-title",pointer:"top",content:"<p>Now you can give a name for the query.</p>",cid:"save-query"},{title:"How do I group by a column?",keyWords:["grouped","grouping"],conditions:["OnSheetDetail","SheetNotEmpty","NotOnFormulaPanel"],pointer:"top",cid:"group",content:"<p><strong>Click this icon</strong> to group by {{col}} column.</p>"},{title:"How do I add a sum (average, count, etc.) at the bottom of a column?",keyWords:["count","average","avg","min","max","formula","totals","aggregates"],conditions:["AggregatesMenuOpened"]},{title:"How do I add a formula to a column?",keyWords:["calculate","calculation","expression","math"],conditions:["OnFormulaPanelForNewField"],target:".formula-field",pointer:"bottom-right",content:"<p>Enter a formula here and click “Save” when you&#39;re done.</p>\n\n<h1>Type &quot;=&quot; into any cell to open this panel.</h1>"},{title:"How do I export a sheet as a CSV file?",keyWords:["download","spreadsheet","excel","google","docs"],conditions:["SheetMenuOpened"],target:".export-csv",pointer:"left",content:"<p><strong>Click this item</strong> to download.</p>"},{title:"Can I import/export an Excel or Google spreadsheet?",keyWords:["upload","download"],content:"<p>Right now we only support import/export of single sheets in CSV format.</p>\n\n<p>You can&#39;t import or export full multi-sheet workbooks yet.</p>",conditions:[]},{title:"Can I put validation rules on a field?",content:"<p>Sorry, we don&#39;t have validation rules yet.</p>",conditions:[]},{title:"Can I do conditional formatting?",content:"<p>Sorry, we don&#39;t have conditional formatting yet.</p>",conditions:[]}],steps:[{name:"GoToRecord",conditions:["OnSheetDetail","NotOnFormulaPanel","SheetNotEmpty","NameFieldVisible"],target:".fast-record-list td.name-col a",pointer:"top",content:"<p><strong>Click the link</strong> to go to the record.</p>"},{name:"GoToSheet",conditions:["OnBookDetail"],target:".sheet-tabs a.sheet-link",pointer:"left",content:"<p><strong>Click on a sheet</strong> so we can demonstrate.</p>"},{name:"GoToMainSheet",conditions:["OnBookDetail"],target:".sheet-tabs",pointer:"left",content:"<p><strong>Click on a sheet title</strong> so we can demonstrate.</p>"},{name:"GoToNonEmptySheet",conditions:["OnBookDetail"],target:".sheet-tabs",pointer:"left",content:"<p>This sheet is empty. Go to a sheet with some records first.</p>"},{name:"GoToBookDetail",conditions:["OnBookList"],target:".book-link",pointer:"left",content:"<p><strong>Click on a book</strong> so we can demonstrate.</p>"},{name:"GoToBookList",target:".book-header a:first",pointer:"left",content:"<p><strong>Click this link</strong> to go to the book list.</p>",conditions:[]},{name:"CloseFormulaPanel",conditions:["OnFormulaPanel"],target:".formula-panel .close",pointer:"left",content:"<p><strong>Click this button</strong> to close the formula panel.</p>"},{name:"OpenFormulaPanel",conditions:["OnSheetDetail"],target:"td.data",pointer:"left",content:"<p>Type &quot;=&quot; into a cell to open the formula panel.</p>"},{name:"ClickSubsheetButton",conditions:["OnRecordDetail"],target:".add-subsheet",pointer:"left",content:"<p><strong>Click this button</strong> to add a subsheet.</p>"},{name:"OpenSheetMenu",conditions:["OnSheetDetail","NotOnFormulaPanel"],target:".sheet-actions",pointer:"left",content:"<p><strong>Click this button</strong> for a menu.</p>"},{name:"OpenAggregatesMenu",conditions:["OnSheetDetail","NotOnFormulaPanel","AggregatesVisible"],target:[".summary","tr.empty td.data"],pointer:"top",content:"<p>Summary functions (sum, average, count, etc.) are shown here automatically.</p>\n\n<p>Right click to change what kind of summary function is shown.</p>"},{name:"ScrollToAggregates",conditions:["OnSheetDetail","NotOnFormulaPanel"],content:"<p><strong>Scroll down</strong> to the bottom of the sheet.</p>"},{name:"OpenNewFieldSettings",conditions:["OnSheetDetail","NamedNewField","NotOnFormulaPanel"],pointer:"top",content:"<p><strong>Click this icon</strong> to open the field options menu.</p>"},{name:"NameNewField",conditions:["OnSheetDetail","AddedFieldForNamingNewField","NotOnFormulaPanel"],pointer:"top",content:"<p>You can give the field a name now if you want.</p>"},{name:"OpenFormulaPanelForNewField",conditions:["OnSheetDetail","NewFieldSettingsOpened"],target:".set-formula",pointer:"left",content:"<p><strong>Choose this item</strong> to set a formula.</p>"},{name:"AddFieldForNamingNewField",conditions:["OnSheetDetail"],target:".add-field",pointer:"top-right",content:"<p>We&#39;ll demonstrate on a new column. <strong>Click the plus sign</strong> to add one.</p>"},{name:"AddField",conditions:["OnSheetDetail","NotOnFormulaPanel","AddFieldColumnIsVisible"],target:".add-field .relative",pointer:"top-right",content:"<p><strong>Click the plus sign</strong> to add a field.</p>"},{name:"AddRow",conditions:["OnSheetDetail","NotOnFormulaPanel"],pointer:"bottom",content:"<p>Enter at least three values in this column so we can demonstrate.</p>"},{name:"ScrollToNameField",conditions:["NameFieldNotVisible"],content:"<p><strong>Scroll left</strong> to the first column.</p>"},{name:"ScrollToTable",conditions:["OnSheetDetail"],content:"<p><strong>Scroll</strong> to the table.</p>"},{name:"ScrollToAddFieldColumn",conditions:["TableVisible","AddFieldColumnIsHidden"],content:"<p><strong>Scroll right</strong> to the last column.</p>"},{name:"AddBook",conditions:["OnBookList"],target:".btn.new-book",pointer:"top-right",content:"<p><strong>Click this button</strong> to add a book.</p>"},{name:"CreateLink",conditions:["OnLinkModal"],pointer:"bottom",content:"<p><strong>Click</strong> on a column to create the link.</p>"},{name:"OpenLinkModal",conditions:["OnSheetDetail","SheetHasField","SheetHasLinkableField","SheetHasFieldWith3NonEmptyCell"],target:".link-tool",pointer:"top-left",content:"<p><strong>Click this button</strong> to create the link.</p>"},{name:"EnterQuery",conditions:["OnSheetDetail","SheetNotEmpty","NotOnFormulaPanel"],target:".chit-well",pointer:"left",content:"<p><strong>Click the query bar</strong> to enter a query.</p>"},{name:"SaveQuery",conditions:["OnSheetDetail","OnMainSheet","QueryNotEmpty"],target:".powerbar .save-search",pointer:"bottom",content:"<p><strong>Click this button</strong> to save the query.</p>"},{name:"EventbriteGoToAttendeesSheet",conditions:["OnBookDetail"],target:".integration-eventbrite-attendees .sheet-tab-item.sheet-item a",pointer:"bottom-left",content:"<p><strong>Click</strong> this tab</p>"},{name:"EventbriteGoToOrdersSheet",conditions:["OnBookDetail"],target:".integration-eventbrite-orders .sheet-tab-item.sheet-item a",pointer:"bottom-left",content:"<p><strong>Click</strong> this tab</p>"},{name:"EventbriteGoToReportNavItem",conditions:["OnBookDetail"],target:".integration-eventbrite-attendees .report-nav-item a",pointer:"bottom-left",content:"<p><strong>Click</strong> this link</p>"}],tutorials:[{slug:"trackWorkflow",title:"Track a workflow",openingText:"<p>When you&#39;re tracking tasks, leads, or other items, <strong>grouping</strong> helps you see and update progress. Let&#39;s try it.</p>",completionText:"<p>You can group on any column and save it as a view to slice and dice your data however you want.</p>",conditions:["TrackWorkflow:SavedView"],steps:[{name:"TrackWorkflow:OpenFieldMenu",conditions:["TrackWorkflow:OnSheetDetail"],target:".row-header.col-f3 .field-settings",pointer:"top",content:"<p><strong>Click this icon</strong> to open the column options menu.</p>"},{name:"TrackWorkflow:ClickGroup",conditions:["TrackWorkflow:OnSheetDetail","TrackWorkflow:FieldMenuOpen"],target:'.group-field[data-key="f3"]',pointer:"right",content:"<p><strong>Click this item</strong> to group by the <strong>Status</strong> column</p>"},{name:"TrackWorkflow:DragRecord",conditions:["TrackWorkflow:OnSheetDetail","TrackWorkflow:IsGrouped"],target:'tr.table-row:contains("First task") .row-handle-cell',pointer:"right",content:"<p><strong>Click and drag</strong> to move a row to a different group</p>"},{name:"TrackWorkflow:DragGroup",conditions:["TrackWorkflow:OnSheetDetail","TrackWorkflow:IsGrouped","TrackWorkflow:HasDraggedRecord"],target:'.group-title-middle:contains("Working")',pointer:"right",content:"<p><strong>Click and drag</strong> to change group order</p>"},{name:"TrackWorkflow:SaveView",conditions:["TrackWorkflow:IsGrouped","TrackWorkflow:HasDraggedGroup"],target:".btn.save-search",pointer:"top",content:"<p><strong>Click</strong> to save this view of your data</p>"},{name:"TrackWorkflow:ClickSheetTab",conditions:["OnBookDetail"],target:'.sheet-link:contains("Tasks")',pointer:"left",content:"<p><strong>Click this link</strong> to go to the <strong>Tasks</strong> sheet</p>"}]},{slug:"addDetail",title:"Add detail",openingText:"<p>Each row in a Fieldbook sheet can hold as much detail as you want. Here, we&#39;ll show you.</p>",completionText:"<p>Use the detail page when you have lots of text, many fields, or linked records such as the contacts in this example.</p>",conditions:["AddDetail:OnRecord","AddDetail:AddedContact"],steps:[{name:"AddDetail:GoToRecord",conditions:["AddDetail:OnSheetDetail"],target:"p:contains('Honeywell') .ref-link",pointer:"right",content:"<p><strong>Click this link</strong> to view the detail for this record</p>"},{name:"AddDetail:AddContact",conditions:["AddDetail:OnRecord"],target:".row-empty.col-f0",pointer:"top",content:"<p><strong>Type here</strong> to enter a new contact name</p>"},{name:"AddDetail:ClickSheetTab",conditions:["OnBookDetail"],target:'.sheet-link:contains("Companies")',pointer:"left",content:"<p><strong>Click this link</strong> to go to the <strong>Companies</strong> sheet</p>"}]},{slug:"focusRelevant",title:"Focus on relevant items",openingText:"<p>Fieldbook makes it easy to focus on just what you need to see right now, using <strong>search, sort and filter</strong>. In this tutorial we&#39;ll show you how.</p>",completionText:"<p>You just created a custom view and saved it to get back to anytime. This is great for focusing on active or high-priority items when you have a large sheet.</p>",conditions:["FocusRelevant:HasFilter","FocusRelevant:HasSort","FocusRelevant:Saved","FocusRelevant:Named"],steps:[{name:"FocusRelevant:AddFilter",conditions:["FocusRelevant:OnLeads"],target:".search-container",pointer:"top",content:"<p><strong>Type here</strong> to filter. Try this:</p>\n\n<p><code>filter contract_size &gt; 125000</code></p>"},{name:"FocusRelevant:AddSort",conditions:["FocusRelevant:OnLeads","FocusRelevant:HasFilter"],target:".search-container",pointer:"top",content:"<p>You can also sort by a column. Add:</p>\n\n<p><code>sort company</code></p>\n\n<p>to sort the list alphabetically by company name</p>"},{name:"FocusRelevant:SaveView",conditions:["FocusRelevant:OnLeads","FocusRelevant:HasFilter","FocusRelevant:HasSort"],target:".btn.save-search",pointer:"top",content:"<p><strong>Click</strong> to save this view of your data</p>"},{name:"FocusRelevant:NameView",conditions:["FocusRelevant:HasFilter","FocusRelevant:HasSort","FocusRelevant:Saved"],target:".title-part.sheet-title",pointer:"top",content:"<p><strong>Type here</strong> to give your view a new name, e.g. &quot;Large contracts&quot;</p>"},{name:"FocusRelevant:GoToLeads",conditions:["OnBookDetail"],target:'.sheet-link:contains("Leads")',pointer:"left",content:"<p><strong>Click this link</strong> to go to the <strong>Leads</strong> sheet</p>"}]},{slug:"beyondGrid",title:"Go beyond the grid",openingText:"<p>Fieldbook lets you go beyond the two-dimensional limits of a typical spreadsheet, by linking sheets together. In this tutorial, we&#39;ll show you how to create a <strong>new, linked sheet</strong> from an existing column of data.</p>",completionText:"<p>You just created a new Cities sheet linked to the original People sheet. When you add a person to a city, the city will be added to the person, and vice versa. Give it a try.</p>",conditions:["BeyondGrid:OnCities","BeyondGrid:NamedColumn"],steps:[{name:"BeyondGrid:OpenFieldMenu",conditions:["BeyondGrid:OnExperts"],target:".row-header.col-f1 .field-settings",pointer:"top",content:"<p><strong>Click this icon</strong> to open the column options menu.</p>"},{name:"BeyondGrid:ClickLink",conditions:["BeyondGrid:OnExperts","BeyondGrid:FieldMenuOpen"],target:'.add-link[data-key="f1"]',pointer:"right",content:"<p><strong>Click this item</strong> to create a link</p>"},{name:"BeyondGrid:ExtractSheet",conditions:["BeyondGrid:LinkMode"],target:".new-sheet-link-target",pointer:"top",content:"<p><strong>Click this tab</strong> to link to a new sheet</p>"},{name:"BeyondGrid:NameColumn",conditions:["BeyondGrid:OnCities"],target:"th.row-header.col-f2",pointer:"top",content:"<p><strong>Type here</strong> to name this column &quot;Country&quot;</p>"},{name:"BeyondGrid:GoToExperts",conditions:["OnBookDetail"],target:'.sheet-link:contains("Experts")',pointer:"left",content:"<p><strong>Click this link</strong> to go to the <strong>Experts</strong> sheet</p>"},{name:"BeyondGrid:GoToCities",conditions:["OnBookDetail","BeyondGrid:OnExperts","BeyondGrid:NotWrongLink","BeyondGrid:HasCities"],target:'.sheet-link:contains("Cities")',pointer:"left",content:"<p><strong>Click this link</strong> to go to the <strong>Cities</strong> sheet</p>"},{name:"BeyondGrid:OpenFieldMenuToUnlink",conditions:["BeyondGrid:OnExperts"],target:".row-header.col-f1 .field-settings",pointer:"top",content:"<p>Oops! You linked to the wrong sheet. To fix it, open the column menu again.</p>"},{name:"BeyondGrid:Unlink",conditions:["BeyondGrid:OnExperts","BeyondGrid:FieldMenuOpenToUnlink"],target:'.remove-link[data-key="f1"]',pointer:"right",content:"<p><strong>Click this item</strong> to unlink and try again</p>"}]}]}},{}],18:[function(e,t,n){(function(i){var r=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,empty:3,nonpipe:4,"'":5,'"':6,CHARS:7,ESCCHARS:8,command:9,commands:10,PIPE:11,output:12,$accept:0,$end:1},terminals_:{2:"error",5:"'",6:'"',7:"CHARS",8:"ESCCHARS",11:"PIPE"},productions_:[0,[3,0],[4,1],[4,1],[4,1],[4,1],[9,1],[9,2],[10,1],[10,1],[10,3],[10,2],[12,1]],performAction:function(e,t,n,i,r,o){var s=o.length-1;switch(r){case 5:this.$="\\"+o[s];break;case 7:this.$=o[s-1]+o[s];break;case 8:this.$=[];break;case 9:this.$=[o[s]];break;case 10:this.$=o[s-2].concat(o[s]);break;case 11:this.$=o[s-1];break;case 12:return o[s]}},table:[{1:[2,1],3:3,4:5,5:[1,6],6:[1,7],7:[1,8],8:[1,9],9:4,10:2,11:[2,1],12:1},{1:[3]},{1:[2,12],11:[1,10]},{1:[2,8],11:[2,8]},{1:[2,9],4:11,5:[1,6],6:[1,7],7:[1,8],8:[1,9],11:[2,9]},{1:[2,6],5:[2,6],6:[2,6],7:[2,6],8:[2,6],11:[2,6]},{1:[2,2],5:[2,2],6:[2,2],7:[2,2],8:[2,2],11:[2,2]},{1:[2,3],5:[2,3],6:[2,3],7:[2,3],8:[2,3],11:[2,3]},{1:[2,4],5:[2,4],6:[2,4],7:[2,4],8:[2,4],11:[2,4]},{1:[2,5],5:[2,5],6:[2,5],7:[2,5],8:[2,5],11:[2,5]},{1:[2,11],4:5,5:[1,6],6:[1,7],7:[1,8],8:[1,9],9:12,11:[2,11]},{1:[2,7],5:[2,7],6:[2,7],7:[2,7],8:[2,7],11:[2,7]},{1:[2,10],4:11,5:[1,6],6:[1,7],7:[1,8],8:[1,9],11:[2,10]}],defaultActions:{},parseError:function(e,t){if(!t.recoverable)throw new Error(e);this.trace(e)},parse:function(e){function t(){var e;return e=n.lexer.lex()||h,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,i=[0],r=[null],o=[],s=this.table,a="",l=0,c=0,u=0,d=2,h=1;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var f=this.lexer.yylloc;o.push(f);var p=this.lexer.options&&this.lexer.options.ranges;this.parseError="function"==typeof this.yy.parseError?this.yy.parseError:Object.getPrototypeOf(this).parseError;for(var m,g,v,b,y,w,x,k,_,S={};;){if(v=i[i.length-1],this.defaultActions[v]?b=this.defaultActions[v]:((null===m||"undefined"==typeof m)&&(m=t()),b=s[v]&&s[v][m]),"undefined"==typeof b||!b.length||!b[0]){var C="";_=[];for(w in s[v])this.terminals_[w]&&w>d&&_.push("'"+this.terminals_[w]+"'");C=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+_.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(l+1)+": Unexpected "+(m==h?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[m]||m,line:this.lexer.yylineno,loc:f,expected:_})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+m);switch(b[0]){case 1:i.push(m),r.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(b[1]),m=null,g?(m=g,g=null):(c=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,f=this.lexer.yylloc,u>0&&u--);break;case 2:if(x=this.productions_[b[1]][1],S.$=r[r.length-x],S._$={first_line:o[o.length-(x||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(x||1)].first_column,last_column:o[o.length-1].last_column},p&&(S._$.range=[o[o.length-(x||1)].range[0],o[o.length-1].range[1]]),y=this.performAction.call(S,a,c,l,this.yy,b[1],r,o),"undefined"!=typeof y)return y;x&&(i=i.slice(0,-1*x*2),r=r.slice(0,-1*x),o=o.slice(0,-1*x)),i.push(this.productions_[b[1]][0]),r.push(S.$),o.push(S._$),k=s[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}},n=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})
},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),i=e[0].match(/(?:\r\n?|\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in r)this[o]=r[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,i;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;o<r.length;o++)if(n=this._input.match(this.rules[r[o]]),n&&(!t||n[0].length>t[0].length)){if(t=n,i=o,this.options.backtrack_lexer){if(e=this.test_match(n,r[o]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?(e=this.test_match(t,r[i]),e!==!1?e:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,n,i){switch(n){case 0:return 11;case 1:return 7;case 2:return this.begin("QUOTE"),"'";case 3:return this.popState(),"'";case 4:this.begin("ESC");break;case 5:return 7;case 6:return this.begin("DBLQUOTE"),6;case 7:return this.popState(),6;case 8:this.begin("ESC");break;case 9:return 7;case 10:return this.popState(),8}},rules:[/^(?:\|)/,/^(?:[^\|\'\"]+)/,/^(?:')/,/^(?:')/,/^(?:\\)/,/^(?:[^'\\]+)/,/^(?:")/,/^(?:")/,/^(?:\\)/,/^(?:[^"\\]+)/,/^(?:.)/],conditions:{ESC:{rules:[10],inclusive:!1},DBLQUOTE:{rules:[7,8,9],inclusive:!1},QUOTE:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,2,6],inclusive:!0}}};return e}();return t.lexer=n,e.prototype=t,t.Parser=e,new e}();"undefined"!=typeof e&&"undefined"!=typeof n&&(n.parser=r,n.Parser=r.Parser,n.parse=function(){return r.parse.apply(r,arguments)},n.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),i.exit(1));var r=e("fs").readFileSync(e("path").normalize(t[1]),"utf8");return n.parser.parse(r)},"undefined"!=typeof t&&e.main===t&&n.main(i.argv.slice(1)))}).call(this,e("_process"))},{_process:705,fs:602,path:702}],19:[function(e,t,n){(function(i){var r=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,empty:3,nonspace:4,"'":5,'"':6,CHARS:7,ESCCHARS:8,element:9,elements:10,SPACE:11,output:12,$accept:0,$end:1},terminals_:{2:"error",5:"'",6:'"',7:"CHARS",8:"ESCCHARS",11:"SPACE"},productions_:[0,[3,0],[4,1],[4,1],[4,1],[4,1],[9,1],[9,2],[10,1],[10,1],[10,3],[10,2],[12,1]],performAction:function(e,t,n,i,r,o){var s=o.length-1;switch(r){case 5:this.$="\\"+o[s];break;case 7:this.$=o[s-1]+o[s];break;case 8:this.$=[];break;case 9:this.$=[o[s]];break;case 10:this.$=o[s-2].concat(o[s]);break;case 11:this.$=o[s-1].concat("");break;case 12:return o[s]}},table:[{1:[2,1],3:3,4:5,5:[1,6],6:[1,7],7:[1,8],8:[1,9],9:4,10:2,11:[2,1],12:1},{1:[3]},{1:[2,12],11:[1,10]},{1:[2,8],11:[2,8]},{1:[2,9],4:11,5:[1,6],6:[1,7],7:[1,8],8:[1,9],11:[2,9]},{1:[2,6],5:[2,6],6:[2,6],7:[2,6],8:[2,6],11:[2,6]},{1:[2,2],5:[2,2],6:[2,2],7:[2,2],8:[2,2],11:[2,2]},{1:[2,3],5:[2,3],6:[2,3],7:[2,3],8:[2,3],11:[2,3]},{1:[2,4],5:[2,4],6:[2,4],7:[2,4],8:[2,4],11:[2,4]},{1:[2,5],5:[2,5],6:[2,5],7:[2,5],8:[2,5],11:[2,5]},{1:[2,11],4:5,5:[1,6],6:[1,7],7:[1,8],8:[1,9],9:12,11:[2,11]},{1:[2,7],5:[2,7],6:[2,7],7:[2,7],8:[2,7],11:[2,7]},{1:[2,10],4:11,5:[1,6],6:[1,7],7:[1,8],8:[1,9],11:[2,10]}],defaultActions:{},parseError:function(e,t){if(!t.recoverable)throw new Error(e);this.trace(e)},parse:function(e){function t(){var e;return e=n.lexer.lex()||h,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,i=[0],r=[null],o=[],s=this.table,a="",l=0,c=0,u=0,d=2,h=1;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var f=this.lexer.yylloc;o.push(f);var p=this.lexer.options&&this.lexer.options.ranges;this.parseError="function"==typeof this.yy.parseError?this.yy.parseError:Object.getPrototypeOf(this).parseError;for(var m,g,v,b,y,w,x,k,_,S={};;){if(v=i[i.length-1],this.defaultActions[v]?b=this.defaultActions[v]:((null===m||"undefined"==typeof m)&&(m=t()),b=s[v]&&s[v][m]),"undefined"==typeof b||!b.length||!b[0]){var C="";_=[];for(w in s[v])this.terminals_[w]&&w>d&&_.push("'"+this.terminals_[w]+"'");C=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+_.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(l+1)+": Unexpected "+(m==h?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[m]||m,line:this.lexer.yylineno,loc:f,expected:_})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+m);switch(b[0]){case 1:i.push(m),r.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(b[1]),m=null,g?(m=g,g=null):(c=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,f=this.lexer.yylloc,u>0&&u--);break;case 2:if(x=this.productions_[b[1]][1],S.$=r[r.length-x],S._$={first_line:o[o.length-(x||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(x||1)].first_column,last_column:o[o.length-1].last_column},p&&(S._$.range=[o[o.length-(x||1)].range[0],o[o.length-1].range[1]]),y=this.performAction.call(S,a,c,l,this.yy,b[1],r,o),"undefined"!=typeof y)return y;x&&(i=i.slice(0,-1*x*2),r=r.slice(0,-1*x),o=o.slice(0,-1*x)),i.push(this.productions_[b[1]][0]),r.push(S.$),o.push(S._$),k=s[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}},n=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),i=e[0].match(/(?:\r\n?|\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in r)this[o]=r[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,i;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;o<r.length;o++)if(n=this._input.match(this.rules[r[o]]),n&&(!t||n[0].length>t[0].length)){if(t=n,i=o,this.options.backtrack_lexer){if(e=this.test_match(n,r[o]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?(e=this.test_match(t,r[i]),e!==!1?e:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,n,i){switch(n){case 0:return 11;case 1:return 7;case 2:return this.begin("QUOTE"),"'";case 3:return this.popState(),"'";case 4:this.begin("ESC");break;case 5:return 7;case 6:return this.begin("DBLQUOTE"),6;case 7:return this.popState(),6;case 8:this.begin("ESC");break;case 9:return 7;case 10:return this.popState(),8}},rules:[/^(?:[\s\|]+)/,/^(?:[^\s\'\"\|]+)/,/^(?:')/,/^(?:')/,/^(?:\\)/,/^(?:[^'\\]+)/,/^(?:")/,/^(?:")/,/^(?:\\)/,/^(?:[^"\\]+)/,/^(?:.)/],conditions:{ESC:{rules:[10],inclusive:!1},DBLQUOTE:{rules:[7,8,9],inclusive:!1},QUOTE:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,2,6],inclusive:!0}}};return e}();return t.lexer=n,e.prototype=t,t.Parser=e,new e}();"undefined"!=typeof e&&"undefined"!=typeof n&&(n.parser=r,n.Parser=r.Parser,n.parse=function(){return r.parse.apply(r,arguments)},n.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),i.exit(1));var r=e("fs").readFileSync(e("path").normalize(t[1]),"utf8");return n.parser.parse(r)},"undefined"!=typeof t&&e.main===t&&n.main(i.argv.slice(1)))}).call(this,e("_process"))},{_process:705,fs:602,path:702}],20:[function(e,t){(function(n){Handlebars=n.Handlebars=e("handlebars-runtime");(function(){this.Handlebars=this.Handlebars||{},this.Handlebars.templates=this.Handlebars.templates||{},Handlebars.registerPartial("actionColumnHeaderCell",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l=n.helperMissing,c=this.escapeExpression;return a+='<div class="relative">\n  <span class="header">'+c((o=n.icon||t&&t.icon,s={hash:{},data:r},o?o.call(t,"addfield",s):l.call(t,"icon","addfield",s)))+"</span>\n</div>\n"})),Handlebars.registerPartial("addSheet",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o,s="";return s+='\n  <li class="sheet-tab create-sheet add-sheet extract">\n    <a href="#">\n      ',(r=n.extractName)?i=r.call(e,{hash:{},data:t}):(r=e&&e.extractName,i=typeof r===c?r.call(e,{hash:{},data:t}):r),s+=u(i)+" "+u((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"add-link-new-sheet",o):d.call(e,"s","add-link-new-sheet",o)))+"\n    </a>\n  </li>\n"}function s(e,t){var i,r,o,s="";return s+='\n  <li class="create-sheet">\n    <ul>\n      <li class="sheet-tab add-sheet">\n        <a href="#"><i class="icon-fb-plus"></i> '+u((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"add-sheet",o):d.call(e,"s","add-sheet",o)))+'</a>\n      </li>\n      <li class="sheet-tab import-csv">\n        <a href="#">\n          <form class="import-form" enctype="multipart/form-data">\n            <input class="import-input" type="file" name="import" accept=".csv">\n            <span><i class="icon-fb-plus"></i> '+u((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"import-csv",o):d.call(e,"s","import-csv",o)))+'</span>\n            <input type="hidden" name="_csrf" value="',(r=n.csrfToken)?i=r.call(e,{hash:{},data:t}):(r=e&&e.csrfToken,i=typeof r===c?r.call(e,{hash:{},data:t}):r),s+=u(i)+'">\n          </form>\n        </a>\n      </li>\n    </ul>\n  </li>\n'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var a,l="",c="function",u=this.escapeExpression,d=n.helperMissing,h=this;return a=n["if"].call(t,t&&t.extractName,{hash:{},inverse:h.program(3,s,r),fn:h.program(1,o,r),data:r}),(a||0===a)&&(l+=a),l+="\n"})),Handlebars.registerPartial("addSubsheetButtons",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o,a="";return a+='\n  <a class="dropdown-toggle add-subsheet-menu-toggle" data-toggle="dropdown">\n    '+p((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"restore-mentions",o):f.call(e,"s","restore-mentions",o)))+'\n  </a>\n  <ul class="dropdown-menu add-subsheet-menu">\n    ',i=n.each.call(e,e&&e.potentialSubsheets,{hash:{},inverse:g.noop,fn:g.programWithDepth(2,s,t,e),data:t}),(i||0===i)&&(a+=i),a+="\n  </ul>\n"}function s(e,t,i){var r,o="";return o+='\n      <li class="add-subsheet" data-sheet-id="'+p((r=e&&e.sheet,r=null==r||r===!1?r:r._id,typeof r===m?r.apply(e):r))+'" data-field-key="'+p((r=e&&e.field,r=null==r||r===!1?r:r.key,typeof r===m?r.apply(e):r))+'">\n        <a href="#" tabindex="-1">\n        ',r=n["if"].call(e,(r=e&&e.field,null==r||r===!1?r:r.isJoin),{hash:{},inverse:g.programWithDepth(5,l,t,i),fn:g.program(3,a,t),data:t}),(r||0===r)&&(o+=r),o+="\n        </a>\n      </li>\n    "}function a(e,t){var i,r,o="";return o+="\n          "+p((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"restore-join-mention-item",r):f.call(e,"s","restore-join-mention-item",r)))+"\n        "}function l(e,t,i){var r,o,s,a="";return a+="\n          "+p((o=n.s||e&&e.s,s={hash:{},data:t},o?o.call(e,"restore-mention-item",s):f.call(e,"s","restore-mention-item",s)))+"\n          "+p((r=i&&i.recordName,typeof r===m?r.apply(e):r))+"\n        "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var c,u,d,h="",f=n.helperMissing,p=this.escapeExpression,m="function",g=this;return h+='<button class = "btn add-subsheet">'+p((u=n.icon||t&&t.icon,d={hash:{},data:r},u?u.call(t,"link",d):f.call(t,"icon","link",d)))+p((u=n.s||t&&t.s,d={hash:{},data:r},u?u.call(t,"add-subsheet",d):f.call(t,"s","add-subsheet",d)))+"</button>\n\n",c=n["if"].call(t,t&&t.potentialSubsheets,{hash:{},inverse:g.noop,fn:g.program(1,o,r),data:r}),(c||0===c)&&(h+=c),h+="\n"})),Handlebars.registerPartial("aggregateMenuItems",Handlebars.template(function(e,t,n,i,r){function o(e,t,i){var r,o,a="";return a+='\n  <li class="set-aggregate" data-type=',(o=n.type)?r=o.call(e,{hash:{},data:t}):(o=e&&e.type,r=typeof o===c?o.call(e,{hash:{},data:t}):o),a+=u(r)+" data-key="+u((r=i&&i.key,typeof r===c?r.apply(e):r))+'>\n    <a tabindex="-1" href="#">\n      <span class="summary-example-name">\n        ',(o=n.typeName)?r=o.call(e,{hash:{},data:t}):(o=e&&e.typeName,r=typeof o===c?o.call(e,{hash:{},data:t}):o),a+=u(r)+"\n\n        ",r=n["if"].call(e,e&&e.isCurrent,{hash:{},inverse:d.noop,fn:d.program(2,s,t),data:t}),(r||0===r)&&(a+=r),a+='\n      </span>\n      <span class="summary-example-value">',(o=n.summaryValue)?r=o.call(e,{hash:{},data:t}):(o=e&&e.summaryValue,r=typeof o===c?o.call(e,{hash:{},data:t}):o),a+=u(r)+"</div>\n    </a>\n  </li>\n"}function s(){return'\n          <i class="icon-fixed-width icon-ok"></i>\n        '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var a,l="",c="function",u=this.escapeExpression,d=this;return a=n.each.call(t,t&&t.aggregates,{hash:{},inverse:d.noop,fn:d.programWithDepth(1,o,r,t),data:r}),(a||0===a)&&(l+=a),l+="\n"})),Handlebars.registerPartial("apiExampleBoilerplate",Handlebars.template(function(e,t,n,i,r){function o(){return"\n    auth: {\n        username: process.env.FIELDBOOK_USER,\n        password: process.env.FIELDBOOK_KEY\n    }\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,l="",c="function",u=this.escapeExpression,d=this;return l+="var requestify = require('requestify');\n\nvar bookId = '",(a=n.bookId)?s=a.call(t,{hash:{},data:r}):(a=t&&t.bookId,s=typeof a===c?a.call(t,{hash:{},data:r}):a),l+=u(s)+"';\nvar baseUrl = '",(a=n.apiUrl)?s=a.call(t,{hash:{},data:r}):(a=t&&t.apiUrl,s=typeof a===c?a.call(t,{hash:{},data:r}):a),l+=u(s)+"' + bookId;\nvar options = {\n    headers: {accept: 'application/json'},\n",s=n.unless.call(t,t&&t["public"],{hash:{},inverse:d.noop,fn:d.program(1,o,r),data:r}),(s||0===s)&&(l+=s),l+="};\n"})),Handlebars.registerPartial("attachmentUpload",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l=n.helperMissing,c=this.escapeExpression;return a+='<div class="attachment-upload-form">\n  <form class="attachment-import-form import-form" enctype="multipart/form-data">\n    <input class="attachment-input" type="file" name="import">\n    <button class="attachment-button">\n      '+c((o=n.icon||t&&t.icon,s={hash:{},data:r},o?o.call(t,"import",s):l.call(t,"icon","import",s)))+" "+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"upload",s):l.call(t,"s","upload",s)))+"\n    </button>\n  </form>\n</div>\n"})),Handlebars.registerPartial("autocompleteValue",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+="<b>",(r=n.current)?i=r.call(e,{hash:{},data:t}):(r=e&&e.current,i=typeof r===c?r.call(e,{hash:{},data:t}):r),o+=u(i)+"</b>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,l="",c="function",u=this.escapeExpression,d=this;return(a=n.before)?s=a.call(t,{hash:{},data:r}):(a=t&&t.before,s=typeof a===c?a.call(t,{hash:{},data:r}):a),l+=u(s),s=n["if"].call(t,t&&t.current,{hash:{},inverse:d.noop,fn:d.program(1,o,r),data:r}),(s||0===s)&&(l+=s),(a=n.after)?s=a.call(t,{hash:{},data:r}):(a=t&&t.after,s=typeof a===c?a.call(t,{hash:{},data:r}):a),l+=u(s)})),Handlebars.registerPartial("bookForbidden",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l=n.helperMissing,c=this.escapeExpression;return a+='<div class="book-error well">\n  <h2 class="error-title">'+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"book-error-forbidden-title",s):l.call(t,"s","book-error-forbidden-title",s)))+"</h2>\n  <p>"+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"book-error-forbidden-message",s):l.call(t,"s","book-error-forbidden-message",s)))+"</p>\n</div>\n"})),Handlebars.registerPartial("bookInvited",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+="\n      "+f((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"book-invite-must-login",r):h.call(e,"s","book-invite-must-login",r)))+"\n    "}function s(e,t){var i,r,o="";return o+="\n      "+f((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"book-invite-options",r):h.call(e,"s","book-invite-options",r)))+"\n    "}function a(e,t){var i,r,o,s="";return s+='\n    <form class="claim-form claim-invite" method="post" action="/invitations/claim">\n      <input type="hidden" name="bookId" value="',(r=n._id)?i=r.call(e,{hash:{},data:t}):(r=e&&e._id,i=typeof r===p?r.call(e,{hash:{},data:t}):r),s+=f(i)+'">\n      <input type="hidden" name="_csrf" value="',(r=n.csrfToken)?i=r.call(e,{hash:{},data:t}):(r=e&&e.csrfToken,i=typeof r===p?r.call(e,{hash:{},data:t}):r),s+=f(i)+'">\n      <button type="submit" class="btn btn-success">'+f((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"claim-invite",o):h.call(e,"s","claim-invite",o)))+"</button>\n    </form>\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var l,c,u,d="",h=n.helperMissing,f=this.escapeExpression,p="function",m=this;return d+='<div class="book-invite">\n  <p class="invite-message">'+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"book-invite-message",u):h.call(t,"s","book-invite-message",u)))+'</p>\n  <p class="current-user well well-small"><img class="user-image" src='+f((l=t&&t.currentUser,l=null==l||l===!1?l:l.imageUrl,typeof l===p?l.apply(t):l))+"> "+f((l=t&&t.currentUser,l=null==l||l===!1?l:l.name,typeof l===p?l.apply(t):l))+" ("+f((l=t&&t.currentUser,l=null==l||l===!1?l:l.email,typeof l===p?l.apply(t):l))+')</p>\n  <p class="invite-options">\n    ',l=n["if"].call(t,t&&t.accountExists,{hash:{},inverse:m.program(3,s,r),fn:m.program(1,o,r),data:r}),(l||0===l)&&(d+=l),d+="\n  </p>\n\n  ",l=n.unless.call(t,t&&t.accountExists,{hash:{},inverse:m.noop,fn:m.program(5,a,r),data:r}),(l||0===l)&&(d+=l),d+='\n\n  <form class="claim-form claim-invite-logout" method="post" action="/logout">\n    <input type="hidden" name="_csrf" value="',(c=n.csrfToken)?l=c.call(t,{hash:{},data:r}):(c=t&&t.csrfToken,l=typeof c===p?c.call(t,{hash:{},data:r}):c),d+=f(l)+'">\n    <input type="hidden" name="redirect" value="/books/',(c=n._id)?l=c.call(t,{hash:{},data:r}):(c=t&&t._id,l=typeof c===p?c.call(t,{hash:{},data:r}):c),d+=f(l)+'">\n    <button type="submit" class="btn btn-info">'+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"claim-invite-different-user",u):h.call(t,"s","claim-invite-different-user",u)))+"</button>\n  </form>\n</div>\n"})),Handlebars.registerPartial("bookLink",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n      <div class="user-image" style="background-image:url('+h((i=n.userImage||e&&e.userImage,r={hash:{},data:t},i?i.call(e,e&&e.user,r):d.call(e,"userImage",e&&e.user,r)))+')"></div>\n    '}function s(e,t){var i,r,o="";return o+='\n      <span class="extra-users">\n        +',(r=n.extraUsers)?i=r.call(e,{hash:{},data:t}):(r=e&&e.extraUsers,i=typeof r===f?r.call(e,{hash:{},data:t}):r),o+=h(i)+"\n      </span>\n    "}function a(e,t){var i,r,o="";return o+="Last viewed: "+h((i=n.calendar||e&&e.calendar,r={hash:{},data:t},i?i.call(e,e&&e.lastViewed,r):d.call(e,"calendar",e&&e.lastViewed,r)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var l,c,u="",d=n.helperMissing,h=this.escapeExpression,f="function",p=this;return u+='<a class="book-link" href="',(c=n.url)?l=c.call(t,{hash:{},data:r}):(c=t&&t.url,l=typeof c===f?c.call(t,{hash:{},data:r}):c),u+=h(l)+'">\n  <div class="book-item" data-id="',(c=n._id)?l=c.call(t,{hash:{},data:r}):(c=t&&t._id,l=typeof c===f?c.call(t,{hash:{},data:r}):c),u+=h(l)+'">\n    <div class="book-users">\n    ',l=n.each.call(t,t&&t.firstUsers,{hash:{},inverse:p.noop,fn:p.program(1,o,r),data:r}),(l||0===l)&&(u+=l),u+="\n    ",l=n["if"].call(t,t&&t.extraUsers,{hash:{},inverse:p.noop,fn:p.program(3,s,r),data:r}),(l||0===l)&&(u+=l),u+='\n    </div>\n    <div class="book-title">\n      ',(c=n.displayTitle)?l=c.call(t,{hash:{},data:r}):(c=t&&t.displayTitle,l=typeof c===f?c.call(t,{hash:{},data:r}):c),u+=h(l)+'\n    </div>\n    <div class="book-updated">\n      ',l=n["if"].call(t,t&&t.lastViewed,{hash:{},inverse:p.noop,fn:p.program(5,a,r),data:r}),(l||0===l)&&(u+=l),u+="\n    </div>\n  </div>\n</a>\n"})),Handlebars.registerPartial("bookLoadError",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l=n.helperMissing,c=this.escapeExpression;return a+='<div class="book-error well">\n  <h2 class="error-title">'+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"book-load-error-title",s):l.call(t,"s","book-load-error-title",s)))+"</h2>\n  <p>"+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"book-load-error-message",s):l.call(t,"s","book-load-error-message",s)))+"</p>\n</div>\n"})),Handlebars.registerPartial("bookNav",Handlebars.template(function(e,t,n,i,r){function o(e,t){var r,o="";return o+="\n      ",r=d.invokePartial(i.sheetTab,"sheetTab",e,n,i,t),(r||0===r)&&(o+=r),o+="\n    "}function s(e,t){var i,r,o,s="";return s+="\n      ",r=n.withData||e&&e.withData,o={hash:{},inverse:d.noop,fn:d.program(4,a,t),data:t},i=r?r.call(e,"{\n        displayTitle: this.linkViewInfo.newTabText,\n        navItems: [],\n      }",o):h.call(e,"withData","{\n        displayTitle: this.linkViewInfo.newTabText,\n        navItems: [],\n      }",o),(i||0===i)&&(s+=i),s+="\n    "}function a(e,t){var r,o="";return o+="\n        ",r=d.invokePartial(i.sheetTab,"sheetTab",e,n,i,t),(r||0===r)&&(o+=r),o+="\n      "}function l(e,t){var i,r,o,s="";return s+='\n    <div class="book-actions">\n      <button class="add-sheet">\n        '+f((r=n.icon||e&&e.icon,o={hash:{},data:t},r?r.call(e,"add-sheet",o):h.call(e,"icon","add-sheet",o)))+' Add Sheet\n      </button>\n\n      <form class="import-form" enctype="multipart/form-data">\n        <button class="import-button">\n          '+f((r=n.icon||e&&e.icon,o={hash:{},data:t},r?r.call(e,"import",o):h.call(e,"icon","import",o)))+' Import CSV\n        </button>\n        <input class="import-input" type="file" name="import" accept=".csv">\n        <input type="hidden" name="_csrf" value="',(r=n.csrfToken)?i=r.call(e,{hash:{},data:t}):(r=e&&e.csrfToken,i=typeof r===p?r.call(e,{hash:{},data:t}):r),s+=f(i)+'">\n      </form>\n\n      <div class="book-action-separator"></div>\n      <button class="add-form">'+f((r=n["icon-fa"]||e&&e["icon-fa"],o={hash:{},data:t},r?r.call(e,"list-alt",o):h.call(e,"icon-fa","list-alt",o)))+" Add Form </button>\n    </div>\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var c,u="",d=this,h=n.helperMissing,f=this.escapeExpression,p="function";return u+='<div class="book-nav-scroll">\n  <ul class="sheet-tabs">\n    ',c=n.each.call(t,t&&t.sheets,{hash:{},inverse:d.noop,fn:d.program(1,o,r),data:r}),(c||0===c)&&(u+=c),u+="\n\n    ",c=n["if"].call(t,(c=t&&t.linkViewInfo,null==c||c===!1?c:c.shown),{hash:{},inverse:d.noop,fn:d.program(3,s,r),data:r}),(c||0===c)&&(u+=c),u+="\n  </ul>\n\n  ",c=n.unless.call(t,t&&t.isMetadataLocked,{hash:{},inverse:d.noop,fn:d.program(6,l,r),data:r}),(c||0===c)&&(u+=c),u+='\n\n  <div class="selection-aggregate-container"></div>\n</div>\n\n<div class="actions-dropdown">\n  <div class="dropdown-toggle" data-toggle="dropdown"></div>\n  <ul class="actions-menu dropdown-menu" role="menu"></ul>\n</div>\n'})),Handlebars.registerPartial("bookSectionTitle",Handlebars.template(function(e,t,n,i,r){function o(){return"contenteditable=true"}function s(e,t){var i,r;return(r=n.title)?i=r.call(e,{hash:{},data:t}):(r=e&&e.title,i=typeof r===y?r.call(e,{hash:{},data:t}):r),w(i)}function a(e,t){var i,r;return(r=n.titlePlaceholder)?i=r.call(e,{hash:{},data:t}):(r=e&&e.titlePlaceholder,i=typeof r===y?r.call(e,{hash:{},data:t}):r),w(i)}function l(e,t){var i,r,o,s="";return s+='\n      <span class="dropdown">\n        <a data-target="#" class="book-menu dropdown-toggle" data-toggle="dropdown">\n          '+w((r=n.icon||e&&e.icon,o={hash:{},data:t},r?r.call(e,"down-open",o):x.call(e,"icon","down-open",o)))+'</a>\n\n        <ul class="book-actions-menu dropdown-menu" role="menu">\n          <li class="undo disabled no-read-only">\n            <a tabindex="-1" href="#">\n              <i class="icon-fixed-width icon-undo"></i> '+w((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"undo",o):x.call(e,"s","undo",o)))+'\n            </a>\n          </li>\n          <li class="redo disabled no-read-only">\n            <a tabindex="-1" href="#">\n              <i class="icon-fixed-width icon-repeat"></i> '+w((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"redo",o):x.call(e,"s","redo",o)))+"\n            </a>\n          </li>\n\n          ",i=n["if"].call(e,e&&e.canRefreshIntegration,{hash:{},inverse:k.noop,fn:k.program(8,c,t),data:t}),(i||0===i)&&(s+=i),s+='\n          <li class="divider no-read-only"></li>\n\n          ',i=n["if"].call(e,e&&e.showSave,{hash:{},inverse:k.noop,fn:k.program(11,d,t),data:t}),(i||0===i)&&(s+=i),s+="\n\n          ",i=n["if"].call(e,e&&e.isLoggedIn,{hash:{},inverse:k.noop,fn:k.program(13,h,t),data:t}),(i||0===i)&&(s+=i),s+="\n\n          ",i=n["if"].call(e,e&&e.sheetId,{hash:{},inverse:k.noop,fn:k.program(15,f,t),data:t}),(i||0===i)&&(s+=i),s+='\n\n          <li class="leave-book',i=n.unless.call(e,e&&e.canLeave,{hash:{},inverse:k.noop,fn:k.program(16,p,t),data:t}),(i||0===i)&&(s+=i),s+='">\n            <a tabindex="-1" href="#">\n              <i class="icon-fixed-width icon-signout"></i> '+w((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"leave-book",o):x.call(e,"s","leave-book",o)))+'\n            </a>\n          </li>\n\n          <li class="delete-book',i=n.unless.call(e,e&&e.canDelete,{hash:{},inverse:k.noop,fn:k.program(16,p,t),data:t}),(i||0===i)&&(s+=i),s+=' metadata-access">\n            <a tabindex="-1" href="#">\n              <i class="icon-fixed-width icon-trash"></i> '+w((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"delete-book",o):x.call(e,"s","delete-book",o)))+"\n            </a>\n          </li>\n        </ul>\n      </span>\n    "
}function c(e,t){var i,r,o,s="";return s+='\n            <li class="divider no-read-only"></li>\n            <li class="update-integration no-read-only">\n              <a tabindex="-1" href="#">\n                <i class="icon-fixed-width icon-exchange"></i> '+w((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"update-integration",o):x.call(e,"s","update-integration",o)))+"\n              </a>\n            </li>\n            ",i=n["if"].call(e,e&&e.integrationUpdateTime,{hash:{},inverse:k.noop,fn:k.program(9,u,t),data:t}),(i||0===i)&&(s+=i),s+="\n          "}function u(e,t){var i,r,o="";return o+='\n              <li class="last-updated disabled no-read-only">\n                <a tabindex="-1" href="#">\n                  <i class="icon-fixed-width icon-time"></i> '+w((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"last-updated-integration",r):x.call(e,"s","last-updated-integration",r)))+"\n                </a>\n              </li>\n            "}function d(e,t){var i,r,o,s="";return s+='\n            <li class="download-book">\n              <a tabindex="-1" href="/books/',(r=n._id)?i=r.call(e,{hash:{},data:t}):(r=e&&e._id,i=typeof r===y?r.call(e,{hash:{},data:t}):r),s+=w(i)+'/full" download="',(r=n.title)?i=r.call(e,{hash:{},data:t}):(r=e&&e.title,i=typeof r===y?r.call(e,{hash:{},data:t}):r),s+=w(i)+'.json" target="_blank">\n                <i class="icon-fixed-width icon-download"></i> '+w((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"download-book",o):x.call(e,"s","download-book",o)))+"\n              </a>\n            </li>\n          "}function h(e,t){var i,r,o="";return o+='\n            <li class="copy-book">\n              <a tabindex="-1" href="#">\n                <i class="icon-fixed-width icon-copy"></i> '+w((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"copy-book",r):x.call(e,"s","copy-book",r)))+"\n              </a>\n            </li>\n          "}function f(e,t){var r,o,s,a="";return a+='\n            <li class="export-csv',r=n.unless.call(e,e&&e.canExportView,{hash:{},inverse:k.noop,fn:k.program(16,p,t),data:t}),(r||0===r)&&(a+=r),a+='" data-sheetid="',(o=n.sheetId)?r=o.call(e,{hash:{},data:t}):(o=e&&e.sheetId,r=typeof o===y?o.call(e,{hash:{},data:t}):o),a+=w(r)+'">\n              <a tabindex="-1" href="#">\n                <i class="icon-fixed-width icon-download-alt"></i> '+w((o=n.s||e&&e.s,s={hash:{},data:t},o?o.call(e,"export-current-csv",s):x.call(e,"s","export-current-csv",s)))+"\n              </a>\n              ",r=k.invokePartial(i.csvDownloadForm,"csvDownloadForm",e,n,i,t),(r||0===r)&&(a+=r),a+="\n            </li>\n          "}function p(){return" disabled"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var m,g,v,b="",y="function",w=this.escapeExpression,x=n.helperMissing,k=this;return b+='<span class="book-section-title">\n  <a href="/books">',(g=n.noop)?m=g.call(t,{hash:{},data:r}):(g=t&&t.noop,m=typeof g===y?g.call(t,{hash:{},data:r}):g),b+=w(m)+'<span class="all-books">'+w((g=n.s||t&&t.s,v={hash:{},data:r},g?g.call(t,"book-links-title",v):x.call(t,"s","book-links-title",v)))+"</span>",(g=n.noop)?m=g.call(t,{hash:{},data:r}):(g=t&&t.noop,m=typeof g===y?g.call(t,{hash:{},data:r}):g),b+=w(m)+"</a>",(g=n.noop)?m=g.call(t,{hash:{},data:r}):(g=t&&t.noop,m=typeof g===y?g.call(t,{hash:{},data:r}):g),b+=w(m)+'<span class="title-separator">/</span>',(g=n.noop)?m=g.call(t,{hash:{},data:r}):(g=t&&t.noop,m=typeof g===y?g.call(t,{hash:{},data:r}):g),b+=w(m)+'<span class="book-title">',(g=n.noop)?m=g.call(t,{hash:{},data:r}):(g=t&&t.noop,m=typeof g===y?g.call(t,{hash:{},data:r}):g),b+=w(m)+'<span class="editable-book-title with-placeholder '+w((g=n.toggle||t&&t.toggle,v={hash:{},data:r},g?g.call(t,t&&t.isMetadataLocked,"read-only",v):x.call(t,"toggle",t&&t.isMetadataLocked,"read-only",v)))+' " placeholder="',(g=n.titlePlaceholder)?m=g.call(t,{hash:{},data:r}):(g=t&&t.titlePlaceholder,m=typeof g===y?g.call(t,{hash:{},data:r}):g),b+=w(m)+'" ',m=n.unless.call(t,t&&t.isMetadataLocked,{hash:{},inverse:k.noop,fn:k.program(1,o,r),data:r}),(m||0===m)&&(b+=m),b+=">",m=n["if"].call(t,t&&t.title,{hash:{},inverse:k.program(5,a,r),fn:k.program(3,s,r),data:r}),(m||0===m)&&(b+=m),b+="</span>\n    ",m=n.unless.call(t,t&&t.noActionMenu,{hash:{},inverse:k.noop,fn:k.program(7,l,r),data:r}),(m||0===m)&&(b+=m),b+="\n  </span>\n</span>\n"})),Handlebars.registerPartial("cellEditButtons",Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div class="editor-buttons">\n  <button class="cancel">Cancel</button>\n  <button class="save">Save</button>\n</div>\n'})),Handlebars.registerPartial("cellMenuItems",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r="";return r+="\n  ",i=n["if"].call(e,e&&e.isGrouped,{hash:{},inverse:S.noop,fn:S.program(2,s,t),data:t}),(i||0===i)&&(r+=i),r+="\n"}function s(e,t){var r,o="";return o+="\n    ",r=S.invokePartial(i.moveGroupItems,"moveGroupItems",e,n,i,t),(r||0===r)&&(o+=r),o+='\n    <li class="divider no-read-only"></li>\n  '}function a(e,t){var r,o,s,a="";return a+='\n  <li class="search-cell-value" data-id="'+E((r=e&&e.row,r=null==r||r===!1?r:r.id,typeof r===I?r.apply(e):r))+'" data-key="'+E((r=e&&e.field,r=null==r||r===!1?r:r.key,typeof r===I?r.apply(e):r))+'">\n    <a tabindex="-1" href="#"><i class="icon-fixed-width icon-fb-search"></i> '+E((o=n.s||e&&e.s,s={hash:{},data:t},o?o.call(e,"search-cell-value",s):C.call(e,"s","search-cell-value",s)))+'</a>\n  </li>\n  <li class="filter-cell-value" data-id="'+E((r=e&&e.row,r=null==r||r===!1?r:r.id,typeof r===I?r.apply(e):r))+'" data-key="'+E((r=e&&e.field,r=null==r||r===!1?r:r.key,typeof r===I?r.apply(e):r))+'">\n    <a tabindex="-1" href="#">\n      <i class="icon-fixed-width icon-fb-filter"></i>\n      ',r=n["if"].call(e,e&&e.noQuotes,{hash:{},inverse:S.program(7,c,t),fn:S.program(5,l,t),data:t}),(r||0===r)&&(a+=r),a+="\n    </a>\n  </li>\n\n  ",r=S.invokePartial(i.missingLinkMenuItem,"missingLinkMenuItem",e,n,i,t),(r||0===r)&&(a+=r),a+='\n\n  <li class="divider no-read-only"></li>\n'}function l(e,t){var i,r,o="";return o+="\n        "+E((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"filter-cell-value-no-quote",r):C.call(e,"s","filter-cell-value-no-quote",r)))+"\n      "}function c(e,t){var i,r,o="";return o+="\n        "+E((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"filter-cell-value",r):C.call(e,"s","filter-cell-value",r)))+"\n      "}function u(e,t){var i,r,o,s="";return s+='\n  <li class="insert-record-above no-read-only ',i=n.unless.call(e,e&&e.canAddAndRemoveRows,{hash:{},inverse:S.noop,fn:S.program(10,d,t),data:t}),(i||0===i)&&(s+=i),s+='" data-id="',(r=n.id)?i=r.call(e,{hash:{},data:t}):(r=e&&e.id,i=typeof r===I?r.call(e,{hash:{},data:t}):r),s+=E(i)+'"\n    ',i=n.unless.call(e,e&&e.canAddAndRemoveRows,{hash:{},inverse:S.noop,fn:S.program(12,h,t),data:t}),(i||0===i)&&(s+=i),s+='>\n    <a tabindex="-1" href="#"><i class="icon-fixed-width icon-long-arrow-up"></i> '+E((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"insert-record-above",o):C.call(e,"s","insert-record-above",o)))+'</a>\n  </li>\n  <li class="insert-record-below no-read-only ',i=n.unless.call(e,e&&e.canAddAndRemoveRows,{hash:{},inverse:S.noop,fn:S.program(10,d,t),data:t}),(i||0===i)&&(s+=i),s+='" data-id="',(r=n.id)?i=r.call(e,{hash:{},data:t}):(r=e&&e.id,i=typeof r===I?r.call(e,{hash:{},data:t}):r),s+=E(i)+'"\n    ',i=n.unless.call(e,e&&e.canAddAndRemoveRows,{hash:{},inverse:S.noop,fn:S.program(12,h,t),data:t}),(i||0===i)&&(s+=i),s+='>\n    <a tabindex="-1" href="#"><i class="icon-fixed-width icon-long-arrow-down"></i> '+E((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"insert-record-below",o):C.call(e,"s","insert-record-below",o)))+"</a>\n  </li>\n"}function d(){return"disabled has-tooltip"}function h(e,t){var i,r,o="";return o+='title="'+E((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"disabled-reason-sheet-integration",r):C.call(e,"s","disabled-reason-sheet-integration",r)))+'"'}function f(e,t){var i,r,o,s="";return s+='\n  <li class="unlink-record ',i=n["if"].call(e,e&&e.disabled,{hash:{},inverse:S.noop,fn:S.program(15,p,t),data:t}),(i||0===i)&&(s+=i),s+='">\n    <a tabindex="-1" href="#"><i class="icon-fixed-width icon-fb-unlink"></i>'+E((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"unlink-record",o):C.call(e,"s","unlink-record",o)))+"</a>\n  </li>\n"}function p(){return"disabled"}function m(e,t){var i,r,o,s="";return s+='\n  <li class="clear-record no-read-only ',i=n["if"].call(e,e&&e.hasIntegration,{hash:{},inverse:S.noop,fn:S.program(10,d,t),data:t}),(i||0===i)&&(s+=i),s+='" data-id="',(r=n.id)?i=r.call(e,{hash:{},data:t}):(r=e&&e.id,i=typeof r===I?r.call(e,{hash:{},data:t}):r),s+=E(i)+'"\n    ',i=n["if"].call(e,e&&e.hasIntegration,{hash:{},inverse:S.noop,fn:S.program(12,h,t),data:t}),(i||0===i)&&(s+=i),s+='>\n    <a tabindex="-1" href="#"><i class="icon-fixed-width icon-pencil"></i> '+E((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"clear-record",o):C.call(e,"s","clear-record",o)))+'</a>\n  </li>\n  <li class="delete-record no-read-only ',i=n.unless.call(e,e&&e.canAddAndRemoveRows,{hash:{},inverse:S.noop,fn:S.program(10,d,t),data:t}),(i||0===i)&&(s+=i),s+='" data-id="',(r=n.id)?i=r.call(e,{hash:{},data:t}):(r=e&&e.id,i=typeof r===I?r.call(e,{hash:{},data:t}):r),s+=E(i)+'"\n    ',i=n.unless.call(e,e&&e.canAddAndRemoveRows,{hash:{},inverse:S.noop,fn:S.program(12,h,t),data:t}),(i||0===i)&&(s+=i),s+='>\n    <a tabindex="-1" href="#"><i class="icon-fixed-width icon-fb-close"></i> '+E((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"delete-record",o):C.call(e,"s","delete-record",o)))+"</a>\n  </li>\n"}function g(e,t){var i,r,o,s="";return s+="\n  ",i=n.unless.call(e,e&&e.isNameField,{hash:{},inverse:S.noop,fn:S.program(20,v,t),data:t}),(i||0===i)&&(s+=i),s+='\n\n  <li class="insert-field metadata-access" data-key="',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===I?r.call(e,{hash:{},data:t}):r),s+=E(i)+'" data-direction="right">\n    <a tabindex="-1" href="#">\n      <i class="icon-fixed-width icon-long-arrow-right"></i>\n      '+E((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"insert-field-right",o):C.call(e,"s","insert-field-right",o)))+"\n    </a>\n  </li>\n\n",i=n.unless.call(e,e&&e.isNameField,{hash:{},inverse:S.noop,fn:S.program(22,b,t),data:t}),(i||0===i)&&(s+=i),s+="\n"}function v(e,t){var i,r,o,s="";return s+='\n    <li class="insert-field metadata-access" data-key="',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===I?r.call(e,{hash:{},data:t}):r),s+=E(i)+'" data-direction="left">\n      <a tabindex="-1" href="#">\n        <i class="icon-fixed-width icon-long-arrow-left"></i>\n        '+E((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"insert-field-left",o):C.call(e,"s","insert-field-left",o)))+"\n      </a>\n    </li>\n  "}function b(e,t){var i,r,o="";return o+='\n  <li class="delete-field metadata-access ',i=n["if"].call(e,e&&e.hasIntegration,{hash:{},inverse:S.noop,fn:S.program(10,d,t),data:t}),(i||0===i)&&(o+=i),o+='" data-key="',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===I?r.call(e,{hash:{},data:t}):r),o+=E(i)+'"\n    ',i=n["if"].call(e,e&&e.hasIntegration,{hash:{},inverse:S.noop,fn:S.program(23,y,t),data:t}),(i||0===i)&&(o+=i),o+='>\n    <a tabindex="-1" href="#">\n      <i class="icon-fixed-width icon-fb-close"></i>\n      ',i=n["if"].call(e,e&&e.name,{hash:{},inverse:S.program(27,x,t),fn:S.program(25,w,t),data:t}),(i||0===i)&&(o+=i),o+="\n    </a>\n  </li>\n"}function y(e,t){var i,r,o="";return o+='title="'+E((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"disabled-reason-field-integration",r):C.call(e,"s","disabled-reason-field-integration",r)))+'"'}function w(e,t){var i,r;return E((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"delete-field",r):C.call(e,"s","delete-field",r)))}function x(e,t){var i,r;return E((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"delete-unnamed-field",r):C.call(e,"s","delete-unnamed-field",r)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var k,_="",S=this,C=n.helperMissing,E=this.escapeExpression,I="function";return k=n["with"].call(t,t&&t.row,{hash:{},inverse:S.noop,fn:S.program(1,o,r),data:r}),(k||0===k)&&(_+=k),_+="\n\n",k=n["if"].call(t,t&&t.value,{hash:{},inverse:S.noop,fn:S.program(4,a,r),data:r}),(k||0===k)&&(_+=k),_+="\n\n",k=n["with"].call(t,t&&t.row,{hash:{},inverse:S.noop,fn:S.program(9,u,r),data:r}),(k||0===k)&&(_+=k),_+="\n\n",k=n["if"].call(t,t&&t.isSubsheet,{hash:{},inverse:S.noop,fn:S.program(14,f,r),data:r}),(k||0===k)&&(_+=k),_+="\n\n",k=n["with"].call(t,t&&t.row,{hash:{},inverse:S.noop,fn:S.program(17,m,r),data:r}),(k||0===k)&&(_+=k),_+='\n\n<li class="divider metadata-access"></li>\n\n',k=n["with"].call(t,t&&t.field,{hash:{},inverse:S.noop,fn:S.program(19,g,r),data:r}),(k||0===k)&&(_+=k),_+="\n"})),Handlebars.registerPartial("codeletMenu",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n      <li class="codelet-item" data-id="',(r=n._id)?i=r.call(e,{hash:{},data:t}):(r=e&&e._id,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+'"><a href="#" tabindex="-1">',(r=n.title)?i=r.call(e,{hash:{},data:t}):(r=e&&e.title,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+"</a></li>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,l,c="",u="function",d=this.escapeExpression,h=n.helperMissing,f=this;return c+='<div class="btn-group codelet-menu">\n  <a href="#"\n    class="btn dropdown-toggle codelet-chooser '+d((a=n.untoggle||t&&t.untoggle,l={hash:{},data:r},a?a.call(t,(s=t&&t.codelets,null==s||s===!1?s:s.length),"disabled",l):h.call(t,"untoggle",(s=t&&t.codelets,null==s||s===!1?s:s.length),"disabled",l)))+'"\n    data-toggle="dropdown">Choose Codelet '+d((a=n["icon-fa"]||t&&t["icon-fa"],l={hash:{},data:r},a?a.call(t,"angle-down",l):h.call(t,"icon-fa","angle-down",l)))+'</a>\n  <ul class="dropdown-menu">\n    ',s=n.each.call(t,t&&t.codelets,{hash:{},inverse:f.noop,fn:f.program(1,o,r),data:r}),(s||0===s)&&(c+=s),c+="\n  </ul>\n</div>\n"})),Handlebars.registerPartial("codeletPrivileges",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o,l="";return l+="\n    "+p((r=n["icon-fa"]||e&&e["icon-fa"],o={hash:{},data:t},r?r.call(e,"lock icon-fixed-width",o):m.call(e,"icon-fa","lock icon-fixed-width",o)))+"\n    Codelets can only be edited by admins.\n    ",i=n["if"].call(e,e&&e.anon,{hash:{},inverse:g.program(4,a,t),fn:g.program(2,s,t),data:t}),(i||0===i)&&(l+=i),l+="\n  "}function s(e,t){var i,r,o="";return o+='\n      <a href="/signup?book=',(r=n.bookId)?i=r.call(e,{hash:{},data:t}):(r=e&&e.bookId,i=typeof r===f?r.call(e,{hash:{},data:t}):r),o+=p(i)+'&init_codelets=1">Sign up</a>\n      (or <a href="/login?book=',(r=n.bookId)?i=r.call(e,{hash:{},data:t}):(r=e&&e.bookId,i=typeof r===f?r.call(e,{hash:{},data:t}):r),o+=p(i)+'&init_codelets=1">sign in</a>) to make a copy of this book you can edit.\n    '}function a(){return'\n      <a href="#" class="copy-book">Copy the book</a> if you\'d like to make changes.\n    '}function l(e,t){var i,r="";return r+="\n    ",i=n["if"].call(e,(i=e&&e.codelet,null==i||i===!1?i:i["public"]),{hash:{},inverse:g.program(9,u,t),fn:g.program(7,c,t),data:t}),(i||0===i)&&(r+=i),r+="\n  "}function c(e,t){var i,r,o="";return o+="\n      "+p((i=n["icon-fa"]||e&&e["icon-fa"],r={hash:{},data:t},i?i.call(e,"unlock icon-fixed-width",r):m.call(e,"icon-fa","unlock icon-fixed-width",r)))+'\n      Code is visible to everyone\n      <a href="#" class="make-private">(make private)</a>\n    '}function u(e,t){var i,r,o="";return o+="\n      "+p((i=n["icon-fa"]||e&&e["icon-fa"],r={hash:{},data:t},i?i.call(e,"lock icon-fixed-width",r):m.call(e,"icon-fa","lock icon-fixed-width",r)))+'\n      Code is only viewable by admins\n      <a href="#" class="make-public">(make visible to all)</a>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var d,h="",f="function",p=this.escapeExpression,m=n.helperMissing,g=this;return h+='<div class="view-privileges">\n  ',d=n["if"].call(t,t&&t.readOnly,{hash:{},inverse:g.program(6,l,r),fn:g.program(1,o,r),data:r}),(d||0===d)&&(h+=d),h+="\n</div>\n"})),Handlebars.registerPartial("colorboxImage",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+='<a class="colorbox-image-anchor" href="',(s=n.href)?o=s.call(t,{hash:{},data:r}):(s=t&&t.href,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'" target="_blank">\n  <img\n    class="colorbox-expanded-image"\n    src="',(s=n.href)?o=s.call(t,{hash:{},data:r}):(s=t&&t.href,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'"\n    style="max-height: ',(s=n.maxHeight)?o=s.call(t,{hash:{},data:r}):(s=t&&t.maxHeight,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+"px; max-width: ",(s=n.maxWidth)?o=s.call(t,{hash:{},data:r}):(s=t&&t.maxWidth,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'px"\n  >\n</a>\n'})),Handlebars.registerPartial("columnSortSurrogate",Handlebars.template(function(e,t,n,i,r){function o(){return"report"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a="",l=this;return a+='<div class="fast-scroll sortable surrogate">\n  <div class="table-view">\n    <div class = "fast-record-list ',s=n["if"].call(t,t&&t.report,{hash:{},inverse:l.noop,fn:l.program(1,o,r),data:r}),(s||0===s)&&(a+=s),a+='">\n      <div class = "fast-table">\n        <div class="table">\n          <table>\n            <thead class = "grabbing surrogate">\n              <tr class="col-handles">\n              </tr>\n              <tr class = "col-headers">\n              </tr>\n            </thead>\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'})),Handlebars.registerPartial("completionExpression",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r="";return i=n["if"].call(e,e&&e.isOrder,{hash:{},inverse:R.noop,fn:R.program(2,s,t),data:t}),(i||0===i)&&(r+=i),i=n["if"].call(e,e&&e.slug,{hash:{},inverse:R.noop,fn:R.program(7,c,t),data:t}),(i||0===i)&&(r+=i),i=n["if"].call(e,e&&e.val,{hash:{},inverse:R.noop,fn:R.program(10,d,t),data:t}),(i||0===i)&&(r+=i),i=n["if"].call(e,e&&e.isBinary,{hash:{},inverse:R.noop,fn:R.program(12,h,t),data:t}),(i||0===i)&&(r+=i),i=n["if"].call(e,e&&e.isUnary,{hash:{},inverse:R.noop,fn:R.program(17,m,t),data:t}),(i||0===i)&&(r+=i),i=n["if"].call(e,e&&e.isParen,{hash:{},inverse:R.noop,fn:R.program(22,b,t),data:t}),(i||0===i)&&(r+=i),i=n["if"].call(e,e&&e.isIf,{hash:{},inverse:R.noop,fn:R.program(24,y,t),data:t}),(i||0===i)&&(r+=i),i=n["if"].call(e,e&&e.isFunction,{hash:{},inverse:R.noop,fn:R.program(29,k,t),data:t}),(i||0===i)&&(r+=i),i=n["if"].call(e,e&&e.completionText,{hash:{},inverse:R.noop,fn:R.program(33,C,t),data:t}),(i||0===i)&&(r+=i),r}function s(e,t){var r,o="";return r=R.invokePartial(i.completionExpression,"completionExpression",e&&e.expr1,n,i,t),(r||0===r)&&(o+=r),o+=" ",r=n["if"].call(e,e&&e.ascending,{hash:{},inverse:R.program(5,l,t),fn:R.program(3,a,t),data:t}),(r||0===r)&&(o+=r),o}function a(){return"asc"}function l(){return"desc"}function c(e,t){var i,r,o="";return o+='<span class="field',i=n["if"].call(e,e&&e.error,{hash:{},inverse:R.noop,fn:R.program(8,u,t),data:t}),(i||0===i)&&(o+=i),o+='">',(r=n.slug)?i=r.call(e,{hash:{},data:t}):(r=e&&e.slug,i=typeof r===T?r.call(e,{hash:{},data:t}):r),o+=A(i)+"</span>"}function u(){return" error"}function d(e,t){var i,r,o="";return o+='<span class="val">',(r=n.quoteChar)?i=r.call(e,{hash:{},data:t}):(r=e&&e.quoteChar,i=typeof r===T?r.call(e,{hash:{},data:t}):r),o+=A(i),(r=n.val)?i=r.call(e,{hash:{},data:t}):(r=e&&e.val,i=typeof r===T?r.call(e,{hash:{},data:t}):r),o+=A(i),(r=n.quoteChar)?i=r.call(e,{hash:{},data:t}):(r=e&&e.quoteChar,i=typeof r===T?r.call(e,{hash:{},data:t}):r),o+=A(i)+"</span>"}function h(e,t){var i,r="";return i=n["if"].call(e,e&&e.spaceAroundOp,{hash:{},inverse:R.program(15,p,t),fn:R.program(13,f,t),data:t}),(i||0===i)&&(r+=i),r}function f(e,t){var r,o,s="";return r=R.invokePartial(i.completionExpression,"completionExpression",e&&e.expr1,n,i,t),(r||0===r)&&(s+=r),s+=" ",(o=n.op)?r=o.call(e,{hash:{},data:t}):(o=e&&e.op,r=typeof o===T?o.call(e,{hash:{},data:t}):o),s+=A(r)+" ",r=R.invokePartial(i.completionExpression,"completionExpression",e&&e.expr2,n,i,t),(r||0===r)&&(s+=r),s}function p(e,t){var r,o,s="";return r=R.invokePartial(i.completionExpression,"completionExpression",e&&e.expr1,n,i,t),(r||0===r)&&(s+=r),(o=n.op)?r=o.call(e,{hash:{},data:t}):(o=e&&e.op,r=typeof o===T?o.call(e,{hash:{},data:t}):o),s+=A(r),r=R.invokePartial(i.completionExpression,"completionExpression",e&&e.expr2,n,i,t),(r||0===r)&&(s+=r),s}function m(e,t){var i,r="";return i=n["if"].call(e,e&&e.spaceAroundOp,{hash:{},inverse:R.program(20,v,t),fn:R.program(18,g,t),data:t}),(i||0===i)&&(r+=i),r}function g(e,t){var r,o,s="";return(o=n.op)?r=o.call(e,{hash:{},data:t}):(o=e&&e.op,r=typeof o===T?o.call(e,{hash:{},data:t}):o),s+=A(r)+" ",r=R.invokePartial(i.completionExpression,"completionExpression",e&&e.expr,n,i,t),(r||0===r)&&(s+=r),s}function v(e,t){var r,o,s="";return(o=n.op)?r=o.call(e,{hash:{},data:t}):(o=e&&e.op,r=typeof o===T?o.call(e,{hash:{},data:t}):o),s+=A(r),r=R.invokePartial(i.completionExpression,"completionExpression",e&&e.expr,n,i,t),(r||0===r)&&(s+=r),s}function b(e,t){var r,o="";return o+="(",r=R.invokePartial(i.completionExpression,"completionExpression",e&&e.expr,n,i,t),(r||0===r)&&(o+=r),o+=")"}function y(e,t){var r,o="";return o+="if ",r=R.invokePartial(i.completionExpression,"completionExpression",e&&e.cond,n,i,t),(r||0===r)&&(o+=r),r=n["if"].call(e,e&&e.then,{hash:{},inverse:R.noop,fn:R.program(25,w,t),data:t}),(r||0===r)&&(o+=r),r=n["if"].call(e,e&&e["else"],{hash:{},inverse:R.noop,fn:R.program(27,x,t),data:t}),(r||0===r)&&(o+=r),o}function w(e,t){var r,o="";return o+=" then ",r=R.invokePartial(i.completionExpression,"completionExpression",e&&e.then,n,i,t),(r||0===r)&&(o+=r),o}function x(e,t){var r,o="";return o+=" else ",r=R.invokePartial(i.completionExpression,"completionExpression",e&&e["else"],n,i,t),(r||0===r)&&(o+=r),o}function k(e,t){var i,r,o="";return(r=n.name)?i=r.call(e,{hash:{},data:t}):(r=e&&e.name,i=typeof r===T?r.call(e,{hash:{},data:t}):r),o+=A(i)+"(",i=n.each.call(e,e&&e.arguments,{hash:{},inverse:R.noop,fn:R.program(30,_,t),data:t}),(i||0===i)&&(o+=i),o+=")"}function _(e,t){var r,o="";return r=n["if"].call(e,null==t||t===!1?t:t.index,{hash:{},inverse:R.noop,fn:R.program(31,S,t),data:t}),(r||0===r)&&(o+=r),r=R.invokePartial(i.completionExpression,"completionExpression",e,n,i,t),(r||0===r)&&(o+=r),o}function S(){return", "}function C(e,t){var i,r,o="";return o+='<span class="completion-text">',(r=n.completionText)?i=r.call(e,{hash:{},data:t}):(r=e&&e.completionText,i=typeof r===T?r.call(e,{hash:{},data:t}):r),o+=A(i)+"</span>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var E,I="",R=this,T="function",A=this.escapeExpression;return E=n["if"].call(t,t,{hash:{},inverse:R.noop,fn:R.program(1,o,r),data:r}),(E||0===E)&&(I+=E),I})),Handlebars.registerPartial("completionItem",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+="icon-fb-",(r=n.iconName)?i=r.call(e,{hash:{},data:t}):(r=e&&e.iconName,i=typeof r===b?r.call(e,{hash:{},data:t}):r),o+=y(i)}function s(e,t){var i,r,o="";return o+="icon-",(r=n.color)?i=r.call(e,{hash:{},data:t}):(r=e&&e.color,i=typeof r===b?r.call(e,{hash:{},data:t}):r),o+=y(i)}function a(e,t){var i,r,o="";return o+='<span class="',i=n["if"].call(e,e&&e["class"],{hash:{},inverse:w.noop,fn:w.program(6,l,t),data:t}),(i||0===i)&&(o+=i),o+='">',(r=n.text)?i=r.call(e,{hash:{},data:t}):(r=e&&e.text,i=typeof r===b?r.call(e,{hash:{},data:t}):r),o+=y(i)+"</span>"}function l(e,t){var i,r;return(r=n["class"])?i=r.call(e,{hash:{},data:t}):(r=e&&e["class"],i=typeof r===b?r.call(e,{hash:{},data:t}):r),y(i)}function c(e,t){var i,r,o,s="";return i=n["if"].call(e,e&&e.name,{hash:{},inverse:w.noop,fn:w.program(9,u,t),data:t}),(i||0===i)&&(s+=i),r=n.join||e&&e.join,o={hash:{},inverse:w.noop,fn:w.program(14,f,t),data:t},i=r?r.call(e,e&&e.expressions,", ",o):x.call(e,"join",e&&e.expressions,", ",o),(i||0===i)&&(s+=i),i=n["if"].call(e,e&&e.name,{hash:{},inverse:w.noop,fn:w.program(16,p,t),data:t}),(i||0===i)&&(s+=i),s}function u(e,t){var i,r,o="";return o+='<span class="command">',(r=n.name)?i=r.call(e,{hash:{},data:t}):(r=e&&e.name,i=typeof r===b?r.call(e,{hash:{},data:t}):r),o+=y(i)+"</span>",i=n["if"].call(e,e&&e.hasParens,{hash:{},inverse:w.program(12,h,t),fn:w.program(10,d,t),data:t}),(i||0===i)&&(o+=i),o}function d(){return"("}function h(){return" "}function f(e,t){var r,o="";return r=w.invokePartial(i.completionExpression,"completionExpression",e,n,i,t),(r||0===r)&&(o+=r),o}function p(e,t){var i,r="";return i=n["if"].call(e,e&&e.hasParens,{hash:{},inverse:w.noop,fn:w.program(17,m,t),data:t}),(i||0===i)&&(r+=i),r}function m(){return")"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var g,v="",b="function",y=this.escapeExpression,w=this,x=n.helperMissing;return v+='<span class="completion">\n  <i class="icon icon-fixed-width ',g=n["if"].call(t,t&&t.iconName,{hash:{},inverse:w.noop,fn:w.program(1,o,r),data:r}),(g||0===g)&&(v+=g),v+=" ",g=n["if"].call(t,t&&t.color,{hash:{},inverse:w.noop,fn:w.program(3,s,r),data:r}),(g||0===g)&&(v+=g),v+='"></i>',g=n["if"].call(t,t&&t.text,{hash:{},inverse:w.program(8,c,r),fn:w.program(5,a,r),data:r}),(g||0===g)&&(v+=g),v+="\n</span>\n"})),Handlebars.registerPartial("csvDownloadForm",Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div class="hidden">\n  <form method="post" class="csv-download-form" enctype="multipart/form-data" name="csvdownload">\n    <textarea class=\'csv-textarea\' name="text"></textarea>\n    <input type="submit" class="form-submit">\n  </form>\n</div>\n'})),Handlebars.registerPartial("descriptionEditor",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+='<textarea class="sheet-description" rows=1>',(s=n.description)?o=s.call(t,{hash:{},data:r}):(s=t&&t.description,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+"</textarea>\n"})),Handlebars.registerPartial("divider",Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<li class="divider"></li>\n'})),Handlebars.registerPartial("dummyRow",Handlebars.template(function(e,t,n,i,r){function o(){return"\n    <td></td>\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a="",l=this;return a+='<tr>\n  <td class="gutter"></td></td>\n  ',s=n.each.call(t,t&&t.columns,{hash:{},inverse:l.noop,fn:l.program(1,o,r),data:r}),(s||0===s)&&(a+=s),a+="\n</tr>\n"})),Handlebars.registerPartial("eventConfigTable",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n    <tr class="event-item">\n      <td>\n        <a class="event-name" href="',(r=n.url)?i=r.call(e,{hash:{},data:t}):(r=e&&e.url,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+'" target="_blank">'+d((i=e&&e.name,i=null==i||i===!1?i:i.text,typeof i===u?i.apply(e):i))+'</a><span class="event-time">, ',(r=n.endTime)?i=r.call(e,{hash:{},data:t}):(r=e&&e.endTime,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+'</span>\n      </td>\n      <td>\n        <button class="import-event btn" data-event-id="',(r=n.id)?i=r.call(e,{hash:{},data:t}):(r=e&&e.id,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+'">Import</button>\n      </td>\n    </tr>\n  '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,l,c="",u="function",d=this.escapeExpression,h=this,f=n.helperMissing;return c+='<table class="event-list">\n  ',s=n.each.call(t,t&&t.events,{hash:{},inverse:h.noop,fn:h.program(1,o,r),data:r}),(s||0===s)&&(c+=s),c+='\n  <tr class="no-events">\n    <td>'+d((a=n.s||t&&t.s,l={hash:{},data:r},a?a.call(t,"eventbrite-no-events",l):f.call(t,"s","eventbrite-no-events",l)))+"</td>\n  </tr>\n</table>\n"})),Handlebars.registerPartial("exampleCodelet",Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},"// A codelet is a snippet of code that creates a new endpoint in your book's API.\n// https://github.com/fieldbook/api-docs/blob/master/codelets.md\n\nexports.endpoint = function (request, response, done) {\n  // Access properties off the request like headers, query or body:\n  var body = request.body;\n\n  // Use the pre-initialized client to access your book (this returns a promise):\n  var records = client.list('sheet_1');\n\n  // Return an object or promise as the response body:\n  return {message: \"hello, world!\"};\n}\n"})),Handlebars.registerPartial("fastHeaderCell",Handlebars.template(function(e,t,n,i,r){function o(){return" name-placeholder"}function s(e,t){var i,r,o="";return o+='placeholder="',(r=n.placeholder)?i=r.call(e,{hash:{},data:t}):(r=e&&e.placeholder,i=typeof r===p?r.call(e,{hash:{},data:t}):r),o+=m(i)+'"'}function a(e,t){var i,r="";return r+="\n    ",i=n["if"].call(e,e&&e.isFormula,{hash:{},inverse:g.noop,fn:g.program(6,l,t),data:t}),(i||0===i)&&(r+=i),r+="\n    ",i=n["if"].call(e,e&&e.isJoin,{hash:{},inverse:g.noop,fn:g.program(8,c,t),data:t}),(i||0===i)&&(r+=i),r+="\n  "}function l(e,t){var i,r,o="";return o+='\n      <span class="field-icon field-icon-formula has-tooltip" title="',(r=n.title)?i=r.call(e,{hash:{},data:t}):(r=e&&e.title,i=typeof r===p?r.call(e,{hash:{},data:t}):r),o+=m(i)+'"></span>\n    '}function c(e,t){var i,r,o="";return o+='\n      <a class="field-icon icon-fb-link field-icon-link has-tooltip" data-id="'+m((i=e&&e.data,i=null==i||i===!1?i:i.id,typeof i===p?i.apply(e):i))+'" href="',(r=n.href)?i=r.call(e,{hash:{},data:t}):(r=e&&e.href,i=typeof r===p?r.call(e,{hash:{},data:t}):r),o+=m(i)+'" title="',(r=n.title)?i=r.call(e,{hash:{},data:t}):(r=e&&e.title,i=typeof r===p?r.call(e,{hash:{},data:t}):r),o+=m(i)+'"></a>\n    '}function u(){return'\n  <i class="icon icon-fb-down-open field-option field-settings has-tooltip nomobile"></i>\n'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var d,h,f="",p="function",m=this.escapeExpression,g=this;return f+='<span class="header ',d=n["if"].call(t,t&&t.placeholder,{hash:{},inverse:g.noop,fn:g.program(1,o,r),data:r}),(d||0===d)&&(f+=d),f+='" ',d=n["if"].call(t,t&&t.placeholder,{hash:{},inverse:g.noop,fn:g.program(3,s,r),data:r}),(d||0===d)&&(f+=d),f+=">",(h=n.name)?d=h.call(t,{hash:{},data:r}):(h=t&&t.name,d=typeof h===p?h.call(t,{hash:{},data:r}):h),f+=m(d)+"\n  ",d=n["with"].call(t,t&&t.icon,{hash:{},inverse:g.noop,fn:g.program(5,a,r),data:r}),(d||0===d)&&(f+=d),f+="\n\n</span>\n\n",d=n["if"].call(t,t&&t.showFieldSettings,{hash:{},inverse:g.noop,fn:g.program(10,u,r),data:r}),(d||0===d)&&(f+=d),f+="\n"})),Handlebars.registerPartial("fastRow",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var o,s,a="",l="function",c=this.escapeExpression,u=this;return a+='<tr id="row-',(s=n.prefix)?o=s.call(t,{hash:{},data:r}):(s=t&&t.prefix,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+"-",(s=n.rowId)?o=s.call(t,{hash:{},data:r}):(s=t&&t.rowId,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'" class="table-row row-',(s=n.rowId)?o=s.call(t,{hash:{},data:r}):(s=t&&t.rowId,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+" ",(s=n.classes)?o=s.call(t,{hash:{},data:r}):(s=t&&t.classes,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'" data-row="',(s=n.rowId)?o=s.call(t,{hash:{},data:r}):(s=t&&t.rowId,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'">\n  ',o=u.invokePartial(i.fastRowCells,"fastRowCells",t,n,i,r),(o||0===o)&&(a+=o),a+="\n</tr>\n"
})),Handlebars.registerPartial("fastRowCell",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+='<td\n  id="cell-',(s=n.prefix)?o=s.call(t,{hash:{},data:r}):(s=t&&t.prefix,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+"-",(s=n.rowId)?o=s.call(t,{hash:{},data:r}):(s=t&&t.rowId,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+"-",(s=n.colId)?o=s.call(t,{hash:{},data:r}):(s=t&&t.colId,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'"\n  class="table-cell row-',(s=n.rowId)?o=s.call(t,{hash:{},data:r}):(s=t&&t.rowId,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+" col-",(s=n.colId)?o=s.call(t,{hash:{},data:r}):(s=t&&t.colId,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+" ",(s=n.classes)?o=s.call(t,{hash:{},data:r}):(s=t&&t.classes,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'"\n  data-row="',(s=n.rowId)?o=s.call(t,{hash:{},data:r}):(s=t&&t.rowId,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'"\n  data-column="',(s=n.colId)?o=s.call(t,{hash:{},data:r}):(s=t&&t.colId,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'"\n>\n  ',(s=n.content)?o=s.call(t,{hash:{},data:r}):(s=t&&t.content,o=typeof s===l?s.call(t,{hash:{},data:r}):s),(o||0===o)&&(a+=o),a+="\n</td>\n"})),Handlebars.registerPartial("fastRowCells",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o,a="";return a+='\n  <th class="row-handle-cell fixed '+h((r=n.toggle||e&&e.toggle,o={hash:{},data:t},r?r.call(e,e&&e.handleTooltip,"has-tooltip",o):f.call(e,"toggle",e&&e.handleTooltip,"has-tooltip",o)))+'"\n    ',i=n["if"].call(e,e&&e.handleTooltip,{hash:{},inverse:p.noop,fn:p.program(2,s,t),data:t}),(i||0===i)&&(a+=i),a+='>\n    <i class="icon icon-',(r=n.handleIcon)?i=r.call(e,{hash:{},data:t}):(r=e&&e.handleIcon,i=typeof r===d?r.call(e,{hash:{},data:t}):r),a+=h(i)+'"></i>\n  </th>\n'}function s(e,t){var i,r,o="";return o+='title="',(r=n.handleTooltip)?i=r.call(e,{hash:{},data:t}):(r=e&&e.handleTooltip,i=typeof r===d?r.call(e,{hash:{},data:t}):r),o+=h(i)+'"'}function a(e,t){var r,o="";return o+="\n  ",r=p.invokePartial(i.fastRowCell,"fastRowCell",e,n,i,t),(r||0===r)&&(o+=r),o+="\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var l,c,u="",d="function",h=this.escapeExpression,f=n.helperMissing,p=this;return l=n["if"].call(t,t&&t.hasRowHandles,{hash:{},inverse:p.noop,fn:p.program(1,o,r),data:r}),(l||0===l)&&(u+=l),u+='\n\n<td class="column-spacer" style="min-width:',(c=n.spacerWidth)?l=c.call(t,{hash:{},data:r}):(c=t&&t.spacerWidth,l=typeof c===d?c.call(t,{hash:{},data:r}):c),u+=h(l)+"px;width:",(c=n.spacerWidth)?l=c.call(t,{hash:{},data:r}):(c=t&&t.spacerWidth,l=typeof c===d?c.call(t,{hash:{},data:r}):c),u+=h(l)+"px;max-width:",(c=n.spacerWidth)?l=c.call(t,{hash:{},data:r}):(c=t&&t.spacerWidth,l=typeof c===d?c.call(t,{hash:{},data:r}):c),u+=h(l)+'px"></td>\n\n',l=n.each.call(t,t&&t.cells,{hash:{},inverse:p.noop,fn:p.program(4,a,r),data:r}),(l||0===l)&&(u+=l),u+="\n"})),Handlebars.registerPartial("fastTable",Handlebars.template(function(e,t,n,i,r){function o(){return'\n      <col style="width: 11px;">\n    '}function s(e,t){var i,r,o="";return o+='\n      <col style="width: ',(r=n.width)?i=r.call(e,{hash:{},data:t}):(r=e&&e.width,i=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=f(i)+'px;">\n    '}function a(e,t){var r,o,s="";return s+='\n    <thead id="',(o=n.prefix)?r=o.call(e,{hash:{},data:t}):(o=e&&e.prefix,r=typeof o===h?o.call(e,{hash:{},data:t}):o),s+=f(r)+"-header\" class='stick-top no-scroll-to-select'>\n      ",r=p.invokePartial(i.fastTableHeader,"fastTableHeader",e,n,i,t),(r||0===r)&&(s+=r),s+="\n    </thead>\n  "}function l(e){var t,n="";return n+="\n      ",t=typeof e===h?e.apply(e):e,(t||0===t)&&(n+=t),n+="\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var c,u,d="",h="function",f=this.escapeExpression,p=this;return d+="<table>\n  <colgroup>\n    ",c=n["if"].call(t,t&&t.hasRowHandles,{hash:{},inverse:p.noop,fn:p.program(1,o,r),data:r}),(c||0===c)&&(d+=c),d+="\n    ",c=n.each.call(t,t&&t.columns,{hash:{},inverse:p.noop,fn:p.program(3,s,r),data:r}),(c||0===c)&&(d+=c),d+="\n  </colgroup>\n\n  ",c=n["if"].call(t,t&&t.hasHeaders,{hash:{},inverse:p.noop,fn:p.program(5,a,r),data:r}),(c||0===c)&&(d+=c),d+="\n\n  <tbody class='body' id=\"",(u=n.prefix)?c=u.call(t,{hash:{},data:r}):(u=t&&t.prefix,c=typeof u===h?u.call(t,{hash:{},data:r}):u),d+=f(c)+'-body">\n    ',c=n.each.call(t,t&&t.rows,{hash:{},inverse:p.noop,fn:p.program(7,l,r),data:r}),(c||0===c)&&(d+=c),d+='\n  </tbody>\n\n  <tbody id="',(u=n.prefix)?c=u.call(t,{hash:{},data:r}):(u=t&&t.prefix,c=typeof u===h?u.call(t,{hash:{},data:r}):u),d+=f(c)+"-footer\" class='footer stick-bottom no-scroll-to-select'>\n  </tbody>\n</table>\n"})),Handlebars.registerPartial("fastTableColumnResizer",Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div class="fast-table-col-resizer">\n  <div class="col-resizer-handle"></div>\n  <div class="col-resizer-line"></div>\n</div>\n'})),Handlebars.registerPartial("fastTableHeader",Handlebars.template(function(e,t,n,i,r){function o(){return'\n    <th class="col-reorder corner"></th>\n  '}function s(e,t,i){var r,o,s="";return s+='\n    <th\n      id="cell-'+p((r=i&&i.prefix,typeof r===f?r.apply(e):r))+"-handle-",(o=n.colId)?r=o.call(e,{hash:{},data:t}):(o=e&&e.colId,r=typeof o===f?o.call(e,{hash:{},data:t}):o),s+=p(r)+'"\n      class="table-cell col-',(o=n.colId)?r=o.call(e,{hash:{},data:t}):(o=e&&e.colId,r=typeof o===f?o.call(e,{hash:{},data:t}):o),s+=p(r)+" col-"+p((r=i&&i.prefix,typeof r===f?r.apply(e):r))+"-",(o=n.colId)?r=o.call(e,{hash:{},data:t}):(o=e&&e.colId,r=typeof o===f?o.call(e,{hash:{},data:t}):o),s+=p(r)+" row-handle",r=n["if"].call(e,e&&e.fixed,{hash:{},inverse:m.noop,fn:m.program(4,a,t),data:t}),(r||0===r)&&(s+=r),s+=" ",(o=n.classes)?r=o.call(e,{hash:{},data:t}):(o=e&&e.classes,r=typeof o===f?o.call(e,{hash:{},data:t}):o),s+=p(r)+'">\n      ',r=n.unless.call(e,e&&e.fixed,{hash:{},inverse:m.noop,fn:m.program(6,l,t),data:t}),(r||0===r)&&(s+=r),s+="\n    </th>\n  "}function a(){return" fixed"}function l(){return'\n        <div class="hash-div"></div>\n      '}function c(){return'\n    <th class="col-reorder" width="20px"></th>\n  '}function u(e,t,i){var r,o,s="";return s+='\n    <th id="cell-'+p((r=i&&i.prefix,typeof r===f?r.apply(e):r))+"-header-",(o=n.colId)?r=o.call(e,{hash:{},data:t}):(o=e&&e.colId,r=typeof o===f?o.call(e,{hash:{},data:t}):o),s+=p(r)+'" class="table-cell col-',(o=n.colId)?r=o.call(e,{hash:{},data:t}):(o=e&&e.colId,r=typeof o===f?o.call(e,{hash:{},data:t}):o),s+=p(r)+" col-"+p((r=i&&i.prefix,typeof r===f?r.apply(e):r))+"-",(o=n.colId)?r=o.call(e,{hash:{},data:t}):(o=e&&e.colId,r=typeof o===f?o.call(e,{hash:{},data:t}):o),s+=p(r)+" row-header ",(o=n.classes)?r=o.call(e,{hash:{},data:t}):(o=e&&e.classes,r=typeof o===f?o.call(e,{hash:{},data:t}):o),s+=p(r)+'">',(o=n.headerHtml)?r=o.call(e,{hash:{},data:t}):(o=e&&e.headerHtml,r=typeof o===f?o.call(e,{hash:{},data:t}):o),(r||0===r)&&(s+=r),s+="</th>\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var d,h="",f="function",p=this.escapeExpression,m=this;return h+='<tr class="col-handles">\n  ',d=n["if"].call(t,t&&t.hasRowHandles,{hash:{},inverse:m.noop,fn:m.program(1,o,r),data:r}),(d||0===d)&&(h+=d),h+="\n  ",d=n.each.call(t,t&&t.columns,{hash:{},inverse:m.noop,fn:m.programWithDepth(3,s,r,t),data:r}),(d||0===d)&&(h+=d),h+='\n</tr>\n<tr class = "col-headers">\n  ',d=n["if"].call(t,t&&t.hasRowHandles,{hash:{},inverse:m.noop,fn:m.program(8,c,r),data:r}),(d||0===d)&&(h+=d),h+="\n  ",d=n.each.call(t,t&&t.columns,{hash:{},inverse:m.noop,fn:m.programWithDepth(10,u,r,t),data:r}),(d||0===d)&&(h+=d),h+="\n</tr>\n"})),Handlebars.registerPartial("fieldMenuItems",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r="";return r+="\n  ",i=n["if"].call(e,e&&e.slug,{hash:{},inverse:O.noop,fn:O.program(2,s,t),data:t}),(i||0===i)&&(r+=i),r+="\n"}function s(e,t){var i,r,o,s="";return s+='\n    <li class="search-field" data-key=',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===F?r.call(e,{hash:{},data:t}):r),s+=V(i)+'>\n      <a tabindex="-1" href="#"><i class="icon-fixed-width icon-fb-search"></i> '+V((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"search-field",o):L.call(e,"s","search-field",o)))+"</a>\n    </li>\n  "}function a(e,t){var i,r,o,s="";return s+='\n  <li class="sort-field" data-key=',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===F?r.call(e,{hash:{},data:t}):r),s+=V(i)+' data-sort-direction="asc">\n    <a tabindex="-1" href="#"><i class="icon-fixed-width icon-fb-sort-column"></i> '+V((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"sort-field-asc",o):L.call(e,"s","sort-field-asc",o)))+'</a>\n  </li>\n  <li class="sort-field" data-key=',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===F?r.call(e,{hash:{},data:t}):r),s+=V(i)+' data-sort-direction="desc">\n    <a tabindex="-1" href="#"><i class="icon-fixed-width icon-fb-sort-column-reverse"></i> '+V((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"sort-field-desc",o):L.call(e,"s","sort-field-desc",o)))+"</a>\n  </li>\n"}function l(e,t){var i,r,o,s="";return s+='\n  <li class="group-field" data-key=',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===F?r.call(e,{hash:{},data:t}):r),s+=V(i)+'>\n    <a tabindex="-1" href="#"><i class="icon-fixed-width icon-fb-group"></i> '+V((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"group-field",o):L.call(e,"s","group-field",o)))+"</a>\n  </li>\n"}function c(e,t){var i,r,o,s="";return s+='\n  <li class="report-on-field" data-key=',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===F?r.call(e,{hash:{},data:t}):r),s+=V(i)+'>\n    <a tabindex="-1" href="#"><i class="icon-fixed-width icon-fb-report"></i> '+V((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"report-on-field",o):L.call(e,"s","report-on-field",o)))+"</a>\n  </li>\n"}function u(){return'\n  <li class="divider metadata-access"></li>\n'}function d(){return"disabled has-tooltip"}function h(e,t){var i,r,o="";return o+='title="',(r=n.disableInputConfigReason)?i=r.call(e,{hash:{},data:t}):(r=e&&e.disableInputConfigReason,i=typeof r===F?r.call(e,{hash:{},data:t}):r),o+=V(i)+'"'}function f(e,t){var i,r,o="";return o+='title="',(r=n.disableRequiredReason)?i=r.call(e,{hash:{},data:t}):(r=e&&e.disableRequiredReason,i=typeof r===F?r.call(e,{hash:{},data:t}):r),o+=V(i)+'"'}function p(e,t){var i,r,o,s="";return s+='\n  <li class="remove-link ',i=n["if"].call(e,e&&e.hasIntegration,{hash:{},inverse:O.noop,fn:O.program(12,d,t),data:t}),(i||0===i)&&(s+=i),s+=' metadata-access" data-key=',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===F?r.call(e,{hash:{},data:t}):r),s+=V(i)+"\n    ",i=n["if"].call(e,e&&e.hasIntegration,{hash:{},inverse:O.noop,fn:O.program(19,m,t),data:t}),(i||0===i)&&(s+=i),s+='>\n    <a tabindex="-1" href="#"><i class="icon-fixed-width icon-fb-unlink"></i> '+V((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"remove-link",o):L.call(e,"s","remove-link",o)))+"</a>\n  </li>\n"}function m(e,t){var i,r,o="";return o+='title="'+V((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"disabled-reason-field-integration",r):L.call(e,"s","disabled-reason-field-integration",r)))+'"'}function g(e,t){var i,r,o,s="";return s+='\n  <li class="add-link metadata-access',i=n["if"].call(e,e&&e.disableLink,{hash:{},inverse:O.noop,fn:O.program(22,v,t),data:t}),(i||0===i)&&(s+=i),s+='" data-key=',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===F?r.call(e,{hash:{},data:t}):r),s+=V(i)+" ",i=n["if"].call(e,e&&e.disableLinkReason,{hash:{},inverse:O.noop,fn:O.program(24,b,t),data:t}),(i||0===i)&&(s+=i),s+='>\n    <a tabindex="-1" href="#"><i class="icon-fixed-width icon-fb-link"></i> '+V((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"add-link",o):L.call(e,"s","add-link",o)))+"</a>\n  </li>\n"}function v(){return" disabled has-tooltip"}function b(e,t){var i,r,o="";return o+='title="',(r=n.disableLinkReason)?i=r.call(e,{hash:{},data:t}):(r=e&&e.disableLinkReason,i=typeof r===F?r.call(e,{hash:{},data:t}):r),o+=V(i)+'"'}function y(e,t){var i,r,o="";return o+='title="',(r=n.disableFormulaReason)?i=r.call(e,{hash:{},data:t}):(r=e&&e.disableFormulaReason,i=typeof r===F?r.call(e,{hash:{},data:t}):r),o+=V(i)+'"'}function w(e,t){var i,r;return V((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"edit-field-formula",r):L.call(e,"s","edit-field-formula",r)))}function x(e,t){var i,r;return V((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"set-field-formula",r):L.call(e,"s","set-field-formula",r)))}function k(e,t){var i,r,o,s="";return s+='\n  <li class="remove-formula metadata-access ',i=n["if"].call(e,e&&e.hasIntegration,{hash:{},inverse:O.noop,fn:O.program(33,_,t),data:t}),(i||0===i)&&(s+=i),s+='" data-key=',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===F?r.call(e,{hash:{},data:t}):r),s+=V(i)+'>\n    <a tabindex="-1" href="#"><i class="icon-fixed-width" style="text-decoration: line-through;">&fnof;</i> '+V((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"remove-field-formula",o):L.call(e,"s","remove-field-formula",o)))+"</a>\n  </li>\n"}function _(){return"disabled"}function S(e,t){var r,o,s,a="";return a+='\n  <li class = "hide-field metadata-access" data-key=',(o=n.key)?r=o.call(e,{hash:{},data:t}):(o=e&&e.key,r=typeof o===F?o.call(e,{hash:{},data:t}):o),a+=V(r)+'>\n    <a tabindex="-1" href="#">\n      <i class="icon-fixed-width icon-eye-close"></i> '+V((o=n.s||e&&e.s,s={hash:{},data:t},o?o.call(e,"hide-field",s):L.call(e,"s","hide-field",s)))+"\n    </a>\n  </li>\n\n  ",r=O.invokePartial(i.hiddenFieldsMenu,"hiddenFieldsMenu",e,n,i,t),(r||0===r)&&(a+=r),a+='\n\n  <li class="delete-field metadata-access ',r=n.unless.call(e,e&&e.canDelete,{hash:{},inverse:O.noop,fn:O.program(33,_,t),data:t}),(r||0===r)&&(a+=r),a+=" ",r=n["if"].call(e,e&&e.hasIntegration,{hash:{},inverse:O.noop,fn:O.program(36,C,t),data:t}),(r||0===r)&&(a+=r),a+='" data-key=',(o=n.key)?r=o.call(e,{hash:{},data:t}):(o=e&&e.key,r=typeof o===F?o.call(e,{hash:{},data:t}):o),a+=V(r)+"\n    ",r=n["if"].call(e,e&&e.hasIntegration,{hash:{},inverse:O.noop,fn:O.program(19,m,t),data:t}),(r||0===r)&&(a+=r),a+='>\n    <a tabindex="-1" href="#">\n      <i class="icon-fixed-width icon-fb-close"></i>\n      ',r=n["if"].call(e,e&&e.name,{hash:{},inverse:O.program(40,I,t),fn:O.program(38,E,t),data:t}),(r||0===r)&&(a+=r),a+="\n    </a>\n  </li>\n"}function C(){return"has-tooltip"}function E(e,t){var i,r;return V((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"delete-field",r):L.call(e,"s","delete-field",r)))}function I(e,t){var i,r;return V((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"delete-unnamed-field",r):L.call(e,"s","delete-unnamed-field",r)))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var R,T,A,M="",F="function",V=this.escapeExpression,L=n.helperMissing,O=this;return R=n["if"].call(t,t&&t.showSearchFieldAction,{hash:{},inverse:O.noop,fn:O.program(1,o,r),data:r}),(R||0===R)&&(M+=R),M+="\n\n",R=n["if"].call(t,t&&t.showSortFieldAction,{hash:{},inverse:O.noop,fn:O.program(4,a,r),data:r}),(R||0===R)&&(M+=R),M+="\n\n",R=n["if"].call(t,t&&t.showGroupFieldAction,{hash:{},inverse:O.noop,fn:O.program(6,l,r),data:r}),(R||0===R)&&(M+=R),M+="\n\n",R=n["if"].call(t,t&&t.showReportAction,{hash:{},inverse:O.noop,fn:O.program(8,c,r),data:r}),(R||0===R)&&(M+=R),M+="\n\n",R=n["if"].call(t,t&&t.hasAnyFieldAction,{hash:{},inverse:O.noop,fn:O.program(10,u,r),data:r}),(R||0===R)&&(M+=R),M+='\n\n<li class="set-type metadata-access ',R=n["if"].call(t,t&&t.disableInputConfig,{hash:{},inverse:O.noop,fn:O.program(12,d,r),data:r}),(R||0===R)&&(M+=R),M+='" ',R=n["if"].call(t,t&&t.disableInputConfigReason,{hash:{},inverse:O.noop,fn:O.program(14,h,r),data:r}),(R||0===R)&&(M+=R),M+=" data-key=",(T=n.key)?R=T.call(t,{hash:{},data:r}):(T=t&&t.key,R=typeof T===F?T.call(t,{hash:{},data:r}):T),M+=V(R)+'>\n  <a tabindex="-1" href="#"><i class="icon-fixed-width icon-fb-settings"></i> '+V((T=n.s||t&&t.s,A={hash:{},data:r},T?T.call(t,"set-type",A):L.call(t,"s","set-type",A)))+'</a>\n</li>\n\n<li class="set-required metadata-access ',R=n["if"].call(t,t&&t.disableInputConfig,{hash:{},inverse:O.noop,fn:O.program(12,d,r),data:r}),(R||0===R)&&(M+=R),M+='" ',R=n["if"].call(t,t&&t.disableRequiredReason,{hash:{},inverse:O.noop,fn:O.program(16,f,r),data:r}),(R||0===R)&&(M+=R),M+=" data-key=",(T=n.key)?R=T.call(t,{hash:{},data:r}):(T=t&&t.key,R=typeof T===F?T.call(t,{hash:{},data:r}):T),M+=V(R)+'>\n  <a tabindex="-1" href="#"><i class="icon-fixed-width icon-asterisk"></i> '+V((T=n.s||t&&t.s,A={hash:{},data:r},T?T.call(t,"required-field",A):L.call(t,"s","required-field",A)))+' <i class="icon-fixed-width '+V((T=n.toggle||t&&t.toggle,A={hash:{},data:r},T?T.call(t,t&&t.required,"icon-ok",A):L.call(t,"toggle",t&&t.required,"icon-ok",A)))+'"></i></a>\n</li>\n\n<li class="use-numeric-commas metadata-access">\n  <a tabindex="-1" href="#"><i class="icon-fixed-width ',(T=n.digitGroupIcon)?R=T.call(t,{hash:{},data:r}):(T=t&&t.digitGroupIcon,R=typeof T===F?T.call(t,{hash:{},data:r}):T),M+=V(R)+'"></i>\n  '+V((T=n.s||t&&t.s,A={hash:{},data:r},T?T.call(t,t&&t.digitGroupString,A):L.call(t,"s",t&&t.digitGroupString,A)))+' <i class="icon-fixed-width '+V((T=n.toggle||t&&t.toggle,A={hash:{},data:r},T?T.call(t,(R=t&&t.formatOptions,null==R||R===!1?R:R.numericCommas),"icon-ok",A):L.call(t,"toggle",(R=t&&t.formatOptions,null==R||R===!1?R:R.numericCommas),"icon-ok",A)))+'"></i></a>\n</li>\n\n',R=n["if"].call(t,t&&t.linkedSheet,{hash:{},inverse:O.program(21,g,r),fn:O.program(18,p,r),data:r}),(R||0===R)&&(M+=R),M+='\n\n<li class="set-formula metadata-access',R=n["if"].call(t,t&&t.disableFormula,{hash:{},inverse:O.noop,fn:O.program(22,v,r),data:r}),(R||0===R)&&(M+=R),M+='" data-key=',(T=n.key)?R=T.call(t,{hash:{},data:r}):(T=t&&t.key,R=typeof T===F?T.call(t,{hash:{},data:r}):T),M+=V(R)+" ",R=n["if"].call(t,t&&t.disableFormulaReason,{hash:{},inverse:O.noop,fn:O.program(26,y,r),data:r}),(R||0===R)&&(M+=R),M+='>\n  <a tabindex="-1" href="#"><i class="icon-fixed-width">&fnof;</i> ',R=n["if"].call(t,t&&t.hasFormula,{hash:{},inverse:O.program(30,x,r),fn:O.program(28,w,r),data:r}),(R||0===R)&&(M+=R),M+="</a>\n</li>\n\n",R=n["if"].call(t,t&&t.hasFormula,{hash:{},inverse:O.noop,fn:O.program(32,k,r),data:r}),(R||0===R)&&(M+=R),M+='\n\n<li class="aggregate-menu metadata-access dropdown-submenu">\n  <a tabindex="-1" href="#"><i class="icon-fixed-width icon-fb-report"></i> '+V((T=n.s||t&&t.s,A={hash:{},data:r},T?T.call(t,"set-field-aggregate",A):L.call(t,"s","set-field-aggregate",A)))+'</a>\n  <ul class="dropdown-menu">\n    ',R=O.invokePartial(i.aggregateMenuItems,"aggregateMenuItems",t,n,i,r),(R||0===R)&&(M+=R),M+='\n  </ul>\n</li>\n\n<li class="divider metadata-access"></li>\n\n<li class="insert-field metadata-access" data-key="',(T=n.key)?R=T.call(t,{hash:{},data:r}):(T=t&&t.key,R=typeof T===F?T.call(t,{hash:{},data:r}):T),M+=V(R)+'" data-direction="left">\n  <a tabindex="-1" href="#">\n    <i class="icon-fixed-width icon-long-arrow-left"></i>\n    '+V((T=n.s||t&&t.s,A={hash:{},data:r},T?T.call(t,"insert-field-left",A):L.call(t,"s","insert-field-left",A)))+'\n  </a>\n</li>\n\n<li class="insert-field metadata-access" data-key="',(T=n.key)?R=T.call(t,{hash:{},data:r}):(T=t&&t.key,R=typeof T===F?T.call(t,{hash:{},data:r}):T),M+=V(R)+'" data-direction="right">\n  <a tabindex="-1" href="#">\n    <i class="icon-fixed-width icon-long-arrow-right"></i>\n    '+V((T=n.s||t&&t.s,A={hash:{},data:r},T?T.call(t,"insert-field-right",A):L.call(t,"s","insert-field-right",A)))+"\n  </a>\n</li>\n\n",R=n.unless.call(t,t&&t.isNameField,{hash:{},inverse:O.noop,fn:O.program(35,S,r),data:r}),(R||0===R)&&(M+=R),M+="\n"})),Handlebars.registerPartial("floatingDropdown",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+='<div class="floating-dropdown dropdown" id="floating-dropdown-',(s=n.cid)?o=s.call(t,{hash:{},data:r}):(s=t&&t.cid,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'">\n  <div class="dropdown-toggle" data-toggle="dropdown"></div>\n  <ul class="dropdown-menu main-menu" role="menu">\n  </ul>\n</div>\n'})),Handlebars.registerPartial("fullImage",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+='<img class="full-image" src="',(s=n.src)?o=s.call(t,{hash:{},data:r}):(s=t&&t.src,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'">\n'})),Handlebars.registerPartial("getStartedButton",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r;return(r=n.href)?i=r.call(e,{hash:{},data:t}):(r=e&&e.href,i=typeof r===u?r.call(e,{hash:{},data:t}):r),d(i)}function s(){return"#"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var a,l,c="",u="function",d=this.escapeExpression,h=this;return c+='<a href = "',a=n["if"].call(t,t&&t.href,{hash:{},inverse:h.program(3,s,r),fn:h.program(1,o,r),data:r}),(a||0===a)&&(c+=a),c+='" class="btn ',(l=n.buttonClass)?a=l.call(t,{hash:{},data:r}):(l=t&&t.buttonClass,a=typeof l===u?l.call(t,{hash:{},data:r}):l),c+=d(a)+" get-started-button\">\n  <div class='get-started-icon'>\n    <i class=\"icon icon-fixed-width icon-",(l=n.icon)?a=l.call(t,{hash:{},data:r}):(l=t&&t.icon,a=typeof l===u?l.call(t,{hash:{},data:r}):l),c+=d(a)+'"></i>\n  </div>\n  <div>\n    <div class="get-started-text show-big">\n      ',(l=n.bigText)?a=l.call(t,{hash:{},data:r}):(l=t&&t.bigText,a=typeof l===u?l.call(t,{hash:{},data:r}):l),c+=d(a)+'\n    </div>\n    <div class="get-started-text show-small">\n      ',(l=n.smallText)?a=l.call(t,{hash:{},data:r}):(l=t&&t.smallText,a=typeof l===u?l.call(t,{hash:{},data:r}):l),c+=d(a)+'\n    </div>\n    <div class="get-started-subtitle show-big">\n      ',(l=n.subText)?a=l.call(t,{hash:{},data:r}):(l=t&&t.subText,a=typeof l===u?l.call(t,{hash:{},data:r}):l),c+=d(a)+"\n    </div>\n  </div>\n</a>\n"})),Handlebars.registerPartial("getStartedPane",Handlebars.template(function(e,t,n,i,r){function o(e,t){var r,o="";return o+='\n  <div class = "get-started-container">\n    ',r=l.invokePartial(i.getStartedButton,"getStartedButton",e,n,i,t),(r||0===r)&&(o+=r),o+="\n  </div>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var s,a="",l=this;return s=n.each.call(t,t,{hash:{},inverse:l.noop,fn:l.program(1,o,r),data:r}),(s||0===s)&&(a+=s),a+='\n\n<div>\n  <span class="show-big">\n    <h4>Stuck? Unsure what to do?</h4>\n    We\'re here to help.\n  </span>\n\n  <span class="show-small">\n    Stuck? Questions?\n  </span>\n\n  <a href="#" class="intercom-link">\n    Message us\n  </a> or <a href="/schedule/getting-started" target="_blank">\n    request a help session\n  </a>.\n</div>\n'})),Handlebars.registerPartial("groupMenuItems",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l=n.helperMissing,c=this.escapeExpression;return a+='<li class="delete-record-list">\n  <a tabindex="-1" href="#">\n    <i class="icon-fixed-width icon-fb-close"></i>\n    '+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,t&&t.deleteActionTemplate,s):l.call(t,"s",t&&t.deleteActionTemplate,s)))+"\n  </a>\n</li>\n"})),Handlebars.registerPartial("groupSortSurrogate",Handlebars.template(function(e,t,n,i,r){function o(){return"report"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a="",l=this;return a+='<div class="fast-scroll sortable surrogate grabbing">\n  <div class="table-view">\n    <div class = "fast-record-list ',s=n["if"].call(t,t&&t.report,{hash:{},inverse:l.noop,fn:l.program(1,o,r),data:r}),(s||0===s)&&(a+=s),a+='" style="margin-left: 0;">\n      <div class="record-list-header-section full-width" style="background: none">\n        <h3 class="record-list-header">\n        </h3>\n      </div>\n    </div>\n  </div>\n</div>\n'})),Handlebars.registerPartial("groupTitles",Handlebars.template(function(e,t,n,i,r){function o(e,t,i){var r,o,l="";return l+='\n  <div class="group-title-section">\n    <span class="group-title-',(o=n.size)?r=o.call(e,{hash:{},data:t}):(o=e&&e.size,r=typeof o===x?o.call(e,{hash:{},data:t}):o),l+=k(r)+'">\n      ',r=n["if"].call(e,i&&i.showFieldNames,{hash:{},inverse:_.noop,fn:_.program(2,s,t),data:t}),(r||0===r)&&(l+=r),l+="\n\n      ",r=n["if"].call(e,(r=e&&e.valueInfo,null==r||r===!1?r:r.links),{hash:{},inverse:_.programWithDepth(11,h,t,i),fn:_.program(4,a,t),data:t}),(r||0===r)&&(l+=r),l+="\n\n      ",r=n["if"].call(e,i&&i.showDeleteListAction,{hash:{},inverse:_.noop,fn:_.program(20,v,t),data:t}),(r||0===r)&&(l+=r),l+="\n    </span>\n    ",r=n["if"].call(e,e&&e.ruler,{hash:{},inverse:_.noop,fn:_.program(22,b,t),data:t}),(r||0===r)&&(l+=r),l+="\n  </div>\n"}function s(e,t){var i,r,o="";return o+='\n        <span class="field-name">\n          ',(r=n.fieldName)?i=r.call(e,{hash:{},data:t}):(r=e&&e.fieldName,i=typeof r===x?r.call(e,{hash:{},data:t}):r),o+=k(i)+":\n        </span>\n      "}function a(e,t){var i,r,o,s="";return s+="\n        ",r=n.join||e&&e.join,o={hash:{},inverse:_.noop,fn:_.program(5,l,t),data:t},i=r?r.call(e,(i=e&&e.valueInfo,null==i||i===!1?i:i.links),", ",o):S.call(e,"join",(i=e&&e.valueInfo,null==i||i===!1?i:i.links),", ",o),(i||0===i)&&(s+=i),s+="\n      "}function l(e,t){var i,r="";return i=n["if"].call(e,e&&e.url,{hash:{},inverse:_.program(9,d,t),fn:_.program(6,c,t),data:t}),(i||0===i)&&(r+=i),r}function c(e,t){var i,r,o="";return o+="<a ",i=n["if"].call(e,e&&e.missing,{hash:{},inverse:_.noop,fn:_.program(7,u,t),data:t}),(i||0===i)&&(o+=i),o+=' href="',(r=n.url)?i=r.call(e,{hash:{},data:t}):(r=e&&e.url,i=typeof r===x?r.call(e,{hash:{},data:t}):r),o+=k(i)+'">',(r=n.text)?i=r.call(e,{hash:{},data:t}):(r=e&&e.text,i=typeof r===x?r.call(e,{hash:{},data:t}):r),o+=k(i)+"</a>"}function u(){return'class="missing"'}function d(e,t){var i,r,o="";return(r=n.text)?i=r.call(e,{hash:{},data:t}):(r=e&&e.text,i=typeof r===x?r.call(e,{hash:{},data:t}):r),o+=k(i)}function h(e,t,i){var r,o,s="";return s+='\n        <span\n          class="editable-title with-placeholder\n            ',r=n["if"].call(e,e&&e.isPlaceholder,{hash:{},inverse:_.noop,fn:_.program(12,f,t),data:t}),(r||0===r)&&(s+=r),s+="\n            ",r=n["if"].call(e,(r=e&&e.valueInfo,null==r||r===!1?r:r.error),{hash:{},inverse:_.noop,fn:_.program(14,p,t),data:t}),(r||0===r)&&(s+=r),s+='"\n          placeholder="',(o=n.placeholderTitle)?r=o.call(e,{hash:{},data:t}):(o=e&&e.placeholderTitle,r=typeof o===x?o.call(e,{hash:{},data:t}):o),s+=k(r)+'"\n          ',r=n["if"].call(e,i&&i.allowTitleRename,{hash:{},inverse:_.noop,fn:_.program(16,m,t),data:t}),(r||0===r)&&(s+=r),s+="\n          ",r=n["if"].call(e,(r=e&&e.valueInfo,null==r||r===!1?r:r.error),{hash:{},inverse:_.noop,fn:_.program(18,g,t),data:t}),(r||0===r)&&(s+=r),s+="\n        >"+k((r=e&&e.valueInfo,r=null==r||r===!1?r:r.text,typeof r===x?r.apply(e):r))+"</span>\n      "}function f(){return"name-placeholder"}function p(){return"error-group-title has-tooltip"}function m(){return"\n            contenteditable=true"}function g(e){var t,n="";return n+='\n            title="'+k((t=e&&e.valueInfo,t=null==t||t===!1?t:t.errorMessage,typeof t===x?t.apply(e):t))+'"\n            data-placement="right"\n          '}function v(){var e="";return e+='\n        \n        <span class="record-list-settings icon-">&#xf00d;</span>\n      '}function b(){return"<hr>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var y,w="",x="function",k=this.escapeExpression,_=this,S=n.helperMissing;return y=n.each.call(t,t&&t.titles,{hash:{},inverse:_.noop,fn:_.programWithDepth(1,o,r,t),data:r}),(y||0===y)&&(w+=y),w+="\n"})),Handlebars.registerPartial("groupingMessage",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o,s="";return(r=n.name)?i=r.call(e,{hash:{},data:t}):(r=e&&e.name,i=typeof r===f?r.call(e,{hash:{},data:t}):r),s+=p(i)+' (<span data-key="',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===f?r.call(e,{hash:{},data:t}):r),s+=p(i)+'" class="ungroup link">'+p((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"ungroup",o):m.call(e,"s","ungroup",o)))+"</span>)"}function s(e,t){var i,r,o,s="";return s+="\n"+p((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"custom-order-message",o):m.call(e,"s","custom-order-message",o)))+"\n",r=n.join||e&&e.join,o={hash:{},inverse:g.noop,fn:g.program(4,a,t),data:t},i=r?r.call(e,e&&e.customOrderFields,", ",o):m.call(e,"join",e&&e.customOrderFields,", ",o),(i||0===i)&&(s+=i),s+=".\n"}function a(e,t){var i,r,o="";return(r=n.name)?i=r.call(e,{hash:{},data:t}):(r=e&&e.name,i=typeof r===f?r.call(e,{hash:{},data:t}):r),o+=p(i),i=n["if"].call(e,e&&e.showRemove,{hash:{},inverse:g.noop,fn:g.program(5,l,t),data:t}),(i||0===i)&&(o+=i),o}function l(e,t){var i,r,o,s="";return s+=' (<span data-key="',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===f?r.call(e,{hash:{},data:t}):r),s+=p(i)+'" class="remove-custom-order link">'+p((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"remove",o):m.call(e,"s","remove",o)))+"</span>)"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var c,u,d,h="",f="function",p=this.escapeExpression,m=n.helperMissing,g=this;return h+=p((u=n.s||t&&t.s,d={hash:{},data:r},u?u.call(t,"grouping-by",d):m.call(t,"s","grouping-by",d)))+"\n",u=n.join||t&&t.join,d={hash:{},inverse:g.noop,fn:g.program(1,o,r),data:r},c=u?u.call(t,t&&t.fields,", ",d):m.call(t,"join",t&&t.fields,", ",d),(c||0===c)&&(h+=c),h+=".\n\n",c=n["if"].call(t,t&&t.anyCustomOrder,{hash:{},inverse:g.noop,fn:g.program(3,s,r),data:r}),(c||0===c)&&(h+=c),h+="\n"})),Handlebars.registerPartial("hiddenFieldsMenu",Handlebars.template(function(e,t,n,i,r){function o(){return"\n    dropdown-submenu\n  "}function s(){return"\n    disabled has-tooltip\n  "}function a(e,t){var i,r,o="";return o+='title="'+v((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"disabled-reason-no-hidden-fields",r):g.call(e,"s","disabled-reason-no-hidden-fields",r)))+'"'}function l(e,t){var i,r="";return r+='\n    <ul class="dropdown-menu">\n      ',i=n.each.call(e,e&&e.hiddenFields,{hash:{},inverse:y.noop,fn:y.program(8,c,t),data:t}),(i||0===i)&&(r+=i),r+="\n    </ul>\n  "}function c(e,t){var i,r,o="";return o+='\n      <li class="unhide-field" data-key="',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===b?r.call(e,{hash:{},data:t}):r),o+=v(i)+'" data-sheet-id="',(r=n.sheetId)?i=r.call(e,{hash:{},data:t}):(r=e&&e.sheetId,i=typeof r===b?r.call(e,{hash:{},data:t}):r),o+=v(i)+'">\n        <a tabindex="-1" href="#">\n          ',(r=n.displayName)?i=r.call(e,{hash:{},data:t}):(r=e&&e.displayName,i=typeof r===b?r.call(e,{hash:{},data:t}):r),o+=v(i)+"\n          ",i=n["if"].call(e,e&&e.isJoin,{hash:{},inverse:y.noop,fn:y.program(9,u,t),data:t}),(i||0===i)&&(o+=i),o+="\n          ",i=n["if"].call(e,e&&e.isFormula,{hash:{},inverse:y.noop,fn:y.program(11,d,t),data:t}),(i||0===i)&&(o+=i),o+="\n        </a>\n      </li>\n      "}function u(){return'<i class="icon-fixed-width icon-fb-link"></i>'}function d(){return'<i class="icon-fixed-width icon-formula"></i>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var h,f,p,m="",g=n.helperMissing,v=this.escapeExpression,b="function",y=this;return m+='<li class="unhide-fields-menu metadata-access\n  ',h=n["if"].call(t,(h=t&&t.hiddenFields,null==h||h===!1?h:h.length),{hash:{},inverse:y.program(3,s,r),fn:y.program(1,o,r),data:r}),(h||0===h)&&(m+=h),m+='" ',h=n.unless.call(t,(h=t&&t.hiddenFields,null==h||h===!1?h:h.length),{hash:{},inverse:y.noop,fn:y.program(5,a,r),data:r}),(h||0===h)&&(m+=h),m+='>\n  <a tabindex="-1" href="#">\n    <i class="icon-fixed-width icon-eye-open"></i>\n    '+v((f=n.s||t&&t.s,p={hash:{},data:r},f?f.call(t,"unhide-fields",p):g.call(t,"s","unhide-fields",p)))+"\n  </a>\n  ",h=n["if"].call(t,(h=t&&t.hiddenFields,null==h||h===!1?h:h.length),{hash:{},inverse:y.noop,fn:y.program(7,l,r),data:r}),(h||0===h)&&(m+=h),m+="\n</li>\n\n"
})),Handlebars.registerPartial("idFieldMenuItems",Handlebars.template(function(e,t,n,i,r){function o(){return"icon-ok"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,l,c="",u="function",d=this.escapeExpression,h=this,f=n.helperMissing;return c+='<li class="toggle-name-field" data-key=',(a=n.key)?s=a.call(t,{hash:{},data:r}):(a=t&&t.key,s=typeof a===u?a.call(t,{hash:{},data:r}):a),c+=d(s)+'>\n  <a tabindex="-1" href="#">\n    <i class="icon-fixed-width ',s=n["if"].call(t,t&&t.hasName,{hash:{},inverse:h.noop,fn:h.program(1,o,r),data:r}),(s||0===s)&&(c+=s),c+='"></i>\n    <i class="icon-fixed-width">@</i>\n    '+d((a=n.s||t&&t.s,l={hash:{},data:r},a?a.call(t,"record-list-toggle-name",l):f.call(t,"s","record-list-toggle-name",l)))+"\n  </a>\n</li>\n"})),Handlebars.registerPartial("insertGroup",Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div class="insert-group-block full-width">\n  <i class="insert-group-button icon-plus-sign"></i>\n  <div class="insert-group-line"></div>\n</div>\n'})),Handlebars.registerPartial("joinBlock",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+="<a class='join-link' href=\"",(s=n.joinUrl)?o=s.call(t,{hash:{},data:r}):(s=t&&t.joinUrl,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'">',(s=n.joinUrl)?o=s.call(t,{hash:{},data:r}):(s=t&&t.joinUrl,o=typeof s===l?s.call(t,{hash:{},data:r}):s),(o||0===o)&&(a+=o),a+="</a>\n"})),Handlebars.registerPartial("joinOrganization",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a,l="",c=n.helperMissing,u=this.escapeExpression;return l+='<div class="join-organization">\n  <h3 class="join-title">\n    '+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"join-organization",a):c.call(t,"s","join-organization",a)))+"\n  </h3>\n  <p>",s=n.s||t&&t.s,a={hash:{},data:r},o=s?s.call(t,"join-organization-description",a):c.call(t,"s","join-organization-description",a),(o||0===o)&&(l+=o),l+='\n  <p>\n\n  <button class="btn btn-large join-organization-button">\n    '+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"join-organization",a):c.call(t,"s","join-organization",a)))+"\n  </button>\n</div>\n"})),Handlebars.registerPartial("joinTextInput",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l="function";return a+='<input type="text" class="join-link-input input-large" readonly value="',(s=n.joinLink)?o=s.call(t,{hash:{},data:r}):(s=t&&t.joinLink,o=typeof s===l?s.call(t,{hash:{},data:r}):s),(o||0===o)&&(a+=o),a+='">\n'})),Handlebars.registerPartial("link",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+='<a href="',(s=n.url)?o=s.call(t,{hash:{},data:r}):(s=t&&t.url,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'">',(s=n.text)?o=s.call(t,{hash:{},data:r}):(s=t&&t.text,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+"</a>\n"})),Handlebars.registerPartial("loadingSubsheets",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l=n.helperMissing,c=this.escapeExpression;return a+='<p class="loading-subsheets">'+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"loading",s):l.call(t,"s","loading",s)))+"</p>\n"})),Handlebars.registerPartial("logoutPopover",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a,l="",c="function",u=this.escapeExpression,d=n.helperMissing;return l+='<form class="logout-form" action="/logout" method="post">\n  <input type="hidden" name="_csrf" value="',(s=n.csrfToken)?o=s.call(t,{hash:{},data:r}):(s=t&&t.csrfToken,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'">\n  <button class="btn btn-primary logout">'+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"sign-out",a):d.call(t,"s","sign-out",a)))+"</button>\n</form>\n"})),Handlebars.registerPartial("missingLinkMenuItem",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+=' data-missing-source-cell="',(r=n.missingLinkSourceCell)?i=r.call(e,{hash:{},data:t}):(r=e&&e.missingLinkSourceCell,i=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=f(i)+'"'}function s(){return" disabled"}function a(){return" has-tooltip"}function l(e,t){var i,r,o="";return o+=' title="',(r=n.missingLinkTooltip)?i=r.call(e,{hash:{},data:t}):(r=e&&e.missingLinkTooltip,i=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=f(i)+'" '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var c,u,d="",h="function",f=this.escapeExpression,p=this;return d+="<li\n  ",c=n["if"].call(t,t&&t.missingLinkSourceCell,{hash:{},inverse:p.noop,fn:p.program(1,o,r),data:r}),(c||0===c)&&(d+=c),d+='\n  class="add-missing-links no-read-only no-cell-deselect',c=n.unless.call(t,t&&t.hasMissingLinks,{hash:{},inverse:p.noop,fn:p.program(3,s,r),data:r}),(c||0===c)&&(d+=c),c=n["if"].call(t,t&&t.missingLinkTooltip,{hash:{},inverse:p.noop,fn:p.program(5,a,r),data:r}),(c||0===c)&&(d+=c),d+='"\n  ',c=n["if"].call(t,t&&t.missingLinkTooltip,{hash:{},inverse:p.noop,fn:p.program(7,l,r),data:r}),(c||0===c)&&(d+=c),d+='>\n  <a tabindex="-1" href="#">\n    <i class="icon-fixed-width icon-fb-link"></i>\n    ',(u=n.missingLinkMessage)?c=u.call(t,{hash:{},data:r}):(u=t&&t.missingLinkMessage,c=typeof u===h?u.call(t,{hash:{},data:r}):u),d+=f(c)+"\n  </a>\n</li>\n"})),Handlebars.registerPartial("mobileIterator",Handlebars.template(function(e,t,n,i,r){function o(){return" missing-iterator"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,l,c="",u=this,d="function",h=this.escapeExpression,f=n.helperMissing;return c+='<div class="record-iterator">\n    <a class="previous-iterator iterator-link ',s=n.unless.call(t,t&&t.prevId,{hash:{},inverse:u.noop,fn:u.program(1,o,r),data:r}),(s||0===s)&&(c+=s),c+='" href="/records/',(a=n.prevId)?s=a.call(t,{hash:{},data:r}):(a=t&&t.prevId,s=typeof a===d?a.call(t,{hash:{},data:r}):a),c+=h(s)+'">\n      '+h((a=n.icon||t&&t.icon,l={hash:{},data:r},a?a.call(t,"arrow-left",l):f.call(t,"icon","arrow-left",l)))+'\n    </a>\n    <a class="next-iterator iterator-link ',s=n.unless.call(t,t&&t.nextId,{hash:{},inverse:u.noop,fn:u.program(1,o,r),data:r}),(s||0===s)&&(c+=s),c+='" href="/records/',(a=n.nextId)?s=a.call(t,{hash:{},data:r}):(a=t&&t.nextId,s=typeof a===d?a.call(t,{hash:{},data:r}):a),c+=h(s)+'">\n      '+h((a=n.icon||t&&t.icon,l={hash:{},data:r},a?a.call(t,"arrow-right",l):f.call(t,"icon","arrow-right",l)))+"\n    </a>\n</div>\n"})),Handlebars.registerPartial("mobileRecordCell",Handlebars.template(function(e,t,n,i,r){function o(){return" error-cell "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,l="",c=this,u="function",d=this.escapeExpression;return l+='<div class="record-cell ',s=n["if"].call(t,t&&t.isError,{hash:{},inverse:c.noop,fn:c.program(1,o,r),data:r}),(s||0===s)&&(l+=s),l+='" data-field-key="',(a=n.fieldKey)?s=a.call(t,{hash:{},data:r}):(a=t&&t.fieldKey,s=typeof a===u?a.call(t,{hash:{},data:r}):a),l+=d(s)+'">\n  <div class="field-name">',(a=n.fieldHtml)?s=a.call(t,{hash:{},data:r}):(a=t&&t.fieldHtml,s=typeof a===u?a.call(t,{hash:{},data:r}):a),(s||0===s)&&(l+=s),l+='</div>\n  <div class="cell-value">',(a=n.valueHtml)?s=a.call(t,{hash:{},data:r}):(a=t&&t.valueHtml,s=typeof a===u?a.call(t,{hash:{},data:r}):a),(s||0===s)&&(l+=s),l+="</div>\n</div>\n"})),Handlebars.registerPartial("moveGroupItems",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o,a="";return a+='\n  <li class="group-menu dropdown-submenu no-read-only">\n    <a tabindex="-1" href="#"> <i class="icon-fixed-width icon-fb-group"></i> '+f((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"group-menu",o):p.call(e,"s","group-menu",o)))+' </a>\n    <ul class="dropdown-menu">\n      ',i=n.each.call(e,e&&e.values,{hash:{},inverse:m.noop,fn:m.programWithDepth(2,s,t,e),data:t}),(i||0===i)&&(a+=i),a+="\n    </ul>\n  </li>\n"}function s(e,t,i){var r,o,s="";return s+='\n        <li class="group-menu-value" data-key="'+f((r=i&&i.fieldKey,typeof r===h?r.apply(e):r))+'" data-value="',(o=n.val)?r=o.call(e,{hash:{},data:t}):(o=e&&e.val,r=typeof o===h?o.call(e,{hash:{},data:t}):o),s+=f(r)+'">\n          <a tabindex="-1" href="#">\n            <i class="icon-fixed-width ',r=n["if"].call(e,e&&e.selected,{hash:{},inverse:m.noop,fn:m.program(3,a,t),data:t}),(r||0===r)&&(s+=r),s+='"></i>\n            ',r=n["if"].call(e,e&&e.val,{hash:{},inverse:m.program(7,c,t),fn:m.program(5,l,t),data:t}),(r||0===r)&&(s+=r),s+="\n          </a>\n        </li>\n      "}function a(){return"icon-ok"}function l(e,t){var i,r,o="";return o+=" ",(r=n.val)?i=r.call(e,{hash:{},data:t}):(r=e&&e.val,i=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=f(i)+" "}function c(e,t){var i,r,o="";return o+=" "+f((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"default-group-name",r):p.call(e,"s","default-group-name",r)))+" "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var u,d="",h="function",f=this.escapeExpression,p=n.helperMissing,m=this;return u=n.each.call(t,t&&t.groups,{hash:{},inverse:m.noop,fn:m.program(1,o,r),data:r}),(u||0===u)&&(d+=u),d+="\n"})),Handlebars.registerPartial("nameConfigField",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+='<div class="name-config-field" data-key="',(s=n.key)?o=s.call(t,{hash:{},data:r}):(s=t&&t.key,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'">',(s=n.name)?o=s.call(t,{hash:{},data:r}):(s=t&&t.name,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+"</div>"})),Handlebars.registerPartial("nameFieldMenuItems",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r="";return r+="\n  ",i=n["if"].call(e,e&&e.slug,{hash:{},inverse:w.noop,fn:w.program(2,s,t),data:t}),(i||0===i)&&(r+=i),r+="\n"}function s(e,t){var i,r,o,s="";return s+='\n    <li class="search-field" data-key=',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===v?r.call(e,{hash:{},data:t}):r),s+=b(i)+'>\n      <a tabindex="-1" href="#"><i class="icon-fixed-width icon-fb-search"></i> '+b((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"search-field",o):y.call(e,"s","search-field",o)))+"</a>\n    </li>\n  "}function a(e,t){var i,r,o,s="";return s+='\n  <li class="sort-field" data-key=',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===v?r.call(e,{hash:{},data:t}):r),s+=b(i)+' data-sort-direction="asc">\n    <a tabindex="-1" href="#"><i class="icon-fixed-width icon-fb-sort-column"></i> '+b((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"sort-field-asc",o):y.call(e,"s","sort-field-asc",o)))+'</a>\n  </li>\n  <li class="sort-field" data-key=',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===v?r.call(e,{hash:{},data:t}):r),s+=b(i)+' data-sort-direction="desc">\n    <a tabindex="-1" href="#"><i class="icon-fixed-width icon-fb-sort-column-reverse"></i> '+b((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"sort-field-desc",o):y.call(e,"s","sort-field-desc",o)))+"</a>\n  </li>\n"}function l(){return"disabled has-tooltip"}function c(e,t){var i,r,o="";return o+='title="',(r=n.disableInputConfigReason)?i=r.call(e,{hash:{},data:t}):(r=e&&e.disableInputConfigReason,i=typeof r===v?r.call(e,{hash:{},data:t}):r),o+=b(i)+'"'}function u(e,t){var i,r,o="";return o+='title="',(r=n.disableRequiredReason)?i=r.call(e,{hash:{},data:t}):(r=e&&e.disableRequiredReason,i=typeof r===v?r.call(e,{hash:{},data:t}):r),o+=b(i)+'"'}function d(e,t){var i,r,o,s="";return s+='\n  <li class="divider metadata-access"></li>\n\n  <li class="configure-name metadata-access ',i=n["if"].call(e,e&&e.hasIntegration,{hash:{},inverse:w.noop,fn:w.program(6,l,t),data:t}),(i||0===i)&&(s+=i),s+='"\n    ',i=n["if"].call(e,e&&e.hasIntegration,{hash:{},inverse:w.noop,fn:w.program(13,h,t),data:t}),(i||0===i)&&(s+=i),s+='\n  >\n    <a href="#" tabindex="-1"><i class="icon-fixed-width icon-wrench"></i> '+b((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"configure-name",o):y.call(e,"s","configure-name",o)))+"</a>\n  </li>\n"}function h(e,t){var i,r,o="";return o+='title="'+b((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"disabled-reason-sheet-integration",r):y.call(e,"s","disabled-reason-sheet-integration",r)))+'"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var f,p,m,g="",v="function",b=this.escapeExpression,y=n.helperMissing,w=this;return f=n["if"].call(t,t&&t.showSearchFieldAction,{hash:{},inverse:w.noop,fn:w.program(1,o,r),data:r}),(f||0===f)&&(g+=f),g+="\n\n",f=n["if"].call(t,t&&t.showSortFieldAction,{hash:{},inverse:w.noop,fn:w.program(4,a,r),data:r}),(f||0===f)&&(g+=f),g+='\n\n<li class="divider metadata-access"></li>\n\n<li class="set-type metadata-access ',f=n["if"].call(t,t&&t.disableInputConfig,{hash:{},inverse:w.noop,fn:w.program(6,l,r),data:r}),(f||0===f)&&(g+=f),g+='" ',f=n["if"].call(t,t&&t.disableInputConfigReason,{hash:{},inverse:w.noop,fn:w.program(8,c,r),data:r}),(f||0===f)&&(g+=f),g+=" data-key=",(p=n.key)?f=p.call(t,{hash:{},data:r}):(p=t&&t.key,f=typeof p===v?p.call(t,{hash:{},data:r}):p),g+=b(f)+'>\n  <a tabindex="-1" href="#"><i class="icon-fixed-width icon-fb-settings"></i> '+b((p=n.s||t&&t.s,m={hash:{},data:r},p?p.call(t,"set-type",m):y.call(t,"s","set-type",m)))+'</a>\n</li>\n\n<li class="set-required metadata-access ',f=n["if"].call(t,t&&t.disableInputConfig,{hash:{},inverse:w.noop,fn:w.program(6,l,r),data:r}),(f||0===f)&&(g+=f),g+='" ',f=n["if"].call(t,t&&t.disableRequiredReason,{hash:{},inverse:w.noop,fn:w.program(10,u,r),data:r}),(f||0===f)&&(g+=f),g+=" data-key=",(p=n.key)?f=p.call(t,{hash:{},data:r}):(p=t&&t.key,f=typeof p===v?p.call(t,{hash:{},data:r}):p),g+=b(f)+'>\n  <a tabindex="-1" href="#"><i class="icon-fixed-width icon-asterisk"></i> '+b((p=n.s||t&&t.s,m={hash:{},data:r},p?p.call(t,"required-field",m):y.call(t,"s","required-field",m)))+' <i class="icon-fixed-width '+b((p=n.toggle||t&&t.toggle,m={hash:{},data:r},p?p.call(t,t&&t.required,"icon-ok",m):y.call(t,"toggle",t&&t.required,"icon-ok",m)))+'"></i></a>\n</li>\n\n<li class="insert-field metadata-access" data-key="',(p=n.key)?f=p.call(t,{hash:{},data:r}):(p=t&&t.key,f=typeof p===v?p.call(t,{hash:{},data:r}):p),g+=b(f)+'" data-direction="right">\n  <a tabindex="-1" href="#">\n    <i class="icon-fixed-width icon-long-arrow-right"></i>\n    '+b((p=n.s||t&&t.s,m={hash:{},data:r},p?p.call(t,"insert-field-right",m):y.call(t,"s","insert-field-right",m)))+"\n  </a>\n</li>\n\n",f=n.unless.call(t,t&&t.hasFixed,{hash:{},inverse:w.noop,fn:w.program(12,d,r),data:r}),(f||0===f)&&(g+=f),g+="\n"})),Handlebars.registerPartial("navItemMenuItems",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+="\n      "+u((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"delete-form",r):c.call(e,"s","delete-form",r)))+"\n    "}function s(e,t){var i,r,o="";return o+="\n      "+u((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"delete-nav-item",r):c.call(e,"s","delete-nav-item",r)))+"\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var a,l="",c=n.helperMissing,u=this.escapeExpression,d=this;return l+='<li class="delete-nav-item">\n  <a tabindex="-1" href="#">\n    <i class="icon-fixed-width icon-fb-close"></i>\n    ',a=n["if"].call(t,t&&t.isForm,{hash:{},inverse:d.program(3,s,r),fn:d.program(1,o,r),data:r}),(a||0===a)&&(l+=a),l+="\n  </a>\n</li>\n"})),Handlebars.registerPartial("newApiKey",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a,l="",c=n.helperMissing,u=this.escapeExpression,d="function";return l+='<div class="api-key-once alert alert-block">\n  <h4>'+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"api-key-only-once-warning",a):c.call(t,"s","api-key-only-once-warning",a)))+"</h4>\n  <b>"+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"username",a):c.call(t,"s","username",a)))+":</b> <span class='api-username'>",(s=n.name)?o=s.call(t,{hash:{},data:r}):(s=t&&t.name,o=typeof s===d?s.call(t,{hash:{},data:r}):s),l+=u(o)+"</span><p>\n  <b>"+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"password",a):c.call(t,"s","password",a)))+":</b> <span class='api-password'>",(s=n.secret)?o=s.call(t,{hash:{},data:r}):(s=t&&t.secret,o=typeof s===d?s.call(t,{hash:{},data:r}):s),l+=u(o)+"</span>\n</div>\n"})),Handlebars.registerPartial("oauthBanner",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l=n.helperMissing,c=this.escapeExpression;return a+='<div class="oauth-banner banner">\n  <i class="icon icon-warning-sign"></i>\n  <span class="message">'+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"oauth-invalid-warning",s):l.call(t,"s","oauth-invalid-warning",s)))+'</span>\n  <button class="repair-integration btn btn-warning">'+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"repair-syncing-now",s):l.call(t,"s","repair-syncing-now",s)))+"</button>\n</div>\n"})),Handlebars.registerPartial("organizationAccessLevel",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o,l="";return l+='\n  <select class="select-access" data-user="',(r=n._id)?i=r.call(e,{hash:{},data:t}):(r=e&&e._id,i=typeof r===p?r.call(e,{hash:{},data:t}):r),l+=f(i)+'" ',r=n.compare||e&&e.compare,o={hash:{},inverse:m.noop,fn:m.program(2,s,t),data:t},i=r?r.call(e,e&&e._id,(i=e&&e.root,i=null==i||i===!1?i:i.user,null==i||i===!1?i:i._id),o):h.call(e,"compare",e&&e._id,(i=e&&e.root,i=null==i||i===!1?i:i.user,null==i||i===!1?i:i._id),o),(i||0===i)&&(l+=i),l+=">\n    ",i=n.each.call(e,(i=e&&e.root,null==i||i===!1?i:i.accessLevels),{hash:{},inverse:m.noop,fn:m.programWithDepth(4,a,t,e),data:t}),(i||0===i)&&(l+=i),l+="\n  </select>\n\n"}function s(){return"disabled"}function a(e,t,i){var r,o,s,a="";return a+='\n      <option\n        label="'+f((o=n.inflect||e&&e.inflect,s={hash:{},data:t},o?o.call(e,"capitalize",e,s):h.call(e,"inflect","capitalize",e,s)))+'"\n        class="access-option-'+f(typeof e===p?e.apply(e):e)+'"\n        value="'+f(typeof e===p?e.apply(e):e)+'"\n        ',o=n.compare||i&&i.compare,s={hash:{},inverse:m.noop,fn:m.program(5,l,t),data:t},r=o?o.call(e,i&&i.accessLevel,e,s):h.call(e,"compare",i&&i.accessLevel,e,s),(r||0===r)&&(a+=r),a+=">\n    "}function l(){return"selected"}function c(e,t){var i,r,o="";return o+="\n  "+f((i=n.inflect||e&&e.inflect,r={hash:{},data:t},i?i.call(e,"capitalize",e&&e.accessLevel,r):h.call(e,"inflect","capitalize",e&&e.accessLevel,r)))+"\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var u,d="",h=n.helperMissing,f=this.escapeExpression,p="function",m=this;return u=n["if"].call(t,(u=t&&t.root,null==u||u===!1?u:u.adminAccess),{hash:{},inverse:m.program(7,c,r),fn:m.program(1,o,r),data:r}),(u||0===u)&&(d+=u),d+="\n"})),Handlebars.registerPartial("organizationHeader",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n    <span class="separator"></span>\n    ',(r=n.domain)?i=r.call(e,{hash:{},data:t}):(r=e&&e.domain,i=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=f(i)+"\n  "}function s(e,t){var i,r,o,s="";return s+=" ",r=n.compare||e&&e.compare,o={hash:{},inverse:m.noop,fn:m.program(4,a,t),data:t},i=r?r.call(e,e&&e.plan,"basic",o):p.call(e,"compare",e&&e.plan,"basic",o),(i||0===i)&&(s+=i),s}function a(e,t){var i,r,o="";return o+='\n  <div class="alert alert-error">\n    <div>\n      '+f((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"restart-organization-description",r):p.call(e,"s","restart-organization-description",r)))+'\n    </div>\n    <div>\n      <button class="btn restart-subscription">Upgrade account</button>\n    </div>\n  </div>\n'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var l,c,u,d="",h="function",f=this.escapeExpression,p=n.helperMissing,m=this;return d+='<div class="org-header">\n  <span class="title">',(c=n.name)?l=c.call(t,{hash:{},data:r}):(c=t&&t.name,l=typeof c===h?c.call(t,{hash:{},data:r}):c),d+=f(l)+"</span>\n  ",l=n["if"].call(t,t&&t.domain,{hash:{},inverse:m.noop,fn:m.program(1,o,r),data:r}),(l||0===l)&&(d+=l),d+='\n\n  <span class="separator"></span>\n    <span class="active-users">\n      ',(c=n.activeUserCount)?l=c.call(t,{hash:{},data:r}):(c=t&&t.activeUserCount,l=typeof c===h?c.call(t,{hash:{},data:r}):c),d+=f(l)+" active "+f((c=n.pluralize||t&&t.pluralize,u={hash:{},data:r},c?c.call(t,"user",t&&t.activeUserCount,u):p.call(t,"pluralize","user",t&&t.activeUserCount,u)))+'\n    </span>\n  <span class="separator"></span>\n\n  <button class="refresh btn" title="Refresh"><i class="icon-refresh"></i></button>\n  <div class="refresh-spinner"></div>\n</div>\n\n',l=n["if"].call(t,t&&t.isAdmin,{hash:{},inverse:m.noop,fn:m.program(3,s,r),data:r}),(l||0===l)&&(d+=l),d+='\n\n<div class="invite-box '+f((c=n.toggleMatch||t&&t.toggleMatch,u={hash:{},data:r},c?c.call(t,t&&t.plan,"basic","hidden",u):p.call(t,"toggleMatch",t&&t.plan,"basic","hidden",u)))+'">\n  Invite people to join the organization with this link: <span class="join-link"></span>\n</div>\n'})),Handlebars.registerPartial("organizationTable",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r="";return r+="\n    <tbody>\n      ",i=n.each.call(e,e&&e.users,{hash:{},inverse:d.noop,fn:d.program(2,s,t),data:t}),(i||0===i)&&(r+=i),r+="\n    </tbody>\n  "}function s(e,t){var r,o,s,c="";return c+="\n        <tr ",r=n["if"].call(e,e&&e.inactive,{hash:{},inverse:d.noop,fn:d.program(3,a,t),data:t}),(r||0===r)&&(c+=r),c+='>\n          <td><img class = "profile-img" src="'+f((o=n.userImage||e&&e.userImage,s={hash:{},data:t},o?o.call(e,e,s):h.call(e,"userImage",e,s)))+'"></td>\n          <td class="user-name">',(o=n.name)?r=o.call(e,{hash:{},data:t}):(o=e&&e.name,r=typeof o===p?o.call(e,{hash:{},data:t}):o),c+=f(r)+'</td>\n          <td class="email"><a href="mailto:',(o=n.email)?r=o.call(e,{hash:{},data:t}):(o=e&&e.email,r=typeof o===p?o.call(e,{hash:{},data:t}):o),(r||0===r)&&(c+=r),c+='">',(o=n.email)?r=o.call(e,{hash:{},data:t}):(o=e&&e.email,r=typeof o===p?o.call(e,{hash:{},data:t}):o),c+=f(r)+'</a></td>\n          <td class="last-active">'+f((o=n.calendar||e&&e.calendar,s={hash:{},data:t},o?o.call(e,e&&e.lastActive,s):h.call(e,"calendar",e&&e.lastActive,s)))+" ",r=n.unless.call(e,e&&e.recentlyActive,{hash:{},inverse:d.noop,fn:d.program(5,l,t),data:t}),(r||0===r)&&(c+=r),c+='</td>\n          <td class="access-level">',r=d.invokePartial(i.organizationAccessLevel,"organizationAccessLevel",e,n,i,t),(r||0===r)&&(c+=r),c+="</td>\n        </tr>\n      "}function a(){return'class="inactive"'}function l(){return"(inactive)"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var c,u="",d=this,h=n.helperMissing,f=this.escapeExpression,p="function";return u+='<div class="user-table-spinner"></div>\n<table class="user-table">\n  <thead>\n    <th class="profile-image"></th>\n    <th class="name">Name</th>\n    <th class="email">Email</th>\n    <th class="last-active">Last active</th>\n    <th class="access-level">Access level</th>\n  </thead>\n\n  ',c=n["if"].call(t,t&&t.hasFetched,{hash:{},inverse:d.noop,fn:d.program(1,o,r),data:r}),(c||0===c)&&(u+=c),u+="\n</table>\n"})),Handlebars.registerPartial("recordAddField",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l=n.helperMissing,c=this.escapeExpression;return a+='<div class="link add-record-column">'+c((o=n.icon||t&&t.icon,s={hash:{},data:r},o?o.call(t,"addfield",s):l.call(t,"icon","addfield",s)))+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"add-record-column",s):l.call(t,"s","add-record-column",s)))+"</div>\n"})),Handlebars.registerPartial("recordIterator",Handlebars.template(function(e,t,n,i,r){function o(){return' disabled="true"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,l,c="",u="function",d=this.escapeExpression,h=this,f=n.helperMissing;return c+='<div class="record-iterator">\n  <div class="iterator-button prev-record" data-id="',(a=n.prevId)?s=a.call(t,{hash:{},data:r}):(a=t&&t.prevId,s=typeof a===u?a.call(t,{hash:{},data:r}):a),c+=d(s)+'"',s=n.unless.call(t,t&&t.prevId,{hash:{},inverse:h.noop,fn:h.program(1,o,r),data:r}),(s||0===s)&&(c+=s),c+=">"+d((a=n.icon||t&&t.icon,l={hash:{},data:r},a?a.call(t,"arrow-left",l):f.call(t,"icon","arrow-left",l)))+'</div>\n  <div class="iterator-label">\n    ',(a=n.number)?s=a.call(t,{hash:{},data:r}):(a=t&&t.number,s=typeof a===u?a.call(t,{hash:{},data:r}):a),c+=d(s)+" of ",(a=n.total)?s=a.call(t,{hash:{},data:r}):(a=t&&t.total,s=typeof a===u?a.call(t,{hash:{},data:r}):a),c+=d(s)+'\n  </div>\n  <div class="iterator-button next-record" data-id="',(a=n.nextId)?s=a.call(t,{hash:{},data:r}):(a=t&&t.nextId,s=typeof a===u?a.call(t,{hash:{},data:r}):a),c+=d(s)+'"',s=n.unless.call(t,t&&t.nextId,{hash:{},inverse:h.noop,fn:h.program(1,o,r),data:r}),(s||0===s)&&(c+=s),c+=">"+d((a=n.icon||t&&t.icon,l={hash:{},data:r},a?a.call(t,"arrow-right",l):f.call(t,"icon","arrow-right",l)))+"</div>\n</div>\n"})),Handlebars.registerPartial("recordLink",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+="\n    "+d((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"add-record",r):u.call(e,"s","add-record",r)))+"\n  "}function s(e,t){var i,r,o="";return o+="\n    "+d((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"view-record",r):u.call(e,"s","view-record",r)))+"\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var a,l,c="",u=n.helperMissing,d=this.escapeExpression,h="function",f=this;return c+='<a class="view-record" href="',(l=n.url)?a=l.call(t,{hash:{},data:r}):(l=t&&t.url,a=typeof l===h?l.call(t,{hash:{},data:r}):l),c+=d(a)+'">\n  ',a=n["if"].call(t,t&&t.temporary,{hash:{},inverse:f.program(3,s,r),fn:f.program(1,o,r),data:r}),(a||0===a)&&(c+=a),c+="\n</a>\n"})),Handlebars.registerPartial("recordListColumnHeader",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+='<th width="',(s=n.width)?o=s.call(t,{hash:{},data:r}):(s=t&&t.width,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'px">',(s=n.text)?o=s.call(t,{hash:{},data:r}):(s=t&&t.text,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+"</th>\n"})),Handlebars.registerPartial("recordMenuItems",Handlebars.template(function(e,t,n,i,r){function o(e,t){var r,o="";return o+="\n  ",r=b.invokePartial(i.moveGroupItems,"moveGroupItems",e,n,i,t),(r||0===r)&&(o+=r),o+='\n  <li class="divider"></li>\n'}function s(e,t){var i,r,o,s="";return s+='\n  <li class="insert-record-above ',i=n.unless.call(e,e&&e.canAddAndRemoveRows,{hash:{},inverse:b.noop,fn:b.program(4,a,t),data:t}),(i||0===i)&&(s+=i),s+='" data-id="',(r=n.id)?i=r.call(e,{hash:{},data:t}):(r=e&&e.id,i=typeof r===x?r.call(e,{hash:{},data:t}):r),s+=w(i)+'"\n    ',i=n["if"].call(e,e&&e.hasIntegration,{hash:{},inverse:b.noop,fn:b.program(6,l,t),data:t}),(i||0===i)&&(s+=i),s+='>\n    <a tabindex="-1" href="#"><i class="icon-fixed-width icon-long-arrow-up"></i> '+w((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"insert-record-above",o):y.call(e,"s","insert-record-above",o)))+'</a>\n  </li>\n\n  <li class="insert-record-below ',i=n.unless.call(e,e&&e.canAddAndRemoveRows,{hash:{},inverse:b.noop,fn:b.program(4,a,t),data:t}),(i||0===i)&&(s+=i),s+='" data-id="',(r=n.id)?i=r.call(e,{hash:{},data:t}):(r=e&&e.id,i=typeof r===x?r.call(e,{hash:{},data:t}):r),s+=w(i)+'"\n    ',i=n["if"].call(e,e&&e.hasIntegration,{hash:{},inverse:b.noop,fn:b.program(6,l,t),data:t}),(i||0===i)&&(s+=i),s+='>\n    <a tabindex="-1" href="#"><i class="icon-fixed-width icon-long-arrow-down"></i> '+w((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"insert-record-below",o):y.call(e,"s","insert-record-below",o)))+"</a>\n  </li>\n"}function a(){return"disabled has-tooltip"}function l(e,t){var i,r,o="";return o+='title="'+w((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"disabled-reason-sheet-integration",r):y.call(e,"s","disabled-reason-sheet-integration",r)))+'"'}function c(e,t){var i,r,o,s="";return s+='\n  <li class="unlink-record ',i=n["if"].call(e,e&&e.disabled,{hash:{},inverse:b.noop,fn:b.program(9,u,t),data:t}),(i||0===i)&&(s+=i),s+='">\n    <a tabindex="-1" href="#"><i class="icon-fixed-width icon-fb-unlink"></i> '+w((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"unlink-record",o):y.call(e,"s","unlink-record",o)))+"</a>\n  </li>\n"}function u(){return"disabled"}function d(){return"has-tooltip"}function h(){return" disabled has-tooltip"}function f(e,t){var i,r="";return r+=" ",i=n["if"].call(e,e&&e.hasIntegration,{hash:{},inverse:b.noop,fn:b.program(6,l,t),data:t}),(i||0===i)&&(r+=i),r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var p,m,g,v="",b=this,y=n.helperMissing,w=this.escapeExpression,x="function";return p=n["if"].call(t,t&&t.isGrouped,{hash:{},inverse:b.noop,fn:b.program(1,o,r),data:r}),(p||0===p)&&(v+=p),v+="\n",p=n.unless.call(t,t&&t.temporaryCid,{hash:{},inverse:b.noop,fn:b.program(3,s,r),data:r}),(p||0===p)&&(v+=p),v+="\n\n",p=n["if"].call(t,t&&t.isSubsheet,{hash:{},inverse:b.noop,fn:b.program(8,c,r),data:r}),(p||0===p)&&(v+=p),v+='\n\n<li class="clear-record ',p=n["if"].call(t,t&&t.disabled,{hash:{},inverse:b.noop,fn:b.program(9,u,r),data:r}),(p||0===p)&&(v+=p),v+=" ",p=n["if"].call(t,t&&t.hasIntegration,{hash:{},inverse:b.noop,fn:b.program(11,d,r),data:r}),(p||0===p)&&(v+=p),v+='" data-id="',(m=n.id)?p=m.call(t,{hash:{},data:r}):(m=t&&t.id,p=typeof m===x?m.call(t,{hash:{},data:r}):m),v+=w(p)+'" data-temporary-record-cid="',(m=n.temporaryCid)?p=m.call(t,{hash:{},data:r}):(m=t&&t.temporaryCid,p=typeof m===x?m.call(t,{hash:{},data:r}):m),v+=w(p)+'" ',p=n["if"].call(t,t&&t.hasIntegration,{hash:{},inverse:b.noop,fn:b.program(6,l,r),data:r}),(p||0===p)&&(v+=p),v+='>\n  <a tabindex="-1" href="#"><i class="icon-fixed-width icon-pencil"></i> '+w((m=n.s||t&&t.s,g={hash:{},data:r},m?m.call(t,"clear-record",g):y.call(t,"s","clear-record",g)))+'</a>\n</li>\n\n<li class="delete-record ',p=n.unless.call(t,t&&t.canAddAndRemoveRows,{hash:{},inverse:b.noop,fn:b.program(13,h,r),data:r}),(p||0===p)&&(v+=p),v+='" data-id="',(m=n.id)?p=m.call(t,{hash:{},data:r}):(m=t&&t.id,p=typeof m===x?m.call(t,{hash:{},data:r}):m),v+=w(p)+'" data-temporary-record-cid="',(m=n.temporaryCid)?p=m.call(t,{hash:{},data:r}):(m=t&&t.temporaryCid,p=typeof m===x?m.call(t,{hash:{},data:r}):m),v+=w(p)+'" ',p=n.unless.call(t,t&&t.canAddAndRemoveRows,{hash:{},inverse:b.noop,fn:b.program(15,f,r),data:r}),(p||0===p)&&(v+=p),v+='>\n  <a tabindex="-1" href="#"><i class="icon-fixed-width icon-fb-close"></i> '+w((m=n.s||t&&t.s,g={hash:{},data:r},m?m.call(t,"delete-record",g):y.call(t,"s","delete-record",g)))+"</a>\n</li>\n"})),Handlebars.registerPartial("recordNameMenuItems",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n  <li>\n    <a class="select-name-field" tabindex="-1" href="#">\n      '+m((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"select-name-field",r):p.call(e,"s","select-name-field",r)))+"\n    </a>\n  </li>\n"}function s(){return" icon-ok"}function a(e,t){var i,r,o="";return o+='\n      <span class="name-option-value">'+m((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"id",r):p.call(e,"s","id",r)))+"</span>\n    "}function l(e,t){var i,r,o,s="";return s+='\n      <span class="name-option-value">',(r=n.shortId)?i=r.call(e,{hash:{},data:t}):(r=e&&e.shortId,i=typeof r===g?r.call(e,{hash:{},data:t}):r),s+=m(i)+'</span>\n      <span class="name-option-field">('+m((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"id",o):p.call(e,"s","id",o)))+")</span>\n    "}function c(e,t,i){var r,o="";return o+='\n  <li class="name-option" data-key="'+m((r=e&&e.field,r=null==r||r===!1?r:r.key,typeof r===g?r.apply(e):r))+'">\n    <a tabindex="-1" href="#">\n      <i class="icon-fixed-width',r=n["if"].call(e,(r=e&&e.field,null==r||r===!1?r:r.isNameField),{hash:{},inverse:v.noop,fn:v.program(3,s,t),data:t}),(r||0===r)&&(o+=r),o+='"></i>\n      ',r=n["if"].call(e,i&&i.namesOnly,{hash:{},inverse:v.program(12,d,t),fn:v.program(10,u,t),data:t}),(r||0===r)&&(o+=r),o+="\n    </a>\n  </li>\n"
}function u(e){var t,n="";return n+='\n        <span class="name-option-value">'+m((t=e&&e.field,t=null==t||t===!1?t:t.name,typeof t===g?t.apply(e):t))+"</span>\n      "}function d(e,t){var i,r,o="";return o+='\n        <span class="name-option-value">',(r=n.displayValue)?i=r.call(e,{hash:{},data:t}):(r=e&&e.displayValue,i=typeof r===g?r.call(e,{hash:{},data:t}):r),o+=m(i)+'</span>\n        <span class="name-option-field">('+m((i=e&&e.field,i=null==i||i===!1?i:i.name,typeof i===g?i.apply(e):i))+")</span>\n      "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var h,f="",p=n.helperMissing,m=this.escapeExpression,g="function",v=this;return h=n["if"].call(t,t&&t.hasTitle,{hash:{},inverse:v.noop,fn:v.program(1,o,r),data:r}),(h||0===h)&&(f+=h),f+='\n\n<li class="name-option no-name">\n  <a tabindex="-1" href="#">\n    <i class="icon-fixed-width',h=n["if"].call(t,t&&t.noName,{hash:{},inverse:v.noop,fn:v.program(3,s,r),data:r}),(h||0===h)&&(f+=h),f+='"></i>\n    ',h=n["if"].call(t,t&&t.namesOnly,{hash:{},inverse:v.program(7,l,r),fn:v.program(5,a,r),data:r}),(h||0===h)&&(f+=h),f+="\n  </a>\n</li>\n\n",h=n.each.call(t,t&&t.options,{hash:{},inverse:v.noop,fn:v.programWithDepth(9,c,r,t),data:r}),(h||0===h)&&(f+=h),f+="\n"})),Handlebars.registerPartial("recordRow",Handlebars.template(function(e,t,n,i,r){function o(e,t){var r,o="";return o+="\n    <td>",r=l.invokePartial(i.value,"value",e,n,i,t),(r||0===r)&&(o+=r),o+="</td>\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var s,a="",l=this;return a+="<tr>\n  ",s=n.each.call(t,t,{hash:{},inverse:l.noop,fn:l.program(1,o,r),data:r}),(s||0===s)&&(a+=s),a+="\n</tr>\n"})),Handlebars.registerPartial("recordSaveButton",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l=n.helperMissing,c=this.escapeExpression;return a+='<div class="save">'+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"save",s):l.call(t,"s","save",s)))+"</div>\n"})),Handlebars.registerPartial("reorder",Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<i class="icon-reorder"></i>\n'})),Handlebars.registerPartial("reportFormulaFieldMenuItems",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a,l="",c="function",u=this.escapeExpression,d=n.helperMissing;return l+='<li class="edit-formula" data-key=',(s=n.key)?o=s.call(t,{hash:{},data:r}):(s=t&&t.key,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'>\n  <a tabindex="-1" href="#"><i class="icon-fixed-width">&fnof;</i> '+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"edit-report-formula",a):d.call(t,"s","edit-report-formula",a)))+'</a>\n</li>\n\n<li class="insert-column-before" data-key=',(s=n.key)?o=s.call(t,{hash:{},data:r}):(s=t&&t.key,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'>\n  <a tabindex="-1" href="#">\n    <i class="icon-fixed-width icon-long-arrow-left "></i>\n    '+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"insert-report-column-before",a):d.call(t,"s","insert-report-column-before",a)))+'\n  </a>\n</li>\n\n<li class="insert-column-after" data-key=',(s=n.key)?o=s.call(t,{hash:{},data:r}):(s=t&&t.key,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'>\n  <a tabindex="-1" href="#">\n    <i class="icon-fixed-width icon-long-arrow-right "></i>\n    '+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"insert-report-column-after",a):d.call(t,"s","insert-report-column-after",a)))+'\n  </a>\n</li>\n\n<li class="delete-field" data-key=',(s=n.key)?o=s.call(t,{hash:{},data:r}):(s=t&&t.key,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'>\n  <a tabindex="-1" href="#">\n    <i class="icon-fixed-width icon-fb-close"></i>\n    '+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"remove-report-column",a):d.call(t,"s","remove-report-column",a)))+"\n  </a>\n</li>\n"})),Handlebars.registerPartial("rowSortSurrogate",Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div class="fast-scroll sortable">\n  <div class="table-view">\n    <div class = "fast-record-list">\n      <div class = "fast-table">\n        <div class="table">\n          <table>\n            <tbody class = "body">\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'})),Handlebars.registerPartial("sheetDescription",Handlebars.template(function(e,t,n,i,r){function o(){return"read-only"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,l,c="",u="function",d=this.escapeExpression,h=this,f=n.helperMissing;return c+='<div class="description-',(a=n.expandType)?s=a.call(t,{hash:{},data:r}):(a=t&&t.expandType,s=typeof a===u?a.call(t,{hash:{},data:r}):a),c+=d(s)+" description-group ",s=n["if"].call(t,t&&t.metadataLocked,{hash:{},inverse:h.noop,fn:h.program(1,o,r),data:r}),(s||0===s)&&(c+=s),c+='">\n  <div class="sheet-description">'+d((a=n.linkify||t&&t.linkify,l={hash:{},data:r},a?a.call(t,t&&t.description,l):f.call(t,"linkify",t&&t.description,l)))+'</div>\n  <div class="change-controls">\n    '+d((a=n.icon||t&&t.icon,l={hash:{},data:r},a?a.call(t,"close close-action",l):f.call(t,"icon","close close-action",l)))+"\n    <div class='save-button'>"+d((a=n.s||t&&t.s,l={hash:{},data:r},a?a.call(t,"save",l):f.call(t,"s","save",l)))+"</div>\n  </div>\n</div>\n"})),Handlebars.registerPartial("sheetDescriptionIcon",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+="\n    "+d((i=n.icon||e&&e.icon,r={hash:{},data:t},i?i.call(e,"info-filled",r):u.call(e,"icon","info-filled",r)))+"\n  "}function s(e,t){var i;return i=n.unless.call(e,e&&e.metadataLocked,{hash:{},inverse:h.noop,fn:h.program(4,a,t),data:t}),i||0===i?i:""}function a(e,t){var i,r,o="";return o+="\n    "+d((i=n.icon||e&&e.icon,r={hash:{},data:t},i?i.call(e,"info-empty",r):u.call(e,"icon","info-empty",r)))+"\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var l,c="",u=n.helperMissing,d=this.escapeExpression,h=this;return c+='<div class="sheet-description-control">\n  ',l=n["if"].call(t,t&&t.hasDescription,{hash:{},inverse:h.program(3,s,r),fn:h.program(1,o,r),data:r}),(l||0===l)&&(c+=l),c+="\n</div>\n"})),Handlebars.registerPartial("sheetImportError",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l=n.helperMissing,c=this.escapeExpression;return a+='<div class="sheet-error">\n  <h2 class="error-title">'+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"sheet-import-error-title",s):l.call(t,"s","sheet-import-error-title",s)))+"</h2>\n  <p>"+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"sheet-import-error-message",s):l.call(t,"s","sheet-import-error-message",s)))+"</p>\n</div>\n"})),Handlebars.registerPartial("sheetMenuItems",Handlebars.template(function(e,t,n,i,r){function o(){return'<i class="icon-ok"></i>'}function s(){return"disabled has-tooltip"}function a(e,t){var i,r,o="";return o+='title="'+f((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"disabled-reason-sheet-integration",r):h.call(e,"s","disabled-reason-sheet-integration",r)))+'"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var l,c,u,d="",h=n.helperMissing,f=this.escapeExpression,p=this;return d+='<li class="wrap-text">\n  <a tabindex="-1" href="#">\n    <i class="icon-fixed-width icon-align-left"></i> '+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"wrap-text",u):h.call(t,"s","wrap-text",u)))+"\n    ",l=n["if"].call(t,t&&t.wrapText,{hash:{},inverse:p.noop,fn:p.program(1,o,r),data:r}),(l||0===l)&&(d+=l),d+="\n  </a>\n</li>\n\n",l=p.invokePartial(i.hiddenFieldsMenu,"hiddenFieldsMenu",t,n,i,r),(l||0===l)&&(d+=l),d+='\n\n<li class="delete-sheet ',l=n["if"].call(t,t&&t.hasIntegration,{hash:{},inverse:p.noop,fn:p.program(3,s,r),data:r}),(l||0===l)&&(d+=l),d+=' "\n  ',l=n["if"].call(t,t&&t.hasIntegration,{hash:{},inverse:p.noop,fn:p.program(5,a,r),data:r}),(l||0===l)&&(d+=l),d+='>\n  <a tabindex="-1" href="#">\n    <i class="icon-fixed-width icon-fb-close"></i> '+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"delete-sheet",u):h.call(t,"s","delete-sheet",u)))+"\n  </a>\n</li>\n"})),Handlebars.registerPartial("sheetTab",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o,a="";return a+='\n      <li class="sheet-tab-item nav-item ',i=n["if"].call(e,e&&e.isReport,{hash:{},inverse:d.noop,fn:d.program(2,s,t),data:t}),(i||0===i)&&(a+=i),a+='" data-key="',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===h?r.call(e,{hash:{},data:t}):r),a+=f(i)+'">\n        <a class="nav-item-link" href="'+f((r=n.sheetUrl||e&&e.sheetUrl,o={hash:{},data:t},r?r.call(e,e&&e.shortUrl,o):p.call(e,"sheetUrl",e&&e.shortUrl,o)))+'">',(r=n.displayName)?i=r.call(e,{hash:{},data:t}):(r=e&&e.displayName,i=typeof r===h?r.call(e,{hash:{},data:t}):r),a+=f(i)+'</a>\n        <i class="menu-item icon icon-fb-down-open metadata-access" data-item-type="navItem"></i>\n      </li>\n    '}function s(){return"report-nav-item"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var a,l,c,u="",d=this,h="function",f=this.escapeExpression,p=n.helperMissing;return u+='<li class="sheet-tab existing-sheet ',(l=n.integrationClassName)?a=l.call(t,{hash:{},data:r}):(l=t&&t.integrationClassName,a=typeof l===h?l.call(t,{hash:{},data:r}):l),u+=f(a)+'" data-id="',(l=n._id)?a=l.call(t,{hash:{},data:r}):(l=t&&t._id,a=typeof l===h?l.call(t,{hash:{},data:r}):l),u+=f(a)+'">\n  <ul class="sheet-tab-items">\n    <li class="sheet-tab-item sheet-item">\n      <a class="sheet-link" href='+f((l=n.sheetUrl||t&&t.sheetUrl,c={hash:{},data:r},l?l.call(t,t&&t.url,c):p.call(t,"sheetUrl",t&&t.url,c)))+">",(l=n.displayTitle)?a=l.call(t,{hash:{},data:r}):(l=t&&t.displayTitle,a=typeof l===h?l.call(t,{hash:{},data:r}):l),u+=f(a)+'</a>\n      <i class="menu-item icon icon-fb-down-open metadata-access" data-item-type="sheet"></i>\n    </li>\n    ',a=n.each.call(t,t&&t.navItems,{hash:{},inverse:d.noop,fn:d.program(1,o,r),data:r}),(a||0===a)&&(u+=a),u+="\n  </ul>\n</li>\n"})),Handlebars.registerPartial("summaryCell",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+='<span class="summary"><span class="summary-name">',(s=n.displayName)?o=s.call(t,{hash:{},data:r}):(s=t&&t.displayName,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'</span><span class="summary-value">',(s=n.summaryValue)?o=s.call(t,{hash:{},data:r}):(s=t&&t.summaryValue,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+"</span></span>\n"})),Handlebars.registerPartial("templateOptions",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n  <div class="btn template-option" data-id="',(r=n._id)?i=r.call(e,{hash:{},data:t}):(r=e&&e._id,i=typeof r===a?r.call(e,{hash:{},data:t}):r),o+=l(i)+'">\n    <h4>\n      ',(r=n.title)?i=r.call(e,{hash:{},data:t}):(r=e&&e.title,i=typeof r===a?r.call(e,{hash:{},data:t}):r),o+=l(i)+'\n    </h4>\n    <div class="subtitle">',(r=n.subtitle)?i=r.call(e,{hash:{},data:t}):(r=e&&e.subtitle,i=typeof r===a?r.call(e,{hash:{},data:t}):r),o+=l(i)+"</div>\n  </div>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a="function",l=this.escapeExpression,c=this;return s=n.each.call(t,t&&t.templates,{hash:{},inverse:c.noop,fn:c.program(1,o,r),data:r}),s||0===s?s:""})),Handlebars.registerPartial("uploadProgressOverlay",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+='<div class="upload-progress-overlay">\n  <div class="upload-info">\n    <div class="filename">\n      Uploading <span class="filename-only">',(s=n.filename)?o=s.call(t,{hash:{},data:r}):(s=t&&t.filename,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'</span>…\n    </div>\n    <div class="progress">\n      <div class="progress-fill progress"></div>\n    </div>\n  </div>\n</div>\n'})),Handlebars.registerPartial("value",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n    <p class="value image-value">\n      \n      <img src="',(r=n.imageUrl)?i=r.call(e,{hash:{},data:t}):(r=e&&e.imageUrl,i=typeof r===S?r.call(e,{hash:{},data:t}):r),o+=C(i)+'" onload="$(this).trigger(\'imageLoad\')">\n    </p>\n  '}function s(e,t){var i,r="";return r+='\n    <p\n      class="value\n        ',i=n["if"].call(e,e&&e.rightAligned,{hash:{},inverse:I.noop,fn:I.program(4,a,t),data:t}),(i||0===i)&&(r+=i),r+="\n        ",i=n["if"].call(e,e&&e.error,{hash:{},inverse:I.noop,fn:I.program(6,l,t),data:t}),(i||0===i)&&(r+=i),r+="\n        ",i=n["if"].call(e,e&&e.placeholder,{hash:{},inverse:I.noop,fn:I.program(8,c,t),data:t}),(i||0===i)&&(r+=i),r+='"\n      ',i=n["if"].call(e,e&&e.error,{hash:{},inverse:I.noop,fn:I.program(10,u,t),data:t}),(i||0===i)&&(r+=i),r+="\n    >",i=n["if"].call(e,e&&e.warning,{hash:{},inverse:I.noop,fn:I.program(12,d,t),data:t}),(i||0===i)&&(r+=i),i=n["if"].call(e,e&&e.links,{hash:{},inverse:I.program(26,w,t),fn:I.program(14,h,t),data:t}),(i||0===i)&&(r+=i),r+="</p>",i=n["if"].call(e,e&&e.showEditIcon,{hash:{},inverse:I.noop,fn:I.program(28,x,t),data:t}),(i||0===i)&&(r+=i),r}function a(){return"text-right"}function l(){return"error-value has-tooltip"}function c(){return"placeholder"}function u(e,t){var i,r,o="";return o+='\n        title="',(r=n.errorMessage)?i=r.call(e,{hash:{},data:t}):(r=e&&e.errorMessage,i=typeof r===S?r.call(e,{hash:{},data:t}):r),o+=C(i)+'"\n        data-placement="right"\n        data-toggle="tooltip"\n      '}function d(e,t){var i,r,o="";return o+='<i\n          class="icon-fixed-width warning icon-warning-sign name-field-warning has-tooltip"\n          title="',(r=n.warningMessage)?i=r.call(e,{hash:{},data:t}):(r=e&&e.warningMessage,i=typeof r===S?r.call(e,{hash:{},data:t}):r),o+=C(i)+'"\n        >\n        </i>'}function h(e,t){var i,r,o,s="";return r=n.join||e&&e.join,o={hash:{},inverse:I.noop,fn:I.programWithDepth(15,f,t,e),data:t},i=r?r.call(e,e&&e.links,", ",o):E.call(e,"join",e&&e.links,", ",o),(i||0===i)&&(s+=i),s}function f(e,t,i){var r,o="";return r=n["if"].call(e,e&&e.href,{hash:{},inverse:I.programWithDepth(21,v,t,i),fn:I.programWithDepth(16,p,t,i),data:t}),(r||0===r)&&(o+=r),o}function p(e,t,i){var r,o,s="";return s+="<a ",r=n["if"].call(e,e&&e.missing,{hash:{},inverse:I.program(19,g,t),fn:I.programWithDepth(17,m,t,i),data:t}),(r||0===r)&&(s+=r),s+=' href="',(o=n.href)?r=o.call(e,{hash:{},data:t}):(o=e&&e.href,r=typeof o===S?o.call(e,{hash:{},data:t}):o),s+=C(r)+'">',(o=n.text)?r=o.call(e,{hash:{},data:t}):(o=e&&e.text,r=typeof o===S?o.call(e,{hash:{},data:t}):o),s+=C(r)+"</a>"}function m(e,t,i){var r,o,s="";return s+='title="'+C((r=n.s||i&&i.s,o={hash:{targetTitle:i&&i.targetTitle},data:t},r?r.call(e,"value-link-missing-tooltip",o):E.call(e,"s","value-link-missing-tooltip",o)))+'" class="missing-link has-tooltip"'}function g(){return' class="ref-link"'}function v(e,t,i){var r,o,s="";return s+="<span ",r=n["if"].call(e,e&&e.missing,{hash:{},inverse:I.program(24,y,t),fn:I.programWithDepth(22,b,t,i),data:t}),(r||0===r)&&(s+=r),s+=">",(o=n.text)?r=o.call(e,{hash:{},data:t}):(o=e&&e.text,r=typeof o===S?o.call(e,{hash:{},data:t}):o),s+=C(r)+"</span>"}function b(e,t,i){var r,o,s="";return s+='class="missing-link has-tooltip" title="'+C((r=n.s||i&&i.s,o={hash:{targetTitle:i&&i.targetTitle},data:t},r?r.call(e,"value-link-missing-tooltip-no-add",o):E.call(e,"s","value-link-missing-tooltip-no-add",o)))+'"'}function y(){return'class="saving-link"'}function w(e,t){var i,r,o="";return o+=C((i=n.linkify||e&&e.linkify,r={hash:{},data:t},i?i.call(e,e&&e.text,r):E.call(e,"linkify",e&&e.text,r)))}function x(e,t){var i,r,o="";return o+='<div class="edit-icon nomobile">'+C((i=n.icon||e&&e.icon,r={hash:{},data:t},i?i.call(e,"arrow-down",r):E.call(e,"icon","arrow-down",r)))+"</div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var k,_="",S="function",C=this.escapeExpression,E=n.helperMissing,I=this;return _+='<div class="value-wrapper">\n  ',k=n["if"].call(t,t&&t.isImage,{hash:{},inverse:I.program(3,s,r),fn:I.program(1,o,r),data:r}),(k||0===k)&&(_+=k),_+="\n</div>\n"})),Handlebars.registerPartial("dropDown",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var o,s,a,l="",c="function",u=this.escapeExpression,d=n.helperMissing,h=this;return l+='<div class="dropdown auto-dropdown ',(s=n.menuClass)?o=s.call(t,{hash:{},data:r}):(s=t&&t.menuClass,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'">\n  <a href="#" data-toggle="dropdown" data-target="#" tabindex="-1">\n    '+u((s=n.icon||t&&t.icon,a={hash:{},data:r},s?s.call(t,t&&t.menuIcon,a):d.call(t,"icon",t&&t.menuIcon,a)))+'\n  </a>\n  <ul class="dropdown-menu ',(s=n.pull)?o=s.call(t,{hash:{},data:r}):(s=t&&t.pull,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'">\n    ',o=h.invokePartial(i.dropDownItems,"dropDownItems",t,n,i,r),(o||0===o)&&(l+=o),l+="\n  </ul>\n</div>\n"})),Handlebars.registerPartial("dropDownItems",Handlebars.template(function(e,t,n,i,r){function o(e,t,i){var r,o,c,p="";return p+="\n  <li\n  ",r=n["if"].call(e,e&&e.slug,{hash:{},inverse:R.noop,fn:R.program(2,s,t),data:t}),(r||0===r)&&(p+=r),p+='\n  class="\n    ',(o=n.cls)?r=o.call(e,{hash:{},data:t}):(o=e&&e.cls,r=typeof o===E?o.call(e,{hash:{},data:t}):o),p+=I(r)+"\n    "+I((r=i&&i.parentItemClass,typeof r===E?r.apply(e):r))+" \n    ",r=n["if"].call(e,e&&e.disabled,{hash:{},inverse:R.noop,fn:R.program(4,a,t),data:t}),(r||0===r)&&(p+=r),p+="\n    ",o=n.ifExists||e&&e.ifExists,c={hash:{},inverse:R.noop,fn:R.program(6,l,t),data:t},r=o?o.call(e,e&&e.items,c):T.call(e,"ifExists",e&&e.items,c),(r||0===r)&&(p+=r),p+="\n    ",r=n["if"].call(e,e&&e.tooltip,{hash:{},inverse:R.noop,fn:R.program(9,u,t),data:t}),(r||0===r)&&(p+=r),p+='\n  " ',r=n["if"].call(e,e&&e.tooltip,{hash:{},inverse:R.noop,fn:R.program(11,d,t),data:t}),(r||0===r)&&(p+=r),p+='>\n    <a tabindex="-1" href="#">\n      ',r=n["if"].call(e,e&&e.itemIconFa,{hash:{},inverse:R.program(15,f,t),fn:R.program(13,h,t),data:t}),(r||0===r)&&(p+=r),p+="\n      ",r=n["if"].call(e,e&&e.text,{hash:{},inverse:R.noop,fn:R.program(20,g,t),data:t}),(r||0===r)&&(p+=r),p+="\n      ",r=n["if"].call(e,e&&e.key,{hash:{},inverse:R.noop,fn:R.program(22,v,t),data:t}),(r||0===r)&&(p+=r),p+="\n      \n\n      ",r=n["if"].call(e,e&&e.checked,{hash:{},inverse:R.noop,fn:R.program(24,b,t),data:t}),(r||0===r)&&(p+=r),p+="\n      ",r=n["if"].call(e,i&&i.checkedIfSlugMatches,{hash:{},inverse:R.noop,fn:R.programWithDepth(26,y,t,i),data:t}),(r||0===r)&&(p+=r),p+="\n    </a>\n    ",r=n["if"].call(e,e&&e.items,{hash:{},inverse:R.noop,fn:R.program(29,x,t),data:t}),(r||0===r)&&(p+=r),p+="\n  </li>\n"}function s(e,t){var i,r,o="";return o+='data-slug="',(r=n.slug)?i=r.call(e,{hash:{},data:t}):(r=e&&e.slug,i=typeof r===E?r.call(e,{hash:{},data:t}):r),o+=I(i)+'"'}function a(){return"\n      disabled\n    "}function l(e,t){var i,r="";return r+="\n      dropdown-submenu\n      ",i=n.unless.call(e,(i=e&&e.items,null==i||i===!1?i:i.length),{hash:{},inverse:R.noop,fn:R.program(7,c,t),data:t}),(i||0===i)&&(r+=i),r+="\n    "}function c(){var e="";return e+="\n        \n        disabled\n      "}function u(){return"\n      has-tooltip\n    "}function d(e,t){var i,r,o="";return o+='title="',(r=n.tooltip)?i=r.call(e,{hash:{},data:t}):(r=e&&e.tooltip,i=typeof r===E?r.call(e,{hash:{},data:t}):r),o+=I(i)+'" data-placement="right"'}function h(e,t){var i,r,o="";return o+='\n        <i class="icon icon-fixed-width icon-',(r=n.itemIconFa)?i=r.call(e,{hash:{},data:t}):(r=e&&e.itemIconFa,i=typeof r===E?r.call(e,{hash:{},data:t}):r),o+=I(i)+'"></i>\n      '}function f(e,t){var i,r="";return r+="\n        ",i=n["if"].call(e,e&&e.itemIcon,{hash:{},inverse:R.program(18,m,t),fn:R.program(16,p,t),data:t}),(i||0===i)&&(r+=i),r+="\n      "}function p(e,t){var i,r,o="";return o+='\n          <i class="icon icon-fixed-width icon-fb-',(r=n.itemIcon)?i=r.call(e,{hash:{},data:t}):(r=e&&e.itemIcon,i=typeof r===E?r.call(e,{hash:{},data:t}):r),o+=I(i)+'"></i>\n        '}function m(){return'\n          <i class="icon icon-fixed-width"></i>\n        '}function g(e,t){var i,r;return(r=n.text)?i=r.call(e,{hash:{},data:t}):(r=e&&e.text,i=typeof r===E?r.call(e,{hash:{},data:t}):r),I(i)}function v(e,t){var i,r;return I((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,e&&e.key,r):T.call(e,"s",e&&e.key,r)))}function b(e,t){var i,r;return I((i=n["icon-fa"]||e&&e["icon-fa"],r={hash:{},data:t},i?i.call(e,"ok",r):T.call(e,"icon-fa","ok",r)))}function y(e,t,i){var r,o,s,a="";return a+="\n        ",o=n.compare||e&&e.compare,s={hash:{},inverse:R.noop,fn:R.program(27,w,t),data:t},r=o?o.call(e,e&&e.slug,i&&i.checkedIfSlugMatches,s):T.call(e,"compare",e&&e.slug,i&&i.checkedIfSlugMatches,s),(r||0===r)&&(a+=r),a+="\n      "}function w(e,t){var i,r,o="";return o+="\n          "+I((i=n["icon-fa"]||e&&e["icon-fa"],r={hash:{},data:t},i?i.call(e,"ok",r):T.call(e,"icon-fa","ok",r)))+"\n        "}function x(e,t){var i;return i=n.unless.call(e,e&&e.disabled,{hash:{},inverse:R.noop,fn:R.programWithDepth(30,k,t,e),data:t}),i||0===i?i:""}function k(e,t,i){var r,o,s,a="";return a+='\n      <ul class="dropdown-menu">\n        ',o=n.include||i&&i.include,s={hash:{parentItemClass:i&&i.itemClass},inverse:R.noop,fn:R.program(31,_,t),data:t},r=o?o.call(e,s):T.call(e,"include",s),(r||0===r)&&(a+=r),a+="\n      </ul>\n    "}function _(e,t){var r,o="";return o+="\n          ",r=R.invokePartial(i.dropDownItems,"dropDownItems",e,n,i,t),(r||0===r)&&(o+=r),o+="\n        "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var S,C="",E="function",I=this.escapeExpression,R=this,T=n.helperMissing;return S=n.each.call(t,t&&t.items,{hash:{},inverse:R.noop,fn:R.programWithDepth(1,o,r,t),data:r}),(S||0===S)&&(C+=S),C+="\n"})),Handlebars.registerPartial("form",Handlebars.template(function(e,t,n,i,r){function o(e,t,i){var r,o,h,f="";return f+='\n      <div class="field control-group field-group-',(o=n.key)?r=o.call(e,{hash:{},data:t}):(o=e&&e.key,r=typeof o===V?o.call(e,{hash:{},data:t}):o),f+=F(r)+'" data-key="',(o=n.key)?r=o.call(e,{hash:{},data:t}):(o=e&&e.key,r=typeof o===V?o.call(e,{hash:{},data:t}):o),f+=F(r)+'">\n        <form>\n          ',o=n.ifAccess||e&&e.ifAccess,h={hash:{},inverse:L.noop,fn:L.program(2,s,t),data:t},r=o?o.call(e,"metadata",h):M.call(e,"ifAccess","metadata",h),(r||0===r)&&(f+=r),f+='\n\n          <label for="field-',(o=n.key)?r=o.call(e,{hash:{},data:t}):(o=e&&e.key,r=typeof o===V?o.call(e,{hash:{},data:t}):o),f+=F(r)+'" class="user-form-label control-label">\n            <span class="field-static-label\n\n              ',o=n.ifAccess||e&&e.ifAccess,h={hash:{},inverse:L.noop,fn:L.program(4,a,t),data:t},r=o?o.call(e,"metadata",h):M.call(e,"ifAccess","metadata",h),(r||0===r)&&(f+=r),f+='">\n              ',(o=n.label)?r=o.call(e,{hash:{},data:t}):(o=e&&e.label,r=typeof o===V?o.call(e,{hash:{},data:t}):o),f+=F(r)+'\n            </span>\n            <input type="text" class="hidden field-editable-label" value=',r=n["if"].call(e,e&&e.hasCustomLabel,{hash:{},inverse:L.program(8,c,t),fn:L.program(6,l,t),data:t}),(r||0===r)&&(f+=r),f+=">\n\n            ",r=n["if"].call(e,e&&e.required,{hash:{},inverse:L.noop,fn:L.program(10,u,t),data:t}),(r||0===r)&&(f+=r),f+="\n\n            ",r=n.unless.call(e,i&&i.external,{hash:{},inverse:L.noop,fn:L.programWithDepth(12,d,t,i),data:t}),(r||0===r)&&(f+=r),f+="\n\n          </label>\n\n          ",o=n.compare||e&&e.compare,h={hash:{},inverse:L.program(20,v,t),fn:L.program(17,m,t),data:t},r=o?o.call(e,e&&e.validation,"picklist",h):M.call(e,"compare",e&&e.validation,"picklist",h),(r||0===r)&&(f+=r),f+='\n          <span class="help-inline"></span>\n        </form>\n      </div>\n    '}function s(e,t){var i,r,o="";return o+="\n            "+F((i=n.icon||e&&e.icon,r={hash:{},data:t},i?i.call(e,"reorder sort-icon",r):M.call(e,"icon","reorder sort-icon",r)))+"\n          "}function a(){return"editable"}function l(e,t){var i,r,o="";return o+='"',(r=n.label)?i=r.call(e,{hash:{},data:t}):(r=e&&e.label,i=typeof r===V?r.call(e,{hash:{},data:t}):r),o+=F(i)+'"'}function c(){return'""'}function u(e,t){var i,r,o="";return o+="\n              "+F((i=n["icon-fa"]||e&&e["icon-fa"],r={hash:{},data:t},i?i.call(e,"asterisk field-required-icon",r):M.call(e,"icon-fa","asterisk field-required-icon",r)))+"\n            "}function d(e,t,i){var r,o,s,a="";return a+="\n              ",o=n.ifAccess||e&&e.ifAccess,s={hash:{},inverse:L.noop,fn:L.programWithDepth(13,h,t,i),data:t},r=o?o.call(e,"metadata",s):M.call(e,"ifAccess","metadata",s),(r||0===r)&&(a+=r),a+="\n            "}function h(e,t,i){var r,o,s,a="";return a+="\n                ",o=n.include||i&&i.include,s={hash:{parent:i},inverse:L.noop,fn:L.program(14,f,t),data:t},r=o?o.call(e,s):M.call(e,"include",s),(r||0===r)&&(a+=r),a+="\n              "}function f(e,t){var i,r,o,s="";return s+="\n                ",r=n.withData||e&&e.withData,o={hash:{},inverse:L.noop,fn:L.program(15,p,t),data:t},i=r?r.call(e,"{\n                  menuIcon: 'down-open menu-icon',\n                  menuClass: 'form-field-dropdown',\n                  pull: 'pull-left',\n                  items: [{\n                    text: 'Set type…',\n                    cls: 'set-type',\n                    itemIcon: 'settings',\n                    disabled: this.configRestrictions.disableInputConfigReason,\n                    tooltip: this.configRestrictions.disableInputConfigReason,\n                  }, {\n                    text: 'Required field',\n                    cls: 'toggle-required',\n                    itemIconFa: 'asterisk',\n                    disabled: this.configRestrictions.disableRequired,\n                    tooltip: this.configRestrictions.disableRequiredReason,\n                    checked: this.required,\n                  }, {\n                    text: 'Allow multiline',\n                    cls: 'field-toggle-multiline',\n                    itemIconFa: 'align-left',\n                    disabled: !this.canSetMultiline,\n                    checked: this.size === 'long',\n                    tooltip: this.noMultilineReason,\n                  }, {\n                    text: 'Hide field from this form',\n                    cls: 'remove-field',\n                    itemIconFa: 'eye-close',\n                    disabled: this.parent.fields.length === 1,\n                  }, {\n                    text: 'Show fields…',\n                    cls: 'add-field-submenu',\n                    itemIconFa: 'eye-open',\n                    items: this.parent.addFieldItems,\n                    tooltip: this.parent.noAddFieldReason,\n                  }]\n                }",o):M.call(e,"withData","{\n                  menuIcon: 'down-open menu-icon',\n                  menuClass: 'form-field-dropdown',\n                  pull: 'pull-left',\n                  items: [{\n                    text: 'Set type…',\n                    cls: 'set-type',\n                    itemIcon: 'settings',\n                    disabled: this.configRestrictions.disableInputConfigReason,\n                    tooltip: this.configRestrictions.disableInputConfigReason,\n                  }, {\n                    text: 'Required field',\n                    cls: 'toggle-required',\n                    itemIconFa: 'asterisk',\n                    disabled: this.configRestrictions.disableRequired,\n                    tooltip: this.configRestrictions.disableRequiredReason,\n                    checked: this.required,\n                  }, {\n                    text: 'Allow multiline',\n                    cls: 'field-toggle-multiline',\n                    itemIconFa: 'align-left',\n                    disabled: !this.canSetMultiline,\n                    checked: this.size === 'long',\n                    tooltip: this.noMultilineReason,\n                  }, {\n                    text: 'Hide field from this form',\n                    cls: 'remove-field',\n                    itemIconFa: 'eye-close',\n                    disabled: this.parent.fields.length === 1,\n                  }, {\n                    text: 'Show fields…',\n                    cls: 'add-field-submenu',\n                    itemIconFa: 'eye-open',\n                    items: this.parent.addFieldItems,\n                    tooltip: this.parent.noAddFieldReason,\n                  }]\n                }",o),(i||0===i)&&(s+=i),s}function p(e,t){var r,o="";return o+=" ",r=L.invokePartial(i.dropDown,"dropDown",e,n,i,t),(r||0===r)&&(o+=r),o+=" "}function m(e,t){var i,r,o,s="";return s+='\n            <select id="field-',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===V?r.call(e,{hash:{},data:t}):r),s+=F(i)+'" name="',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===V?r.call(e,{hash:{},data:t}):r),s+=F(i)+'" class="user-form-input">\n              <option value="">'+F((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"form-picklist-prompt",o):M.call(e,"s","form-picklist-prompt",o)))+"</option>\n              ",i=n.each.call(e,e&&e["enum"],{hash:{},inverse:L.noop,fn:L.program(18,g,t),data:t}),(i||0===i)&&(s+=i),s+="\n            </select>\n\n          "}function g(e){var t="";return t+='\n                <option value="'+F(typeof e===V?e.apply(e):e)+'">'+F(typeof e===V?e.apply(e):e)+"</option>\n              "}function v(e,t){var i,r,o,s="";return r=n.compare||e&&e.compare,o={hash:{},inverse:L.program(23,y,t),fn:L.program(21,b,t),data:t},i=r?r.call(e,e&&e.validation,"image",o):M.call(e,"compare",e&&e.validation,"image",o),(i||0===i)&&(s+=i),r=n.compare||e&&e.compare,o={hash:{},inverse:L.noop,fn:L.program(30,_,t),data:t},i=r?r.call(e,e&&e.size,"long",o):M.call(e,"compare",e&&e.size,"long",o),(i||0===i)&&(s+=i),s}function b(e,t){var r,o="";return o+="\n            ",r=L.invokePartial(i.formImageInput,"formImageInput",e,n,i,t),(r||0===r)&&(o+=r),o+="\n          "}function y(e,t){var i,r,o,s="";return s+="\n\n            ",r=n.compare||e&&e.compare,o={hash:{},inverse:L.program(26,x,t),fn:L.program(24,w,t),data:t},i=r?r.call(e,e&&e.size,"long",o):M.call(e,"compare",e&&e.size,"long",o),(i||0===i)&&(s+=i),s+='\n                id="field-',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===V?r.call(e,{hash:{},data:t}):r),s+=F(i)+'" name="',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===V?r.call(e,{hash:{},data:t}):r),s+=F(i)+'" autocomplete="off" class="\n                  user-form-input\n                  size-',(r=n.size)?i=r.call(e,{hash:{},data:t}):(r=e&&e.size,i=typeof r===V?r.call(e,{hash:{},data:t}):r),s+=F(i)+"\n                  ",r=n.compare||e&&e.compare,o={hash:{},inverse:L.noop,fn:L.program(28,k,t),data:t},i=r?r.call(e,e&&e.type,"join",o):M.call(e,"compare",e&&e.type,"join",o),(i||0===i)&&(s+=i),s+='\n                " data-linked-sheet-index="',(r=n.linkedSheetIndex)?i=r.call(e,{hash:{},data:t}):(r=e&&e.linkedSheetIndex,i=typeof r===V?r.call(e,{hash:{},data:t}):r),s+=F(i)+'">'}function w(){return"\n                <textarea\n              "}function x(){return'\n                <input type="text"\n              '}function k(){return"\n                    join-field-input\n                  "}function _(){return"</textarea>"}function S(e,t){var i,r="";return r+="\n    ",i=n["if"].call(e,e&&e["public"],{hash:{},inverse:L.program(35,E,t),fn:L.program(33,C,t),data:t}),(i||0===i)&&(r+=i),r+="\n  "}function C(e,t){var i,r,o,s="";return s+='\n      <div class="external-form-link">\n        This form has been shared: <a class="view-external" href="',(r=n.formUrl)?i=r.call(e,{hash:{},data:t}):(r=e&&e.formUrl,i=typeof r===V?r.call(e,{hash:{},data:t}):r),s+=F(i)+'" target="_blank">View public form</a> or <a class="open-form-share">'+F((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"form-update-share",o):M.call(e,"s","form-update-share",o)))+"</a>\n      </div>\n    "
}function E(e,t){var i,r,o="";return o+='\n      <div class="external-form-link">\n        <a class="open-form-share">'+F((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"form-share-externally",r):M.call(e,"s","form-share-externally",r)))+"</a>\n      </div>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var I,R,T,A="",M=n.helperMissing,F=this.escapeExpression,V="function",L=this;return A+='<div class=\'user-form\'>\n  <div class="external-only">\n    <div class="title">\n      ',(R=n.title)?I=R.call(t,{hash:{},data:r}):(R=t&&t.title,I=typeof R===V?R.call(t,{hash:{},data:r}):R),A+=F(I)+'\n    </div>\n    <div class="description">',(R=n.description)?I=R.call(t,{hash:{},data:r}):(R=t&&t.description,I=typeof R===V?R.call(t,{hash:{},data:r}):R),A+=F(I)+'</div>\n  </div>\n  <div class="fields">\n\n    ',I=n.each.call(t,t&&t.fields,{hash:{},inverse:L.noop,fn:L.programWithDepth(1,o,r,t),data:r}),(I||0===I)&&(A+=I),A+='\n\n  </div>\n  <button class="btn save no-read-only" type="submit">\n    <span class="external-only">'+F((R=n.s||t&&t.s,T={hash:{},data:r},R?R.call(t,"forms-submit",T):M.call(t,"s","forms-submit",T)))+'</span>\n    <span class="no-external">'+F((R=n.s||t&&t.s,T={hash:{},data:r},R?R.call(t,"forms-save",T):M.call(t,"s","forms-save",T)))+'</span>\n  </button>\n  <button class="btn save-and-new no-external no-read-only">'+F((R=n.s||t&&t.s,T={hash:{},data:r},R?R.call(t,"forms-save-and-new",T):M.call(t,"s","forms-save-and-new",T)))+'</button>\n  <div class="form-validation-message">\n    '+F((R=n.s||t&&t.s,T={hash:{},data:r},R?R.call(t,"form-validation-message",T):M.call(t,"s","form-validation-message",T)))+"\n  </div>\n  ",I=n.unless.call(t,t&&t.external,{hash:{},inverse:L.noop,fn:L.program(32,S,r),data:r}),(I||0===I)&&(A+=I),A+="\n</div>\n"})),Handlebars.registerPartial("formImageInput",Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a,l="",c=n.helperMissing,u=this.escapeExpression,d="function";return l+='</form>\n<div class="form-image-input">\n  <div class="form-image-dropzone">\n    <img class="form-image-preview">\n    '+u((s=n["icon-fa"]||t&&t["icon-fa"],a={hash:{},data:r},s?s.call(t,"picture dropzone-icon",a):c.call(t,"icon-fa","picture dropzone-icon",a)))+'\n    <div class="dropzone-text no-mobile">\n      Drag image here or click to upload\n    </div>\n    <div class="dropzone-text only-mobile">\n      Tap to upload\n    </div>\n    <form enctype="multipart/form-data">\n      <input type="file" name="import" class="file-upload-input">\n    </form>\n    <div class="clear-image-button"></div>\n  </div>\n  <div class="form-image-url-container">\n    <div class="form-image-url-label">\n      Or enter URL:\n    </div>\n    <form>\n      <input type="text" id="field-',(s=n.key)?o=s.call(t,{hash:{},data:r}):(s=t&&t.key,o=typeof s===d?s.call(t,{hash:{},data:r}):s),l+=u(o)+'" name="',(s=n.key)?o=s.call(t,{hash:{},data:r}):(s=t&&t.key,o=typeof s===d?s.call(t,{hash:{},data:r}):s),l+=u(o)+'" autocomplete="off" class="\n        user-form-input\n        form-image-url\n      ">\n    </form>\n  </div>\n</div>\n<form>\n'})),Handlebars.registerPartial("templateList",Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n  <h2 class="category-title">',(r=n.categoryTitle)?i=r.call(e,{hash:{},data:t}):(r=e&&e.categoryTitle,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+"</h2>\n  ",i=n.each.call(e,e&&e.templates,{hash:{},inverse:h.noop,fn:h.program(2,s,t),data:t}),(i||0===i)&&(o+=i),o+="\n"}function s(e,t){var i,r,o="";return o+='\n    <a class="template" href="/templates/',(r=n.slug)?i=r.call(e,{hash:{},data:t}):(r=e&&e.slug,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+'">\n      <img class="template-thumbnail" src="',(r=n.screenshotThumbUrl)?i=r.call(e,{hash:{},data:t}):(r=e&&e.screenshotThumbUrl,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+'" srcset="',(r=n.screenshotThumbUrl)?i=r.call(e,{hash:{},data:t}):(r=e&&e.screenshotThumbUrl,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+" 1x, ",(r=n.screenshotThumb2xUrl)?i=r.call(e,{hash:{},data:t}):(r=e&&e.screenshotThumb2xUrl,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+' 2x">\n      <h2 class="template-title">',(r=n.title)?i=r.call(e,{hash:{},data:t}):(r=e&&e.title,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+'</h2>\n      <p class="subtitle">',(r=n.subtitle)?i=r.call(e,{hash:{},data:t}):(r=e&&e.subtitle,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+"</p>\n    </a>\n  "}function a(e,t){var i,r,o="";return o+='\n  <p class="loading">'+d((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"loading",r):f.call(e,"s","loading",r)))+"</p>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var l,c="",u="function",d=this.escapeExpression,h=this,f=n.helperMissing;return l=n.each.call(t,t&&t.categories,{hash:{},inverse:h.program(4,a,r),fn:h.program(1,o,r),data:r}),(l||0===l)&&(c+=l),c+="\n"})),this.Handlebars.templates.aggregateBox=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n  <li class="aggregate-item">\n    <span class="display-name">',(r=n.displayName)?i=r.call(e,{hash:{},data:t}):(r=e&&e.displayName,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+'</span>\n    <span class="value">'+d((i=e&&e.value,typeof i===u?i.apply(e):i))+"</span>\n  </li>\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,l,c="",u="function",d=this.escapeExpression,h=n.helperMissing,f=this;return c+="<h4 class>"+d((a=n.s||t&&t.s,l={hash:{},data:r},a?a.call(t,"selection",l):h.call(t,"s","selection",l)))+'</h4>\n\n<ul class="aggregate-list">\n  ',s=n.each.call(t,t&&t.aggregates,{hash:{},inverse:f.noop,fn:f.program(1,o,r),data:r}),(s||0===s)&&(c+=s),c+="\n</ul>\n"}),this.Handlebars.templates.apiAnonPrivate=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a,l="",c="function",u=this.escapeExpression,d=n.helperMissing;return l+='<p>\n  Public API access is disabled.\n</p>\n<p>\n  Sign up (or sign in) to make a copy of this book which you can then access with the API.\n</p>\n\n<div class="button-container">\n  <a href="/login?book=',(s=n.bookId)?o=s.call(t,{hash:{},data:r}):(s=t&&t.bookId,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'&init_api=1">\n    <button class="api-sign-in">'+u((s=n["icon-fa"]||t&&t["icon-fa"],a={hash:{},data:r},s?s.call(t,"signin",a):d.call(t,"icon-fa","signin",a)))+' Log in</button>\n  </a>\n\n  <a href="/signup?book=',(s=n.bookId)?o=s.call(t,{hash:{},data:r}):(s=t&&t.bookId,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'&init_api=1">\n    <button class="api-sign-up">'+u((s=n["icon-fa"]||t&&t["icon-fa"],a={hash:{},data:r},s?s.call(t,"user",a):d.call(t,"icon-fa","user",a)))+" Sign up</button>\n  </a>\n</div>\n"}),this.Handlebars.templates.apiAnonPublic=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a,l="",c="function",u=this.escapeExpression,d=n.helperMissing;return l+='<p>\n  Anonymous users have read-only access, so you can\'t make API calls that will write to it.\n</p>\n<p>\n  Sign up (or sign in) to make a copy of this book which you can then access with the API.\n</p>\n\n<div class="button-container">\n  <a href="/login?book=',(s=n.bookId)?o=s.call(t,{hash:{},data:r}):(s=t&&t.bookId,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'&init_api=1">\n    <button class="api-sign-in">'+u((s=n["icon-fa"]||t&&t["icon-fa"],a={hash:{},data:r},s?s.call(t,"signin",a):d.call(t,"icon-fa","signin",a)))+' Log in</button>\n  </a>\n\n  <a href="/signup?book=',(s=n.bookId)?o=s.call(t,{hash:{},data:r}):(s=t&&t.bookId,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'&init_api=1">\n    <button class="api-sign-up">'+u((s=n["icon-fa"]||t&&t["icon-fa"],a={hash:{},data:r},s?s.call(t,"user",a):d.call(t,"icon-fa","user",a)))+" Sign up</button>\n  </a>\n</div>\n"}),this.Handlebars.templates.apiExampleCreate=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var o,s,a="",l=this,c="function",u=this.escapeExpression;return o=l.invokePartial(i.apiExampleBoilerplate,"apiExampleBoilerplate",t,n,i,r),(o||0===o)&&(a+=o),a+="\nvar url = baseUrl + '/",(s=n.sheetSlug)?o=s.call(t,{hash:{},data:r}):(s=t&&t.sheetSlug,o=typeof s===c?s.call(t,{hash:{},data:r}):s),a+=u(o)+"';\nvar record = {\n    // Set attributes for new record here\n};\nvar response = await requestify.post(url, record, options);\nJSON.parse(response.body);\n"}),this.Handlebars.templates.apiExampleDelete=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var o,s,a="",l=this,c="function",u=this.escapeExpression;return o=l.invokePartial(i.apiExampleBoilerplate,"apiExampleBoilerplate",t,n,i,r),(o||0===o)&&(a+=o),a+="\nvar url = baseUrl + '/",(s=n.sheetSlug)?o=s.call(t,{hash:{},data:r}):(s=t&&t.sheetSlug,o=typeof s===c?s.call(t,{hash:{},data:r}):s),a+=u(o)+"/",(s=n.recordId)?o=s.call(t,{hash:{},data:r}):(s=t&&t.recordId,o=typeof s===c?s.call(t,{hash:{},data:r}):s),a+=u(o)+"';\nvar response = await requestify.delete(url, options);\nresponse.getCode(); // No response body, returns HTTP 204\n"}),this.Handlebars.templates.apiExampleGet=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var o,s,a="",l=this,c="function",u=this.escapeExpression;return o=l.invokePartial(i.apiExampleBoilerplate,"apiExampleBoilerplate",t,n,i,r),(o||0===o)&&(a+=o),a+="\nvar url = baseUrl + '/",(s=n.sheetSlug)?o=s.call(t,{hash:{},data:r}):(s=t&&t.sheetSlug,o=typeof s===c?s.call(t,{hash:{},data:r}):s),a+=u(o)+"/",(s=n.recordId)?o=s.call(t,{hash:{},data:r}):(s=t&&t.recordId,o=typeof s===c?s.call(t,{hash:{},data:r}):s),a+=u(o)+"';\nvar response = await requestify.get(url, options);\nJSON.parse(response.body);\n"}),this.Handlebars.templates.apiExampleList=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var o,s,a="",l=this,c="function",u=this.escapeExpression;return o=l.invokePartial(i.apiExampleBoilerplate,"apiExampleBoilerplate",t,n,i,r),(o||0===o)&&(a+=o),a+="\nvar url = baseUrl + '/",(s=n.sheetSlug)?o=s.call(t,{hash:{},data:r}):(s=t&&t.sheetSlug,o=typeof s===c?s.call(t,{hash:{},data:r}):s),a+=u(o)+"';\nvar response = await requestify.get(url, options);\nJSON.parse(response.body);\n"}),this.Handlebars.templates.apiExampleUpdate=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var o,s,a="",l=this,c="function",u=this.escapeExpression;return o=l.invokePartial(i.apiExampleBoilerplate,"apiExampleBoilerplate",t,n,i,r),(o||0===o)&&(a+=o),a+="\nvar url = baseUrl + '/",(s=n.sheetSlug)?o=s.call(t,{hash:{},data:r}):(s=t&&t.sheetSlug,o=typeof s===c?s.call(t,{hash:{},data:r}):s),a+=u(o)+"/",(s=n.recordId)?o=s.call(t,{hash:{},data:r}):(s=t&&t.recordId,o=typeof s===c?s.call(t,{hash:{},data:r}):s),a+=u(o)+"';\noptions.method = 'PATCH';\noptions.body = {\n  // Set attributes to update here.\n  // Omitted keys are untouched\n}\nvar response = await requestify.request(url, options);\nJSON.parse(response.body);\n"}),this.Handlebars.templates.apiExplorer=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r="";return r+="\n    ",i=n.each.call(e,e&&e.examples,{hash:{},inverse:f.noop,fn:f.program(2,s,t),data:t}),(i||0===i)&&(r+=i),r+="\n  "}function s(e,t){var i,r,o="";return o+='\n      <button class="example-button example-button-'+h(typeof e===d?e.apply(e):e)+'" data-example="'+h(typeof e===d?e.apply(e):e)+'">\n        ',(r=n.capitalize)?i=r.call(e,{hash:{},data:t}):(r=e&&e.capitalize,i=typeof r===d?r.call(e,{hash:{},data:t}):r),o+=h(i)+"\n      </button>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var a,l,c,u="",d="function",h=this.escapeExpression,f=this,p=n.helperMissing;return u+='<div class="example-buttons selected-',(l=n.selectedExample)?a=l.call(t,{hash:{},data:r}):(l=t&&t.selectedExample,a=typeof l===d?l.call(t,{hash:{},data:r}):l),u+=h(a)+'">\n  ',l=n.withData||t&&t.withData,c={hash:{},inverse:f.noop,fn:f.program(1,o,r),data:r},a=l?l.call(t,"{examples: [\n    'list',\n    'get',\n    'create',\n    'update',\n    'delete',\n  ]}",c):p.call(t,"withData","{examples: [\n    'list',\n    'get',\n    'create',\n    'update',\n    'delete',\n  ]}",c),(a||0===a)&&(u+=a),u+='\n</div>\n\n<p class="explorer-info">\n  This session will be available online at <a href="https://tonicdev.com" target="_blank">tonicdev.com</a>.\n  Read the <a href="https://github.com/fieldbook/api-docs" target="_blank">API documentation</a>\n</p>\n\n\n<div class="explorer-container">\n</div>\n'}),this.Handlebars.templates.apiRecognizedPrivate=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l=n.helperMissing,c=this.escapeExpression;return a+='<p>\n  You have read-only access to this book, and public API access is disabled.\n</p>\n<p>\n  Copy the book, and you can use the API with your copy:\n</p>\n\n<div class="button-container">\n  <button class="copy-book">'+c((o=n["icon-fa"]||t&&t["icon-fa"],s={hash:{},data:r},o?o.call(t,"copy",s):l.call(t,"icon-fa","copy",s)))+" Copy</button>\n</div>\n"}),this.Handlebars.templates.apiRecognizedPublic=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l=n.helperMissing,c=this.escapeExpression;return a+='<p>\n  You have read-only access to this book, so you can\'t make API calls that will write to it.\n</p>\n<p>\n  Copy the book, and you can make write calls to your copy:\n</p>\n\n<div class="button-container">\n  <button class="copy-book">'+c((o=n["icon-fa"]||t&&t["icon-fa"],s={hash:{},data:r},o?o.call(t,"copy",s):l.call(t,"icon-fa","copy",s)))+" Copy</button>\n</div>\n"}),this.Handlebars.templates.book=Handlebars.template(function(e,t,n,i,r){function o(){return"hidden-banner"}function s(){return'\n    <div class="book-nav nomobile"></div>\n  '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var a,l,c,u="",d=this,h="function",f=n.blockHelperMissing;return u+='<div class="oauth-banner-container banner-container ',a=n["if"].call(t,t&&t.hideOauthBanner,{hash:{},inverse:d.noop,fn:d.program(1,o,r),data:r}),(a||0===a)&&(u+=a),u+='">\n  ',a=d.invokePartial(i.oauthBanner,"oauthBanner",t,n,i,r),(a||0===a)&&(u+=a),u+='\n</div>\n\n<div class="book-container">\n  ',c={hash:{},inverse:d.noop,fn:d.program(3,s,r),data:r},(l=n.unlessMobile)?a=l.call(t,c):(l=t&&t.unlessMobile,a=typeof l===h?l.call(t,c):l),n.unlessMobile||(a=f.call(t,a,{hash:{},inverse:d.noop,fn:d.program(3,s,r),data:r})),(a||0===a)&&(u+=a),u+='\n\n  <div class=\'book-content\'>\n    <div class="submodel-content"></div>\n  </div>\n  <div class="code-container-placeholder"></div>\n</div>\n'}),this.Handlebars.templates.bookList=Handlebars.template(function(e,t,n,i,r){function o(){return'<div class="title-bar"></div>'}function s(e,t){var i,r,o="";return o+='\n        <div class="no-books-description">\n          '+p((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"mobile-no-book-options",r):f.call(e,"s","mobile-no-book-options",r)))+"\n        </div>\n      "}function a(e,t){var i,r,o="";return o+='\n        <div class="no-books-description">\n          '+p((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"no-book-options",r):f.call(e,"s","no-book-options",r)))+'\n        </div>\n\n        <div class="button start-button templates-button">\n          '+p((i=n.icon||e&&e.icon,r={hash:{},data:t},i?i.call(e,"templates",r):f.call(e,"icon","templates",r)))+"\n          "+p((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"get-started-template",r):f.call(e,"s","get-started-template",r)))+'\n        </div>\n\n        <div class="secondary-options">\n          <div class="clear-button import-csv-button">\n            '+p((i=n.icon||e&&e.icon,r={hash:{},data:t},i?i.call(e,"import",r):f.call(e,"icon","import",r)))+"\n            "+p((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"get-started-import-file",r):f.call(e,"s","get-started-import-file",r)))+'\n          </div>\n          <div class="clear-button create-book">\n            '+p((i=n.icon||e&&e.icon,r={hash:{},data:t},i?i.call(e,"blanksheet",r):f.call(e,"icon","blanksheet",r)))+"\n            "+p((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"get-started-create",r):f.call(e,"s","get-started-create",r)))+"\n          </div>\n        </div>\n      "}function l(e,t){var i,r,o="";return o+='\n      <form class="form-inline">\n        <button class="btn btn-danger test-errors" type="button"><i class="icon-bug"></i> '+p((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"test-errors",r):f.call(e,"s","test-errors",r)))+'</button>\n        <button class="btn btn-danger test-displayable-errors" type="button"><i class="icon-bug"></i> '+p((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"test-displayable-errors",r):f.call(e,"s","test-displayable-errors",r)))+'</button>\n        <button class="btn btn-danger test-silent-errors" type="button"><i class="icon-bug"></i> '+p((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"test-silent-errors",r):f.call(e,"s","test-silent-errors",r)))+'</button>\n        <button class="btn btn-danger test-log-only-errors" type="button"><i class="icon-bug"></i> '+p((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"test-log-only-errors",r):f.call(e,"s","test-log-only-errors",r)))+"</button>\n      </form>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var c,u,d,h="",f=n.helperMissing,p=this.escapeExpression,m=this,g="function",v=n.blockHelperMissing;return h+='<div class="book-list-container">\n  <div class="book-list-toolbar nomobile">\n    <div class="add-buttons-container">\n      <div class="add-buttons">\n        <div class="add-buttons-wrapper">\n          <button class="create-book">'+p((u=n["icon-fa"]||t&&t["icon-fa"],d={hash:{},data:r},u?u.call(t,"file-alt",d):f.call(t,"icon-fa","file-alt",d)))+' Blank book</button>\n          <a href="/templates"><button class="use-template">'+p((u=n.icon||t&&t.icon,d={hash:{},data:r},u?u.call(t,"templates",d):f.call(t,"icon","templates",d)))+' Use template</button></a>\n          <a href="/imports/csv"><button class="import-csv">'+p((u=n.icon||t&&t.icon,d={hash:{},data:r},u?u.call(t,"import",d):f.call(t,"icon","import",d)))+' Import CSV</button></a>\n        </div>\n      </div>\n      <button class="add-new-book" style="display: none;">Add New Book</button>\n    </div>\n  </div>\n  ',d={hash:{},inverse:m.noop,fn:m.program(1,o,r),data:r},(u=n.ifMobile)?c=u.call(t,d):(u=t&&t.ifMobile,c=typeof u===g?u.call(t,d):u),n.ifMobile||(c=v.call(t,c,{hash:{},inverse:m.noop,fn:m.program(1,o,r),data:r})),(c||0===c)&&(h+=c),h+='\n  <div class="book-list-content">\n    <div class="book-links"></div>\n\n    <div class="no-books" style="display: none;">\n      <div class="large-empty-book">\n        <img class="image" src="/img/dotted-sheet.svg">\n      </div>\n\n      <div class="no-books-message">\n        '+p((u=n.s||t&&t.s,d={hash:{},data:r},u?u.call(t,"no-books",d):f.call(t,"s","no-books",d)))+"\n      </div>\n\n      ",d={hash:{},inverse:m.program(5,a,r),fn:m.program(3,s,r),data:r},(u=n.ifMobile)?c=u.call(t,d):(u=t&&t.ifMobile,c=typeof u===g?u.call(t,d):u),n.ifMobile||(c=v.call(t,c,{hash:{},inverse:m.program(5,a,r),fn:m.program(3,s,r),data:r})),(c||0===c)&&(h+=c),h+="\n    </div>\n\n    ",c=n["if"].call(t,t&&t.testErrors,{hash:{},inverse:m.noop,fn:m.program(7,l,r),data:r}),(c||0===c)&&(h+=c),h+='\n\n    <div class="import-fallback" style="display: none;">\n      <form class="import-form fallback" enctype="multipart/form-data">\n        <input class="import-input" type="file" name="import">\n        <input type="hidden" name="_csrf" value="',(u=n.csrfToken)?c=u.call(t,{hash:{},data:r}):(u=t&&t.csrfToken,c=typeof u===g?u.call(t,{hash:{},data:r}):u),h+=p(c)+'">\n      </form>\n    </div>\n\n    <p class="tutorials-teaser">\n      '+p((u=n.s||t&&t.s,d={hash:{},data:r},u?u.call(t,"tutorials-teaser-prompt",d):f.call(t,"s","tutorials-teaser-prompt",d)))+'\n      <a href="http://docs.fieldbook.com/docs/what-is-fieldbook" target="_blank">'+p((u=n.s||t&&t.s,d={hash:{},data:r},u?u.call(t,"tutorials-teaser-link",d):f.call(t,"s","tutorials-teaser-link",d)))+"</a>\n    </p>\n  </div>\n</div>\n"}),this.Handlebars.templates.bookToolbar=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n    <div class="title-part">\n      ',i=n["if"].call(e,e&&e.parentUrl,{hash:{},inverse:v.noop,fn:v.program(2,s,t),data:t}),(i||0===i)&&(o+=i),(r=n.parent)?i=r.call(e,{hash:{},data:t}):(r=e&&e.parent,i=typeof r===m?r.call(e,{hash:{},data:t}):r),o+=g(i),i=n["if"].call(e,e&&e.parentUrl,{hash:{},inverse:v.noop,fn:v.program(4,a,t),data:t}),(i||0===i)&&(o+=i),o+="\n    </div>",i=n["if"].call(e,e&&e.child,{hash:{},inverse:v.noop,fn:v.program(6,l,t),data:t}),(i||0===i)&&(o+=i),o+="\n  "}function s(e,t){var i,r,o="";return o+='\n        <a href="',(r=n.parentUrl)?i=r.call(e,{hash:{},data:t}):(r=e&&e.parentUrl,i=typeof r===m?r.call(e,{hash:{},data:t}):r),o+=g(i)+'">\n      '}function a(){return"\n        </a>\n      "}function l(e,t){var i,r,o="";return o+='<span class="title-divider">/</span>\n      <div class="title-part">',(r=n.child)?i=r.call(e,{hash:{},data:t}):(r=e&&e.child,i=typeof r===m?r.call(e,{hash:{},data:t}):r),o+=g(i)+"</div>\n    "}function c(e,t){var i,r,o="";return o+='\n    <button class="link-tool '+g((i=n.untoggle||e&&e.untoggle,r={hash:{},data:t},i?i.call(e,e&&e.canLink,"cant-link",r):b.call(e,"untoggle",e&&e.canLink,"cant-link",r)))+'">\n       '+g((i=n.icon||e&&e.icon,r={hash:{},data:t},i?i.call(e,"link",r):b.call(e,"icon","link",r)))+" Link Sheets\n    </button>\n  "}function u(){return"api-shown"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var d,h,f,p="",m="function",g=this.escapeExpression,v=this,b=n.helperMissing;return p+='<div class="toolbar-title">\n  ',d=n["with"].call(t,t&&t.toolbarTitle,{hash:{},inverse:v.noop,fn:v.program(1,o,r),data:r}),(d||0===d)&&(p+=d),p+='\n</div>\n\n<div class="button-container nomobile">\n  ',d=n.unless.call(t,t&&t.isMetadataLocked,{hash:{},inverse:v.noop,fn:v.program(8,c,r),data:r}),(d||0===d)&&(p+=d),p+='\n\n  <button class="api-button ',d=n["if"].call(t,t&&t.apiShown,{hash:{},inverse:v.noop,fn:v.program(10,u,r),data:r}),(d||0===d)&&(p+=d),p+='">\n    '+g((h=n["icon-fa"]||t&&t["icon-fa"],f={hash:{},data:r},h?h.call(t,"code",f):b.call(t,"icon-fa","code",f)))+'API\n  </button>\n\n  <button class="share-book">\n    '+g((h=n.icon||t&&t.icon,f={hash:{},data:r},h?h.call(t,"share",f):b.call(t,"icon","share",f)))+" Share\n  </button>\n</div>\n"}),this.Handlebars.templates.bookUsers=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r="";return r+="\n  ",i=n["if"].call(e,e&&e.anonymousAccessAllowed,{hash:{},inverse:V.program(4,a,t),fn:V.program(2,s,t),data:t}),(i||0===i)&&(r+=i),r+="\n"}function s(e,t){var i,r,o="";return o+='\n    <span class="disable-share share-button">\n      '+F((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"disable-share-link",r):M.call(e,"s","disable-share-link",r)))+"\n    </span>\n  "}function a(e,t){var i,r,o="";return o+='\n    <span class="enable-share share-button">\n      '+F((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"get-share-link",r):M.call(e,"s","get-share-link",r)))+"\n    </span>\n  "}function l(e,t){var i,r,o="";return o+="\n        "+F((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"anonymous-access-on",r):M.call(e,"s","anonymous-access-on",r)))+"\n      "}function c(e,t){var i,r,o="";return o+="\n        "+F((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"anonymous-access-off",r):M.call(e,"s","anonymous-access-off",r)))+"\n      "}function u(e,t){var i,r,o="";return o+='\n    <input type="text" class="share-link-input input-xlarge" value="',(r=n.bookUrl)?i=r.call(e,{hash:{},data:t}):(r=e&&e.bookUrl,i=typeof r===L?r.call(e,{hash:{},data:t}):r),(i||0===i)&&(o+=i),o+='" readonly>\n  '}function d(e,t){var i,r,o="";return o+="\n    "+F((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"invite-people",r):M.call(e,"s","invite-people",r)))+"\n  "}function h(e,t){var i,r,o="";return o+="\n    "+F((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"editors",r):M.call(e,"s","editors",r)))+"\n  "}function f(e,t){var i,r="";return r+='\n  <ul class="user-list">\n    ',i=n.each.call(e,e&&e.sharedWith,{hash:{},inverse:V.noop,fn:V.programWithDepth(17,p,t,e),data:t}),(i||0===i)&&(r+=i),r+="\n  </ul>\n"}function p(e,t,i){var r,o,s,a="";return a+='\n      <li class="user',r=n["if"].call(e,e&&e.removed,{hash:{},inverse:V.noop,fn:V.program(18,m,t),data:t}),(r||0===r)&&(a+=r),a+='" data-book-user-id="',(o=n._id)?r=o.call(e,{hash:{},data:t}):(o=e&&e._id,r=typeof o===L?o.call(e,{hash:{},data:t}):o),a+=F(r)+'">\n        <img class="user-image" src='+F((o=n.userImage||e&&e.userImage,s={hash:{},data:t},o?o.call(e,e&&e.user,s):M.call(e,"userImage",e&&e.user,s)))+'>\n\n        <div class="user-info">\n          ',r=n["if"].call(e,e&&e.isMissing,{hash:{},inverse:V.program(22,v,t),fn:V.program(20,g,t),data:t}),(r||0===r)&&(a+=r),a+='\n\n          <a href="#" class=\'access-level-button '+F((o=n.toggle||e&&e.toggle,s={hash:{},data:t},o?o.call(e,e&&e.isCreator,"disabled",s):M.call(e,"toggle",e&&e.isCreator,"disabled",s)))+" "+F((o=n.toggle||i&&i.toggle,s={hash:{},data:t},o?o.call(e,i&&i.metadataLocked,"disabled",s):M.call(e,"toggle",i&&i.metadataLocked,"disabled",s)))+'\'><span class="access-name">',(o=n.accessLevelName)?r=o.call(e,{hash:{},data:t}):(o=e&&e.accessLevelName,r=typeof o===L?o.call(e,{hash:{},data:t}):o),a+=F(r)+"</span>"+F((o=n["icon-fa"]||e&&e["icon-fa"],s={hash:{},data:t},o?o.call(e,"angle-down",s):M.call(e,"icon-fa","angle-down",s)))+"</a>\n        </div>\n\n        ",r=n["if"].call(e,i&&i.shareAccessEditable,{hash:{},inverse:V.noop,fn:V.program(24,b,t),data:t}),(r||0===r)&&(a+=r),a+="\n      </li>\n    "}function m(){return" removed"}function g(e,t){var i,r,o="";return o+='\n            <div class="name">',(r=n.placeholderEmail)?i=r.call(e,{hash:{},data:t}):(r=e&&e.placeholderEmail,i=typeof r===L?r.call(e,{hash:{},data:t}):r),o+=F(i)+" (invited)</div>\n          "}function v(e){var t,n="";return n+='\n            <div class="name">'+F((t=e&&e.user,t=null==t||t===!1?t:t.name,typeof t===L?t.apply(e):t))+'</div>\n            <div class="email">'+F((t=e&&e.user,t=null==t||t===!1?t:t.email,typeof t===L?t.apply(e):t))+"</div>\n          "}function b(e,t){var i,r="";return r+="\n          ",i=n["if"].call(e,e&&e.removed,{hash:{},inverse:V.program(27,w,t),fn:V.program(25,y,t),data:t}),(i||0===i)&&(r+=i),r+="\n        "}function y(e,t){var i,r,o="";return o+='\n            <span class="removed-user">\n              '+F((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"removed-user",r):M.call(e,"s","removed-user",r)))+' (<span class="restore-user link">'+F((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"restore-user",r):M.call(e,"s","restore-user",r)))+"</span>)\n            </span>\n          "}function w(e,t){var i,r="";return r+="\n            ",i=n["if"].call(e,e&&e.canDelete,{hash:{},inverse:V.noop,fn:V.program(28,x,t),data:t}),(i||0===i)&&(r+=i),r+="\n          "}function x(e,t){var i,r,o="";return o+="\n              "+F((i=n.icon||e&&e.icon,r={hash:{},data:t},i?i.call(e,"close remove-user",r):M.call(e,"icon","close remove-user",r)))+"\n            "}function k(e,t){var i,r,o,s="";return s+='\n  <form class="invite-form form-inline" onsubmit="return false;">\n    <input type="text" class="invite-input input-xlarge span5" placeholder="'+F((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"invite-placeholder",o):M.call(e,"s","invite-placeholder",o)))+'">\n    <a href="#" class=\'access-level-button\'><span class="access-name">',(r=n.inviteAccessLevel)?i=r.call(e,{hash:{},data:t}):(r=e&&e.inviteAccessLevel,i=typeof r===L?r.call(e,{hash:{},data:t}):r),s+=F(i)+"</span>"+F((r=n["icon-fa"]||e&&e["icon-fa"],o={hash:{},data:t},r?r.call(e,"angle-down",o):M.call(e,"icon-fa","angle-down",o)))+'</a></a>\n    <button type="submit" class="invite-button">'+F((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"invite-to-edit",o):M.call(e,"s","invite-to-edit",o)))+'</button>\n  </form>\n  <p class="error text-error"></p>\n\n'}function _(e,t){var i,r,o,s="";return s+="\n  <div class='sign-in-notice'>\n    "+F((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"on-list",o):M.call(e,"s","on-list",o)))+"\n    ",i=n["if"].call(e,e&&e.isLoggedIn,{hash:{},inverse:V.program(35,C,t),fn:V.program(33,S,t),data:t}),(i||0===i)&&(s+=i),s+="\n    "+F((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"invite-others",o):M.call(e,"s","invite-others",o)))+"\n  </div>\n"}function S(e,t){var i,r,o,s="";return s+='\n      <a class="switch-accounts-link" href="/logout?redirect=/books/',(r=n.bookId)?i=r.call(e,{hash:{},data:t}):(r=e&&e.bookId,i=typeof r===L?r.call(e,{hash:{},data:t}):r),s+=F(i)+'">'+F((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"switch-accounts",o):M.call(e,"s","switch-accounts",o)))+"</a>\n    "}function C(e,t){var i,r,o,s="";return s+='\n      <a class="log-in-link" href="/logout?redirect=/books/',(r=n.bookId)?i=r.call(e,{hash:{},data:t}):(r=e&&e.bookId,i=typeof r===L?r.call(e,{hash:{},data:t}):r),s+=F(i)+'">'+F((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"log-in",o):M.call(e,"s","log-in",o)))+"</a>\n    "}function E(e,t){var i,r,o="";return o+='\n\n      <li class="access-level-item" data-access-level="',(r=n.accessLevel)?i=r.call(e,{hash:{},data:t}):(r=e&&e.accessLevel,i=typeof r===L?r.call(e,{hash:{},data:t}):r),o+=F(i)+'">\n        <a href="#" role="menuitem" tabindex="-1">\n          ',(r=n.display)?i=r.call(e,{hash:{},data:t}):(r=e&&e.display,i=typeof r===L?r.call(e,{hash:{},data:t}):r),o+=F(i)+"\n        </a>\n      </li>\n\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var I,R,T,A="",M=n.helperMissing,F=this.escapeExpression,V=this,L="function";return A+='<p class="share-section-head">\n'+F((R=n.s||t&&t.s,T={hash:{},data:r},R?R.call(t,"shareable-link",T):M.call(t,"s","shareable-link",T)))+"\n\n",I=n["if"].call(t,t&&t.shareAccessEditable,{hash:{},inverse:V.noop,fn:V.program(1,o,r),data:r}),(I||0===I)&&(A+=I),A+='\n</p>\n<div class=\'shareable-link-block\'>\n  <div class="share-status-block">\n    <span class="share-status-message">\n      ',I=n["if"].call(t,t&&t.anonymousAccessAllowed,{hash:{},inverse:V.program(8,c,r),fn:V.program(6,l,r),data:r}),(I||0===I)&&(A+=I),A+="\n    </span>\n  </div>\n  ",I=n["if"].call(t,t&&t.anonymousAccessAllowed,{hash:{},inverse:V.noop,fn:V.program(10,u,r),data:r}),(I||0===I)&&(A+=I),A+='\n</div>\n\n<p class="share-section-head invite-section">\n  ',I=n["if"].call(t,t&&t.shareAccessEditable,{hash:{},inverse:V.program(14,h,r),fn:V.program(12,d,r),data:r}),(I||0===I)&&(A+=I),A+='\n</p>\n\n<p class="shared-people-description">',R=n.s||t&&t.s,T={hash:{},data:r},I=R?R.call(t,"shared-people-description",T):M.call(t,"s","shared-people-description",T),(I||0===I)&&(A+=I),A+="</p>\n",I=n["if"].call(t,t&&t.sharedWith,{hash:{},inverse:V.noop,fn:V.program(16,f,r),data:r}),(I||0===I)&&(A+=I),A+="\n\n",I=n["if"].call(t,t&&t.shareAccessEditable,{hash:{},inverse:V.program(32,_,r),fn:V.program(30,k,r),data:r}),(I||0===I)&&(A+=I),A+='\n\n<div class="access-level dropdown" style="position:fixed">\n  <div class="dropdown-toggle" data-toggle="dropdown"></div>\n  <ul class="dropdown-menu" role="menu">\n    ',I=n.each.call(t,t&&t.accessLevels,{hash:{},inverse:V.noop,fn:V.program(37,E,r),data:r}),(I||0===I)&&(A+=I),A+="\n  </ul>\n</div>\n"}),this.Handlebars.templates.cellEdit=Handlebars.template(function(e,t,n,i,r){function o(e,t){var r,o="";
return o+="\n  ",r=u.invokePartial(i.attachmentUpload,"attachmentUpload",e,n,i,t),(r||0===r)&&(o+=r),o+="\n"}function s(){return'\n  <div class="autocomplete-box"></div>\n'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var a,l,c="",u=this,d="function",h=this.escapeExpression;return c+='<textarea class="cell-edit-value">',(l=n.initialValue)?a=l.call(t,{hash:{},data:r}):(l=t&&t.initialValue,a=typeof l===d?l.call(t,{hash:{},data:r}):l),c+=h(a)+"</textarea>\n\n",a=n["if"].call(t,t&&t.upload,{hash:{},inverse:u.program(3,s,r),fn:u.program(1,o,r),data:r}),(a||0===a)&&(c+=a),c+="\n"}),this.Handlebars.templates.cellEditAutocomplete=Handlebars.template(function(e,t,n,i,r){function o(e){var t,n="";return n+='\n  <div class="completion">\n    ',t=typeof e===l?e.apply(e):e,(t||0===t)&&(n+=t),n+="\n  </div>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a="",l="function",c=this;return s=n.each.call(t,t&&t.completions,{hash:{},inverse:c.noop,fn:c.program(1,o,r),data:r}),(s||0===s)&&(a+=s),a+="\n"}),this.Handlebars.templates.clickToSelect=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a,l="",c="function",u=this.escapeExpression,d=n.helperMissing;return l+='<span class=\'click-block\'>\n  <input type="text" class="input-large" readonly value="',(s=n.text)?o=s.call(t,{hash:{},data:r}):(s=t&&t.text,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'">\n  '+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"click-to-select",a):d.call(t,"s","click-to-select",a)))+"\n</span>\n"}),this.Handlebars.templates.clipboardInterceptor=Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<textarea class="clipboard mousetrap">\n</textarea>\n'}),this.Handlebars.templates.code=Handlebars.template(function(e,t,n,i,r){function o(){return'\n      <div class="code-tab" data-mode="codelets">Codelets</div>\n    '}function s(){return'\n    <button class="manage-api metadata-access"><i class="icon-key"></i> Manage API access</button>\n  '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var a,l,c,u="",d=this,h=n.helperMissing,f=this.escapeExpression;return u+='\n\n<div class="header">\n  <span class="code-container-tabs">\n    <div class="code-tab" data-mode="explorer">API Explorer</div>\n    ',a=n["if"].call(t,t&&t.showCodelets,{hash:{},inverse:d.noop,fn:d.program(1,o,r),data:r}),(a||0===a)&&(u+=a),u+="\n  </span>\n  ",a=n.unless.call(t,t&&t.apiReadOnly,{hash:{},inverse:d.noop,fn:d.program(3,s,r),data:r}),(a||0===a)&&(u+=a),u+='\n  <div class="maximize">'+f((l=n.icon||t&&t.icon,c={hash:{},data:r},l?l.call(t,"plus",c):h.call(t,"icon","plus",c)))+'</div>\n  <div class="done">'+f((l=n.icon||t&&t.icon,c={hash:{},data:r},l?l.call(t,"close",c):h.call(t,"icon","close",c)))+"</div>\n</div>\n"}),this.Handlebars.templates.codeletPublicWarning=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a,l="",c="function",u=this.escapeExpression,d=n.helperMissing;return l+='<div class="modal-header">\n  <div  class="done" data-dismiss="modal"></div>\n  <h3 class="title">Make codelet public?</h3>\n</div>\n\n<div class="modal-body">\n<p>\n  Do you want to make the code for “'+u((o=t&&t.codelet,o=null==o||o===!1?o:o.title,typeof o===c?o.apply(t):o))+'” visible to anyone who can view this book?\n</p>\n<p class="warning">\n  You should not do this if the code contains sensitive information, like passwords.\n</p>\n</div>\n\n<div class="modal-footer action-buttons">\n  <button class="btn modal-cancel">'+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"cancel",a):d.call(t,"s","cancel",a)))+'</button>\n  <button class="btn modal-answer danger" data-answer="confirm">Make public</button>\n</div>\n'}),this.Handlebars.templates.codelets=Handlebars.template(function(e,t,n,i,r){function o(e){var t;return b((t=e&&e.codelet,t=null==t||t===!1?t:t.title,typeof t===v?t.apply(e):t))}function s(){return"readonly"}function a(e,t){var r,o="";return o+='\n  <div class="codelet-header-section">\n      <input value="'+b((r=e&&e.codelet,r=null==r||r===!1?r:r.endpointUrl,typeof r===v?r.apply(e):r))+'" type="text" class="codelet-url" readonly>\n      <div class="status-message"></div>\n  </div>\n\n  <div class="pane-container">\n    <div class="mirror-container">\n      <textarea class="code-mirror">'+b((r=e&&e.codelet,r=null==r||r===!1?r:r.draft,typeof r===v?r.apply(e):r))+'</textarea>\n    </div>\n\n    <div class="log-view hidden"></div>\n  </div>\n\n  ',r=y.invokePartial(i.codeletPrivileges,"codeletPrivileges",e,n,i,t),(r||0===r)&&(o+=r),o+='\n  <a href="https://github.com/fieldbook/api-docs/blob/master/codelets.md" target="_blank" class="docs-link">Read the Codelets Documentation</a>\n  <button class="btn toggle-log no-read-only">Logs</button>\n'}function l(e,t){var i,r="";return r+='\n  <div class="no-codelet">\n    ',i=n["if"].call(e,e&&e.readOnly,{hash:{},inverse:y.program(13,h,t),fn:y.program(8,c,t),data:t}),(i||0===i)&&(r+=i),r+="\n  </div>\n"}function c(e,t){var i,r="";return r+="\n      ",i=n["if"].call(e,e&&e.anon,{hash:{},inverse:y.program(11,d,t),fn:y.program(9,u,t),data:t}),(i||0===i)&&(r+=i),r+="\n    "}function u(e,t){var i,r,o="";return o+='\n        <div>\n          <p>\n            Only admins can add codelets.\n          </p>\n          <p>\n            <a href="/signup?book=',(r=n.bookId)?i=r.call(e,{hash:{},data:t}):(r=e&&e.bookId,i=typeof r===v?r.call(e,{hash:{},data:t}):r),o+=b(i)+'&init_codelets=1">Sign up</a>\n            (or <a href="/login?book=',(r=n.bookId)?i=r.call(e,{hash:{},data:t}):(r=e&&e.bookId,i=typeof r===v?r.call(e,{hash:{},data:t}):r),o+=b(i)+'&init_codelets=1">sign in</a>) to make a copy of this book you can add codelets to.\n          </p>\n        </div>\n      '}function d(){return'\n        <div>\n          Only admins can add codelets. If you\'d like to add a codelet, you can <a href="#" class="copy-book">copy the book</a>.\n        </div>\n      '}function h(){return'\n      <div>\n        You don\'t have any codelets.\n      </div>\n      <button class="new-codelet">New Codelet</button>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var f,p,m,g="",v="function",b=this.escapeExpression,y=this,w=n.helperMissing;return g+='<div class="codelet-toolbar">\n  ',f=y.invokePartial(i.codeletMenu,"codeletMenu",t,n,i,r),(f||0===f)&&(g+=f),g+='\n\n  <button class="btn codelet-new-button new-codelet no-read-only">New</button>\n  <button class="btn codelet-delete-button no-read-only">Delete</button>\n  <div class="title-field-container">\n    <input\n      type="text"\n      class="title-field '+b((p=n.untoggle||t&&t.untoggle,m={hash:{},data:r},p?p.call(t,t&&t.codelet,"hidden",m):w.call(t,"untoggle",t&&t.codelet,"hidden",m)))+'"\n      value="',f=n["if"].call(t,t&&t.codelet,{hash:{},inverse:y.noop,fn:y.program(1,o,r),data:r}),(f||0===f)&&(g+=f),g+='"\n      spellcheck="false"\n      ',f=n["if"].call(t,t&&t.readOnly,{hash:{},inverse:y.noop,fn:y.program(3,s,r),data:r}),(f||0===f)&&(g+=f),g+='\n    >\n    <div class="title-error"></div>\n  </div>\n  <button class="btn codelet-revert-button no-read-only">Revert</button>\n  <button class="btn codelet-deploy-button no-read-only">Publish</button>\n</div>\n\n',f=n["if"].call(t,t&&t.codelet,{hash:{},inverse:y.program(7,l,r),fn:y.program(5,a,r),data:r}),(f||0===f)&&(g+=f),g+="\n"}),this.Handlebars.templates.confirmLeave=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l=n.helperMissing,c=this.escapeExpression;return a+='<div class="modal-header">\n  <h3 class="title">'+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"confirm-leave-title",s):l.call(t,"s","confirm-leave-title",s)))+'</h3>\n</div>\n\n<div class="modal-body">\n  <p class="message">'+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"confirm-leave-message",s):l.call(t,"s","confirm-leave-message",s)))+'</p>\n</div>\n\n<div class="modal-footer">\n  <a href="#" class="btn btn-danger confirm-leave" data-dismiss="modal">'+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"confirm-leave",s):l.call(t,"s","confirm-leave",s)))+'</a>\n  <a href="#" class="btn btn cancel" data-dismiss="modal">'+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"cancel",s):l.call(t,"s","cancel",s)))+"</a>\n</div>\n"}),this.Handlebars.templates.createOrganization=Handlebars.template(function(e,t,n,i,r){function o(){return" disabled "}function s(){return"disabled"}function a(){return"checked"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var l,c,u,d="",h=n.helperMissing,f=this.escapeExpression,p=this;return d+='<div class="create-organization">\n  <h3 class="title">'+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"create-organization",u):h.call(t,"s","create-organization",u)))+"</h3>\n  <p>\n    "+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"create-organization-description",u):h.call(t,"s","create-organization-description",u)))+'\n  </p>\n\n  <div class="organization-name-block">\n    <p>\n      '+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"organization-name",u):h.call(t,"s","organization-name",u)))+'\n    </p>\n    <input class="org-name" type="text" required placeholder="'+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"company-or-team",u):h.call(t,"s","company-or-team",u)))+'"></input>\n    <div class="alert alert-error hidden blank-name-error">\n      <button type="button" class="close" data-dismiss="alert">&times;</button>\n      '+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"blank-org-name",u):h.call(t,"s","blank-org-name",u)))+'\n    </div>\n  </div>\n\n  <label class="checkbox ',l=n["if"].call(t,t&&t.disableAutoJoin,{hash:{},inverse:p.noop,fn:p.program(1,o,r),data:r}),(l||0===l)&&(d+=l),d+='">\n    <input type=\'checkbox\' class="auto-join" ',l=n["if"].call(t,t&&t.disableAutoJoin,{hash:{},inverse:p.program(5,a,r),fn:p.program(3,s,r),data:r}),(l||0===l)&&(d+=l),d+='><span class="auto-join-label">',c=n.s||t&&t.s,u={hash:{},data:r},l=c?c.call(t,"auto-join-organization",u):h.call(t,"s","auto-join-organization",u),(l||0===l)&&(d+=l),d+='</span>\n  </label>\n\n  <button class="btn btn-large upgrade-and-create">'+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"upgrade-and-create-organization",u):h.call(t,"s","upgrade-and-create-organization",u)))+'</button>\n  <p class="org-upgrade-detail">\n    '+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"create-organization-detail",u):h.call(t,"s","create-organization-detail",u)))+'\n    <a href="http://docs.fieldbook.com/docs/plans-and-pricing" target="_blank">'+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"create-organization-more-info",u):h.call(t,"s","create-organization-more-info",u)))+"</a>\n  </p>\n</div>\n"}),this.Handlebars.templates.csvImport=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+='<h1 class="title">Import CSV file</h1>\n<p class="subtitle">For CSV (Comma-Separated Values) files output by spreadsheet programs</p>\n\n<div class="drop-area">\n  <div class="drop-area-text">\n    <p class="drop-area-title">Drop files here</p>\n    <p class="drop-area-subtitle">(or click to choose from your computer)</p>\n  </div>\n\n  <form class="import-form fallback" enctype="multipart/form-data">\n    <input class="import-input" type="file" name="import">\n    <input type="hidden" name="_csrf" value="',(s=n.csrfToken)?o=s.call(t,{hash:{},data:r}):(s=t&&t.csrfToken,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'">\n  </form>\n</div>\n\n<p class="description">You can export a CSV file from any spreadsheet program: Choose a sheet and “Save as” or “Download as” CSV.</p>\n\n<p class="description">Tip: Make sure the first row of the file contains the column header names.</p>\n'}),this.Handlebars.templates.csvPreflight=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n      <button class="parse-option delimiter-option delimiter-',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=f(i),i=n["if"].call(e,e&&e.current,{hash:{},inverse:p.noop,fn:p.program(2,s,t),data:t}),(i||0===i)&&(o+=i),o+='" data-key="',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=f(i)+'">',(r=n.name)?i=r.call(e,{hash:{},data:t}):(r=e&&e.name,i=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=f(i)+"</button>\n    "}function s(){return" current"}function a(e,t){var i,r,o="";return o+='\n      <button class="parse-option encoding-option encoding-',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=f(i),i=n["if"].call(e,e&&e.current,{hash:{},inverse:p.noop,fn:p.program(2,s,t),data:t}),(i||0===i)&&(o+=i),o+='" data-key="',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=f(i)+'">',(r=n.name)?i=r.call(e,{hash:{},data:t}):(r=e&&e.name,i=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=f(i)+"</button>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var l,c,u,d="",h="function",f=this.escapeExpression,p=this,m=n.helperMissing;return d+='<div class="modal-header">\n  <h3 class="title">Does this look right?</h3>\n</div>\n\n<div class="modal-body">\n  <p class="message">\n    <span class="filename">'+f((l=t&&t.file,l=null==l||l===!1?l:l.name,typeof l===h?l.apply(t):l))+'</span>\n    <span class="count-display">\n      <span class="row-count"></span>,\n      <span class="col-count"></span>\n      <span class="cell-count"></span>\n    </span>\n  </p>\n  <p class="count-limits alert alert-error"></p>\n  <p class="problems">\n    <span class="problems-header">Problems?</span>\n    <button class="problem bad-chars" data-group="encoding">Text displaying incorrectly</button>\n    <button class="problem wrong-cols" data-group="delimiter">Wrong number of columns</button>\n  </p>\n  <div class="parse-option-group delimiter-group">\n    <span class="parse-option-header">Try a different delimiter:</span>\n    ',l=n.each.call(t,t&&t.delimiters,{hash:{},inverse:p.noop,fn:p.program(1,o,r),data:r}),(l||0===l)&&(d+=l),d+='\n  </div>\n  <div class="parse-option-group encoding-group">\n    <span class="parse-option-header">Try a different encoding:</span>\n    ',l=n.each.call(t,t&&t.encodings,{hash:{},inverse:p.noop,fn:p.program(4,a,r),data:r}),(l||0===l)&&(d+=l),d+='\n  </div>\n  <div class="fast-scroll-container"></div>\n</div>\n\n<div class="modal-footer">\n  <a href="#" class="btn btn-primary done">Upload it</a>\n  <a href="#" class="btn cancel" data-dismiss="modal">'+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"cancel",u):m.call(t,"s","cancel",u)))+"</a>\n</div>\n"}),this.Handlebars.templates.deleteCodeletModal=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a,l="",c="function",u=this.escapeExpression,d=n.helperMissing;return l+='<div class="modal-header">\n  <div  class="done" data-dismiss="modal"></div>\n  <h3 class="title">Delete codelet?</h3>\n</div>\n\n<div class="modal-body">\n  Permanently delete the codelet “'+u((o=t&&t.codelet,o=null==o||o===!1?o:o.title,typeof o===c?o.apply(t):o))+'”?\n</div>\n\n<div class="modal-footer action-buttons">\n  <button class="btn cancel-button" data-dismiss="modal">'+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"cancel",a):d.call(t,"s","cancel",a)))+'</button>\n  <button class="btn delete-button">'+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"delete",a):d.call(t,"s","delete",a)))+"</button>\n</div>\n"}),this.Handlebars.templates.dummyTable=Handlebars.template(function(e,t,n,i,r){function o(e,t,r){var o,s="";return s+="\n      ",o=l.invokePartial(i.dummyRow,"dummyRow",r,n,i,t),(o||0===o)&&(s+=o),s+="\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var s,a="",l=this;return a+="<table>\n  <thead>\n    ",s=l.invokePartial(i.dummyRow,"dummyRow",t,n,i,r),(s||0===s)&&(a+=s),a+="\n  </thead>\n  <tbody>\n    ",s=n.each.call(t,t&&t.rows,{hash:{},inverse:l.noop,fn:l.programWithDepth(1,o,r,t),data:r}),(s||0===s)&&(a+=s),a+="\n    ",s=l.invokePartial(i.dummyRow,"dummyRow",t,n,i,r),(s||0===s)&&(a+=s),a+="\n  </tbody>\n</table>\n"}),this.Handlebars.templates.emailConfirmModal=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a,l="",c=n.helperMissing,u=this.escapeExpression,d="function";return l+='<div class="modal-header">\n  <div  class="done" data-dismiss="modal"></div>\n  <h3 class="title">'+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"email-confirm-title",a):c.call(t,"s","email-confirm-title",a)))+'</h3>\n</div>\n<div class="modal-body">\n  '+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"email-confirm-description-",t&&t.descriptionKey,a):c.call(t,"s","email-confirm-description-",t&&t.descriptionKey,a)))+" (",(s=n.email)?o=s.call(t,{hash:{},data:r}):(s=t&&t.email,o=typeof s===d?s.call(t,{hash:{},data:r}):s),l+=u(o)+')\n  <div class="link-sent">\n    '+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"email-confirm-sent",a):c.call(t,"s","email-confirm-sent",a)))+'\n  </div>\n  <div class="has-verified">\n    '+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"email-confirm-success",a):c.call(t,"s","email-confirm-success",a)))+'\n  </div>\n</div>\n<div class="modal-footer action-buttons">\n  <div class="action-button resend-link">'+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"email-confirm-resend",a):c.call(t,"s","email-confirm-resend",a)))+'</div>\n  <div class="action-button complete disabled">'+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"email-confirm-complete",a):c.call(t,"s","email-confirm-complete",a)))+"</div>\n</div>\n"}),this.Handlebars.templates.emptyMobileRow=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l=n.helperMissing,c=this.escapeExpression;return a+='<div class="lazy-row empty-mobile-row">\n  <div class="record-name">\n    '+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"empty-mobile-row",s):l.call(t,"s","empty-mobile-row",s)))+"\n  </div>\n</div>\n"}),this.Handlebars.templates.errorAlert=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o,s="";return s+='\n    <span class="show-details link">'+p((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"details",o):f.call(e,"s","details",o)))+'</span>\n    <pre class="error-details well">',(r=n.report)?i=r.call(e,{hash:{},data:t}):(r=e&&e.report,i=typeof r===m?r.call(e,{hash:{},data:t}):r),s+=p(i)+"</pre>\n  "}function s(e,t){var i,r="";return r+='\n  <div class="modal-footer">\n    ',i=n["if"].call(e,e&&e.allowClose,{hash:{},inverse:g.noop,fn:g.program(4,a,t),data:t}),(i||0===i)&&(r+=i),r+="\n  </div>\n"}function a(e,t){var i,r,o="";return o+='<a href="#" class="btn btn-success cancel" data-dismiss="modal">'+p((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"ok",r):f.call(e,"s","ok",r)))+"</a>"}function l(e,t){var i,r,o,s="";return s+='\n  <div class="modal-footer">\n    ',i=n["if"].call(e,e&&e.allowClose,{hash:{},inverse:g.noop,fn:g.program(7,c,t),data:t}),(i||0===i)&&(s+=i),s+='\n    <a href="#" class="reload">'+p((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"reload",o):f.call(e,"s","reload",o)))+"</a>\n  </div>\n"}function c(e,t){var i,r,o="";return o+='<a href="#" class="cancel" data-dismiss="modal">'+p((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"cancel",r):f.call(e,"s","cancel",r)))+"</a>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var u,d,h="",f=n.helperMissing,p=this.escapeExpression,m="function",g=this;return h+='<div class="modal-body">\n  <i class="icon icon-warning-sign error-icon"></i>\n  <p class="error-message">',(d=n.message)?u=d.call(t,{hash:{},data:r}):(d=t&&t.message,u=typeof d===m?d.call(t,{hash:{},data:r}):d),h+=p(u)+"</p>\n  ",u=n["if"].call(t,t&&t.report,{hash:{},inverse:g.noop,fn:g.program(1,o,r),data:r}),(u||0===u)&&(h+=u),h+="\n</div>\n\n",u=n["if"].call(t,t&&t.displayable,{hash:{},inverse:g.program(6,l,r),fn:g.program(3,s,r),data:r}),(u||0===u)&&(h+=u),h+="\n"}),this.Handlebars.templates.eventbriteConfig=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l=n.helperMissing,c=this.escapeExpression;return a+='<div class="modal-header">\n  <button type="button" class="close" data-dismiss="modal">&times;</button>\n  <h3 class="title">Choose an event</h3>\n</div>\n\n<div class="modal-body modal-event-list">\n  <div class="spinner-container"></div>\n  <div class="event-container">\n  </div>\n</div>\n\n<div class="modal-footer">\n  '+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"not-seeing-correct-events",s):l.call(t,"s","not-seeing-correct-events",s)))+' <a class="reauth-eventbrite">'+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"reauth-eventbrite",s):l.call(t,"s","reauth-eventbrite",s)))+"</a>\n</div>\n"}),this.Handlebars.templates.eventbritePlugin=Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<h1 class="title">Sync Eventbrite attendees to Fieldbook</h1>\n<p class="subtitle">For conference organizers to track attendees and orders</p>\n\n<img class="logo" src="/img/eventbrite-logo.png">\n<i class="arrow icon-arrow-right"></i>\n<img class="logo" src="/img/fieldbook-logo.png">\n\n<div class="description">\n  <ul>\n    <li><b>Imports attendees and orders</b> into Fieldbook\'s spreadsheet UI</li>\n    <li><b>Custom questions / form fields</b> are included</li>\n    <li><b>Automatically updates</b> from Eventbrite; no re-downloading or re-importing</li>\n    <li><b>Reports</b> on ticket sales and survey results</li>\n  </ul>\n</div>\n\n<button class="use-plugin btn btn-large"><i class="icon-exchange"></i> Import an Event</button>\n'}),this.Handlebars.templates.fastRecordListView=Handlebars.template(function(e,t,n,i,r){function o(e,t){var r,o="";return o+="\n    ",r=p.invokePartial(i.insertGroup,"insertGroup",e,n,i,t),(r||0===r)&&(o+=r),o+='\n    <h3 class="record-list-header draggable">\n      <span class="record-list-title"\n        ',r=n["if"].call(e,e&&e.sheet,{hash:{},inverse:p.noop,fn:p.program(2,s,t),data:t}),(r||0===r)&&(o+=r),o+="\n        ",r=n["if"].call(e,e&&e.mirrorFieldKey,{hash:{},inverse:p.noop,fn:p.program(4,a,t),data:t}),(r||0===r)&&(o+=r),o+="></span>\n    </h3>\n    ",r=n["if"].call(e,e&&e.whereValue,{hash:{},inverse:p.noop,fn:p.program(6,l,t),data:t}),(r||0===r)&&(o+=r),o+="\n  "}function s(e){var t,n="";return n+='data-id="'+f((t=e&&e.sheet,t=null==t||t===!1?t:t.id,typeof t===h?t.apply(e):t))+'"'}function a(e,t){var i,r,o="";return o+='data-field-key="',(r=n.mirrorFieldKey)?i=r.call(e,{hash:{},data:t}):(r=e&&e.mirrorFieldKey,i=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=f(i)+'"'}function l(e,t){var i,r,o="";return o+='\n      <h4 class="record-list-subheader">\n        Where\n        <span class="display-name">',(r=n.whereField)?i=r.call(e,{hash:{},data:t}):(r=e&&e.whereField,i=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=f(i)+'</span><i class="icon-fb-link" data-toggle="tooltip" title="',(r=n.title)?i=r.call(e,{hash:{},data:t}):(r=e&&e.title,i=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=f(i)+" links to ",(r=n.parentSheetTitle)?i=r.call(e,{hash:{},data:t}):(r=e&&e.parentSheetTitle,i=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=f(i)+" through the ",(r=n.whereField)?i=r.call(e,{hash:{},data:t}):(r=e&&e.whereField,i=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=f(i)+' field"></i>\n        is <span class="display-name">',(r=n.whereValue)?i=r.call(e,{hash:{},data:t}):(r=e&&e.whereValue,i=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=f(i)+"</span>\n      </h4>\n    "}function c(){return'\n  <div class="header-spacer"></div>\n  '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var u,d="",h="function",f=this.escapeExpression,p=this;return d+='<div class="record-list-header-section stick-top full-width">\n  ',u=n["if"].call(t,t&&t.hasTitles,{hash:{},inverse:p.program(8,c,r),fn:p.program(1,o,r),data:r}),(u||0===u)&&(d+=u),d+="\n</div>\n"}),this.Handlebars.templates.fastScroll=Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div class="fast-scroll-content"></div>\n<div class="v-scroll-bar no-cell-deselect">\n  <div class="spacer"></div>\n</div>\n<div class="h-scroll-bar no-cell-deselect">\n  <div class="spacer"></div>\n</div>\n<div class="fast-scroll-corner"></div>\n'}),this.Handlebars.templates.fastTable=Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div class="table"></div>\n'}),this.Handlebars.templates.fastTableEditor=Handlebars.template(function(e,t,n,i,r){function o(){return"with-placeholder"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,l="",c="function",u=this.escapeExpression,d=this;return l+='<textarea class="',(a=n.extraClasses)?s=a.call(t,{hash:{},data:r}):(a=t&&t.extraClasses,s=typeof a===c?a.call(t,{hash:{},data:r}):a),l+=u(s)+" ",s=n["if"].call(t,t&&t.placeholder,{hash:{},inverse:d.noop,fn:d.program(1,o,r),data:r}),(s||0===s)&&(l+=s),l+='">',(a=n.initialValue)?s=a.call(t,{hash:{},data:r}):(a=t&&t.initialValue,s=typeof a===c?a.call(t,{hash:{},data:r}):a),l+=u(s)+"</textarea>\n"}),this.Handlebars.templates.fieldAutocomplete=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o,s="";return s+='\n  <li data-id="',(r=n.id)?i=r.call(e,{hash:{},data:t}):(r=e&&e.id,i=typeof r===l?r.call(e,{hash:{},data:t}):r),s+=c(i)+'"><i class="icon-fixed-width icon-fb-link"></i>'+c((r=n.inflect||e&&e.inflect,o={hash:{},data:t},r?r.call(e,"singularize",e&&e.title,o):u.call(e,"inflect","singularize",e&&e.title,o)))+" "+c((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"field-autocomplete-suffix",o):u.call(e,"s","field-autocomplete-suffix",o)))+"</li>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a="",l="function",c=this.escapeExpression,u=n.helperMissing,d=this;return s=n.each.call(t,t&&t.completions,{hash:{},inverse:d.noop,fn:d.program(1,o,r),data:r}),(s||0===s)&&(a+=s),a+="\n"}),this.Handlebars.templates.fieldTypeModal=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n      <li class="type-item ',i=n["if"].call(e,e&&e.active,{hash:{},inverse:g.noop,fn:g.program(2,s,t),data:t}),(i||0===i)&&(o+=i),o+='" data-slug="',(r=n.slug)?i=r.call(e,{hash:{},data:t}):(r=e&&e.slug,i=typeof r===p?r.call(e,{hash:{},data:t}):r),o+=m(i)+'">\n        <i class="icon icon-fixed-width ',i=n["if"].call(e,e&&e.oldIcon,{hash:{},inverse:g.noop,fn:g.program(4,a,t),data:t}),(i||0===i)&&(o+=i),o+=" ",i=n["if"].call(e,e&&e.iconName,{hash:{},inverse:g.noop,fn:g.program(6,l,t),data:t}),(i||0===i)&&(o+=i),o+='">',i=n["if"].call(e,e&&e.symbol,{hash:{},inverse:g.noop,fn:g.program(8,c,t),data:t}),(i||0===i)&&(o+=i),o+="</i>\n        ",(r=n.name)?i=r.call(e,{hash:{},data:t}):(r=e&&e.name,i=typeof r===p?r.call(e,{hash:{},data:t}):r),o+=m(i)+"\n      </li>\n    "}function s(){return"active"}function a(e,t){var i,r,o="";return o+="icon-",(r=n.oldIcon)?i=r.call(e,{hash:{},data:t}):(r=e&&e.oldIcon,i=typeof r===p?r.call(e,{hash:{},data:t}):r),o+=m(i)}function l(e,t){var i,r,o="";return o+="icon-fb-",(r=n.iconName)?i=r.call(e,{hash:{},data:t}):(r=e&&e.iconName,i=typeof r===p?r.call(e,{hash:{},data:t}):r),o+=m(i)}function c(e,t){var i,r;return(r=n.symbol)?i=r.call(e,{hash:{},data:t}):(r=e&&e.symbol,i=typeof r===p?r.call(e,{hash:{},data:t}):r),m(i)}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var u,d,h,f="",p="function",m=this.escapeExpression,g=this,v=n.helperMissing;return f+='<div class="modal-header">\n  <div  class="done" data-dismiss="modal"></div>\n  <h3 class="title">',(d=n.title)?u=d.call(t,{hash:{},data:r}):(d=t&&t.title,u=typeof d===p?d.call(t,{hash:{},data:r}):d),f+=m(u)+"</h3>\n</div>\n\n<div class=\"modal-body\">\n  <ul class='type-list'>\n    ",u=n.each.call(t,t&&t.types,{hash:{},inverse:g.noop,fn:g.program(1,o,r),data:r}),(u||0===u)&&(f+=u),f+='\n  </ul>\n  <div class="type-description">\n    ',(d=n.description)?u=d.call(t,{hash:{},data:r}):(d=t&&t.description,u=typeof d===p?d.call(t,{hash:{},data:r}):d),(u||0===u)&&(f+=u),f+='\n  </div>\n</div>\n\n<div class="modal-footer action-buttons">\n  <div class="cancel action-button" data-dismiss="modal">'+m((d=n.s||t&&t.s,h={hash:{},data:r},d?d.call(t,"cancel",h):v.call(t,"s","cancel",h)))+'</div>\n  <div class="save action-button">'+m((d=n.s||t&&t.s,h={hash:{},data:r},d?d.call(t,"save",h):v.call(t,"s","save",h)))+"</div>\n</div>\n"}),this.Handlebars.templates.formShare=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o,a="";return a+='\n  <p class="share-section-head">\n    '+v((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"shareable-form-link",o):g.call(e,"s","shareable-form-link",o)))+"\n    ",r=n.ifAccess||e&&e.ifAccess,o={hash:{},inverse:b.noop,fn:b.program(2,s,t),data:t},i=r?r.call(e,"metadata",o):g.call(e,"ifAccess","metadata",o),(i||0===i)&&(a+=i),a+='\n\n    <div class=\'shareable-link-block\'>\n      <div class="share-status-block">\n        <span class="share-status-message">\n          ',i=n["if"].call(e,e&&e.isPublic,{hash:{},inverse:b.program(9,u,t),fn:b.program(7,c,t),data:t}),(i||0===i)&&(a+=i),a+="\n        </span>\n      </div>\n      ",i=n["if"].call(e,e&&e.isPublic,{hash:{},inverse:b.noop,fn:b.program(11,d,t),data:t}),(i||0===i)&&(a+=i),a+="\n    </div>\n\n    ",i=n["if"].call(e,e&&e.isPublic,{hash:{},inverse:b.noop,fn:b.program(13,h,t),data:t}),(i||0===i)&&(a+=i),a+="\n  </p>\n"}function s(e,t){var i,r="";return r+="\n      ",i=n["if"].call(e,e&&e.isPublic,{hash:{},inverse:b.program(5,l,t),fn:b.program(3,a,t),data:t}),(i||0===i)&&(r+=i),r+="\n    "}function a(e,t){var i,r,o="";return o+='\n        <span class="disable-share share-button">\n          '+v((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"disable-share-link",r):g.call(e,"s","disable-share-link",r)))+"\n        </span>\n      "}function l(e,t){var i,r,o="";return o+='\n        <span class="enable-share share-button">\n          '+v((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"get-share-link",r):g.call(e,"s","get-share-link",r)))+"\n        </span>\n      "}function c(e,t){var i,r,o="";return o+="\n            "+v((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"anonymous-form-access-on",r):g.call(e,"s","anonymous-form-access-on",r)))+"\n          "}function u(e,t){var i,r,o="";return o+="\n            "+v((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"anonymous-form-access-off",r):g.call(e,"s","anonymous-form-access-off",r)))+"\n          "}function d(e,t){var i,r,o="";return o+='\n        <input type="text" class="share-link-input input-xlarge" value="',(r=n.navItemUrl)?i=r.call(e,{hash:{},data:t}):(r=e&&e.navItemUrl,i=typeof r===y?r.call(e,{hash:{},data:t}):r),(i||0===i)&&(o+=i),o+='" readonly>\n      '}function h(e,t){var i,r,o,s="";return s+='\n      <div class="form-share-iframe-message">\n        '+v((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"form-share-via-iframe",o):g.call(e,"s","form-share-via-iframe",o)))+'\n      </div>\n      <div class="form-share-iframe-block">\n        <textarea class="iframe-text" readonly><div class="fieldbook-iframe"><iframe src="',(r=n.iframeUrl)?i=r.call(e,{hash:{},data:t}):(r=e&&e.iframeUrl,i=typeof r===y?r.call(e,{hash:{},data:t}):r),s+=v(i)+'" width="640px" height="700px" frameborder=0></iframe><div><a href="',(r=n.poweredByFieldbookUrl)?i=r.call(e,{hash:{},data:t}):(r=e&&e.poweredByFieldbookUrl,i=typeof r===y?r.call(e,{hash:{},data:t}):r),s+=v(i)+'"><img alt="Powered By Fieldbook" src="',(r=n.poweredByFieldbookImg)?i=r.call(e,{hash:{},data:t}):(r=e&&e.poweredByFieldbookImg,i=typeof r===y?r.call(e,{hash:{},data:t}):r),s+=v(i)+'" srcset="',(r=n.poweredByFieldbookImg2x)?i=r.call(e,{hash:{},data:t}):(r=e&&e.poweredByFieldbookImg2x,i=typeof r===y?r.call(e,{hash:{},data:t}):r),s+=v(i)+' 2x"></a><div></div></textarea>\n      </div>\n    '
}function f(e,t){var i,r,o="";return o+='\n  <div class="not-on-form">\n    '+v((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"share-form-not-on-form",r):g.call(e,"s","share-form-not-on-form",r)))+"\n  </div>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var p,m="",g=n.helperMissing,v=this.escapeExpression,b=this,y="function";return p=n["if"].call(t,t&&t.isOnForm,{hash:{},inverse:b.program(15,f,r),fn:b.program(1,o,r),data:r}),(p||0===p)&&(m+=p),m+="\n"}),this.Handlebars.templates.formSubmitSuccess=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l=n.helperMissing,c=this.escapeExpression;return a+='<div class="success user-form">\n  '+c((o=n["icon-fa"]||t&&t["icon-fa"],s={hash:{},data:r},o?o.call(t,"ok-sign",s):l.call(t,"icon-fa","ok-sign",s)))+'\n  <div class="message">\n    '+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"form-submit-thank-you",s):l.call(t,"s","form-submit-thank-you",s)))+"\n  </div>\n</div>\n"}),this.Handlebars.templates.formula=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+="\n      "+h((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"report-formula-panel-text",r):d.call(e,"s","report-formula-panel-text",r)))+"\n    "}function s(e,t){var i,r,o="";return o+="\n      "+h((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"formula-panel-text",r):d.call(e,"s","formula-panel-text",r)))+"\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var a,l,c,u="",d=n.helperMissing,h=this.escapeExpression,f=this,p="function";return u+='<div class="modal-header">\n  <h3>\n    ',a=n["if"].call(t,t&&t.isReportFormula,{hash:{},inverse:f.program(3,s,r),fn:f.program(1,o,r),data:r}),(a||0===a)&&(u+=a),u+='\n  </h3>\n  <div class="done" data-dismiss="modal" aria-hidden="true"></div>\n</div>\n<div class="formula-panel modal-body">\n  <form class="form-inline" onsubmit="return false;">\n    <div class="input-prepend input-append field-group">\n      <span class="add-on">'+h((l=n.s||t&&t.s,c={hash:{},data:r},l?l.call(t,"formula-panel-equals",c):d.call(t,"s","formula-panel-equals",c)))+'</span>\n      <input type="text" class="formula-field formula-field-style" value="',(l=n.initialValue)?a=l.call(t,{hash:{},data:r}):(l=t&&t.initialValue,a=typeof l===p?l.call(t,{hash:{},data:r}):l),u+=h(a)+'">\n      <button class="btn btn-success fv-save">'+h((l=n.s||t&&t.s,c={hash:{},data:r},l?l.call(t,"formula-panel-save",c):d.call(t,"s","formula-panel-save",c)))+'</button>\n    </div>\n    <span class = \'autocomplete-container\'></span>\n  </form>\n  <div class="error">\n    <span class="text"></span>\n  </div>\n</div>\n'}),this.Handlebars.templates.help=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l=n.helperMissing,c=this.escapeExpression;return a+='<div class="smokescreen"></div>\n<div class="help">\n\n  <div class="help-form">\n    <input type="text" class="help-input" placeholder="'+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"help-placeholder",s):l.call(t,"s","help-placeholder",s)))+'">\n  </div>\n  <ul class="questions">\n\n  </ul>\n</div>\n'}),this.Handlebars.templates.helpQuestions=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n<li class="question" data-entry="',(r=n.id)?i=r.call(e,{hash:{},data:t}):(r=e&&e.id,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+'">',(r=n.title)?i=r.call(e,{hash:{},data:t}):(r=e&&e.title,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+"</li>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,l,c="",u="function",d=this.escapeExpression,h=this,f=n.helperMissing;return s=n.each.call(t,t&&t.questions,{hash:{},inverse:h.noop,fn:h.program(1,o,r),data:r}),(s||0===s)&&(c+=s),c+='\n<li class="question ask">'+d((a=n.s||t&&t.s,l={hash:{},data:r},a?a.call(t,"help-ask",l):f.call(t,"s","help-ask",l)))+"</li>\n"}),this.Handlebars.templates.homeView=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n        <a class="template" href="/templates/',(r=n.slug)?i=r.call(e,{hash:{},data:t}):(r=e&&e.slug,i=typeof r===d?r.call(e,{hash:{},data:t}):r),o+=h(i)+'">\n          <img class="template-thumbnail" src="',(r=n.screenshotThumbUrl)?i=r.call(e,{hash:{},data:t}):(r=e&&e.screenshotThumbUrl,i=typeof r===d?r.call(e,{hash:{},data:t}):r),o+=h(i)+'" srcset="',(r=n.screenshotThumbUrl)?i=r.call(e,{hash:{},data:t}):(r=e&&e.screenshotThumbUrl,i=typeof r===d?r.call(e,{hash:{},data:t}):r),o+=h(i)+" 1x, ",(r=n.screenshotThumb2xUrl)?i=r.call(e,{hash:{},data:t}):(r=e&&e.screenshotThumb2xUrl,i=typeof r===d?r.call(e,{hash:{},data:t}):r),o+=h(i)+' 2x">\n          <h2 class="template-title">',(r=n.title)?i=r.call(e,{hash:{},data:t}):(r=e&&e.title,i=typeof r===d?r.call(e,{hash:{},data:t}):r),o+=h(i)+'</h2>\n          <p class="subtitle">',(r=n.subtitle)?i=r.call(e,{hash:{},data:t}):(r=e&&e.subtitle,i=typeof r===d?r.call(e,{hash:{},data:t}):r),o+=h(i)+"</p>\n        </a>\n      "}function s(e,t){var i,r,o="";return o+='\n      <div class="import-button">\n        <a class="import ',(r=n.slug)?i=r.call(e,{hash:{},data:t}):(r=e&&e.slug,i=typeof r===d?r.call(e,{hash:{},data:t}):r),o+=h(i)+'-link" href="/imports/',(r=n.slug)?i=r.call(e,{hash:{},data:t}):(r=e&&e.slug,i=typeof r===d?r.call(e,{hash:{},data:t}):r),o+=h(i)+'">\n          <div class="import-body">\n            <img class="import-icon" src="',(r=n.iconSrc)?i=r.call(e,{hash:{},data:t}):(r=e&&e.iconSrc,i=typeof r===d?r.call(e,{hash:{},data:t}):r),o+=h(i)+'">\n            <div class="import-text">\n              ',(r=n.shortTitle)?i=r.call(e,{hash:{},data:t}):(r=e&&e.shortTitle,i=typeof r===d?r.call(e,{hash:{},data:t}):r),o+=h(i)+"\n            </div>\n          </div>\n        </a>\n      </div>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var a,l,c,u="",d="function",h=this.escapeExpression,f=n.helperMissing,p=this;return u+='<div class="referral-banner alert '+h((l=n.toggle||t&&t.toggle,c={hash:{},data:r},l?l.call(t,t&&t.hideReferral,"hidden",c):f.call(t,"toggle",t&&t.hideReferral,"hidden",c)))+'">\n  '+h((l=n.s||t&&t.s,c={hash:{},data:r},l?l.call(t,"referral-banner-title",c):f.call(t,"s","referral-banner-title",c)))+' <span class="referral-link"></span>\n</div>\n\n<div class="home-content">\n  <div class="book-list-pane home-pane">\n    <h3 class="title">'+h((l=n.s||t&&t.s,c={hash:{},data:r},l?l.call(t,"book-links-title",c):f.call(t,"s","book-links-title",c)))+'</h3>\n    <ul class="book-links"></ul>\n    <a href="/books" class="see-all hidden">See all…</a>\n  </div>\n\n  <div class="get-help-pane home-pane">\n    <h3 class="title">Get help getting started</h3>\n    <div class="onboarding-copy">\n      <div class="get-help-text">\n          Not sure how to set things up? We’re happy to help!\n      </div>\n      <div>\n        <a class="btn btn-large get-help-btn" href="/schedule/getting-started" target="_blank">\n          <i class="icon-fixed-width icon-calendar"></i> Book a help session\n        </a>\n        <button class="btn btn-large intercom-button">\n          <i class="icon-fixed-width icon-envelope"></i> Send us a message\n        </button>\n      </div>\n    </div>\n  </div>\n\n  <div class="template-pane home-pane">\n    <h3 class="title">Browse template examples</h3>\n    <div class="template-list">\n      ',a=n.each.call(t,t&&t.templates,{hash:{},inverse:p.noop,fn:p.program(1,o,r),data:r}),(a||0===a)&&(u+=a),u+='\n    </div>\n    <a href="/templates" class="see-all">See all…</a>\n  </div>\n\n  <div class="import-pane home-pane">\n    <h3 class="title">Import your data</h3>\n    ',a=n.each.call(t,t&&t.imports,{hash:{},inverse:p.noop,fn:p.program(3,s,r),data:r}),(a||0===a)&&(u+=a),u+='\n\n    <div class="import-button">\n      <div class="import-body">\n        <img class="import-icon" src="/img/more-icon.png">\n        <div class="import-text import-more">\n          More to come…\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'}),this.Handlebars.templates.importList=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n  <a class="import ',(r=n.slug)?i=r.call(e,{hash:{},data:t}):(r=e&&e.slug,i=typeof r===l?r.call(e,{hash:{},data:t}):r),o+=c(i)+'-link" href="/imports/',(r=n.slug)?i=r.call(e,{hash:{},data:t}):(r=e&&e.slug,i=typeof r===l?r.call(e,{hash:{},data:t}):r),o+=c(i)+'">\n    <div class="import-body">\n      <img class="import-icon" src="',(r=n.iconSrc)?i=r.call(e,{hash:{},data:t}):(r=e&&e.iconSrc,i=typeof r===l?r.call(e,{hash:{},data:t}):r),o+=c(i)+'">\n      <div class="import-text">\n        <h2 class="import-title">',(r=n.title)?i=r.call(e,{hash:{},data:t}):(r=e&&e.title,i=typeof r===l?r.call(e,{hash:{},data:t}):r),o+=c(i)+'</h2>\n        <p class="import-subtitle">',(r=n.subtitle)?i=r.call(e,{hash:{},data:t}):(r=e&&e.subtitle,i=typeof r===l?r.call(e,{hash:{},data:t}):r),o+=c(i)+"</p>\n      </div>\n    </div>\n  </a>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a="",l="function",c=this.escapeExpression,u=this;return s=n.each.call(t,t&&t.imports,{hash:{},inverse:u.noop,fn:u.program(1,o,r),data:r}),(s||0===s)&&(a+=s),a+='\n\n<p class="more-to-come">\n  <b>More to come!</b> Let us know what imports you\'d like:\n  <a href="mailto:support@fieldbook.com">support@fieldbook.com</a>\n</p>\n'}),this.Handlebars.templates.lazyEmptyRow=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+='<div class="lazy-row record-row-empty" data-index="',(s=n.index)?o=s.call(t,{hash:{},data:r}):(s=t&&t.index,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'">\n  <div class="record-name empty-record-name">\n    Add Record\n  </div>\n\n  <div class="spinner-container"></div>\n</div>\n'}),this.Handlebars.templates.lazyNewRecordRow=Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div class="lazy-row new-record-mobile-row">\n  <div class="spinner-container"></div>\n</div>\n'}),this.Handlebars.templates.lazyRow=Handlebars.template(function(e,t,n,i,r){function o(){return" missing-record"}function s(e,t){var i,r="";return r+='\n    <div class="image-holder">\n      ',i=n["if"].call(e,e&&e.imageUrl,{hash:{},inverse:g.noop,fn:g.program(4,a,t),data:t}),(i||0===i)&&(r+=i),r+="\n    </div>\n  "}function a(e,t){var i,r,o="";return o+='\n        <img class="record-image" src="',(r=n.imageUrl)?i=r.call(e,{hash:{},data:t}):(r=e&&e.imageUrl,i=typeof r===p?r.call(e,{hash:{},data:t}):r),o+=m(i)+'">\n      '}function l(e,t){var i,r,o="";return o+='\n        <div class="preview-field',i=n["if"].call(e,e&&e.isEmpty,{hash:{},inverse:g.noop,fn:g.program(7,c,t),data:t}),(i||0===i)&&(o+=i),o+='">\n          <div class="preview-name">\n            ',(r=n.fieldName)?i=r.call(e,{hash:{},data:t}):(r=e&&e.fieldName,i=typeof r===p?r.call(e,{hash:{},data:t}):r),o+=m(i)+':\n          </div>\n          <div class="preview-value">\n            ',(r=n.textValue)?i=r.call(e,{hash:{},data:t}):(r=e&&e.textValue,i=typeof r===p?r.call(e,{hash:{},data:t}):r),o+=m(i)+"\n          </div>\n        </div>\n      "}function c(){return" empty"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var u,d,h,f="",p="function",m=this.escapeExpression,g=this,v=n.helperMissing;return f+='<div class="lazy-row record-row record-row-',(d=n.cid)?u=d.call(t,{hash:{},data:r}):(d=t&&t.cid,u=typeof d===p?d.call(t,{hash:{},data:r}):d),f+=m(u)+" ",u=n["if"].call(t,t&&t.isMissing,{hash:{},inverse:g.noop,fn:g.program(1,o,r),data:r}),(u||0===u)&&(f+=u),f+='" data-index="',(d=n.index)?u=d.call(t,{hash:{},data:r}):(d=t&&t.index,u=typeof d===p?d.call(t,{hash:{},data:r}):d),f+=m(u)+'">\n  ',u=n["if"].call(t,t&&t.hasImageField,{hash:{},inverse:g.noop,fn:g.program(3,s,r),data:r}),(u||0===u)&&(f+=u),f+='\n\n  <div class="field-data">\n    <div class="record-name '+m((d=n.toggle||t&&t.toggle,h={hash:{},data:r},d?d.call(t,t&&t.isPlaceholder,"record-name-placeholder",h):v.call(t,"toggle",t&&t.isPlaceholder,"record-name-placeholder",h)))+'">\n      ',(d=n.nameHTML)?u=d.call(t,{hash:{},data:r}):(d=t&&t.nameHTML,u=typeof d===p?d.call(t,{hash:{},data:r}):d),(u||0===u)&&(f+=u),f+='\n    </div>\n\n    <div class="preview-fields-container">\n      ',u=n.each.call(t,t&&t.previewFields,{hash:{},inverse:g.noop,fn:g.program(6,l,r),data:r}),(u||0===u)&&(f+=u),f+='\n    </div>\n\n    <div class="record-arrow">\n      <i class="icon icon-2x icon-angle-right"></i>\n    </div>\n  </div>\n</div>\n'}),this.Handlebars.templates.linkName=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a,l="",c="function",u=this.escapeExpression,d=n.helperMissing;return l+='<div class="modal-header">\n  <h4>\n    <i class="icon-fb-link"></i> Make link:\n    <span class="display-name">',(s=n.fieldName)?o=s.call(t,{hash:{},data:r}):(s=t&&t.fieldName,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'</span>&nbsp;column\n    <i class="icon-long-arrow-right"></i> <span class="display-name">',(s=n.sheetTitle)?o=s.call(t,{hash:{},data:r}):(s=t&&t.sheetTitle,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'</span>&nbsp;sheet\n  </h4>\n</div>\n\n<div class="modal-body">\n  <p>\n    Sheet <span class="display-name">',(s=n.sheetTitle)?o=s.call(t,{hash:{},data:r}):(s=t&&t.sheetTitle,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'</span> does not have a name column.\n  </p>\n\n  <p>\n    That means that your links will look like <span class="display-name">',(s=n.linkExample)?o=s.call(t,{hash:{},data:r}):(s=t&&t.linkExample,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'</span>.\n  </p>\n\n  <p>\n    If you add a name column to <span class="display-name">',(s=n.sheetTitle)?o=s.call(t,{hash:{},data:r}):(s=t&&t.sheetTitle,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'</span>, you can give each record a name to use in links.\n  </p>\n</div>\n\n<div class="modal-footer">\n  <button class="btn use-ids" data-dismiss="modal">'+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"link-name-use-ids",a):d.call(t,"s","link-name-use-ids",a)))+'</button>\n  <button class="btn btn-primary add-name">'+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"link-name-add",a):d.call(t,"s","link-name-add",a)))+"</button>\n</div>\n"}),this.Handlebars.templates.linkToolHelp=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n    <span class="submessage">',(r=n.submessage)?i=r.call(e,{hash:{},data:t}):(r=e&&e.submessage,i=typeof r===c?r.call(e,{hash:{},data:t}):r),o+=u(i)+"</span>\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,l="",c="function",u=this.escapeExpression,d=this;return l+='<p class="link-help">\n  <span class="message">',(a=n.message)?s=a.call(t,{hash:{},data:r}):(a=t&&t.message,s=typeof a===c?a.call(t,{hash:{},data:r}):a),l+=u(s)+"\n  ",s=n["if"].call(t,t&&t.submessage,{hash:{},inverse:d.noop,fn:d.program(1,o,r),data:r}),(s||0===s)&&(l+=s),l+="\n  </span>\n</p>\n"}),this.Handlebars.templates.mailchimpPlugin=Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<h1 class="title">Sync MailChimp with Fieldbook</h1>\n<p class="subtitle">View and edit your subscribers, including custom merge fields</p>\n\n<img class="logo" src="/img/mailchimp-logo.png">\n<i class="arrow icon-exchange"></i>\n<img class="logo" src="/img/fieldbook-logo.png">\n\n<div class="description">\n  <ul>\n    <li><b>Sync your MailChimp lists</b> to Fieldbook sheets</li>\n    <li><b>Always up to date,</b> no need to re-import or re-download</li>\n    <li><b>Add and remove subscribers</b> as easily as cut and paste</li>\n    <li><b>View and edit merge fields,</b> with changes synced back to MailChimp</li>\n    <li><b>Easily sort, filter and group</b> on merge fields and other subscriber attributes</li>\n  </ul>\n</div>\n\n<button class="use-plugin btn btn-large"><i class="icon-exchange"></i> Import Lists</button>\n'}),this.Handlebars.templates.mainNav=Handlebars.template(function(e,t,n,i,r){function o(e){var t,n="";return n+="\n          "+h((t=e&&e.organization,t=null==t||t===!1?t:t.name,typeof t===d?t.apply(e):t))+"\n        "}function s(){return"\n          Your Organization\n        "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var a,l,c,u="",d="function",h=this.escapeExpression,f=n.helperMissing,p=this;return u+='<div class="nav-sidebar">\n  <button class="btn btn-warning create-book" type="button"><i class="icon-plus-sign"></i> '+h((l=n.s||t&&t.s,c={hash:{},data:r},l?l.call(t,"create-book",c):f.call(t,"s","create-book",c)))+'</button>\n\n  <ul class="nav-links">\n    <li><a class="nav-link books-link" href="/books"><i class="icon icon-fixed-width icon-2x icon-book"></i> <span class="nav-link-text">Your books</span></a></li>\n    <li><a class="nav-link imports-link" href="/imports"><i class="icon icon-fixed-width icon-2x icon-exchange"></i> <span class="nav-link-text">Import &amp; sync</span></a></li>\n    <li><a class="nav-link templates-link" href="/templates"><i class="icon icon-fixed-width icon-2x icon-copy"></i> <span class="nav-link-text">Templates</span></a></li>\n    <li><a class="nav-link tutorials-link" href="/tutorials"><i class="icon icon-fixed-width icon-2x icon-youtube-play"></i> <span class="nav-link-text">Tutorials</span></a></li>\n  </ul>\n\n  <div class="nav-bottom">\n    <div class="organization">\n      <a class="nav-link" href="/organization">\n        <i class="icon icon-fixed-width icon-2x icon-group"></i>\n        ',a=n["if"].call(t,t&&t.organization,{hash:{},inverse:p.program(3,s,r),fn:p.program(1,o,r),data:r}),(a||0===a)&&(u+=a),u+='\n      </a>\n    </div>\n\n    <div class="nav-link sign-out">\n      <i class="icon icon-fixed-width icon-2x icon-signout"></i> '+h((l=n.s||t&&t.s,c={hash:{},data:r},l?l.call(t,"sign-out",c):f.call(t,"s","sign-out",c)))+'\n    </div>\n\n    <form class="hidden-logout-form" action="/logout" method="post">\n      <input type="hidden" name="_csrf" value="',(l=n.csrfToken)?a=l.call(t,{hash:{},data:r}):(l=t&&t.csrfToken,a=typeof l===d?l.call(t,{hash:{},data:r}):l),u+=h(a)+'">\n    </form>\n\n    <div class="footer-links">\n      <a href="/terms" target="_blank">Terms</a> ・\n      <a href="/privacy" target="_blank">Privacy</a> ・\n      <a href="/copyright" target="_blank">Copyright</a>\n    </div>\n  </div>\n</div>\n\n<div class="nav-content">\n</div>\n'}),this.Handlebars.templates.manageApi=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+="\n          "+m((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"public-api-on",r):p.call(e,"s","public-api-on",r)))+"\n        "}function s(e,t){var i,r,o="";return o+="\n          "+m((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"public-api-off",r):p.call(e,"s","public-api-off",r)))+"\n        "}function a(e,t){var i,r,o="";return o+="\n      "+m((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"public-api-button-on",r):p.call(e,"s","public-api-button-on",r)))+"\n      "}function l(e,t){var i,r,o="";return o+="\n      "+m((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"public-api-button-off",r):p.call(e,"s","public-api-button-off",r)))+"\n      "}function c(e,t){var i,r,o="";return o+='\n        <li class="api-key" data-api-key-id="',(r=n._id)?i=r.call(e,{hash:{},data:t}):(r=e&&e._id,i=typeof r===g?r.call(e,{hash:{},data:t}):r),o+=m(i)+'">\n          <span class="name">',(r=n.name)?i=r.call(e,{hash:{},data:t}):(r=e&&e.name,i=typeof r===g?r.call(e,{hash:{},data:t}):r),o+=m(i)+'</span>\n          <i class="remove-key icon-fb-close"></i>\n        </li>\n      '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var u,d,h,f="",p=n.helperMissing,m=this.escapeExpression,g="function",v=this;return f+='<div class="modal-header">\n  <h3 class="title">'+m((d=n.s||t&&t.s,h={hash:{},data:r},d?d.call(t,"manage-api",h):p.call(t,"s","manage-api",h)))+'</h3>\n  <div class="done" data-dismiss="modal"></div>\n</div>\n\n<div class="modal-body">\n  <div class="api-url section-head">\n    <div class="api-url-label">'+m((d=n.s||t&&t.s,h={hash:{},data:r},d?d.call(t,"api-url-label",h):p.call(t,"s","api-url-label",h)))+'</div>\n    <input class="api-url-input" type="text" readonly value="',(d=n.apiUrl)?u=d.call(t,{hash:{},data:r}):(d=t&&t.apiUrl,u=typeof d===g?d.call(t,{hash:{},data:r}):d),f+=m(u)+'"></input>\n  </div>\n\n  <div class="public-api-section">\n    <div class="public-api-label">\n      <div class="section-head">'+m((d=n.s||t&&t.s,h={hash:{},data:r},d?d.call(t,"public-api-label",h):p.call(t,"s","public-api-label",h)))+'</div>\n      <div class="public-api-description">\n        ',u=n["if"].call(t,t&&t.publicApiAccess,{hash:{},inverse:v.program(3,s,r),fn:v.program(1,o,r),data:r}),(u||0===u)&&(f+=u),f+='\n      </div>\n    </div>\n\n    <div class="public-api-toggle">\n      ',u=n["if"].call(t,t&&t.publicApiAccess,{hash:{},inverse:v.program(7,l,r),fn:v.program(5,a,r),data:r}),(u||0===u)&&(f+=u),f+='\n    </div>\n  </div>\n\n  <div class="api-keys">\n    <div class="api-keys-label section-head">'+m((d=n.s||t&&t.s,h={hash:{},data:r},d?d.call(t,"api-keys",h):p.call(t,"s","api-keys",h)))+'</div>\n\n    <ul class="api-key-list">',u=n.each.call(t,t&&t.keys,{hash:{},inverse:v.noop,fn:v.program(9,c,r),data:r}),(u||0===u)&&(f+=u),f+='</ul>\n\n    <div class="no-keys">\n      '+m((d=n.s||t&&t.s,h={hash:{},data:r},d?d.call(t,"no-api-keys",h):p.call(t,"s","no-api-keys",h)))+'\n    </div>\n\n    <div class="new-key"></div>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <a href="#" class="generate-key">'+m((d=n.s||t&&t.s,h={hash:{},data:r},d?d.call(t,"generate-api-keys",h):p.call(t,"s","generate-api-keys",h)))+"</a>\n</div>\n"}),this.Handlebars.templates.matchScore=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+="\n  ",(r=n.score)?i=r.call(e,{hash:{},data:t}):(r=e&&e.score,i=typeof r===c?r.call(e,{hash:{},data:t}):r),o+=u(i)+"% match\n"}function s(e,t){var i,r,o="";return o+="\n  ",(r=n.text)?i=r.call(e,{hash:{},data:t}):(r=e&&e.text,i=typeof r===c?r.call(e,{hash:{},data:t}):r),o+=u(i)+"\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var a,l="",c="function",u=this.escapeExpression,d=this;return a=n["if"].call(t,t&&t.hasScore,{hash:{},inverse:d.program(3,s,r),fn:d.program(1,o,r),data:r}),(a||0===a)&&(l+=a),l+="\n"}),this.Handlebars.templates.matchScoreHover=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+="\n  100%: new sheet will be created with ",(r=n.newValues)?i=r.call(e,{hash:{},data:t}):(r=e&&e.newValues,i=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=f(i)+" values\n"}function s(e,t){var i,r="";return r+="\n  ",i=n["if"].call(e,e&&e.hasScore,{hash:{},inverse:p.program(7,c,t),fn:p.program(4,a,t),data:t}),(i||0===i)&&(r+=i),r+="\n"}function a(e,t){var i,r,o="";return o+="\n    ",(r=n.score)?i=r.call(e,{hash:{},data:t}):(r=e&&e.score,i=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=f(i)+"%: ",(r=n.matches)?i=r.call(e,{hash:{},data:t}):(r=e&&e.matches,i=typeof r===h?r.call(e,{hash:{},data:t}):r),o+=f(i)+" values matched",i=n["if"].call(e,e&&e.newValues,{hash:{},inverse:p.noop,fn:p.program(5,l,t),data:t}),(i||0===i)&&(o+=i),o+="\n  "}function l(){var e="";return e}function c(){return"\n    empty\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var u,d="",h="function",f=this.escapeExpression,p=this;return u=n["if"].call(t,t&&t.isNew,{hash:{},inverse:p.program(3,s,r),fn:p.program(1,o,r),data:r}),(u||0===u)&&(d+=u),d+="\n"}),this.Handlebars.templates.mobileBookNav=Handlebars.template(function(e,t,n,i,r){function o(e,t){var r,o="";return o+="\n      ",r=u.invokePartial(i.sheetTab,"sheetTab",e,n,i,t),(r||0===r)&&(o+=r),o+="\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var s,a,l,c="",u=this,d="function",h=this.escapeExpression,f=n.helperMissing;return c+='<div class="nav-panel">\n  <div class="book-title">\n    ',(a=n.title)?s=a.call(t,{hash:{},data:r}):(a=t&&t.title,s=typeof a===d?a.call(t,{hash:{},data:r}):a),c+=h(s)+'\n  </div>\n  <ul class="sheet-tabs">\n    ',s=n.each.call(t,t&&t.sheets,{hash:{},inverse:u.noop,fn:u.program(1,o,r),data:r}),(s||0===s)&&(c+=s),c+='\n  </ul>\n</div>\n\n<a href="/books">\n  <div class="all-books-button">\n    '+h((a=n.icon||t&&t.icon,l={hash:{},data:r},a?a.call(t,"arrow-left",l):f.call(t,"icon","arrow-left",l)))+"\n    "+h((a=n.s||t&&t.s,l={hash:{},data:r},a?a.call(t,"all-books",l):f.call(t,"s","all-books",l)))+'\n  </div>\n</a>\n\n<div class="nav-smoke">\n  '+h((a=n.icon||t&&t.icon,l={hash:{},data:r},a?a.call(t,"close close-btn",l):f.call(t,"icon","close close-btn",l)))+"\n  "+h((a=n.icon||t&&t.icon,l={hash:{},data:r},a?a.call(t,"ficon logo",l):f.call(t,"icon","ficon logo",l)))+"\n</div>\n"}),this.Handlebars.templates.mobileContainer=Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div class="title-bar"></div>\n<div class="mobile-main"></div>\n'}),this.Handlebars.templates.mobileFormMessage=Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div class="mobile-unsupported-message">\n  Sorry, forms are not available on mobile yet (they will be supported in a future release).\n</div>\n'}),this.Handlebars.templates.mobileGroupTitles=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n    <span class="field-name">',(r=n.groupField)?i=r.call(e,{hash:{},data:t}):(r=e&&e.groupField,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+':</span><span class="value"> ',(r=n.groupValue)?i=r.call(e,{hash:{},data:t}):(r=e&&e.groupValue,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+"</span>\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,l,c="",u="function",d=this.escapeExpression,h=this,f=n.helperMissing;return c+='<div class="group-title">\n  ',a=n.join||t&&t.join,l={hash:{},inverse:h.noop,fn:h.program(1,o,r),data:r},s=a?a.call(t,t&&t.titles,", ",l):f.call(t,"join",t&&t.titles,", ",l),(s||0===s)&&(c+=s),c+="\n</div>\n"}),this.Handlebars.templates.mobileRecordDetail=Handlebars.template(function(e,t,n,i,r){function o(e,t){var r,o="";return o+="\n    ",r=l.invokePartial(i.mobileRecordCell,"mobileRecordCell",e,n,i,t),(r||0===r)&&(o+=r),o+="\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var s,a="",l=this;return a+='<div class="attributes">\n  ',s=n.each.call(t,t&&t.cells,{hash:{},inverse:l.noop,fn:l.program(1,o,r),data:r}),(s||0===s)&&(a+=s),a+='\n</div>\n\n<div class="subsheets"></div>\n'}),this.Handlebars.templates.mobileRecordTitle=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+='<div class="title-home">\n  <a href="/"><i class="icon icon-2x icon-home"></i></a>\n</div>\n<span class="breadcrumbs title">\n  <a href="',(s=n.urlForSheet)?o=s.call(t,{hash:{},data:r}):(s=t&&t.urlForSheet,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'">',(s=n.sheetTitle)?o=s.call(t,{hash:{},data:r}):(s=t&&t.sheetTitle,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'</a>\n  <i class="icon icon-angle-right"></i>\n  ',(s=n.name)?o=s.call(t,{hash:{},data:r}):(s=t&&t.name,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+"\n</span>\n"}),this.Handlebars.templates.mobileReportMessage=Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div class="mobile-unsupported-message">\n  Sorry, report views are not available on mobile yet (they will be supported in a future release).\n</div>\n'}),this.Handlebars.templates.mobileSheet=Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div class="record-list-container"></div>\n'}),this.Handlebars.templates.mobileTitleBar=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n  <div class="title-menu">\n    '+u((i=n.icon||e&&e.icon,r={hash:{},data:t},i?i.call(e,"menu",r):c.call(e,"icon","menu",r)))+"\n  </div>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,l="",c=n.helperMissing,u=this.escapeExpression,d=this,h="function";return s=n.unless.call(t,t&&t.noMenu,{hash:{},inverse:d.noop,fn:d.program(1,o,r),data:r}),(s||0===s)&&(l+=s),l+='\n\n<span class="title">\n  ',(a=n.title)?s=a.call(t,{hash:{},data:r}):(a=t&&t.title,s=typeof a===h?a.call(t,{hash:{},data:r}):a),l+=u(s)+"\n</span>\n"}),this.Handlebars.templates.mockTonic=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+='<textarea class="mock-tonic">\n',(s=n.code)?o=s.call(t,{hash:{},data:r}):(s=t&&t.code,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+"\n</textarea>\n"}),this.Handlebars.templates.modalTabView=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r;return d((i=n.icon||e&&e.icon,r={hash:{},data:t},i?i.call(e,e&&e.titleIcon,r):u.call(e,"icon",e&&e.titleIcon,r)))}function s(e){var t="";return t+='\n      <div class="modal-tab">\n        '+d(typeof e===h?e.apply(e):e)+"\n      </div>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var a,l,c="",u=n.helperMissing,d=this.escapeExpression,h="function",f=this;return c+='<div class="modal-header">\n  ',a=n["if"].call(t,t&&t.titleIcon,{hash:{},inverse:f.noop,fn:f.program(1,o,r),data:r}),(a||0===a)&&(c+=a),c+='<h3 class="title">',(l=n.title)?a=l.call(t,{hash:{},data:r}):(l=t&&t.title,a=typeof l===h?l.call(t,{hash:{},data:r}):l),c+=d(a)+'</h3>\n  <div class="done"></div>\n</div>\n<div class="modal-body">\n  <div class="modal-tabs">\n    ',a=n.each.call(t,t&&t.labels,{hash:{},inverse:f.noop,fn:f.program(3,s,r),data:r}),(a||0===a)&&(c+=a),c+='\n  </div>\n  <div class="tab-subview-container">\n  </div>\n</div>\n'}),this.Handlebars.templates.nameConfig=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o,s="";return s+='\n      <a href="#" data-toggle="tab" data-target=".name-config-tab-single" class="',(r=n.active)?i=r.call(e,{hash:{},data:t}):(r=e&&e.active,i=typeof r===h?r.call(e,{hash:{},data:t}):r),s+=f(i)+' btn">'+f((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"name-config-tab-single",o):p.call(e,"s","name-config-tab-single",o)))+"</a>\n    "}function s(e,t){var i,r,o,s="";return s+='\n      <a href="#" data-toggle="tab" data-target=".name-config-tab-multi" class="',(r=n.active)?i=r.call(e,{hash:{},data:t}):(r=e&&e.active,i=typeof r===h?r.call(e,{hash:{},data:t}):r),s+=f(i)+' btn">'+f((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"name-config-tab-multi",o):p.call(e,"s","name-config-tab-multi",o)))+"</a>\n    "}function a(e,t){var i,r,o,s="";return s+='\n      <a href="#" data-toggle="tab" data-target=".name-config-tab-numeric" class="',(r=n.active)?i=r.call(e,{hash:{},data:t}):(r=e&&e.active,i=typeof r===h?r.call(e,{hash:{},data:t}):r),s+=f(i)+' btn">'+f((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"name-config-tab-numeric",o):p.call(e,"s","name-config-tab-numeric",o)))+"</a>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var l,c,u,d="",h="function",f=this.escapeExpression,p=n.helperMissing,m=this;return d+='<div class="modal-header">\n  <i class="close icon icon-fb-close" data-dismiss="modal" aria-hidden="true"></i>\n  <h3 class="small-title">'+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"name-config-title",u):p.call(t,"s","name-config-title",u)))+'</h3>\n</div>\n\n<div class="modal-body">\n  <div class="btn-group mode-buttons">\n    ',l=n["with"].call(t,t&&t.single,{hash:{},inverse:m.noop,fn:m.program(1,o,r),data:r}),(l||0===l)&&(d+=l),d+="\n\n    ",l=n["with"].call(t,t&&t.multi,{hash:{},inverse:m.noop,fn:m.program(3,s,r),data:r}),(l||0===l)&&(d+=l),d+="\n\n    ",l=n["with"].call(t,t&&t.numeric,{hash:{},inverse:m.noop,fn:m.program(5,a,r),data:r}),(l||0===l)&&(d+=l),d+='\n  </div>\n\n  <div class="tab-content">\n    <div class="tab-pane name-config-tab-single '+f((l=t&&t.single,l=null==l||l===!1?l:l.active,typeof l===h?l.apply(t):l))+'">\n      '+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"name-config-single-description",u):p.call(t,"s","name-config-single-description",u)))+'\n    </div>\n\n    <div class="tab-pane name-config-tab-multi '+f((l=t&&t.multi,l=null==l||l===!1?l:l.active,typeof l===h?l.apply(t):l))+'">\n      <div class="name-config-multi-container">\n      </div>\n      <div class="name-config-separator-container input-prepend">\n        <span class="add-on">'+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"name-config-multi-separator",u):p.call(t,"s","name-config-multi-separator",u)))+'</span>\n        <input type="text" class="name-config-multi-separator" value="',(c=n.separator)?l=c.call(t,{hash:{},data:r}):(c=t&&t.separator,l=typeof c===h?c.call(t,{hash:{},data:r}):c),d+=f(l)+'">\n      </div>\n      <div class="name-config-multi-description">\n        '+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"name-config-multi-description",u):p.call(t,"s","name-config-multi-description",u)))+'\n      </div>\n    </div>\n\n    <div class="tab-pane name-config-tab-numeric '+f((l=t&&t.numeric,l=null==l||l===!1?l:l.active,typeof l===h?l.apply(t):l))+'">\n      '+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"name-config-numeric-description",u):p.call(t,"s","name-config-numeric-description",u)))+'\n    </div>\n  </div>\n\n  <div class="name-config-buttons">\n    <div class="cancel" data-dismiss="modal" aria-hidden="true">'+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"cancel",u):p.call(t,"s","cancel",u)))+'</div>\n    <div class="save">'+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"save",u):p.call(t,"s","save",u)))+"</div>\n  </div>\n</div>\n"
}),this.Handlebars.templates.onboardingPane=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n      <li data-entry="',(r=n.id)?i=r.call(e,{hash:{},data:t}):(r=e&&e.id,i=typeof r===p?r.call(e,{hash:{},data:t}):r),o+=m(i)+'" class="onboarding-entry ',i=n["if"].call(e,e&&e.isActive,{hash:{},inverse:g.noop,fn:g.program(2,s,t),data:t}),(i||0===i)&&(o+=i),o+='">\n        <i class="',i=n["if"].call(e,e&&e.isActive,{hash:{},inverse:g.program(6,l,t),fn:g.program(4,a,t),data:t}),(i||0===i)&&(o+=i),o+=" ",i=n["if"].call(e,e&&e.isTourShown,{hash:{},inverse:g.noop,fn:g.program(8,c,t),data:t}),(i||0===i)&&(o+=i),o+=' checkmark"></i> ',(r=n.title)?i=r.call(e,{hash:{},data:t}):(r=e&&e.title,i=typeof r===p?r.call(e,{hash:{},data:t}):r),o+=m(i)+"\n      </li>\n    "}function s(){return"active"}function a(){return"icon-play"}function l(){return"icon-ok"}function c(){return"checked"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var u,d,h,f="",p="function",m=this.escapeExpression,g=this,v=n.helperMissing;return f+='<div class="onboarding-pane">\n  <button type="button" class="close">&times;</button>\n\n  <h2>'+m((d=n.s||t&&t.s,h={hash:{},data:r},d?d.call(t,"onboarding-title",h):v.call(t,"s","onboarding-title",h)))+"</h2>\n  <p>"+m((d=n.s||t&&t.s,h={hash:{},data:r},d?d.call(t,"onboarding-subtitle",h):v.call(t,"s","onboarding-subtitle",h)))+"</p>\n\n  <ul>\n    ",u=n.each.call(t,t&&t.tours,{hash:{},inverse:g.noop,fn:g.program(1,o,r),data:r}),(u||0===u)&&(f+=u),f+='\n  </ul>\n</div>\n<div class="onboarding-button">\n  <i class="icon-question-sign icon-3x"></i>\n</div>\n'}),this.Handlebars.templates.organizationList=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};var o,s="",a=this;return s+='<div class="org-list">\n  <div class="org-head">\n    ',o=a.invokePartial(i.organizationHeader,"organizationHeader",t,n,i,r),(o||0===o)&&(s+=o),s+='\n  </div>\n\n  <div class="search-box">\n    <i class="icon icon-fb-search search-icon"></i>\n    <input type="text" class="search search-query"\n      placeholder="Search by name, email or access level">\n  </div>\n  <div class="org-table-container">\n    ',o=a.invokePartial(i.organizationTable,"organizationTable",t,n,i,r),(o||0===o)&&(s+=o),s+="\n  </div>\n</div>\n"}),this.Handlebars.templates.pendingBooks=Handlebars.template(function(e,t,n,i,r){function o(){return"\n    it\n    "}function s(){return"\n    them\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var a,l,c,u="",d="function",h=this.escapeExpression,f=n.helperMissing,p=this;return u+='<div class="pending-books">\n  <div class="pending-books-inner">\n    You have ',(l=n.sharedBooksPendingVerify)?a=l.call(t,{hash:{},data:r}):(l=t&&t.sharedBooksPendingVerify,a=typeof l===d?l.call(t,{hash:{},data:r}):l),u+=h(a)+" "+h((l=n.pluralize||t&&t.pluralize,c={hash:{},data:r},l?l.call(t,"book",t&&t.sharedBooksPendingVerify,c):f.call(t,"pluralize","book",t&&t.sharedBooksPendingVerify,c)))+" shared with you.\n    To access\n    ",l=n.compare||t&&t.compare,c={hash:{},inverse:p.program(3,s,r),fn:p.program(1,o,r),data:r},a=l?l.call(t,t&&t.sharedBooksPendingVerify,"===",1,c):f.call(t,"compare",t&&t.sharedBooksPendingVerify,"===",1,c),(a||0===a)&&(u+=a),u+="\n    you will need to\n    <a href=\"#\" class='verify-link'>\n      verify your email address.\n    </a>\n  </div>\n</div>\n"}),this.Handlebars.templates.pendingSheet=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l=n.helperMissing,c=this.escapeExpression;return a+='<h3 class="message">'+c((o=n.s||t&&t.s,s={hash:{},data:r},o?o.call(t,"pending-sheet-message",s):l.call(t,"s","pending-sheet-message",s)))+' <span class="percentage"></span>%</h3>\n<div class="progress pending-progress">\n  <div class="bar" style="width: 0;"></div>\n</div>\n\n'}),this.Handlebars.templates.performance=Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'Time of <span class="signature"></span> - <span class="timing"></span>ms\n<div class="trace-details"></div>\n'}),this.Handlebars.templates.pickListConfig=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+='<p>Input must be one of the following values:</p>\n<textarea rows="9">',(s=n.enumValues)?o=s.call(t,{hash:{},data:r}):(s=t&&t.enumValues,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+"</textarea>\n"}),this.Handlebars.templates.plan=Handlebars.template(function(e,t,n,i,r){function o(){return"\n    You're\n  "}function s(e){var t,n="";return n+="\n    "+_((t=e&&e.organization,t=null==t||t===!1?t:t.name,typeof t===k?t.apply(e):t))+" is\n  "}function a(e,t){var i,r,o="";return o+='\n  <div class="plan-monthly-rate plan-top-box">\n    Currently paying\n    <div class="plan-large">\n      $',(r=n.monthlyRate)?i=r.call(e,{hash:{},data:t}):(r=e&&e.monthlyRate,i=typeof r===k?r.call(e,{hash:{},data:t}):r),o+=_(i)+"/mo\n    </div>\n  </div>\n"}function l(e,t){var i,r,o="";return o+='\n  <div class="plan-overage plan-top-box">\n    API Overages This Month\n    <div class="plan-overage-amount plan-large">\n      $',(r=n.apiOverage)?i=r.call(e,{hash:{},data:t}):(r=e&&e.apiOverage,i=typeof r===k?r.call(e,{hash:{},data:t}):r),o+=_(i)+"\n    </div>\n  </div>\n"}function c(e,t){var i,r,o,s="";return s+='\n  <div class="plan-org-section plan-section">\n    <div class="plan-section-title">\n      '+_((r=n["default"]||e&&e["default"],o={hash:{},data:t},r?r.call(e,(i=e&&e.organization,null==i||i===!1?i:i.name),"Your organization",o):S.call(e,"default",(i=e&&e.organization,null==i||i===!1?i:i.name),"Your organization",o)))+'\n    </div>\n    <div class="summary-box">\n      <div class="summary-text plan-large">\n        ',(r=n.orgSummary)?i=r.call(e,{hash:{},data:t}):(r=e&&e.orgSummary,i=typeof r===k?r.call(e,{hash:{},data:t}):r),s+=_(i)+"\n      </div>\n      Team "+_((r=n.pluralize||e&&e.pluralize,o={hash:{},data:t},r?r.call(e,"member",(i=e&&e.organization,null==i||i===!1?i:i.activeUserCount),o):S.call(e,"pluralize","member",(i=e&&e.organization,null==i||i===!1?i:i.activeUserCount),o)))+'\n    </div>\n    <div class="plan-section-description">\n      ',i=n["if"].call(e,e&&e.isPaid,{hash:{},inverse:C.program(12,d,t),fn:C.program(10,u,t),data:t}),(i||0===i)&&(s+=i),s+="\n    </div>\n  </div>\n"}function u(){return'\n        <p>\n          Your plan includes an organization, and members are billed at\n          <strong>$10/user/month</strong>.\n          <a href="/organization" class="manage-org">View/manage your organization</a>\n        </p>\n        <p>\n          Organization members get all the privileges of the Business plan, and share an\n          API quota (<a href="http://docs.fieldbook.com/docs/plans-and-pricing">read more</a>).\n          If you just want someone to view and edit a book, you\n          can invite them as a guest on that book for free, without making them part of\n          your organization.\n        </p>\n      '}function d(){return'\n      <p>\n        Your Business plan has lapsed, so you can\'t manage your team anymore.\n        <a href="/organization" class="upgrade-link">Re-subscribe</a> to get access to the team console again.\n      </p>\n      '}function h(e,t){var i,r,o="";return o+="\n        "+_((i=e&&e.organization,i=null==i||i===!1?i:i.name,typeof i===k?i.apply(e):i))+" has used ",(r=n.apiDisplayPercentage)?i=r.call(e,{hash:{},data:t}):(r=e&&e.apiDisplayPercentage,i=typeof r===k?r.call(e,{hash:{},data:t}):r),o+=_(i)+"%\n        of its ",(r=n.freeApiCallsFormatted)?i=r.call(e,{hash:{},data:t}):(r=e&&e.freeApiCallsFormatted,i=typeof r===k?r.call(e,{hash:{},data:t}):r),o+=_(i)+" free API calls this month.\n      "}function f(e,t){var i,r,o="";return o+="\n        You have used ",(r=n.apiDisplayPercentage)?i=r.call(e,{hash:{},data:t}):(r=e&&e.apiDisplayPercentage,i=typeof r===k?r.call(e,{hash:{},data:t}):r),o+=_(i)+"%\n        of your ",(r=n.freeApiCallsFormatted)?i=r.call(e,{hash:{},data:t}):(r=e&&e.freeApiCallsFormatted,i=typeof r===k?r.call(e,{hash:{},data:t}):r),o+=_(i)+" free API calls this month.\n      "}function p(e,t){var i,r,o="";return o+=' \n      <div class="api-meter">\n        <div class="api-meter-mercury" style="width:',(r=n.apiMeterPercentage)?i=r.call(e,{hash:{},data:t}):(r=e&&e.apiMeterPercentage,i=typeof r===k?r.call(e,{hash:{},data:t}):r),o+=_(i)+'%"></div>\n      </div>\n    '}function m(){return"\n        Extra API calls are billed at <strong>$0.005/call</strong>.\n      "}function g(){return'\n        To use more API calls, <a href="/organization" class="upgrade-link">upgrade to a paid account</a>\n      '}function v(){return'\n<div class="plan-upgrade-section plan-section">\n  <div class="plan-section-title">\n    Upgrade\n  </div>\n  <div class="plan-section-description">\n    Upgrade to Fieldbook Business to share a book with <strong>unlimited guests</strong> and make up to\n    <strong>10,000</strong> API calls/month for free (<strong>$0.005/call</strong> after that).\n    <a href="/organization" class="upgrade-link btn btn-large">Upgrade</a>\n  </div>\n </div>\n'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var b,y,w,x="",k="function",_=this.escapeExpression,S=n.helperMissing,C=this;return x+='<div class="plan-title plan-top-box">\n  ',b=n["if"].call(t,t&&t.isIndividual,{hash:{},inverse:C.program(3,s,r),fn:C.program(1,o,r),data:r}),(b||0===b)&&(x+=b),x+='\n  on the\n  <div class="plan-large">\n    ',(y=n.planName)?b=y.call(t,{hash:{},data:r}):(y=t&&t.planName,b=typeof y===k?y.call(t,{hash:{},data:r}):y),x+=_(b)+"\n  </div>\n</div>\n\n",b=n["if"].call(t,t&&t.isPaid,{hash:{},inverse:C.noop,fn:C.program(5,a,r),data:r}),(b||0===b)&&(x+=b),x+="\n\n",b=n["if"].call(t,t&&t.apiOverage,{hash:{},inverse:C.noop,fn:C.program(7,l,r),data:r}),(b||0===b)&&(x+=b),x+='\n\n<div class="clear-float"></div>\n\n',b=n["if"].call(t,t&&t.organization,{hash:{},inverse:C.noop,fn:C.program(9,c,r),data:r}),(b||0===b)&&(x+=b),x+='\n\n<div class="clear-float"></div>\n\n<div class="plan-api-section plan-section">\n  <div class="plan-section-title">\n    API Usage\n  </div>\n  <div class="summary-box">\n    <div class="summary-text plan-large">\n      ',(y=n.formattedApiCalls)?b=y.call(t,{hash:{},data:r}):(y=t&&t.formattedApiCalls,b=typeof y===k?y.call(t,{hash:{},data:r}):y),x+=_(b)+"\n    </div>\n    API  "+_((y=n.pluralize||t&&t.pluralize,w={hash:{},data:r},y?y.call(t,"call",t&&t.apiCalls,w):S.call(t,"pluralize","call",t&&t.apiCalls,w)))+' this month\n  </div>\n  <div class="plan-section-description">\n    <div class="percentage-text">\n      ',b=n["if"].call(t,t&&t.hasActiveOrganization,{hash:{},inverse:C.program(16,f,r),fn:C.program(14,h,r),data:r}),(b||0===b)&&(x+=b),x+="\n    </div>\n    ",b=n["if"].call(t,t&&t.apiCalls,{hash:{},inverse:C.noop,fn:C.program(18,p,r),data:r}),(b||0===b)&&(x+=b),x+='\n    <div class="pricing-text">\n      ',b=n["if"].call(t,t&&t.isPaid,{hash:{},inverse:C.program(22,g,r),fn:C.program(20,m,r),data:r}),(b||0===b)&&(x+=b),x+='\n    </div>\n  </div>\n</div>\n\n<div class="clear-float"></div>\n\n',b=n.unless.call(t,t&&t.isPaid,{hash:{},inverse:C.noop,fn:C.program(24,v,r),data:r}),(b||0===b)&&(x+=b),x+='\n\n<div class="clear-float"></div>\n\n<div class="docs-link plan-section">\n  <div class="plan-section-description">\n    <a href="http://docs.fieldbook.com/docs/plans-and-pricing">More info on plans &amp; pricing</a>\n  </div>\n</div>\n'}),this.Handlebars.templates.powerbar=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r="";return r+="\n      ",i=n["if"].call(e,e&&e.showUpdateSearchButton,{hash:{},inverse:p.program(4,a,t),fn:p.program(2,s,t),data:t}),(i||0===i)&&(r+=i),r+="\n    "}function s(e,t){var i,r,o="";return o+='\n        <span class="btn-group">\n          <button type="button" class="btn btn-default save-search save-action-button">\n            '+f((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"update-search",r):h.call(e,"s","update-search",r)))+'\n          </button>\n          <button type="button" class="btn btn-default save-as-new save-action-button">\n            '+f((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"save-search-as-new",r):h.call(e,"s","save-search-as-new",r)))+"\n          </button>\n        </span>\n      "}function a(e,t){var i,r,o="";return o+='\n      <span>\n        <button class="btn save-search save-action-button">'+f((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"save-search",r):h.call(e,"s","save-search",r)))+"</button>\n      </span>\n      "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var l,c,u,d="",h=n.helperMissing,f=this.escapeExpression,p=this;return d+='<form class="search-form form-inline nomobile" onsubmit="return false;">\n  <div class="search-flex">\n    <div class="search-container">\n      <div class="frozen-filters-smokescreen">\n        <div class="description-container">\n          '+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"frozen-filter-description",u):h.call(t,"s","frozen-filter-description",u)))+'\n          <div class="resume-filters">\n            '+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"resume-filters",u):h.call(t,"s","resume-filters",u)))+"\n          </div>\n        </div>\n      </div>\n    </div>\n    ",l=n.unless.call(t,t&&t.metadataLocked,{hash:{},inverse:p.noop,fn:p.program(1,o,r),data:r}),(l||0===l)&&(d+=l),d+="\n  </div>\n</form>\n"}),this.Handlebars.templates.progressBar=Handlebars.template(function(e,t,n,i,r){function o(){return"progress-striped active"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,l="",c="function",u=this.escapeExpression,d=this;return l+='<div class="modal-header">\n  <h3>',(a=n.title)?s=a.call(t,{hash:{},data:r}):(a=t&&t.title,s=typeof a===c?a.call(t,{hash:{},data:r}):a),l+=u(s)+'</h3>\n</div>\n<div class="modal-body">\n  <div class="progress progress-success ',s=n["if"].call(t,t&&t.finished,{hash:{},inverse:d.noop,fn:d.program(1,o,r),data:r}),(s||0===s)&&(l+=s),l+='">\n    <div class="bar" style="width: ',(a=n.progress)?s=a.call(t,{hash:{},data:r}):(a=t&&t.progress,s=typeof a===c?a.call(t,{hash:{},data:r}):a),l+=u(s)+'%"></div>\n  </div>\n</div>\n'}),this.Handlebars.templates.record=Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div class="fast-scroll-container"></div>\n'}),this.Handlebars.templates.root=Handlebars.template(function(e,t,n,i,r){function o(){return'<div class="title-bar"></div>'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,l,c="",u=this,d="function",h=n.blockHelperMissing;return l={hash:{},inverse:u.noop,fn:u.program(1,o,r),data:r},(a=n.unlessMobile)?s=a.call(t,l):(a=t&&t.unlessMobile,s=typeof a===d?a.call(t,l):a),n.unlessMobile||(s=h.call(t,s,{hash:{},inverse:u.noop,fn:u.program(1,o,r),data:r})),(s||0===s)&&(c+=s),c+='\n\n<div class="status-bar"></div>\n\n<div class="content">\n  <div class="inner-content"></div>\n</div>\n'}),this.Handlebars.templates.sheet=Handlebars.template(function(e,t,n,i,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div class=\'sheet-controls\'>\n  <div class="sheet-toolbar">\n    <div class="powerbar"></div>\n  </div>\n\n  <div class="grouping-message hide"></div>\n</div>\n\n<div class="fast-scroll-container"></div>\n<div class="table-container"></div>\n'}),this.Handlebars.templates.statusBar=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+=" alert-",(r=n.type)?i=r.call(e,{hash:{},data:t}):(r=e&&e.type,i=typeof r===d?r.call(e,{hash:{},data:t}):r),o+=h(i)}function s(e,t){var i,r,o="";return o+='<span class="undo link">'+h((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"undo",r):f.call(e,"s","undo",r)))+'</span>\n      <div class="shortcut">\n        '+h((i=n.shortcut||e&&e.shortcut,r={hash:{},data:t},i?i.call(e,"z",r):f.call(e,"shortcut","z",r)))+"\n      </div>"}function a(e,t){var i,r,o="";return o+='<span class="reload link">'+h((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"reload",r):f.call(e,"s","reload",r)))+'</span>\n      <div class="shortcut">\n        '+h((i=n.shortcut||e&&e.shortcut,r={hash:{},data:t},i?i.call(e,"r",r):f.call(e,"shortcut","r",r)))+"\n      </div>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var l,c,u="",d="function",h=this.escapeExpression,f=n.helperMissing,p=this;return u+='<span class="message ',l=n["if"].call(t,t&&t.type,{hash:{},inverse:p.noop,fn:p.program(1,o,r),data:r}),(l||0===l)&&(u+=l),u+='">\n  <span class="text">',(c=n.text)?l=c.call(t,{hash:{},data:r}):(c=t&&t.text,l=typeof c===d?c.call(t,{hash:{},data:r}):c),u+=h(l)+'</span>\n  <div class="action-tab">',l=n["if"].call(t,t&&t.undoable,{hash:{},inverse:p.noop,fn:p.program(3,s,r),data:r}),(l||0===l)&&(u+=l),l=n["if"].call(t,t&&t.reload,{hash:{},inverse:p.noop,fn:p.program(5,a,r),data:r}),(l||0===l)&&(u+=l),u+="</div>\n</span>\n"}),this.Handlebars.templates.titleBar=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o,a="";return a+="\n    ",o={hash:{},inverse:k.noop,fn:k.program(2,s,t),data:t},(r=n.unlessMobile)?i=r.call(e,o):(r=e&&e.unlessMobile,i=typeof r===_?r.call(e,o):r),n.unlessMobile||(i=S.call(e,i,{hash:{},inverse:k.noop,fn:k.program(2,s,t),data:t})),(i||0===i)&&(a+=i),a+="\n  "}function s(e,t){var i,r,o="";return o+='\n      <a href="/books"><div class="main-nav-item nav-item bookList-nav">'+x((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"books",r):w.call(e,"s","books",r)))+'</div></a>\n      <a href="/imports"><div class="main-nav-item nav-item importSync-nav ">'+x((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"import-sync",r):w.call(e,"s","import-sync",r)))+'</div></a>\n      <a href="/templates"><div class="main-nav-item nav-item templates-nav">'+x((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"templates",r):w.call(e,"s","templates",r)))+'</div></a>\n      <a href="/tutorials"><div class="main-nav-item nav-item tutorials-nav">'+x((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"tutorials",r):w.call(e,"s","tutorials",r)))+'</div></a>\n      <a href="http://docs.fieldbook.com" target="_blank"><div class="main-nav-item nav-item documentation-nav">'+x((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"documentation",r):w.call(e,"s","documentation",r)))+"</div></a>\n    "}function a(e,t){var i,r,o,s="";return s+='\n    <div class="read-only-info">\n      <span>\n        '+x((r=n.icon||e&&e.icon,o={hash:{},data:t},r?r.call(e,"lock",o):w.call(e,"icon","lock",o)))+"\n        "+x((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"read-only-view",o):w.call(e,"s","read-only-view",o)))+"\n        ",i=n["if"].call(e,e&&e.isLoggedIn,{hash:{},inverse:k.program(7,c,t),fn:k.program(5,l,t),data:t}),(i||0===i)&&(s+=i),s+="\n      </span>\n    </div>\n  "}function l(e,t){var i,r,o,s="";return s+="\n          "+x((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"another-account",o):w.call(e,"s","another-account",o)))+' <a href="',(r=n.logoutUrl)?i=r.call(e,{hash:{},data:t}):(r=e&&e.logoutUrl,i=typeof r===_?r.call(e,{hash:{},data:t}):r),(i||0===i)&&(s+=i),s+='">'+x((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"switch-to-edit",o):w.call(e,"s","switch-to-edit",o)))+"</a>\n        "}function c(e,t){var i,r,o,s="";return s+="\n          "+x((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"have-access",o):w.call(e,"s","have-access",o)))+' <a href="',(r=n.logoutUrl)?i=r.call(e,{hash:{},data:t}):(r=e&&e.logoutUrl,i=typeof r===_?r.call(e,{hash:{},data:t}):r),(i||0===i)&&(s+=i),s+='">'+x((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"sign-in-to-edit",o):w.call(e,"s","sign-in-to-edit",o)))+"</a>\n        "}function u(e,t){var i,r,o,s="";return s+="\n    ",o={hash:{},inverse:k.noop,fn:k.program(10,d,t),data:t},(r=n.unlessMobile)?i=r.call(e,o):(r=e&&e.unlessMobile,i=typeof r===_?r.call(e,o):r),n.unlessMobile||(i=S.call(e,i,{hash:{},inverse:k.noop,fn:k.program(10,d,t),data:t})),(i||0===i)&&(s+=i),s+="\n\n    <div class=\"dropdown account-menu-dropdown\">\n      <a data-toggle='dropdown' data-target='#'>\n        <div class=\"account-menu "+x((r=n.toggle||e&&e.toggle,o={hash:{},data:t},r?r.call(e,(i=e&&e.user,i=null==i||i===!1?i:i.accountNotifications,null==i||i===!1?i:i.length),"has-notifications",o):w.call(e,"toggle",(i=e&&e.user,i=null==i||i===!1?i:i.accountNotifications,null==i||i===!1?i:i.length),"has-notifications",o)))+'">\n          <img class="user-image" src="'+x((r=n.userImage||e&&e.userImage,o={hash:{},data:t},r?r.call(e,e&&e.user,o):w.call(e,"userImage",e&&e.user,o)))+'">\n          <i class="menu-icon icon icon-angle-down"></i>\n        </div>\n      </a>\n      <ul class="dropdown-menu pull-right" role="menu">\n        <li class="user-info">\n          <div class="user-group">\n            <div class="name">\n              '+x((i=e&&e.user,i=null==i||i===!1?i:i.name,typeof i===_?i.apply(e):i))+'\n            </div>\n            <div class="email">\n              '+x((i=e&&e.user,i=null==i||i===!1?i:i.email,typeof i===_?i.apply(e):i))+"\n            </div>\n          </div>\n        </li>\n        ",i=n.each.call(e,(i=e&&e.user,null==i||i===!1?i:i.accountNotifications),{hash:{},inverse:k.noop,fn:k.program(12,h,t),data:t}),(i||0===i)&&(s+=i),s+='\n        <li class="action organization nomobile">\n          '+x((r=n.icon||e&&e.icon,o={hash:{},data:t},r?r.call(e,"company icon-fixed-width",o):w.call(e,"icon","company icon-fixed-width",o)))+"\n          ",i=n["if"].call(e,e&&e.organization,{hash:{},inverse:k.program(16,p,t),fn:k.program(14,f,t),data:t}),(i||0===i)&&(s+=i),s+='\n        </li>\n        <li class="action plan nomobile">\n          '+x((r=n.icon||e&&e.icon,o={hash:{},data:t},r?r.call(e,"currency icon-fixed-width",o):w.call(e,"icon","currency icon-fixed-width",o)))+"\n          "+x((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"plan",o):w.call(e,"s","plan",o)))+'\n        </li>\n        <li class="action user-settings nomobile">\n          '+x((r=n.icon||e&&e.icon,o={hash:{},data:t},r?r.call(e,"settings icon-fixed-width",o):w.call(e,"icon","settings icon-fixed-width",o)))+"\n          "+x((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"your-settings",o):w.call(e,"s","your-settings",o)))+"\n        </li>\n        ",o={hash:{},inverse:k.noop,fn:k.program(18,m,t),data:t},(r=n.ifMobile)?i=r.call(e,o):(r=e&&e.ifMobile,i=typeof r===_?r.call(e,o):r),n.ifMobile||(i=S.call(e,i,{hash:{},inverse:k.noop,fn:k.program(18,m,t),data:t})),(i||0===i)&&(s+=i),s+='\n        <li class="action sign-out">'+x((r=n.icon||e&&e.icon,o={hash:{},data:t},r?r.call(e,"signout icon-fixed-width",o):w.call(e,"icon","signout icon-fixed-width",o)))+x((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"sign-out",o):w.call(e,"s","sign-out",o)))+"</li>\n      </ul>\n    </div>\n  "}function d(e,t){var i,r,o="";return o+='\n      <div id="intercom-button" class="feedback-button">\n        <div class="feedback-message">\n          <i class="icon icon-envelope-alt"></i>\n          '+x((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"title-bar-feedback",r):w.call(e,"s","title-bar-feedback",r)))+"\n        </div>\n      </div>\n    "}function h(e,t){var i,r,o,s="";return s+='\n          <li class="account-notification account-notification-',(r=n.key)?i=r.call(e,{hash:{},data:t}):(r=e&&e.key,i=typeof r===_?r.call(e,{hash:{},data:t}):r),s+=x(i)+'">\n          '+x((r=n["icon-fa"]||e&&e["icon-fa"],o={hash:{},data:t},r?r.call(e,"exclamation-sign",o):w.call(e,"icon-fa","exclamation-sign",o)))+'\n            <div class="account-notification-text">\n              <div class="notification-title">\n                '+x((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"account-notification-",e&&e.key,o):w.call(e,"s","account-notification-",e&&e.key,o)))+'\n              </div>\n              <div class="notification-details">\n                '+x((r=n.s||e&&e.s,o={hash:{},data:t},r?r.call(e,"account-notification-",e&&e.key,"-details",o):w.call(e,"s","account-notification-",e&&e.key,"-details",o)))+"\n              </div>\n            </div>\n          </li>\n        "}function f(e){var t,n="";return n+="\n            "+x((t=e&&e.organization,t=null==t||t===!1?t:t.name,typeof t===_?t.apply(e):t))+"\n          "}function p(e,t){var i,r,o="";return o+="\n            "+x((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"organization",r):w.call(e,"s","organization",r)))+"\n          "}function m(e,t){var i,r,o="";return o+='\n          <li class="action message-us" id="intercom-button">\n            <i class="icon icon-question-sign icon-fixed-width"></i>\n            '+x((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"title-bar-feedback",r):w.call(e,"s","title-bar-feedback",r)))+"\n          </li>\n        "}function g(){return"\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var v,b,y="",w=n.helperMissing,x=this.escapeExpression,k=this,_="function",S=n.blockHelperMissing;return y+='<a class="fieldbook-logo" href="/">\n  <img src="/img/fieldbook-icon.svg">\n</a>\n<span class="section-title">',(b=n.title)?v=b.call(t,{hash:{},data:r}):(b=t&&t.title,v=typeof b===_?b.call(t,{hash:{},data:r}):b),y+=x(v)+'</span>\n\n<div class="nav">\n  ',v=n.unless.call(t,(v=t&&t.user,null==v||v===!1?v:v.isAnonymousUser),{hash:{},inverse:k.noop,fn:k.program(1,o,r),data:r}),(v||0===v)&&(y+=v),y+="\n\n  ",v=n["if"].call(t,t&&t.isReadOnlyMode,{hash:{},inverse:k.noop,fn:k.program(4,a,r),data:r}),(v||0===v)&&(y+=v),y+="\n\n  ",v=n["if"].call(t,t&&t.user,{hash:{},inverse:k.program(20,g,r),fn:k.program(9,u,r),data:r}),(v||0===v)&&(y+=v),y+='\n\n\n  <div class=\'active-indicator\'></div>\n</div>\n\n<form class="hidden-logout-form" action="/logout" method="post">\n  <input type="hidden" name="_csrf" value="',(b=n.csrfToken)?v=b.call(t,{hash:{},data:r}):(b=t&&t.csrfToken,v=typeof b===_?b.call(t,{hash:{},data:r}):b),y+=x(v)+'">\n</form>\n'}),this.Handlebars.templates.tutorialIntro=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l="function",c=this.escapeExpression;return a+='<div class="modal-header">\n  <h3>',(s=n.title)?o=s.call(t,{hash:{},data:r}):(s=t&&t.title,o=typeof s===l?s.call(t,{hash:{},data:r}):s),a+=c(o)+'</h3>\n</div>\n\n<div class="modal-body">\n  ',(s=n.openingText)?o=s.call(t,{hash:{},data:r}):(s=t&&t.openingText,o=typeof s===l?s.call(t,{hash:{},data:r}):s),(o||0===o)&&(a+=o),a+='\n</div>\n\n<div class="modal-footer">\n  <button class="start" data-dismiss="modal">Start</button>\n</div>\n'}),this.Handlebars.templates.tutorialOutro=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a="",l="function";return a+='<div class="modal-header">\n  <h3>Tutorial complete!</h3>\n</div>\n\n<div class="modal-body">\n<p>\n  ',(s=n.completionText)?o=s.call(t,{hash:{},data:r}):(s=t&&t.completionText,o=typeof s===l?s.call(t,{hash:{},data:r}):s),(o||0===o)&&(a+=o),a+='\n</p>\n</div>\n\n<div class="modal-footer">\n  <a href="/tutorials">\n    <button>More Tutorials</button>\n  </a>\n  <button  data-dismiss="modal">Done</button>\n</div>\n'}),this.Handlebars.templates.tutorials=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n  <div class="tutorial" data-slug="',(r=n.slug)?i=r.call(e,{hash:{},data:t}):(r=e&&e.slug,i=typeof r===p?r.call(e,{hash:{},data:t}):r),o+=f(i)+'">\n    <h2 class="tutorial-title">\n      ',i=n["if"].call(e,e&&e.complete,{hash:{},inverse:m.program(4,a,t),fn:m.program(2,s,t),data:t}),(i||0===i)&&(o+=i),o+="\n\n      ",(r=n.title)?i=r.call(e,{hash:{},data:t}):(r=e&&e.title,i=typeof r===p?r.call(e,{hash:{},data:t}):r),o+=f(i)+"\n    </h2>\n  </div>\n"}function s(e,t){var i,r,o="";return o+="\n        "+f((i=n["icon-fa"]||e&&e["icon-fa"],r={hash:{},data:t},i?i.call(e,"ok-circle icon-fixed-width",r):h.call(e,"icon-fa","ok-circle icon-fixed-width",r)))+"\n      "}function a(e,t){var i,r,o="";return o+="\n        "+f((i=n["icon-fa"]||e&&e["icon-fa"],r={hash:{},data:t},i?i.call(e,"circle-blank icon-fixed-width",r):h.call(e,"icon-fa","circle-blank icon-fixed-width",r)))+"\n      "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var l,c,u,d="",h=n.helperMissing,f=this.escapeExpression,p="function",m=this;return d+='<h1 class="title">'+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"tutorials-title",u):h.call(t,"s","tutorials-title",u)))+'</h1>\n<p class="intro">'+f((c=n.s||t&&t.s,u={hash:{},data:r},c?c.call(t,"tutorials-intro",u):h.call(t,"s","tutorials-intro",u)))+"</p>\n\n",l=n.each.call(t,t&&t.tutorials,{hash:{},inverse:m.noop,fn:m.program(1,o,r),data:r}),(l||0===l)&&(d+=l),d+="\n"}),this.Handlebars.templates.userSettings=Handlebars.template(function(e,t,n,i,r){function o(){return' checked="checked"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var s,a,l,c="",u=n.helperMissing,d=this.escapeExpression,h=this;return c+='<div class="modal-header">\n  '+d((a=n.icon||t&&t.icon,l={hash:{},data:r},a?a.call(t,"settings",l):u.call(t,"icon","settings",l)))+'<h3 class="title">'+d((a=n.s||t&&t.s,l={hash:{},data:r},a?a.call(t,"your-settings",l):u.call(t,"s","your-settings",l)))+'</h3>\n  <div class="done"></div>\n</div>\n\n<div class="modal-body">\n  <div class="settings-section">\n    <div class="settings-header">\n      '+d((a=n.s||t&&t.s,l={hash:{},data:r},a?a.call(t,"date-format",l):u.call(t,"s","date-format",l)))+'\n    </div>\n    <div class="date-options settings-options">\n      <label><input type="radio" name="dateLocale" value="us" ',a=n.compare||t&&t.compare,l={hash:{},inverse:h.noop,fn:h.program(1,o,r),data:r},s=a?a.call(t,(s=t&&t.localeOptions,null==s||s===!1?s:s.date),"us",l):u.call(t,"compare",(s=t&&t.localeOptions,null==s||s===!1?s:s.date),"us",l),(s||0===s)&&(c+=s),c+=">"+d((a=n.s||t&&t.s,l={hash:{},data:r},a?a.call(t,"date-format-us",l):u.call(t,"s","date-format-us",l)))+'</input></label>\n      <label><input type="radio" name="dateLocale" value="eu" ',a=n.compare||t&&t.compare,l={hash:{},inverse:h.noop,fn:h.program(1,o,r),data:r},s=a?a.call(t,(s=t&&t.localeOptions,null==s||s===!1?s:s.date),"eu",l):u.call(t,"compare",(s=t&&t.localeOptions,null==s||s===!1?s:s.date),"eu",l),(s||0===s)&&(c+=s),c+=">"+d((a=n.s||t&&t.s,l={hash:{},data:r},a?a.call(t,"date-format-eu",l):u.call(t,"s","date-format-eu",l)))+'</input></label>\n    </div>\n  </div>\n  <div class="settings-section">\n    <div class="settings-header">\n      '+d((a=n.s||t&&t.s,l={hash:{},data:r},a?a.call(t,"number-format",l):u.call(t,"s","number-format",l)))+'\n    </div>\n    <div class="number-options settings-options">\n      <label><input type="radio" name="numberLocale" value="us" ',a=n.compare||t&&t.compare,l={hash:{},inverse:h.noop,fn:h.program(1,o,r),data:r},s=a?a.call(t,(s=t&&t.localeOptions,null==s||s===!1?s:s.number),"us",l):u.call(t,"compare",(s=t&&t.localeOptions,null==s||s===!1?s:s.number),"us",l),(s||0===s)&&(c+=s),c+=">"+d((a=n.s||t&&t.s,l={hash:{},data:r},a?a.call(t,"number-format-us",l):u.call(t,"s","number-format-us",l)))+'</input></label>\n      <label><input type="radio" name="numberLocale" value="eu" ',a=n.compare||t&&t.compare,l={hash:{},inverse:h.noop,fn:h.program(1,o,r),data:r},s=a?a.call(t,(s=t&&t.localeOptions,null==s||s===!1?s:s.number),"eu",l):u.call(t,"compare",(s=t&&t.localeOptions,null==s||s===!1?s:s.number),"eu",l),(s||0===s)&&(c+=s),c+=">"+d((a=n.s||t&&t.s,l={hash:{},data:r},a?a.call(t,"number-format-eu",l):u.call(t,"s","number-format-eu",l)))+'</input></label>\n    </div>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <div class="done action-button">'+d((a=n.s||t&&t.s,l={hash:{},data:r},a?a.call(t,"done",l):u.call(t,"s","done",l)))+"</div>\n</div>\n"}),this.Handlebars.templates.form=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=this.merge(i,e.partials),r=r||{};
var o,s="",a=this;return o=a.invokePartial(i.form,"form",t,n,i,r),(o||0===o)&&(s+=o),s+="\n"}),this.Handlebars.templates.templateDetail=Handlebars.template(function(e,t,n,i,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var o,s,a,l="",c="function",u=this.escapeExpression,d=n.helperMissing;return l+='<div class="template-content">\n  <h1 class="title">',(s=n.title)?o=s.call(t,{hash:{},data:r}):(s=t&&t.title,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'</h1>\n  <p class="subtitle">',(s=n.subtitle)?o=s.call(t,{hash:{},data:r}):(s=t&&t.subtitle,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'</p>\n  <button class="btn use-template"><i class="icon-copy"></i> '+u((s=n.s||t&&t.s,a={hash:{},data:r},s?s.call(t,"use-this-template",a):d.call(t,"s","use-this-template",a)))+'</button>\n\n  <a class="screenshot-link" href="',(s=n.screenshotUrl)?o=s.call(t,{hash:{},data:r}):(s=t&&t.screenshotUrl,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'">\n    <img class="screenshot" src="',(s=n.screenshotUrl)?o=s.call(t,{hash:{},data:r}):(s=t&&t.screenshotUrl,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+'">\n  </a>\n\n  <p class="description">',(s=n.description)?o=s.call(t,{hash:{},data:r}):(s=t&&t.description,o=typeof s===c?s.call(t,{hash:{},data:r}):s),l+=u(o)+"</p>\n</div>\n"}),this.Handlebars.templates.templateList=Handlebars.template(function(e,t,n,i,r){function o(e,t){var i,r,o="";return o+='\n  <h2 class="category-title">',(r=n.categoryTitle)?i=r.call(e,{hash:{},data:t}):(r=e&&e.categoryTitle,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+"</h2>\n  ",i=n.each.call(e,e&&e.templates,{hash:{},inverse:h.noop,fn:h.program(2,s,t),data:t}),(i||0===i)&&(o+=i),o+="\n"}function s(e,t){var i,r,o="";return o+='\n    <a class="template" href="/templates/',(r=n.slug)?i=r.call(e,{hash:{},data:t}):(r=e&&e.slug,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+'">\n      <img class="template-thumbnail" src="',(r=n.screenshotThumbUrl)?i=r.call(e,{hash:{},data:t}):(r=e&&e.screenshotThumbUrl,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+'" srcset="',(r=n.screenshotThumbUrl)?i=r.call(e,{hash:{},data:t}):(r=e&&e.screenshotThumbUrl,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+" 1x, ",(r=n.screenshotThumb2xUrl)?i=r.call(e,{hash:{},data:t}):(r=e&&e.screenshotThumb2xUrl,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+' 2x">\n      <h2 class="template-title">',(r=n.title)?i=r.call(e,{hash:{},data:t}):(r=e&&e.title,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+'</h2>\n      <p class="subtitle">',(r=n.subtitle)?i=r.call(e,{hash:{},data:t}):(r=e&&e.subtitle,i=typeof r===u?r.call(e,{hash:{},data:t}):r),o+=d(i)+"</p>\n    </a>\n  "}function a(e,t){var i,r,o="";return o+='\n  <p class="loading">'+d((i=n.s||e&&e.s,r={hash:{},data:t},i?i.call(e,"loading",r):f.call(e,"s","loading",r)))+"</p>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var l,c="",u="function",d=this.escapeExpression,h=this,f=n.helperMissing;return l=n.each.call(t,t&&t.categories,{hash:{},inverse:h.program(4,a,r),fn:h.program(1,o,r),data:r}),(l||0===l)&&(c+=l),c+="\n"})}).call(n,t,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"handlebars-runtime":"handlebars-runtime"}],21:[function(e,t,n){n.trackWorkflow=e("../tutorials/trackWorkflow"),n.addDetail=e("../tutorials/addDetail"),n.focusRelevant=e("../tutorials/focusRelevant"),n.beyondGrid=e("../tutorials/beyondGrid")},{"../tutorials/addDetail":79,"../tutorials/beyondGrid":80,"../tutorials/focusRelevant":81,"../tutorials/trackWorkflow":83}],22:[function(e,t){(function(n){"use strict";var i=e("backbone");t.exports=n._getUnderscore(_.clone(i.Events)).extend({changesInflight:0,addInflightChange:function(){this.changesInflight++},removeInflightChange:function(){if(this.changesInflight--,this.changesInflight<0)throw new Error("Unbalanced removeInflightChange");this.hasChangesInflight()||this.trigger("changesDone")},hasChangesInflight:function(){return this.changesInflight>0}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{backbone:"backbone"}],23:[function(e){(function(t){"use strict";e("babel-polyfill"),t._=e("underscore"),e("es6-math"),e("intrusive"),e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/common/prototypeExtensions"),e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/common/tabooLog"),t.global=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/tmp/build_96d1853f863eec5c2a9d5071e8378210/common/prototypeExtensions":247,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/common/tabooLog":251,"babel-polyfill":275,"es6-math":658,intrusive:674,underscore:"underscore"}],24:[function(e,t){"use strict";var n=function(e,t,n){this.target=e,this.name=t,this.args=n,this.initialize()};_.extend(n.prototype,{initialize:function(){},canApply:function(){return this.target&&this.target[this.name]},apply:function(){return this.target[this.name].apply(this.target,this.args)}}),t.exports=n},{}],25:[function(e,t){"use strict";var n=function(e){return e.charCodeAt()};_.extend(n,{BACKSPACE:8,TAB:9,RETURN:13,OPTION:18,COMMAND:91,SHIFT:16,CTRL:17,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,Z:90,EQUALS:61,EQUALS_KEY_DOWN:187,DELETE:46,HOME:36,END:35}),t.exports=n,n.matchesKeys=function(e){var t=Array.prototype.slice.call(arguments,1);return _.any(t,function(t){return e===n[t]})},n.matchEvent=function(e){if(!e)return!1;var t=_.toArray(arguments);return t[0]=e.which,n.matchesKeys.apply(n,t)},n.isModKeyEvent=function(e){return n.matchEvent(e,"SHIFT","CTRL","COMMAND","OPTION")},n.isPrintableCharacter=function(e){return e>47&&58>e||32===e||13===e||e>64&&91>e||e>95&&112>e||e>185&&193>e||61===e||172===e||e>218&&223>e}},{}],26:[function(e,t,n){"use strict";function i(){var e=_.chain(arguments).toArray().compact().value().join("_");mixpanel.track(e)}function r(){var e=["send","event"].concat(_.toArray(arguments));ga.apply(null,e)}n.track=function(){i.apply(null,arguments),r.apply(null,arguments)}},{}],27:[function(e,t){(function(n){"use strict";var i=e("./index"),r=e("./model"),o=e("moment"),s=e("../dev"),a=e("backbone"),l=r.extend({url:"/account",ignoredLastWriteWinsKeys:function(){return["apiCount"]},hasFeatureFlag:function(e){var t=this.get("featureFlags")||{};return t[e]},isAnonymousUser:function(){return!this.id},referralUrl:function(){return"{{origin}}/?rc={{tag}}".stencil({origin:window.location.origin,tag:this.get("referralTag")})},firstUsedAt:function(){var e=this,t=["firstActiveLoginAt","signupAt"],i=n._getUnderscore(t).find(function(t){return e.get(t)});return o.from(i?new Date(this.get(i)):0)},createdWithinLastDay:function(){var e=o().subtract(1,"day");return e.isBefore(this.firstUsedAt())},autodetectLocale:function(){var e={};this.dateFormat()||(e.dateLocale="eu","6/1/2015"===new Date("June 1, 2015").toLocaleDateString()&&(e.dateLocale="us")),this.numberFormat()||(e.numberLocale="eu","1,234.5"===1234.5.toLocaleString()&&(e.numberLocale="us")),_.isEmpty(e)||(this.isAnonymousUser()?this.set(e):this.saveIfNeeded(e,{error:defaultErrorHandler("update-user")}))},localeOptions:function(){var e=this.dateFormat(),t=this.numberFormat();return e&&t||(this.autodetectLocale(),e=this.dateFormat(),t=this.numberFormat()),{date:e,number:t}},numberFormat:function(){return this.get("numberLocale")},dateFormat:function(){return this.get("dateLocale")},contextKeys:["isAnonymousUser","referralUrl","localeOptions"],fetchAndUpdateUser:function(e){var t=this;e=_.defaults({},e,{success:_.noop}),e.success=e.success.before(function(){var e=l.currentUser();e.nonLocalSet(t.attributes)}),this.fetch(e)},qSendVerificationEmail:function(){if(!l.currentUser())throw new Error("Tried to send verification email with no user");if(l.isPrimaryEmailConfirmed())throw new Error("User is already verified");return Q(a.ajax({method:"POST",url:"/signup/email/confirm"}))}});l.set=function(e){return this.account=new l(e)},l.isCurrentUser=function(e){return this.account.id?n._getUnderscore(e).soak("@_id")===this.account.id:!1},l.currentUser=function(){return this.account.id&&i.User.findIfExists(this.account.id)},l.init=function(){l.isPrimaryEmailConfirmed()||l.account.isAnonymousUser()||$(window).focus(l.listenForVerify)},l.listenForVerify=function(){l.account.fetchAndUpdateUser({success:function(){l.isPrimaryEmailConfirmed()&&(l.account.trigger("account-verified"),$(window).off("focus",l.listenForVerify))},error:function(e){console.log("Error fetching account (checking for verification):",e)}})},l.isPrimaryEmailConfirmed=function(){return n._getUnderscore(this).soak("currentUser().isPrimaryEmailConfirmed()")},s.add("user",function(){return l.currentUser()}),s.add("account",function(){return l.account}),t.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../dev":7,"./index":47,"./model":49,backbone:"backbone",moment:"moment"}],28:[function(e,t){"use strict";var n={action:function(e){var t=[null,this].concat(_.rest(arguments));return new(e.bind.apply(e,t))}};t.exports=function(e){return _.extend(e.prototype,n),e.extendActions=function(e){var t=this;return t.prototype.actions=_.extend({},t.prototype.actions,e)},e}},{}],29:[function(e,t){"use strict";var n=e("./model"),i=e("./collection"),r=(e("./index"),n.extend({book:function(){return this.collection&&this.collection.parent}}));r.Collection=i.extend({model:r,urlDirectory:"/apiKeys"}),t.exports=r},{"./collection":34,"./index":47,"./model":49}],30:[function(e,t){"use strict";function n(e){return"GET"!==e&&"HEAD"!==e&&"OPTIONS"!==e}var i=e("backbone"),r=e("node-uuid"),o=e("../csrf"),s=e("./index"),a=e("../globalEvents"),l=e("../trackJs"),c=e("../performance"),u=e("../../common/values/valueTimestamp"),d=e("../../common/version"),h=e("./deferredRequestController");try{var f=e("jquery");i.$=f}catch(p){}var m={},g=(t.exports.hasSentRequestId=function(e){return m[e]},function(){var e=r.v4();return m[e]=1,e});s.outstandingModifyingRequests=0,s.outstandingRequests=0,s.overallRequests=0,h.interceptAjax(i);var v=i.ajax;i.ajax=function(e){return e.suppressPerformanceMonitoring?b(e):c.getInstance().addTiming("ajax-send",function(){return b(e)})};var b=function(e){if(e.dataType&&e.url){var t="."+e.dataType;-1===e.url.indexOf(t,e.url.length-t.length)&&(e.url+=t)}var r=e.headers||{};r["X-Request-ID"]||(r["X-Request-ID"]=g()),window.clientId&&(r["X-Client-ID"]=window.clientId);var d=e.timestamp||u.now();r["X-Client-Timestamp"]=d.toString(),e.suppressRequestTracking||(s.outstandingRequests+=1,s.overallRequests+=1);var h=n(e.type);h&&(_.defaults(r,o.headers()),e.suppressRequestTracking||(s.outstandingModifyingRequests+=1));var f=(new Date).getTime(),p=e.complete;e.complete=function(){e.suppressRequestTracking||(s.outstandingRequests-=1),e.suppressPerformanceMonitoring||c.getInstance().addDuration("ajax-duration",(new Date).getTime()-f),s.outstandingRequests||a.trigger("noOutstandingRequests"),h&&(e.suppressRequestTracking||(s.outstandingModifyingRequests-=1)),p&&p.apply(this,arguments)};var m=e.success;e.success=function(e,t,n){var i=this;y(n)&&m&&m.apply(i,arguments)},e.headers=r;var b=e.error;return e.error=function(t){t.requestSettings=e,y(t),401===t.status&&a.trigger("unauthorizedRequest",t),b&&b.apply(this,arguments)},l.watchAll(e),v.call(i,e)},y=function(e){var t=e.getResponseHeader("X-Server-Version");return t&&!d.isEqual(t)?(a.trigger("badServerResponseVersion",t),!1):!0},w=i.sync;i.sync=function(e,t,n){if(null==n.error)throw new Error("No error handler provided to Backbone.sync");n=_.extend({},n||{});var i=n.success||_.noop;return n.success=function(e){var t,r=this;e=_.clone(e),e&&e.sideEffects&&(t=e.sideEffects,delete e.sideEffects),e&&e.$models&&(e=e.$models);var o=_(arguments).tail();o.unshift(e);var s=i.apply(r,o);return Fieldbook.models.Model.handleSideEffects(t).then(function(){n.postSideEffect&&n.postSideEffect.call(r,e)}).done(),s},w.call(this,e,t,n)}},{"../../common/values/valueTimestamp":257,"../../common/version":258,"../csrf":6,"../globalEvents":22,"../performance":75,"../trackJs":78,"./deferredRequestController":37,"./index":47,backbone:"backbone",jquery:"jquery","node-uuid":695}],31:[function(e,t){(function(n){"use strict";var i=e("./index"),r=e("./model"),o=e("./collection"),s=e("./store"),a=(e("../../common/values"),e("./template"),e("moment")),l=r.extend({urlRoot:"/books",hasOne:{creator:function(e){return i.User.add(e)},template:function(e){return i.Template.add(e)}},hasMany:{joins:function(){return new i.Join.Collection([])},users:function(){return new i.BookUser.Collection([])},sheets:function(){return new i.Sheet.Collection([])},apiKeys:function(){return new i.ApiKey.Collection([])},integrations:function(){return new i.Integration.Collection([])},codelets:function(){return new i.Codelet.Collection([])}},waitForSheets:function(){return this.get("sheets")?Q.all(this.get("sheets").invoke("waitForRecords")):Q()},ensureCollection:function(){this.collection=this.collection||l.collection},needsFetch:function(){if(r.prototype.needsFetch.call(this))return!0;var e=this.get("sheets");return e?this.get("sheets").any(function(e){return e.needsFetch()}):!0},markFetched:function(){r.prototype.markFetched.call(this),this.get("sheets")&&this.get("sheets").markFetched()},sheetWithId:function(e){var t=this.get("sheets");return t&&t.findWhere({_id:e})},joinForField:function(e){return this.get("joins").find(function(t){return null!=t.sideForField(e)})},bookUserForUser:function(e){return this.get("users")?this.get("users").find(function(t){return t.get("user")===e}):null},bookUserForEmail:function(e){return this.get("users").find(function(t){return t.get("user").hasEmail(e)})},sharedWith:function(){return this.get("users").reject(function(e){return i.Account.isCurrentUser(e.get("user"))})},addSheet:function(e){this.get("sheets").create({},e)},extractSupersheet:function(e,t,n){this.get("sheets").create({sourceId:e.id,sourceKey:t},n)},copy:function(e){this.ensureCollection(),this.collection.create({sourceId:this.id},e)},leave:function(e){var t=this.currentBookUser();t.destroy(e)},destroy:function(){this.ensureCollection(),r.prototype.destroy.apply(this,arguments)},queueTarget:function(){return this},updateMissingLinks:function(e,t,n,i){this.get("sheets").each(function(r){r.updateMissingLinks(e,t,n,i)})},canLeave:function(){var e=this.currentBookUser();return e&&e.canDelete()},currentBookUser:function(){return this.bookUserForUser(i.Account.currentUser())},canDelete:function(){return i.Account.isCurrentUser(this.get("creator"))},templateVideoLink:function(){var e=this.get("template");return e?e.videoLink():null},hasIntegration:function(){return null!=this.getIntegration()},getIntegration:function(){return this.get("integrations")&&this.get("integrations").first()},getIntegrationType:function(){return n._getUnderscore(this).soak("getIntegration().get","type")},integrationName:function(){return n._getUnderscore(this).soak("getIntegration().name()")},integrationUpdateTime:function(){var e=this.getIntegration();if(e){var t=e.get("lastUpdated");if(t)return a.from(t).calendar()}},isReadOnlyMode:function(){var e=this.currentBookUser();return e?"view"===e.get("accessLevel"):this.get("anonymousAccessAllowed")?!0:!1},isApiReadOnlyMode:function(){return this.isReadOnlyMode()?!0:"editRow"===n._getUnderscore(this).soak("currentBookUser().@accessLevel")},isMetadataLocked:function(){if(this.isReadOnlyMode())return!0;var e=this.currentBookUser();return e?"editRow"===e.get("accessLevel"):!1},qGetTempApiKeyData:function(){var e="/books/{{id}}/tempKey".stencil(this);return Q($.getJSON(e)).then(function(e){return e.expiration=new Date(e.expiration),e})},contextKeys:["url","displayTitle","canLeave","canDelete","hasIntegration","integrationName","integrationUpdateTime","isReadOnlyMode","isMetadataLocked"]});s.addStore(l),l.qfetchBySheet=function(e){var t={data:$.param({sheetId:e.id})},n=new l.Collection;return n.qfetch(t).then(function(e){var t=e.at(0);return t.fetched=!0,t})},l.qfetchBySheetIfNeeded=function(e){var t=e.book();return t&&!t.needsFetch()?Q(t):this.qfetchBySheet(e)},l.Collection=o.extend({model:function(e,t){return l.add(e,t)},url:"/books",comparator:function(e,t){var n=e.id,i=t.id;return n===i?0:i>n?1:-1}}),l.collection=new l.Collection,t.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/values":253,"./collection":34,"./index":47,"./model":49,"./store":64,"./template":68,moment:"moment"}],32:[function(e,t){(function(n){"use strict";var i=e("./model"),r=e("./collection"),o=e("./index"),s=i.extend({hasOne:{user:function(e){return o.User.add(e)}},book:function(){return this.collection&&this.collection.parent},getUser:function(){return this.get("user")},isCreator:function(){return this.get("user")===this.book().get("creator")},canDelete:function(){return!this.isCreator()},accessLevelName:function(){return s.accessLevelNames[this.get("accessLevel")]},contextKeys:["isCreator","canDelete","accessLevelName","isMissing"],isCollapsed:function(e,t){if(!this.get("collapseDescriptions"))return!1;var n=this.collapseKey(e,t);return!!this.get("collapseDescriptions")[n]},collapseKey:function(e,t){var n=e.id;return t&&(n=n+"-"+t),n},saveCollapseStatus:function(e,t,n,i){if(this.isCollapsed(t,n)!==e){var r=_.defaults({},this.get("collapseDescriptions"));return r[this.collapseKey(t,n)]=e,this.saveIfNeeded("collapseDescriptions",r,i)}},isMissing:function(){return null==n._getUnderscore(this).soak("@user.@_id")}}),a=s.accessLevels=[{display:"View only",accessLevel:"view"},{display:"Edit rows",accessLevel:"editRow"},{display:"Admin",accessLevel:"admin"},{display:"Owner",accessLevel:"owner"}],l=s.accessLevelNames={};n._getUnderscore(a).each(function(e){l[e.accessLevel]=e.display}),s.Collection=r.extend({model:s,urlDirectory:"/users"}),t.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./collection":34,"./index":47,"./model":49}],33:[function(e,t){(function(n){"use strict";var i=e("./model"),r=e("./collection"),o=i,s=t.exports=o.extend({contextKeys:["endpointUrl"],endpointUrl:function(){var e=window.location.origin+"/codelet";return Fieldbook.env.codeletOrigin&&(e=Fieldbook.env.codeletOrigin),"{{origin}}/{{bookId}}/{{title}}".stencil({title:this.get("title"),bookId:n._getUnderscore(this).soak("@book._id"),origin:e})},qFetchLogs:function(){var e=this.url()+"/logs.html?nocache="+Math.random(),t=$.get(e);return Q(t)}}).addGetters({book:"collection.parent",updatedAt:function(){return new Date(this.get("updatedAt")||null)}});s.Collection=r.extend({model:s,urlDirectory:"/codelet",comparator:function(e){return 0-new Date(e.get("createdAt")||0)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./collection":34,"./model":49}],34:[function(e,t){(function(n){"use strict";var i=e("backbone"),r=e("../actions"),o=e("./actionable"),s=e("./fetchable"),a=e("./qfetchable"),l=e("./dataModelUpdatable"),c=e("../invocation"),u=i.Collection.extend({initialize:function(e,t){t&&t.urlDirectory&&(this.urlDirectory=t.urlDirectory),t&&t.url&&(this.url=t.url),i.Collection.prototype.initialize.apply(this,arguments),this.model&&!this.model.prototype.idAttribute&&(this.model.prototype.idAttribute="_id")},url:function(){return this.parent.url()+this.urlDirectory},create:function(e,t){return e.collection=this,this.action(this.actions.Add,e).do(t)},bulkCreate:function(e,t){t=_.extend({url:this.url()+"/bulk"},t);var i=this,r=t.wait;e=n._getUnderscore(e).map(function(e){return(e=i._prepareModel(e,t))?(r||i.add(e,t),e):!1});var o=t.success;return t.success=function(e,t,s){r&&n._getUnderscore(e).each(function(e){i.add(e,s)}),o&&o.call(s.context,e,t,s)},this.multiSave(e,t),e},multiSave:function(e,t){var r={type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(n._getUnderscore(e).invoke("toJSON",t))},o=t.success;t.success=function(i){var r=[];n._getUnderscore(i).each(function(n,i){var o=e[i];o.set(n,t),r.push(new c(o,"trigger",["sync",o,n,t]))}),o&&o.call(t.context,e,i,t),n._getUnderscore(r).invoke("apply")};var s=t.xhr=i.ajax(_.extend(r,t));return s},move:function(e,t,n){this.indexOf(e)!==t&&this.action(this.actions.Move,e,t).do(n)},patch:function(e,t){return this.request("patch",e,t)},update:function(e,t){return this.request("update",e,t)},request:function(e,t,n){n=n?_.clone(n):{},n=_.defaults(n,{reset:!0}),n.attrs=t,function(){var e=n;null==e.parse&&(e.parse=!0)}.call(this);var i=n.success,r=this;n.success=function(e){var t=n.reset?"reset":"set";r[t](e,n),i&&i(r,e,n),r.trigger("sync",r,e,n)};var o=n.error;return n.error=function(e){o&&o(r,e,n),r.trigger("error",r,e,n)},this.sync(e,this,n)},restore:function(e,t){var n=[{op:"restore",id:e.id}];return e&&e.trigger&&e.trigger("beforeRestore",e),this.patch(n,_.extend({reset:!0},t))},toContext:function(){return this.invoke("toContext")},queueTarget:function(){return this.parent?this.parent.queueTarget():this},sync:function(){return this.parent&&this.parent.isSynthetic()?void 0:i.Collection.prototype.sync.apply(this,arguments)},actions:r});Object.defineProperty(u.prototype,"_",{get:function(){return _(this.models)}}),l(u),superExtendable(u),s(u),a(u),o(u),_.extend(u.prototype,{markFetched:function(){s.methods.markFetched.call(this),this.invoke("markFetched")}}),t.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../actions":2,"../invocation":24,"./actionable":28,"./dataModelUpdatable":35,"./fetchable":44,"./qfetchable":60,backbone:"backbone"}],35:[function(e,t){"use strict";var n=e("../globalEvents"),i=function(e){var t=e.initialize||_.noop;e.initialize=function(){var e=this;return e.hasSetupDataModelUpdate||(e.hasSetupDataModelUpdate=!0,e.on("all",function(){n.trigger("dataModelUpdate")})),t.apply(e,arguments)}};t.exports=function(e){var t=e.extend;if(!t)throw new Error("Called dataModelUpdatable on non-extendable constructor");return e.extend=function(){var n=this,r=t.apply(n,arguments);return i(e.prototype),r},e}},{"../globalEvents":22}],36:[function(e,t){(function(e){"use strict";t.exports=BaseObject.extend({constructorName:"deferredRequest",progress:0,onDeferred:function(){this.hasDeferred||(this.hasDeferred=!0,e._getUnderscore(this).soakCall("settings.deferredHandler.onDeferred",this))},onProgress:function(t){return this.progress=e._getUnderscore(Math.max(this.progress,t)).clamp(0,1),e._getUnderscore(this).soakCall("settings.deferredHandler.onProgress",t,this)},onSuccess:function(t){return this.status="success",e._getUnderscore(this).soakCall("settings.success",t,this.status,this.xhr)},onError:function(t){return this.status="error",e._getUnderscore(this).soakCall("settings.error",this.xhr,this.status,t)},onComplete:function(){e._getUnderscore(this).soakCall("settings.complete",this.xhr,this.status),e._getUnderscore(this).soakCall("settings.deferredHandler.onComplete",this.xhr,this.status)}}).addProperties("settings","xhr","requestId")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t){(function(n){"use strict";var i=e("./deferredRequest"),r=t.exports=BaseObject.extend({initialize:function(){this.deferredRequests={}},deferRequest:function(e){e.onDeferred(e)}.wrap("transformRequestArgument"),trackRequest:function(e,t,n){if(!e)throw new Error("No request id on deferred request");this.deferredRequests[e]=new i({settings:t,xhr:n,requestId:e})},untrackRequest:function(e){delete this.deferredRequests[e]},requestForId:function(e){if(!e)throw new Error("cannot find request without job id");var t=this.deferredRequests[e];return t},onJobProgress:function(e,t){return this.deferRequest(e),e.onProgress(t)}.wrap("transformRequestArgument"),onJobError:function(e,t){return this.deferRequest(e),e.onError(t)}.wrap("completeHandlerWrapper"),onJobSuccess:function(e,t){return this.deferRequest(e),e.onSuccess(t)}.wrap("completeHandlerWrapper"),onJobComplete:function(e){e&&e.onComplete()},transformRequestArgument:function(e,t){var i=n._getUnderscore(arguments).tail();return _.isObject(t)||(t=this.requestForId(t)),t?e.apply(this,n._getUnderscore(i).extend({0:t})):void 0},completeHandlerWrapper:function(e){var t=n._getUnderscore(arguments).toArray();t[0]=e.after("onJobComplete");var i=t[1],r=this.transformRequestArgument.apply(this,t);return delete this.deferredRequests[i],r}});r.interceptAjax=function(e){e.ajax=e.ajax.wrap(function(e,t){var i=_.soak(t,"headers.X-Request-ID");if(!i)return console.warn("Ajax request with no request ID"),e(l);var o,s,a=r.controller,l=_.defaults({},t,{success:_.noop,complete:_.noop});return l.success=l.success.wrap(function(e,r){return(s=_.soak(r,"$_DEFERRED"))?void a.deferRequest(i):(a.untrackRequest(i),e.apply(t,n._getUnderscore(arguments).tail()))}),l.complete=l.complete.wrap(function(e){return s?void 0:e.apply(t,n._getUnderscore(arguments).tail())}),o=e(l),a.trackRequest(i,t,o),o})},r.makeSingleton("controller"),dev.add("deferredRequestController",function(){return r.controller})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./deferredRequest":36}],38:[function(e,t){(function(n){"use strict";var i=e("./expressions/derivedValue"),r=(e("./"),e("../../common/values")),o=i.extend({initialize:function(){this.field=this.options.field,this.listenedRecords={},this.isListening=!1,this.joinListeners=[],i.prototype.initialize.apply(this,arguments)},removeJoinListeners:function(){var e=this;n._getUnderscore(this.joinListeners).each(function(t){e.stopListening(t.join,t.name,t.callback)}),this.joinListeners=[]},listenToJoin:function(e,t,n){this.joinListeners.push({join:e,name:t,callback:n}),this.listenTo(e,t,n)},listenForChanges:function(e){if(!this.isListening){e=e||this.record;var t=this.field;if(t){var n=this,i=t.sheet();this.listenTo(t,"change:type",this.resetListeners),this.listenTo(i,"fields:reset",function(){n.field=i.fieldWithKey(t.get("key")),this.resetListeners()});var r=t.getJoin();r?(this.isListening=!0,this.listenToJoin(r,"change:"+e.cid+":"+t.get("key"),this.onValueChanged),this.updateLinkedRecordListeners()):t.getJoinPromise().then(function(){n.onValueChanged()}).fail(function(e){if("ModelRemovedError"!==e.name)throw e}).done()}}},resetListeners:function(){this.removeJoinListeners(),this.removeLinkedRecordListeners(),this.stopListening(),this.isListening=!1,this.listenForChanges()},updateLinkedRecordListeners:function(){var e=this,t=this.field.getJoin();if(t){var i=t.sideForField(this.field),r=t.recordsForRecordOnSide(this.record,i);r.forEach(function(t){e.listenedRecords[t.cid]||e.listenTo(t,"name-change",e.triggerChange),t.id||e.listenToOnce(t,"sync",function(){e.onValueChanged()})});var o=this.listenedRecords;this.listenedRecords=n._getUnderscore(r).indexBy("cid"),_.each(o,function(t,n){e.listenedRecords[n]||e.stopListening(t,"name-change",e.triggerChange)})}},removeLinkedRecordListeners:function(){var e=this;_.each(this.listenedRecords,function(t){e.stopListening(t,"name-change",e.triggerChange)}),this.listenedRecords={}},calculateValue:function(){if(!this.field)return this._displayValue="",r.createEmpty();var e=this.field.getJoinRef(this.record)||r.createEmpty();return this._displayValue=void 0,e},displayValue:function(){return void 0===this._displayValue&&(this._displayValue=this.value.displayValue()),this._displayValue},onValueChanged:function(){var e=this.displayValue(),t=i.prototype.onValueChanged.apply(this,arguments);return t||e===this.displayValue()||(this.triggerChange(),t=!0),this.listenForChanges(),this.updateLinkedRecordListeners(),t}});t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/values":253,"./":47,"./expressions/derivedValue":41}],39:[function(e,t){"use strict";var n=e("../actions"),i=e("./model"),r=e("./collection"),o=i.extend({});o.Collection=r.extend({model:o,urlDirectory:"/enum",renameValue:function(e,t,n){return this.action(o.RenameValue,e,t).do(n)},parse:function(e){return _.map(e,function(e){return _.isObject(e)?e:{name:e}})},setValues:function(e,t){return this.action(o.SetValues,e).do(t)}}),o.SetValues=n.Action.extend({name:"enumSetValues",initialize:function(e,t){this.collection=e,this.newValues=t,this.oldValues=e.pluck("name"),this.oldType=e.parent.get("type"),this.newType=t.length>0?"enum":"generic"},perform:function(e){this.setValues(this.newValues,this.newType,e)},revert:function(e){this.setValues(this.oldValues,this.oldType,e)},setValues:function(e,t,n){this.collection.update(e,n),this.collection.parent.set("type",t);var i=_.map(e,function(e){return{name:e}});this.collection.reset(i)}}),o.RenameValue=n.Action.extend({name:"enumRenameValue",initialize:function(e,t,n){this.collection=e,this.from=t,this.to=n},renameEnum:function(e,t,n){var i={op:"rename",from:e,to:t};this.collection.patch([i],n);var r=this.collection.findWhere({name:e});r.set("name",t)},perform:function(e){this.renameEnum(this.from,this.to,e)},revert:function(e){this.renameEnum(this.to,this.from,e)}}),t.exports=o},{"../actions":2,"./collection":34,"./model":49}],40:[function(e,t){(function(n){"use strict";function i(e){this.data={},this.data.url=window.location.href,this.data.herokuVersion=window.herokuVersion,_(this.data).pickFrom(navigator,"userAgent","appVersion","platform","vendor"),_(this.data).extend(e)}{var r=e("../csrf.js"),o=e("../../common/constants");e("moment"),e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/env")}i.recentMessages=[],_(i.prototype).extend({urlRoot:"/errorReports.json",save:function(e){var t=this.data.summary;if(!(i.recentMessages.length>=o.RECENT_ERROR_COUNT&&n._getUnderscore(i.recentMessages).contains(t)))return i.recentMessages.push(t),i.recentMessages=n._getUnderscore(i.recentMessages).last(o.RECENT_ERROR_COUNT),e=_.defaults({},e||{},{contentType:"application/json",data:JSON.stringify(this.data),type:"POST",processData:!1,beforeSend:function(e){r.addToken(e)}}),$.ajax(this.urlRoot,e)}}),i.makeFromError=function(e,t){var n=e?e.toString():t,r=e&&e.stack;return new i({summary:n,stacktrace:r})},i.reportSilently=function(e){console.warn(e.toString());var t=this.makeFromError(e);t.save()},t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/constants":239,"../csrf.js":6,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/env":8,moment:"moment"}],41:[function(e,t){"use strict";function n(e){this.options=e,this.initialize()}var i=e("backbone");_.extend(n.prototype,i.Events,{initialize:function(){_(this).pickFrom(this.options,"record","expression","useSourceRecords"),this.listenForChanges()},listenForChanges:function(e){this.stopListening(),this.listenToExpression(this.expression,e)},listenToExpression:function(e,t,n){var i=this;if(t=t||this.record,n=n||{},null==e.hasField)throw new Error("Expected expression object but got :"+JSON.stringify(e)+"with constructor: "+e.constructor);if(e.hasField()){var r=e.keyId(t);return i.listenTo(t,"change:"+r,i.onValueChanged),void(n.reloadListeners&&i.listenTo(t,"change:"+r,i.listenForChanges))}"."===e.op?(this.listenToExpression(e.expr1,t,{reloadListeners:!0}),t.sheetPromise().thenImmediate(function(){var n=e.expr1.evaluate(t);n.isRef()&&n.eachRef(function(t){var n=t.linkedRecord();if(n)return n.sheetPromise().thenImmediate(function(){i.listenToExpression(e.expr2,n)})})}).done()):_.each(_.keys(e),function(t){_.contains(e.expressionKeys,t)?i.listenToExpression(e[t]):"arguments"===t&&_.each(e.arguments,function(e){i.listenToExpression(e)})})},calculateValue:function(){if(this.useSourceRecords&&this.record.sourceRecords)return this.expression.aggregateValueForRecords(this.record.sourceRecords);
try{return this.expression.evaluate(this.record)}catch(e){throw console.log("Error evaluating expression",e,this.expression.boundTerms(this.record)),e}},getValue:function(){return"value"in this||(this.value=this.calculateValue()),this.value},onValueChanged:function(){var e=this.value;this.value=this.calculateValue();var t=!1;return e?this.value&&!this.value.isEqual(e)&&(t=!0,this.triggerChange()):(t=!0,this.triggerChange()),t},triggerChange:function(){this.trigger("change")}}),t.exports=extendable(n)},{backbone:"backbone"}],42:[function(e,t){(function(n){"use strict";var i=e("moment"),r=e("../../../common/strings"),o=e("../../parser"),s=e("../../../common/values"),a=e("../../../common/errors"),l=o.cursorToken,c=t.exports=function(e,t){this.command=t,_.isString(e)&&(e={field:e}),_.extend(this,e);var n=this;_.each(this.expressionKeys,function(e){n[e]&&(n[e]=c.make(n[e],t))}),this.arguments&&(this.arguments=_.map(this.arguments,function(e){return c.make(e,t)}))},u=c.ParseError=AppError.extend({name:"ParseError",initialize:function(e){this.cause=e,this.message=e.message}});c.make=function(e,t){return e instanceof c?(e.command=t,e):new c(e,t)},c.isFormula=function(e){var t=e;return s.isValueObject(e)&&(t=e.displayValue()),_.isString(t)&&"="===t[0]},c.parse=function(e,t,n){n=_.defaults(n||{},{partialAllowed:!1});var i=e;if(s.isValueObject(e)&&(i=e.displayValue()),!i)return null;"="===i[0]&&(i=i.slice(1));var r;try{r=n.partialAllowed?o.parsePartialFormula(i):o.parseFormula(i)}catch(a){throw new u(a)}var l=this.make(r);if(t){l.validate(t,n);var c=l.boundTerms(t);l=this.make(c)}return l},c.createOrder=function(e,t){var n={ascending:e,op:"order"},i=new c(n,t.command);return i.expr1=t,i},c.createAggregate=function(e,t,n){var i={op:"fn",name:e,arguments:t};return new c(i,n)},c.functions={length:{rawValues:!0,func:function(e){return e?e.displayValue().length:0}},isblank:{rawValues:!0,func:function(e){return e?e.isBlank():!0}},abs:{args:1,func:Math.abs},acos:{args:1,func:Math.acos},asin:{args:1,func:Math.asin},atan:{args:1,func:Math.atan},atan2:{args:2,func:Math.atan2},ceil:{args:1,func:Math.ceil},cos:{args:1,func:Math.cos},exp:{args:1,func:Math.exp},floor:{args:1,func:Math.floor},log:{args:1,func:Math.log},pow:{args:2,func:Math.pow},random:{args:0,func:Math.random},round:{args:1,func:Math.round},sin:{args:1,func:Math.sin},sqrt:{args:1,func:Math.sqrt},tan:{args:1,func:Math.tan},percent:function(e){return null==e?s.createEmpty():_.isNumber(e)?new s.types.PercentValue(e):e},currency:function(e){return null==e?s.createEmpty():_.isNumber(e)?new s.types.CurrencyValue(e):e},concat:{minArgs:1,maxArgs:1/0,showInAutocomplete:!1,rawValues:!0,func:function(){var e=arguments[0],t=_.toArray(arguments).slice(1);return new s.create(t.join(e))}},match:{minArgs:2,maxArgs:2,rawValues:!0,showInAutocomplete:!1,func:function(e,t){var i;return t=d(t),e=e||"",t&&(e=e.toString(),i=e.match(t)),s.create(i?1===i.length?i[0]:n._getUnderscore(n._getUnderscore(i).compact()).tail().join(""):"")}},replace:{minArgs:3,maxArgs:3,rawValues:!0,showInAutocomplete:!1,func:function(e,t,n){if(null==n||null==t)return e;e=e||"",t=d(t);var i="";return t&&(i=e.toString().replace(t,n.toString())),s.create(i)}},replaceall:{minArgs:3,maxArgs:3,rawValues:!0,showInAutocomplete:!1,func:function(e,t,n){if(null==n||null==t)return e;e=e||"",t=d(t,"g");var i="";return t&&(i=e.toString().replace(t,n.toString())),s.create(i)}},year:{args:1,rawValues:!0,func:function(e){if(!e)return s.createEmpty();if(e.isEmpty()||e.isError())return e;if(!e.isDate())throw new a.ExecutionError("error-not-a-date",{func:"year"});return e.value.year()}},month:{args:1,rawValues:!0,func:function(e){if(!e)return s.createEmpty();if(e.isEmpty()||e.isError())return e;if(!e.isDate())throw new a.ExecutionError("error-not-a-date",{func:"month"});return e.value.month()+1}},day:{args:1,rawValues:!0,func:function(e){if(!e)return s.createEmpty();if(e.isEmpty()||e.isError())return e;if(!e.isDate())throw new a.ExecutionError("error-not-a-date",{func:"day"});return e.value.date()}},week:{args:1,rawValues:!0,func:function(e){if(!e)return s.createEmpty();if(e.isEmpty()||e.isError())return e;if(!e.isDate())throw new a.ExecutionError("error-not-a-date",{func:"week"});return e.value.week()}},today:{args:0,rawValues:!0,func:function(){return s.types.DateValue.today()}},date:{args:3,func:function(e,t,n){var r=i.from({year:e,month:t-1,day:n});if(r.isValid())return new s.types.DateValue(r);throw new a.ExecutionError("error-invalid-date")}},iserror:{minArgs:1,maxArgs:1,rawValues:!0,showInAutocomplete:!0,func:function(e){return e?e.isError():!1}}};var d=function(e,t){e=e||"";try{return new RegExp(e.toString(),t||"")}catch(n){if("SyntaxError"===n.name)return null;throw n}};c.functionConfig={},_.each(c.functions,function(e,t){var n=e;_.isFunction(e)?n={minArgs:1,maxArgs:2,commandMinArgs:1,commandMaxArgs:2,func:e}:void 0!==n.args&&(n.minArgs=n.args,n.maxArgs=n.args,n.commandMinArgs=n.args,n.commandMaxArgs=n.args),c.functionConfig[t]=_.defaults(n,{minArgs:1,maxArgs:1,commandMinArgs:1,commandMaxArgs:1,showInAutocomplete:!0})}),_.each(s.aggregates.expressionAggregates,function(e){var t=e.prototype.functionName,n=e.prototype.minArgs;null==n&&(n=1);var i=e.prototype.maxArgs;null==i&&(i=1);var r=e.prototype.commandMinArgs;null==r&&(r=n);var o=e.prototype.commandMaxArgs;null==o&&(o=i),c.functionConfig[t]={minArgs:n,maxArgs:i,commandMinArgs:r,commandMaxArgs:o,aggregate:!0,rawValues:!0,showInAutocomplete:!0,func:function(t){var n=new e([t]);return n.canPerform()?n.perform():s.createEmpty()}}}),c.getFunctionConfig=function(e){return e in c.functionConfig?c.functionConfig[e]:null},_.extend(c.prototype,{expressionKeys:["expr","expr1","expr2","cond","then","else"],bindCopyKeys:["op","name","val","key","ascending"],isAggregate:function(){var e=this.getFunctionConfig();return e?e.aggregate:!1},aggregateValueForRecords:function(e){if(this.arguments){var t=this,n=_.map(e,function(e){return 0===t.arguments.length?s.createEmpty():t.arguments[0].evaluate(e)});return this.getFunction().call(this,n)}return s.createEmpty()},getCompletionContext:function(){if(this.completionContext)return this.completionContext;var e,t=this;return _.each(this.expressionKeys,function(n){e=e||t[n]&&t[n].getCompletionContext()}),e||"fn"!==this.op||_.each(this.arguments,function(t){e=e||t.getCompletionContext()}),e},clearCompletionContext:function(){this.completionContext&&(this.completionContext=null),_.each(this.expressionKeys,function(e){this[e]&&this[e].clearCompletionContext()}.bind(this))},clone:function(){var e=_.keys(this);e=_.without(e,"command");var t=_.pick(this,e);return new c(t,this.command)},rightExprKey:function(){return this.expr2?"expr2":this.expr1?"expr1":this.expr?"expr":this.else?"else":this.then?"then":this.cond?"cond":null},rightExpr:function(){var e=this.rightExprKey();return e?this[e]:null},cursorExprKey:function(){var e=this;return _.find(this.expressionKeys,function(t){return e[t]&&e[t].hasCursor()})},cursorExpr:function(){var e=this.cursorExprKey();return e?this[e]:null},lastExpr:function(){var e=this.rightExpr();return e?e.lastExpr():this},replace:function(e,t){return this[e]=c.make(t,this.command),this},replaceRightExpr:function(e){return this.replace(this.rightExprKey(),e)},replaceCursorExpr:function(e){return this.replace(this.cursorExprKey(),e)},replaceLastArgument:function(e){var t=c.make(e,this.command);return this.arguments[this.arguments.length-1]=t,this},replaceCursorArgument:function(e){var t=this,n=c.make(e,this.command);return _.find(this.arguments,function(e,i){var r=e.hasCursor();return r&&(t.arguments[i]=n),r}),this},getCursorArgument:function(){return _.find(this.arguments,function(e){return e.hasCursor()})},addArgument:function(e){return this.arguments.push(c.make(e,this.command)),this},setComplete:function(){var e=this;return this.cursor=!1,_.invoke(this.arguments,"setComplete"),_.each(this.expressionKeys,function(t){var n=e[t];n&&n.setComplete()}),this},validateReportExpression:function(e,t){if('"'!==this.op&&"'"!==this.op&&"re"!==this.op||""!==this.val){if("fn"!==this.op)throw new a.ValidationError(this.isEmpty()?"error-report-trailing-comma":"error-report-expression-must-be-function");if(!this.isAggregate())throw new a.ValidationError("error-report-formula-not-aggregate",{name:this.name});if(this.arguments.length>1)throw new a.ValidationError("error-report-formula-too-many-args");var i=this.getFunctionConfig();if(this.arguments.length<this.getFunctionConfig().commandMinArgs)throw new a.ValidationError("error-report-formula-too-few-args",{name:this.name,count:i.minArgs});e&&n._getUnderscore(this.arguments).invoke("validate",e,t)}},saveValidation:function(e,t){try{return this.validate(e,t),!0}catch(n){if(!(n instanceof a.ValidationError))throw n;return this.validationError=n,!1}},validate:function(e,t){t=t||{};var n=this;if(this.hasField()){var i=this.findField(e);if(!i){var r;throw r=this.field?"error-formula-unknown-field-named":"error-formula-unknown-field",new a.ValidationError(r,{input:this.field})}if(t.forbiddenFields&&_.each(t.forbiddenFields,function(e){if(_.isEqual(e,i))throw new a.ValidationError("error-formula-circular",{key:i.slug()})}),i.isFormula()){var o=_.clone(t.forbiddenFields)||[];o.push(i),i.get("expression").validate(e,{forbiddenFields:o})}}if("fn"===this.op){var s=this.getFunction();if(!_.isFunction(s))throw new a.ValidationError("error-formula-unknown-function",{name:this.name});var l=this.getFunctionConfig(),c={name:this.name,minArgs:t.isReportFormula?l.commandMinArgs:l.minArgs,maxArgs:t.isReportFormula?l.commandMaxArgs:l.maxArgs};if(c.minArgs===c.maxArgs&&this.arguments.length!==c.minArgs)throw new a.ValidationError("error-formula-wrong-args",c);if(this.arguments.length<c.minArgs)throw new a.ValidationError("error-formula-too-few-args",c);if(this.arguments.length>c.maxArgs)throw new a.ValidationError("error-formula-too-many-args",c);_.each(this.arguments,function(i){i.validateFunctionArgument(e,t,n.name)})}if("."===this.op){this.expr1.validate(e,t);var u;try{u=this.expr1.getLinkedSheet(e)}catch(d){throw d instanceof a.UnknownContext?new a.ValidationError("error-formula-field-not-link",{dotExprLeft:this.expr1.stringify(e)}):d}if(!u)throw new a.ValidationError("error-formula-field-not-link",{dotExprLeft:this.expr1.stringify(e)});this.expr2.validate(u,t)}else _.each(this,function(i,r){_.contains(n.expressionKeys,r)?i.validate(e,t):"arguments"===r&&_.each(n.arguments,function(n){n.validate(e,t)})})},validateFunctionArgument:function(e,t,n){if(this.hasLinkedFieldDescendant(e)&&!(this.isSimpleField()||"."===this.op&&this.expr1.isSimpleField()&&this.expr2.isSimpleField()))throw new a.ValidationError("error-formula-function-argument-not-formula",{name:n})},hasLinkedFieldDescendant:function(e){var t=this;if(this.isSimpleField()){var n=this.findField(e);return n&&n.isAnyLink()?!0:!1}return"."===this.op?!0:"fn"===this.op?_.any(this.arguments,function(t){return t.hasLinkedFieldDescendant(e)}):_.any(this,function(n,i){return _.contains(t.expressionKeys,i)?n.hasLinkedFieldDescendant(e):!1})},getFunction:function(){var e=this.getFunctionConfig();return e?e.func:null},getFunctionConfig:function(){if("fn"===this.op){var e=this.name.toLowerCase();return c.getFunctionConfig(e)}return null},addMatch:function(e,t){this.command&&this.command.addMatch(e,t)},boundTerms:function h(e){this.field&&!this.key&&(this.key=this.keyId(e));var h={};this.cursor&&(h.cursor=this.cursor);var t=this;if("."===this.op){h.op=this.op,h.expr1=this.expr1.boundTerms(e);var n=this.expr1.getLinkedSheet(e);h.expr2=this.expr2.boundTerms(n)}else _.each(_.keys(this),function(n){_.contains(t.expressionKeys,n)?h[n]=t[n].boundTerms(e):_.contains(t.bindCopyKeys,n)?h[n]=t[n]:"arguments"===n&&(h[n]=_.invoke(t.arguments,"boundTerms",e))});return h},hasCursor:function(){return this.cursor},keyId:function(e){var t=this.findField(e);return t&&t.id},findField:function(e){var t=this,n=e.getFields();return this.key?n.find(function(e){return e.id===t.key}):this.field?n.find(function(e){return e.nameMatch(t.field)}):void 0},isBinaryOperation:function(){return this.op in this.binaryOperators},binaryOperators:{"+":"+","-":"-","*":"*","/":"/","^":"^","=":"=","!=":"!=","<":"<",">":">","<=":"<=",">=":">=",and:"and",or:"or","<>":"!=","&":"and","&&":"and","|":"or","||":"or","**":"^"},unaryOperators:{neg:"-",not:"not","!":"!"},hasOp:function(){return _.has(this,"op")},hasField:function(){return _.has(this,"key")||_.has(this,"field")},isEmpty:function(){return!this.hasOp()&&!this.hasField()},getLinkedSheet:function(e){if(this.hasField()){var t=this.findField(e);if(t&&t.isAnyLink()&&t.linkedSheet())return t.linkedSheet();throw new a.UnknownContext("error-unknown-context",{name:this.field||r["unknown-field"]()})}if("."===this.op){var n=this.expr1.getLinkedSheet(e);return this.expr2.getLinkedSheet(n)}throw new Error("not a dotExpr")},stringify:function(e,t){t=t||{};var n=function(){if(this.hasField()){var i=this.findField(e);return _.soak(i,"slug()")||this.field||null}if(this.isBinaryOperation())return this.expr1.stringify(e,t)+" "+this.op+" "+this.expr2.stringify(e,t);if("."===this.op){var o;try{o=this.expr1.getLinkedSheet(e)}catch(s){if(!(s instanceof a.UnknownContext))throw s}var l=this.expr1.stringify(e,t),c=o?this.expr2.stringify(o,t):"null";return l+"."+c}if(":"===this.op)return this.expr1.stringify(e,t)+":"+this.expr2.stringify(e,t);if("neg"===this.op)return"-"+this.expr.stringify(e,t);if("not"===this.op)return"not "+this.expr.stringify(e,t);if("!"===this.op)return"!"+this.expr.stringify(e,t);if("if"===this.op)return n="if "+this.cond.stringify(e,t),this.then&&(n+=" then "+this.then.stringify(e,t)),this.else&&(n+=" else "+this.else.stringify(e,t)),n;if("fn"===this.op){var u=this.name.toLowerCase();return n=u+"("+_.invoke(this.arguments,"stringify",e,t).join(", "),this.cursor||(n+=")"),n}if("bareword"===this.op)return this.val;if("("===this.op)return n="("+this.expr.stringify(e,t),this.cursor||(n+=")"),n;if('"'===this.op)return n='"'+r.escapeChars(this.val,'"'),this.cursor||(n+='"'),n;if("'"===this.op)return n="'"+r.escapeChars(this.val,"'"),this.cursor||(n+="'"),n;if("re"===this.op)return n="@/"+this.val.replace(/\//g,"\\/"),this.cursor||(n+="/"),n;if("order"===this.op){var d=this.ascending?" asc":" desc";return this.expr1.stringify(e,t)+d}if(this.hasOp()){if("NONE"===this.op)return this.expr1.stringify(e,t)+this.expr2.stringify(e,t);throw new Error('unsupported operator "'+this.op+'"')}return""}.bind(this)();return this.completionContext&&(t.positionCursor&&(n+=l),t.includeCompletionContexts&&(n+=this.completionContext.name)),n},nameify:function(e){if(this.hasField()){var t=this.findField(e);return _.soak(t,"displayName()")||""}if("fn"===this.op){var n=r.capitalize(this.name.toLowerCase());return this.arguments&&this.arguments.length>0?n+" of "+_.invoke(this.arguments,"nameify",e).join(", "):n}return'"'===this.op||"'"===this.op||"re"===this.op?this.val:this.stringify(e)},evaluate:function(e){try{var t=this.evaluateUnsafe(e);if(t.isNaN())throw new a.ExecutionError("error-formula-calculation");return t}catch(n){if(n instanceof a.ExecutionError)return s.makeError(n);if(n instanceof a.ValidationError)return s.makeError(n);throw n}},evaluateUnsafe:function(e){if(this.validationError)throw this.validationError;var t,n;if(void 0!==this.val)return n=s.create(this.val),'"'!==this.op&&"'"!==this.op&&"re"!==this.op||n.isDate()||n.isNumericValue()?n:new s.types.StringValue(this.val);if(this.hasField())return t=this.keyId(e),t?e.nameKey()===t?s.create(e.name()):e.getValue(t):s.createEmpty();if("."===this.op){if(n=this.expr1.evaluateUnsafe(e),!n.isRef())return s.createEmpty();var i=n.linkedRecord();return i?this.expr2.evaluateUnsafe(i):s.createEmpty()}if(":"===this.op){t=this.expr1.keyId(e),n=this.expr1.evaluateUnsafe(e);var r=this.expr2.evaluateUnsafe(e);return this.addMatch(r.displayValue(),t),n.performOperation(this.op,r)}if(this.isBinaryOperation()){var o=this.binaryOperators[this.op];return this.expr1.evaluateUnsafe(e).performOperation(o,this.expr2.evaluateUnsafe(e))}if("neg"===this.op)return this.expr.evaluateUnsafe(e).performOperation(this.op);if("not"===this.op||"!"===this.op)return this.expr.evaluateUnsafe(e).performOperation("!");if("("===this.op)return this.expr.evaluateUnsafe(e);if("if"===this.op)return this.cond.evaluateUnsafe(e).booleanValue()?this.then?this.then.evaluateUnsafe(e):s.createEmpty():this.else?this.else.evaluateUnsafe(e):s.createEmpty();if("fn"===this.op)return this.evaluateFunction(e);if("order"===this.op)throw new a.ExecutionError("error-formula-sort-top-level");if(this.isEmpty())return s.createEmpty();throw new Error('unsupported operator "'+this.op+'"')},evaluateFunction:function(e){if("fn"!==this.op)throw new Error("Attempted to call evaluateFunction on non-function expression!");var t=this.getFunction();if(!_.isFunction(t))throw new a.ExecutionError("error-formula-unknown-function",{name:this.name});var i=this.getFunctionConfig(),r=n._getUnderscore(_.invoke(this.arguments,"functionValueFor",e,i)).flatten();return i.aggregate&&(r=[r]),s.create(t.apply(Math,r))},functionValueFor:function(e,t){var i=this.linkValue(e);return _.isArray(i)||(i=[i]),i=n._getUnderscore(i).compactNullish(),t.rawValues||(i=n._getUnderscore(i).map(function(e){return e.value})),i},linkValue:function(e){if(this.isSimpleField()){var t=this.findField(e);if(t&&t.isAnyLink()){var i=this.evaluateUnsafe(e);return i.isEmpty()?null:i.isMultiRef()?i.values:i}}else if("."===this.op&&(this.expr1.isSimpleField()&&!this.expr1.findField(e)&&console.log("Bad expression in linkValue: ",this.boundTerms(e)),this.expr1.isSimpleField()&&this.expr1.findField(e).isAnyLink())){var r=this.expr1.evaluateUnsafe(e),o=this;if(r.isRef()){var s=r.isMultiRef()?r.values:[r];return n._getUnderscore(s).map(function(e){if(!e.isRef())return null;var t=e.linkedRecord();return t?o.expr2.evaluateUnsafe(t):s.createEmpty()})}return null}return this.evaluateUnsafe(e)},isOrder:function(){return"order"===this.op},isLValue:function(){return!!this.hasField()},isAssignment:function(){return"="===this.op&&this.expr1.isLValue()},executeAssignment:function(e){var t=this.expr1.keyId(e);return t?void e.setPending(t,this.expr2.evaluateUnsafe(e)):(console.log('warning: unknown field in assignment: "'+this.field+'"'),null)},isSimpleField:function(){return this.hasField()},isSimpleFieldFor:function(e){return this.hasField()?this.key===e.get("key")?!0:this.field&&e.nameMatch(this.field)?!0:!1:!1},contextify:function(e){var t=this,n={cid:this.cid};if(this.completionContext&&(n.completionText=this.completionContext.name),this.hasField()){var i=this.findField(e),r=_.soak(i,"slug()");return n.slug=r||this.field||null,i||(n.error=!0),n}if(this.val)return n.val=this.val,n.quoteChar="bareword"===this.op?"":this.op,n;if(_.each(_.keys(this),function(i){if(_.contains(t.expressionKeys,i)){if("expr2"===i&&"."===t.op)return;n[i]=t[i].contextify(e)}else _.contains(t.bindCopyKeys,i)?n[i]=t[i]:"arguments"===i&&(n[i]=_.invoke(t.arguments,"contextify",e))}),this.isBinaryOperation()||"."===this.op||":"===this.op){if(n.isBinary=!0,n.spaceAroundOp=this.isBinaryOperation(),"."===this.op){var o=this.expr1.getLinkedSheet(e);n.expr2=this.expr2.contextify(o)}}else this.op in this.unaryOperators?(n.isUnary=!0,n.spaceAroundOp="not"===this.op):"("===this.op?n.isParen=!0:"if"===this.op?n.isIf=!0:"fn"===this.op?n.isFunction=!0:"order"===this.op&&(n.isOrder=!0,n.ascending=this.ascending);return n}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../common/errors":242,"../../../common/strings":249,"../../../common/values":253,"../../parser":74,moment:"moment"}],43:[function(e,t,n){"use strict";n.Expression=e("./expression")},{"./expression":42}],44:[function(e,t){"use strict";var n={isLoaded:function(){return this.fetched},markDirty:function(){this.dirty=!0},needsFetch:function(){return this.dirty||!this.isLoaded()},fetchIfNeeded:function(e){this.needsFetch()&&this.fetch(e)},markFetched:function(){this.fetched=!0,this.dirty=!1},wrapHandlers:function(e,t){e=e?_.clone(e):{};var n=e.success;e.success=function(){t.markFetched(),n&&n.apply(null,arguments)};var i=e.complete;return e.complete=function(){t.syncing=!1,i&&i.apply(null,arguments)},e}};t.exports=function(e){var t=e.prototype;_.extend(t,n);var i=t.fetch;t.fetch=function(e){e=e||{};var t=this;return t.syncing?void t.once("sync",function(t,n,i){e.success&&e.success.call(e.context,t,n,i)}):(t.syncing=!0,e=t.wrapHandlers(e,t),void i.call(t,e))};var r=t.save;r&&(t.save=function(e,t,n){var i,o=this;o.syncing=!0,null==e||_.isObject(e)?(i=e,n=t):(i={})[e]=t,n=o.wrapHandlers(n,o),r.call(o,i,n)});var o=t.create;o&&(t.create=function(e,t){var n=this;return t=t?_.clone(t):{},(e=n._prepareModel(e,t))?(e.syncing=!0,t=n.wrapHandlers(t,e),void o.call(n,e,t)):!1})},t.exports.methods=n},{}],45:[function(e,t){(function(n){"use strict";var i=e("util"),r=e("../../common/strings"),o=e("../actions"),s=e("./index"),a=e("./model"),l=e("./collection"),c=e("./expressions/expression"),u=e("../../common/values"),d=e("../parser"),h=e("backbone"),f=d.cursorToken,p=(e("../../common/commas"),e("../../common/constants")),m=e("../errors"),g=e("../viewModels/refCompletion"),v=a.extend({idAttribute:"key",hasTimestamps:!0,hasMany:{"enum":function(){return new s.EnumValue.Collection([])}},defaults:{width:180},isLink:function(){return"link"===this.get("type")},isLegacyLink:function(){return this.isLink()},isJoin:function(){return"join"===this.get("type")},getJoinSubsheet:function(){var e=this.getOppositeJoinField();return this.sheet().findSubsheet(e.sheet(),e)},isAnyLink:function(){return this.isJoin()||this.isLink()?!!this.linkedSheet():!1},canLink:function(){return this.isNameField()?!1:this.isAnyLink()?!1:this.isFormula()?!1:this.isReportFormula()?!1:this.hasIntegration()?!1:this.isReportField()?!1:this.isImage()?!1:!0},canDelete:function(){return!this.hasIntegration()},isFormula:function(){return"formula"===this.get("type")},isReportFormula:function(){return"report-formula"===this.get("type")},isReportField:function(){return n._getUnderscore(this).soak("sheet().isSynthetic()")},getConfigRestrictionInfo:function(){var e={};return this.isAnyLink()&&(e.disableFormula=!0,e.disableFormulaReason=r["disabled-reason-formula-is-link"](),e.disableInputConfig=!0,e.disableInputConfigReason=r["disabled-reason-field-is-link"],e.disableRequired=!0,e.disableRequiredReason=r["disabled-reason-required-no-link"]),this.hasAnyFormula()&&(e.hasFormula=!0,e.disableLink=!0,e.disableLinkReason=r["disabled-reason-no-link-formula"](),e.disableInputConfig=!0,e.disableInputConfigReason=r["disabled-reason-field-is-formula"],e.disableRequired=!0,e.disableRequiredReason=r["disabled-reason-required-no-formula"]),this.hasIntegration()&&(e.disableFormula=!0,e.disableLink=!0,e.disableInputConfig=!0,e.disableInputConfig=e.disableRequiredReason=e.disableLinkReason=e.disableFormulaReason=r["disabled-reason-field-integration"]({integrationName:this.integrationName})),e},getValidator:function(e){var t=this.get("validation")||"generic";return this.isAnyLink()&&(t="link"),this.isFormula()&&(t="generic"),u.createValidator(t,{input:e,"enum":this.enumValues(),required:this.get("required"),localeOptions:s.Account.account.localeOptions()})},formatOptions:function(){return _.extend({},this.get("formatOptions"),{localeOptions:s.Account.account.localeOptions()})},getFormattedDisplayValue:function(e){return e.getDisplayValue(this.get("key"),this.formatOptions())},saveFormatOptions:function(e,t){var n=this.formatOptions();e=_.defaults({},e,n),this.saveIfNeeded("formatOptions",e,t)},hasValidation:function(e){return this.get("validation")===e},isHidden:function(){return this.get("hidden")},setHidden:function(e,t){this.saveIfNeeded("hidden",e,t)},sheet:function(){return this.collection&&this.collection.parent},sheetId:function(){var e=this.sheet();return e&&e.id},book:function(){var e=this.sheet();return e&&e.book()},integrationName:function(){return n._getUnderscore(this).soak("getIntegration().name()")},getIntegration:function(){var e=this.book();if(!e)return null;var t=this;return e.get("integrations").find(function(e){return e.ownsField(t)})},hasIntegration:function(){return null!=this.getIntegration()},position:function(){return this.collection?this.collection.indexOf(this)+1:null},getJoin:function(){return _(this).soak("sheet().book().joinForField",this)},getJoinPromise:function(){var e=this;return Q().then(function(){var t=e.sheet();if(!t)throw new m.ModelRemoved("field");var n=t.book();if(n){var i=n.joinForField(e);if(i)return Q(i)}return e.sheet().bookPromise().then(function(t){var n=t.joinForField(e);if(n)return n;var i=Q.defer();return e.listenToOnce(t,"joins:add",function(){i.resolve(e.getJoinPromise())}),i.promise})})},missingJoinInfo:function(){var e="Could not find join for field.  Info:\n",t=this.sheet(),i=t&&t.id,r=t&&t.book(),o=r&&r.id,s=r&&r.get("joins")||[];e+="  From field: "+i+"/"+this.get("key")+"/"+this.get("type")+"\n",e+="  Found "+s.length+" joins on book "+o+"\n",e+="  Joins:\n";var a=function(e,t){return e.get(t).sheetId+"/"+e.get(t).fieldKey};return n._getUnderscore(s).each(function(t){var n={id:t.id,left:a(t,"left"),right:a(t,"right")};e+="    Join: {{id}} connects field: {{left}} to {{right}}".stencil(n)+"\n"}),e+="  Book: "+o},throwJoinError:function(){throw console.log(this.missingJoinInfo()),new Error("Could not find join for field! See error log for more details")},getOppositeJoinField:function(){var e=this.getJoin();if(!e)return null;var t=e.sideForField(this),n=e.fieldForSide(t.opposite);if(!n){var r=_.pick(e.attributes,"left","right");throw new Error("no opposite join field: can't find "+t.opposite+" side in join "+i.inspect(r))}return n},updateSymrefs:function(e,t){function n(n){n&&n.setRef(e,i,t)}var i=this;t.isRef()||(t=this.resolveValue(t,e));var r=this.getJoin();r?n(r):this.getJoinPromise().then(n).done()},getJoinRef:function(e){var t=this.getJoin();if(t)return t.getRef(e,this)},linkedSheet:function(){if(this.isLink()){var e=this.get("linkedSheet");return e&&e._id&&s.Sheet.find(e._id)}if(this.isJoin()){var t=this.getJoin();if(!t)return;var n=t.sideForField(this),i=t.get(n.opposite).sheetId;return s.Sheet.find(i)}},linksToComplexName:function(){if(!this.isJoin())return!1;var e=this.linkedSheet();return e.hasComplexName()},validForForm:function(){return this.isHidden()?!1:this.isFormula()?!1:this.isLegacyLink()?!1:this.linksToComplexName()?!1:this.isNameField()&&this.sheet().hasComplexName()?!1:!0},getFormInfo:function(){var e=this.pick("key","type","validation","hidden","required","formatOptions");return e.enum=this.enumValues(),e.enum=n._getUnderscore(e.enum).without(""),e.label=this.displayName(),e.validForForm=this.validForForm(),e},editableFormula:function(){return"="+this.get("expression").stringify(this.formulaSheet())},ensureExpressionValidated:function(){if(this.hasAnyFormula()&&!this.validated){this.validated=!0;var e=[this];this.get("expression").saveValidation(this.sheet(),{forbiddenFields:e})}},hasAnyFormula:function(){return this.isFormula()||this.isReportFormula()},hasDerivedValue:function(){return this.hasAnyFormula()||this.isJoin()},isLinkToSheet:function(e){return this.linkedSheet()===e},setAggregate:function(e,t){this.saveIfNeeded("aggregate",e,t)},getAggregate:function(){return this.get("aggregate")||"default"},enumValues:function(){var e=this.get("enum");return e?e.pluck("name"):[]},displayName:function(){var e=this.get("name");return e?e:this.placeholderName()},placeholderName:function(){return this.isNameField()?this.sheet().defaultNameFieldName():this.isAnyLink()?this.linkedSheet().displayTitle():this.isReportFormula()?" ":r["default-field-display-name"]({position:this.get("nameNumber")})},ignoredLastWriteWinsKeys:n._getUnderscore(["key","nameNumber","type","enum","linkedSheet","aggregate","guid","wasAtIndex","removedSubsheets","processing"]).makeSet(),parse:function(e){return e=a.prototype.parse.apply(this,arguments),e.expression&&(e.expression=c.make(e.expression)),e},set:function(e,t,n){return this.parseBackboneArguments(e,t,n,function(e,t){return this.preprocessAttributeTimestamps(e),a.prototype.set.call(this,e,t)})},saveEnums:function(e,t){this.get("enum").setValues(e,t)},removeEnum:function(e){this.saveEnums([],e)},enumOrderedValueMap:function(){return this.isEnum()?_.object(this.get("enum").map(function(e,t){return[e.get("name"),t]})):{}},removeEnumValue:function(e,t){var n=this.enumValues();n=_.without(n,e),this.saveEnums(n,t)},resolveValue:function(e,t){var n=this;if(u.isEmpty(e)){var i=t&&!t.isNew();return this.isJoin()&&i?u.makeMultiRef([]):this.getValidator(u.createEmpty()).canonicalValue()}if(this.isAnyLink()){var r=this.linkedSheet();if(u.isValueObject(e)&&!e.isRef()&&(e=e.displayValue()),_.isString(e)&&(e=u.stringToRef(e,function(e){return n.valueForName(e,r)})),!e.id&&e.name){var o=r&&r.findRecordByName(e.name);o?(e.id=o.id,e.sheetId=r.id):this.linkedSheet().nameField()||(e=e.name)}return u.create(e)}return this.getValidator(e).canonicalValue()},valueForName:function(e,t){t=t||this.linkedSheet();var n=t.findRecordByName(e),i=null;return n&&(i=n.id),u.makeRef(i,t.id,e)},orderMatches:function(e,t,i){return e?this.isAnyLink()?i:(-1===t.indexOf(f)&&(t+=f),e=e.toLowerCase(),n._getUnderscore(i).sortBy(function(t){var n=t.value?t.value:t;return n=n.toLowerCase(),n===e?0:0===n.indexOf(e)?1:2})):i},isImage:function(){return"image"===this.get("validation")},shouldOfferAutocompletions:function(e){return this.isAnyLink()?!0:this.isImage()?!1:/\n/.test(e)?!1:e.length<=p.MAX_AUTOCOMPLETE_LENGTH},queryAutocompleteValues:function(e,t,n,i){i=i||{},_.defaults(i,{allowFormula:!0});var r=this;e=e||"";var o=function(i){i=r.orderMatches(e,t,i),n(1===i.length?_.filter(i,function(t){return t!==e}):i)};this.isAnyLink()?this.autocompleteLinks(e,t,o):/^=/.test(e)&&i.allowFormula?(-1===e.indexOf(d.cursorToken)&&(e+=d.cursorToken),this.autocompleteFormula(e,o)):this.autocompleteColumnValues(e,o)},autocompleter:function(){return this._autocompleter?this._autocompleter:this._autocompleter=new s.powerbar.Autocompleter(this.formulaSheet(),this)},autocompleteFormula:function(e,t){var n,i=this.autocompleter(),r=e.substr(1,e.length);n=this.isReportFormula()?i.reportFormulaCompletions(r):i.formulaCompletions(r),t(_.map(n,function(e){return"="+e}))},autocompleteColumnValues:function(e,t){var i=/\n/;if(i.test(e))return t([]);var o,a=new RegExp(r.escapeRegExp(e.trim()),"i");if(this.isEnum())o=n._getUnderscore(this.enumValues()).filter(function(e){return""!==e&&a.test(e)});else if(this.sheet()){var l=[];l=this.getValues();var c={localeOptions:s.Account.account.localeOptions()};l=n._getUnderscore(l).chain().filter(function(e){return!e.isError()}).filter(function(e){var t=e.displayValue(c);return i.test(t)?!1:t.length>p.MAX_AUTOCOMPLETE_LENGTH?!1:""!==t&&a.test(t)}).uniqString(function(e){return e.displayValue()}).value(),l=u.sortValues(l),o=n._getUnderscore(l).invoke("displayValue",c)}t(o)},autocompleteLinks:function(e,t,n){var i=this.linkedSheet();if(!i)return n([]);var r=function(i){var r=i.recordNames();g.autocomplete({query:e,queryWithCursor:t,recordNames:r,done:n})};i.get("records")&&!i.needsFetch()?r(i):i.fetch({success:r,error:defaultErrorHandler("fetch-sheet")})},isEnum:function(){return"enum"===this.get("type")},nameMatch:function(e){e=r.normalize(e).toLowerCase();var t=r.normalize(this.get("name")).toLowerCase();return e===t||e===this.slug()},slug:function y(){var e=this.displayName();if(!e&&this.isNameField())return r["unnamed-name-field-slug"]();var y=r.slug(e);return y?y:"field_"+this.get("nameNumber")},isNameField:function(){var e=this.sheet();return e&&e.get("nameKey")===this.id},rename:function(e,t){return e=e.trim(),e||this.get("name")?this.saveIfNeeded("name",e,t):void 0},resize:function(e,t){return this.saveIfNeeded("width",e,t)},updateEnumIfNeeded:function(e){if(this.isEnum()&&!e.isError()){e=e.displayValue(this.formatOptions());
var t=this.get("enum");e=r.normalize(e),_.contains(this.enumValues(),e)||t.push({name:e})}},addLink:function(e,t){return this.action(this.actions.UpdateLink,e,t.attrs).do(t)},removeLink:function(e){return this.action(this.actions.UpdateLink,null).do(e)},saveFormula:function(e,t){return e?(_.isString(e)&&(e=c.parse(u.create(e))),void(this.isReportFormula()?this.set({name:e.nameify(this.formulaSheet()),expression:e}):this.saveIfNeeded({type:"formula",expression:e},t))):this.removeFormula(t)},formulaSheet:function(){return this.isReportFormula()?this.get("sourceSheet"):this.sheet()},removeFormula:function(e){this.isFormula()?this.saveIfNeeded({type:"generic",expression:null},e):this.isReportFormula()&&this.set("expression",null)},destroy:function(){return this.isJoin()?_.soak(this,"getOppositeJoinField().removeLink()"):a.prototype.destroy.apply(this,arguments)},contextKeys:["displayName","slug","isNameField","linkedSheet","sheetId","hasAnyFormula","isJoin","canDelete","hasIntegration","integrationName","formatOptions"],toJSON:function(){var e=a.prototype.toJSON.apply(this,arguments);return e.expression&&(e.expression=e.expression.boundTerms(this.sheet())),e},getDisplayValues:function(){return this.sheet().get("records").invoke("getDisplayValue",this.get("key"),this.formatOptions())},getValues:function(){return this.sheet().get("records").invoke("getValue",this.get("key"))},matchScoreContextForSheet:function(e){var t=_.chain(this.getDisplayValues()).map(u.splitRefString).flatten(!0).value();if(t.sort(),t=_.chain(t).uniq(!0).without("").value(),0===t.length)return null;var n=e&&e.get("records");if(!e||!e.id)return{score:100,hasScore:!1,text:"New Sheet",isNew:!0,newValues:t.length};var i=n.invoke("name");if(0===i.length)return{hasScore:!1,matches:0,noColor:!0,newValues:t.length,text:"empty"};i.sort();var r=Math.min(i.length,t.length),o=r===i.length?i:t,s=o===i?t:i,a=o.reduce(function(e,t){return _.containsSorted(s,t)?e+1:e},0);return{hasScore:!0,score:Math.round(100*a/r),newValues:t.length-a,matches:a}},isReadOnly:function(){return this.isNameField()&&this.sheet().isNameFieldReadOnly()?!0:this.hasIntegration()?!this.getIntegration().isFieldWritable(this):!1},toContext:function(e){var t=a.prototype.toContext.apply(this,e);return this.isJoin()&&this.getJoin()&&(t.oppositeFieldName=this.getOppositeJoinField().displayName()),this.linkedSheet()&&(t.linkedSheetTitle=this.linkedSheet().displayTitle()),t}}).addGetters({key:"@key"}),b=v.extendActions({UpdateLink:o.Action.extend({name:"updateLink",initialize:function(e,t,n){this.model=e,this.collection=e.collection,this.previousAttrs=e.pick("type","linkedSheet"),n&&_(this.previousAttrs).extend(e.pick(Object.keys(n))),t?this.attrs={type:"join",linkedSheet:{_id:t}}:(this.previousAttrs.linkedSheet={_id:e.linkedSheet().id},this.attrs={type:"generic",linkedSheet:null}),n&&_(this.attrs).extend(n)},saveAndRefresh:function(e,t,n){var i=this;t=t||{},t=_.clone(t);var r=this.collection.parent,s=r.book(),a=t.error||_.noop;if(t.error=function(e,t){var r=this;if("perform"!==n&&409===t.status){switch(n){case"revert":o.history.revertUndo(),e.nonLocalSet(i.attrs);break;case"reperform":o.history.revertRedo(),e.nonLocalSet(i.previousAttrs)}return void _.defer(function(){throw new m.DisplayableError("error-action-while-linking",{action:"revert"===n?"undo":"redo"})})}return a.apply(r,arguments)},"link"===this.previousAttrs.type){var l=t.success;t.success=function(){s.fetch({success:l,error:defaultErrorHandler("remove-link")})}}this.model.save(e,_.extend({patch:!0},t))},perform:function(e){this.saveAndRefresh(this.attrs,e,"perform")},revert:function(e){this.saveAndRefresh(this.previousAttrs,e,"revert")},reperform:function(e){this.saveAndRefresh(this.attrs,e,"reperform")}}),Insert:o.Add.extend({initialize:function(e,t,n){this.collection=e,this.parent=e.parent,this.attrs=t,this.index=n},perform:function(e){var t=_.extend({},this.attrs,{_index:this.index});e.at=this.index,this.model=h.Collection.prototype.create.call(this.collection,t,e)}})});v.Collection=l.extend({model:v,urlDirectory:"/fields",insert:function(e,t,n){return this.action(this.actions.Insert,e,t).do(n)},actions:b}),t.exports=v}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/commas":238,"../../common/constants":239,"../../common/strings":249,"../../common/values":253,"../actions":2,"../errors":9,"../parser":74,"../viewModels/refCompletion":106,"./collection":34,"./expressions/expression":42,"./index":47,"./model":49,backbone:"backbone",util:749}],46:[function(e,t){"use strict";var n=e("../../common/values"),i=(t.exports=function(e,t,r){var o=_.map(t,function(e,t){var n=function(e){return r(e,t)};return i(e,n)});return n.sortWithKeys(e,o)},t.exports.sortKeyForField=function(e,t){var i={};return e.isEnum()&&(i=e.enumOrderedValueMap()),new n.SortKey(t,!0,i)})},{"../../common/values":253}],47:[function(e,t,n){(function(t){"use strict";n.Model=e("./model"),n.Account=e("./account"),n.ApiKey=e("./apiKey"),n.Book=e("./book"),n.BookUser=e("./bookUser"),n.BookUser=e("./bookUser"),n.Codelet=e("./codelet"),n.EnumValue=e("./enumValue"),n.ErrorReport=e("./errorReport"),n.Field=e("./field"),n.Integration=e("./plugins/integration"),n.Join=e("./join"),n.NavItem=e("./navItem"),n.Organization=e("./organization"),n.Record=e("./record"),n.Sheet=e("./sheet"),n.Subsheet=e("./subsheet"),n.Symref=e("./symref"),n.Template=e("./template"),n.User=e("./user"),n.expressions=e("./expressions"),n.powerbar=e("./powerbar"),n.TestModel=e("./testModel"),n.groupSort=e("./groupSort"),n.backbone=e("./backbone"),n.Store=e("./store"),n.values=e("./values"),t._getUnderscore(n).extend({deferredActions:0,incrementDeferredActions:function(e){e=null==e?1:e,this.deferredActions+=e},decrementDeferredActions:function(e){e=null==e?1:e,this.deferredActions-=e},debounce:function(e,n,i){if(i)return _.debounce(e,n,i);var r=this,o=0,s=e.after(function(){r.decrementDeferredActions(o),o=0}),a=[s].concat(t._getUnderscore(arguments).rest()),l=_.debounce.apply(_,a);return l.before(function(){o++,r.incrementDeferredActions()})}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./account":27,"./apiKey":29,"./backbone":30,"./book":31,"./bookUser":32,"./codelet":33,"./enumValue":39,"./errorReport":40,"./expressions":43,"./field":45,"./groupSort":46,"./join":48,"./model":49,"./navItem":50,"./organization":51,"./plugins/integration":53,"./powerbar":57,"./record":61,"./sheet":63,"./store":64,"./subsheet":65,"./symref":66,"./template":68,"./testModel":69,"./user":71,"./values":72}],48:[function(e,t){(function(n){"use strict";function i(e){this.name=e}var r=(e("backbone"),e("./model")),o=e("./collection"),s=e("./symrefSide"),a=e("./"),l=e("../../common/values"),c=e("./store"),u=r.extend({hasMany:{symrefs:function(){return new a.Symref.Collection([])},deletedSymrefs:function(){return new a.Symref.Collection([])}},initialize:function(){this.get("symrefs")||this.updateHasManyRelation("symrefs"),this.get("deletedSymrefs")||this.updateHasManyRelation("deletedSymrefs"),this.initializeIndex(),this.listenTo(this,"symrefs:add",this.onAddSymref),this.listenTo(this,"symrefs:remove",this.onRemoveSymref),this.listenTo(this,"symrefs:orderChange",this.onOrderChange),this.listenTo(this,"symrefs:reset",this.initializeIndex),this.listenTo(this.collection.parent,"joins:reset",this.onResetJoins)},initializeIndex:function(){this.index={left:{},right:{}};var e=this.get("symrefs");if(e){var t=this;e.each(function(e){t.onAddSymref(e,{sort:!1})}),t.sortAllChildren()}},onAddSymref:function(e,t){this.addSymrefToIndex(u.left,e),this.addSymrefToIndex(u.right,e),this.onAddSymrefSide(u.left,e,t),this.onAddSymrefSide(u.right,e,t),this.triggerChange(e.get("left").get("record"),u.left),this.triggerChange(e.get("right").get("record"),u.right)},addSymrefToIndex:function(e,t){var n=t.get(e),i=t.get(e.opposite),r=this.index[e],o=n.indexKey(),s=i.indexKey(),a=r[o];a||(a=r[o]={}),a[s]=i},onAddSymrefSide:function(e,t,n){var i=t.get(e),r=t.get(e.opposite),o=this,s=i.get("record"),a=r.get("record");s&&a&&(s.addChild(a,o.fieldForSide(e.opposite),n),a.addChild(s,o.fieldForSide(e),n))},sortAllChildren:function(){this.get("symrefs").each(function(e){n._getUnderscore(["left","right"]).each(function(){e.get("side").get("record").sortChildren()})})},onOrderChange:function(e,t){t=u[t].opposite;var n=e.get(t).get("record");this.triggerChange(n,t),n.sortChildren()},onRemoveSymref:function(e){this.onRemoveSymrefSide(u.left,e),this.onRemoveSymrefSide(u.right,e),this.triggerChange(e.get("left").get("record"),u.left),this.triggerChange(e.get("right").get("record"),u.right)},onRemoveSymrefSide:function(e,t){var n=t.get(e),i=t.get(e.opposite),r=this.index[e],o=r[n.indexKey()];if(o){delete o[i.indexKey()];var s=n.get("record"),a=i.get("record");s&&a&&(s.removeChild(a,this.fieldForSide(e.opposite)),a.removeChild(s,this.fieldForSide(e)))}},triggerChange:function(e,t){if(e){var n=this.get(t).fieldKey;this.trigger("change:"+e.cid+":"+n,e)}},symrefSidesForRecordOnSide:function(e,t){var n=this.index[t],i=n[s.indexKeyForRecord(e)];return this.symrefSidesForEntry(i)},symrefSidesForEntry:function(e){return _.chain(e).values().sortBy(function(e){return e.get("ordinal")}).value()},ordinalForRecord:function(e,t,n){var i=this.index[n],r=i[s.indexKeyForRecord(e)];if(!r)return null;var o=r[s.indexKeyForRecord(t)];return o&&o.get("ordinal")},recordsForRecordOnSide:function(e,t){return _.chain(this.symrefSidesForRecordOnSide(e,t)).invoke("get","record").compactNullish().value()},refForSymrefSides:function(e){var t=e.map(function(e){var t=e.get("record");return t.id?l.makeRef(t.id):l.makeRef(null,t.effectiveSheetId(),t.name()||t.getClientName())}).filter(function(e){return e.id||e.name});return l.makeMultiRef(_.compactNullish(t))},getRef:function(e,t){var n=this.sideForField(t);return this.refForSymrefSides(this.symrefSidesForRecordOnSide(e,n),n)},setRef:function(e,t,n){var i,r,o=this.sideForField(t),a=this.getRef(e,t),c=l.diffRefs(a,n),d=this,h=function(t){return s.createFromRecord(e,t)},f=function(e){var t=s.indexKeyForRef(e),n=d.index[o.opposite][t];return n?d.symrefSidesForEntry(n).length:0};o===u.left?(i=function(e){d.remove(h(),s.createFromRef(e))},r=function(e){d.add(h(f(e)),s.createFromRef(e))}):(i=function(e){d.remove(s.createFromRef(e),h())},r=function(e){d.add(s.createFromRef(e),h(f(e)))}),c.removed.forEach(i),c.added.forEach(r);var p={};n.valuesList().forEach(function(e,t){p[s.indexKeyForRef(e)]=t});var m=this.symrefSidesForRecordOnSide(e,o);m.forEach(function(e){var t=e.indexKey(),n=p[t];e.set("ordinal",n)}),e.trigger("joinOrderChange",t)},getSheetIds:function(){var e=this;return{left:e.get("left").sheetId,right:e.get("right").sheetId}},findSymref:function(e,t){if(e.parent)return e.parent;if(t.parent)return t.parent;var n=this.getSheetIds(),i=function(e,t){return l.makeRef(e._id,n[t],e.name)},o={left:e,right:t},a=_(o).mapObject(function(e,t){return e instanceof r?e.indexKey():s.indexKeyForRef(i(e,t))});try{return this.index.left[a.left][a.right].parent}catch(c){if(c instanceof TypeError)return;throw c}},remove:function(e,t){var n=this.findSymref(e,t);this.get("symrefs").remove(n)},add:function(e,t){var n=this.get("symrefs");n.add({left:e,right:t})},recordForSide:function(e,t){var n=e.get("record");if(n)return n;var i=this.sheetForSide(t.opposite);return i.findOrCreateMissingRecord(e.get("name"))},sideForField:function(e){var t=this,n=e.get("key"),i=e.sheetId();return _([u.left,u.right]).find(function(e){return e=t.get(e),e.sheetId===i&&e.fieldKey===n})},sheetForSide:function(e){var t=this.get(e);return a.Sheet.find(t.sheetId)},fieldForSide:function(e){var t=this.get(e);return this.sheetForSide(e).fieldWithKey(t.fieldKey)},removeMissingLinks:function(e,t){var n=this.index[t],i=this.sheetForSide(t),r=i.findOrCreateMissingRecord(e),o=s.indexKeyForRecord(r),a=n[o];if(a&&_(a).keys().length){var l=this.get("symrefs"),c=l.filter(function(n){var i=n.get(t);return i.get("record").name()===e});l.remove(c)}},removeSymrefsForRecord:function(e,t){var n=this.get("symrefs"),i=s.indexKeyForRecord(e),r=n.filter(function(e){return e.get(t).indexKey()===i});n.remove(r),this.get("deletedSymrefs").add(r)},restoreSymrefsForRecord:function(e,t){var n=s.indexKeyForRecord(e),i=this.get("deletedSymrefs").filter(function(e){return e.get(t).indexKey()===n});this.get("symrefs").add(i)},onResetJoins:function(){this.trigger("joins-reset")},handleAddSideEffects:function(e){var t=e.symrefs;delete e.symrefs;var i=this,o=this.get("symrefs");n._getUnderscore(t).each(function(e){var t=i.findSymref(e.left,e.right);t?t.updateSides(e):o.add(e,{parse:!0})}),r.prototype.handleAddSideEffects.call(this,e)},handleRemoveSideEffects:function(e){var t=e.symrefs;delete e.symrefs;var i=this,o=this.get("symrefs");n._getUnderscore(t).each(function(e){var t=i.findSymref(e.left,e.right);t&&o.remove(t)}),r.prototype.handleRemoveSideEffects.call(this,e)},handleUpdateSideEffects:function(e){var t=e.symrefs;delete e.symrefs;var i=this;n._getUnderscore(t).each(function(e){var t=i.findSymref(e.left,e.right);t&&t.updateSides(e)}),r.prototype.handleRemoveSideEffects.call(this,e)}});i.prototype.toString=function(){return this.name},u.left=new i("left"),u.right=new i("right"),u.left.opposite=u.right,u.right.opposite=u.left,c.addStore(u),u.Collection=o.extend({model:function(){return u.add.apply(u,arguments)}}),t.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/values":253,"./":47,"./collection":34,"./model":49,"./store":64,"./symrefSide":67,backbone:"backbone"}],49:[function(e,t){(function(n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=e("backbone"),o=e("../../common/strings"),s=e("../actions"),a=e("./actionable"),l=e("./fetchable"),c=e("./qfetchable"),u=e("./collection"),d=e("../valueTimestamp"),h=e("./dataModelUpdatable"),f=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/globalEvents"),p=r.Model.prototype,m=r.Model.extend({idAttribute:"_id",hasTimestamps:!1,firstSetAttributes:["synthetic"],maximumEventDepth:3,hasMany:{},hasOne:{},allRelationKeys:function(){return Object.keys(this.hasMany).concat(Object.keys(this.hasOne))},checkAjaxSettings:function(e){if(!e||!e.error)throw new Error("No error handler provided")},updateHasManyRelation:function(e,t,n){var i=this.get(e);if(!i){var r=_.bind(this.hasMany[e],this);i=this.attributes[e]=r(),i.parent=this,this.listenToRelation(e,i)}t instanceof u&&(t=t.models),i.models!==t&&(n=n||{},i.set(t,_.extend({parse:!0},n)))},getHasManyChildModel:function(e){var t,n=this;return _(this.hasMany).any(function(i,r){var o=n.get(r);return t=o.get(e),null!=t}),t},getParent:function(){return n._getUnderscore(this).soak("collection.parent")},updateHasOneRelation:function(e,t){var n=this.get(e);if(t instanceof m&&(t=t.attributes),n&&n.id===t[this.idAttribute])n.set(t);else{var i=_.bind(this.hasOne[e],this);n=i(t),this.listenToRelation(e,n)}return n},listenToRelation:function(e,t){var n=this,i=this.onRelationEvent;t.on("all",i,{parent:n,key:e})},onRelationEvent:function(e){var t=e.match(/:/g);if(!(t&&t.length>=this.parent.maximumEventDepth)){var n=this.key+":"+e,i=_.toArray(arguments);i.shift(),i.unshift(n),this.parent.trigger.apply(this.parent,i)}},incrementSetting:function(){this.setting||(this.setting=0),this.setting++},decrementSetting:function(){if(this.setting--,0===this.setting){var e=this.afterAllSettingFuncs||[];this.afterAllSettingFuncs=void 0,n._getUnderscore(e).invoke("call")}},findAncestorSetting:function(){if(!this.setting)return null;for(var e=this;;){var t=_.soak(e,"parent")||_.soak(e,"collection.parent");if(!t||!t.setting)break;e=t}return e},useLastWriteWinsForKey:_.constant(!0),parse:function(e){return e=_.clone(e),e.timestamps=this.parseTimestamps(e.timestamps),e},parseTimestamps:function(e){return e?_(e).mapObject(function(e){return d.parse(e)}):{}},preprocessAttributeTimestamps:function(e){var t;(e.timestamps||e.defaultTimestamps)&&(t=this.parseTimestamps(e.timestamps||{}),_.defaults(t,e.defaultTimestamps||{}),delete e.timestamps,delete e.defaultTimestamps),this.applyLastWriteWins(e,t,n._getUnderscore(this).result("ignoredLastWriteWinsKeys")),this.timestamps||(this.timestamps={}),t&&_.extend(this.timestamps,t)},applyLastWriteWins:function(e,t,n){this.timestamps||(this.timestamps={});var i=this.timestamps,r=this;n=n||{},_(e).each(function(o,s){if(!n[s]&&r.useLastWriteWinsForKey(s)){var a=!(t&&t[s]);if(a)r.timestamps[s]=d.override;else{var l=i[s],c=t[s],u=l&&l.isAfter(c);u&&(delete t[s],delete e[s])}}})},afterAllSetting:function(e){var t=this.findAncestorSetting();t?(n._getUnderscore(t).defaults({afterAllSettingFuncs:[]}),t.afterAllSettingFuncs.push(e.bind(this))):e.call(this)},set:function(e,t,n){if(null==e)return this;this.incrementSetting();try{var i;if(null===e||_.isObject(e)?(i=_.clone(e),n=t):(i={})[e]=t,this.idAttribute in i){var o=r.Model.prototype.set.call(this,this.idAttribute,i[this.idAttribute]);if(delete i[this.idAttribute],!o)return o}var s=this;Object.keys(this.hasMany).forEach(function(e){e in i&&(s.updateHasManyRelation(e,i[e],n),delete i[e])}),Object.keys(this.hasOne).forEach(function(e){e in i&&(i[e]=s.updateHasOneRelation(e,i[e],n))});var a=r.Model.prototype.set.call(this,i,n);return a}finally{this.decrementSetting()}},runWhileSetting:function(e){this.incrementSetting();var t;try{var n=Array.prototype.slice.call(arguments,1);t=e.apply(this,n)}finally{this.decrementSetting()}return t},parseBackboneArguments:function(e,t,n,i){var r,o,s={};return _.isObject(e)?(s=e,r=t,o=n):null!=e?(s[e]=t,r=n,o=i):(s=null,r=t),i.call(this,s,r)},patch:function(e,t,n){return this.checkAjaxSettings(n),e=_.omit(e,"children"),t=_.omit(t,"children"),this.action(this.actions.CreateOrUpdate,e,t).do(n)},stash:function(){this.stashedAttributes||(this.stashedAttributes=_.clone(this.attributes))},stashDirtyState:function(){var e={dirty:this.dirty,changed:this.changed};return this.dirty=!1,this.changed={},e},restoreDirtyState:function(e){this.dirty=e.dirty,this.changed=e.changed},nonLocalSet:function(e){this.nonLocalChange=!0;var t=this.stashDirtyState();e=this.parse(e);var n=this.set(e);return this.restoreDirtyState(t),this.nonLocalChange=!1,n},isSynthetic:function(){return this.get("synthetic")},sync:function(){return this.isSynthetic()?void 0:r.Model.prototype.sync.apply(this,arguments)},restoreStashed:function(){if(this.stashedAttributes){var e=_.difference(_.keys(this.attributes),_.keys(this.stashedAttributes));_.each(e,function(e){this.stashedAttributes[e]=null}.bind(this)),this.set(this.stashedAttributes),delete this.stashedAttributes}},clearStash:function(){delete this.stashedAttributes},saveIfNeeded:function(e,t,n){var i={},r=n;_.isObject(e)?(i=e,r=t):i[e]=t,i=_.omit(i,"children");var o=this,s={};_.each(_.keys(i),function(e){s[e]=o.get(e)}),_.extend(s,r&&r.previousAttributes);var a=_.any(i,function(e,t){return!_.isEqual(e,s[t])});return a?(this.set(i,r),this.patch(this.changedAttributes(),s,r)):void(r&&r.noChange&&r.noChange())},forceNewTimestamps:function(e){this.timestamps||(this.timestamps={}),this.timestamps=_.extend(this.timestamps,e)},save:function(e,t){this.checkAjaxSettings(null==e||"object"===("undefined"==typeof e?"undefined":i(e))?t:arguments[2]);var n=this,o=d.now(),s=r.Model.prototype.save.apply(this,arguments);return this.timestamps&&_(this.timestamps).each(function(e,t){e.isOverride&&(n.timestamps[t]=o)}),s},fetch:p.fetch.before("checkAjaxSettings"),destroy:function(e){return this.action(this.actions.Delete).do(e)}.before("checkAjaxSettings"),localDestroy:function(){this.stopListening(),this.trigger("destroy",this,this.collection)},isBlank:function(){return _.all(this.attributes,function(e){return void 0===e||null===e||e.toString().match(/^\s*$/)})},displayTitle:function(){return o.defaultString(this.get("title"),"untitled")},displayName:function(){return o.defaultString(this.get("name"),"unnamed")},toJSON:function(){var e=_.clone(this.attributes);return this.allRelationKeys().forEach(function(t){t in e&&(e[t]=e[t].toJSON())}),delete e.children,e},toContext:function(e){var t=this;e=_.defaults({},e,{deep:!0});var n=_.clone(this.attributes),i=_.makeSet(this.noContextKeys);return e.deep&&_.each(this.allRelationKeys(),function(e){i[e]||e in n&&(n[e]=n[e].toContext())}),_.each(this.contextKeys,function(e){var i=e.replace(/Context$/,""),r=_.result(t,e);(r instanceof m||r instanceof u)&&(r=_.clone(r.attributes)),n[i]=r}),n},queueTarget:function(){return this.collection&&this.collection.parent?this.collection.parent.queueTarget():this},request:function(e,t,n){n=n?_.clone(n):{},this.checkAjaxSettings(n),function(){var e=n;null==e.parse&&(e.parse=!0)}.call(this),n.attrs=t;var i=this,r=n.success;n.success=function(e){return i.set(i.parse(e,n),n)?(r&&r(i,e,n),void i.trigger("sync",i,e,n)):!1};var o=n.error;return n.error=function(e){o&&o(i,e,n),i.trigger("error",i,e,n)},this.sync(e,this,n)},handleSetSideEffects:function(e){this.set(e)},handleAddSideEffects:function(e){var t=this;_(e).each(function(e,n){t.get(n).add(e)})},handleRemoveSideEffects:function(e){var t=this;_(e).each(function(e,i){var r=t.get(i),o=r.model.prototype.idAttribute;e=n._getUnderscore(e).chain().pluck(o).map(function(e){return r.get(e)}).compactNullish().value(),r.remove(e)})},handleUpdateSideEffects:function(e){var t=this;_(e).each(function(e,i){var r=t.get(i),o=r.model.prototype.idAttribute;n._getUnderscore(e).each(function(e){var t=e[o],n=r.get(t);n.set(e)})})},shouldStoreImmediately:_.constant(!1),actions:s});m.handleSideEffectUpdate=function(e,t){return"bookSocket"===e?m.handleSocketSideEffect(t):m.handleModelSideEffect(e,t)},m.handleSocketSideEffect=function(e){return Q.Promise(function(t){if(!n.bookSocket)throw new Error("BookSocket side effect change when no socket?");n.bookSocket.handleChanges(e,!0,t)})},m.handleModelSideEffect=function(e,t){var n="handle{{method}}SideEffects".stencil({method:e.capitalize()});return Q.map(t,function(e,t){var i=Fieldbook.models[t];if(!i)throw new Error("Unrecognized side effect model: "+t);return Q.map(e,function(e,t){return i.qfind(t).thenImmediate(function(t){t[n](e)})})})},m.handleSideEffects=function(e){if(!e)return Q();f.addInflightChange();var t=Q();if(e.bookSocket){var n=e.bookSocket;delete e.bookSocket,t=m.handleSideEffectUpdate("bookSocket",n)}return t.thenImmediate(function(){return Q.map(e,function(e,t){return m.handleSideEffectUpdate(t,e)})}).finally(function(){f.removeInflightChange()})},superExtendable(m),postExtendHookable(m),l(m),c(m),a(m),gettable(m);var g=m.extend;m.extend=function(){var e=g.apply(this,arguments),t=e.prototype;if(!t.hasTimestamps)return e;var n=t.defaults;return t.defaults=function(){var e,t=this;return e=_.isFunction(n)?n.call(t):n||{},e=_.clone(e),e.defaultTimestamps=_.mapObject(e,function(){return d.epoch}),e},e},h(m),t.exports=m}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/strings":249,"../actions":2,"../valueTimestamp":85,"./actionable":28,"./collection":34,"./dataModelUpdatable":35,"./fetchable":44,"./qfetchable":60,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/globalEvents":22,backbone:"backbone"}],50:[function(e,t){(function(n){"use strict";var i=e("./model"),r=e("./collection"),o=(e("./sheet"),e("../../common/viewModels/formContext")),s=i.extend({idAttribute:"key",sheet:function(){return this.collection&&this.collection.parent},sheetId:function(){var e=this.sheet();return e&&e.id},shortUrl:function(){var e=this.sheet();return e&&e.url()+"/"+this.id},anonymousUrl:function(){return window.location.origin+"/forms/"+this.get("uuid")},iframeUrl:function(){return window.location.origin+"/forms/"+this.get("uuid")+"?context=iframe"},getQuery:function(){return this.isQuery()?_.soak(this,"sheet().queryForNavItem",this):null},isReport:function(){return this.isQuery()?n._getUnderscore(this).soak("getQuery().hasReportCommand()"):!1},isForm:function(){return"form"===this.get("type")},isQuery:function(){return"query"===this.get("type")},contextKeys:["sheetId","shortUrl","displayName","isReport","isForm"],formContext:function(){if(!this.isForm())throw new Error("Can't get form context for non-form nav item");var e=this.getFormInfo(),t=this.get("form");return new o({form:t,info:e})},getFormInfo:function(){var e=this.sheet();if(!e)throw new Error("Nav item can't get form info without sheet");return{navItem:this.pick("name","description"),fields:e.getFields().invoke("getFormInfo")}}}).addGetters({readOnlyFlag:"sheet().isReadOnlyMode()",metadataLockedFlag:"sheet().isMetadataLocked()"});s.Collection=r.extend({model:s,urlDirectory:"/navItems"}),t.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/viewModels/formContext":259,"./collection":34,"./model":49,"./sheet":63}],51:[function(e,t){"use strict";var n=e("./model"),i=(e("./collection"),e("./index")),r=e("./store"),o=e("../dev"),s=n,a=t.exports=s.extend({urlRoot:"/organization",hasMany:{users:function(){var e=new i.User.Collection;return e.comparator=function(e){var t=e.get("lastActive");return t?-new Date(t):1/0},e}},contextKeys:["joinUrl"],joinUrl:function(){return"{{origin}}/join/{{tag}}".stencil({origin:window.location.origin,tag:this.get("joinTag")})}});r.addStore(a),o.add("org",function(){return o.user.get("organization")})},{"../dev":7,"./collection":34,"./index":47,"./model":49,"./store":64}],52:[function(e,t){"use strict";var n=e("../model"),i=e("../collection"),r=e("moment"),o=t.exports.Event=n.extend({urlRoot:"/plugins/eventbrite/event",contextKeys:["endTime"],endTime:function(){return r.from(this.get("end").local).format("MMMM Do YYYY")}});o.Collection=i.extend({model:o,url:"/plugins/eventbrite/events"})},{"../collection":34,"../model":49,moment:"moment"}],53:[function(e,t){(function(n){"use strict";var i=e("../model"),r=e("../collection"),o=e("../store"),s=e("../../../common/strings"),a=e("backbone"),l=t.exports=i.superExtend(function(){return{initialize:function(){this.reverseFieldMappings={},this.listenTo(this,"change:data",this.resetFieldCache),this.listenTo(this,"change:sheetMapping",this.resetSheetCache)},ownsField:function(e){return null!=this.nameForField(e)},isFieldWritable:function(e){var t=e.sheet(),n=this.nameForSheet(t);if(!n)return!1;var i=this.get("data"),r="fieldMeta.{{sheetName}}.{{key}}.writable".stencil({sheetName:n,key:e.get("key")});return _.soak(i,r)},isValid:function(){return this.get("validOauth")},resetFieldCache:function(){this.reverseFieldMappings={}},resetSheetCache:function(){this.reverseSheetMapping=null},canCreateRecords:function(){return l.newRecordTypes[this.get("type")]},nameForField:function(e){var t=e.sheet(),n=this.nameForSheet(t);return null==n?null:this.nameForFieldKey(e.get("key"),n)},nameForFieldKey:function(e,t){return this.reverseFieldMappings[t]||(this.reverseFieldMappings[t]=_.invert(this.get("data").fieldMappings[t].fields)),this.reverseFieldMappings[t][e]},ownsSheet:function(e){return null!=this.nameForSheet(e)},nameForSheet:function(e){return this.reverseSheetMapping||(this.reverseSheetMapping=_.invert(this.get("sheetMapping"))),this.reverseSheetMapping[e.id]},name:function(){return s.get("integration-name",this.get("type"))()},refresh:function(){var e=this.bookId(),t="/integrations/{{bookId}}/{{integrationId}}/refresh".stencil({bookId:e,integrationId:this.id});a.ajax({method:"POST",url:t})},bookId:function(){return this.collection.parent.id}}});l.newRecordTypes=n._getUnderscore(["mailchimp"]).makeSet(),o.addStore(l),l.Collection=r.extend({model:function(e,t){return l.add(e,t)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../common/strings":249,"../collection":34,"../model":49,"../store":64,backbone:"backbone"}],54:[function(e,t){(function(n){"use strict";var i=e("../../../common/strings"),r=(e("../../parser"),e("./query")),o=e("./commands"),s=e("../expressions/expression"),a=e("../../parser").cursorToken,l=e("../../../common/errors"),c=o,u=3,d=function(e,t){this.sheet=e,this.field=t;var n=this.invalidateCache.bind(this),i=e.book();i?(i.on("sheets:records:all",n),this.removeListeners=function(){i.off("",n)}):this.removeListeners=_.noop};_.extend(d.prototype,{words:function(e){return i.normalizeCase(e).trim().split(/\W/)},memoMethodNames:["allValuesForKeysAndSheet","allKeywords"],invalidateCache:function(){var e=this;n._getUnderscore(this.memoMethodNames).each(function(t){e[t].clear()})},allValues:function(e){var t=e.sheet||this.sheet,n=t.get("fields"),i=e.key?[e.key]:n&&n.pluck("key");return this.allValuesForKeysAndSheet(i,t)},allValuesForKeysAndSheet:function(e,t){var n=t.get("records"),i=e&&n&&n.map(function(t){return _.map(e,function(e){return t.getValueOrPlaceholder(e)})});return i?_.chain(i).flatten().compact().value():[]}.memoize(function(e,t){return[e,t.id]}),allKeywords:function(e){var t=this,r=this.allValues(e);return n._getUnderscore(r).chain().map(function(e){var n=e.displayValue(),r=t.words(n);return r.map(i.normalizeCase)}).flatten().compact().uniqString().value()}.memoize(function(e){return[e.key,_.soak(e,"sheet.id")]}),valuesMatching:function(e,t){function n(e){return e.exprValue()}var r=this.allValues(t);e=i.normalizeCase(e);var o=_.filter(r,function(t){if(t.isEmpty())return!1;var n=t.displayValue();return 0===i.normalizeCase(n).indexOf(e)});return _.chain(o).uniqString(n).first(t.limit).value()},keywordsMatching:function(e,t){e=i.normalizeCase(e);var r=this.allKeywords(t);return n._getUnderscore(r).chain().filter(function(t){return 0===t.indexOf(e)}).compact().first(t.limit).value()},fieldExpr:function(e){return e&&{field:e.slug()}},keywordExpr:function(e){return e&&{op:"bareword",val:e}},dotExpr:function(e,t){return{op:".",expr1:e,expr2:this.fieldExpr(t)}},valueExpr:function(e,t){return e?(t=t||'"',('"'===t||"'"===t)&&(e=i.escapeChars(e,t)),{op:t,val:e}):null},matchExpr:function(e,t){return{op:":",expr1:e,expr2:t}},eqExpr:function(e,t){return{op:"=",expr1:e,expr2:t}},functionExpr:function(e,t){return{op:"fn",name:e,arguments:t||[]}},comparisonExpr:function(e,t,n){return{op:e,expr1:t,expr2:n}},contextExpr:function(e){if(!(e instanceof h)){var t=[null].concat(_.map(arguments,_.identity));e=new(h.bind.apply(h,t))}return{completionContext:e}},exampleExpressions:function(e){e=e||{};var t=e.field||this.sheet.get("fields").first(),n=this.sheet.get("records"),i=t&&n.find(function(e){return e.has(t.id)}),r=i&&t&&i.getDisplayValue(t.id),o=this.words(r),s=o[0];return{keywordExpr:this.keywordExpr(s),fieldExpr:this.fieldExpr(t),valueExpr:this.valueExpr(r)}},suggestedCommands:function(){var e=[];return e.push((new o.DefaultSearch).addArgument(this.contextExpr("search-keyword",{useForNextCompletions:!0}))),e.push((new o.DefaultFilter).addArgument(this.contextExpr("default-filter",{useForNextCompletions:!0}))),e.push(this.defaultCommandCompletion(o.FilterCommand)),e.push(this.defaultCommandCompletion(o.SortCommand)),e.push(this.defaultCommandCompletion(o.GroupCommand)),e.push((new o.DefaultSearch).addArgument(this.contextExpr("report-summary-functions",{useForNextCompletions:!0}))),e},defaultCommandContexts:{filter:"filter-formula",sort:"by-column",group:"by-column",report:"report-functions",reverse:"",count:""},defaultCommandCompletion:function(e){var t,n=this.defaultCommandContexts[e.prototype.canonicalName];return e.prototype.isAggregate&&!n&&e.prototype.maxArgs>0?t=new h("field"):n&&(t=new h(n)),(new e).addArgument(t?this.contextExpr(t):{})},suggestedArgs:function(e,t){return this.expressionCompletions(s.make({cursor:!0}),t,e)},defaultFilterFieldCompletions:function(e){var t=this.sheet.get("fields"),n=(this.sheet.get("records"),t&&t.filter(function(t){return 0===t.slug().indexOf(e)
}));return _.map(n,_.bind(this.defaultFilterFieldCompletion,this))},defaultFilterFieldCompletion:function(e){var t=this.fieldExpr(e);return new o.DefaultFilter({arguments:[this.matchExpr(t,this.contextExpr("default-filter-keyword"))]})},reportSummaryCompletions:function(){return[this.defaultCommandCompletion(o.lookupAggregateCommand("count")),this.defaultCommandCompletion(o.lookupAggregateCommand("sum")),this.defaultCommandCompletion(o.lookupAggregateCommand("avg")),this.defaultCommandCompletion(o.lookupAggregateCommand("min")),this.defaultCommandCompletion(o.lookupAggregateCommand("max")),this.defaultCommandCompletion(o.ReportCommand)]},queryExtensions:function(e,t){t=t||p;var n=[];return t.is("search-keyword")?n=this.valueCompletions("",{limit:Number.MAX_VALUE,op:"bareword"}):t.is("default-filter")?n=this.defaultFilterFieldCompletions(""):t.is("report-summary-functions")?n=this.reportSummaryCompletions():0===e.commands.length&&(n=this.suggestedCommands()),_.map(n,function(t){return e.clone().addCommand(t)})},commandExtensions:function(e,t){if(!e.canTakeMoreArgs())return[];if("report"===e.canonicalName)return[];var n=this.suggestedArgs(e,t);return _.map(n,function(t){return e.clone().addArgument(t).setComplete()})},fieldCompletions:function(e,t,n){var r=this;t=t||this.sheet,n=n||{};var o,s=i.normalizeCase(e.field),a=t.get("fields"),l=a&&a.chain().without(this.field).filter(function(e){return 0===e.slug().indexOf(s)}).map(function(e){return o=e,r.fieldExpr(e)}).value();if(1===l.length){if(o.isAnyLink()&&!n.noLinkedFields){var c=o.linkedSheet(),u=c.get("fields").chain().without(this.field).map(function(e){return r.dotExpr(l[0],e)}).value();return l.concat(u)}return l}return l},comparisonCompletions:function(e,t,n){var i=this,r=e.cursorExpr(),o=this.booleanExtensions(e,t,n);if(o.length>0)return o;if(r===e.expr1){var s=this.expressionCompletions(r,s,n);return _.map(s,function(t){return e.clone().replaceCursorExpr(t).setComplete()},this)}if(e.expr1.hasField()||"."===e.expr1.op){var a=e.expr2.op;if("bareword"!==a&&"'"!==a&&'"'!==a&&void 0!==a)return[];var l,c,u=e.expr2.val||e.expr2.field||"";if("."===e.expr1.op?(c=e.expr1.expr1.getLinkedSheet(this.sheet),l=e.expr1.expr2.keyId(c)):(l=e.expr1.keyId(this.sheet),c=this.sheet),!l)return[];var d,h={key:l,limit:5,sheet:c},f=[],p=[];if(":"===e.op)a=a||"bareword",d=this.keywordsMatching(u,h),p=_.map(d,function(e){return i.valueExpr(e,a)});else{e.expr2.field&&(f=this.fieldCompletions(e.expr2)),d=this.valuesMatching(u,h);var m=a||'"';p=_.map(d,function(e){var t=e.isNumericValue()?"bareword":m;return i.valueExpr(e.exprValue(),t)})}var g=f.concat(p);return _.map(g,function(t){return e.clone().replaceCursorExpr(t).setComplete()},this)}return[]},valueCompletions:function(e,t){t=_.defaults(t||{},{limit:3,op:"bareword"});var n=this.keywordsMatching(e,t),i=this;return _.map(n,function(e){return new o.DefaultSearch({arguments:[i.valueExpr(e,t.op)]})})},searchCompletions:function(e){var t=this,n=this.sheet.get("fields"),r=(this.sheet.get("records"),e.expressions[0]);if(!r)return[];var s,a,l=i.normalizeCase(r.val),c=[];if(c=c.concat(this.valueCompletions(l,{op:r.op})),"bareword"!==r.op)return c;var u=n&&n.filter(function(e){return 0===e.slug().indexOf(l)}),d=_.map(u,_.bind(this.defaultFilterFieldCompletion,this));if(c=c.concat(_.compact(d)),1===u.length&&(s=u[0],a=this.fieldExpr(s))){var f=new h("more-completions");c.push((new o.FilterCommand).addArgument(_.defaults({completionContext:f},a))),c.push(new o.SortCommand({arguments:[a]})),c.push(new o.GroupCommand({arguments:[a]}))}s=n&&n.first(),a=this.fieldExpr(s);var p=_.chain(o.commandsMatching(l)).uniq().filter(function(e){return e.prototype.hasCommandName?e===o.SearchCommand?!1:!0:!1}).value();if(1===p.length&&0===c.length&&0!==p[0].prototype.maxArgs){var m=p[0];c=this.commandCompletions(new m({arguments:[{}]}))}else c=_.concat(c,_.chain(p).map(function(e){return t.defaultCommandCompletion(e)}).compactNullish().value());return c},suggestionsForCommand:function(e){var t=this.sheet.get("fields"),n=t&&t.first(),i=this.fieldExpr(n),r=this.sheet.get("records"),s=_.any([o.GroupCommand,o.SortCommand],function(t){return e===t});if(s||e.prototype.isAggregate){if(i){var a=[];return e.prototype.minArgs>0&&(a=[i]),new e({arguments:a})}}else if(e===o.FilterCommand){var l=r&&r.find(function(e){return e.has(n.id)}),c=l&&l.getDisplayValue(n.id),u=this.valueExpr(c);if(i&&u)return new o.FilterCommand({arguments:[this.eqExpr(i,this.contextExpr("value"))]})}else{if(e===o.ReverseCommand)return new o.ReverseCommand({arguments:[]});if(e===o.ReportCommand&&i){var d=this.functionExpr("sum",[i]);return new o.ReportCommand({arguments:[d]})}}return null},cloneExpr:function(e){return e.clone?e.clone():_.clone(e)},argumentExtensions:function(e,t,n,i){null==i&&(i=!0),n=n||this.sheet;var r=n.getFields();if((e instanceof o.SortCommand||e instanceof o.GroupCommand)&&(t.field||"order"===t.op)){var s,a=t.field;a&&(s=r.find(function(e){return e.nameMatch(a)}));var l=[];if(e instanceof o.SortCommand&&(s||t.field)&&(l=l.concat({op:"order",ascending:!1,expr1:this.cloneExpr(t)})),i){var c=e.clone().replaceCursorArgument(t).setComplete().addArgument(this.contextExpr("secondary-field"));l=l.concat(c)}return l}if(e instanceof o.FilterCommand){if(e.isDefaultFilter())return[];{var u=this.cloneExpr(t);this.exampleExpressions({field:this.sheet.fieldWithSlug(t.field)})}if(t.field){var d=r&&r.filter(function(e){return 0===e.slug().indexOf(t.field)});if(1===d.length){var h=this.fieldExpr(d[0]);return this.comparisonOperatorCompletions(h)}}return this.comparisonOperatorCompletions(u)}return[]},comparisonOperatorCompletions:function(e){var t=["=","<",">","<=",">=","<>"];return _.contains(t,e.op)?[]:(e=e.clearContexts?e.clone():s.make(e),e.clearCompletionContext(),_.map(t,function(t){return this.comparisonExpr(t,e,this.contextExpr("value"))}.bind(this)))},reportCompletions:function(e,t){var n=e.getCursorArgument()||_.last(e.expressions);n||(n=s.make({}));var i=[];if(n.hasField()||null==n.op){var r=new f("report-command",new h("function",{useForNextCompletions:!0}));i=this.functionCompletions(n,function(e,t){return!!t.aggregate},r)}else if("fn"===n.op){var a=new f(t,"report-command");i=this.expressionCompletions(n,a,e),e.isValidCommand(this.sheet)&&i.push(e.clone().addArgument(this.contextExpr("secondary-report-function")).setComplete())}return _.map(i,function(t){return t instanceof o.PowerBarCommand?t:e.clone().replaceCursorArgument(t).setComplete()}.bind(this))},commandCompletions:function(e,t){if(e instanceof o.DefaultSearch)return this.searchCompletions(e);if("report"===e.canonicalName)return this.reportCompletions(e,t);if(e.maxArgs<e.expressions.length)return[];var n=e.getCursorArgument()||_.last(e.expressions);if(!n)return[];var i=this.expressionCompletions(n,t,e),r="";try{r=n.stringify(this.sheet)}catch(a){if(a instanceof l.ExecutionError)return[];throw a}var c=this;return i=_.chain(i).filter(function(t){var n=s.make(t,e).stringify(c.sheet);return n===r||-1===_.chain(e.expressions).invoke("stringify",c.sheet).indexOf(n).value()}).value(),1===i.length?i=i.concat(this.argumentExtensions(e,i[0])):n.empty||0!==i.length||(i=i.concat(this.argumentExtensions(e,n))),_.map(i,function(t){return t instanceof o.PowerBarCommand?t:e.clone().replaceCursorArgument(t).setComplete()})},canExtendCommand:function(e){return 0===e.expressions.length},shouldKeepOriginalCommand:function(e,t){if(!e)return!0;if(0===t.length)return!0;if(!(e instanceof o.SortCommand))return!0;if(0===e.expressions.length)return!0;var n=e.getCompletionContext()||p;return n.is("secondary-field")?!1:n.is("secondary-report-function")?!1:!0},queryCompletions:function(e,t){t=t||p;var n=e.getCursorCommand();if(!n)return[];var r=[];if(t.is("default-filter")&&n instanceof c.DefaultSearch){var o=n.expressions[0],s=o?i.normalizeCase(o.val):"";r=this.defaultFilterFieldCompletions(s)}else if(r=this.commandCompletions(n,t),this.canExtendCommand(n))r=r.concat(this.commandExtensions(n,t));else if(1===r.length){var a=r[0],l=a.getCompletionContext()||p;if(!l.is("secondary-report-function")){var u=this.commandCompletions(a,t);r=this.shouldKeepOriginalCommand(a,u)?r.concat(u):u}}return _.each(r,function(e){if(e instanceof c.FilterCommand&&!e.isDefaultFilter()&&1===e.expressions.length){var t=e.expressions[0];!t.field&&!t.key||t.getCompletionContext()||(t.completionContext=new h("more-completions"))}}),_.map(r,function(t){return e.clone().replaceCursorCommand(t)})},shouldExtendQuery:function(e){var t=_.last(e.commands);return!t||!t.isComplete()&&t.argsComplete()?(t instanceof o.DefaultFilter||t instanceof o.DefaultSearch)&&t.expressions.length>0?!1:!0:!1},fieldOrFunctionCompletions:function(e,t){t=t||p;var n=[];return t.is("function")||(n=n.concat(this.fieldCompletions(e))),n=n.concat(this.functionCompletions(e,null,t))},functionCompletions:function(e,t,n){n=n||p;var r=i.normalizeCase(e.field);if(""===r&&!n.is("function")&&!n.is("limited-functions"))return n.is("inside-function")&&!n.is("report-command")?[]:s.make(this.contextExpr("function",{useForNextCompletions:!0}));var o,a=_.keys(s.functionConfig),l=this,c=_.chain(a).filter(function(e){return 0===i.normalizeCase(e).indexOf(r)}).filter(function(e){var n=s.getFunctionConfig(e);return n.showInAutocomplete?t?t(e,n):!0:!1}).value(),d=[];if(c.length>1){var h=this.sheet.get("fields").chain().without(this.field).first().value(),f=this.fieldExpr(h);d=_.map(c,function(e){o=l.getFunctionMinArgs(e,n);var t=[];return o>=1&&n.is("use-example-fields")?t=_.times(o,function(){return l.cloneExpr(f)}):o>=1&&(t=[l.contextExpr("field")]),l.functionExpr(e,t)})}else if(1===c.length){var m=c[0];o=l.getFunctionMinArgs(m,n),d=o>0?_.map(this.fieldOrFunctionCompletions({},p),function(e){return l.functionExpr(m,[e])}):[l.functionExpr(m)]}return""!==r||t||n.is("function")||(d=_.first(d,u)),d},getFunctionMinArgs:function(e,t){var n=s.getFunctionConfig(e),i=n.minArgs;return t.is("report-command")&&!t.is("inside-function")&&(i=n.commandMinArgs),i},opCompletions:function(e){return _.map(["+","-","=","<","and","or"],function(t){var n=e.clone();return n.op=t,n},this)},booleanExtensions:function(e,t,n){if(!n||"filter"!==n.canonicalName||n.isDefaultFilter())return[];if(e.noBooleanExtensions)return[];var i=[],r=e.cursorExpr();if(r){{e.lastExpr()}if(e.lastExpr()!==r)return[];if(!r.keyId(this.sheet)&&!r.val)return[];var o=e.clone();o.noBooleanExtensions=!0,i=this.expressionCompletions(o,t,n)}var s=this;return i.concat(_.map(["and","or"],function(t){return{op:t,expr1:e,expr2:s.contextExpr("more-completions")}}))},expressionCompletions:function(e,t,n){var i=this;t=t||p;var r=e.cursorExpr();if(!r&&e.hasField()||void 0===e.op){if(n&&"group"===n.canonicalName)return this.fieldCompletions(e,null,{noLinkedFields:!0});var o=this.fieldOrFunctionCompletions(e,t);return n&&"filter"===n.canonicalName&&!t.is("inside-function")&&(o=_.map(o,function(e){return e.completionContext?e:e.op?e:(e=i.cloneExpr(e),e.completionContext=new h("more-completions"),e)})),o}if(_.contains(["<=",">=","!=","<>","=","<",">",":"],e.op)){var a=this.comparisonCompletions(e,t,n);return a}if("NONE"===e.op)return _.chain(this.expressionCompletions(r,t,n)).map(function(t){var n=e.clone().replaceCursorExpr(t).setComplete();return i.opCompletions(n)}).flatten().value();if("."===e.op)try{var l=this.field?[this.field]:[];e.expr1.validate(this.sheet,{forbiddenFields:l});var c=e.expr1.getLinkedSheet(this.sheet);if(!c)return[];var u=this.fieldCompletions(e.expr2,c);if(1===u.length){var d=u[0];u=u.concat(this.argumentExtensions(n,d,c,!1))}return _.map(u,function(t){return e.clone().replaceRightExpr(t).setComplete()})}catch(m){if(m.displayable)return[];throw m}if("fn"===e.op){var g=e.name,v=s.getFunctionConfig(g),b=new f("inside-function",t);if(!v)return[];var y=e.arguments,w=e.getCursorArgument(),x=v.maxArgs;if(t.is("report-command")&&(x=v.commandMaxArgs),w&&y.length===x)return _.map(this.expressionCompletions(w,b,n),function(t){return e.clone().replaceCursorArgument(t)});if(y.length<x){if(w&&w.hasCursor(this.sheet))return _.chain(this.expressionCompletions(w,b,n)).map(function(t){return e.clone().replaceCursorArgument(t)},this).map(function(e){return i.expressionCompletions(e,b,n)}).flatten().value();if(y.length<x)return _.map(this.expressionCompletions(s.make({}),b,n),function(t){return e.clone().addArgument(t).setComplete()})}}if(r){var k=this.expressionCompletions(r,t,n);return _.map(k,function(t){return e.clone().replaceCursorExpr(t)})}return[]},reportFormulaCompletions:function(e){if(e.length>1&&e[e.length-1]===a){var t=e.substr(0,e.length-1);try{return s.parse(t,this.sheet,{isReportFormula:!0}),[]}catch(n){}}var i=new f("use-example-fields","limited-functions","report-command");return this.expressionCompletionStrings(e,function(e){return e.hasCursor(this.sheet)?e.hasField()||null==e.op?this.functionCompletions(e,function(e,t){return t.aggregate},i):"fn"===e.op?this.expressionCompletions(e,i):void 0:[]}.bind(this))},formulaCompletions:function(e){var t=new f("use-example-fields","limited-functions");return this.expressionCompletionStrings(e,function(e){return e?this.expressionCompletions(e,t):this.fieldOrFunctionCompletions(s.make({}),t)}.bind(this))},expressionCompletionStrings:function(e,t){var n;try{n=s.parse(e,null,{partialAllowed:!0})}catch(i){return console.warn(i),[]}var r=t(n);return _.chain(r).map(s.make).filter(function(e){return!e.getCompletionContext()}).invoke("setComplete").invoke("stringify",this.sheet).value()},completions:function(e,t){var n;try{n=new r(e,null,this.sheet,{allowInvalid:!0})}catch(i){return console.warn(i),[]}if(!n.validForCompletions())return[];var o=[];return o=this.shouldExtendQuery(n)?this.queryExtensions(n,t):this.queryCompletions(n,t)},remove:function(){this.removeListeners()}}),t.exports=d;var h=function(){return this.initialize.apply(this,arguments),this};_.extend(h.prototype,{initialize:function(e,t){t=t||{},this.id=e,this.useForNextCompletions=t.useForNextCompletions,e&&(this.name=i.stencil("context-name-"+e))},is:function(e){return this.id===e}}),h=extendable(h);var f=h.extend({initialize:function(){this.contexts=_.map(arguments,function(e){return _.isString(e)?new h(e):e})},is:function(e){return _.any(this.contexts,function(t){return t.is(e)})}}),p=new h;d.CompletionContext=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../common/errors":242,"../../../common/strings":249,"../../parser":74,"../expressions/expression":42,"./commands":55,"./query":58}],55:[function(e,t,n){(function(i){"use strict";var r=e("../expressions/expression"),o=e("./results"),s=e("../../../common/strings"),a=e("../record"),l=e("../sheet"),c=(e("../field"),e("../../viewModels/reportRecordList")),u=e("../../../common/values"),d=e("../../../common/errors"),h="default",f=n.lookup=function(e){return e=e||h,p[e]},p={},m=n.addToRegistry=function(e,t){p[e]=t},g=(n.commandsMatching=function(e){return _.filter(p,function(t){return 0===t.prototype.canonicalName.indexOf(e)})},n.isCommand=function(e){return!!p[e]},n.PowerBarCommand=function(){this.initialize.apply(this,arguments)});_.extend(g.prototype,{minArgs:1,hasParens:!1,isValid:!0,validForCompletions:!0,initialize:function(e,t){e=e||{},this.query=t,this.cursor=e.cursor,this.expressions=this.parseArguments(e.arguments)||[],this.setupOperation()},hasCommandName:!0,isValidCommand:function(e){var t=!1;try{this.validate(e),t=!0}catch(n){if(!(n instanceof d.ValidationError))throw n;t=!1}return t},contextify:function(e){var t={cid:this.cid,iconName:this.icon,hasParens:this.hasParens,color:this.color};return this.hasCommandName&&(t.name=this.completionName()),t.expressions=_.invoke(this.expressions,"contextify",e),t},clone:function C(){var e=this.constructor,C=new e({cursor:this.cursor},this.query);return C.expressions=_.invoke(this.expressions,"clone"),C},isWhere:function(){return!1},isDefaultFilter:_.constant(!1),completionName:function(){return this.canonicalName},hasNoArguments:function(){return 0===this.expressions.length},isSort:function(){return!1},isGroup:function(){return!1},isReport:function(){return!1},isComplete:function(){return!this.cursor&&this.expressions.length>=this.minArgs},validate:function(e,t){return _.each(this.expressions,function(n){return n.validate(e,t)})},argsComplete:function(){return this.expressions.length<this.minArgs?!1:_.every(this.expressions,function(e){return!e.hasCursor()})},setComplete:function(){return this.cursor=!1,_.invoke(this.expressions,"setComplete"),this},areArgsComplete:function(){return 0===this.expressions.length||!_.last(this.expressions).cursor},canTakeMoreArgs:function(){return void 0===this.maxArgs||this.expressions.length<this.maxArgs},addArgument:function(e){return this.expressions.push(r.make(e,this)),this},replaceLastArgument:function(e){return this.expressions.pop(),this.addArgument(e)},getCompletionContext:function(){if(this.completionContext)return this.completionContext;var e;return _.each(this.expressions,function(t){e=e||t.getCompletionContext()}),e},replaceCursorArgument:function(e){var t=this,n=r.make(e,this),i=_.find(this.expressions,function(e,i){var r=e.cursor;return r&&(t.expressions[i]=n),r});if(!i){var o=this.expressions.length-1;0>o&&(o=0),this.expressions[o]=n}return this},getCursorArgument:function(){return _.find(this.expressions,function(e){return e.hasCursor()})},addMatch:function(e,t){this.query.addMatch(e,t)},parseArguments:function(e){var t=this;return _.map(e,function(e){return r.make(e,t)})},setupOperation:function(){},transformResult:function(e){var t=this,n=_.map(e.recordLists,function(e){return t.transformRecords(e)});return new o.Results(n)},transformRecords:function(e){var t=this,n=e.records.filter(function(e){var n=t.acceptRecord(e);return!n&&e.isSticky()?(e.setIncludedDueToSticky(!0),!0):n});return o.createRecordListFromList(e,n)},stringifyExpressions:function(){return this.expressions},stringify:function(e,t){var n,i=_.map(this.stringifyExpressions(t),function(n){return n.stringify(e,t)});return this.hasParens?n=this.canonicalName+"("+i.join(", ")+")":(n=this.canonicalName,i.length&&(n+=" "+i.join(", "))),n},nameify:function(e){return this.stringify(e)},boundTerms:function(e){var t=_.map(this.expressions,function(t){return t.boundTerms(e)}),n={cmd:this.bindCommandString(),arguments:t};return this.cursor&&(n.cursor=this.cursor),n},bindCommandString:function(){return this.canonicalName},explain:function(){return null}}),g=extendable(g);var v=t.exports.FilterCommand=g.extend({canonicalName:"filter",icon:"filter",color:"salmon",isWhere:function(){return!0},acceptRecord:function(e){return _.every(this.expressions,function(t){if(t.isEmpty())return!0;var n=t.evaluate(e);return n.isError()?!1:n.booleanValue()})},explain:function(e){return s["command-where-tip"]({formula:_.invoke(this.expressions,"stringify",e).join(" ")})}});m("filter",v),m("where",v);var b=(n.DefaultFilter=v.extend({maxArgs:1,isDefaultFilter:_.constant(!0),hasCommandName:!1,icon:"search",color:"seaFoam",boundTerms:function(e){var t=this.expressions[0].boundTerms(e),n={cmd:t.expr1,arguments:[t.expr2]};return n},stringify:function(e,t){return _.invoke(this.stringifyExpressions(t),"stringify",e,t).join(" ")},explain:function(e){var t=this.expressions[0].boundTerms(e);return s["command-column-search-tip"]({column:e.getFields().get(t.expr1.key).get("name"),keyword:t.expr2.val})},completionName:function(){return null}}),n.SearchCommand=g.extend({canonicalName:"search",icon:"search",color:"seaFoam",acceptRecord:function(e){var t=this,n=e.getFields();return _.every(t.expressions,function(i){var r=i.evaluate(e).displayValue(),o=n.any(function(t){return s.contains(e.getDisplayValue(t.id),r)});return o&&t.addMatch(r),o})},explain:function(e){return s["command-search-tip"]({keyword:_.invoke(this.expressions,"stringify",e).join(" ")})}}));m("search",b);var y=n.DefaultSearch=b.extend({maxArgs:1,hasCommandName:!1,validArgument:function(e){return _.contains(['"',"'","bareword",null,void 0],e.op)},parseArguments:function(e){var t=this;return _.map(e,function(e){if(!t.validArgument(e))return t.validForCompletions=!1,r.make({},t);var n=_.omit(e,"val");return n.val=s.normalizeCase(e.val),r.make(n,t)})},validate:function(){_.each(this.expressions,function(e){if(!this.validArgument(e))throw new d.ValidationError("error-invalid-search-term")}.bind(this)),b.prototype.validate.call(this)},stringify:function(e,t){var n=_.map(this.stringifyExpressions(t),function(n){return n.stringify(e,t)});return n.join(" ")},bindCommandString:function(){return null},completionName:function(){return null}});m(h,y);var w=n.ReverseCommand=g.extend({canonicalName:"reverse",minArgs:0,maxArgs:0,hasParens:!0,icon:"sort-column-reverse",color:"blue",transformRecords:function(e){var t=_.clone(e.records.models).reverse();return o.createRecordListFromList(e,t)}});m("reverse",w),m("rev",w);var x=n.SortCommand=g.extend({canonicalName:"sort",icon:"sort",color:"blue",transformRecords:function(e){var t=this,n=_.map(this.expressions,function(n){var i=!0;n.isOrder()&&!n.ascending&&(i=!1);var r=t.evalExpression(n),o={};return r.isSimpleField()&&(o=r.findField(e.sheet).enumOrderedValueMap()),new u.SortKey(function(e){return r.evaluate(e)},i,o)}),i=u.sortWithKeys(e.records.models,n);return o.createRecordListFromList(e,i,{sortable:!1})},isSort:function(){return!0},evalExpression:function(e){return e.isOrder()?e.expr1:e},toggleField:function(e){var t=this.expressions[0];if(void 0!==t){var n=this.evalExpression(t);if(n.isSimpleFieldFor(e)){if(t.isOrder())return t.ascending?void(t.ascending=!1):void(this.expressions=this.expressions.slice(1,this.expressions.length));var i=r.createOrder(!1,t);return void(this.expressions[0]=i)}}var o=r.make({key:e.get("key")});this.expressions.unshift(o)},sortField:function(e,t){var n=this.expressions[0],i=n&&this.evalExpression(n),o="desc"===t;if(i&&i.isSimpleFieldFor(e))if(o)if(n.isOrder())n.ascending=!1;else{var s=r.createOrder(!1,n);this.expressions[0]=s}else n.isOrder()&&!n.ascending&&(this.expressions[0]=i);else{var a=r.make({key:e.get("key")});o&&(a=r.createOrder(!1,a)),this.expressions.unshift(a)}},explain:function(e){var t=(e.getFields(),""),n=s["command-sort-tip"];return this.expressions.forEach(function(i){var r=i.nameify(e);t+=n({column:r}),n=s["command-more-tip"],i.ascending===!1&&(t+=s["command-sort-desc-tip"]())}),t},validate:function(){if(g.prototype.validate.apply(this,arguments),0===this.expressions.length)throw new d.ValidationError("no-sort-expression")}});m("sort",x),m("order",x);var k=n.ReportCommand=g.extend({canonicalName:"report",icon:"report",color:"green",createReportSheet:function(e){var t=l.add({_id:_.uniqueId("syntheticSheet_"),synthetic:!0}),n=[],r=e.firstRecordList();return r&&r.fixedValues&&(n=i._getUnderscore(r.fixedFields()).map(function(e){var t=_.clone(e.attributes);return t.hidden=!1,e.isFormula()&&(t.type="generic",t.expression=""),t})),_.each(this.transformedExpressions(),function(t){var i={name:t.nameify(e),key:_.uniqueId("aggregateField_"),type:"report-formula",expression:t,sourceSheet:r.sheet};n.push(i)}),t.set("fields",n),t},createSummaryRecord:function(e,t,n,i){var r={_id:_.uniqueId("syntheticRecord_"),sheetId:i.id,synthetic:!0};_.each(t,function(e,t){r[e]=n[t]});var o=a.add(r);return o.sourceRecords=e,o},transformResult:function(e){this.validate(e);var t,n=this.createReportSheet(e),i=this,r=_.map(e.recordLists,function(e){return i.createSummaryRecord(e.records.models,e.fixedKeys,e.fixedValues,n)}),a=e.firstRecordList();if(r.length>1){var l=_.chain(e.recordLists).map(function(e){return e.records.models}).flatten().value(),u=_.times(a.fixedKeys.length,function(){return s["all-clump-value"]()});t=i.createSummaryRecord(l,a.fixedKeys,u,n)}return new o.Results([o.createRecordListFromList(a,r,{fixedKeys:[],fixedValues:[],sheet:n,type:c,summaryRecord:t,sourceSheet:e.firstSheet()})])},firstFixedValue:function(e){return e.fixedValues?e.fixedValues[0]:null},firstFixedKey:function(e){return e.fixedKeys?e.fixedKeys[0]:null},validate:function(e,t){var n=this.transformedExpressions();if(!n||0===n.length)throw new d.ValidationError("error-report-missing-arguments");_.each(n,function(n){n.validateReportExpression(e,t)})},transformedExpressions:function(){return this.expressions||[]},isReport:function(){return!0}});m("report",k);var S=n.AggregateCommand=k.extend({hasParens:!0,transformedExpressions:function(){if(this.transformed)return this.transformed;var e=this;return 0!==this.expressions.length?this.transformed=_.map(this.expressions,function(t){return r.createAggregate(e.canonicalName,[t],e)}):this.expressions.length>=this.minArgs?[r.createAggregate(e.canonicalName,[],e)]:void 0}});_.each(r.functionConfig,function(e,t){if(e.aggregate){var n=S.extend({canonicalName:t,isAggregate:!0,minArgs:e.commandMinArgs,maxArgs:e.commandMaxArgs});m(t,n)}}),n.lookupAggregateCommand=function(e){return p[e]},n.defaultCommand=f(h),n.BadCommand=g.extend({isValid:!1,initialize:function(e){this.text=e.text,this.error=e.error,this.original=e.original},stringify:function(){return this.text},validate:function(){},isComplete:function(){return!0}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../common/errors":242,"../../../common/strings":249,"../../../common/values":253,"../../viewModels/reportRecordList":107,"../expressions/expression":42,"../field":45,"../record":61,"../sheet":63,"./results":59}],56:[function(e,t,n){"use strict";var i=e("../../../common/strings"),r=e("../../trackJs"),o=e("./commands"),s=e("./results"),a=e("../../viewModels/groupRecordList"),l=e("../groupSort"),c=e("../../../common/values"),u=e("../expressions/expression"),d=e("../../../common/errors"),h=function(){this.initialize.apply(this,arguments)};_.extend(h.prototype,{initialize:function(e,t,n,i){this.field=e[0],this.nextFields=_.rest(e),this.sheet=t,this.parent=n,this.fixedValue=i,this.children={},this.parent||0!==this.nextFields.length||this.initializeEnumGroups()},isEmpty:function(){return _.isEmpty(this.children)},initializeEnumGroups:function(){if(this.field&&this.field.isEnum()){var e=this;this.field.get("enum").each(function(t){var n=c.create(t.get("name"));e.getChildForKey(n)})}},getAllFields:function(){return _.concat(this.field,this.nextFields)},addRecord:function(e){if(this.field){var t=e.getValue(this.field.get("key"));this.getChildForKey(t).addRecord(e)}},getAllGroups:function(){return this.isLastGroup()?_.values(this.children):_.chain(this.children).map(function(e){return e.getAllGroups()}).concat().flatten(!0).value()},sortedGroups:function(){return l(this.getAllGroups(),this.getAllFields(),function(e,t){return e.getValue(t)})},getChildForKey:function(e){var t=e.groupingValue();if(_.has(this.children,t))return this.children[t];var n;return n=this.isLastGroup()?new f(this.sheet,this.fixedValues().concat([e]),this):new h(this.nextFields,this.sheet,this,e),this.children[t]=n},fixedValues:function(){return this.parent?this.parent.fixedValues().concat([this.fixedValue]):[]},isLastGroup:function(){return 0===this.nextFields.length}});var f=function(){this.initialize.apply(this,arguments)};_.extend(f.prototype,{initialize:function(e,t,n){this.sheet=e,this.fixedValues=t,this.records=[],this.parent=n},addRecord:function(e){this.records.push(e)},getValue:function(e){return this.fixedValues[e]}});var p=o.PowerBarCommand.extend({canonicalName:"group",hasParens:!1,icon:"group",color:"yellow",isGroup:function(){return!0},currentFields:function(e){return _.chain(e.recordLists).map(function(e){return e.fixedFields?e.fixedFields():[]}).max(function(e){return e.length}).value()},createGroups:function(e){var t=_.uniq(this.simpleGroupFields(e).concat(this.currentFields(e))),n=new h(t,e.firstSheet()),i=!1;if(_.chain(e.recordLists).map(function(e){return e.records.models}).flatten(!0).each(function(e){i=!0,n.addRecord(e)}),!i&&n.isEmpty())for(var r=n;r instanceof h;)r=r.getChildForKey(c.createEmpty());return n},sortGroups:function(e){e.getAllFields();return e.sortedGroups()},assertValidCommand:function(){if(!this.hasSimpleExpressions())throw new Error("Cannot group by a formula")},transformResult:function(e){this.assertValidCommand(e);var t=this.createGroups(e),n=[];if(t.isEmpty())n.push(s.createRecordListFromList(e.firstRecordList(),[]));else{var i=this.sortGroups(t,e),r=_.map(t.getAllFields(),function(e){return e.get("key")});n=_.map(i,function(t){return s.createRecordListFromList(e.firstRecordList(),t.records,{fixedValues:t.fixedValues,fixedKeys:r,type:a})})}return new s.Results(n)},hasSimpleExpressions:function(){return _.all(this.expressions,function(e){return e.isSimpleField()})},simpleGroupFields:function(e){if(this.hasSimpleExpressions()){return _.chain(this.expressions).map(function(t){return t.findField(e)}).uniq().value()}return[]},nameify:function(e){var t=_.map(this.simpleGroupFields(e),function(e){return e?e.displayName():i["unknown-field"]()}).join(", ");return i["by-groups"]({fieldNames:t})},removeField:function(e,t){this.expressions=_.filter(this.expressions,function(n){return n.findField(t).get("key")!==e})},addField:function(e){var t=u.make({key:e.get("key")});this.expressions.unshift(t)},explain:function(e){var t=this.simpleGroupFields(e);t[0]||r.console.log("first field is null in GroupCommand#explain!","expressions.length",this.expressions.length,"fields.length",t.length,"hasSimpleExpressions",this.hasSimpleExpressions(),"simpleExpressions",_.map(this.expressions,function(e){return e.isSimpleField()}),"field keys",_.map(t,function(e){return e&&e.id}));var n=i["command-group-tip"]({column:t[0].get("name")});return _.each(_.rest(t),function(e){n+=i["command-more-tip"]({column:e.get("name")})}),n},validate:function(e){if(o.PowerBarCommand.prototype.validate.apply(this,arguments),this.assertValidCommand(e),0===this.expressions.length)throw new d.ValidationError("no-group-expression")}});n=o.GroupCommand=p,o.addToRegistry("group",p)},{"../../../common/errors":242,"../../../common/strings":249,"../../../common/values":253,"../../trackJs":78,"../../viewModels/groupRecordList":90,"../expressions/expression":42,"../groupSort":46,"./commands":55,"./results":59}],57:[function(e,t,n){"use strict";n.GroupCommand=e("./groupCommand"),n.Autocompleter=e("./autocompleter"),n.Query=e("./query"),n.commands=e("./commands"),n.results=e("./results")},{"./autocompleter":54,"./commands":55,"./groupCommand":56,"./query":58,"./results":59}],58:[function(e,t){"use strict";var n=e("./commands"),i=e("../../parser"),r=e("./results"),o=e("../sheet"),s=e("../../../common/errors"),a=e("../../performance"),l=e("../../../common/values"),c=function(){this.initialize.apply(this,arguments)};_.extend(c.prototype,{initialize:function(e,t,r,o){this.commands=[],this.matches={},this.sheet=r,o=o||{},t||(t=e?i.parsePowerBar(e):[]);var a=!1,l=t.map(function(e){var t=this.makeCommand(e);if(o.allowInvalid)return t;try{if(a)throw new s.ValidationError("error-report-comes-last");return t.validate(this.sheet,{forbiddenFields:[]}),a=t.isReport(),t}catch(i){return new n.BadCommand({text:e.text,error:i,original:t})}}.bind(this));this.addCommands(l)},clone:function(){var e=new c(null,null,this.sheet);return e.addCommands(_.invoke(this.commands,"clone")),e},isValid:function(e){e=e||{forbiddenFields:[]};try{this.validate(e)}catch(t){return!1}return _.all(_.pluck(this.commands,"isValid"))},validate:function(e){return _.each(this.commands,function(t){t.validate(this.sheet,e)}.bind(this))},validForCompletions:function(){return _.all(this.commands,function(e){return e.validForCompletions})},hasOneCommand:function(){return 1===this.commands.length},firstCommand:function(){return this.commands[0]},hasCommands:function(){return this.commands.length>0},isComplete:function(){return!this.hasCommands()||_.every(this.commands,function(e){return e.isComplete()})},setComplete:function(){return _.invoke(this.commands,"setComplete"),this
},nameify:function(){var e=this.createResults();return _.map(this.commands,function(t){return t.nameify(e)}).join(" ")},addMatch:function(e,t){t=t||"all",this.matches[t]=this.matches[t]||{},this.matches[t][e]=!0},termsForKey:function(e){var t=[];return e in this.matches&&(t=t.concat(_.keys(this.matches[e]))),this.matches.all&&(t=t.concat(_.keys(this.matches.all))),t},executePipeline:function(){return a.addTiming("powerbar-query",function(){var e=this.createResults();return e.resetIncluded(),e.applyCommands(this.commands)}.bind(this))},getCompletionContext:function(){return _.chain(this.commands).invoke("getCompletionContext").find(_.identity).value()},hasReportCommand:function(){return _.chain(this.commands).invoke("isReport").some().value()},isDefaultFilter:function(e){{var t=e.arguments,n=e.cursor;e.cmd}return 0===t.length&&n?-1!==e.text.indexOf(":")?!0:!1:1!==t.length||null==t[0].val&&!t[0].cursor?!1:!0},isDefaultSearch:function(e){return 0===e.arguments.length&&e.cursor},makeCommand:function(e){var t=e.cmd;if("invalid"===t)return new n.BadCommand({text:e.text,error:e.error});var i=e.arguments,r=e.cursor,o=n.lookup(t);if(!o)if(this.isDefaultFilter(e)){o=n.DefaultFilter;var s=t;_.isString(t)&&(s={field:t});var a={op:":",expr1:s,expr2:i[0]};a.expr2||(a.expr2={cursor:!0},a.cursor=!0),i=[a]}else{if(!this.isDefaultSearch(e))throw new Error('unknown command "'+t+'"');o=n.DefaultSearch,i=[{op:"bareword",cursor:r,val:t}]}return new o({arguments:i,cursor:r})},createResults:function(){var e=this.sheet;return e instanceof o&&(e=r.Results.fromSheet(e)),e},stringify:function(e){var t=this.createResults();return _.map(this.commands,function(n){return n.stringify(t,e)}).join(" | ")},getCommandDescriptors:function(){var e=this.createResults();return this.commands.map(function(t){return t.isValid?{command:t,name:t.canonicalName,string:t.stringify(e),tip:t.explain(e)}:{error:t.error,string:t.text}})},isEqual:function(e){return this===e?!0:e instanceof c?this.stringify()===e.stringify():!1},boundTerms:function(){var e=this.createResults();return _.map(this.commands,function(t){return t.boundTerms(e)})},toggleSortField:function(e){var t=_.last(this.commands);if(t&&t.isSort())t.toggleField(e),0===t.expressions.length&&(this.commands=this.commands.slice(0,this.commands.length-1));else{var i=new n.SortCommand({arguments:[{key:e.get("key")}]});this.addCommand(i)}},sortField:function(e,t){var i=_.last(this.commands);if(i&&i.isSort())i.sortField(e,t);else{var r={key:e.get("key")};"desc"===t&&(r={op:"order",ascending:!1,expr1:r});var o=new n.SortCommand({arguments:[r]});this.addCommand(o)}},addKeyword:function(e){var t=!/\W/.test(e),i=t?"bareword":'"',r=new n.DefaultSearch({arguments:[{op:i,val:e}]});this.addCommand(r)},addFilter:function(e,t){var i,r=l.create(t);i=r.constructor===l.types.NumericValue?{op:"bareword",val:t}:{op:'"',val:t};var o={op:"=",expr1:{key:e},expr2:i},s=_.last(this.commands);if(!s||!s.isWhere()||s instanceof n.DefaultFilter){var a=new n.FilterCommand({arguments:[o]});this.addCommand(a)}else s.addArgument(o)},isGrouped:function(){var e=0;return _.each(this.commands,function(t){t.isGroup()?e++:t.isReport()&&(e=0)}),e>0},groupCommands:function(){return _.filter(this.commands,function(e){return e.isGroup()})},addOrUpdateGroupBy:function(e){var t=_.last(this.commands);if(t&&t.isGroup())t.addField(e);else{var i=new n.GroupCommand({arguments:[{key:e.get("key")}]},this);this.addCommand(i)}},addReportQuery:function(e){this.addOrUpdateGroupBy(e);var t=new n.ReportCommand({arguments:[{op:"fn",name:"count",arguments:[]}]});this.addCommand(t)},replaceReportExpressions:function(e){var t=_.chain(this.commands).filter(function(e){return e.isReport()}).last().value();t.isAggregate?(this.commands=_.without(this.commands,t),t=new n.ReportCommand({arguments:e}),this.addCommand(t)):t.expressions=e},removeGroupBy:function(e){var t=this,n=this.groupCommands();0!==n.length&&(_.each(this.commands,function(n){n.isGroup()&&n.removeField(e,t.sheet)},this),this.commands=_.filter(this.commands,function(e){return e.isGroup()&&e.hasNoArguments()?!1:!0}))},addCommand:function(e){return e.query=this,this.commands.push(e),this},addCommands:function(e){var t=this;_.each(e,function(e){t.addCommand(e)})},replaceLastCommand:function(e){return this.commands.pop(),this.addCommand(e)},replaceCursorCommand:function(e){var t=this;return _.find(this.commands,function(n,i){var r=!n.isComplete();return r&&(t.commands[i]=e),r},this),this},getCursorCommand:function(){return _.find(this.commands,function(e){return!e.isComplete()})},contextify:function(){var e={};return e.commands=_.invoke(this.commands,"contextify",this.sheet),e}}),t.exports=c},{"../../../common/errors":242,"../../../common/values":253,"../../parser":74,"../../performance":75,"../sheet":63,"./commands":55,"./results":59}],59:[function(e,t,n){(function(t){"use strict";var i=e("../index"),r=e("../../viewModels"),o=e("../../viewModels/recordIterator"),s=n.Results=function(){this.initialize.apply(this,arguments)};_.extend(s.prototype,{initialize:function(e){this.recordLists=e||[]},applyCommands:function(e){return _.reduce(e,function(e,t){return t.isValid?t.transformResult(e):e},this)},resetIncluded:function(){t._getUnderscore(this.recordLists).each(function(e){e.records.each(function(e){e.setIncludedDueToSticky(!1)})})},getFields:function(){var e=new i.Field.Collection([]);return _.each(this.recordLists,function(t){e.add(t.getFields().models,{silent:!0})}),e},getFixedFields:function(){if(this.fixedFields)return this.fixedFields;var e=this.firstRecordList();return _.soak(e,"fixedValues")?this.fixedFields=e.fixedFields():null},startListeners:function(){_.invoke(this.recordLists,"startListeners")},reuseRecordLists:function(e){if(e){var t={};_.each(e.recordLists,function(e){e.records.each(function(n){var i=n.cid;if(i in t)throw new Error("Record in two record lists!");t[i]=e})});var n=_.map(this.recordLists,function(n){if(0===n.records.size()){var i=_.find(e.recordLists,function(e){return e.isEqual(n)});return i?i:n}var r=n.records.at(0);if(!(r.cid in t))return n;var o=t[r.cid];return o.isEqual(n)?o:n});this.recordLists=n}},firstRecordList:function(){return this.recordLists.length>0?this.recordLists[0]:null},firstSheet:function(){return this.recordLists.length>0?this.recordLists[0].sheet:null},recordIterator:function(){var e=t._getUnderscore(this.recordLists).chain().pluck("records").invoke("toArray").flatten().value();return new o({records:e})}}),s.fromSheet=function(e){var t=[new r.RecordList({sheet:e,records:e.get("records"),delayListeners:!0})];return new s(t)},n.createRecordListFromList=function(e,t,n){return n=n||{},_.defaults(n,{delayListeners:!0}),e.cloneWithRecords(t,n)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../viewModels":99,"../../viewModels/recordIterator":103,"../index":47}],60:[function(e,t){"use strict";var n={qfetch:function(e){if(this.qfetchPromise)return this.qfetchPromise;var t=Q.defer(),n=this;return e=e||{},_.extend(e,{success:function(e){n.qfetchPromise=null,t.resolve(e)},error:function i(e,r,o){n.qfetchPromise=null;var i=new Error(r.status+" "+r.statusText);i.model=e,i.response=r,i.options=o,t.reject(i)}}),this.fetch(e),this.qfetchPromise=t.promise,this.qfetchPromise},qfetchIfNeeded:function(e){return this.needsFetch()?this.qfetch(e):Q(this)}};t.exports=function(e){_.extend(e.prototype,n)}},{}],61:[function(e,t){(function(n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=e("backbone"),o=(e("inflection"),e("../actions")),s=e("./index"),a=e("./model"),l=e("./collection"),c=e("./store"),u=e("./expressions/derivedValue"),d=e("./derivedSymrefValue"),h=e("../../common/values"),f=(e("./sheet"),e("../../common/values/valueTimestamp"),e("../trackJs")),p=e("../../common/strings"),m={},g=a.extend({firstSetAttributes:["sheetId","deletedFromSheetId","synthetic"],hasTimestamps:!0,initialize:function(){this.sticky=!1,this._includedDueToSticky=!1,this.deferredLoad=Q.defer(),this.valueObserver=new v(this)},setSticky:function(){this.sticky=!0},setNonSticky:function(){this.sticky=!1,this._includedDueToSticky=!1},isSticky:function(){return this.sticky},setIncludedDueToSticky:function(e){this._includedDueToSticky=e},isIncludedDueToSticky:function(){return this._includedDueToSticky},initialLoadPromise:function(){return this.deferredLoad.promise},hasData:function(){return!!this.id||this.isSynthetic()},resolveAllValues:function(){var e=this;this.sheet().get("fields").each(function(t){var n=t.get("key"),i=e.getValue(n),r=t.resolveValue(i);r.isEqual(i)||e.set(n,r)})},hasIntegration:function(){return n._getUnderscore(this).soak("sheet().hasIntegration()")},getIntegration:function(){return n._getUnderscore(this).soak("sheet().getIntegration()")},syncState:function(){return n._getUnderscore(this).soak("getIntegration().canCreateRecords()")?this.get("syncState"):"n/a"},getLowercaseName:function(){return n._getUnderscore(this).soak("rawName().toLowerCase()")},syncErrorMessage:function(){var e=this.get("syncError");if(null==e)return"";if("message"===e.type)return e.value;if("validation"===e.value){var t=n._getUnderscore(this.getFields()).chain().filter(this.hasInputErrorForField.bind(this)).invoke("displayName").value();if(0===t.length)return"";var i;return i=1===t.length?"integration-error-in-field":"integration-error-in-fields",p[i]({fields:t.join(", ")})}throw new Error("Unknown sync error code")},hasInputErrorForField:function(e){return this.getValue(e.get("key")).isInputError()},postInitialize:function(){function e(e){n.onNameChange=s.debounce(n.onNameChange.bind(n),50,!0),n.on("change:"+e.get("nameKey"),function(){n.onNameChange.apply(n,arguments),n.trigger("name-change",n)})}var t=this.sheet(),n=this;t?e(t):this.sheetPromise().then(e),this.on("sync",this.onNameChange),this.on("destroy",this.onDestroy),this.on("beforeRestore",this.onRestore),this.on("joinOrderChange",this.onJoinOrderChange)},onNameChange:function(){var e=this.sheet().nameField()?this.getDisplayValue(this.nameKey()):null;e&&(_.soak(this,"sheet().book().updateMissingLinks",e,this.id,this.effectiveSheetId(),{error:defaultErrorHandler("update-missing-links")}),this.isTemporary()||this.sheet().removeMissingRecord(this))},onDestroy:function(){var e=this;n._getUnderscore(this).soak("valueObserver.remove()"),this.stopListening(),this.getFields().each(function(t){if(t.isJoin()){var n=t.getJoin();if(n){var i=n.sideForField(t);n.removeSymrefsForRecord(e,i)}}})},onRestore:function(){var e=this;this.getFields().each(function(t){if(t.isJoin()){var n=t.getJoin();n||t.throwJoinError();var i=n.sideForField(t);n.restoreSymrefsForRecord(e,i)}})},getFields:function(){var e=this.sheet();return e?e.getFields():new s.Field.Collection},urlRoot:function(){return this.isNew()&&this.collection&&this.collection.url?null:"/records"},effectiveSheetId:function(){return this.get("sheetId")||this.get("deletedFromSheetId")},sheet:function(){var e=this.effectiveSheetId();return e&&s.Sheet.find(e)},needsFetch:function(){if(this.isTemporary())return!1;if(a.prototype.needsFetch.call(this))return!0;var e=_.values(this.get("children"));return _.any(e,function(e){return e.any(function(e){return e.dirty})})},nameKey:function(){var e=this.sheet();return e&&e.get("nameKey")},name:function(e){if(!this.isSheetLoaded())return"";var t=this.nameKey(),n="";return _.soak(this,"sheet().nameField()")&&(n=_.soak(this.getValue(t),"displayValue",e)||""),""===n&&(n=this.placeHolderName()),n},usesPlaceholderName:function(){if(!this.isSheetLoaded())return!1;var e=this.nameKey(),t="";return _.soak(this,"sheet().nameField()")&&(t=_.soak(this.getValue(e),"displayValue()")||""),""===t},getClientName:function(){return this.clientName||this.get(this.nameKey())},placeHolderName:function(){return this.get("shortId")?this.sheet().placeHolderName()+" "+this.get("shortId"):void 0},rawName:function(){var e=this.nameKey();return _.soak(this.get(e),"displayValue()")},hasName:function(){var e=this.nameKey();return e&&this.has(e)},setName:function(e){var t=this.nameKey();if(t){var n={timestamps:{}};n[t]=e,n.timestamps[t]=null,this.set(n)}},saveName:function(e,t){var n=this.nameKey();n&&this.saveIfNeeded(n,e,t)},getDisplayValue:function(e,t){if(e===this.nameKey())return this.name(t);var n=this.getValue(e);return n?n.displayValue(t):""},fieldWithKey:function(e){var t=this.sheet();return t&&t.fieldWithKey(e)},getValue:function(e){var t;_.isObject(e)?(t=e,e=t.get("key")):t=this.fieldWithKey(e);var n=!1;t&&(n=this.isTemporary()?t.isJoin()&&!this.isSynthetic():t.hasAnyFormula()||t.isJoin()&&!this.isSynthetic());var i;return i=n?this.valueObserver.derivedValueFor(t).getValue():this.get(e),i||h.createEmpty()},getValueOrPlaceholder:function(e){var t=this.getValue(e);return t.isEmpty()&&e===this.nameKey()?new h.types.StringValue(this.placeHolderName()):t},getValues:function(){var e=this;return this.getFields().map(function(t){return e.getValue(t.get("key"))})},set:function(e,t,n){this.incrementSetting();try{return this.parseBackboneArguments(e,t,n,function(e,t){t=t||{};var n=this.firstSetAttributes.concat(this.idAttribute),i=_(e).pick(n);_.isEmpty(i)||(r.Model.prototype.set.call(this,i,t),e=_.omit(e,i)),e=this.wrapValues(e),this.preprocessAttributeTimestamps(e);var o=this;_.each(e,function(n,i){var r=o.updateLinkValue(n,i,t);r===m&&delete e[i]});var s=this.get("sheetId"),l=a.prototype.set.call(this,e,t);if("sheetId"in e&&t.silent){var c=this.get("sheetId");_.isEqual(s,c)||this.trigger("change:sheetId",this,c)}return this.afterAllSetting(function(){this.deferredLoad&&this.effectiveSheetId()&&o.deferredLoad.resolve()}),l})}finally{this.decrementSetting()}},updateLinkValue:function(e,t,n){var i=this;if(!this.noValueKeys[t]){var r=this.sheet();if(!r)throw new Error("Record does not have a sheet: "+this.id);var o=r.fieldWithKey(t);if(o&&o.isAnyLink()){var s=this.previousAttributes()[t];if(!i.isSynthetic()&&((e&&e.isRef()||s&&s.isRef())&&i.afterAllSetting(function(){i.updateLinkedRecords(s,e,o)}),o.isJoin()&&e.isRef())){if(!n.noSymrefUpdate)return i.afterAllSetting(function(){o.updateSymrefs(i,e)}),m;i.once("sync",function(){o.updateSymrefs(i,e)})}}}},updateLinkedRecords:function(e,t,n){var i=this;e&&e.isRef()&&e.eachRef(function(e){var t=e.linkedRecord();t&&t.removeChild(i,n)}),n.isLegacyLink()&&t&&t.isRef()&&t.eachRef(function(e){var t=e.linkedRecord();t&&t.addChild(i,n)})},patch:function(e,t,n){n=n||{};var i=this;e=_.mapObject(e,function(e,n){var r=i.fieldWithKey(n);return r?r.isJoin()?(e.oldValue=t[n],e):e:e}),this.set(e,n);var r=this.getClientName();e.clientName=r;var o=n.success;return n=_.extend({},n,{success:function(){o&&o.apply(this,arguments)}}),a.prototype.patch.call(this,e,t,n)},sheetPromise:function(){var e=this.effectiveSheetId(),t=e&&s.Sheet.findIfExists(e);if(e)return t?Q(t):s.Sheet.qfind(e);var n=Q.defer(),i=this;return this.listenToOnce(this,"change:sheetId change:deletedFromSheetId",function(){n.resolve(i.sheetPromise())}),n.promise},isSheetLoaded:function(){var e=this.effectiveSheetId();if(!e)return!1;var t=s.Sheet.findIfExists(e);return!!t},isTemporary:function(){return this.get("temporary")},makeRef:function(){return h.makeRef(this.id,this.effectiveSheetId(),this.name())},onJoinOrderChange:function(e){if(this.setting)return void this.afterAllSetting(function(){this.onJoinOrderChange(e)});var t=e.getJoinSubsheet(e);if(t){var n=this.get("children");if(n){var i=n[t.id];i&&i.sort()}}},sortChildren:function(){_.each(_.values(this.get("children")),function(e){e.sort()})},childCollectionForRecord:function(e,t,n){var i=this.sheet(),r=e.sheet();if(i&&r){var o=this.sheet().findSubsheet(e.sheet(),t);if(!o)return null;return this.childrenCollectionFor(o.id,n)}},addChild:function(e,t){var i={};t.isJoin()&&(i.shouldCreate=!1);var r=this.childCollectionForRecord(e,t,i);if(r)if(t.isLegacyLink)r.add(e);else{var o=n._getUnderscore(r).sortedIndex(e,r.comparator,r);if(null==o)throw new Error("Inserted child before index could be determined");r.add(e,{at:o})}},removeChild:function(e,t){var n={};t.isJoin()&&(n.shouldCreate=!1);var i=this.childCollectionForRecord(e,t,n);i&&i.remove(e)},wrapValues:function(e){var t={},n=this,i=this.sheet();return _.each(e,function(e,r){if(n.noValueKeys[r])t[r]=e;else{var o,s=i.fieldWithKey(r);o=s&&!_.isObject(e)?s.getValidator(e).canonicalValue():h.parseType(e),o.isRef()&&!o.isMultiRef()&&(o=h.makeMultiRef([o])),t[r]=o}}),t},noValueKeys:n._getUnderscore(["_id","sheetId","deletedFromSheetId","ordinal","children","__v","shortId","temporary","synthetic","timestamps","defaultTimestamps","syncState","syncError","apiMirrors","hasSynced","hasDirtyMirror","clientName"]).makeSet(),ignoredLastWriteWinsKeys:function(){return this.noValueKeys},useLastWriteWinsForKey:function(e){var t=this.fieldWithKey(e);return t?!t.isJoin():!0},isReadOnlyMode:function(){return this.sheet().isReadOnlyMode()},isMetadataLocked:function(){return this.sheet().isMetadataLocked()},childrenCollectionFor:function(e,t){t=_.defaults({},t,{shouldCreate:!0});var n=this.get("children");n||(n={},this.set("children",n,{silent:!0}));var o="children collection for record "+this.id+" subsheet "+e,s=n[e];if(t.shouldCreate||s){if(!s){f.console.log("no "+o+", creating one");var a,l=this,c=l.findChildrenFor(e);Q.isPromise(c)&&(a=c,c=[]);var u=this.sheet().subsheetWithId(e),d=u.get("sheet"),h=d.fieldWithKey(u.get("field").get("key"));if(s=new g.Collection(c,{url:function(){return"/sheets/"+d.id+"/records"}}),s.subsheetId=e,h.isJoin()){var p=function(e){var t=e.sideForField(h).opposite;s.comparator=function(n){return e.ordinalForRecord(l,n,t)},s.sort()},m=h.getJoin();m?p(m):a?a=a.then(function(e){return h.getJoinPromise().then(p).then(function(){return e})}):h.getJoinPromise().then(p).done()}a&&a.then(function(e){var t=e[0];t&&(t.sheet()?(s.add(e),s.sort()):t.sheetPromise().then(function(){s.add(e),s.sort()}))}).done(),n[e]=s}if(!(s instanceof g.Collection)){var v="undefined"==typeof s?"undefined":i(s),b=s instanceof r.Collection,y=_.isArray(s),w=(new Error).stack;f.console.error(o+" is not a Record Collection! (type: "+v+", collection? "+b+", array? "+y+"), stack: "+w)}return s}},childrenFor:function(e){return this.childrenCollectionFor(e)},findChildrenFor:function(e){var t=this.sheet().subsheetWithId(e),n=t.get("sheet"),i=t.get("field").get("key"),r=n.fieldWithKey(i),o=this;if(r.isJoin()){var s=r.getJoin();if(!s)return[];var a=s.sideForField(r).opposite;return s.recordsForRecordOnSide(o,a)}if(!n.get("records"))return[];var l=n.get("records").filter(function(e){var t=e.getValue(i);return t.isRef()?t.hasId(o.id):!1});return l},makePermanent:function(){var e=this;e.sheet().get("records").add(e);var t=_.extend(e.toJSON(),{temporary:null});return Q.promise(function(n,i){e.patch(t,{},{success:function(){e.trigger("made-permanent"),e.onNameChange(),n(e)},error:function(e){i(e)}})})},toJSON:function(){var e=a.prototype.toJSON.apply(this,arguments),t=this;return this.getFields().each(function(n){if(n.isJoin()){var i=n.getJoin();if(i){var r=n.get("key");e[r]=t.getValue(r)}}}),this.unwrapValues(e)},unwrapValues:function(e){var t={};return _.each(e,function(e,n){t[n]=h.isValueObject(e)?e.toJSON():e}),t},save:function(e,t,n){var i=this;return this.parseBackboneArguments(e,t,n,function(e,t){var n=i.unwrapValues(e);return n.clientName=i.getClientName(),n=_(n).mapObject(function(e,t){if(!e)return e;if(e.oldValue)return e;var n=i.fieldWithKey(t);if(!n)return e;if(!n.isJoin())return e;var r=i.getValue(t);return e.oldValue=r.toJSON(),e}),a.prototype.save.call(i,n,t)})},queueTarget:function(){return this},viewUrl:function(){return this.id?this.url():"/sheets/"+this.effectiveSheetId()+"/records/new?name="+encodeURIComponent(this.name())},shouldStoreImmediately:function(){return this.isTemporary()}});c.addStore(g),g.Collection=l.extend({urlDirectory:"/records",model:function(e,t){return g.add(e,t)},comparator:"ordinal",insertRecord:function(e){this.each(function(t){var n=t.get("ordinal");n>=e&&t.set("ordinal",n+1)});var t=g.add({ordinal:e,sheetId:this.parent.id});return this.add(t),t},move:function(e,t,n){return _.isEmpty(t)?void(n.complete&&n.complete()):this.action(g.Move,e,t).do(n)},bulkUpdate:function(e,t,n,i){return this.action(g.BulkUpdate,e,t,n).do(i)}}),g.Move=o.Action.extend({name:"recordMove",initialize:function(e,t,n){this.collection=e,this.record=t,this.update=t.unwrapValues(n);var i=this.replaceUndefinedWithNull(_.pick(t.toJSON(),_.keys(n)));this.original=t.unwrapValues(i)},move:function(e,t){var n=[],i=this.record.id,r={};_.each(e,function(e,t){r[t]=e,n.push("ordinal"===t?{op:"reorder",id:i,ordinal:e}:{op:"replace",id:i,path:"/"+t,value:e})}),null!=e.ordinal&&this.positionRecordLocally(e.ordinal),this.record.set(r);var o=this,s=t.success||_.noop;t.success=function(){s.apply(this,arguments),o.collection.trigger("sort",o.collection)},t=_.extend({merge:!0,add:!1,remove:!1,silent:!0,reset:!1},t),this.collection.patch(n,t)},positionRecordLocally:function(e){this.collection.remove(this.record,{silent:!0});{var t=this.record.get("ordinal"),n=0;this.collection.find(function(t,i){return n=i,t.get("ordinal")>=e})}e>t&&n++,this.collection.each(function(n){var i=n.get("ordinal");t>e?i>=e&&t>i&&n.set("ordinal",i+1,{silent:!0}):i>t&&e>=i&&n.set("ordinal",i-1,{silent:!0})}),this.record.set("ordinal",e,{silent:!0}),this.collection.add(this.record,{silent:!0,at:n}),this.collection.trigger("sort",this.collection)},makeChange:function(e,t){var n=this.record;return _.mapObject(e,function(e,i){var r=n.fieldWithKey(i);return r?r.isJoin()?(e=h.clone(e),e.oldValue=h.clone(t[i]),e.toJSON()):e:e})},perform:function(e){var t=this.makeChange(this.update,this.original);this.move(t,e)},revert:function(e){var t=this.makeChange(this.original,this.update);this.move(t,e)}}),g.BulkUpdate=o.Action.extend({name:"recordBulkUpdate",initialize:function(e,t,n,i){this.collection=e,this.field=t,this.from=n,this.to=i},bulkUpdate:function(e,t,n){n=_.defaults(n||{},{reset:!1});var i=this.field.get("key"),r=[{op:"bulkUpdate",key:i,from:e,to:t}];this.collection.patch(r,n)},perform:function(){this.bulkUpdate(this.from,this.to)},revert:function(){this.bulkUpdate(this.to,this.from)}}),t.exports=g;var v=function(e){this.record=e,this.derivedValues={},this.readyPromise=this.listenToSheet(),this.readyPromise.done(),this.lastDerivedValues={}};_.extend(v.prototype,r.Events,{triggerChange:function(e){var t=e.id,n=this.derivedValues[t],i=n?n.getValue():this.record.getValue(t);this.record.changed[t]=i,this.record.trigger("change:"+t,this.record),this.record.trigger("change",this.record)},derivedValueFor:function(e){var t=this.derivedValues[e.id];return t||this.addDerivedValue(e)},addDerivedValue:function(e){var t,n=this;return e.isJoin()?(t=new d({record:this.record,field:e}),this.listenTo(t,"joins-reset field-change",function(){n.updateDerivedValue(e)})):(e.ensureExpressionValidated(),t=new u({record:this.record,expression:e.get("expression"),useSourceRecords:e.isReportFormula()})),this.listenTo(t,"change",function(){this.triggerChange(e)}),this.derivedValues[e.id]=t,this.lastDerivedValues[e.id]&&(this.lastDerivedValues[e.id].getValue().isEqual(t.getValue())||this.triggerChange(e)),t},removeDerivedValue:function(e){var t=this.derivedValues[e];t&&(this.stopListening(t),t.stopListening(),delete this.derivedValues[e])},remove:function(){this.clearDerivedValues(),this.stopListening()},clearDerivedValues:function(){var e=this;_.each(this.derivedValues,function(t){e.stopListening(t),t.stopListening()}),this.lastDerivedValues=this.derivedValues,this.derivedValues={}},updateDerivedValue:function(e){this.removeDerivedValue(e.id),e.hasDerivedValue()&&this.addDerivedValue(e)},updateDerivedValues:function(){var e=this.record.sheet();if(e&&e.get("fields")){this.clearDerivedValues();var t=this;e.get("fields").each(function(e){e.hasDerivedValue()&&t.addDerivedValue(e)})}},listenToSheet:function(){var e=this;return this.record.initialLoadPromise().then(function(){var t=e.record.sheet();e.listenTo(t,"fields:change:expression",e.onDerivedValueFieldChange),e.listenTo(t,"fields:add",e.onFieldAdded),e.listenTo(t,"fields:remove",e.onFieldRemoved),e.listenTo(t,"fields:reset",e.onFieldsReset)})},onDerivedValueFieldChange:function(e){this.updateDerivedValue(e),this.triggerChange(e)},onFieldAdded:function(e){e.hasDerivedValue()&&this.onDerivedValueFieldChange(e)},onFieldRemoved:function(e){this.removeDerivedValue(e.id)},onFieldsReset:function(){this.updateDerivedValues()}}),h.types.RefValue.prototype.linkedRecord=function(){if(this.id){var e=g.find(this.id);return this.sheetId&&!e.effectiveSheetId()&&e.set("sheetId",this.sheetId),this.name&&!e.hasName()&&this.name!==e.placeHolderName()&&e.setName(this.name),e}if(this.sheetId){var t=s.Sheet.find(this.sheetId);return t?t.findOrCreateMissingRecord(this.name):null}},h.types.MultiRefValue.prototype.linkedRecord=function(){if(this.values.length>0){var e=_.find(this.values,function(e){return e.isRef()});return e?e.linkedRecord():null}return null},h.types.RefValue.prototype[n.noBrowserValueOverrides?"displayValueBrowser":"displayValue"]=function(){var e=this.linkedRecord();return e?e.name()||this.name:this.name},h.types.RefValue.prototype.canBeResolved=function(){var e=this.linkedRecord();return e?"single"===e.sheet().get("nameFieldMode"):!1}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/strings":249,"../../common/values":253,"../../common/values/valueTimestamp":257,"../actions":2,"../trackJs":78,"./collection":34,"./derivedSymrefValue":38,"./expressions/derivedValue":41,"./index":47,"./model":49,"./sheet":63,"./store":64,backbone:"backbone",inflection:672}],62:[function(e,t){"use strict";var n=t.exports=function(){this.initialize.apply(this,arguments)};_.extend(n.prototype,{initialize:function(e,t,n){this.records=e||[],this.fields=t||[],this.allRecords=n||[]},getValues:function(){var e=this;return _(this.records).map(function(t){return _(e.fields).map(function(e){return t.getValue(e.get("key"))})})},isMultiselect:function(){var e=this.records.length,t=this.fields.length;return e*t>1}})},{}],63:[function(e,t){(function(n){"use strict";var i=e("../actions"),r=e("./index"),o=e("./model"),s=e("./collection"),a=e("./store"),l=e("../../common/strings"),c=e("../parser"),u=e("../../common/values"),d=e("inflection"),h=e("../errors"),f=e("../globalEvents"),p=o.extend({hasTimestamps:!0,urlRoot:function(){return this.isNew()&&this.collection&&this.collection.url?null:"/sheets"},hasMany:{fields:function(){return new r.Field.Collection([])},deletedFields:function(){return new r.Field.Collection([])},records:function(){return new r.Record.Collection([])},navItems:function(){return new r.NavItem.Collection([])},subsheets:function(){return new r.Subsheet.Collection([])}},initialize:function(){this.on("records:sync",_.bind(this.onRecordSync,this)),this.initializeNameCache(),this.listenTo(this,"records:change",this.updateRecordName),this.listenTo(this,"records:remove",this.removeRecordName),n.isLoading?this.listenToOnce(f,"initialLoad",this.onInitialLoad):this.onInitialLoad(),this.missingRecords={}},onInitialLoad:function(){this.initializeNameCache(),this.listenTo(this,"records:add",this.addRecordName),this.listenTo(this,"records:reset change:nameKey",this.initializeNameCache)},initializeNameCache:function(){if(this.nameCache={},this.nameField()){var e=this.get("records");if(e){var t=this;e.each(function(e){t.addRecordName(e)})}}},addRecordName:function(e){var t=this.nameField();if(t){var n=e.getLowercaseName();if(""!==n){var i=this.recordsForName(n);-1===i.indexOf(e)&&(i.push(e),i.length>1&&(2===i.length&&i[0].trigger("duplicateNameChange",i[0]),e.trigger("duplicateNameChange",e)))}}},removeRecordName:function(e){var t=this.nameField();if(t){var n=e.getLowercaseName();this.removeName(e,n)}},removeName:function(e,t){if(""!==t&&null!=t&&t in this.nameCache){var n=this.recordsForName(t),i=this.nameCache[t]=_.without(n,e);n.length>1&&(1===i.length&&i[0].trigger("duplicateNameChange",i[0]),e.trigger("duplicateNameChange",e))}},updateRecordName:function(e){var t=this.get("nameKey");if(t){var n=e.previousAttributes()[t],i=e.getValue(t),r=n,o=i;r&&(r=n.displayValue().toLowerCase()),o&&(o=o.displayValue().toLowerCase()),r!==o&&(this.removeName(e,r),this.addRecordName(e))}},placeHolderName:function(){return this.get("title")?d.singularize(this.displayTitle()):l["default-record-name"]()},defaultNameFieldName:function(){var e,t=this.get("nameFieldMode"),n=this.get("title"),i=n?n.inflect("singularize"):null;return"single"===t?e=n?[i,l["name-field-name"]()].join(" "):l["name-field-name"]().inflect("capitalize"):"multi"===t&&(e=_.chain(this.nameFormulaKeys()).map(this.fieldWithKey.bind(this)).compactNullish().invoke("displayName").join(this.nameFormulaSeparator()).value()),e||(e=n?[i,l.id()].join(" "):l.id()),e},hasDuplicateName:function(e){var t=this.recordsForName(e.toLowerCase());return t.length>1},findOrCreateMissingRecord:function(e){var t=this.missingRecords[e];return t?t:(t=this.missingRecords[e]=r.Record.add({sheetId:this.id,temporary:!0}),this.isNameFieldReadOnly()||_.soak(this,"nameField().hasAnyFormula()")||t.setName(e),t.clientName=e,t.collection=this.get("records"),t.resolveAllValues(),t)},removeMissingRecord:function(e){var t=e.getClientName(),n=this.missingRecords[t];if(n&&e.id){if(n!==e){var i={};n.getFields().each(function(e){e.isJoin()&&(i[e.get("key")]=u.makeMultiRef([]))}),n.set(i)}delete this.missingRecords[t]}},removeMissingRecordNamed:function(e){delete this.missingRecords[e]},recordsForName:function(e){return e in this.nameCache?this.nameCache[e]:this.nameCache[e]=[]},getFields:function(){return this.get("fields")},getFieldsByHidden:function(e){var t=e?"filter":"reject";return this.getFields()[t](function(e){return e.isHidden()})},getHiddenFields:function(){return this.getFieldsByHidden(!0)},getUnhiddenFields:function(){return this.getFieldsByHidden(!1)},hiddenFieldsContext:function(){return n._getUnderscore(this.getHiddenFields()).invoke("toContext")},hasComplexName:function(){return"single"!==this.get("nameFieldMode")},isNameFieldReadOnly:function(){return this.hasComplexName()},isLoaded:function(){return this.has("title")&&this.has("fields")&&this.has("records")&&this.has("navItems")&&this.has("subsheets")},needsFetch:function(){return o.prototype.needsFetch.call(this)?!0:this.get("records").any(function(e){return e.dirty})},markFetched:function(){o.prototype.markFetched.call(this),this.get("records")&&this.get("records").markFetched()},book:function(){return this.collection&&this.collection.parent},bookPromise:function(){var e=this.book();if(e)return Q(e);var t=Q.defer(),n=this;return this.listenToOnce(this,"add",function(){t.resolve(n.bookPromise())}),t.promise},toContext:function(){var e=o.prototype.toContext.apply(this,arguments);return e},waitForRecords:function(){if(!this.get("records"))return Q();var e=this.get("records").invoke("initialLoadPromise");return Q.all(e)},fieldWithKey:function(e){var t=this.get("fields");return t?t.get(e):void 0},deletedFieldWithKey:function(e){var t=this.get("deletedFields");return t?t.get(e):void 0},fieldWithSlug:function(e){return _.soak(this.get("fields"),"find",function(t){return t.slug()===e})},nameField:function(){var e=this.get("nameKey");return e?this.fieldWithKey(e):null},deleteNameField:function(e){this.nameField().destroy(e)},restoreNameField:function(e){var t=this.get("nameKey");if(null!=t){var n=this.deletedFieldWithKey(t),i=this.getFields();i.unshift(n),i.restore(n,e)}},nameFieldKeys:function(){var e,t=this.get("nameFieldMode");return e="single"===t?[this.nameKey]:"multi"===t?this.nameFormulaKeys():[],_(e).intersection(this.getFields().pluck("key"))},nameFormulaArgs:function(){var e=this.nameField();if(e){var t=e.get("expression");
if(!t)return null;if("concat"!==t.name)return null;var n=t.arguments.every(function(e,t){return 0===t?null!=e.val&&-1!==['"',"'"].indexOf(e.op):null!=e.key});return n?t.arguments.map(function(e){return e.key||e.val}):null}},nameFormulaKeys:function(){var e=this.nameFormulaArgs();return e?this.nameFormulaArgs().slice(1):null},nameFormulaSeparator:function(){var e=this.nameFormulaArgs();return e&&null!=e[0]?e[0]:l["default-name-separator"]()},navItemWithKey:function(e){var t=this.get("navItems");return t?t.find(function(t){return t.get("key")===e}):void 0},queryForNavKey:function(e){var t;return e&&(t=this.navItemWithKey(e)),t?this.queryForNavItem(t):null},queryForNavItem:function(e){return this.query(null,e.get("query").powerBarTerms)},recordNames:function(){var e=this.get("records");return e&&e.chain().invoke("getValueOrPlaceholder",this.get("nameKey")).invoke("displayValue").value()},findRecordByName:function(e){e=e.trim();var t=this.get("records");return t&&t.find(function(t){return t.name().trim()===e})},hasSubsheet:function(e,t){return!!this.findSubsheet(e,t)},findSubsheet:function(e,t){return this.get("subsheets").find(function(n){return n.get("sheet").id===e.id&&n.get("field").id===t.id})},subsheetWithId:function(e){return this.get("subsheets").findWhere({_id:e})},potentialSubsheets:function(){var e=this,t=this.book();if(!t)return[];var n=t.get("sheets").map(function(t){return t.get("fields").filter(function(t){return t.isLinkToSheet(e)})});n=_.flatten(n);var i=_.reject(n,function(t){return e.hasSubsheet(t.sheet(),t)});return _.map(i,function(e){return{sheet:e.sheet().toContext(),field:e.toContext()}})},canDeleteGroup:function(e,t){return!this.get("records").any(function(n){return _.all(e,function(e,i){var r=t[i];return n.getValue(e).isEqual(r)})})},getIntegration:function(){if(this.isSynthetic())return null;var e=this.book();if(!e)return null;var t=this;return e.get("integrations").find(function(e){return e.ownsSheet(t)})},hasIntegration:function(){return null!=this.getIntegration()},integrationType:function(){return n._getUnderscore(this).soak("getIntegration().get","type")},integrationName:function(){return n._getUnderscore(this).soak("getIntegration().name()")},nameFromIntegration:function(){return n._getUnderscore(this).soak("getIntegration().nameForSheet",this)},isIntegrationSheet:function(e,t){return this.integrationType()===e&&this.nameFromIntegration()===t},integrationClassName:function(){return this.hasIntegration()?"integration-{{integrationType}}-{{sheetName}}".stencil({integrationType:this.integrationType(),sheetName:this.nameFromIntegration()}):void 0},isReadOnlyMode:function(){return _.soak(this,"book().isReadOnlyMode()")},isMetadataLocked:function(){return _.soak(this,"book().isMetadataLocked()")},ignoredLastWriteWinsKeys:n._getUnderscore(["creator","titleNumber","nameKey","fields","deletedFields","navItems","deletedNavItems","nextOrdinal","nextShortId","nameFieldMode","wrapText","subsheets","deletedSubsheets","removedSubsheets","wasAtIndex","removedLinks","nextNameNumber","processing","jobId"]).makeSet(),set:function(e,t,n){return this.parseBackboneArguments(e,t,n,function(e,t){this.preprocessAttributeTimestamps(e);var n=o.prototype.set.call(this,e,t);return n})},setNameKey:function(e,t){this.saveIfNeeded("nameKey",e,t)},addSubsheet:function(e,t){var n=this,i=t.success;t.success=function(e){var t=n.book(),r=e.get("sheet");t&&t.has("sheets")&&t.get("sheets").add(r),r.get("records")||r.set("records",[]),i&&i.apply(null,arguments)},this.get("subsheets").create(e,t)},query:function(e,t){try{return new r.powerbar.Query(e,t,this)}catch(n){return console.warn(n),null}},autoQuery:function(e){var t,n,i,r,o=c.autoSplit(e);for(t=o.length;t>0;t--){n=o.slice(0,t).join(" "),i=this.query(n);var s=_.soak(i,"commands.0.error");if(r=r||s,i&&1===i.commands.length){var a=i.commands[0].isValid||s.displayable;if(a=a||!_(["bareword",":",null,void 0]).contains(_.soak(i.commands[0],"original.expressions.0.op")))return{query:i,remainder:o.slice(t).join(" ")}}}return{remainder:e,error:r}},resultSheet:function(){return r.powerbar.results.ResultSheet.fromSheet(this)},newNavItem:function(e){if(e){var t=e.nameify(),n=e.boundTerms();return{name:t,type:"query",query:{powerBarTerms:n}}}},makeNewFormData:function(){var e={};return e.fields=this.getFields().chain().filter(_.soaker("validForForm()")).map(function(e){return{key:e.get("key"),size:"short"}}).value(),e},addFormNavItem:function(e){var t={name:"New "+this.placeHolderName(),description:l["form-default-description"](),type:"form",form:this.makeNewFormData()};return this.get("navItems").create(t,e)},updateNavItem:function(e,t,n){var i=this.navItemWithKey(t),r=e.boundTerms();i.saveIfNeeded("query",{powerBarTerms:r},n)},contextKeys:["url","displayTitle","placeholderTitle","integrationName","hasIntegration","hiddenFieldsContext","integrationClassName","isReadOnlyMode","isMetadataLocked"],onRecordSync:function(e){e instanceof r.Record&&(this.get("fields").each(function(t){t.updateEnumIfNeeded(e.getValue(t.id))}),this.updateRecordName(e))},goodGroupField:function(){var e=1/0,t=null,n=this.get("records");return this.getFields().each(function(i){var r=n.chain().invoke("getValue",i.get("key")).invoke("displayValue").uniq().value().length;r>1&&e>r&&(t=i,e=r)},this),t},uniqueDisplayValuesForField:function(e){var t=this.get("records"),i=e.get("key"),r=e.enumValues(),o=n._getUnderscore(r).makeSet();return n._getUnderscore(t).each(function(e){var t=e.getDisplayValue(i);o[t]||(o[t]=!0,r.push(t))}),r},displayTitle:function(){var e=this.get("title");return e?e:this.placeholderTitle()},placeholderTitle:function(){return l["new-sheet-title"]()+this.get("titleNumber")},titleSlug:function(){return l.slug(this.displayTitle())},sheet:function(){return this},updateMissingLinks:function(e,t,n,i){if(t){var r=p.find(n),o=this.get("fields").chain().filter(function(e){return!e.isJoin()&&e.isLinkToSheet(r)}).value();if(0!==o.length){o=_.pluck(o,"id");{this.get("records").forEach(function(r){o.forEach(function(o){var s=r.get(o);if(s&&s.isRef()){var a=s.valueReplacingName(e,t,n);if(!s.isEqual(a)){var l=s.valueReplacingName(s.displayValue(),null,n,{lockedMissing:!0}),c={};c[o]=l,i=_.extend({previousAttributes:c,noSymrefUpdate:!0},i),r.saveIfNeeded(o,a,i)}}})})}}}}}),m=p.extendActions({Delete:i.Delete.extend({errorWrapper:function(e,t){var n=e.error||_.noop;e.error=function(e,r){var o=this;if(409===r.status){var s,a;switch("perform"===t?(s="conflict-template",a=l["action-delete-sheet"](e.toContext()),i.history.undo()):(s="error-action-while-linking",a="revert"===t?"undo":"redo"),t){case"revert":i.history.revertUndo();break;case"reperform":i.history.revertRedo()}return void _.defer(function(){throw new h.DisplayableError(s,{action:a})})}return n.apply(o,arguments)}},perform:function(e){this.errorWrapper(e,"perform"),i.Delete.prototype.perform.call(this,e)},revert:function(e){this.errorWrapper(e,"revert"),i.Delete.prototype.revert.call(this,e)},reperform:function(e){this.errorWrapper(e,"reperform"),i.Delete.prototype.reperform.call(this,e)}})});a.addStore(p),p.Collection=s.extend({urlDirectory:"/sheets",model:function(e,t){return p.add(e,t)},actions:m}),p.displayedSheet=function(){var e=$(".sheet-detail");return _.chain(e).soak("data","view").soak("viewModel.sheet").value()},t.exports=p}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/strings":249,"../../common/values":253,"../actions":2,"../errors":9,"../globalEvents":22,"../parser":74,"./collection":34,"./index":47,"./model":49,"./store":64,inflection:672}],64:[function(e,t){"use strict";function n(e){if(_.isArray(e))throw console.log("id value is an array! "+e),new Error("id value is an array!");if(_.isObject(e))throw console.log("id value is an object! "+e),new Error("id value is an object!")}function i(e){if(n(e),!e)throw console.log("falsy id value where existing id expected: "+e),new Error("falsy id value where existing id expected")}var r=function(e){this.model=e,this.idAttribute=e.prototype.idAttribute,this.firstSetAttributes=e.prototype.firstSetAttributes,this.objects={},this.objectsByCid={},this.deferredObjects={}};r.deferredModelsCount=0,_.extend(r.prototype,{register:function(e){if(n(e.id),e.id){if(e.id in this.objects)throw console.log("Object registered twice:",e),new Error("Object registered twice for {{id}}".stencil({id:e.id}));this.objects[e.id]=e,this.objectsByCid[e.cid]=e;var t=this.deferredObjects[e.id];t&&(t.resolve(e),delete this.deferredObjects[e.id],r.deferredModelsCount--)}else{var i="change:"+this.idAttribute;e.once(i,_.bind(this.register,this))}},add:function(e,t){e=e||{};var i,r=e[this.idAttribute];n(r),r&&(i=this.objects[r]);var o=!i;return o&&(i=new this.model(_.pick.apply(_,[e,this.idAttribute].concat(this.firstSetAttributes||[])),t),this.register(i)),t&&t.collection&&!i.collection&&(i.collection=t.collection),e=i.parse(e,t),i.set(e,t),!i.collection&&t&&(i.collection=t.collection),o&&i.postInitialize&&i.postInitialize(),i.shouldStoreImmediately()&&(this.objectsByCid[i.cid]=i),i},makePromiseForId:function(e){var t=Q.defer();return this.deferredObjects[e]=t,t.promise},find:function(e){i(e);var t=this.objects[e];if(t)return t;var n={};return n[this.idAttribute]=e,this.add(n)},qfind:function(e){i(e);var t=this.objects[e];return t?Q(t):this.deferredObjects[e]?this.deferredObjects[e].promise:(r.deferredModelsCount++,this.makePromiseForId(e))},findIfExists:function(e){return this.exists(e)?this.find(e):null},findByCid:function(e){return this.objectsByCid[e]},exists:function(e){return n(e),e?e in this.objects:!1}}),r.addStore=function(e){_.extend(e,{store:new r(e),find:function(e){return this.store.find(e)},qfind:function(e){return this.store.qfind(e)},findIfExists:function(e){return this.store.findIfExists(e)},findByCid:function(e){return this.store.findByCid(e)},add:function(e,t){return this.store.add(e,t)},exists:function(e){return this.store.exists(e)}})},t.exports=r},{}],65:[function(e,t){"use strict";var n=(e("../actions"),e("./index")),i=e("./model"),r=e("./collection"),o=i.extend({hasOne:{sheet:function(e){return n.Sheet.add(e)},field:function(e){return new n.Field(e)}},isLoaded:function(){var e=this.has("field")&&this.has("sheet");if(!e)return!1;var t=this.get("sheet");return t.has("title")&&t.has("fields")},toContext:function(){var e=_.clone(this.attributes);return e.sheet&&(e.sheet=e.sheet.pick("_id","title")),e.field&&(e.field=e.field.pick("key","name")),e},toJSON:function(){return this.toContext()},isEqual:function(e){return this.get("sheet")!==e.get("sheet")?!1:this.get("field").get("key")!==e.get("field").get("key")?!1:!0}});o.Collection=r.extend({model:o,urlDirectory:"/subsheets"}),t.exports=o},{"../actions":2,"./collection":34,"./index":47,"./model":49}],66:[function(e,t){(function(n){"use strict";var i=e("./model"),r=(e("./index"),e("./collection")),o=e("./symrefSide"),s=e("../../common/values"),a=i.extend({initialize:function(){this.listenForChanges()},listenForChanges:function(){this.stopListening();var e=this;["left","right"].forEach(function(t){var n=e.get(t);n&&e.listenTo(n,"change:ordinal",function(){e.trigger("orderChange",e,t)})})},attachSelfToChildren:function(){var e=this;n._getUnderscore(["left","right"]).each(function(t){e.get(t).parent=e})},set:function(){var e=this.pick("left","right"),t=i.prototype.set.apply(this,arguments),n=_.soak(this,"collection.parent");return(n&&this.get("left")!==e.left||this.get("right")!==e.right)&&(n.onRemoveSymref(this),n.onAddSymref(this)),this.attachSelfToChildren(),this.listenForChanges(),t},parse:function(e){var t=Fieldbook.models.Join.findIfExists(e.joinId);if(!t)throw new Error("No join found for id: "+e.joinId);var i=_({left:null,right:null}).mapObject(function(e,n){return t.get(n).sheetId});return n._getUnderscore(["left","right"]).each(function(t){var n=e[t],r=s.makeRef(n._id,i[t],n.name);e[t]=o.createFromRef(r,n.ordinal)}),e},updateSides:function(e){var t=this;n._getUnderscore(["left","right"]).each(function(n){t.get(n).set(e[n])})}});a.Collection=r.extend({model:a}),t.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/values":253,"./collection":34,"./index":47,"./model":49,"./symrefSide":67}],67:[function(e,t){"use strict";var n=e("./model"),i=(e("./"),n.extend({indexKey:function(){var e=this.get("record");return i.indexKeyForRecord(e)},matchesRef:function(e){var t=this.get("record");return t===e.linkedRecord()},equals:function(e){return e.indexKey()===this.indexKey()}}));i.createFromRef=function(e,t){return this.createFromRecord(e.linkedRecord(),t)},i.createFromRecord=function(e,t){return new i({record:e,ordinal:t})},i.indexKeyForRecord=function(e){return"record-"+e.cid},i.indexKeyForRef=function(e){var t=e.linkedRecord();return this.indexKeyForRecord(t)},t.exports=i},{"./":47,"./model":49}],68:[function(e,t){"use strict";var n=e("./model"),i=e("./collection"),r=e("./store"),o=n.extend({idAttribute:"slug",urlRoot:"/templates",videoLink:function(){return this.get("videoLink")}});r.addStore(o),o.Collection=i.extend({model:function(e,t){return o.add(e,t)},url:"/templates"}),o.collection=new o.Collection,t.exports=o},{"./collection":34,"./model":49,"./store":64}],69:[function(e,t){"use strict";var n=e("./model"),i=e("./store"),r=e("./collection"),o=t.exports=n.extend({initialize:function(){this.get("widgets")||this.set("widgets",[])},hasMany:{widgets:function(){return new o.Widget.Collection([])}}});i.addStore(o),o.Widget=n.extend({}),o.Widget.Collection=r.extend({model:function(e,t){return o.Widget.add(e,t)}}),i.addStore(o.Widget)},{"./collection":34,"./model":49,"./store":64}],70:[function(e,t){(function(e){"use strict";function n(e,t){return(e%t+t)%t}t.exports=BaseObject.extend({constructorName:"TiledArray",propertyNames:["array","translateRow","translateColumn"],initialize:function(){this.rows=this.array.length,this.rows&&(this.columns=e._getUnderscore(e._getUnderscore(this.array).pluck("length")).max()),this.translateColumn=this.translateColumn||0,this.translateRow=this.translateRow||0},get:function(e,t){return this.columns?(e-=this.translateRow,t-=this.translateColumn,e=n(e,this.rows),t=n(t,this.columns),this.array[e][t]):void 0}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],71:[function(e,t){"use strict";var n=e("./model"),i=e("./collection"),r=e("./store"),o=e("./organization"),s=n.extend({urlRoot:"/users",hasOne:{organization:function(e){return o.add(e)}},ignoredLastWriteWinsKeys:function(){return["apiCount"]},noContextKeys:["organization"],hasActiveOrganization:function(){return this.get("organization")&&!this.get("organizationIsLapsed")},fetchOrganization:function(e){if(e=_.defaults({},e,{success:_.noop}),!e.error)throw new Error("No error handler for fetchOrganization");var t=this.get("organization");t&&t.id?t.fetch(e):e.success()},hasEmail:function(e){return _.contains(this.get("emails"),e)},queueTarget:function(){return this},emailDomain:function(){var e=this.get("email");return e=e||"",e.replace(/^.*@/,"")},isPrimaryEmailConfirmed:function(){return this.hasEmail(this.get("email"))},accountNotifications:function(){var e=[];return this.isPrimaryEmailConfirmed()||e.push({key:"need-verify"}),e},contextKeys:["emailDomain","accountNotifications"]});r.addStore(s),s.Collection=i.extend({model:function(e,t){return s.add(e,t)}}),t.exports=s},{"./collection":34,"./model":49,"./organization":51,"./store":64}],72:[function(e){(function(t){"use strict";var n=e("../../common/values"),i=e("./account"),r=function(e){var t=e||{};return _.soak(e,"localeOptions")||(t.localeOptions=i.account&&i.account.localeOptions()),t},o=function(e,t){return e.call(this,r(t))};_.each(n.types.registry,function(e){var n=e.prototype;t._getUnderscore(["displayValue","editableText"]).each(function(e){n[e]&&(n[e]=n[e].wrap(o))})});var s=function(e,t,n){return e.call(this,t,r(n))};n.create=n.create.wrap(s),n.getType=n.getType.wrap(s),n.parseType=n.types.parseType=n.types.parseType.wrap(function(e,t,n){return _.isString(t)&&(n=r(n)),e.call(this,t,n)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/values":253,"./account":27}],73:[function(e,t){"use strict";var n=function(e,t,n){n=_.clone(n);var i=function(e){this.context=e};_(n).each(function(e,t){i.prototype[t]=function(){return e.apply(this.context,arguments)}}),Object.defineProperty(e.prototype,t,{get:function(){var e=this;return e.namespaces||(e.namespaces={}),e.namespaces[t]||(e.namespaces[t]=new i(e)),e.namespaces[t]}})};t.exports=n},{}],74:[function(e,t,n){"use strict";var i=e("./gen/expressionParser"),r=e("./gen/commandParser"),o=e("./gen/pipetteParser"),s=e("./gen/spacesParser"),a=n.cursorToken="‸";n.parsePowerBar=function(e){var t=o.parse(e);return _.chain(t).map(function(e){e=e.trim();var t;try{return t=r.parse(e),null!=t?_.extend(t,{text:e}):t}catch(n){return{cmd:"invalid",text:e.replace(a,""),error:n}}}).compactNullish().value()},n.parsePartialFormula=function(e){var t=i.parse(e);return t.cursor&&0===t.length?{cursor:!0}:t[0]},n.parseFormula=function(e){return i.parse("%%FORMULA%%"+e)},n.autoSplit=function(e){return s.parse(e)},n.pipeSplit=function(e){return o.parse(e)},n.commandParser=r},{"./gen/commandParser":15,"./gen/expressionParser":16,"./gen/pipetteParser":18,"./gen/spacesParser":19}],75:[function(e,t){"use strict";e("./dev");var n=e("backbone"),i=e("./env"),r=(e("./globalEvents"),e("./models/account")),o=t.exports=function(){this.initialize.apply(this,arguments)};_.extend(o.prototype,n.Events,{initialize:function(){if(this.enablePerformanceMetrics=i.enablePerformanceMetrics,this.enablePerformanceMetrics){this.resetTiming(),this.seenMarks={},this.holds=0;var e=this.now();window.performance&&(e=window.performance.timing.navigationStart),this.pageStart=e}},holdReporting:function(){this.holds+=1},resumeReporting:function(){this.holds-=1,0===this.holds&&this.trigger("noPerformanceHolds")},shouldReport:function(){return 0===this.holds},getFullName:function(e,t){for(var n=0,i=e.replace(/\[|\]/g,"");i in t;)n+=1,i=e+"-"+n;return i},addDuration:function(e,t){if(this.enablePerformanceMetrics){var n=this.getFullName(e,this.currentPerformanceContext);this.currentPerformanceContext[n]={timing:t}}},addTiming:function(e,t,n,i){if(!this.enablePerformanceMetrics)return t.apply(n,i);this.holdReporting();var r;try{var o=this.getFullName(e,this.currentPerformanceContext),s=this.currentPerformanceContext;this.currentPerformanceContext[o]={},this.currentPerformanceContext=this.currentPerformanceContext[o];var a=this.now();r=t.apply(n,i||[]);var l=this.now();this.currentPerformanceContext.timing=l-a,this.currentPerformanceContext=s}finally{this.resumeReporting()}return r},markSincePageLoad:function(e){if(this.enablePerformanceMetrics){var t=this.getFullName(e,this.timing.marks);t in this.seenMarks||(this.timing.marks[t]={timing:this.now()-this.pageStart},this.seenMarks[t]=1)}},resetTiming:function(e){this.timing||(this.timing={marks:{},contexts:{}}),this.timing.contexts={},this.currentPerformanceContext=this.timing.contexts,e&&e.marks&&this.resetMarks()},resetMarks:function(){this.timing.marks={}},now:function(){return(new Date).getTime()},remoteReportTheshold:function(){return i.remotePerformanceReportThreshold||100},isTimingEmpty:function(){return _.isEqual(this.timing,{marks:{},contexts:{}})},sendTiming:function(){if(this.enablePerformanceMetrics&&!(this.isTimingEmpty()||this.holds>0)){if(this.totalTiming()<this.remoteReportTheshold())return void this.resetTiming({marks:!0});var e={url:window.location.href,pageStart:this.pageStart,timing:this.timing,now:this.now(),user:r.account.id};n.ajax({url:"/performance",data:JSON.stringify(e),type:"POST",suppressPerformanceMonitoring:!0,suppressRequestTracking:!0,contentType:"application/json"},!0),this.resetTiming({marks:!0})}},contextSignature:function(){return _.chain(this.timing.contexts).keys().sortBy(function(e){return this.timing.contexts[e].timing||0}.bind(this)).last().value()},timingTraceString:function(){var e="";if(_.isEmpty(this.timing.marks)||(e+="Initial Page Navigation Start to Mark:\n",_.each(this.timing.marks,function(t,n){e+="  "+n+" -> "+t.timing+"\n"}),e+="\n"),!_.isEmpty(this.timing.contexts)){var t=""!==e;t&&(e+="Timings:\n"),e+=this.contextStr(this.timing.contexts,t?"  ":"")}return e},contextStr:function(e,t){var n="";return _.each(e,function(e,i){"timing"!==i&&(n+=t+i+" -> "+e.timing,_.isEmpty(_.omit(e,"timing"))?n+="\n":(n+=":\n",n+=this.contextStr(e,t+"  ")))}.bind(this)),n},totalTiming:function(){return _.reduce(this.timing.contexts,function(e,t){return null==t.timing?e:e+t.timing},0)}});var s;o.getInstance=function(){return s?s:s=new o},o.addTiming=function(){var e=o.getInstance();return e.addTiming.apply(e,arguments)},o.createTimedFunction=function(e,t){if(t.timed)return t;var n=function(){return o.getInstance().addTiming(e,t,this,arguments)};return n.timed=!0,n},dev.add("logPerformance",function(){console.log(o.getInstance().contextStr())}),dev.add("performance",o.getInstance)},{"./dev":7,"./env":8,"./globalEvents":22,"./models/account":27,backbone:"backbone"}],76:[function(e,t,n){"use strict";var i=e("url"),r=e("backbone"),o=e("./views"),s=(e("./keys"),e("./errors")),a=n.flash={params:{},addParams:function(e){_.extend(this.params,e)},perform:function(e){_.isEmpty(this.params)||(e&&"function"==typeof e.onFlash&&e.onFlash(this.params),this.params={})}},l=n.Router=r.Router.extend({routes:{"":"bookList","home(/)":"bookList","tutorials(/)":"tutorials","templates(/)":"templateList","templates/:slug":"template","imports(/)":"importList","imports/:slug":"import","organization(/)":"organization","plan(/)":"plan","books(/)":"bookList","books/:id":"book","sheets/:id(/:navKey)":"sheet","records/:id":"record","sheets/:id/records/new(?:query)":"newRecord",login:"rawNavigation",logout:"rawNavigation",signup:"rawNavigation"},rawNavigation:function(){window.location=window.location},home:function(){mixpanel.track("view_home"),this.root.showHome()},organization:function(){this.root.showOrganization()},plan:function(){this.root.showPlan()},tutorials:function(){mixpanel.track("view_tutorials"),this.root.showTutorials()},templateList:function(){mixpanel.track("view_template_list"),this.root.showTemplateList()},template:function(e){mixpanel.track("view_template",{slug:e}),this.root.showTemplate(e)},importList:function(){mixpanel.track("view_import_list"),this.root.showImportList()},"import":function(e){mixpanel.track("view_import",{slug:e}),this.root.showImport(e)},bookList:function(){mixpanel.track("view_book_list"),this.root.showBookList()},book:function(e){mixpanel.track("view_book",{id:e}),this.root.showBook(e)},sheet:function(e,t){mixpanel.track("view_sheet",{id:e,navKey:t}),this.root.showSheet(e,t)},record:function(e){mixpanel.track("view_record",{id:e}),this.root.showRecord(e)},newRecord:function(e){var t=h("name")||"";this.root.newRecord(e,t)},eventbritePlugin:function(){this.root.showEventbritePlugin()},flash:function(e){return a.addParams(e),this},navigate:function(){try{r.Router.prototype.navigate.apply(this,arguments)}catch(e){if(e instanceof s.NeedsLogin)return void(window.location="/login?redirect="+window.location.pathname);throw e}return a.perform(this.root),$.deselectAllText(),window.Intercom("update"),this},goToBook:function(e,t){var n="books/"+e;t&&(n+="?"+t),this.navigate(n,{trigger:!0})},goToSheet:function(e,t){var n="sheets/"+e;t&&(n+="/"+t),this.navigate(n,{trigger:!0})},goToRecord:function(e,t){var n="records/"+e;t&&(n+=t),this.navigate(n,{trigger:!0})},goToBookList:function(){this.navigate("books",{trigger:!0})}}),c=n.router=new l,u=n.observer=_.extend(r.Events,{currentRoute:{},onRoute:function(e,t){var n=["router:",e];t&&t.length>0&&n.push(t),console.log.apply(console,n),this.currentRoute.name=e,this.currentRoute.args=t},currentRouteIsBook:function(e){var t=this.currentRoute;return"book"===t.name&&t.args[0]===e},currentRouteIsSheet:function(e,t){var n=this.currentRoute;if("sheet"!==n.name)return!1;if(n.args[0]!==e)return!1;var i=n.args[1];return t===i||!t&&!i}});u.listenTo(c,"route",u.onRoute);{var d=n.params=function(){var e=i.parse(window.location.href,!0);return e.query},h=n.param=function(e){return d()[e]},f=(n.hasParam=function(e){return e in d()},n.history=r.history);n.start=function(e){c.root=new o.RootView({el:e}),f.start({pushState:!0})}}dev.add("root",function(){return c.root}),dev.add("mainView",function(){return c.root.mainView}),dev.add("router",function(){return c})},{"./errors":9,"./keys":25,"./views":188,backbone:"backbone",url:744}],77:[function(e,t){"use strict";var n={pauseTip:function(){Tips.dontShowTips=!0},resumeTip:function(){Tips.dontShowTips=!1,this.displayTip()},displayTip:function(){if(!Tips.dontShowTips){var e=this;e.onNextTick(function(){Tips.display(this)})}},hideTip:function(){if(Tips.currentTipView)Tips.currentTipView.dismiss();else if(Tips.displayedView()){var e=Tips.displayedView();e.$el.fadeOut(200,function(){e.remove()})}},containsTip:function(e){return Tips.currentTipView&&e.contains(Tips.currentTipView.element)}},i=function(e){return _.defaults(e.prototype,n),e};t.exports=i},{}],78:[function(e,t){"use strict";var n=e("../common/errors"),i=e("../common/version"),r="undefined"==typeof window?null:window.trackJs;r&&(Q.onerror=function(e){throw r.track(e),e},r.configure({onError:function(e){return e.message&&n.isDisplayableErrorMessage(e.message)?(console.debug(n.removeDisplayableErrorPrefix(e.message)),!1):!0},version:i.versionString()+"/"+window.herokuVersion})),t.exports.watch=function(e,t){return r?r.watch(e,t):_.bind(e,t)},_.each(["watchAll","track"],function(e){t.exports[e]=function(){return r?r[e].apply(r,arguments):void 0}}),t.exports.console={},_.each(["debug","error","info","log","warn"],function(e){t.exports.console[e]=function(){return r?r.console[e].apply(r.console,arguments):void 0}})},{"../common/errors":242,"../common/version":258}],79:[function(e,t){"use strict";t.exports=function(e){e.makeConditions({OnSheetDetail:{autostep:"ClickSheetTab",test:function(){return"Companies"===$(".sheet-link.active").text()}},OnRecord:{autostep:"GoToRecord",test:function(){return"Honeywell"===$(".title-part.record-name").text()}},AddedContact:{autostep:"AddContact",test:function(){return $('.fast-record-list:contains("Contacts") .table-row').length>2}}})}},{}],80:[function(e,t){"use strict";t.exports=function(e){e.makeConditions({OnCities:{autostep:"GoToCities",test:function(){return"Cities"===$(".sheet-link.active").text()}},OnExperts:{autostep:"GoToExperts",test:function(){return"Experts"===$(".sheet-link.active").text()}},HasCities:{autostep:"ExtractSheet",test:function(){return this.check.exists('.sheet-tab[data-id!=""]:contains("Cities")')}},FieldMenuOpen:{autostep:"OpenFieldMenu",test:function(){return this.check.exists('.add-link[data-key="f1"]:visible')}},FieldMenuOpenToUnlink:{autostep:"OpenFieldMenuToUnlink",test:function(){return this.check.exists('.remove-link[data-key="f1"]:visible')}},LinkMode:{autostep:"ClickLink",test:function(){return this.check.exists(".new-sheet-link-target")}},NamedColumn:{autostep:"NameColumn",test:function(){return"Country"===$("th.row-header.col-f2").text().trim()}},NotWrongLink:{autostep:"Unlink",test:function(){var e=dev.sheet.fieldWithKey("f1");if(!e)return!0;var t=e.linkedSheet();return t?"Cities"===t.get("title"):!0}}})}},{}],81:[function(e,t){(function(e){"use strict";t.exports=function(t){var n=function(t){var n=e._getUnderscore(dev.getQuery().split("|")).invoke("trim");return e._getUnderscore(n).any(function(e){return t.test(e)})};t.makeConditions({OnLeads:{autostep:"GoToLeads",test:function(){return"Leads"===$(".sheet-link.active").text()}},HasFilter:{autostep:"AddFilter",test:function(){return n(/^filter contract_size > \d{6,}/)}},HasSort:{autostep:"AddSort",test:function(){return n(/^sort company/)}},Saved:{autostep:"SaveView",test:function(){return this.check.exists(".save-as-new")}},Named:{autostep:"NameView",test:function(){var t=e._getUnderscore(dev).soak("sheetViewModel.query.nameify().trim()"),n=$(".title-part.sheet-title").text().trim();return t!==n}}})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],82:[function(e,t){(function(n){"use strict";var i=e("../gen/tutorialIndex"),r=e("./tutorial"),o=e("../gen/help.json").tutorials;_.each(i,function(e,i){var s=i.capitalize(),a=n._getUnderscore(o).findWhere({slug:i}),l=r.addTutorialFromConfig(a);e(l),t.exports[s]=l})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../gen/help.json":17,"../gen/tutorialIndex":21,"./tutorial":84}],83:[function(e,t){"use strict";t.exports=function(e){e.makeConditions({OnSheetDetail:{autostep:"ClickSheetTab",test:function(){return"Tasks"===$(".sheet-link.active").text()}},FieldMenuOpen:{autostep:"OpenFieldMenu",test:function(){return this.check.exists('.group-field[data-key="f3"]:visible')}},IsGrouped:{autostep:"ClickGroup",test:function(){return"group status"===dev.getQuery()}},HasDraggedRecord:{autostep:"DragRecord",test:function(){var e=dev.sheet.findRecordByName("First task");return e?"New"!==e.getDisplayValue("f3"):!1}},HasDraggedGroup:{autostep:"DragGroup",test:function(){return this.check.exists('.remove-custom-order[data-key="f3"]')}},SavedView:{autostep:"SaveView",test:function(){return"group status"!==dev.getQuery()?!1:this.check.exists(".save-as-new")}}})}},{}],84:[function(e,t){(function(n){"use strict";var i=e("../viewModels/help/help");e("../viewModels/help/steps"),e("../viewModels/help/conditions"),e("../viewModels/help/entries"),e("../viewModels/help/plugins"),e("../viewModels/help/helpTips");var r=i.Condition,o=i.Step,s=t.exports=i.Entry.extend({noTip:!0,createConditions:function(){this.conditions=this.config.conditions.map(function(e){return new r[e]})}}).addProperties("namespace");s.entries=[],s.addTutorialFromConfig=function(e){var t=_.pick(e,"slug","cid","title");t.cid=e.slug,t.config=e;var n=s.extend(t);return s.entries.push(n),n},s.makeConditions=function(e){var t=this.prototype.slug.capitalize()+":";_.each(e,function(e,n){n=t+n,e.autostep&&(e.createStep=function(){return new o[t+e.autostep]});r[n]=r.extend(e)})},s.tutorialWithSlug=function(e){return n._getUnderscore(this.entries).find(function(t){return t.prototype.slug===e})},s.startTutorialWithSlug=function(e){var t=this.tutorialWithSlug(e);if(!t)throw new Error("No tutorial found for slug: "+e);i.Entry.begin(t),Tips.display()},i.Tutorial=s,n.help=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../viewModels/help/conditions":91,"../viewModels/help/entries":92,"../viewModels/help/help":93,"../viewModels/help/helpTips":94,"../viewModels/help/plugins":96,"../viewModels/help/steps":97}],85:[function(e,t){"use strict";var n=e("../common/values/valueTimestamp"),i=e("node-uuid");t.exports=n;var r;n.getClientId=function(){return r||(r=i.v4()),r}},{"../common/values/valueTimestamp":257,"node-uuid":695}],86:[function(e,t,n){(function(t){"use strict";var i=e("../actions"),r=e("../../common/values"),o=e("../models"),s=e("../valueTimestamp"),a=(e("../errors"),e("../../common/strings"),n.saveBulkChanges=function(e,t,n,i,r){var o=e.action(a,t,n,i);return o.do(r),o},n.destroyRecords=function(e,t,n,i,r){var o=e.action(l,t,n,i);return o.do(r),o},n.createRecords=function(e,t,n,i){var r=e.action(c,{},t,n);return r.do(i),r},n.BulkChanges=i.Action.extend({name:"bulkChanges",initialize:function(e,t,n,i){this.changes=n,this.fieldChanges=_.defaults({},t,{rename:{},previousNames:{},newFields:[]}),_.each(this.changes,function(e){_.defaults(e,{newValues:[],attributes:{},previousAttributes:{}})
}),this.model=e,this.startingFields=e.get("fields").clone(),this.startingRecords=e.get("records").clone(),this.recordList=i},decorateValueWithOldValue:function(e,t){return _.soak(e,"isRef()")?(e=r.create(e.toJSON()),e.isMultiRef()||(e=r.makeMultiRef([e])),e.oldValue=t,e):e},doUpdate:function(e,n){var i={},r=s.now();t._getUnderscore(this.changedFieldKeys()).each(function(e){i[e]=r});var a=this.model;return _.each(e,function(e){e.records&&_.each(e.records,function(e){if(e.values=_.map(e.values,function(e){return _.isObject(e)?e.toJSON():e}),e.id){var t=o.Record.find(e.id);t.forceNewTimestamps(i)}}),"fields"===e.op&&_.each(e.rename,function(e,t){var n=a.fieldWithKey(t);n.forceNewTimestamps({name:r})})}),this.model.request("patch",e,n)},changedFieldKeys:function(){return _.chain(this.changes).map(function(e){return e.attributes?_.keys(e.attributes):null}).compactNullish().flatten(!0).uniq().value()},perform:function(e){var n=this;this.refreshModel();var i=[];if(this.fieldChanges){var r={op:"fields",rename:this.fieldChanges.rename,newFields:this.fieldChanges.newFields};i.push(r)}var o={op:"records"},s=this.changedFieldKeys();o.fields=s.concat(t._getUnderscore(this.fieldChanges.newFields).map(function(e){return{"new":!0,guid:e.guid}})),o.records=_.map(this.changes,function(e){var t={};e.record.isNew()||(t.id=e.record.id);var i=[];return _.each(s,function(t){if(!(t in e.attributes)){var r=e.record.getValue(t);e.attributes[t]=r,e.previousAttributes[t]=r}var o=e.attributes[t];o=n.decorateValueWithOldValue(o,e.previousAttributes[t]),i.push(o)}),t.clientName=e.record.getClientName(),t.values=i.concat(e.newValues),t}),i.push(o);var a=e.postSideEffect;e.postSideEffect=function(){var e=n.model.get("fields").pluck("key"),t=n.startingFields.pluck("key");n.addedKeys=_.difference(e,t);var i=n.model.get("records").pluck("_id"),r=n.startingRecords.pluck("_id");n.addedRecordIds=_.difference(i,r),n.addRecords(),a&&a.apply(this,arguments)},this.doUpdate(i,e)},addRecords:function(){if(this.recordList){var e=t._getUnderscore(this.addedRecordIds).map(function(e){return o.Record.find(e)});this.recordList.records.add(e),this.model.get("records").add(e),_.invoke(e,"onNameChange")}},removeRecords:function(){if(this.recordList){var e=this,t=this.recordList.records.filter(function(t){return _.any(e.addedRecordIds,function(e){return t.id===e})});e.recordList.records.remove(t)}},revert:function(e){var t=this;this.refreshModel();var n=[];n.push({op:"fields",deleteFields:this.addedKeys,rename:this.fieldChanges.previousNames});var i={op:"records",deleteRecords:this.addedRecordIds,fields:this.changedFieldKeys()};i.records=_.chain(this.changes).map(function(e){var n=e.record;if(n.id){var r={};return r.id=n.id,r.values=_.map(i.fields,function(n){return t.decorateValueWithOldValue(e.previousAttributes[n],e.attributes[n])}),r}}).compactNullish().value(),n.push(i);var r=e.postSideEffect;e.postSideEffect=function(){r&&r.apply(this,arguments),t.removeRecords()},this.doUpdate(n,e)},reperform:function(e){var n=this;this.refreshModel();var i=[];i.push({op:"fields",restoreFields:this.addedKeys?this.addedKeys:[],rename:this.fieldChanges.rename});var r=this.changedFieldKeys(),s=r.concat(this.addedKeys),a={op:"records",restoreRecords:this.addedRecordIds,fields:s},l=0;a.records=_.map(this.changes,function(e){var i={};if(i.id=e.record.id,e.record.isNew()){i.id=n.addedRecordIds[l],l++;var s=o.Record.find(i.id);s.set(_.defaults({},e.attributes,{sheetId:n.model.id}))}var a=t._getUnderscore(r).map(function(t){return n.decorateValueWithOldValue(e.attributes[t],e.previousAttributes[t])});return i.values=a.concat(e.newValues),i}),i.push(a);var c=e.postSideEffect;e.postSideEffect=function(){c&&c.apply(this,arguments),n.addRecords()},this.doUpdate(i,e)}})),l=n.BulkDelete=i.Action.extend({name:"bulkDelete",initialize:function(e,t,n,i){this.model=e,this.fieldChanges=t,this.deletedRecords=n,this.recordList=i},doUpdate:function(e,t){var n=this.model,i=s.now();return _.each(e,function(e){"fields"===e.op&&_.each(e.rename,function(e,t){var r=n.fieldWithKey(t);r.forceNewTimestamps({name:i})})}),this.model.request("patch",e,t)},perform:function(e){var t=[];if(this.fieldChanges){var n={op:"fields",rename:this.fieldChanges.rename};t.push(n)}var i={op:"records",deleteRecords:_.pluck(this.deletedRecords,"id")};t.push(i),this.recordList&&this.recordList.records.remove(this.deletedRecords),this.doUpdate(t,e)},revert:function(e){var t=[];this.fieldChanges&&t.push({op:"fields",rename:this.fieldChanges.previousNames});var n={op:"records",restoreRecords:_.pluck(this.deletedRecords,"id")};t.push(n),this.recordList&&this.recordList.records.add(this.deletedRecords),this.doUpdate(t,e)}}),c=n.BulkCreate=a.extend({revert:_.noop,reperform:_.noop})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/strings":249,"../../common/values":253,"../actions":2,"../errors":9,"../models":47,"../valueTimestamp":85}],87:[function(e,t){"use strict";var n=e("./viewModel"),i=e("../models/expressions/expression"),r=e("../models"),o=e("../../common/values"),s=e("../../common/errors"),a=n.extend({initialize:function(){this.options.fields||(this.options.fields=this.options.sheet.get("fields").toArray()),this.newRecords={}},fieldAt:function(e,t){return this.options.transposed?e:t.field},recordAt:function(e,t){return this.options.transposed?this.options.record:t?t:(this.newRecords[e]||(this.newRecords[e]=r.Record.add()),this.newRecords[e])},isFieldNameChange:function(e,t){return this.options.transposed&&t===this.tableView.columns[0]},fieldChangeSummary:function(e){var t=this.summaries.fields[e.id];return t||(t={field:e},this.summaries.fields[e.id]=t),t},recordChangeSummary:function(e){var t=this.summaries.records[e.cid];return t||(t={record:e,attributes:{},previousAttributes:{},newValues:[]},this.summaries.records[e.cid]=t),t},updateForFieldNameChange:function(e,t,n){var i=this.fieldChangeSummary(e);i.name=n},updateForValueChange:function(e,t,n,i){var r=this.recordChangeSummary(e);if(_.isNumber(t))r.newValues.push(i);else{var s=t.id;r.previousAttributes[s]=e.getValue(s),r.attributes[s]=function(){var n=t.resolveValue(i,e);return e.isNew()&&n.isEmptyRef()?o.createEmpty():n}()}},updateSummaryForChange:function(e,t,n,i){var r,o=this.tableView.rowAt(e),s=t.column;if(r=_.isNumber(t)?t:this.fieldAt(o,s),this.isFieldNameChange(o,s))this.updateForFieldNameChange(r,n,i);else{var a=this.recordAt(e,o,s);this.updateForValueChange(a,r,n,i)}},isRecordDelete:function(e){if(e.record.isNew()&&!e.record.isTemporary())return!1;var t=e.attributes;return _.all(this.options.fields,function(e){if(e.isReadOnly())return!0;if(e.id in t){var n=t[e.get("key")];if(n.isEmpty())return!0;if(n.isRef()&&0===n.valuesList().length)return!0}return!1})},transformRowClearsIntoRecordDeletes:function(){if(!this.options.transposed){var e=this;_.each(this.summaries.records,function(t){e.isRecordDelete(t)&&(t.attributes={},t.previousAttributes={},t.isDelete=!0)})}},updateSummariesForFormulaChange:function(e,t){var n=this.options.sheet,r=e.record,a=e.attributes[t],l=n.fieldWithKey(t),c=this.fieldChangeSummary(l);if(!i.isFormula(a))return c.formula=null,void(c.badFormula=null);try{c.formula=i.parse(a,l.formulaSheet(),{forbiddenFields:[l]}),c.badFormula=null,e.attributes[t]=o.createEmpty(),e.previousAttributes[t]=r.getValue(t)}catch(u){if(!(u instanceof i.ParseError||u instanceof s.ValidationError))throw u;c.badFormula=a.displayValue(),c.badFormulaRecord=r,u instanceof s.ValidationError&&(c.message=u.getMessage()),delete c.formula,delete e.attributes[t],delete e.previousAttributes[t]}},transformFormulaStringsIntoFieldUpdates:function(){var e=this;_.each(this.summaries.records,function(t){_.each(_.keys(t.attributes),function(n){e.updateSummariesForFormulaChange(t,n)})})},isNoOp:function(e,t){return e=e||o.createEmpty(),t=t||o.createEmpty(),_.isEqual(t,e)?!0:t.isRef()&&e.isRef()&&t.isEqual(e)?!0:!1},removeNoOps:function(){var e=this;_.each(_.values(this.summaries.records),function(t){if(!t.isDelete){_.each(_.keys(t.attributes),function(n){var i=t.attributes[n],r=t.previousAttributes[n];e.isNoOp(r,i)&&(delete t.attributes[n],delete t.previousAttributes[n])});var n=!_.isEmpty(t.newValues);n=n&&_.any(t.newValues,function(e){return null!=e}),_.isEmpty(t.attributes)&&!n&&delete e.summaries.records[t.record.cid]}})},processChanges:function(e,t){var n=this;return this.tableView=e,this.summaries={fields:{},records:{}},_.each(t,function(e){n.updateSummaryForChange.apply(n,e)}),this.transformRowClearsIntoRecordDeletes(),this.transformFormulaStringsIntoFieldUpdates(),this.removeNoOps(),this.summaries},getRecordChanges:function(e){return void 0===e?this.summaries.records:this.summaries.records[e.cid]},getFieldChanges:function(){return this.summaries.fields},getFormulaChanges:function(){return _.filter(this.summaries.fields,function(e){return"formula"in e})},getFirstBadFormulaChange:function(){return _.find(this.summaries.fields,function(e){return!!e.badFormula})}});t.exports=a},{"../../common/errors":242,"../../common/values":253,"../models":47,"../models/expressions/expression":42,"./viewModel":119}],88:[function(e,t){"use strict";function n(e){_(this).extend(n.emptyChanges,e)}n.emptyChanges={rowsChanged:[],rowsDeleted:[],renamedColumns:[],bulkChanges:[]},t.exports=n},{}],89:[function(e,t){(function(e){"use strict";t.exports=BaseObject.extend({propertyNames:["row","isHeaderRow","tableView","attributes","newValues"],initialize:function(){_.defaults(this,{attributes:{},newValues:[]}),_.isNumber(this.row)&&this.tableView&&(-1===this.row?this.isHeaderRow=!0:this.row=this.tableView.rows[this.row])},setValues:function(t,n){return e._getUnderscore(t).chain().zip(n).each(_.spread(this.setValue),this),this},setValue:function(t,n){return t&&t.isReadOnly()?void 0:(t&&e._getUnderscore(t).result("isWritable")?this.attributes[t.id()]=n:this.newValues.push(n),this)},apply:function(e){return e=e||this.tableView,e.rowChange(this),this},setDeleted:function(){this.deleted=!0}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],90:[function(e,t){"use strict";var n=e("../../common/errors"),i=e("./recordList"),r=e("../actions"),o=e("../../common/strings"),s=(e("../models"),e("../../common/values"),i.extend({type:"group",initialize:function(){this.showGroupFieldAction=!0,this.showSearchFieldAction=!0,this.showSortFieldAction=!0,i.prototype.initialize.call(this);var e=this.hasOneNonLinkField()&&!this.isReadOnlyMode();this.allowTitleRename=e,this.showDeleteListAction=e,this.showGroupInsertActions=e},hasOneField:function(){return 1===this.fixedKeys.length},hasOneNonLinkField:function(){return this.hasOneField()&&!this.fixedFields()[0].isAnyLink()},titles:function(e){if(void 0===e){var t=this;return _.map(this.fixedValues,function(e,n){var i=t.fixedField(n);return t.titleForValue(e,i)})}var n=this.fixedValues[e],i=this.fixedField(e);return this.titleForValue(n,i)},deleteTitle:function(){return o["named-value"]({fieldName:this.fixedField(0).displayName(),displayValue:this.fixedValues[0].displayValue()})},titleContext:function(e){var t=_.extend({field:this.fixedField(e),defaultString:o["default-group-name"]()},this.fixedField(e).formatOptions());return this.fixedValues[e].context(t)},titleUrl:function(e){return this.fixedValues[e].linkUrl()},titleForValue:function(e,t){return e.isEmpty()?o["default-group-name"]():e.displayValue(t.formatOptions())},showFieldNames:function(){return!0},fixedField:function(e){return this.sheet.fieldWithKey(this.fixedKeys[e])},firstFixedValue:function(){return this.fixedValues[0]},allValuesMatch:function(e){return e.length!==this.fixedValues.length?!1:_.all(this.fixedValues,function(t,n){var i=e[n];return t.isEqual(i)})},editableTitleText:function(){return this.fixedValues[0].displayValue()},startListeners:function(){i.prototype.startListeners.call(this)},rename:function(e){if(this.hasOneNonLinkField()){var t=this.firstFixedValue(),i=this.fixedField(0);if(e=i.resolveValue(e),e.isError())throw e.getError();if(!e.isEqual(t)){var o=t;if(this.sheetViewModel.hasGroup(e))throw new n.DisplayableError("error-duplicate-group-name",{group:this.titleForValue(e,i)});i.isEnum()?i.get("enum").renameValue(o.displayValue(),e.displayValue()):this.sheet.get("records").bulkUpdate(i,o.toJSON(),e.toJSON());var s=this,a=function(e){s.fixedValues[0]=e,s.records.each(function(t){t.set(s.fixedField(0).get("key"),e)}),s.trigger("titleChanged")};r.performCustomAction({perform:function(){a(e)},revert:function(){a(o)},queueTarget:this})}}},"delete":function(e){if(!this.showDeleteListAction)throw new Error("Attempting to delete a group when we aren't allowed to");if(!this.sheet.canDeleteGroup(this.fixedKeys,this.fixedValues))throw new n.DisplayableError("error-delete-nonempty-group");var t=this.fixedFields()[0];if(!t.isEnum())throw new Error("Attempted to delete a group on a field that isn't enum");t.removeEnumValue(this.fixedValues[0].displayValue(),e)}}));t.exports=s},{"../../common/errors":242,"../../common/strings":249,"../../common/values":253,"../actions":2,"../models":47,"./recordList":104}],91:[function(e){(function(t){"use strict";var n=e("./help"),i=e("../../views/sheetView"),r=e("./plugins"),o=n.Step,s=n.Condition,a=n.EventCondition;s.stepNamed=function(e){return function(){return new o[e]}},s.currentViewTest=function(e,t){return function(){var n=e.displayedView();return n?t(n):!1}},s.OnRecordDetail=s.extend({createStep:function(){return new o.GoToRecord},test:function(){return this.check.exists(".record-detail")}}),s.OnSheetDetail=s.extend({createStep:function(){return new o.GoToSheet},test:s.currentViewTest(i,function(e){return!e.viewModel.hasReportQuery()})}),s.SheetNotEmpty=s.extend({createStep:function(){return new o.GoToNonEmptySheet},test:function(){var e=i.displayedView();return e?e.$("tbody.body tr").length:!1}}),s.NameFieldVisible=s.extend({createStep:function(){return new o.ScrollToNameField},test:function(){var e=$(".fast-table").view(),n=$(".fast-scroll").view().$el.bounds(),i=_.find(e.columns,function(e){return t._getUnderscore(e).soak("isNameFieldColumn()")});if(!i)return!1;var r=e.$getColumnHeader(i).bounds();return r.x>=n.x}}),s.NameFieldNotVisible=s.extend({createStep:function(){return new o.GoToRecord},test:function(){var e=$(".fast-table").view();if(!e)return!0;var t=$(".fast-scroll").view().$el.bounds(),n=_.find(e.columns,function(e){return e.isNameFieldColumn()}),i=e.$getColumnHeader(n).bounds();return i.x<t.x}}),s.OnBookDetail=s.extend({createStep:function(){return new o.GoToBookDetail},test:function(){return this.check.exists(".book-detail")}}),s.OnBookList=s.extend({createStep:function(){return new o.GoToBookList},test:function(){return this.check.exists(".book-list")}}),s.OnFormulaPanel=s.extend({createStep:function(){return new o.OpenFormulaPanel},test:function(){return this.check.exists(".formula-panel")}}),s.OnFormulaPanelForNewField=s.extend({createStep:function(){return new o.OpenFormulaPanelForNewField},test:function(){return this.check.exists(".formula-panel")}}),s.NotOnFormulaPanel=s.extend({createStep:function(){return new o.CloseFormulaPanel},test:function(){return!this.check.exists(".formula-panel")}}),s.SubsheetButtonClicked=a.extend({targetSelector:".add-subsheet",eventName:"click",createStep:function(){return new o.ClickSubsheetButton}}),s.SheetMenuOpened=a.extend({targetSelector:".sheet-actions",eventName:"click",createStep:function(){return new o.OpenSheetMenu}}),s.AggregatesVisible=s.extend({createStep:function(){return new o.ScrollToAggregates},test:function(){return this.check.exists(".empty td.data")}}),s.AggregatesMenuOpened=a.extend({targetSelector:".empty td.data",eventName:"fieldbook:showmenu",createStep:function(){return new o.OpenAggregatesMenu}}),s.NewFieldSettingsOpened=a.extend({targetSelector:".field-settings",eventName:"fieldbook:showmenu",createStep:function(){return new o.OpenNewFieldSettings}}),s.AddedFieldForNamingNewField=s.extend({createStep:function(){return new o.AddFieldForNamingNewField},test:function(){var e=$(".sheet-detail");if(!e.length)return!1;this.state||(this.state={});var t=this.state;this.state.sheet=e.view().viewModel.sheet,t.oldFields||(t.oldFields=this.state.sheet.get("fields").clone());var n=t.sheet.get("fields").difference(t.oldFields.models);return n.length?!0:!1}}),s.NamedNewField=a.extend({targetSelector:".colHeader",eventName:"blur",createStep:function(){return new o.NameNewField}}),s.AddedField=s.extend({createStep:function(){return new o.AddField},test:function(){var e=$(".sheet-detail");if(!e.length)return!1;this.state||(this.state={});var t=this.state;this.state.sheet=e.view().viewModel.sheet,t.oldFields||(t.oldFields=this.state.sheet.get("fields").clone());var n=t.sheet.get("fields").difference(t.oldFields.models);return n.length?!0:!1}}),s.TableVisible=s.extend({createStep:function(){return new o.ScrollToTable},test:function(){var e=$(".fast-table").view();return null!=e}}),s.AddFieldColumnIsVisible=s.extend({createStep:function(){return new o.ScrollToAddFieldColumn},test:function(){var e=$(".fast-table").view();if(!e)return!1;var t=$(".onboarding-container").bounds(),n=e.$header().find(".add-field").bounds();return n.x+n.width<t.x}}),s.AddFieldColumnIsHidden=s.extend({createStep:function(){return new o.AddField},test:function(){var e=$(".fast-table").view();if(!e)return!1;var t=$(".onboarding-container").bounds(),n=e.$header().find(".add-field").bounds();return n.x+n.width>=t.x}}),s.AddFieldColumnIsHidden=s.extend({createStep:function(){return new o.AddField}}),s.LinkCreated=s.extend({createStep:function(){return new o.CreateLink},test:function(){var e=$(".sheet-detail");if(!e.length)return!1;var t=this.state||{},n=e.view().viewModel.sheet;if(t.sheet){if(t.sheet!==n)return null!=n.get("sourceId")}else t.sheet=n;return!1}}),s.OnLinkModal=s.extend({createStep:function(){return new o.OpenLinkModal},test:function(){var e=$(".link-modal");return e.length>0}}),s.SheetHasField=s.extend({createStep:function(){return new o.AddField},test:function(){var e=$(".fast-table").view();return e?e.columns.length>2:!1}}),s.SheetHasLinkableField=s.extend({createStep:function(){return new o.AddField},test:function(){var e=$(".fast-record-list").view();return t._getUnderscore(e.fields()).any(function(e){return e.canLink()})}}),s.SheetHasFieldWith3NonEmptyCell=s.extend({createStep:function(){return new o.AddRow},test:function(){var e=$(".fast-record-list").view();return t._getUnderscore(e.fields()).any(function(t){if(!t.canLink())return!1;var n=e.model.records.filter(function(e){return!e.getValue(t.get("key")).isEmpty()});return n.length>=3})}}),s.OnMainSheet=s.extend({createStep:function(){return new o.GoToMainSheet},test:function(){return!$(".book-detail").view().navKey}}),s.QueryNotEmpty=s.extend({createStep:function(){return new o.EnterQuery},test:function(){return $(".sheet-detail").view().viewModel.query.hasCommands()}}),s.QuerySaved=s.extend({createStep:function(){return new o.SaveQuery},test:function(){if(this.state){var e=$(".sheet-detail").view().viewModel.sheet.get("navItems");if(e.length>this.state.navItemLength)return!0;this.state.navItemLength=e.length}else this.state={},this.state.navItemLength=$(".nav-item").length;return!1}}),r.mixinConditions(s)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../views/sheetView":222,"./help":93,"./plugins":96}],92:[function(e){"use strict";function t(e){s.add(s.extend({title:e.title,onboardingTitle:e.onboardingTitle,integration:e.integration,createConditions:function(){this.conditions=e.conditions.map(function(e){return new o[e]})},keyWords:e.keyWords,noTip:null==e.content,tipContent:e.content?function(){var t=this.createContext();return t?e.content.stencil(t):e.content}:null,findElement:function(){var t=e.target;return t?(_.isArray(t)&&(t=_.find(t,function(e){return $(e).length})),$(t)):void 0},pointer:e.pointer,cid:e.cid}))}var n=e("../../models/sheet"),i=e("./help"),r=e("../../gen/help.json").entries,o=i.Condition,s=i.Entry,a=e("../../views");r.forEach(t),s.implement("group",{findElement:function(){var e=$(".group-option:last"),t=n.displayedSheet();if(!t)return e;var i=t.goodGroupField();if(!i)return e;var r=_.find($(".sheet-detail thead th"),function(e){var t=$(e).data("column");return t&&t.field===i});r=$(r);var o=r.find(".group-option");return o.length?(this.state.columnName=i.get("name"),o):e},createContext:function(){return{col:this.state.columnName?"the “"+this.state.columnName+"”":"this"}}}),s.implement("detail-page",{createContext:function(){var e=a.RecordView.displayedView();return{name:e.model.name()}}})},{"../../gen/help.json":17,"../../models/sheet":63,"../../views":188,"./help":93}],93:[function(e,t){(function(n){"use strict";var i=e("../tips/tip"),r=e("../../globalEvents"),o=t.exports.Condition=BaseObject.extend({initialize:function(){},test:function(){return!0},createStep:function(){return null},getStep:function(){return this.step?this.step:(this.step=this.createStep(),this.step.setState(this.state),this.step)},check:{exists:function(e){return $(e).length>0}}}),s=o.extend({targetSelector:null,eventName:"",hasFired:!1,initialize:function(){o.prototype.initialize.apply(this,arguments);var e=function(){this.hasFired=!0,_.defer(Tips.display)}.bind(this),t=_.result(this,"targetSelector"),n=this.eventName;$("body").one(n+".help",t,e)},test:function(){return this.hasFired}});t.exports.EventCondition=s;var a=t.exports.Step=BaseObject.extend({initialize:function(){this.createConditions()},createConditions:function(){this.conditions=[]},setState:function(e){this.state=e;var t=this;this.conditions.forEach(function(e){e.state=t.state})},createContext:function(){return null},tipContent:function(){return null},findElement:function(){return null},pointer:"none",makeTip:function(){var e=i.ElementTip.extendNoRegister({pointerLocation:this.pointer,content:this.tipContent.bind(this),findElement:this.findElement.bind(this)});return new e(this.options.context)},displayTip:function(){if(this.noTip)return!0;var e=this.makeTip(),t=this.findElement();return t&&0===t.length?!1:(Tips.showTip(e,!0),!0)},showNext:function(){var e=this.getNextUnmetCondition();return e?(e.getStep().showNext(),!1):this.displayTip()},getNextUnmetCondition:function(){return _.find(this.conditions,function(e){return!e.test()})}}),l=t.exports.Entry=a.extend({title:"Unnamed Help Entry",initialize:function(){a.prototype.initialize.apply(this,arguments),this.setState({})},keyWords:[],showNext:function(){var e=a.prototype.showNext.apply(this,arguments);return e&&l.currentEntry===this&&l.end(),e}});l.begin=function(e){return l.currentEntry=new e,$(".help-button").addClass("help-active"),l.currentEntry},l.end=function(){l.currentEntry&&l.currentEntry.trigger("end"),r.trigger("endHelp"),l.clearCurrent()},l.cancel=function(){Tips.currentTipView&&Tips.currentTipView.dismiss(),l.clearCurrent()},l.clearCurrent=function(){l.currentEntry=null,$(".help-button").removeClass("help-active"),$("body").off(".help")},l.entries=[],l.add=function(e){this.entries.push(e),e.id=_.uniqueId("HelpEntry-")},l.get=function(e){return _.findWhere(this.entries,{id:e})},l.implement=function(e,t){_.chain(this.entries).pluck("prototype").findWhere({cid:e}).extend(t)},l.getQueryTerms=function(e){var t=e.toLowerCase().split(/\W+/);return _.without(t,"")},l.find=function(e){var t=this.getQueryTerms(e);return _.chain(this.entries).filter(function(e){return _.all(t,function(t){return _.any(e.prototype.keyWords,function(e){return-1!==e.indexOf(t)})||-1!==e.prototype.title.toLowerCase().indexOf(t)})}).value()},l.getOnboardingTours=function(){return this.entries.filter(function(e){return!!e.prototype.onboardingTitle})},l.getIntegrationTours=function(e){return n._getUnderscore(this.entries).filter(function(t){return t.prototype.integration===e})},n.Tips&&(Tips.help=t.exports),n.Entry=l,dev.Entry=l,t.exports.loadData=function(){e("./entries"),e("./conditions"),e("./steps"),e("./helpTips")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../globalEvents":22,"../tips/tip":116,"./conditions":91,"./entries":92,"./helpTips":94,"./steps":97}],94:[function(e){"use strict";e("../tips/tip")},{"../tips/tip":116}],95:[function(e,t,n){"use strict";var i=e("../../../views/sheetView");n.mixinConditions=function(e){e.EventbriteOnAttendeesSheet=e.extend({createStep:e.stepNamed("EventbriteGoToAttendeesSheet"),test:e.currentViewTest(i,function(e){var t=e.getSheet();return t?t.isIntegrationSheet("eventbrite","attendees")?e.viewModel.hasReportQuery()?!1:!0:!1:!1})}),e.EventbriteOnOrdersSheet=e.extend({createStep:e.stepNamed("EventbriteGoToOrdersSheet"),test:e.currentViewTest(i,function(e){var t=e.getSheet();return t?t.isIntegrationSheet("eventbrite","orders")?e.viewModel.hasReportQuery()?!1:!0:!1:!1})}),e.EventbriteOnReportView=e.extend({createStep:e.stepNamed("EventbriteGoToReportNavItem"),test:function(){return $("a.nav-item-link.active").hasClosest(".integration-eventbrite-attendees")}})}},{"../../../views/sheetView":222}],96:[function(e,t,n){(function(t){"use strict";var i=[e("./eventbrite")];n.mixinConditions=function(e){t._getUnderscore(i).each(function(t){t.mixinConditions&&t.mixinConditions(e)})},n.mixinEntries=function(e){t._getUnderscore(i).each(function(t){t.mixinEntries&&t.mixinEntries(e)})},n.mixinSteps=function(e){t._getUnderscore(i).each(function(t){t.mixinSteps&&t.mixinSteps(e)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventbrite":95}],97:[function(e){(function(t){"use strict";function n(e){c[e.name]=c.extend({createConditions:function(){this.conditions=e.conditions.map(function(e){return new u[e]})},noTip:null==e.content,tipContent:e.content?function(){var t=this.createContext();return t?_.stencil(e.content,t):e.content}:null,findElement:function(){var t=e.target;return t?(_.isArray(t)&&(t=_.find(t,function(e){return $(e).length})),$(t)):void 0},pointer:e.pointer})}function i(e,t){return c[e]=c[e].extend(t)}function r(e,t){return $(_.find(e,function(e){return $(e).closest("th").data("key")===t}))}var o=e("./help"),s=e("../../gen/help.json"),a=s.steps,l=t._getUnderscore(s.tutorials).chain().pluck("steps").flatten().value();a=a.concat(l);var c=o.Step,u=o.Condition;a.forEach(n),i("GoToRecord",{findElement:function(){var e=$(".fast-table").view();if(e){var t=e.$header().bounds(),n=t.y+t.height,i=_.find($(".fast-record-list td.name-col"),function(e){var t=e.getBoundingClientRect();return n<=t.top+t.height/1.25});return $(i).find("a")}return $(".fast-record-list td.name-col a")}}),i("OpenNewFieldSettings",{findElement:function(){var e=this.state.addColumn.field;return r($(".field-settings"),e)}}),i("NameNewField",{findElement:function(){var e=this.state.addColumn.field;return r($(".colHeader"),e)}}),i("AddRow",{findElement:function(){var e=$(".fast-record-list").view(),n=t._getUnderscore(e.fields()).find(function(e){return e.canLink()});return $("th.col-"+n.get("key"))}}),i("CreateLink",{findElement:function(){var e=$(".fast-record-list").view(),n=t._getUnderscore(e.fields()).find(function(t){if(!t.canLink())return!1;var n=e.model.records.filter(function(e){return!e.getValue(t.get("key")).isEmpty()});return n.length>=3});return n?$("th.col-"+n.get("key")):!1}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../gen/help.json":17,"./help":93}],98:[function(e,t,n){"use strict";n.imports=[{slug:"csv",iconSrc:"/img/csv-icon.png",title:"Import CSV file",shortTitle:"Import CSV",subtitle:"For CSV (Comma-Separated Values) files output by spreadsheet programs"},{slug:"mailchimp",iconSrc:"/img/mailchimp-logo.png",title:"Sync MailChimp lists",shortTitle:"MailChimp Sync",subtitle:"View and edit your subscribers, including custom merge fields"},{slug:"eventbrite",iconSrc:"/img/eventbrite-logo.png",title:"Sync Eventbrite attendees",shortTitle:"Eventbrite Sync",subtitle:"For event organizers to track attendees and ticket sales"}]},{}],99:[function(e,t,n){"use strict";n.EditProcessor=e("./editProcessor"),n.GroupRecordList=e("./groupRecordList"),n.RecordIterator=e("./recordIterator"),n.RecordList=e("./recordList"),n.RecordViewModel=e("./recordViewModel"),n.ReportRecordList=e("./reportRecordList"),n.SheetRecordList=e("./sheetRecordList"),n.SheetViewModel=e("./sheetViewModel"),n.SubsheetRecordList=e("./subsheetRecordList"),n.ViewModel=e("./viewModel")},{"./editProcessor":87,"./groupRecordList":90,"./recordIterator":103,"./recordList":104,"./recordViewModel":105,"./reportRecordList":107,"./sheetRecordList":108,"./sheetViewModel":110,"./subsheetRecordList":111,"./viewModel":119}],100:[function(e,t){(function(n){"use strict";var i=e("../views/view"),r=t.exports=BaseObject.extend({evalCount:0,autoLoad:!0,createNotebook:function(e){this.onLoad=e.onLoad,this.env=e.env;var t=$(e.element),n=i.templates.mockTonic({code:e.source});t.append(n),this.autoLoad&&this.triggerLoad()},triggerLoad:function(){this.onLoad(this)},evaluate:function(){this.evalCount++}});r.inject=function(){n.Tonic=new this},n.MockTonic=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../views/view":236}],101:[function(e,t){(function(n){"use strict";function i(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var r=i(["default-name-separator"],["default-name-separator"]),o=e("./viewModel"),a=e("../actions"),l=e("../models/expressions/expression.js");t.exports=o.extend({initialize:function(){this.sheet=this.options.sheet,this.sheet.clearStash(),this.sheet.stash(),this.originalFields=this.sheet.getFields().toArray(),n._getUnderscore(this.originalFields).invoke("clearStash"),n._getUnderscore(this.originalFields).invoke("stash"),this.mode=this.sheet.get("nameFieldMode"),this.nameKey=this.sheet.get("nameKey"),this.formulaKeys=this.sheet.nameFieldKeys(),this.separator=this.sheet.nameFormulaSeparator(),this.startConfig=this.makeConfig()},reset:function(){this.sheet.restoreStashed();var e=this.sheet.getFields();e.invoke("restoreStashed"),e.invoke("stash"),e.reset(this.originalFields),this.sheet.stash()},setMode:function(e){var t="single"!==this.mode&&"single"===e;this.mode=e,this.update();var n=this.sheet.getFields();t&&!n.chain().pluck("key").contains(this.nameKey).value()&&this.setKey(this.sheet.getFields().chain().filter(function(e){return!e.isAnyLink()}).first().value().get("key"))},setKey:function(e){this.nameKey=e,this.update()},setFormulaKeys:function(e){this.formulaKeys=e,this.update()},setSeparator:function(e){e||(e=s(r)),this.separator=e,this.update()},update:function(){this.reset();var e=this.sheet.get("nameFieldMode"),t=this.sheet.getFields();if(this.sheet.set("nameFieldMode",this.mode),"single"!==this.mode&&"single"===e){{t.unshift({key:"synthetic",width:240})}this.sheet.set("nameKey","synthetic")}var n;"single"===this.mode&&("single"!==e&&t.remove(this.sheet.nameField()),this.sheet.set("nameKey",this.nameKey),n=this.sheet.nameField(),t.remove(n,{silent:!0}),t.add(n,{at:0,silent:!0})),n=this.sheet.nameField(),"single"===this.mode&&this.sheet.nameField()?this.formulaKeys=[this.nameKey]:"numeric"===this.mode?(this.formulaKeys=[],n.set("type","generic")):"multi"===this.mode&&(n.set("expression",this.makeFormula()),n.set("type","formula")),this.sheet.initializeNameCache(),this.trigger("update")},save:function(e){var t=this.sheet.action(c,this.startConfig,this.makeConfig());return t.do(_.extend(e||{},{reset:!0}))},makeConfig:function(){var e=this.sheet.get("nameFieldMode"),t=this.sheet.getFields().pluck("key");if("multi"===e){var n=this.sheet.nameFieldKeys().length;0===n&&(e="numeric")}return{mode:e,fields:t,nameKey:this.sheet.get("nameKey"),formula:this.makeFormula(),name:this.sheet.nameField().displayName()}
},makeFormula:function(){var e=this.formulaKeys.map(function(e){return{key:e}});return e.unshift({val:this.separator,op:'"'}),l.make({name:"concat",op:"fn",arguments:e})}});var c=a.Action.extend({name:"nameConfig",initialize:function(e,t,n){this.sheet=e,this.startConfig=t,this.endConfig=n},configName:function(e,t,n){n=_.defaults(n||{},{reset:!1,patch:!0});var i=[{op:"nameConfig",config:t}];this.sheet.save(i,n)},perform:function(e){this.configName(this.startConfig,this.endConfig,e)},revert:function(e){this.configName(this.endConfig,this.startConfig,e)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../actions":2,"../models/expressions/expression.js":42,"./viewModel":119}],102:[function(e,t){"use strict";var n=e("numeral");t.exports.format3SigFigs=function(e){var t=e>=1e4;if(!t)return n(e).format("0,0");e=Number(e.toPrecision(3));var i=n(e).format("0.00a");return-1!==i.indexOf(".")&&(i=i.replace(/0+(\D)$/,"$1"),i=i.replace(/\.(\D)$/,"$1")),i}},{numeral:696}],103:[function(e,t){"use strict";var n=e("./viewModel"),i=n.extend({initialize:function(){this.records=this.options.records,_.isArray(this.records)||"function"!=typeof this.records.toArray||(this.records=this.records.toArray())},contains:function(e){return-1!==this.records.indexOf(e)},current:function(){return this.records[this.index]},setCurrent:function(e){this.index=this.records.indexOf(e)},total:function(){return this.records.length},hasNext:function(){return this.index+1<this.total()},hasPrev:function(){return this.index>0},setQueryString:function(e){this.queryString=e},nextRecord:function(){return this.hasNext()?this.records[this.index+1]:void 0},prevRecord:function(){return this.hasPrev()?this.records[this.index-1]:void 0},nextId:function(){var e=this.nextRecord();return e&&e.id},prevId:function(){var e=this.prevRecord();return e&&e.id},toContext:function(){return{number:this.index+1,total:this.total(),nextId:this.nextId(),prevId:this.prevId()}}});t.exports=i},{"./viewModel":119}],104:[function(e,t){(function(n){"use strict";var i=e("./index"),r=e("./viewModel"),o=e("../models"),s=e("../actions"),a=e("../../common/values"),l=(e("../valueTimestamp"),e("./bulkChange")),c=e("../../common/strings"),u={showGroupFieldAction:!0,showSearchFieldAction:!0,showSortFieldAction:!0,showReportAction:!0,showDeleteListAction:!0,showSortOption:!0,showGroupOption:!0,showActionColumn:!0,showRecordLink:!0,sortable:!0,isLast:!1},d=r.extend({type:"record-list",cidName:"recordlist",templateKey:function(){return this.type},initialize:function(){_.defaults(this,this.options,u),this.sheet||(this.sheet=this.options.sheet),this.records||(this.records=this.options.records||this.sheet.get("records"));var e=!this.isReadOnlyMode();this.allowTitleRename=e,this.showDeleteListAction=e,this.sortable=this.sortable&&e,this.delayListeners||this.startListeners()},startListeners:function(){this.stopListening(),this.listenTo(this.fieldsCollection(),"add",this.onFieldAdded),this.listenTo(this.fieldsCollection(),"remove",this.onFieldsDeleted),this.listenTo(this.fieldsCollection(),"change reset sort",this.onFieldsChanged),this.listenTo(this.fieldsCollection(),"change:hidden",this.onFieldHiddenChange),this.listenTo(this.records,"add",this.onRecordAdded),this.listenTo(this.records,"change reset",this.onRecordsChanged),this.listenTo(this.records,"remove",this.onRecordRemoved),this.listenTo(this.records,"sort",this.onRecordsSort),this.listenTo(this.records,"duplicateNameChange",function(e){this.trigger("duplicateNameChange",e)}),this.listenTo(this.records,"change:shortId",_.partial(this.trigger,"shortIdChanged"));var e=this.sheet.book();e&&this.listenTo(e,"sheets:change:nameKey",this.onSheetNameKeyChanged),this.listenTo(this.sheet,"change:wrapText",this.onSheetWrapTextChange)},onRecordsSort:function(){this.triggerOnceIdle("recordsSort")},onRecordRemoved:function(e){this.resetRecordsHash(),this.trigger("recordRemoved",e)},hideField:function(e,t){e.setHidden(!0,t)},deleteField:function(e,t){e.destroy(t)},restoreField:function(e,t){this.fieldsCollection().restore(e,t)},showHeaderButtons:function(){return!0},setSheetViewModel:function(e){this.sheetViewModel=e},isWrapped:function(){return this.sheet.get("wrapText")},isReadOnlyMode:function(){return this.sheet.isReadOnlyMode()},isMetadataLocked:function(){return n._getUnderscore(this).soak("sheet.book().isMetadataLocked()")},showFieldNames:function(){return!1},hasRecordAtIndex:function(e,t){var n=this.getRecordsHash();return e.cid in n?n[e.cid]===t:!1},getIndexForRecord:function(e){var t=this.getRecordsHash();return e.cid in t?t[e.cid]:-1},resetRecordsHash:function(){this.recordsHash=null},getRecordsHash:function(){if(this.recordsHash)return this.recordsHash;var e={};return this.records.each(function(t,n){e[t.cid]=n}),this.recordsHash=e},getAllRecords:function(){return this.records.models},remove:function(){this.stopListening()},hasTitles:function(){var e=this.titles();return e?e.length>0:!1},titleUrl:function(){return null},titles:function(){return null},placeholderTitle:_.constant(""),recordsWithSummary:function(){return this.records.models},findMissingNamesForAdd:function(e,t,i){var r={};return n._getUnderscore(t).each(function(t){t.isAnyLink()&&(i&&t.linkedSheet().get("nameFieldMode")!==i||n._getUnderscore(e).each(function(e){var n=e.getValue(t.get("key"));n.eachRef(function(e){e.isMissing()&&(r[e.name]=1)})}))}),_.keys(r)},missingLinkContext:function(e,t){var n=this.findMissingNamesForAdd(e,t,"single").length,i=c["add-missing-link"]();n>1&&(i=c["add-missing-links"]({missingLinkCount:n}));var r="",o=this.findMissingNamesForAdd(e,t).length,s=o-n;if(s>0){var a,l=this.findMissingNamesForAdd(e,t,"multi").length,u=this.findMissingNamesForAdd(e,t,"numeric").length;a=l>0&&u>0?"omitted-formula-and-id-links-for-add":l>0?"omitted-formula-links-for-add":"omitted-id-links-for-add",r=c[a]({formulaCount:l,numericCount:u})}return r||0!==n||(r=c["no-missing-records"]()),{hasMissingLinks:n>0,missingLinkMessage:i,missingLinkTooltip:r}},generateAggregatesContext:function(e){var t=e.getAggregate(),n=this;return _.map(a.aggregates.fieldAggregates,function(i){var r=i.prototype.type,o=n.summaryValue(e,r);return{typeName:i.prototype.typeName,type:r,isCurrent:t===r,summaryValue:o?o.value.displayValue(e.formatOptions()):""}})},summaryValue:function(e,t){if(t=t||e.getAggregate(),0===this.records.length)return null;var n=this.records.map(function(t){return t.getValue(e.get("key"))});return a.computeAggregate(t,[n])},cloneWithRecords:function(e,t){e instanceof o.Record.Collection||(e=new o.Record.Collection(e,{url:this.records.url,comparator:null}),e.parent=this.records.parent),this.isLast=!1,t.records=e,_.defaults(t,this.getCloneDefaults());var n=t.type||this.constructor;return new n(t)},getCloneDefaults:function(){return _.pick(this,"showGroupFieldAction","showSearchFieldAction","showSortFieldAction","showReportAction","showSortOption","showGroupOption","title","sheet","records","fixedKeys","fixedValues","sortable","isLast")},isEqual:function(e){var t=_.omit(this.getCloneDefaults(),"records","sheet"),n=_.omit(e.getCloneDefaults(),"records","sheet");return _.isEqual(t,n)?this.sheet.id!==e.sheet.id?!1:this.records.size()!==e.records.size()?!1:this.records.every(function(t,n){return t===e.records.at(n)}):!1},getFields:function(){return this.fieldsCollection()},editableTitleText:function(){return this.title},hasFixedKeys:function(){return this.fixedKeys&&this.fixedKeys.length>0},fixedValueForRecord:function(e){return this.fixedKey?e.getValue(this.fixedKey):null},fieldsCollection:function(){return this.sheet.get("fields")},sheetHasIntegration:function(){return n._getUnderscore(this).soak("sheet.hasIntegration()")},setLast:function(e){this.isLast=e},fields:function h(){var h=this.fieldsCollection();if(!h)return null;if(h=h.toArray(),this.hasFixedKeys()){var e=this;h=_.reject(h,function(t){return _.any(e.fixedKeys,function(e){return t.id===e})})}return n._getUnderscore(h).reject(function(e){return e.isHidden()})},fieldWithKey:function(e){return this.fieldsCollection().findWhere({key:e})},recordIterator:function(){return new i.RecordIterator({records:this.records})},setupEditing:function(e){var t=this,n=_.uniqueId("editing");this.trigger("startEditing",n),e.queueing=(e.queueing||_.noop).after(function(){t.trigger("startEditing",n)}),e.complete=(e.complete||_.noop).after(function(){t.trigger("endEditing",n)})},saveRecordAttributes:function(e,t,n,i){var r=this;if(i=i||{},this.setupEditing(i),e.isNew()&&(e.set("sheetId",this.sheet.id),e.once("change:_id",function(){r.trigger("recordAdded",e)})),!e.collection){var o=this.sheet.get("records"),s=o.last(),a=s&&s.has("ordinal")?parseInt(s.get("ordinal")):o.length-1;e.set("ordinal",a+1);var l={};o.add(e,l)}this.fixedKeys&&_.each(this.fixedKeys,function(i,o){if(!e.has(i)){var s,a=e.fieldWithKey(i);if(a.isJoin()){var l=a.getJoinRef(e);s=l.valueByAddingRef(r.fixedValues[o]),n[i]=l}else s=r.fixedValues[o],n[i]=e.get(i);t[i]=s,e.set(i,s)}}),e.isNew()&&this.addedRecord(e,i),e.patch(t,n,i)},addedRecord:function(e,t){var n=this;s.performCustomAction({perform:function(){null!=t.index?n.records.add(e,{at:t.index}):n.records.add(e)},revert:function(){t.index=n.records.indexOf(e),n.records.remove(e)},queueTarget:e})},saveBulkChanges:function(e,t,n){var i=this;n=n||{},this.setupEditing(n),this.hasFixedKeys()&&_.each(this.fixedKeys,function(e,n){_.each(t,function(r){r.attributes||(t.attributes={}),r.attributes[e]=i.fixedValues[n],r.previousAttributes[e]=r.record.getValue(e)})}),l.saveBulkChanges(this.sheet,e,t,this,n)},addMissingLinks:function(e,t,i){var r=O({}),s=this;n._getUnderscore(t).each(function(t){if(t.isAnyLink()){var i=t.linkedSheet();if("single"===i.get("nameFieldMode")){{i.get("nameKey")}i.id in r||(r[i.id]={sheet:i,names:[]}),n._getUnderscore(e).each(function(e){var n=e.getValue(t.get("key"));n.isRef()&&n.eachRef(function(e){e.isMissing()&&r[i.id].names.push(e.name)})})}}}),n._getUnderscore(r).each(function(e){var t=[],r=e.sheet,c=r.get("nameKey"),u=(n._getUnderscore(n._getUnderscore(e.names).uniqString()).each(function(e){var n={};n[c]=a.create(e);var i=o.Record.add({sheetId:r.id});i.set(c,e,{noSymrefUpdate:!0}),t.push({record:i,attributes:n,newValues:[]})}),s.sheet===e.sheet?s:null),d=_.clone(i||{});s.setupEditing(d),l.createRecords(r,t,u,d)})},saveChanges:function(e,t){var n=this;_.each(e,function(e){e.isDelete?n.destroyRecord(e.record,t):n.saveRecordAttributes(e.record,e.attributes,e.previousAttributes,t)})},saveFormulaChanges:function(e,t){_.each(e,function(e){var n=e.field;n.saveFormula(e.formula,t)})},moveField:function(e,t,n){var i=this.fields(),r=this.fieldsCollection(),o=i[e],s=r.indexOf(i[t]);r.move(o,s,n)},moveRecord:function(e,t,n){var i={};if(t.before&&e.get("ordinal")<t.before.get("ordinal")?i.ordinal=t.before.get("ordinal"):t.after&&e.get("ordinal")>t.after.get("ordinal")&&(i.ordinal=t.after.get("ordinal")),this.hasFixedKeys()){var r=this;_.each(this.fixedKeys,function(t,n){var o=e.fieldWithKey(t);if(!o.isJoin()||"subsheet"!==r.type){var s,a=r.fixedValues[n];s=o.isJoin()?o.getJoinRef(e):e.getValue(t),s.isEqual(a)||(i[t]=a.toJSON())}})}t.before?this.moveRecordTo(e,t.before,{after:!0,oldRecordList:n.oldRecordList}):this.moveRecordTo(e,t.after,{after:!1,oldRecordList:n.oldRecordList}),this.sheet.get("records").move(e,i,n)},moveRecordTo:function(e,t,n){if(this.records!==this.sheet.get("records")){var i=this;n=n||{};var r=n.oldRecordList||this,o=-1,a=-1;this.records.any(function(n,i){return n===e&&(a=i),n===t&&(o=i,-1!==a&&o--),-1!==o&&-1!==a}),-1===a&&(a=r.records.indexOf(e)),n.after&&(o+=1),s.performCustomAction({perform:function(){r.records.remove(e),i.records.add(e,{at:o})},revert:function(){i.records.remove(e),r.records.add(e,{at:a})},queueTarget:this})}},removeRecord:function(e){this.records.remove(e)},insertRecordAbove:function(e,t){var n=this.getIndexForRecord(e);this.insertRecordAt(e.get("ordinal"),n,t)},insertRecordBelow:function(e,t){var n=this.getIndexForRecord(e)+1;this.insertRecordAt(e.get("ordinal")+1,n,t)},insertRecordAt:function(e,t,n){var i=this.sheet.get("records").insertRecord(e);n=_.defaults(n||{},{index:t}),this.saveRecordAttributes(i,_.clone(i.attributes),{},n)},addField:function(e){e=_.extend({wait:!0},e),this.fieldsCollection().create({},e)},insertField:function(e,t){this.fieldsCollection().insert({},e,_.extend(t,{wait:!0}))},rename:function(){throw new Error("rename-group not implemented")},"delete":function(){throw new Error("delete-group not implemented")},deleteTitle:function(){return this.title},nonFixedFields:function(){return n._getUnderscore(this.sheet.getFields().toArray()).difference(this.fixedFields())},fixedFields:function(){if(!this.fixedKeys)return[];var e=this;return _.map(this.fixedKeys,function(t){return e.sheet.fieldWithKey(t)})},numberOfShownTitles:function(e){if(!this.fixedKeys)return 0;if(!e)return this.fixedKeys.length;var t=0,n=!0;return _.each(this.fixedValues,function(i,r){var o=e.fixedValues[r];i.isEqual(o)&&n?t+=1:n=!1}),this.fixedKeys.length-t},fixedPairs:function(){var e=this;return n._getUnderscore(this.fixedKeys).map(function(t,n){return{field:e.sheet.fieldWithKey(t),value:e.fixedValues[n]}})},destroyRecord:function(e,t){var n=this.records.indexOf(e);t=t||{},this.setupEditing(t);var i=this;s.performCustomAction({perform:function(){var t=e.collection;i.records.remove(e),e.collection=t},revert:function(){var t=e.collection;i.records.add(e,{at:n}),e.collection=t},queueTarget:this}),e.destroy(t),this.trigger("recordDeleted",e)},destroyRecords:function(e,t,n){n=n||{},this.setupEditing(n),l.destroyRecords(this.sheet,e,t,this,n)},queryAutocompleteValues:function(e,t,n,i){if(e.isNameField())return i([]);var r={allowFormula:!this.isMetadataLocked()};e.queryAutocompleteValues(t,n,i,r)},onFieldAdded:function(e){var t=this.fields().indexOf(e);this.trigger("fieldAdded",e,t)},onFieldsChanged:function(e){if(e instanceof o.Field&&e.changed){var t=_.any(e.changed,function(e,t){return"type"!==t});if(!t)return}this.trigger("fieldsChanged",e)},onFieldHiddenChange:function(e){this.trigger("fieldHiddenChange",e)},onFieldsDeleted:function(e){this.trigger("fieldsDeleted",e)},onRecordAdded:function(e){this.resetRecordsHash(),this.trigger("recordAdded",e)},onRecordsChanged:function(e){this.resetRecordsHash(),this.trigger("recordsChanged",e)},onSheetNameKeyChanged:function(e){var t=this.fieldsCollection().any(function(t){return t.linkedSheet()===e});t&&this.trigger("linkedSheetNameKeyChanged"),this.trigger("nameFieldChange")},onSheetWrapTextChange:function(){this.trigger("wrapTextChanged")}});t.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/strings":249,"../../common/values":253,"../actions":2,"../models":47,"../valueTimestamp":85,"./bulkChange":86,"./index":99,"./viewModel":119}],105:[function(e,t){"use strict";{var n=e("./viewModel"),i=e("../../common/values"),r=e("../models/expressions/expression"),o=e("../parser").cursorToken,s=n;t.exports=s.extend({constructorName:"recordViewModel",addUpdateToPatch:function(e,t,n,r,o){t=this.coerceField(t),e=i.create(e);var s=e.displayValue(),a=!this.record.isMetadataLocked();if(a&&(t.isFormula()||"="===s[0]))this.setFormula(t,s,o);else{var l=t.get("key");n[l]=t.resolveValue(e,this.record),r[l]=this.record.getValue(l)}},applyPatch:function(e,t,n){_.isEmpty(e)||(this.record.isTemporary()?(this.record.set(e),this.trigger("madePermanent"),this.record.makePermanent()):(this.record.set(e),this.record.patch(e,t,{error:n("update-field-formula")})))},setFormula:function(e,t,n){e=this.coerceField(e);var i=r.parse(t,e.formulaSheet(),{forbiddenFields:[e]});e.saveFormula(i,{error:n("update-field-formula")})},autocompleteValues:function(e,t){if(t=this.coerceField(t),t.isNameField())return Q([]);var n={allowFormula:!this.record.isMetadataLocked()};return Q.Promise(function(i,r){var s=e.replace(o,"");try{t.queryAutocompleteValues(s,e,i,n)}catch(a){r(a)}})},getInitialEditorValue:function(e){if(e=this.coerceField(e),e.isFormula())return e.editableFormula();if(e.isNameField()&&this.record.usesPlaceholderName())return"";var t=this.record.getDisplayValue(e.get("key"));return e.isAnyLink()&&(t+=", "),t},coerceField:function(e){return _.isString(e)?this.record.fieldWithKey(e):e}}).addProperties("record")}},{"../../common/values":253,"../models/expressions/expression":42,"../parser":74,"./viewModel":119}],106:[function(e,t){(function(n){"use strict";{var i=e("../../common/values"),r=e("../../common/strings"),o=e("../parser"),s=o.cursorToken;t.exports={autocomplete:function(e){var t=e.query,o=e.queryWithCursor,a=e.recordNames,l=e.done;null==o&&(o=t,t=t.replace(s,"")),-1===o.indexOf(s)&&(o+=s);var c=i.splitRefString(o),u=[],d=[],h="",f=!1;_.each(c,function(e){var t=e.indexOf(s);if(-1!==t){f=!0,h=e.slice(0,t);var n=e.slice(t+1).trim();""!==n&&d.push(n)}else f?d.push(e):u.push(e)}),c=_.concat(u,d);var p=new RegExp(r.escapeRegExp(h.trim()),"i"),m=h.toLowerCase(),g=n._getUnderscore(a).chain().filter(function(e){return!_.contains(c,e)&&p.test(e)}).sortBy(function(e){return e=e.toLowerCase(),e===m?0:0===e.indexOf(m)?1:2}).value(),v=g.map(function(e){return{beforeNames:u,value:e,afterNames:d}});return l?void l(v):v}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/strings":249,"../../common/values":253,"../parser":74}],107:[function(e,t){"use strict";{var n=e("./recordList"),i=e("../../common/values"),r=e("../models");t.exports=n.extend({type:"report",initialize:function(){n.prototype.initialize.apply(this,arguments),this.sourceSheet=this.options.sourceSheet,this.showGroupFieldAction=!1,this.showSearchFieldAction=!1,this.showSortFieldAction=!1,this.showDeleteListAction=!1,this.showGroupInsertActions=!1,this.showSortOption=!1,this.showGroupOption=!1,this.showRecordLink=!1,this.sortable=!1,this.title=null,this.fixedValue=null,this.fixedKey=null},deleteField:function(e){e.isReportFormula()&&this.sheet.get("fields").remove(e)},showHeaderButtons:function(e){return e.isReportFormula()},recordsWithSummary:function(){return _.chain(this.records.models).concat(this.summaryRecord).compactNullish().value()},shouldShowExtraRow:function(){return!!this.summaryRecord},summaryValue:function(e){if(this.summaryRecord){var t=this.summaryRecord.getValue(e.get("key")),n=i.createEmpty();if(!e.isReportFormula()){var r=n;n=t,t=r}return{value:t,displayName:n.displayValue()}}return null},insertReportFormula:function(e,t){var n=this.sheet.get("fields"),i=n.length;e&&(i=n.indexOf(e),t.before||i++);var o={name:"",key:_.uniqueId("aggregateField_"),type:"report-formula",expression:r.expressions.Expression.parse('""'),sourceSheet:this.sourceSheet};return n.add(o,{at:i}),n.at(i)},moveField:function(e,t,n){var i=this.sheet.get("fields"),r=(i.filter(function(e){return e.isReportFormula()}),t),o=i.at(e);i.move(o,r,n)}})}},{"../../common/values":253,"../models":47,"./recordList":104}],108:[function(e,t){"use strict";var n=e("./recordList"),i=n.extend({type:"sheet",initialize:function(){this.sheetViewModel=this.options.sheetViewModel,this.sheet=this.sheetViewModel.sheet,this.records=this.sheetViewModel.records(),n.prototype.initialize.call(this)}});t.exports=i},{"./recordList":104}],109:[function(e,t){"use strict";{var n=e("jss");t.exports=BaseObject.extend({propertyNames:function(){return["sheet"]},attach:function(){var e=this.sheet;if(this.style)return this;var t={};return e.get("fields").each(function(n){var i=n.get("width")+"px";t[".col-"+e.id+"-"+n.get("key")]={"min-width":i,width:i,"max-width":i}}),this.style=n.createStyleSheet(t).attach(),this},detach:function(){this.style&&this.style.detach()}})}},{jss:688}],110:[function(e,t){(function(n){"use strict";var i=e("../actions"),r=e("../../common/strings"),o=e("../models"),s=e("./index"),a=e("./viewModel"),l=e("../../common/values"),c=e("../parser").cursorToken,u=e("../errors"),d=a.extend({constructorName:"sheetViewModel",initialize:function(){this.sheet=this.options.sheet,this.book=this.sheet.book(),this.navKey=this.options.navKey,this.queryUpdatesPausedCount=0,this.autocompleter=new o.powerbar.Autocompleter(this.sheet),this._isEditing={},this.frozenFilters=!1,this.markAllNonSticky(),this.listenTo(this.sheet,"change",this.onSheetChanged),this.listenTo(this.sheet,"change:title",this.onSheetTitleChanged),this.listenTo(this.sheet,"fields:enum:all",this.updateRecordListOrder),this.listenTo(this.sheet,"fields:enum:reset",this.updateRecordListOrder),this.listenTo(this.sheet,"fields:reset",this.updateRecordListOrder),this.listenTo(this.sheet,"fields:change",this.updateQueryField),this.listenTo(this.sheet,"records:add",this.updateQueryResults),this.listenTo(this.sheet,"records:change",this.onRecordChanged),this.listenTo(this.sheet,"records:remove",this.updateQueryResults),this.listenTo(this.sheet,"records:reset",this.updateQueryResults),this.listenTo(this.sheet,"navItems:change",this.onNavItemsChanged),this.listenTo(this.sheet,"navItems:reset",this.onNavItemsReset),this.listenTo(this.sheet,"fields:change",this.onFieldsChange),this.listenTo(this.sheet,"fields:change:formatOptions",this.onFieldFormatChange),this.listenTo(this.sheet,"change:description",this.onDescriptionChange),this.listenTo(this.sheet,"navItems:change:description",this.onDescriptionChange);var e=this.sheet.book().currentBookUser();e&&this.listenTo(e,"change:collapseDescriptions",function(){this.trigger("collapseChanged")}),this.navKey&&(this.query=this.sheet.queryForNavKey(this.navKey))},onDescriptionChange:function(){this.trigger("descriptionChanged")},remove:function(){return this.autocompleter.remove(),this.markAllNonSticky(),a.prototype.remove.apply(this,arguments)},onFieldsChange:function(){this.trigger("fieldsChanged"),this.autocompleter.invalidateCache()},onRecordChanged:function(e,t){return t=t||{},e.nonLocalChange||!this.isGrouped()||t.forceQueryUpdate||this.anyNonGroupFieldChanged(e)?void this.updateQueryResults():void this.updateRecordListOrder()},onFieldFormatChange:function(){this.trigger("renderFields")},anyNonGroupFieldChanged:function(e){var t=this.groupFields();return _.any(e.changed,function(e,n){return _.all(t,function(e){return n!==e.get("key")})})},updateQueryField:function(){this.trigger("queryTextChanged")},updateQueryResults:function(){this.query&&(this.cachedRecordLists=null,this.trigger("queryResultsChanged")),this.autocompleter.invalidateCache()},getCommandDescriptors:function(e){return 0===arguments.length&&(e=this.query),e?e.getCommandDescriptors():[]},needsFetch:function(){return!this.book||this.sheet.needsFetch()},load:function(){var e,t=this;e=this.book?this.book.qfetchIfNeeded():o.Book.qfetchBySheetIfNeeded(this.sheet),e.then(function(e){t.book=e,t.trigger("load")}).done()},showGroupInsertActions:function(){return this.canModifyGroups()},allowGroupsSortable:function(){return this.canModifyGroups()},canModifyGroups:function(){if(!this.hasOneGroup())return!1;if(this.isMetadataLocked())return!1;var e=this.firstGroupField();return e.isAnyLink()?!1:e.hasAnyFormula()?!1:!0},beginEditingQueryText:function(){this.originalQuery=this.getNewQuery()},setQueryText:function(e,t){t&&t.capture&&this.beginEditingQueryText(),e=e.replace(c,""),this.markAllNonSticky();var n=this.sheet.query(e);n&&(n.setComplete(),this.query&&n.isEqual(this.query)||(this.query=n,this.trigger("queryResultsChanged"),this.trigger("queryChanged"),t&&t.capture&&this.endEditingQueryText()))},endEditingQueryText:function(){this.originalQuery.isEqual(this.query)||this.action(d.UpdateQuery,this.query,this.originalQuery).push()},updateRecordListOrder:function(){if(this.isGrouped()){var e=this;if(this.groupFields().length>1)return this.updateQueryResults();{var t,i=this.groups();_.pluck(this.cachedRecordLists,"fixedValues")}if(this.canModifyGroups()&&this.groupFields()[0].isEnum()){var r=n._getUnderscore(this.groups()).chain().filter(function(e){return e[0].isError()}).value();t=this.groupFields()[0].get("enum").map(function(e){return[l.create(e.get("name"))]}).concat(r)}else t=o.groupSort(i,this.groupFields(),function(e,t){return e[t]});if(!_.isEqual(i,t)){if(this.cachedRecordLists){var s=[];_.each(t,function(t){var n=e.findOrCreateGroupRecordList(t);s.push(n)});var a=this.groupFields()[0];a.isEnum()||(s=_.filter(s,function(e){return 0!==e.records.length})),n._getUnderscore(s).invoke("setLast",!1);var c=n._getUnderscore(s).last();c&&c.setLast(!0),this.cachedRecordLists=s}this.trigger("groupsChanged")}}},findOrCreateGroupRecordList:function(e){if(!this.isGrouped())throw new Error("Tried to ask for a grouped record list when not grouped");if(!this.cachedRecordLists||0===this.cachedRecordLists.length)throw new Error("Cannot find or create a new group with existing groups");var t=_.find(this.cachedRecordLists,function(t){return t.allValuesMatch(e)});return t?t:this.cachedRecordLists[0].cloneWithRecords([],{fixedValues:e,sheetViewModel:this})},navItem:function(){return this.sheet.navItemWithKey(this.navKey)},navQuery:function(){var e=this.navItem();return e&&e.get("query")},title:function(){if(this.navKey){var e=this.navItem();return e&&e.displayName()}return this.sheet.displayTitle()},editableTitleText:function(){if(this.navKey){var e=this.navItem();return e&&e.get("name")}return this.sheet.get("title")},navItemSearchText:function(){var e=this.navQuery();if(e&&e.powerBarTerms.length>0){var t=this.sheet.queryForNavKey(this.navKey);if(t)return t.stringify()}return""},sortField:function(e,t){if(null==e)throw new Error("null key");var n=this.fieldWithKey(e);if(null==n)throw new Error("field does not exist for key: "+e);var i=this.getNewQuery();i.sortField(n,t),this.updateQuery(i)},toggleSortField:function(e){if(null==e)throw new Error("null key");var t=this.fieldWithKey(e);if(null==t)throw new Error("field does not exist for key: "+e);var n=this.getNewQuery();n.toggleSortField(t),this.updateQuery(n)},addKeyword:function(e){var t=this.getNewQuery();t.addKeyword(e),this.updateQuery(t)},addFilter:function(e,t){var n=this.getNewQuery();n.addFilter(e,t),this.updateQuery(n)},queryString:function(){return this.query?this.query.stringify():""},updateQuery:function(e,t){t=t||{},this.action(d.UpdateQuery,e,this.query,t).do()},queryAutocompletions:function(e,t,n){return this.autocompleter.completions(e,n)},isGrouped:function(){if(!this.query)return!1;if(this.query.isGrouped()){var e=this.groupFields();return e?e.length>0:!1}return!1},hasOneGroup:function(){return this.isGrouped()?1===this.groupFields().length:!1},groupFields:function(){return this.lastResults?this.lastResults.getFixedFields():[]},firstGroupField:function(){return this.lastResults?this.lastResults.firstRecordList().fixedField(0):null},startResultListeners:function(e){var t=e.firstSheet(),n=this.lastResults&&this.lastResults.firstSheet();if(t!==n&&(n&&n.isSynthetic()&&this.stopListening(n),"report"===_.soak(e,"firstRecordList().type"))){var i="fields:change fields:remove fields:add fields:reset fields:sort",r=_.bind(this.onReportFormulaChange,this,t);this.listenTo(t,i,r)}},onReportFormulaChange:function(e){var t=e.get("fields").chain().filter(function(e){return e.isReportFormula()}).map(function(e){return e.get("expression")}).value(),n=this.getNewQuery();n.replaceReportExpressions(t),i.history.capture(function(){this.query.isEqual(n)||this.updateQuery(n,{suppressResultsUpdate:!0})}.bind(this))},pauseQueryUpdates:function(){0===this.queryUpdatesPausedCount&&(this.pausedCachedRecordLists=this.cachedRecordLists||this.recordLists()),this.queryUpdatesPausedCount++},resumeQueryUpdates:function(){if(0===this.queryUpdatesPausedCount)return void console.error("Unbalanced resume query update");if(this.queryUpdatesPausedCount--,0===this.queryUpdatesPausedCount){var e=this.pausedCachedRecordLists;this.pausedCachedRecordLists=null,(e!==this.cachedRecordLists||this.cachedQuery!==this.query)&&(this.cachedRecordLists=null,this.trigger("queryResultsChanged"))}},markRecordsSticky:function(){var e=this.oldRecordLists();e&&n._getUnderscore(e).each(function(e){e.records.each(function(e){e.setSticky()})})},markAllNonSticky:function(){var e=this.sheet.get("records");e&&e.each(function(e){e.setNonSticky()})},recordLists:function(){if(0!==this.queryUpdatesPausedCount)return this.pausedCachedRecordLists;if(this.cachedQuery===this.query&&this.cachedRecordLists)return this.cachedRecordLists;this.isEditing()&&this.markRecordsSticky(),$.invalidateHeightCache();var e;if(this.query)if(this.query.isValid())e=this.query.executePipeline();else{if(this.cachedRecordLists)return this.cachedRecordLists;e=o.powerbar.results.Results.fromSheet(this.sheet)}else e=o.powerbar.results.Results.fromSheet(this.sheet);this.lastResults&&e.reuseRecordLists(this.lastResults),this.startResultListeners(e),this.lastResults=e,e.startListeners();var t=this.oldRecordLists(),i=n._getUnderscore(t).without(e.recordLists);this.stopRecordListListeners(i);var r=n._getUnderscore(e.recordLists).without(t);if(this.startRecordListLiseners(r),this.cachedQuery=this.query,this.cachedRecordLists=e.recordLists,_.invoke(this.cachedRecordLists,"setSheetViewModel",this),_.invoke(this.cachedRecordLists,"setLast",!1),this.isGrouped()){var s=n._getUnderscore(this.cachedRecordLists).last();s&&s.setLast(!0)}return this.setFrozenFilters(this.frozenFilters||n._getUnderscore(this.cachedRecordLists).any(function(e){return e.records.any(function(e){return e.isIncludedDueToSticky()})})),this.cachedRecordLists},oldRecordLists:function(){return this.cachedRecordLists||_.soak(this,"lastResults.recordLists")||[]},resumeFilters:function(){this.frozenFilters&&(this.markAllNonSticky(),this.setFrozenFilters(!1),this.updateQueryResults())},setFrozenFilters:function(e){this.frozenFilters!==e&&(this.frozenFilters=e,this.trigger("frozenFiltersChanged",this.frozenFilters))},startRecordListLiseners:function(e){var t=this;n._getUnderscore(e).each(function(e){t.listenTo(e,"startEditing",function(e){this._isEditing[e]=!0}),t.listenTo(e,"endEditing",function(e){delete this._isEditing[e]})})},isEditing:function(){return 0!==_.keys(this._isEditing).length},stopRecordListListeners:function(e){var t=this;n._getUnderscore(e).each(function(e){t.stopListening(e)})},fieldWithKey:function(e){return this.sheet.fieldWithKey(e)},recordListForValues:function(e){return _.find(this.recordLists(),function(t){return _.all(e,function(e,n){return t.fixedValues[n].isEqual(e)})})},recordsForGroup:function(e){if(!this.isGrouped())return null;var t=this.recordListForValues(e);return t?t.records.models:[]},canSaveSearch:function(e){if(this.frozenFilters)return!1;var t=this.query;e&&(t=this.sheet.query(e));var n=this.navItem();if(n){var i=n.getQuery();if(i.isEqual(t))return!1}return t&&t.hasCommands()&&t.isValid()},recordIterator:function(){var e;return this.isGrouped()?(e=_.map(this.groups(),_.bind(this.recordsForGroup,this)),e=_.flatten(e)):e=this.recordLists()[0].records.models,new s.RecordIterator({records:e})},saveTitle:function(e,t){this.navKey?this.navItem()&&this.navItem().saveIfNeeded("name",e,t):this.sheet.saveIfNeeded("title",e,t)},saveDescription:function(e,t){this.navKey?this.navItem()&&this.navItem().saveIfNeeded("description",e,t):this.sheet.saveIfNeeded("description",e,t)},saveCollapseStatus:function(e,t){var n=this.sheet.book().currentBookUser();n&&n.saveCollapseStatus(e,this.sheet,this.navKey,t)},groups:function(){return _.pluck(this.recordLists(),"fixedValues")},hasGroup:function(e){return _.any(this.groups(),function(t){return _.any(t,function(t){return e.isEqual(t)})})},insertGroup:function(e,t){if(this.hasOneGroup()){if(!this.showGroupInsertActions())throw new Error("Cannot insert a group into a linked field");for(var n=this.groupFields()[0],i=r["new-group-name"](n.attributes),o=_.chain(this.groups()).map(function(e){return e[0]}).filter(function(e){return!e.isError()}).clone().value(),s=i,a=1,c=l.create(i);this.hasGroup(c);)a+=1,i=s+" "+a.toString(),c=l.create(i);
return e>o.length&&(e=o.length),o.splice(e,0,c),this.saveGroups(o,t),e}},indexOfValue:function(e,t){for(var n=0;n<e.length;n++)if(e[n].isEqual(t))return n;return null},moveGroup:function(e,t,i){if(this.canModifyGroups()){var r,o=this.recordLists(),s=_.indexOf(o,e),a=e.fixedField(0);r=a.isEnum()?_.map(a.enumValues(),function(e){return l.create(e)}):_.chain(o).pluck("fixedValues").flatten(!0).value(),r=n._getUnderscore(r).filter(function(e){return!e.isError()});var c=_.clone(r),d=e.fixedValues[0];if(d.isError())throw new u.DisplayableError("error-cannot-move-error-group");r=_.filter(r,function(e){return!e.isEqual(d)});var h=0,f=c[t];if(!f)throw new u.DisplayableError("error-cannot-move-group-below-error-group");s!==t&&(h=s>t?this.indexOfValue(r,f):this.indexOfValue(r,f)+1,r.splice(h,0,d),this.saveGroups(r,i))}},saveGroups:function(e,t){if(!this.canModifyGroups())throw new Error("Cannot save groups with multiple groups or a link group");var n=this.firstGroupField(),i=_.map(e,function(e){return e.displayValue()});n.saveEnums(i,t)},updateSearch:function(e){this.canSaveSearch()&&this.sheet.updateNavItem(this.query,this.navKey,e)},saveSearch:function(e,t){if(this.canSaveSearch()||t){var n=this.sheet.newNavItem(this.query);return this.saveNavItem(n,e)}},getNewQuery:function(){return this.query?this.query.clone():new o.powerbar.Query},hasReportQuery:function(){return this.query?this.query.hasReportCommand():!1},groupBy:function(e){var t=this.fieldWithKey(e),n=this.getNewQuery();n.addOrUpdateGroupBy(t),this.updateQuery(n)},reportOn:function(e){var t=this.fieldWithKey(e),n=this.getNewQuery();n.addReportQuery(t),this.updateQuery(n)},ungroup:function(e){if(this.isGrouped()){var t=this.getNewQuery();t.removeGroupBy(e),this.updateQuery(t)}},removeCustomOrder:function(e,t){var n=_.find(this.groupFields(),function(t){return t.get("key")===e});if(!n)throw new Error("Cannot remove order when not grouping");if(!n.isEnum())throw new Error("Cannot remove order when not grouping by an enum field");n.removeEnum(t)},saveNavItem:function(e,t){return t=_.extend({wait:!0},t),this.sheet.get("navItems").create(e,t),this.navKey?(this.query=this.sheet.queryForNavKey(this.navKey),this.trigger("queryChanged")):this.setQueryText(""),e},onSheetChanged:function(){this.trigger("sheetChanged")},onSheetTitleChanged:function(){this.navKey||this.trigger("titleChanged")},onNavItemsChanged:function(e){e instanceof o.NavItem&&e.id===this.navKey&&("name"in e.changed&&this.trigger("titleChanged"),"query"in e.changed&&this.trigger("navQueryChanged"))},onNavItemsReset:function(){this.navKey&&(this.trigger("titleChanged"),this.updateQueryResults())},toContext:function(){var e=this.sheet.toContext();return e.descriptionConfig=this.getDescriptionConfig(),e},getDescriptionConfig:function(){var e=this.sheet.book();if(!e)return{description:"",expandType:"add",readOnly:!1};var t=e.currentBookUser(),n="block";t&&t.isCollapsed(this.sheet,this.navKey)&&(n="hidden");var i=this.getCurrentDescription();return i||(n="add"),{description:this.getCurrentDescription(),expandType:n,readOnly:this.sheet.isReadOnlyMode()}},getCurrentDescription:function(){return this.navKey&&this.navItem()?this.navItem().get("description"):this.sheet.get("description")},isReadOnlyMode:function(){return this.book.isReadOnlyMode()},isMetadataLocked:function(){return this.book.isMetadataLocked()},groupContextForRecord:function(e){var t=(this.recordLists(),this.sheet),i=this.groupFields(),r=n._getUnderscore(i).invoke("get","key"),o=n._getUnderscore(i).invoke("displayName"),s=n._getUnderscore(r).mapMethod(e,"getDisplayValue"),a=_.chain(i).map(function(e){return t.uniqueDisplayValuesForField(e)}).map(function(e,t){var n=i[t].enumOrderedValueMap();return _.chain(e).sortBy(function(e){var t=n[e];return null==t?e:t}).map(function(e){return{val:e,selected:e===s[t]}}).value()}).value();return _.transposeObject({fieldKey:r,fieldName:o,values:a})}});d.UpdateQuery=i.Action.extend({name:"updateQuery",initialize:function(e,t,n,i){this.viewModel=e,this.query=t,this.previousQuery=n,this.options=i},update:function(e,t){this.viewModel.query=e,t&&(this.viewModel.cachedQuery=e),this.viewModel.trigger("queryTextChanged"),this.viewModel.trigger("queryChanged")},perform:function(){this.update(this.query,this.options.suppressResultsUpdate)},revert:function(){this.update(this.previousQuery)},reperform:function(){this.update(this.query)},queueTarget:function(){return this.viewModel.sheet.queueTarget()}}),t.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/strings":249,"../../common/values":253,"../actions":2,"../errors":9,"../models":47,"../parser":74,"./index":99,"./viewModel":119}],111:[function(e,t){(function(n){"use strict";var i=e("./recordList"),r=e("../actions"),o=(e("../models"),e("../../common/values")),s=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/globalEvents"),a=i.extend({type:"subsheet",templateKey:function(){return this.field.isJoin()?"join-"+this.type:this.type},initialize:function(){this.subsheet=this.options.subsheet,this.record=this.options.record,this.sheet=this.subsheet.get("sheet"),this.fixedKeys=[this.subsheet.get("field").get("key")],this.fixedValues=[o.makeRef(this.record.id)],this.records=this.record.childrenFor(this.subsheet.id),this.showGroupFieldAction=!1,this.showSearchFieldAction=!1,this.showSortFieldAction=!1,this.showReportAction=!1,this.showSortOption=!1,this.showGroupOption=!1,this.sortable=!this.sheet.isReadOnlyMode();var e=this.field=this.sheet.fieldWithKey(this.fixedKeys[0]);if(!e)throw new Error("Field {{key}} of sheet {{sheetId}} does not exist".stencil({key:this.fixedKeys[0],sheetId:this.sheet.id}));this.title=e.isJoin()?e.getOppositeJoinField().displayName():this.sheet.displayTitle(),i.prototype.initialize.call(this),this.allowTitleRename=!this.sheet.isMetadataLocked()},showHeaderButtons:function(){return!this.sheet.isReadOnlyMode()},mirrorField:function(){return this.field.getOppositeJoinField()},mirrorFieldKey:function(){return this.field.isJoin()?this.mirrorField().get("key"):null},startListeners:function(){i.prototype.startListeners.apply(this,arguments),this.field.isJoin()?this.listenTo(this.mirrorField(),"change:name",this.onFieldNameChanged):this.listenTo(this.sheet,"change:title",this.onSheetTitleChanged)},titles:function(){return[this.title]},titleContext:function(){return{text:this.title}},placeholderTitle:function(){return this.field.isJoin()&&this.mirrorField()?this.mirrorField().placeholderName():this.sheet.placeholderTitle()},editableTitleText:function(){return this.field.isJoin()?this.mirrorField().get("name"):this.sheet.get("title")},rename:function(e,t){if(this.field.isJoin()){var n=this.field.getOppositeJoinField(),i=this.sheet;if(i.get("title"))n.saveIfNeeded("name",e,t);else{var o=n.get("name");if(o===e)return;r.performCustomAction({perform:function(){i.saveIfNeeded("title",e,t),n.saveIfNeeded("name",e,t)},revert:function(){i.saveIfNeeded("title","",t),n.saveIfNeeded("name",o,t)},queueTarget:function(){n.queueTarget()}})}}else this.sheet.saveIfNeeded("title",e,t)},"delete":function(e){this.subsheet.destroy(e)},onSheetTitleChanged:function(){this.title=this.sheet.displayTitle(),this.trigger("titleChanged")},onFieldNameChanged:function(){var e=this.field.getOppositeJoinField();e&&(this.title=this.field.getOppositeJoinField().displayName(),this.trigger("titleChanged"))},whereValue:function(){return this.field.isJoin()?null:this.fixedValues[0].toString()},whereField:function(){return this.fixedFields()[0].displayName()},destroyRecord:function(e,t){if(!e.isTemporary())return i.prototype.destroyRecord.apply(this,arguments);var n=this.fixedFields()[0];return n.isJoin()?void this.unlinkRecord(e,t):i.prototype.destroyRecord.apply(this,arguments)},unlinkRecord:function(e,t){var n=this.fixedFields()[0];n=n.getOppositeJoinField();var i=n.getJoinRef(this.record),r=o.makeRef(e.id,e.sheet().id,e.name()),s=i.valueByRemovingRef(r),a={},l={};a[n.get("key")]=s,l[n.get("key")]=i,this.record.patch(a,l,t)},queryAutocompleteValues:function(e,t,n,i){var r=this;e.queryAutocompleteValues(t,n,function(t){e.isNameField()&&(t=_(t).difference(r.records.invoke("name"))),i(t)})},parentSheet:function(){return _.soak(this.fixedFields(),"0.linkedSheet()")},parentSheetTitle:function(){return _.soak(this.parentSheet(),"displayTitle()")},updateRecordRef:function(e){var t=this.field.getOppositeJoinField().get("key"),n=this.record.getValue(t),i=o.makeMultiRef(this.records.invoke("makeRef")),r={},s={};s[t]=n,r[t]=i,this.record.patch(r,s,e)},moveRecord:function(e,t,n){return this.field.isJoin()?(t.before?this.moveRecordTo(e,t.before,{after:!0}):t.after&&this.moveRecordTo(e,t.after,{after:!1}),void this.updateRecordRef(n)):i.prototype.moveRecord.apply(this,arguments)},insertRecordAt:function(e,t,r){var a=r.success||_.noop,l=this,c=this.field.getOppositeJoinField(),u=c.get("key");return s.addInflightChange(),r.error||(r.error=_.noop),r=_.extend({},r,{error:r.error.wrap(function(e){var t=_.rest(arguments);return s.removeInflightChange(),e.apply(this,t)}),success:function(e){var i=arguments,d=c.getJoinRef(l.record)||o.createEmpty(),h=e.makeRef(),f=d.valuesList().slice(0);f=n._getUnderscore(f).reject(function(e){return e.hasRef(h)}),f.splice(t,0,h);var p=o.makeMultiRef(f),m={},g={};g[u]=d,m[u]=p,l.record.patch(m,g,{success:function(){a.apply(this,i)},complete:function(){return s.removeInflightChange()},error:r.error})}}),i.prototype.insertRecordAt.call(this,e,t,r)},saveRecordAttributes:function(e,t,n,r){var o=r.success,s=this,a=e.isTemporary();a&&(t.temporary=!1);var l=e.isNew()||e.isTemporary();if(l){var c=this.sheet.get("nameKey"),u=_.chain(t).keys().without(_.keys(e.noValueKeys)).value(),d=1===u.length&&u[0]===c;if(d){var h=(e.sheet(),t[c]);h=h&&h.displayValue();var f=this.sheet.findRecordByName(h);if(f)return this.records.contains(f)?void this.records.trigger("change",f):void(this.field.isJoin()?this.addRefToRecord(this.mirrorFieldKey(),this.record,f,r):this.addRefToRecord(this.field.get("key"),f,this.record,r))}}return r.success=function(e){return s.sheet.get("records").add(e),a&&(e.trigger("made-permanent",e),e.onNameChange()),o?o.apply(this,arguments):void 0},i.prototype.saveRecordAttributes.apply(this,arguments)},addRefToRecord:function(e,t,n,i){var r=t.getValue(e),o=r.valueByAddingRef(n.makeRef()),s={},a={};return s[e]=o,a[e]=r,t.patch(s,a,i)}});t.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/values":253,"../actions":2,"../models":47,"./recordList":104,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/globalEvents":22}],112:[function(e){"use strict";var t=e("./tip"),n=e("../../views"),i=e("../../models");t.ElementTip.extend({id:"demo",shouldTrigger:function(){return this.context instanceof n.BookListView?i.Account.account.get("hasDemoBooks")?$(".book-link").length?!0:!1:!1:!1},findElement:function(){return $(".book-link:first")}}),t.ElementTip.extend({id:"help",prerequisite:"pbar",shouldTrigger:function(){return!0},findElement:function(){return $(".help-button")},pointerLocation:"top-right"})},{"../../models":47,"../../views":188,"./tip":116}],113:[function(e){"use strict";{var t=e("./tip"),n=e("../../views");e("../../models")}t.Tip.extend({id:"detail",throttled:!1,shouldTrigger:function(){return this.context instanceof n.RecordView},makeTemplateContext:function(){return{name:this.context.model.name()}}}),t.ElementTip.extend({id:"subsheet",prerequisite:"detail",shouldTrigger:function(){return this.context instanceof n.RecordView?!$(".subsheets").is(":empty")&&$(".subsheets tbody tr:not(.empty)").length:!1},makeTemplateContext:function(){var e=this.context.sheet,t=this.context.recordListViews[0].model.sheet,n=t.getFields().find(function(t){return t.isLinkToSheet(e)});return{source:$(".subsheets .record-list-header:first .editable-title").text(),link:n.displayName(),name:this.context.model.name()}},findElement:function(){return $(".subsheets tbody tr:not(.empty)").first().parents("table").find("thead")}})},{"../../models":47,"../../views":188,"./tip":116}],114:[function(e,t){"use strict";t.exports.sheetTips=e("./sheetTips"),t.exports.bookListTips=e("./bookListTips"),t.exports.detailTips=e("./detailTips")},{"./bookListTips":112,"./detailTips":113,"./sheetTips":115}],115:[function(e){"use strict";function t(e){if(!(e instanceof i.SheetView))return!1;var t=e.viewModel;if(!t.sheet.isLoaded())return!1;if(!t.isGrouped())return!1;var n=t.recordLists();return{viewModel:t,recordLists:n}}var n=e("./tip"),i=e("../../views"),r=e("../../models"),o=e("../../../common/strings");n.Tip.extend({id:"sheetview",throttled:!1,shouldTrigger:function(){return this.context instanceof i.SheetView}}),n.ElementTip.extend({id:"shortid",pointerLocation:"top",shouldTrigger:function(){if(!(this.context instanceof i.SheetView))return!1;if(!$(".short-id").length)return!1;var e=_.find($(".table-view tbody tr"),function(e){e=$(e);var t=e.find("td.data").filter(function(e,t){return t.textContent.trim()});return t.length>=4});return this.row=$(e),this.el=$(e).find(".short-id"),this.el.length>0},makeTemplateContext:function(){var e=this.row.data("id"),t=r.Record.find(e);return{name:t.name()}},findElement:function(){return this.el}}),n.Tip.extend({id:"grouped",throttled:!1,shouldTrigger:function(){var e=t(this.context);if(!e)return!1;var n=0,i=0;return _.some(e.recordLists,function(e){return e.records.length&&n++,e.records.length>1&&i++,n>=2&&i>=1})},makeTemplateContext:function(){return{groupField:this.context.viewModel.firstGroupField().displayName()}}}),n.ElementTip.extend({id:"singlegroup",throttled:!1,shouldTrigger:function(){var e=t(this.context);if(!e)return!1;var n=0,i=0;return _.every(e.recordLists,function(e){return e.records.length&&n++,e.records.length>1&&i++,1>=i&&1>=n})&&1===i&&1===n},makeTemplateContext:function(){var e=_.find(this.context.viewModel.recordLists(),function(e){return e.records.length}),t=e.fixedValues[0];return{groupField:this.context.viewModel.firstGroupField().displayName(),value:t}},findElement:function(){return $(".ungroup:first")}}),n.ElementTip.extend({id:"uniquegroup",throttled:!1,shouldTrigger:function(){var e=t(this.context);if(!e)return!1;var n=0;return _.every(e.recordLists,function(e){return e.records.length&&n++,e.records.length<=1})&&n>1},makeTemplateContext:function(){return{groupField:this.context.viewModel.firstGroupField().displayName()}},findElement:function(){return $(".ungroup:first")}}),n.ElementTip.extend({id:"movegroup",prerequisite:"grouped",shouldTrigger:function(){var e=t(this.context);return e?e.viewModel.canModifyGroups()?e.recordLists.length>=2:!1:!1},findElement:function(){return $(".group-title-section:first")}}),n.ElementTip.extend({id:"moverow",prerequisite:"movegroup",pointerLocation:"top",shouldTrigger:function(){var e=t(this.context);return e?e.viewModel.canModifyGroups()?e.recordLists.length<2?!1:_.every(e.recordLists,function(e){return!e.records.length})?!1:e.recordLists[0].sortable:!1:!1},makeTemplateContext:function(){return{groupField:this.context.viewModel.firstGroupField().displayName()}},findElement:function(){return $(".icon-reorder:first")}}),n.ElementTip.extend({id:"pbar",prerequisite:"shortid",shouldTrigger:function(){if(!(this.context instanceof i.SheetView))return!1;var e=this.context.viewModel;if(!e.sheet.isLoaded())return!1;var t=e.recordLists(),n=0;return _.any(t,function(e){return n+=e.records.length,n>=3})},findElement:function(){return $(".search-container")}}),n.ElementTip.extend({id:"+nav",prerequisite:"pbar",shouldTrigger:function(){return $(".save-search").is(":enabled")&&$(".save-search").text().trim()===o["save-search"]()&&$(".search").val()&&!$(".search").is(":focus")},findElement:function(){return $(".save-search")}}),n.ElementTip.extend({id:"link",prerequisite:"shortid",pointerLocation:"top",shouldTrigger:function(){if(!(this.context instanceof i.SheetView))return!1;var e=this.context.viewModel;if(!e.sheet.isLoaded())return!1;var t=e.recordLists(),n=0,r=_.any(t,function(e){return n+=e.records.length});return r?this.hasLinkField():!1},hasLinkField:function(){return!!this.getLinkField()},getLinkField:function(){var e=this.context.viewModel.recordLists()[0],t=e.fields();return _.find(t,function(e){return e.isLink()})},makeTemplateContext:function(){var e=this.getLinkField(),t=e.linkedSheet();return{field:e.displayName(),sheet:t.displayTitle()}},findElement:function(){var e,t=this.getLinkField();return $(".record-list tbody td.data").each(function(n,i){return i=$(i),""!==i.text().trim()?i.data("column").field===t?(e=i,!1):void 0:void 0}),e?e.find("a"):null}})},{"../../../common/strings":249,"../../models":47,"../../views":188,"./tip":116}],116:[function(e,t){(function(n){"use strict";function i(e){p.push(e)}function r(){return l.account.get("showTips")}function o(e){return s(e.prototype.id)}function s(e){return _.contains(l.account.get("shownTips"),e)}function a(e,t){null==t&&(t=!0);var n=l.account,i=n.get("shownTips");t?i.push(e.prototype.id):i=_.without(i,e.prototype.id),n.save({shownTips:i},{patch:!0,error:defaultErrorHandler("update-user")})}var l=e("../../models/account"),c=e("./tipContent"),u=2,d=0,h=0,f=function(){this.initialize.apply(this,arguments)};_.extend(f.prototype,{id:"",pointerLocation:"none",prerequisite:null,throttled:!0,initialize:function(e){this.context=e},unshow:function(){a(this.constructor,!1),d=h},shouldTrigger:function(){throw new Error("shouldTrigger must be overridden by subclasses")},makeTemplateContext:function(){return{}},content:function(){var e=c[this.id],t=this.makeTemplateContext();return _.isFunction(e)?e(t):_.stencil(e,t)}}),t.exports.Tip=f=extendable(f);var p=[];f.extendNoRegister=f.extend,f.extend=function(){var e=this.extendNoRegister.apply(this,arguments);return i(e),e},t.exports.create=function(e){if(!r())return null;var t=6e4/u,n=Date.now()-d<t,i=null,l=_.find(p,function(t){return n&&t.prototype.throttled?!1:t.prototype.prerequisite&&!s(t.prototype.prerequisite)?!1:o(t)?!1:(i=new t(e),i.shouldTrigger()?(h=d,d=Date.now(),!0):(i=null,!1))});return l&&a(l),i},t.exports.ElementTip=f.extendNoRegister({findElement:function(){throw new Error("findElement must be overridden by subclasses")},pointerLocation:"left"}),l.prototype.testTipShowOnly=function(e){var t=_.chain(p).pluck("prototype").pluck("id").without(e).value();this.save({shownTips:t,showTips:!0},{patch:!0,error:defaultErrorHandler("update-user")})},n.dev&&(dev.tips={showOnly:function(e){l.account.testTipShowOnly(e)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../models/account":27,"./tipContent":117}],117:[function(e,t){"use strict";t.exports={demo:"<p>Let us show you what you can do with Fieldbook.</p><b>Click the link</b> to explore an example book.",help:"<p>Need help?</p><p>Click this button to search for an answer to your question.</p>",sheetview:"This is a Fieldbook sheet. You can edit it just like a spreadsheet (go ahead, give it a try!)",shortid:"<b>Click the ID number</b> to view the detail page for “{{name}}”.",grouped:"This is a grouped view. The records have been grouped by “{{groupField}}”.",singlegroup:"<p>This is a grouped view, but all the records have {{groupField}}: “{{value}}”, so they're all in the same group.</p><p>You might find it more useful to group on a different column.</p><p><b>Click this link</b> to ungroup.</p>",uniquegroup:"<p>This is a grouped view, but every record has a different value for “{{groupField}}”.</p><p>You might find it more interesting to group on a column that has only a handful of possible values.</p><p><b>Click this link</b> to ungroup.</p>",movegroup:"Drag and drop groups to put them in a custom order.",moverow:"Drag rows between groups to change their “{{groupField}}” value.",pbar:"<p>This is more than just a search bar—it’s the <b>Power Bar</b>.</p><p>It lets you search, filter, sort, group, and more. Try it out.</p>","+nav":"<p>You can save any combination of search, sort, group, etc. as a link on the left.</p><p><b>Click this button</b> to save this query.</p>",link:"<p>The “{{field}}” column is a link to sheet “{{sheet}}”. Each value links to one record in “{{sheet}}”. </p><p><b>Click the link</b> to go directly to the linked record.</p>",detail:"<p>In Fieldbook, rows are treated like database records. Each has its own detail page.</p><p>This is the page for “{{name}}”. It’s like looking at just one row, laid out vertically.</p>",subsheet:"Here you can see everything from the “{{source}}” sheet where “{{link}}” = “{{name}}.”"}},{}],118:[function(e,t,n){"use strict";var i=e("../../common/strings");n.tutorials=[{title:i["tutorials-subsheets-title"](),videoLink:"https://www.youtube.com/embed/0UR8DApxyRk?rel=0&autoplay=1",thumbnail:"/img/tutorial-subsheets-thumb.png"},{title:i["tutorials-link-tool-title"](),videoLink:"https://www.youtube.com/embed/xTKkVPkhv9Q?rel=0&autoplay=1",thumbnail:"/img/tutorial-link-tool-thumb.png"},{title:i["tutorials-querying-title"](),videoLink:"https://www.youtube.com/embed/jMhULqxACDs?rel=0&autoplay=1",thumbnail:"/img/tutorial-querying-thumb.png"}]},{"../../common/strings":249}],119:[function(e,t){"use strict";var n=(e("backbone"),e("../models/actionable")),i=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/common/delayedTriggerable"),r=t.exports=BaseObject.extend({constructorName:"viewModel",remove:function(){this.stopListening()}});n(r),i(r)},{"../models/actionable":28,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/common/delayedTriggerable":241,backbone:"backbone"}],120:[function(e,t){"use strict";var n=e("../../common/strings"),i=e("./statusBarView"),r=e("./linkNameView"),o=e("../routing");t.exports={handleMigration:function(e,t,o){var s={fieldName:e.displayName(),sheetTitle:t.displayTitle()},a=function(){o.captureActions(function(){e.addLink(t.id,{success:o.showStatus({action:"add-link",context:s,undoable:!0}),error:o.errorHandler("add-link")})}),i.show({text:n["action-working-add-link"]()})};t.nameField()?a():r.promptNameColumn({sheet:t,field:e}).then(function(e){e?t.restoreNameField({success:a}):a()})},extractSupersheet:function(e,t){t.captureActions(function(){var t=e.sheet();t.book().extractSupersheet(t,e.get("key"),{wait:!0,success:function(e){o.router.goToSheet(e.id),this.showStatus({action:"extract-supersheet",context:e,undoable:!0})()}.bind(this),error:this.errorHandler("create-sheet")})}),i.show({text:n["action-working-extract-supersheet"]()})}}},{"../../common/strings":249,"../routing":76,"./linkNameView":192,"./statusBarView":225}],121:[function(e,t){"use strict";var n=e("./view"),i=e("../../common/values"),r=e("../models"),o=n.extend({className:"aggregate-box",initialize:function(){this.render()},render:function(){var e=this.region;if(!e||!e.isMultiselect())return void this.hide();var t=this.createContext(e.getValues());this.$el.html(n.templates.aggregateBox(t)),this.show()},createContext:function(e){var t={localeOptions:r.Account.account.localeOptions()},n=_.chain(i.aggregates.selectionAggregates).map(function(t){return new t(e)}).filter(function(e){return e.canPerform()&&e.hasInterestingData()}).map(function(e){var n=e.perform();return n?{displayName:e.displayName,value:n.displayValue(t)}:void 0}).compactNullish().value();return{aggregates:n}},setRegion:function(e){this.region=e,this.render()}});t.exports=o},{"../../common/values":253,"../models":47,"./view":236}],122:[function(e,t){(function(n){"use strict";{var i=e("./view"),r=i,o=e("../models/record"),s=e("../models/account");e("../viewModels/mockTonic"),t.exports=r.extend({className:"api-explorer",initialize:function(){this.pickProperties(),this.example||(this.example=this.defaultExample())},defaultExample:function(){return this.bookView.isShowingAnySheet()?"list":"get"},render:function(){var e=i.templates.apiExplorer({selectedExample:this.example,readOnly:this.readOnly});this.$el.html(e),this.shouldShowNotebook()?this.renderNotebook():this.renderAccessMessage(),this.$el.applyMetadataLock(this.metadataLocked)},renderNotebook:function(){var e=this,t=_.defaults({clearHtml:!1},this.largeGreySpinnerOptions);this.$info.removeClass("hidden"),this.addSpinner(this.$notebookContainer,t),Q.all(this.qGetTempKeyIfNeeded(),n.tonicPromise).spread(function(t){e.notebook=Tonic.createNotebook({element:e.$notebookContainer[0],onLoad:e.onLoad.bind(e),source:e.getSourceForExample(e.example),env:["FIELDBOOK_USER=jwt","FIELDBOOK_KEY="+t]})}).done(),this.$notebookContainer.addClass("hide-tonic")},renderAccessMessage:function(){this.$info.addClass("hidden");var e=this.getAccessMessageTemplate(),t={bookId:this.book.id},n=i.templates[e](t),r=$("<div>").addClass("access-message");r.html(n);$("<div>").addClass("icon icon-lock").prependTo(r);this.$notebookContainer.append(r)},getAccessMessageTemplate:function(){return this.hasPublic?this.anon?"apiAnonPublic":"apiRecognizedPublic":this.anon?"apiAnonPrivate":"apiRecognizedPrivate"},shouldShowNotebook:function(){return this.readOnly?this.hasPublic?this.examplesUsingGet[this.example]:!1:!0},qGetTempKeyIfNeeded:function(){if(!this.readOnly){if(!this.needsNewTempKey())return this.tempKeyData;var e=this;return this.book.qGetTempApiKeyData().tap(function(t){e.tempKeyData=t})}}.qThen(function(e){return e&&e.jwt}),needsNewTempKey:function(){if(!this.tempKeyData)return!0;var e=6e4,t=45*e,n=this.tempKeyData.expiration-new Date;return t>n},getSourceForExample:function(e){var t=this.templateNameForExample(e);return i.templates[t](this.sourceContext())},templateNameForExample:function(e){return"apiExample"+e.capitalize()},sourceContext:function(){return{apiUrl:"https://api.fieldbook.com/v1/",bookId:this.book.id,sheetSlug:this.sheetSlug||"example_sheet",recordId:this.recordId||1,nameSlug:this.nameSlug||"example_field","public":this.readOnly}},onLoad:function(e){this.$notebookContainer.removeClass("hide-tonic"),this.stopSpinning(this.$notebookContainer),this.examplesUsingGet[this.example]&&e.evaluate()},examplesUsingGet:n._getUnderscore(["list","get"]).makeSet(),events:{"click .example-button":function(e,t){this.example=t.data("example"),this.render()},"click .copy-book":function(){this.bookView.copyBook("show_api=1")}}}).addComponents({notebookContainer:".explorer-container",info:".explorer-info"}).addGetters({bookView:"codeView.bookView",book:"bookView.model",readOnly:"book.isApiReadOnlyMode()",hasPublic:"book.@publicApiAccess",anon:function(){return s.account.isAnonymousUser()},metadataLocked:"book.isMetadataLocked()",submodel:"bookView.submodel",sheet:"submodel.sheet()",sheetSlug:"sheet.titleSlug()",nameSlug:"sheet.nameField().slug()",recordId:"record.@shortId",record:function(){var e=this.submodel;return e instanceof o?e:this.firstSheetRecord},firstSheetRecord:["sheet.@records.at",0]}).addProperties("codeView","example")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../models/account":27,"../models/record":61,"../viewModels/mockTonic":100,"./view":236}],123:[function(e,t){(function(n){"use strict";{var i=e("../baseObject"),r=e("./index"),o=e("../csrf"),s=e("./view");t.exports=i.extend({urlTemplate:"/attachments/{{bookId}}?_csrf={{csrfToken}}&filename={{filename}}&formId={{formId}}",importFile:function(e){(function(){null==e&&(e=this.finished.bind(this))}).call(this);var t=this;r.deferredActions++,$("body").append(s.partials.uploadProgressOverlay({filename:this.filename})),$.ajax({url:this.urlTemplate.stencil({bookId:n._getUnderscore(this).soak("book.id")||"",csrfToken:o.token,filename:this.filename,formId:this.formId}),type:"POST",success:function(n){t.cleanup(),e(null,n.url)},error:function(n,i,r){t.cleanup(),console.error("Error uploading attachment file",n,i,r),e(r)},data:this.formData,contentType:!1,processData:!1,xhr:function i(){var i=$.ajaxSettings.xhr();return i.upload&&i.upload.addEventListener("progress",function(e){if(e.lengthComputable){var n=e.loaded/e.total;n=parseInt(100*n),t.updateProgressBar(n)}},!1),i}})},qImportFile:function(){return Q.ninvoke(this,"importFile")},cleanup:function(){this.removeProgressBar(),r.deferredActions--},removeProgressBar:function(){$("body .upload-progress-overlay").remove()},updateProgressBar:function(e){var t=e/2;$("body .progress-fill").css({width:t+"vw"})}}).addProperties("book","formData","filename","finished","formId")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../baseObject":3,"../csrf":6,"./index":188,"./view":236}],124:[function(e,t){"use strict";var n=e("./geometry"),i=100,r=1,o=100;t.exports={getVerticalDelta:function(e,t){var s;return e>t.bottom-i?(s=1-(t.bottom-e)/i,n.qerp(0,r,o,s)):e<t.top+i?(s=1-(e-t.top)/i,-n.qerp(0,r,o,s)):0}}},{"./geometry":183}],125:[function(e,t){(function(n){"use strict";var i=e("../../common/values"),r=e("./renderAutocompleteValue"),o=e("../parser").cursorToken,s=e("../../common/commas"),a=t.exports=BaseObject.extend({renderAutocompleteValue:function(e){var t=this.delegate;return r(e,t.getQueryValue())},shouldSelectFirstItemOnDisplay:function(e,t,n){var r=this.delegate;if(t&&!e)return!1;var o=r.getQueryValue().toLowerCase();return""===o.trim()?!1:r.autocompleteView.hasActiveItem()?!1:r.autoselectTypes[i.getType(n)]?(n=_.isObject(n)?n.value:String(n),n.toLowerCase().startsWith(o)):!1},getValueWithCursor:function(e,t){var n=(this.delegate,document.getSelection());if(0===e.length)return t+o;var i=e.val();if(!n.rangeCount)return i+o;var r=e[0].selectionStart,s=e[0].selectionEnd;return i.slice(0,r)+o+i.slice(s)},getQueryValue:function(e){var t=this.delegate;if(e){var r=t.getValueWithCursor(),s=i.splitRefString(r);return n._getUnderscore(s).find(function(e){return-1!==e.indexOf(o)}).replace(new RegExp(o+".*"),"")}return t.getRawValue()},acceptValue:function(e,t,n){var i=this.delegate,r=n;if(_.isObject(n)&&(r=s.join(_.concat(n.beforeNames,n.value,n.afterNames))),e&&(r+=", "),t.val(r),e){var o=s.join(_.concat(n.beforeNames,n.value,"")).length;t.setCursorPosition(o),t.trigger("input"),i.autocompleteView.update()}},hasActiveAutocomplete:function(){var e=this.delegate;return e.autocompleteView&&e.autocompleteView.hasActiveItem()},autocompleteValues:function(e,t){var n,i=this.delegate,r=i.getRawValue();return n=t&&e?r.trim():t?o:i.getValueWithCursor(),i.shouldOfferAutocompletions(r,n)?i.getCompletionValuesForQuery(n):[]}}).addProperties("delegate");a.autoselectTypes=n._getUnderscore(["string","ref","multiref"]).makeSet()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/commas":238,"../../common/values":253,"../parser":74,"./renderAutocompleteValue":218}],126:[function(e,t){"use strict";var n=e("./view"),i=e("../keys"),r=e("../parser"),o=n.extend({tagName:"ul",className:"autocomplete",initialize:function(){_.extend(this,_.pick(this.options,"input","onSelect","source","inputSelectorClass"));var e={},t=this;_(["update","hide","onKeyDown"]).each(function(n){e[n]=_.bind(t[n],t)}),this.input.on("input focus select keyup click",e.update),this.input.on("blur",e.hide),this.input.on("keydown",e.onKeyDown),this.setupHintField(),this.cleanUpEvents=function(){var t=this;_.chain(e).values().each(function(e){t.input.off("",e)})}},remove:function(){this.cleanUpEvents(),n.prototype.remove.apply(this,arguments)},setupHintField:function(){if(this.hintField=this.input.data("hintField"),!this.hintField){var e=$("<div>"),t=window.getComputedStyle(this.input.get(0)),n=_.pick(t,"display","top","left","right","bottom");n.position=_.contains(["absolute","static","fixed"],t)?this.input.css("position"):"relative",e.css(n),this.hintField=$("<input>").addClass(this.input.prop("class")).addClass("hint-field").prop("type",this.input.prop("type")).prop("placeholder",""),this.inputSelectorClass&&this.hintField.removeClass(this.inputSelectorClass),this.input.addClass("autocomplete-input"),this.input.data("hintField",this.hintField),this.input.wrap(e),this.input.parent().prepend(this.hintField)
}},events:{"mouseup li":function(e){e.preventDefault(),this.onSelect($(e.target).text())},"mouseenter li":function(e){this.$(".active").removeClass("active"),$(e.target).addClass("active")},"mouseleave li":function(e){$(e.target).removeClass("active")}},show:function(){this.willHide=!1,this.$el.show(),this.input.trigger("autocomplete:change"),this.$el.innerWidth(this.input.innerWidth());var e=this.$el.offset();e.left=this.input.offset().left,this.$el.offset(e)},hide:function(){var e=this;this.willHide=!0,this.hintField.val(""),_.delay(function(){e.willHide&&e.$el.hide(),e.willHide=!1,e.input.trigger("autocomplete:change")},200)},update:function(e){if(!_.contains([i.DOWN,i.UP],e.keyCode)){var t=this,n=Q.defer(),o=this.input.val(),s=this.input.prop("selectionStart"),a=this.input.prop("selectionEnd");o=o.slice(0,s)+r.cursorToken+o.slice(a);var l=this.source(o,n.resolve);null!=l&&n.resolve(l),n.promise.then(function(e){if(e=_.without(e,t.input.val()),t.updateHintField(e[0]),!e.length)return void t.hide();var n=_.map(e,function(e){var t=$("<li>");return t.text(e),t});t.show(),t.$el.empty().append(n),t.input.trigger("autocomplete:change")}).done()}},isInputOverflow:function(){var e=$("<div>"),t=window.getComputedStyle(this.input.get(0));e.css({font:t.font,position:"absolute",width:"auto",top:-9e3}),e.text(this.input.val()),$("body").append(e);var n=e.width()>=this.input.width();return e.remove(),n},updateHintField:function(e){var t=this.input.val();this.isInputOverflow()?this.hintField.hide():this.hintField.show(),this.hintField.val(t.length&&_.hasPrefix(e,t)?e:"")},onSelect:function(e){this.input.val(e),this.input.trigger("input")},onKeyDown:function(e){if(this.$el.is(":visible"))if(e.keyCode===i.DOWN||e.keyCode===i.UP){this.$("li").length>1&&e.preventDefault();var t=this.$("li.active");this.$("li").removeClass("active");var n;e.keyCode===i.DOWN?(n=t.next(),0===n.length&&(n=this.$("li").first())):e.keyCode===i.UP&&(n=t.prev(),0===n.length&&(n=this.$("li").last()));var r=n.text();this.input.val(r),this.input.prop({selectionStart:r.length,selectionEnd:r.length}),this.updateHintField(),t.removeClass("active"),n.addClass("active")}else if(e.keyCode===i.RETURN){if(this.hintField.val()&&this.input.val()!==this.hintField.val()){var o=this.$("li.active");o.length&&this.onSelect(o.text()),this.hide()}}else{var s;if(e.keyCode===i.TAB)s=!0;else if(e.keyCode===i.RIGHT){var a=this.input.get(0);s=a.selectionEnd===a.selectionStart&&a.selectionEnd===a.value.length}var l=this.hintField.val();s&&l&&(e.preventDefault(),this.input.val(l),this.input.trigger("input"))}}});t.exports=o},{"../keys":25,"../parser":74,"./view":236}],127:[function(e,t){(function(n){"use strict";var i=e("../../common/strings"),r=e("../models"),o=e("../routing"),s=e("./view"),a=e("./statusBarView"),l=e("./dropzoneView"),c=e("../viewModels/tutorials"),u=(e("./colorboxify"),e("../errors")),d=e("./titleBarView"),h=e("../viewModels/help/help"),f=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/models/account"),p=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/emailConfirmView"),m=5,g=s.extend({className:"book-list",initialize:function(){this.model=this.model||r.Book.collection;var e={testErrors:o.hasParam("test_errors")};_.extend(e,c),this.$el.html(s.templates.bookList(e)),this.dropzoneView=new l({el:this.el}),a.hide(),this.listenTo(this.model,"add",this.renderBooksDeferred),this.listenTo(this.model,"change",this.renderBooksDeferred),this.listenTo(this.model,"remove",this.onBookRemoved),this.listenTo(this.model,"reset",this.renderBooksDeferred),this.listenTo(this.model,"sort",this.renderBooksDeferred),this.listenTo(this.model,"sync",this.renderBooksDeferred),f.account.isAnonymousUser()||this.listenTo(f.account,"account-verified",this.onVerify),isMobile&&(this.titleBarView=new d({el:this.$(".title-bar")})),this.model.fetchIfNeeded(),this.render()},gatherTitleBarInfo:function(e){e.setMode("bookList")},renderBooks:Tips.displayAfter(function(){function e(){d.$(".book-title").dotdotdot({tolerance:10})}if(o.hasParam("test_deferred_errors"))throw new Error("BOOM!");var t=this.model.map(function(e){var t=e.toContext();return t.extraUsers=Math.max(0,t.users.length-m),t.firstUsers=n._getUnderscore(t.users).head(m),t.lastViewed=n._getUnderscore(e).soak("currentBookUser().@lastAccess"),"1970-01-01T00:00:00.000Z"===t.lastViewed&&delete t.lastViewed,s.partials.bookLink(t)});this.model.isLoaded()&&this.stopSpinning(this.$(".book-list-content"));var i=this.$(".book-links"),r=this.$(".no-books"),a=this.$(".loading"),l=this.$(".add-new-book"),c=this.$(".import-fallback"),u=this.$(".book-list-content");r.hide(),a.hide(),i.hide(),c.hide(),l.hide(),u.css({height:"",overflow:""}),this.model.isLoaded()&&t.length>0?(i.html(t.join("")),i.show(),c.show(),l.show()):this.model.isLoaded()?(r.css({display:"flex"}),c.show()):(u.css({height:300,overflow:"hidden"}),this.addSpinner(u,this.largeGreySpinnerOptions));var d=this;this.isAttached()?e():this.onNextTick(e)}),render:function(){document.title=i.title(),this.renderBooksDeferred(),this.renderPendingBooksBanner(),h.Entry.cancel()},renderPendingBooksBanner:function(){if(this.$pendingBooksBanner.remove(),!f.account.isAnonymousUser()&&!f.isPrimaryEmailConfirmed()){var e=f.currentUser();e.get("sharedBooksPendingVerify")&&this.$el.append(s.templates.pendingBooks(e.toContext()))}},onVerify:function(){this.renderPendingBooksBanner(),this.model.fetch()},events:{"click .test-errors":function(e){throw e.preventDefault(),new Error("BOOM!")},"click .templates-button":function(){o.router.navigate("/templates",{trigger:!0})},"click .import-csv-button":function(){o.router.navigate("/imports/csv",{trigger:!0})},"click .test-displayable-errors":function(e){throw e.preventDefault(),new u.DisplayableError("test-error-text")},"click .test-silent-errors":function(e){e.preventDefault();var t=new Error("Shh!");r.ErrorReport.reportSilently(t)},"click .test-log-only-errors":function(e){e.preventDefault();var t=new Error("SEVERITY TEST LOG MESSAGE");r.ErrorReport.reportSilently(t)},"click .intercom-link":function(e){e.preventDefault(),window.Intercom.public_api.show()},"click .add-new-book":function(e,t){this.$(".add-buttons-container").toggleClass("expanded"),t.blur()},"click .verify-link":function(e){e.preventDefault(),p.qShowIfNeeded({descriptionKey:"sharing"}).fail(function(e){if(e)throw e}).done()}},onBookRemoved:function(e){this.dropzoneView.removeProgressBar();var t=this.$('.book-item[data-id="'+e.id+'"]');t.fadeOut({complete:function(){t.remove()}})}}).addComponents({pendingBooksBanner:".pending-books"});g.deferrableRendering(),t.exports=g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/strings":249,"../errors":9,"../models":47,"../routing":76,"../viewModels/help/help":93,"../viewModels/tutorials":118,"./colorboxify":140,"./dropzoneView":151,"./statusBarView":225,"./titleBarView":231,"./view":236,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/models/account":27,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/emailConfirmView":154}],128:[function(e,t){"use strict";{var n=e("./view");t.exports=n.extend({canLink:_.constant(!0),noLinkReasonKey:_.constant("no-link-reason-default"),bookView:function(){return this.$el.closest(".book-detail").view()},toolbarTitle:function(){return{parent:"(Title not set)"}},scrollBy:function(){}})}},{"./view":236}],129:[function(e,t){(function(n){"use strict";{var i=e("./view"),r=(e("../models"),i);t.exports=r.extend({className:"book-toolbar",initialize:function(){this.bookView=this.options.bookView},render:function(){var e=this.context();this.$el.html(i.templates.bookToolbar(e));var t=this.submodelView();t&&t.renderToolbarTitle&&t.renderToolbarTitle(this,this.$(".toolbar-title")),this.$el.find(".share-book").tooltip({placement:"bottom",container:".book-detail",delay:{show:200,hide:0},title:_.bind(this.bookView.shareTip,this.bookView)})},context:function o(){var o={};return o.canLink=n._getUnderscore(this).soak("bookView.submodelView.canLink()"),o.noLinkReasonKey=n._getUnderscore(this).soak("bookView.submodelView.noLinkReasonKey()"),o.toolbarTitle=this.toolbarTitle(),o.isMetadataLocked=this.book.isMetadataLocked(),o.apiShown=this.bookView.apiShown,o},submodelView:function(){return this.bookView.getSubmodelView()},toolbarTitle:function(){return n._getUnderscore(this).soak("submodelView().toolbarTitle()")}}).addGetters({book:"bookView.model"})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../models":47,"./view":236}],130:[function(e,t){(function(n){"use strict";var i=e("../../common/strings"),r=e("../models"),o=e("./view"),s=(e("./modalView"),e("email-addresses")),a=e("../models/bookUser"),l=e("../env"),c=(e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/models/account"),o.extend({className:"book-users",template:o.templates.bookUsers,inviteAccessLevel:"view",initialize:function(){this.listenTo(this.model,"users:add",this.onBookUserAdded),this.listenTo(this.model,"users:remove",this.onBookUserRemoved),this.listenTo(this.model,"users:reset",this.onBookUsersReset),this.listenTo(this.model,"change:anonymousAccessAllowed",this.updateAnonymousAccess),this.sharedWith=_.invoke(this.model.sharedWith(),"toContext"),mixpanel.track("share_modal_view",{book_user_access_level:this.userBookAccessLevel()})},updateAnonymousAccess:function(){this.render()},input:function(){return this.$(".invite-input")},button:function(){return this.$(".invite-button")},errorMessage:function(){return this.$(".error")},updateButtons:function(){if(0!==this.input().length){var e=this.input().val().trim();e?this.button().removeAttr("disabled"):this.button().attr("disabled","disabled")}},context:function(){return{sharedWith:this.sharedWith,anonymousAccessAllowed:this.model.get("anonymousAccessAllowed"),shareAccessEditable:!this.model.isMetadataLocked(),isLoggedIn:!r.Account.account.isAnonymousUser(),bookUrl:window.location.origin+"/books/"+this.model.id,bookId:this.model.id,accessLevels:n._getUnderscore(a.accessLevels).reject({accessLevel:"owner"}),metadataLocked:this.model.isMetadataLocked(),inviteAccessLevel:a.accessLevelNames[this.inviteAccessLevel]}},render:function(){this.$el.html(this.template(this.context())),this.updateButtons(),this.listenIfNeeded()},listenIfNeeded:function(){this.isListening||(this.isListening=!0,this.on("modal-tab-activate",this.focusInput.bind(this)),this.input().on("input",this.onEdit.bind(this)),this.input().on("paste",this.onPaste.bind(this)))},focusInput:function(){this.input().focus()},onPaste:function(e){var t;try{t=e.originalEvent.clipboardData.getData("text/plain"),t||(t=e.originalEvent.clipboardData.getData("Text"))}catch(n){}t&&(t=t.replace(/;?,?\s*\n/g,", "),this.input().val(t),e.preventDefault()),this.onEdit()},onEdit:function(){var e=this.input(),t=e[0];if(t.setCustomValidity){var n=this.parseEmails(e.val());t.setCustomValidity(n?"":i["invalid-email"]()),this.updateButtons()}},showError:function(e,t){t=_.defaults({},t,{htmlEscape:!0});var n=this.errorMessage();n.removeClass("text-error text-info"),n.addClass("text-error"),n.html(""),t.htmlEscape?n.text(e):n.html(e),n.fadeIn()},hideError:function(){this.errorMessage().fadeOut()},userBookAccessLevel:function(){var e=this.model.currentBookUser();return e?e.get("accessLevel"):"none"},parseEmails:function(e){e=e.replace(/;/g,",").replace(/[\s,]+$/,"");var t=s.parseAddressList(e);if(t)return t;var i,r=n._getUnderscore(e.split(/[\s,]/)).compact();for(t=[];i=r.pop();){var o=s.parseOneAddress(i);if(!o)return null;t.push(o)}return t},submitShareAction:function(e){e=e||{};var t=this.input(),r=(t[0],t.val()),o=this.button(),s=this.parseEmails(r);if(s){s=n._getUnderscore(s).pluck("address");var a=this;a.hideError(),a.addSpinner(o,a.greyButtonSpinnerOptions),a.saving=!0;var l=this.inviteAccessLevel;a.invite(s,{success:function(t){a.saving=!1,n._getUnderscore(t).each(function(e){mixpanel.track("share_book",{book_id:a.model.id,user_id:e.get("user").id,book_user_access_level:a.userBookAccessLevel(),invitee_book_user_access_level:l})}),a.stopSpinning(o),e.success&&e.success(t)},error:function(){a.saving=!1,a.stopSpinning(o);var t=i["error-template"]({action:i["action-add-book-user"]()});a.showAlert(t),e.error&&e.error()}})}},events:{"input .invite-input":function(){this.updateButtons(),this.hideError()},"click .text-error a":function(){this.tabParent.hide()},"submit .invite-form":function(){this.submitShareAction()},"click .remove-user":function(e){var t=$(e.target).closest(".user"),n=this.model.get("users").get(t.data("bookUserId"));n.destroy({error:this.errorHandler("delete-book-user")})},"click .restore-user":function(e){var t=$(e.target).closest(".user");this.model.get("users").restore({id:t.data("bookUserId")})},"click .enable-share":function(e,t){t.blur(),this.setAnonymousAccess(!0)},"click .disable-share":function(e,t){t.blur(),this.setAnonymousAccess(!1)},"focus .share-link-input":function(e,t){t[0].select()},"mouseup .share-link-input":function(e){e.preventDefault()},"click $accessLevelButtons":function(e,t){e.preventDefault(),e.stopPropagation();var n=t.bounds();this.$dropdown.css({top:n.bottom,left:n.left}),this.$dropdown.data("target",t),this.$dropdownToggle.dropdown("toggle")},"click $accessLevelItems":function(e,t){var n=t.text(),i=t.data("accessLevel"),r=this.$dropdown.data("target").find(".access-name");r.text(n);var o=r.closest(".user");if(o.length){var s=o.data("bookUserId"),a=this.users.get(s);a.saveIfNeeded({accessLevel:i},{error:this.errorHandler("change-share-level")})}else this.inviteAccessLevel=i}},setAnonymousAccess:function(e){this.captureActions(function(){this.model.saveIfNeeded("anonymousAccessAllowed",e,{error:this.errorHandler("change-anonymous-access")})})},shareLimit:function(){var e=r.Account.currentUser();return e.get("shareLimit")?e.get("shareLimit"):l.freeShareLimit},canAddUsers:function(e,t){var n=r.Account.currentUser();return n.get("admin")?!0:n.hasActiveOrganization()?!0:e.length+t.length<=this.shareLimit()},invite:function(e,t){t=_.extend({wait:!0},t);var o=r.Account.account.get("email"),s=null,l=this.model.get("users"),c=this.inviteAccessLevel;if(!this.canAddUsers(l,e))return this.showError(i["error-invite-share-limit"]({limit:this.shareLimit()}),{htmlEscape:!1}),t.success&&t.success([]),[];var u=n._getUnderscore(e.map(function(e){if(e.toLowerCase()===o.toLowerCase())return void(s=i["error-invite-self"]());var t=l.find(_.soaker("getUser().hasEmail",e));if(t)return void(s=i["error-invite-existing"](t.getUser().attributes));var n=new r.User({email:e});return new a({user:n,accessLevel:c})})).compactNullish();return u.length?(l.bulkCreate(u,t),u):(s&&this.showError(s),t.success&&t.success([]),[])},onBookUserAdded:function(e){this.sharedWith.push(e.toContext()),this.render()},onBookUserRemoved:function(e){var t=_.findWhere(this.sharedWith,{_id:e.id});t.removed=!0,this.render()},onBookUsersReset:function(){var e=this.sharedWith;_.each(this.model.sharedWith(),function(t){var n=_.findWhere(e,{_id:t.id});if(n){var i=e.indexOf(n);e[i]=t.toContext()}else e.push(t.toContext())}),this.render()}}).addComponents({dropdown:".access-level.dropdown",dropdownToggle:".access-level.dropdown .dropdown-toggle",accessLevelItems:".access-level-item",accessLevelButtons:".access-level-button"}).addGetters({book:"model",users:"book.@users"}));t.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/strings":249,"../env":8,"../models":47,"../models/bookUser":32,"./modalView":203,"./view":236,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/models/account":27,"email-addresses":657}],131:[function(e,t){(function(n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var r=(e("inflection"),e("spin"),e("../../common/strings")),o=e("../models"),s=e("../actions"),a=e("../viewModels"),l=e("../routing"),c=e("../csrf"),u=e("../../common/constants"),d=e("../keys"),h=e("./view"),f=e("./sheetView"),p=e("./bookUsersView"),m=e("./modalTabView"),g=e("./confirmLeaveView"),v=e("./statusBarView"),b=e("./aggregateBoxView"),y=e("./linkView"),w=e("./progressBarView"),x=e("./colorboxify"),k=e("../performance"),S=(e("jss"),e("../viewModels/sheetStyle.js")),C=e("./pendingSheetView"),E=e("./errorSheetView"),I=e("../bookSocket.js"),R=e("./manageApiView"),T=e("../globalEvents"),A=e("./errorAlertView"),M=e("./recordView"),F=e("./onboardingView"),V=e("./oauthWindowView"),L=e("./csvGenerator"),N=e("./bookToolbarView"),D=e("./emailConfirmView"),P=e("./geometry"),j=(e("./lazyRecordListView"),e("./mobileSheetView")),B=e("./mobileRecordView"),U=e("./mobileBookNavView"),H=(e("../tutorials/tutorial"),e("./tutorialIntroView")),z=e("./tutorialCompleteView"),q=e("./csvPreflightView"),W=(e("./apiExplorerView"),e("./codeView")),K=e("./formShareView"),G=(e("../env"),300),Y=1e3,J=h.extend({className:"book-detail",SheetView:isMobile?j:f,RecordView:isMobile?B:M,initialize:function(){this.submodel=this.options.submodel,this.navKey=this.options.navKey,this.linkViewInfo=O({}),this.sheetStyles={},this.$el.html(h.templates.book(this.context())),this.$nav=this.$(".book-nav"),this.$submodelContent=this.$(".submodel-content"),this.aggregateBoxView=new b,this.initMobileNav(),this.needsOnboardingView()&&(this.onboardingView=new F({book:this.model})),this.hasTutorial()&&this.startTutorial(),this.listenForUndo(),this.listenTo(s.history,"do undo redo reset",this.updateUndoActions),this.listenTo(T,"badServerResponseVersion",this.onBadServerResponseVersion),this.activeTableView=null,v.hide(),this.load()},initMobileNav:function(){if(isMobile){var e=this.mobileNav=new U({bookView:this});this.$(".book-container").prepend(e.el),e.render()}},context:function X(){var X=this.model.toContext(),e="none",t=!0;if(this.model.hasIntegration()){var n=this.model.getIntegration(),i=n.get("type");e=r["integration-name-"+i](),t=n.get("validOauth")}return _.extend(X,{isLoggedIn:!o.Account.account.isAnonymousUser(),logoutUrl:"/logout?redirect=/books/"+this.model.id,type:e,hideOauthBanner:t,apiReadOnly:this.model.isApiReadOnlyMode()})},remove:h.prototype.remove.before(function(){this.removeSubviews("submodelView","apiView","onboardingView","toolbar","mobileNav"),this.socket&&this.socket.close(),n.bookSocket=null,this.detachAllSheetStyles(),h.prototype.remove.apply(this,arguments)}),gatherTitleBarInfo:function(e){var t=this;e.setMode("book"),e.addContextTransform(function(e){e.isReadOnlyMode=t.model.isReadOnlyMode(),e.isMetadataLocked=t.model.isMetadataLocked(),e.isLoggedIn=!o.Account.account.isAnonymousUser(),e.logoutUrl="/logout?redirect=/books/"+t.model.id}),e.setCustomTitleRender(function(e,n){t.renderBookTitle(e,n),t.delegateEventsFromElement(n,t.titleEvents)})},$bookTitle:function(){return $(".section-title .book-section-title")},copyBook:function(e){var t=this.$bookTitle().find(".dropdown");t.addClass("has-spinner"),this.addSpinner(t,this.greyButtonSpinnerOptions);var n=this;this.model.copy({wait:!0,success:function(i){n.stopSpinning(t),t.removeClass("has-spinner"),l.router.flash({editBookTitle:!0}).goToBook(i.id,e)},error:this.errorHandler({action:"copy-book",spinner:t}).before(function(){t.removeClass("has-spinner")})})},titleEvents:{"click .book-title":function(e){$(e.target).hasClosest(".book-menu, .book-actions-menu")||(e.preventDefault(),this.$editableBookTitle.focus())},"click .export-csv:not(.disabled)":function(e){if(e.preventDefault(),this.isShowingAnySheet()){var t=this.makeCSVGenerator(),n=this.$bookTitle().find(".csv-download-form");n.attr("action","/bounce/download?filename={{filename}}&_csrf={{csrfToken}}".stencil({filename:t.csvFilename(),csrfToken:c.token})),n.find(".csv-textarea").val(t.csvData()),n[0].submit()}},"click .manage-api":"onClickManageApi","click .copy-book":function(e){e.preventDefault(),this.copyBook()},"click .leave-book":function(e){var t=this,n=this.model;e.preventDefault();var i=$(e.target).closest(".leave-book");if(!i.is(".disabled")){var r=this.showStatus({action:"leave-book",context:n});this.confirmLeaveView=new g({onConfirm:function(){n.leave({wait:!0,success:function(){l.router.goToBookList(),r()},error:t.errorHandler("leave-book")})}}),this.confirmLeaveView.show()}},"click .delete-book":function(e){this.captureActions(function(){e.preventDefault();var t=$(e.target).closest(".delete-book");if(!t.is(".disabled")){var n=this.showStatus({action:"delete-book",context:this.model,undoable:!0});this.model.destroy({wait:!0,success:function(){l.router.goToBookList(),n()},error:this.errorHandler("delete-book")})}})},"click .undo":function(e){e.preventDefault(),this.undo()},"click .redo":function(e){e.preventDefault(),this.redo()},"focus .editable-book-title":function(e,t){this.onNextTick(function(){t.text(this.model.get("title")),t.selectText()})},"blur .editable-book-title":function(e,t){this.captureActions(function(){var e=t.text().trim();this.model.saveIfNeeded("title",e,{error:this.errorHandler("update-title")}),this.updateNav()})},"keydown .editable-book-title":function(e,t){e.which===d.RETURN&&(e.stopPropagation(),t.blur())},"click .update-integration":function(){var e=this,t=this.model.getIntegration();t.get("validOauth")?t.refresh():e.repairOauth();var n=r["integration-updating-status"](this.model.toContext());v.show(n)}},updateNav:function(){T.trigger("updateNav")},renderBookTitle:function(e,t){var n=this.model.toContext({deep:!1}),i=o.Account.account,s=this.sheet();s&&(n.sheetId=s.id),n.titlePlaceholder="(no title)",n.showSave=l.hasParam("save_book")||i.get("admin"),n.isLoggedIn=!o.Account.account.isAnonymousUser(),n.isReadOnly=this.model.isReadOnlyMode(),n.isMetadataLocked=this.model.isMetadataLocked(),n.canRefreshIntegration=this.model.hasIntegration(),n.canExportView=this.isShowingAnySheet(),!n.title&&this.readOnlyTitle&&(n.title=this.readOnlyTitle,n.isReadOnly=!0,n.noActionMenu=!0);var a=document.activeElement===this.$editableBookTitle[0];t.html(h.partials.bookSectionTitle(n)),t.applyReadOnly(this.model.isReadOnlyMode()),t.applyMetadataLock(this.model.isMetadataLocked()),this.updateUndoActions(),t.find(".book-actions-menu .disabled").each(function(e,t){var n,i=$(t);i.is(".leave-book")&&(n=r["disabled-reason-leave-book"]()),i.is(".delete-book")&&(n=r["disabled-reason-delete-book"]()),i.is(".export-csv")&&(n=r["disabled-reason-export-csv"]()),n&&i.tooltip({title:n,placement:"right",container:".book-detail"})}),t.autoTooltip({placement:"right",container:"body"}),a&&this.$editableBookTitle.focus()},addSheetSpinnerOptions:_.defaults({color:"hsl(120, 50%, 30%)"},h.prototype.greyButtonSpinnerOptions),modelPromise:function(){return this.model?this.model.qfetchIfNeeded():this.sheetPromise().then(function(e){return o.Book.qfetchBySheetIfNeeded(e)})},attachStylesForSheet:function(e){this.sheetStyles=this.sheetStyles||{},this.sheetStyles[e.id]||(this.sheetStyles[e.id]=new S({sheet:e}).attach())},detachStylesForSheet:function(e){var t=this.sheetStyles[e.id];t&&t.detach(),this.sheetStyles[e.id]=null},updateStyleOnFieldChange:function(e){this.detachStylesForSheet(e),this.attachStylesForSheet(e)},detachAllSheetStyles:function(){var e=this,t=this.model.get("sheets");t&&t.each(function(t){e.detachStylesForSheet(t)})},attachAllSheetStyles:function(){var e=this,t=this.model.get("sheets");t&&t.each(function(t){e.attachStylesForSheet(t)})},sheet:function(){return this.submodel instanceof o.Sheet?this.submodel:this.submodel instanceof o.Record?this.submodel.sheet():void 0},sheetPromise:function(){return this.submodel instanceof o.Sheet?Q(this.submodel):this.submodel instanceof o.Record?this.submodel.qfetchIfNeeded().invoke("sheet"):void 0},load:function(){var e=this;this.incrementDeferredAction(),this.model.needsFetch()&&(n.isLoading=!0),this.modelPromise().then(function(t){e.$el.isAttached()&&(e.loadingFinished=!0,e.model=t,e.listenTo(t,"change",e.render),e.listenTo(t,"change:title",e.updateNav),e.listenTo(t,"sheets:add",e.onSheetAdded),e.listenTo(t,"sheets:change",e.render),e.listenTo(t,"sheets:remove",e.onSheetRemoved),e.listenTo(t,"sheets:sort",e.render),e.listenTo(t,"sheets:reset",e.onSheetsReset),e.listenTo(t,"integrations:change",e.onIntegrationUpdateDeferred),e.listenTo(t,"sync",e.render),e.listenToAllSheets(),e.socket=new I({book:e.model}),n.bookSocket=e.socket,e.listenTo(e.socket,"bookChange",e.onSocketBookChange),e.listenTo(e.socket,"badVersion",e.onSocketBadVersion),e.attachAllSheetStyles(),n.isLoading&&(n.isLoading=!1,n.loadingDoneTimestamp=new Date,T.trigger("initialLoad")),e.needsOnboardingView()&&(e.onboardingView=new F({book:e.model})),e.render())}).fail(function(t){e.renderError(t)}).finally(function(){e.decrementDeferredActions()}).done()},needsOnboardingView:function(){return this.onboardingView?!1:this.shouldHaveOnboardingView()},shouldHaveOnboardingView:function(){return this.model.isReadOnlyMode()?!1:this.model.hasIntegration()&&"eventbrite"===this.model.getIntegrationType()?!0:!1},tutorialSlug:function(){return n._getUnderscore(this).soak("model.@tutorialSlug")},hasTutorial:function(){return null!=this.tutorialSlug()},startTutorial:function(){if(!this.model.get("tutorialComplete")){var e=this.tutorialSlug(),t=new H({slug:e});t.show(),this.listenToOnce(T,"endHelp",this.onTutorialComplete)}},onTutorialComplete:function(){var e=this.tutorialSlug(),t=new z({slug:e});this.model.saveIfNeeded({tutorialComplete:!0},{error:this.errorHandler("update-book")}),t.show()},listenToSheet:function(e){this.stopListening(e),this.listenTo(e,"navItems:add",this.renderNavDeferred),this.listenTo(e,"navItems:change",this.renderNavDeferred),this.listenTo(e,"navItems:remove",this.onNavItemRemoved),this.listenTo(e,"navItems:sort",this.renderNavDeferred),this.listenTo(e,"navItems:reset",function(){var e=this;e.model.waitForSheets().then(function(){e.renderNavDeferred()}).done()}),this.listenTo(e,"fields:sort",this.updateStyle),this.listenTo(e,"fields:add",this.updateStyle),this.listenTo(e,"fields:reset",this.updateStyle),this.listenTo(e,"fields:change:width",this.updateStyle)},listenToAllSheets:function(){var e=this.model.get("sheets");e&&e.each(_.bind(this.listenToSheet,this))},selectionChanged:function(e,t){(null!=t||e===this.activeTableView)&&(this.activeTableView=e,this.aggregateBoxView.setRegion(t))},showBook:function(){this.submodel=null,this.navKey=null,this.render(),this.trigger("afterAnimate"),this.trigger("didShowSheet")},showSheet:function(e,t){this.submodel=e,this.navKey=t;var n=this;this.isShowingSheet(this.submodel,this.navKey)?(this.submodelView.renderSavedSearchQueryDeferred(),this.trigger("didShowSheet")):(this.once("afterAnimate",function(){n.trigger("didShowSheet")}),this.render())},showRecord:function(e){this.submodel=e,this.navKey=null,this.render()},showShareModalIfConfirmed:function(){var e=this,t=arguments,n=o.Account.currentUser(),r=Q();n&&(r=D.qShowIfNeeded({descriptionKey:"sharing"})),r.then(function(){e.showShareModal.apply(e,i(t))},function(e){if(e)throw e}).done()},showShareModal:function(e){(function(){null==e&&(e={form:!1})}).call(this);var t=[{label:r["share-book-label"](),view:new p({model:this.model})}];t.push({label:r["share-form-label"](),view:new K({navItem:this.currentNavItem()})});var n=new m({title:r["share-title"](),titleIcon:"share",tabs:t,modalOptions:{backdrop:"static",keyboard:!1}});n.show(),e.form&&n.activateTabAtIndex(1)},isOnSheet:function(){return this.submodelView instanceof this.SheetView},isOnForm:function(){return this.isOnSheet()?Boolean(n._getUnderscore(this).soak("currentNavItem().isForm()")):!1},currentNavItem:function(){if(this.navKey){var e=this.submodel;if(e)return e.navItemWithKey(this.navKey)}},updateLoadingElements:function(){this.loadingFinished?(n._getUnderscore(this).soak("spinnerContainer.remove()"),this.spinnerContainer=null,n._getUnderscore(this).soak("smokescreen.remove()"),this.smokescreen=null):(this.spinnerContainer||(this.spinnerContainer=$("<div>").appendTo(this.$el),this.spinnerContainer.addClass("book-load-spinner"),this.addSpinner(this.spinnerContainer,this.largeGreySpinnerOptions)),this.smokescreen||(this.smokescreen=$('<div class="loading-smokescreen"></div>').appendTo("body")))},render:function(){if(this.model&&this.model.isLoaded()){var e=this;this.updateLoadingElements(),this.loadingFinished&&this.model.waitForSheets().thenImmediate(function(){if(e.$el.isAttached()){this.updateLoadingElements(),this.submodel||this.model&&this.model.has("sheets")&&(this.submodel=this.model.get("sheets").first()),this.renderSubmodel(),this.renderToolbar(),this.renderNav(),this.renderSelectionAggregates(),this.renderOnboardingPane();var t=this.model.templateVideoLink();if(t&&!this.model.get("hideVideoLink")){var n=this.$(".tutorial-banner-container");this.afterWait(100,function(){n.removeClass("hidden-banner")}),x(n.find(".play"),{href:t})}l.hasParam("show_api")?this.showApiView():l.hasParam("show_codelets")&&this.showCodeletsView()}}.bind(this)).done()}},renderOnboardingPane:function(){this.onboardingView&&(this.onboardingView.render(),this.onboardingContainer||(this.$el.append(this.onboardingView.$el),this.onboardingContainer=this.$("onboarding-container")))},renderSelectionAggregates:function(){this.aggregateBoxView.render()},tabForSheet:function(e){var t='.sheet-tab[data-id="'+e.id+'"]';return isMobile?this.mobileNav.$(t):this.$nav.find(t)},itemForNavItem:function(e){var t=this.tabForSheet(e.sheet());return t.find('.nav-item[data-key="'+e.id+'"]')},markCurrentNavActive:function(){this.$nav.find(".sheet-tab,.sheet-link,.nav-item-link").removeClass("active"),isMobile&&this.mobileNav.clearActive();var e=this.sheet();if(e){var t=this.tabForSheet(e);if(t.addClass("active"),e===this.submodel){if(!this.navKey)return void t.find(".sheet-link").addClass("active");var n=t.find('[data-key="'+this.navKey+'"]');n.find(".nav-item-link").addClass("active")}}},shareTip:function(){var e=this.model.sharedWith();if(0===e.length)return r["sheet-sharing-private"]();if(1===e.length){var t=e[0];if(t.isMissing())return r["sheet-sharing-one"]({nameOrEmail:t.get("placeholderEmail")});var n=t.get("user");return r["sheet-sharing-one"]({nameOrEmail:n.get("name")||n.get("email")})}return r["sheet-sharing-multiple"]({count:e.length})},updateUndoActions:function(){var e=$(".book-section-title .book-actions-menu");s.history.canUndo()?e.find(".undo").removeClass("disabled"):e.find(".undo").addClass("disabled"),s.history.canRedo()?e.find(".redo").removeClass("disabled"):e.find(".redo").addClass("disabled")},renderNav:function(){var e=this;if(isMobile)return this.mobileNav.render(),void this.markCurrentNavActive();var t=this.model.toContext();if(t.linkViewInfo=this.linkViewInfo,this.$nav.html(h.partials.bookNav(t)),this.$nav.applyReadOnly(this.model.isReadOnlyMode()),this.$nav.applyMetadataLock(this.model.isMetadataLocked()),this.$(".selection-aggregate-container").append(this.aggregateBoxView.$el),this.markCurrentNavActive(),!this.model.isMetadataLocked()){var n=this.$nav.find(".sheet-tabs");n.sortable({items:"> .existing-sheet",axis:"y",tolerance:"pointer",update:_.bind(this.onTabMoved,this)}),n.each(function(t,n){n=$(n);var i=n.find(".sheet-tab-items");i.sortable({items:"> .nav-item",axis:"y",tolerance:"pointer",update:e.onNavItemMoved.bind(e)})})}this.$nav.autoTooltip({placement:"right",container:"body"}),this.updateNav()}.wrap("restoreNavScroll"),restoreNavScroll:function(e){var t=n._getUnderscore(arguments).tail(),i=this.$(".book-nav-scroll").prop("scrollTop"),r=e.apply(this,t);return this.$(".book-nav-scroll").prop("scrollTop",i),r},updateStyle:function(){var e=this.model.get("sheets");e&&e.each(_.bind(this.updateStyleOnFieldChange,this)),this.displayTip()},isShowingSheet:function(e,t){if(!(this.submodelView instanceof this.SheetView))return!1;var n=this.submodelView.viewModel;return n.sheet===e&&n.navKey===t},isShowingRecord:function(e){return _.soak(this,"submodelView.isRecordView")?this.submodelView.model===e:!1
},renderSubmodel:function(){if(!this.animating&&!this.hasProgressBar){var e,t;if(this.submodel instanceof o.Sheet){if(this.isShowingSheet(this.submodel,this.navKey))return;"failed"===this.submodel.get("status")?e=new E({sheet:this.submodel}):this.submodel.get("processing")?(this.hasProgressBar=!0,e=new C({sheet:this.submodel}),this.pollForProcessingFinished()):(t=new a.SheetViewModel({sheet:this.submodel,navKey:this.navKey}),e=new this.SheetView({viewModel:t}))}else if(this.submodel instanceof o.Record){if(this.isShowingRecord(this.submodel))return;t=new a.RecordViewModel({record:this.submodel}),e=new this.RecordView({viewModel:t})}this.animateToNewView(e),this.performanceMarkRender()}},renderToolbar:function(){isMobile||(n._getUnderscore(this).soak("toolbar.remove()"),this.toolbar=new N({bookView:this}),this.$(".submodel-content").before(this.toolbar.el),this.toolbar.render())},pollForProcessingFinished:function(){function e(){t.submodelView.update(),t.pollForProcessingFinished()}if(this.isAttached()){if("failed"===this.submodel.get("status")||!this.submodel.get("processing"))return this.hasProgressBar=!1,this.loadingFinished=!1,this.updateLoadingElements(),void this.load();var t=this;this.afterWait(Y,function(){t.submodel.fetch({data:$.param({head:!0}),success:e,error:e})})}},performanceMarkRender:function(){var e="submodel-render";this.submodelView&&this.submodelView.className&&(e=this.submodelView.className),k.getInstance().markSincePageLoad(e)},stopAnimating:function(){this.animating=!1;var e=_.mapObject(this.transitionCss(0,0),function(){return""}),t=["transform","opacity"];n._getUnderscore(t).each(function(t){e[t]=""}),this.submodelView.$el.css(e),this.$(".submodel-content").removeClass("no-fast-scroll-bars"),this.submodelView.trigger("transition-done"),this.submodelView.unpauseRender&&this.submodelView.unpauseRender(),this.decrementDeferredActions(),this.trigger("afterAnimate")},viewChangeNoAnimation:function(e){e&&e.remove(),this.decrementDeferredActions(),this.submodelView&&(this.submodelView.$el.css({opacity:1}),this.submodelView.trigger("transition-done"),this.trigger("afterAnimate"))},transitionCss:function(e,t){return{position:"absolute",top:0,left:0,width:e,height:t,maxHeight:"100vh",overflow:"hidden"}},viewChangeSlideSheet:function(e){var t=this;if(isMobile)return this.viewChangeNoAnimation(e);var n=e.$el.width(),i=e.$el.height(),r=e&&e.getSheet(),o=this.submodelView&&this.submodelView.getSheet(),s=this.model.get("sheets").indexOf(r),a=this.model.get("sheets").indexOf(o),l=a>s,c=l?i:-i;J.lastTransitionAnimation=l?"slideUp":"slideDown",this.animating=!0,this.submodelView.pauseRender&&this.submodelView.pauseRender(),this.$(".submodel-content").addClass("no-fast-scroll-bars"),this.onNextTick(function(){var r=this.transitionCss(n,i);this.submodelView.$el.css(_.defaults({opacity:1,transform:"translateY({{y}}px)".stencil({y:c})},r)),e.$el.css(_.defaults({transform:"translateY(0)"},r)),this.incrementDeferredAction(),e.$el.transition({transform:"translateY({{y}}px)".stencil({y:-c})},{duration:G,complete:function(){t.decrementDeferredActions()}}),this.incrementDeferredAction(),this.submodelView.$el.transition({transform:"translateY(0)"},{duration:G,complete:function(){e.remove(),t.stopAnimating(),t.decrementDeferredActions()}})})},viewChangeSlideLeftRight:function(e,t){t=t||{};var n=this,i=this.$submodelContent.width(),r=this.$submodelContent.height();J.lastTransitionAnimation=t.left?"slideInLeft":"slideInRight",this.animating=!0,this.submodelView.pauseRender&&this.submodelView.pauseRender(),this.$(".submodel-content").addClass("no-fast-scroll-bars"),this.onNextTick(function(){var o=this.transitionCss(i,r),s=t.left?-i:i;this.submodelView.$el.css(_.defaults({opacity:1,transform:"translateX({{x}}px)".stencil({x:s})},o)),e.$el.css(_.defaults({transform:"translateX(0)"},o)),this.incrementDeferredAction(),e.$el.transition({transform:"translateX({{x}}px)".stencil({x:-s})},{duration:G,complete:function(){n.decrementDeferredActions()}}),this.incrementDeferredAction(),this.submodelView.$el.transition({transform:"translateX(0)"},{duration:G,complete:function(){e.remove(),n.stopAnimating(),n.decrementDeferredActions()}})})},animateToNewView:function(e){if(J.lastTransitionAnimation="none",!e)return this.submodelView&&(this.stopListening(this.submodelView),this.submodelView.remove()),void(this.submodelView=null);this.submodelView&&this.submodelView.$el.detach(),this.listenTo(e,"selectionChanged",this.selectionChanged),this.listenTo(e,"navShouldUpdate",function(){var e=this;e.renderNavDeferred(),e.renderToolbarDeferred()}),e.$el.css({opacity:0}),this.$submodelContent.append(e.$el),e.render(),this.submodelView&&this.$submodelContent.prepend(this.submodelView.el);var t=n._getUnderscore(this).soak("submodelView.getSheet()"),i=e&&n._getUnderscore(e).soak("getSheet()"),r=this.submodelView;return r&&this.stopListening(r),this.submodelView=e,this.listenTo(this.submodelView,"needsBookToolbarRender",function(){this.renderToolbar()}),this.incrementDeferredAction(),this.skipNextNavAnimation?(this.skipNextNavAnimation=!1,this.viewChangeNoAnimation(r)):t&&i?void(t!==i?this.viewChangeSlideSheet(r):this.submodelView.isRecordView&&r instanceof this.SheetView?this.viewChangeSlideLeftRight(r,{left:!1}):this.submodelView instanceof this.SheetView&&r.isRecordView?this.viewChangeSlideLeftRight(r,{left:!0}):this.viewChangeNoAnimation(r)):this.viewChangeNoAnimation(r)},getSubmodelView:function(){return this.submodelView},renderError:function(e){var t=e.response,n=t&&t.responseJSON;n=n||{};var i=n,r=i.isInvited,s=i.needsVerify,a=t&&403===t.status;if(r=a&&r,this.$nav.empty(),s)D.qShowIfNeeded({descriptionKey:"sharing"}).finally(function(){window.location.reload()}).done();else if(r){var l=_.clone(n);l.currentUser=o.Account.account.toContext(),this.$submodelContent.html(h.partials.bookInvited(l)),this.readOnlyTitle=l.title,this.updateNav()}else{if(!a)throw this.$submodelContent.html(h.partials.bookLoadError()),e;this.$submodelContent.html(h.partials.bookForbidden())}},isShowingAnySheet:function(){return this.submodelView instanceof this.SheetView},isShowingAnyRecord:function(){return this.submodelView instanceof this.RecordView},makeCSVGenerator:function(){return new L({sheetViewModel:this.submodelView.viewModel})},toggleMobileNav:function(e){var t=this,n=this.$(".book-container");this.incrementDeferredAction(),n.one("transitionend",function(){t.decrementDeferredActions()}),e&&this.mobileNav.render(),this.$(".book-container").safeToggleClass("nav-open",e)},updateApiView:function(){var e=this,t=this.$codeView;if(!t.length){var n=new W({bookView:this});this.$(".code-container-placeholder").replaceWith(n.el),t=this.$codeView,t.addClass("hidden"),t.flushTransition(),n.render()}this.incrementDeferredAction(),t.one("transitionend",function(){e.decrementDeferredActions()}),t.safeToggleClass("hidden",!this.apiShown),this.renderToolbar()},hideApiView:function(){this.apiShown=!1,this.updateApiView()},showApiView:function(){this.apiShown=!0,this.updateApiView()},showCodeletsView:function(){this.showApiView(),this.codeView.setMode("codelets")},events:{"click .mobile-book-nav":function(){this.skipNextNavAnimation=!0},"click .add-sheet":function(e){this.captureActions(function(){e.preventDefault(),e.stopPropagation();var t=$(e.target).closest(".add-sheet");this.addSpinner(t,this.addSheetSpinnerOptions);var n=this;this.model.addSheet({wait:!0,success:function(e){n.stopSpinning(t),l.router.flash({editSheetTitle:!0}).goToSheet(e.id)},error:this.errorHandler({action:"create-sheet",spinner:t})})})},"change .import-input":function(e){var t=this,n=e.target.files[0],i=Math.floor(n.size/1024/1024*100)/100;if(i>u.MAX_CSV_FILE_SIZE_MB)return void t.showAlert(r["error-csv-file-size-too-big"]({fileSizeInMb:i,maxFileSize:u.MAX_CSV_FILE_SIZE_MB}));var o=new q({file:n});o.show().then(function(e){if(t.$el.isAttached()){var n=t.$(".import-form")[0],i=new window.FormData(n);_.each(e,function(e,t){i.append(t,e)}),t.incrementDeferredAction(),$.ajax({url:"/books/"+t.model.id+"/sheets.json",type:"POST",xhr:function r(){var r=$.ajaxSettings.xhr();return r.upload&&r.upload.addEventListener("progress",function(e){if(e.lengthComputable){var n=e.loaded/e.total;n=parseInt(100*n),t.updateProgressBar(n)}},!1),r},beforeSend:function(e){t.addProgressBar(),c.addToken(e)},success:function(e){t.model.get("sheets").add(e),l.router.goToSheet(e._id)},error:function(e,n,i){t.showAlert(i)},complete:function(){t.decrementDeferredActions(),t.removeProgressBar()},data:i,cache:!1,contentType:!1,processData:!1})}}).fail(function(e){if(e)throw e}).done()},"click .add-form":function(e,t){var n=this,i=this.sheet();this.addSpinner(t,this.greyButtonSpinnerOptions),i.addFormNavItem({success:function(e){n.stopSpinning(t);var r={editSheetTitle:!0};l.router.flash(r).goToSheet(i.id,e.get("key"))},error:this.errorHandler("add-form")})},"click .menu-item":function(e){e.preventDefault(),e.stopPropagation();var t,n=$(e.target).closest(".menu-item"),i=n.closest(".sheet-tab").data("id");"navItem"===n.data("item-type")&&(t=n.closest(".nav-item").data("key"));var r=n.offset();r.top+=n.height(),this.showSheetTabItemMenu(i,t,r)},"contextmenu .sheet-tab-item":function(e){if(!this.model.isMetadataLocked()&&!e.altKey){e.preventDefault(),e.stopPropagation(),$.deselectAllText();var t,n=$(e.target).closest(".sheet-tab-item"),i=n.closest(".sheet-tab").data("id");n.is(".nav-item")&&(t=n.closest(".nav-item").data("key"));var r={top:e.pageY,left:e.pageX};this.showSheetTabItemMenu(i,t,r)}},"click .wrap-text":function(e){this.captureActions(function(){var t=$(e.target).closest(".dropdown-menu"),n=t.data("sheetId"),i=this.model.sheetWithId(n);i.saveIfNeeded("wrapText",!i.get("wrapText"),{error:this.errorHandler("update-sheet")})})},"click .unhide-field":"unhideField","click .delete-sheet:not(.disabled)":function(e){this.captureActions(function(){var t=$(e.target).closest(".dropdown-menu"),n=t.data("sheetId"),i=this.model.sheetWithId(n);i&&i.destroy({wait:!0,success:this.showStatus({action:"delete-sheet",context:i,undoable:!0}),error:this.errorHandler({actionTemplate:"delete-sheet",object:i})})})},"click .delete-nav-item":function(e){this.captureActions(function(){var t=$(e.target).closest(".dropdown-menu"),n=t.data("sheetId"),i=t.data("navKey"),r=this.model.sheetWithId(n),o=r.navItemWithKey(i);o.destroy({wait:!0,success:this.showStatus({action:"delete-nav-item",context:o,undoable:!0}),error:this.errorHandler({actionTemplate:"delete-nav-item",object:o})})})},"click .share-book":function(e){e.preventDefault(),this.showShareModalIfConfirmed()},"click .link-tool":function(e){e.preventDefault(),y.start(this),this.$(".link-tool").blur()},"click .tutorial-banner-container .dismiss":function(){this.$(".tutorial-banner-container").addClass("hidden-banner"),this.model.saveIfNeeded("hideVideoLink",!0,{error:this.errorHandler("update-book")})},"click .repair-integration":function(e){e.preventDefault(),this.repairOauth()},"click .title-menu":function(){this.toggleMobileNav(!0)},"click .api-button":function(){this.apiShown=!this.apiShown,this.updateApiView()},"click .code-smokescreen":function(){this.hideApiView()}},onLinkViewStart:function(){this.linkViewInfo.shown=!0,this.renderNav()},onLinkViewEnd:function(){this.linkViewInfo.shown=!1,this.renderNav()},onLinkViewChangedNewText:function(e,t){this.linkViewInfo.newTabText=t,this.renderNav()},onLinkToolWheel:function(e,t,n,i,r){var o=this.$(".book-nav-scroll");return P.pointInRect(n,i,o.bounds())?(o[0].scrollLeft+=e,o[0].scrollTop+=t,"targets"):!r&&P.pointInRect(n,i,this.$submodelContent.bounds())?(this.submodelView.scrollBy(e,t),"sources"):void 0},repairOauth:function(){var e=this,t=this.model.getIntegration();this.oauthWindowView=new V({type:this.slug,finishCallback:function(){e.removeSubviews("oauthWindowView")},repairIntegration:t}),this.oauthWindowView.render()},showSheetTabItemMenu:function(e,t,n){var i,r=this.model.sheetWithId(e),o=t&&r.navItemWithKey(t);i=o?h.partials.navItemMenuItems(o.toContext()):h.partials.sheetMenuItems(r.toContext());var s=this.$(".actions-dropdown"),a=s.find(".dropdown-menu");a.html(i),a.data("sheetId",r.id),a.autoTooltip({container:"body",placement:"right"}),o&&a.data("navKey",o.get("key")),s.removeClass("open"),s.offset(n),s.find(".dropdown-toggle").dropdown("toggle")},onIntegrationUpdate:function(){var e=this.model.getIntegration();if(e.isValid()){var t=r["integration-updated-status"](this.model.toContext());v.show(t)}else v.hide();var n=this.$(".oauth-banner-container");n.html(h.partials.oauthBanner(this.context())),n.safeToggleClass("hidden-banner",this.model.getIntegration().get("validOauth")),this.renderNav();var i=_.soak(this.submodelView,"fastScrollView");i&&(i.sizeToWindow(),i.setNeedsRenderContent())},onTabMoved:function(e,t){this.captureActions(function(){var e=t.item.data("id"),n=this.model.get("sheets"),i=n.get(e),r=this.$(".sheet-tab").index(t.item);n.move(i,r,{error:this.errorHandler("move-sheet")})})},onNavItemMoved:function(e,t){this.captureActions(function(){var e=t.item.data("key"),n=t.item.closest(".sheet-tab"),i=n.data("id"),r=this.model.get("sheets").get(i),o=r.get("navItems"),s=o.get(e),a=n.find(".nav-item").index(t.item);o.move(s,a,{error:this.errorHandler("move-sheet")})})},beginEditingTitle:function(){this.$editableBookTitle.focus()},onSocketBookChange:function(e){this.showStatus({message:e,reload:!0})()},onSocketBadVersion:function(){v.show({text:r["error-socket-bad-version"](),reload:!0},{clickToDismiss:!1,permanent:!0})},onBadServerResponseVersion:function(){if(!this.hasShownVersionError){this.hasShownVersionError=!0;var e=new A({message:r["error-bad-server-response-version"](),allowClose:!1});e.show()}},onSheetAdded:function(e){this.listenToSheet(e),this.attachStylesForSheet(e),this.render()},onSheetRemoved:function(e,t,n){var i=this,r=this.tabForSheet(e),o=r.is(".active"),s=this.model;this.incrementDeferredAction(),o&&this.listenToOnce(this,"afterAnimate",function(){i.detachStylesForSheet(e)}),r.fadeOut({complete:function(){if(r.remove(),o){var e=s.get("sheets"),t=n.index,a=e.length<t?e.at(t):e.last();a?l.router.goToSheet(a.id):l.observer.currentRouteIsBook(s.id)?i.showBook():l.router.goToBook(s.id)}},always:function(){i.decrementDeferredActions()}})},onSheetsReset:function(){this.listenToAllSheets(),this.detachAllSheetStyles(),this.attachAllSheetStyles(),this.render()},onNavItemRemoved:function(e){var t=e.sheet(),n=this.itemForNavItem(e),i=n.find("a").is(".active");n.css({opacity:1,height:n.height(),overflow:"hidden"}),this.transition(n,{opacity:0,height:0},{duration:200,complete:function(){n.remove(),i&&l.router.goToSheet(t.id)}})},onClickManageApi:function(e){e.preventDefault(),this.apiView=new R({model:this.model}),this.apiView.show()},unhideField:function(e,t){var n=t.data("key");if(!n)throw new Error("No key for unhide field");var i=t.data("sheetId");if(!i)throw new Error("No sheet id for unhide field with key {{key}}".stencil({key:n}));var r=this.model.sheetWithId(i);if(!r)throw new Error("No sheet found with id {{id}}".stencil({id:i}));var o=r.fieldWithKey(n);if(!o)throw new Error("No field for key {{key}} on sheet {{sheetId}}",{key:n,sheetId:i});this.captureActions(function(){o.setHidden(!1,{success:this.showStatus({action:"unhide-field",context:o,undoable:!0}),error:this.errorHandler("unhide-field")})})},onFlash:function(e){this.onNextTick(function(){e.editBookTitle&&this.beginEditingTitle(),this.submodelView&&"function"==typeof this.submodelView.onFlash&&this.submodelView.onFlash(e)})},addProgressBar:function(){this.progressBar||(this.progressBar=new w({title:function(e){return 100>e?r["csv-upload-progress-bar-title"]({progress:Math.round(e)}):r["csv-progress-bar-finished-title-in-book"]}})),this.progressBar.show()},updateProgressBar:function(e){this.progressBar.updateProgress(e)},removeProgressBar:function(){this.progressBar&&(this.progressBar.hide(),this.progressBar.remove())}});J.addGetters({$editableBookTitle:function(){return $(".editable-book-title")},container:function(){return this.$(".book-container")},codeView:"$codeView.view()"}),J.addComponents({container:".book-container",codeView:".code-container"}),dev.add("bookView",function(){return J.displayedView()}),dev.add("book",function(){return dev.bookView.model}),J.deferrableRendering(),J.deferrable("onIntegrationUpdate"),t.exports=J}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/constants":239,"../../common/strings":249,"../actions":2,"../bookSocket.js":4,"../csrf":6,"../env":8,"../globalEvents":22,"../keys":25,"../models":47,"../performance":75,"../routing":76,"../tutorials/tutorial":84,"../viewModels":99,"../viewModels/sheetStyle.js":109,"./aggregateBoxView":121,"./apiExplorerView":122,"./bookToolbarView":129,"./bookUsersView":130,"./codeView":138,"./colorboxify":140,"./confirmLeaveView":142,"./csvGenerator":144,"./csvPreflightView":146,"./emailConfirmView":154,"./errorAlertView":155,"./errorSheetView":156,"./formShareView":180,"./geometry":183,"./lazyRecordListView":190,"./linkView":193,"./manageApiView":196,"./mobileBookNavView":198,"./mobileRecordView":199,"./mobileSheetView":200,"./modalTabView":202,"./oauthWindowView":205,"./onboardingView":206,"./pendingSheetView":208,"./progressBarView":213,"./recordView":217,"./sheetView":222,"./statusBarView":225,"./tutorialCompleteView":232,"./tutorialIntroView":233,"./view":236,inflection:672,jss:688,spin:"spin"}],132:[function(e,t){(function(n){"use strict";var i=e("./mobileView"),r=e("./view"),o=e("../../common/strings"),s=e("../errors"),a=e("../parser").cursorToken,l=e("./renderAutocompleteValue"),c=e("../../common/commas"),u=e("./attachmentUploader"),d=i,h=t.exports=d.extend({className:"cell-edit",initialize:function(){this.pickProperties()},renderMain:function(){var e=this.context();this.$main.html(r.templates.cellEdit(e)),$("body").prop("scrollTop",0),this.onNextTick(function(){this.$editorField.textareaAutoSize({maxHeight:.4*window.innerHeight,padChars:"--"})})},renderTitle:d.prototype.renderTitle.after(function(){var e=r.partials.cellEditButtons();this.$title.append(e)}),startCursorPolling:function(){this.pollingCursor||(this.lastCursor=this.currentCursor(),this.pollingCursor=setInterval(this.pollCursor.bind(this),100))},stopCursorPolling:function(){clearInterval(this.pollingCursor),this.pollingCursor=null},currentCursor:function(){return this.$editorField[0].selectionStart},pollCursor:function(){var e=this.currentCursor();e!==this.lastCursor&&(this.lastCursor=e,this.cursorHasMoved=!0,this.updateCompletionsDeferred())},remove:d.prototype.remove.after(function(){this.stopCursorPolling()}),updateCompletions:function(){if(!this.field.isImage()){var e=this.getQueryWithCursor(),t=this;this.viewModel.autocompleteValues(e,this.field).then(function(e){t.renderCompletions(e)}).done()}},renderCompletions:function(e){if(!this.field.isImage()){var t=this.$editorField.val(),i=e.map(function(e){return l(e,t)}),o=r.templates.cellEditAutocomplete({completions:i});this.$autocompleteBox.html(o),n._getUnderscore(this.$autocompleteBox.find(".completion")).map(function(t,n){$(t).data("completion",e[n])})}},useCompletion:function(e,t){var n=t.data("completion");if(_.isString(n))this.$editorField.val(n),this.$editorField.focus(),this.$editorField.setCursorPosition(n.length);else{var i=c.join(_.concat(n.beforeNames,n.value,n.afterNames,""));this.$editorField.val(i),this.$editorField.focus();var r=c.join(_.concat(n.beforeNames,n.value,"")).length;this.$editorField.setCursorPosition(r)}this.updateCompletions()},getQueryWithCursor:function(){if(!this.cursorHasMoved&&!this.field.isAnyLink())return a;var e=this.$editorField,t=e.val(),n=document.getSelection();if(!n.rangeCount)return t+a;var i=e[0].selectionStart,r=e[0].selectionEnd;return t.slice(0,i)+a+t.slice(r)},context:function(){return{initialValue:this.viewModel.getInitialEditorValue(this.field),upload:this.field.isImage()}},titleContext:function(){return{title:this.fieldName,noMenu:!0}},begin:function(){this.recordView.$el.after(this.el),this.render(),this.recordView.hide(),this.$editorField.focus();var e=this.$editorField.val();this.$editorField.setCursorPosition(e.length),this.updateCompletions(),this.startCursorPolling()},end:function(){this.recordView.show(),this.remove()},save:function(e){var t=Q();this.record.isTemporary()&&(t=this.record.makePermanent());var n=this;t.thenImmediate(function(){e=e||{error:n.errorHandler("update-record")};var t=n.$editorField.val();n.captureActions(function(){var i={},r={};try{n.viewModel.addUpdateToPatch(t,n.fieldKey,i,r,n.boundErrorHandler)}catch(o){n.handlePatchError(o,t)}n.record.patch(i,r,e)}),n.end()}).done()},handlePatchError:function(e,t){var n;n=e instanceof s.ValidationError?e.getMessage():o["error-parse-formula-no-cancel"]({badFormula:t});var i=this;i.showStatus({message:n})()},events:{"click $saveButton":function(){this.save()},"click $cancelButton":function(){this.end()},"change $importInput":function(){var e=this;this.uploader=new u({book:this.field.sheet().book(),formData:new window.FormData(this.$importForm[0]),filename:this.$importInput[0].files[0].name,finished:function(t,n){if(t)return e.showAlert(t),void e.end();e.$editorField.val(n);e.save()}}),this.uploader.importFile()},"input $editorField":"updateCompletionsDeferred","click $completions":"useCompletion"}}).addProperties("recordView","field").addGetters({book:"recordView.book",fieldKey:"field.@key",fieldName:"field.displayName()",record:"recordView.model",viewModel:"recordView.viewModel"}).addComponents({importForm:".attachment-import-form",importInput:".attachment-input",uploadButton:".attachment-button",editorField:".cell-edit-value",autocompleteBox:".autocomplete-box",completions:".completion",saveButton:".save",cancelButton:".cancel"});h.deferrable("updateCompletions")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/commas":238,"../../common/strings":249,"../errors":9,"../parser":74,"./attachmentUploader":123,"./mobileView":201,"./renderAutocompleteValue":218,"./view":236}],133:[function(e,t,n){(function(t){"use strict";var i=e("./view"),r=e("../../common/strings"),o=e("../../common/values"),s=(n.mobileRender=function(e,t,n){n=n||{};var r=s(e,t,n);return i.partials.value(r)},n.valueContext=function(e,n,i,s){i=i||{},s=s||e.sheet();var l=s.fieldWithKey(n),c=e.getValue(n),u={text:l.getFormattedDisplayValue(e)},d=l.formatOptions();u.isImage=c.isImage(),c.isImage()&&(u.imageUrl=c.displayValue(d));var h;if(_.soak(l,"isAnyLink()")){if(h=l.linkedSheet(),!h)throw new Error("no linked sheet for field "+n+" in sheet "+s.id)}else if(h=e.sheet(),!h)throw new Error("no sheet for record "+e.id+" with sheet id "+e.effectiveSheetId());u.targetTitle=h.displayTitle(),i.href?u.links=[{href:i.href,text:u.text}]:c&&c.isMultiRef()?u.links=_.map(c.values,function(t){var i=t.displayValue(d);return t.isRef()?a(t,e,n,i,d):{text:i}}):c&&c.isRef()?u.links=[a(c,e,n,c.displayValue(d),d)]:l&&l.isAnyLink()&&c.displayValue(d)&&(u.missing=!0,u.namelessTarget=!0),u.rightAligned=!i.leftAlign&&c.isRightAligned(),u.showEditIcon=!t._getUnderscore(l).soak("sheet().book().isReadOnlyMode()")&&!s.isSynthetic(),u.showEditIcon=u.showEditIcon&&(l.isAnyLink()||"picklist"===l.get("validation"));var f=s.get("nameKey");if(n===f){if(s.hasDuplicateName(c.displayValue(d)))u.warning=!0,u.warningMessage=r["warning-duplicate-name"]({fieldName:l.get("name")||r["identifier-name"]()});else if(!c.displayValue(d)){var p=e.placeHolderName();i.href?u.links[0].text=p:u.text=e.placeHolderName(),u.placeholder="numeric"!==s.get("nameFieldMode")}if(!e.id){var m=o.makeRef(null,e.effectiveSheetId(),e.getClientName());u.links=u.links||[],u.links[0]=a(m,e,n,u.text,d)}}return c.isError()&&(u.error=!0,u.errorMessage=c.getMessage()),u}),a=function(e,t,n,i,o){var s={},a=t.sheet(),l=a.get("nameKey")===n,c=e.isMissing();return l&&!t.get("temporary")&&(c=!1),e.linkUrl()?s.href=e.linkUrl():c&&(s.missing=!0,e.canBeResolved()&&(s.href=_.stencil(e.linkUrlTemplate(),{name:i}))),s.text=e.displayValue(o)||r.unnamed(),s},l=(n.headerHtml=function(e,t){var n=e.get("name"),r={name:n,icon:l(e),showFieldSettings:t?t.showHeaderButtons(e):!0};return n||(r.name=e.placeholderName(),r.placeholder=e.placeholderName()),i.partials.fastHeaderCell(r)},function(e){var t=e.get("type");if("generic"!==t){var n={};if(e.hasAnyFormula()&&(n.isFormula=!0,n.title=e.editableFormula()),e.isAnyLink()){n.isJoin=!0;var i=e.linkedSheet();i&&(n.href=e.linkedSheet().url(),n.data={id:e.linkedSheet().id}),n.title=r["field-icon-link"]({name:_(e).soak("linkedSheet().displayTitle()")})}return n}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/strings":249,"../../common/values":253,"./view":236}],134:[function(e,t){(function(n){"use strict";var i=e("./view"),r=e("../parser").cursorToken,o=e("../../common/strings"),s=i.extend({className:"chit",initialize:function(){this.reinitialize(this.options)},reinitialize:function(e){this.$el.empty(),this.$el.removeClass("error selected");var t=_.toArray(this.el.classList);t=n._getUnderscore(t).filter(function(e){return e.startsWith("chit-color-")}),this.$el.removeClass(t.join(" ")),this.$el.tooltip("destroy"),this.el.normalize(),this.formatted=!1,this.edited=!1,this.render();var i=e.command;if(i)if(i.error){var s=i.string||"";this.$el.text(s.replace(r,"").trim()),this.$el.addClass("error");var a;i.error.displayable?(a=i.error.getMessage(),a=a.replace(new RegExp("^"+"Cannot interpret formula:".split().join("\\"),"g"),o["error-interpret-query-term-colon"]())):(a=o["error-interpret-query-term"](),console.log(i.error)),this.$el.tooltip({placement:"top",container:"body",title:a}),this.formatted=!0}else{var l=i.command.color||"blue";this.$el.addClass("chit-color-"+l),this.$el.text(i.string.trim());var c=this.$el.html();c=c.replace(i.name,i.name.bold()),this.$el.html("<span>"+c+"</span>");var u=i.command.icon;u&&(c=$("<i>").addClass("icon icon-fixed-width icon-fb-"+u).prependTo(this.el)),i.tip&&this.$el.tooltip({placement:"top",container:"body",title:i.tip}),this.formatted=!0}else e.text&&this.$el.text(e.text);this.$el.text()||this.$el.text(""),this.$el.prop("contenteditable",!0),this.$el.prop("spellcheck",!1)},val:function(e){return arguments.length?(this.$el.text(e),this.el.normalize(),this):this.$el.text()},getCursorPosition:function(){var e=document.getSelection();return e.rangeCount?(e=e.getRangeAt(0),e.startOffset!==e.endOffset?-1:e.startOffset):-1},setCursorPosition:function(e){if(this.formatted)throw new Error("Can't set cursor on formatted chit.");switch(e){case"start":e=0;break;case"end":e=this.val().length}e=_.clamp(e,0,this.val().length);var t=document.createRange(),n=document.getSelection(),i=_.last(this.el.childNodes)||this.el;t.setStart(i,e),t.collapse(!0),n.removeAllRanges(),n.addRange(t),this.el.focus()},textWithCursorToken:function(){var e=this.val(),t=document.getSelection();if(!t.rangeCount)return e+r;var n=Math.min(t.anchorOffset,t.focusOffset),i=Math.max(t.anchorOffset,t.focusOffset);return e.slice(0,n)+r+e.slice(i)},selectContent:function(){if(this.formatted)throw new Error("Can't select formatted chit.");var e=document.createRange(),t=document.getSelection();e.selectNodeContents(this.el),t.removeAllRanges(),t.addRange(e)},isContentSelected:function(){var e=document.getSelection();return e.rangeCount?(e=e.getRangeAt(0),0===e.startOffset&&e.endOffset===this.val().length):!1},select:function(){this.$el.addClass("selected").trigger("chit-selected")},deformat:function(){this.formatted&&(this.$el.tooltip("destroy"),this.$el.removeClass("error"),this.$el.text(this.$el.text()),this.formatted=!1)},events:{focus:"deformat"}});t.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/strings":249,"../parser":74,"./view":236}],135:[function(e,t){"use strict";function n(e){throw console.log("Missing chit view:"),console.log(e.outerHTML.split(">")[0]+">"),new Error("Chit with no view")}var i=e("./view"),r=e("./chitView"),o=e("../keys"),s=e("../parser"),a=(s.cursorToken,e("../models/powerbar/commands")),l=e("../models/errorReport"),c=i.extend({className:"chit-well",initialize:function(){$("<input>").addClass("offscreen").appendTo(this.el),this.content=$('<div class="wrapper">').appendTo(this.el),this.viewModel=this.options.viewModel,this.render()},chit$:function(e){var t=this.content.children(".chit");return e&&(t=t.filter(function(t,n){return $(n).is(e)})),t},selectedChitEls:function(){return this.chit$(".selected")},nonEmptyChitEls:function(){return this.chit$(":not(:empty)")},clearMissingChitViews:function(){this.chit$().each(function(e,t){t=$(t),t.view()||(console.log("Removing an element with no chit view"),console.log(t.outerHTML.split(">")[0]+">"),l.reportSilently(new Error("Chit view missing from element")),t.remove())})},render:function(){if(!this.removing&&!this.chit$(":focus").length&&!this.rendering){this.clearMissingChitViews(),this.rendering=!0,this.saveSelection();for(var e=this.viewModel.getCommandDescriptors(),t=this.nonEmptyChitEls().toArray().map(function(e){var t=$(e).view();return t||n(e),t}),i=e.length,o=t.length;i>o;o++)t.push(new r);var s=t;t=_.head(t,i),_.zip(e,t).forEach(function(e){if(e[0].error||e[0].command){var t=e[0],n=e[1];n.reinitialize({command:t})}}),_.chain(s).difference(t).invoke("remove");var a=$(_.pluck(t,"el")).filter(function(e,t){return!$(t).parent().length});this.content.append(a),this.resetEmptyChits(),this.restoreSelection(),this.alignChits(),this.rendering=!1}},alignChits:function(){this.lastChit=$(".chit:last").get(0);var e=this;_.chain($(".chit")).sortBy("offsetLeft").groupBy("offsetTop").each(function(t){_.each(t,function(n,i){var r=$(n);if(r.is(":empty"))if(i===t.length-1&&t.length>1){if(r.get(0)===e.lastChit)return;var o=e.$el.bounds(),s=r.bounds(),a=o.x+o.width-s.x-20;r.width(a)}else r.removeAttr("style");else 0===i&&r.safeToggleClass("first-at-line",!0),r.removeAttr("style")})})},saveSelection:function(){this.selection=[],this.nonEmptyChitEls().each(function(e,t){$(t).is(".selected")&&this.selection.push(e)}.bind(this))},restoreSelection:function(){var e=this.nonEmptyChitEls();this.selection.forEach(function(t){e.eq(t).addClass("selected")})},remove:function(){this.removing=!0,this.chit$().each(function(e,t){$(t).removeView()});var e=i.prototype.remove.call(this);return e},resetEmptyChits:function(){if(!this.removing){this.clearMissingChitViews(),this.chit$().find("br").remove();for(var e=this.chit$(":empty:not(:focus)").toArray().map(function(e){var t=$(e).view();return t||n(e),t}),t=this.chit$().length+1-e.length,i=e.length;t>i;i++)e.push(new r);var o=e;e=_.head(e,t),_.chain(o).difference(e).invoke("remove"),this.chit$(":not(:empty), :focus").each(function(t,n){e.length&&$(n).before(e.shift().el)}),e.length&&this.content.append(e.shift().el);var s=this.chit$(":focus"),a=s.prevAll().filter(this.chit$(":empty")).first().add(s.nextAll().filter(this.chit$(":empty")).first());a.removeView()}},editingChit:function(){var e=this.chit$(":focus").first();return e.length?e.view():null},getQueryString:function(e){return 0===arguments.length&&(e=this.nonEmptyChitEls()),e.map(function(e,t){return $(t).text()}).toArray().join(" | ")},rechittify:function(e){if(!this.removing){var t=e||this.chit$(":focus"),n=t.is(":focus");if(t.length){var i=t.text();if(!n||t.view().getCursorPosition()===i.length){var o=s.pipeSplit(i);if(o.length>1){var l=o.pop(),c=o.map(function(e){return new r({text:e.trim()}).$el});return t.view().reinitialize({text:l}),n&&t.view().setCursorPosition("end"),t.before(c),this.resetEmptyChits(),c.push(t),void c.forEach(this.rechittify.bind(this))}var u=this.viewModel.sheet,d=u.autoQuery(i);if(d.query){var h=d.query.commands[0];if(!n||""!==d.remainder){var f=u.autoQuery(d.remainder),p=!0;
if(_.contains(["bareword",":"],_.soak(h,"expressions.0.op"))){if(p=!1,n&&!f.query)return;a.commandsMatching(h.stringify(u)).length&&(p=!0)}if(p)if(f.query){if(n&&"bareword"===_.soak(f.query.commands[0],"expressions.0.op")&&(!a.isCommand(f.query.stringify())||!/\s/.test(i.slice(-1)))){var m=u.autoQuery(f.remainder);if(!m.query)return}}else if("ValidationError"!==_.soak(f,"error.name"))return;var g=d.query.getCommandDescriptors()[0],v=new r({command:g});t.before(v.el),t.view().reinitialize({text:d.remainder}),n&&t.view().setCursorPosition("end"),this.triggerInputIfEditing(),this.resetEmptyChits(),this.rechittify(e)}}}}}},triggerInputIfEditing:function(e){this.activeAutocompleteExists()||this.editingChit()&&this.$el.trigger("input",[e])},events:{click:function(e){var t=$(e.target).closest(".chit");t.is(":focus")||(e.preventDefault(),0!==t.length?(this.render(),this.onNextTick(function(){this.clickChit(t)})):(this.chit$(":focus").is(t)&&this.chit$(":focus").blur(),this.onNextTick(function(){this.clickChit(this.chit$().last())})))},"mousedown .chit":function(e){$(e.target).is(":focus")||e.preventDefault()},mousedown:function(e){this.dragging={},this.dragging.start=$(e.target).closest(".chit").add($(".chit").last()).first(),$(window).one("mouseup",function(){delete this.dragging}.bind(this))},mousemove:function(e){if(this.dragging){var t=$(document.elementFromPoint(e.pageX,e.pageY)).closest(".chit");if(t.length&&!t.is(":focus")){if(this.chit$(":focus").length){var n;this.dragging.start.is(":empty")?(n=this.nonEmptyChitEls().index(this.dragging.start.prevAll(".chit:not(:empty)").first()),this.triggerInputIfEditing(),this.dragging.start=-1===n?this.chit$().first():this.nonEmptyChitEls().eq(n).next()):(n=this.nonEmptyChitEls().index(this.dragging.start),this.triggerInputIfEditing(),this.dragging.start=this.nonEmptyChitEls().eq(n))}if(t=$(document.elementFromPoint(e.pageX,e.pageY)).closest(".chit"),t.length){if(this.selectedChitEls().removeClass("selected"),t.is(this.dragging.start))return void t.view().select();var i;i=t.is(this.dragging.start.prevAll())?this.dragging.start.prevUntil(t):this.dragging.start.nextUntil(t),i=i.add(this.dragging.start).add(t);var r=this;i.filter(".chit:not(:empty)").each(function(e,n){void 0===$(n).view()&&(console.log("newSel length: "+i.length),console.log(i),console.log("total chit count: "+$(".chit").length),console.log("bad chit: "+n.id+" with classes: "+n.getAttribute("class")),console.log(r.dragging.start),console.log(t)),$(n).view().select()})}}}},"keydown .chit":"onChitKeyDown","keydown .offscreen":"onKeyDown","input .offscreen":"startEditing",keyup:function(e){this.triggerInputIfEditing(e)},"input .chit":function(e){var t=$(e.target).closest(".chit");t.view().edited=!0},"blur .offscreen":function(e){this.$(".offscreen").val(""),this.chit$().removeClass("selected"),this.$(e.relatedTarget).length||this.$el.trigger("blur")},"blur .chit":function(e){this.rechittify($(e.target).closest(".chit")),this.$(e.relatedTarget).length||this.$el.trigger("blur")},"paste .offscreen":function(){this.onNextTick(function(){var e=this.editingChit().$el,t=e.next().next();this.blur();var n=t.prev().prev();n.length||(n=this.chit$().last()),n.focus(),n.view().setCursorPosition("end")})},"paste .chit":function(e){var t=$(e.target).closest(".chit"),n=t.view();""===n.val()&&(n.val(" "),n.setCursorPosition(1)),t.view().edited=!0,this.onNextTick(function(){this.rechittify(t)})},"focus .chit":function(e){if(!this.removing){var t=$(e.target).closest(".chit");t.view().edited=!1,this.$(e.relatedTarget)&&this.$el.trigger("startEditingChit"),this.chit$().removeClass("selected"),this.originalChitValue=t.view().val()}},"focus .offscreen":function(e){this.removing||(this.$(e.relatedTarget)&&this.$el.trigger("focus"),this.$el.trigger("nonedit-select"))},"chit-selected .chit":function(){if(!this.removing){var e=this.$(".offscreen");0===e.length&&(e=$('<input class = "offscreen">').prependTo(this.el)),e.focus();var t=this.getQueryString(this.selectedChitEls());e.val(t),e.get(0).setSelectionRange(0,t.length)}}},hasFocus:function(){return this.$(".chit:focus,.offscreen:focus").length},focus:function(){this.chit$().last().focus()},blur:function(){this.$(":focus").blur()},clickChit:function(e){if(!e.view())throw new Error("chit has no view ; id: "+e.prop("id")+"; class:"+e.prop("class"));e.focus(),e.view().deformat(),e.view().selectContent(),this.resetEmptyChits(),this.triggerInputIfEditing()},onChitKeyDown:function(e){this.chit$().tooltip("hide"),(e.metaKey||e.ctrlKey)&&e.stopPropagation();var t=$(e.target).closest(".chit");if(!_.contains([o.COMMAND,o.CTRL,o.OPTION,o.SHIFT],e.keyCode)){var n=t.view();if((e.metaKey||e.ctrlKey)&&e.keyCode===o("Z")&&(n.edited||(e.preventDefault(),e.shiftKey?(this.blur(),this.redo()):(this.blur(),this.undo()))),e.keyCode===o.RIGHT&&(n.getCursorPosition()===t.text().length||n.isContentSelected())){e.preventDefault(),this.$el.trigger("blur");var i=t.next();return i.is(":empty")?i.focus():(e.shiftKey||this.chit$().removeClass("selected"),i.length&&i.view().select()),this.rechittify(t),void this.render()}if(e.keyCode===o.TAB){if(!this.activeAutocompleteExists())return this.onTab(e);e.preventDefault()}e.keyCode===o.RETURN&&(e.preventDefault(),this.activeAutocompleteExists()||(this.blur(),this.$el.trigger("blur"))),e.keyCode===o.ESC&&(this.editingChit().val(this.originalChitValue),this.blur(),this.$el.trigger("blur"));var r;if(e.keyCode===o.LEFT&&(""===n.val()||0===n.getCursorPosition())||e.keyCode===o.BACKSPACE&&0===n.getCursorPosition()&&t.text().length){if(e.preventDefault(),r=t.prevAll(".chit").first(),!r.length)return;return this.triggerInputIfEditing(e),r.is(":empty")?r.focus():(e.shiftKey||this.chit$().removeClass("selected"),r.length&&r.view().select()),void this.rechittify(t)}if(e.keyCode===o.BACKSPACE&&t.is(":empty")){if(e.preventDefault(),r=t.prev(),!r.length)return;var s=r.is(":empty");return s&&(r.prev().tooltip("destroy"),r.prev().removeView()),r.tooltip("destroy"),r.removeView(),r=t.prevAll().filter($(".chit:not(:empty)")).first(),this.triggerInputIfEditing(e),r=0===r.length?this.chit$().first():r.next(),r.focus(),r.view().setCursorPosition("end"),void this.resetEmptyChits()}return(e.metaKey||e.ctrlKey)&&e.keyCode===o("A")?(this.blur(),void this.selectAll(e)):void(_.contains([o.BACKSPACE,o.LEFT,o.RIGHT,o.DOWN,o.UP],e.keyCode)||this.onNextTick(this.rechittify))}},activeAutocompleteExists:function(){return 0!==$(".autocomplete li.active").length},onKeyDown:function(e){switch(e.keyCode){case o.LEFT:e.preventDefault(),this.arrowLeft(e);break;case o.RIGHT:e.preventDefault(),this.arrowRight(e);break;case o.UP:e.preventDefault(),this.arrowUp(e);break;case o.DOWN:e.preventDefault(),this.arrowDown(e);break;case o.BACKSPACE:e.preventDefault(),this.backspace(e);break;case o.RETURN:e.preventDefault(),this.enter(e);break;case o.TAB:this.onTab(e);break;case o("A"):(e.metaKey||e.ctrlKey)&&this.selectAll(e)}},arrowLeft:function(e){var t=this.selectedChitEls().first();if(0!==t.length){var n;e.shiftKey?(n=t.prevAll().filter(function(e,t){return $(t).is(".chit:not(:empty)")}).first(),n.length&&n.view().select()):t.prev().focus()}},arrowRight:function(e){var t=this.selectedChitEls().last();if(0!==t.length){var n;e.shiftKey?(n=t.nextAll().filter(function(e,t){return $(t).is(".chit:not(:empty)")}).first(),n.length&&n.view().select()):(this.selectedChitEls().removeClass("selected"),t.next().focus())}},arrowUp:function(e){e.shiftKey?this.selectedChitEls().first().prevAll(":not(:empty)").each(function(e,t){$(t).view().select()}):this.chit$().removeClass("selected").first().focus()},arrowDown:function(e){e.shiftKey?this.selectedChitEls().last().nextAll(":not(:empty)").each(function(e,t){$(t).view().select()}):this.chit$().removeClass("selected").last().focus()},backspace:function(e){var t=this.selectedChitEls();if(this.chit$().tooltip("hide"),0!==t.length){var n=t.first().prevAll().filter($(".chit:not(:empty)")).first();t.tooltip("destroy"),t.removeView(),this.triggerInputIfEditing(e);var i;i=0===n.length?this.chit$().first():n.next(),i.focus(),this.resetEmptyChits()}},enter:function(){var e=this.selectedChitEls().first();0!==e.length&&(e.focus(),e.view().deformat(),e.view().selectContent(),this.resetEmptyChits())},onTab:function(e){e.preventDefault();var t=this.chit$(":focus, .selected").first();this.triggerInputIfEditing(e);var n=this.chit$();n.removeClass("selected");var i;i=e.shiftKey?{siblings:"prevAll",terminal:"first"}:{siblings:"nextAll",terminal:"last"};var r=t[i.siblings]().filter(function(e,t){return!$(t).is(":empty")}).first();this.$(".offscreen").focus(),this.render(),0===r.length?(r=this.chit$()[i.terminal](),r.focus()):r.view().select(),this.$el.trigger("blur"),this.$el.trigger("input")},selectAll:function(e){e.preventDefault(),e.stopPropagation(),this.nonEmptyChitEls().each(function(e,t){$(t).view().select()})},startEditing:function(){var e=this.selectedChitEls();if(0!==e.length){var t=e.first(),n=e.not(t),i=this.$(".offscreen");this.chit$().tooltip("hide"),n.tooltip("destroy"),n.removeView();var r=i.val();i.val(""),e.view().deformat(),e.view().val(r),e.view().setCursorPosition("end")}}});c.deferrableRendering(),t.exports=c},{"../keys":25,"../models/errorReport":40,"../models/powerbar/commands":55,"../parser":74,"./chitView":134,"./view":236}],136:[function(e,t){"use strict";{var n=e("./view"),i=n;t.exports=i.extend({className:"click-to-select",tagName:"span",initialize:function(){this.text=this.options.text},render:function(){this.$el.html(n.templates.clickToSelect(this)),this.adjust()},adjust:function(){var e=this.$("input"),t=e.val(),n=$("<span>").addClass("click-to-select-ruler").text(t);n.appendTo(this.el),n.css({position:"absolute"});var i=n.width();n.remove(),e.width(i)},events:{"click .click-block":function(e){e.preventDefault(),this.$("input").select()}}})}},{"./view":236}],137:[function(e,t){"use strict";{var n=e("./view.js"),i=e("../keys.js");t.exports=n.extend({className:"clipboard-container",initialize:function(){this.currentValue=this.options.value},render:function(){this.$el.html(n.templates.clipboardInterceptor()),this.currentValue&&this.setValue(this.currentValue),this.setupPasteListeners()},onPaste:function(e){if($(e.target).is(".clipboard")){var t=e.originalEvent.clipboardData.getData("text/plain");t&&this.triggerPaste(t)}},triggerPaste:function(e){this.trigger("paste",e)},setupPasteListeners:function(){var e=this;$("body").on(this.namespacedEventName("keydown"),function(t){(t.metaKey||t.ctrlKey)&&t.which===i.Z&&e.preventDefaultInTextarea(t)})},remove:function(){this.blur(),$("body").unbindViewEvents(this),n.prototype.remove.apply(this,arguments)},$clipboard:function(){return this.$(".clipboard")},setValue:function(e){this.currentValue=e,this.$clipboard().val(e).focus().select()},blur:function(){this.$clipboard().blur()},preventDefaultInTextarea:function(e){$(e.target).is(".clipboard")&&(e.preventDefault(),this.blur())},onCut:function(e){$(e.target).is(".clipboard")&&this.triggerCut()},triggerCut:function(){this.trigger("cut")},events:{paste:"onPaste",cut:"onCut"}})}},{"../keys.js":25,"./view.js":236}],138:[function(e,t){(function(n){"use strict";{var i=e("./view"),r=e("../models"),o={explorer:e("./apiExplorerView"),codelets:e("./codeletsView")},s=i;t.exports=s.extend({className:"code-container",propertyNames:["bookView"],initialize:function(){this.hasRendered={},this.pickProperties(),this.render(),this.setMode("explorer")},setMode:function(e){this.$el.dataAttr("mode",e),this.render(),this.hasRendered[e]||(this.subviews[e].render(),this.hasRendered[e]=!0)},renderBase:function(){var e=this;this.$el.html(i.templates.code(this.context())),this.attachInteractions(),this.subviews=n._getUnderscore(o).mapObject(function(t,n){var i=new t({codeView:e});return i.$el.dataAttr("mode",n).addClass("code-tab-content").appendTo(e.$el),i}),this.hasRenderedBase=!0},render:function(){this.hasRenderedBase||this.renderBase()},attachInteractions:function(){this.$el.draggable({handle:".header"}).resizable({handles:"all"})},context:function(){var e=r.Account.currentUser(),t=Fieldbook.env.ENABLE_CODELETS;return t||(e&&e.get("admin")?t=!0:r.Account.account.hasFeatureFlag("codelets")&&(t=!0)),{apiReadOnly:this.readOnly,showCodelets:t}},events:{"click $tabs":function(e,t){var n=t.data("mode");this.setMode(n)},"click .done":function(){this.bookView.hideApiView()},"click .maximize":function(){var e=["top","left","height","width"],t=n._getUnderscore(e).object(e.map(_.constant("")));this.transition(this.$el,t,{easing:"in-out",duration:"400"})},"click .manage-api":function(){return this.bookView.onClickManageApi.apply(this.bookView,arguments)}}}).addGetters({book:"bookView.model",readOnly:"book.isApiReadOnlyMode()",mode:["$el.dataAttr","mode"]}).addComponents({tabs:".code-tab"})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../models":47,"./apiExplorerView":122,"./codeletsView":139,"./view":236}],139:[function(e,t){(function(n){"use strict";var i=e("./view"),r=e("../models/account"),o=e("./deleteCodeletConfirmModal"),s=e("./modalView"),a=e("../keys"),l=e("../../common/syncedTime"),c=e("esprima"),u=e("codemirror/lib/codemirror");e("codemirror/mode/javascript/javascript"),e("codemirror/keymap/sublime"),e("codemirror/addon/comment/comment"),e("codemirror/addon/dialog/dialog"),e("codemirror/addon/edit/closebrackets"),e("codemirror/addon/search/search");var d=500,h=300,f=3e3,p=i,m=function(){this.updateStatus()},g=t.exports=i.extend({className:"codelets",now:function(){return new Date(l.singleton.now())},initialize:function(){this.pickProperties(),this.timers={},this.saveCount=0,this.codelets.length&&this.setCodelet(this.codelets.at(0),{render:!1}),this.logTimer=setInterval(this.pollLogs.bind(this),f),this.listenTo(this.codelets,"change",this.renderMenuDeferred),this.listenTo(this.codelets,"add remove",this.onCodeletsListChange)},onCodeletsListChange:function(){this.renderMenuDeferred(),this.codelet?this.codelets.contains(this.codelet)||this.setCodelet(this.codelets.at(0)):this.codelets.length>0&&this.setCodelet(this.codelets.at(0))},onDraftChanged:function(){this.mirror&&(!this.savedAt||this.codelet.updatedAt>this.savedAt)&&this.mirror.setValue(this.codelet.get("draft"))},remove:p.prototype.remove.before(function(){this.clearValidateTimer(),this.clearSaveTimer(),this.clearLogPoll()}),setCodelet:function(e,t){t=_.defaults({},t,{render:!0}),this.codelet&&this.stopListening(this.codelet),e&&(this.listenTo(e,"change:title",this.onTitleChanged),this.listenTo(e,"change:draft",this.onDraftChanged),this.listenTo(e,"change:updatedAt",this.onDraftChanged),this.listenTo(e,"change",this.updateStatus)),this.codelet=e,t.render&&this.render()},getCodelet:function(){return this.codelet},makeNewCodelet:function(){var e=i.partials.exampleCodelet(),t={title:"codelet-"+(this.codelets.length+1),draft:e,code:e,updatedAt:this.now()},n=this,r=this.$(".no-codelet");r.length||(r=this.mirror.getWrapperElement()),n.addSpinner(r,n.largeGreySpinnerOptions),this.codelets.create(t,{error:this.errorHandler("save-codelet"),success:function(e){n.setCodelet(e),n.updateStatus(),n.$titleField.focus(),n.$titleField[0].select()}})},renderMenu:function(){var e=i.partials.codeletMenu(this.context());this.$codeletMenu.replaceWith(e)},render:function(){if(this.$el.html(i.templates.codelets(this.context())),this.$titleField.alphanum({allow:"-_",allowSpace:!1}),this.getCodelet()){var e=this.logsShown(),t=this.$(".code-mirror")[0];this.mirror=u.fromTextArea(t,{mode:"javascript",theme:"base16-light",lineNumbers:!0,tabSize:2,indentWithTabs:!1,keyMap:"sublime",autoCloseBrackets:!0,gutters:["syntax-gutter"],extraKeys:this.getKeyMap(),readOnly:this.readOnly}),this.listenToMirror(),this.validate(),e&&this.toggleLogs(!0)}}.after(m).after(function(){this.$el.applyReadOnly(this.readOnly)}),getKeyMap:function(){if(this.readOnly)return{};var e=this,t=this.keyMethods;return n._getUnderscore(this.keyMappings).mapObject(function(n){return n.startsWith("!")?n.slice(1):t[n].bind(e)})},context:function(){var e=(this.getCodelet(),n._getUnderscore(this).pick("readOnly","anon","bookId"));return n._getUnderscore(e).extend({codelets:this.codelets.invoke("toContext"),codelet:n._getUnderscore(this).soak("getCodelet().toContext()")})},listenToMirror:function(){this.mirror.on("change",this.onMirrorChange.bind(this))},onMirrorChange:function(){this.validateSoon(),this.saveSoon()}.after(m),getStatus:function(){return this.getCodelet()?this.waitingToValidate()?"Checking syntax…":this.isValid&&this.saving?"Saving…":this.isDirty()?"Draft saved":"Published":""},updateDeployButton:function(){var e=this.canDeploy();if(this.$deployButton.safeToggleClass("disabled",!e),this.$deployButton.tooltip("destroy"),!e){var t;this.waitingToValidate()?t="Please wait a moment while we validate your code.":this.isDirty()?this.hasPassedValidation()?this.getCodelet()||(t="You do not have a codelet to publish."):t="Your code contains syntax errors. You must fix them before you can publish.":t="The current draft is already published.",this.$deployButton.tooltip({title:t,container:this.$el})}},updateStatus:function(){this.updateDeployButton(),this.$revertButton.safeToggleClass("disabled",!this.canRevert()),this.$deleteButton.safeToggleClass("disabled",!this.getCodelet()),this.$el.safeToggleClass("draft-mode",this.isDirty());var e=this.getStatus();this.$statusMessage.text(e),this.renderPrivileges()},renderPrivileges:function(){var e=this.getCodelet();if(e){var t=i.partials.codeletPrivileges(this.context());this.$privilegesContainer.replaceWith(t)}},onTitleChanged:function(){this.renderMenuDeferred();var e=this.getCodelet();e&&(this.$urlField.val(e.endpointUrl()),this.$titleField.val(e.get("title")))},isDirty:function(){var e=this.getCodelet();return e?e.get("title")!==this.title?!0:e.get("code")!==this.mirror.getValue()?!0:!1:!0},canDeploy:function(){return this.getCodelet()?this.hasPassedValidation()?this.isDirty()?!0:!1:!1:!1},canRevert:function(){var e=this.getCodelet();return this.mirror?e?this.mirror.getValue()!==e.get("code"):!1:!1},deploy:function(){if(!this.canDeploy())throw new Error("Tried to deploy, but not in a deployable state");this.save({deploy:!0})},revert:function(){var e=this.getCodelet();this.mirror.setValue(e.get("code")||""),this.save()},save:function(e){e=_.defaults({},e,{deploy:!1});var t=this,i=this.mirror.getValue();this.savedAt=this.now();var r={draft:i,updatedAt:this.savedAt};this.isTitleUnique(this.title)&&(r.title=this.title),e.deploy&&(r.code=i),n._getUnderscore(r).extend(e.attributes),this.saving=!0;var o=function(){t.saving=!1,t.updateStatus()},s=this.getCodelet();s.saveIfNeeded(r,{error:this.errorHandler("save-codelet"),success:o,noChange:o}),this.saveCount++}.after(function(){this.clearSaveTimer()}).after(m),deleteCodelet:function(){var e=this.getCodelet();if(e){var t=this,n=new o({codelet:e.toContext()});n.show().then(function(){t.clearSaveTimer(),t.clearValidateTimer(),e.destroy({error:t.errorHandler("delete-codelet"),success:t.showStatus({action:"delete-codelet",context:e})}),t.setCodelet(t.codelets.at(0)),t.updateStatus()},function(e){if(e)throw e}).done()}},clearTimer:function(e){this.timers[e]&&(clearTimeout(this.timers[e]),this.timers[e]=null,this.decrementDeferredActions())},clearValidateTimer:function(){this.clearTimer("validate")},clearSaveTimer:function(){this.clearTimer("save")},clearLogPoll:function(){null!=this.logTimer&&(clearInterval(this.logTimer),this.logTimer=null)},pollLogs:function(){var e=this,t=this.getCodelet();t&&(this.codeView.$el.hasClass("hidden")||this.logsShown()&&t.qFetchLogs().then(function(t){if(""===t&&(t="<i>Use console.log() to log messages and they will appear here.</i>"),t!==e.lastLogs){e.lastLogs=t;var n=e.$logPane,i=n.scrollTop(),r=11,o=i+n.height()>=n[0].scrollHeight-r;n.html(t),o?e.scrollLogsToBottom():n.scrollTop(i)}}))},scrollLogsToBottom:function(){var e=this.$logPane;e.scrollTop(e[0].scrollHeight-e.height())},hasPassedValidation:function(){return!this.waitingToValidate()&&this.isValid},waitingToValidate:function(){return!!this.timers.validate},waitingToSave:function(){return!!this.timers.save},validate:function(){this.mirror.clearGutter("syntax-gutter");var e;try{c.parse(this.mirror.getValue())}catch(t){if(null==t.lineNumber)throw t;e=t}this.isValid=!e,this.isValid||this.placeErrorMarker(e.lineNumber-1,e.description)}.after(function(){this.clearValidateTimer()}).after(m),validateSoon:function(){this.incrementDeferredAction(),this.clearValidateTimer(),this.timers.validate=setTimeout(this.validate.bind(this),d)},saveSoon:function(){this.readOnly||(this.incrementDeferredAction(),this.clearSaveTimer(),this.timers.save=setTimeout(this.save.bind(this),h))},placeErrorMarker:function(e,t){var n=$("<div>").addClass("error-marker");return this.mirror.setGutterMarker(e,"syntax-gutter",n[0]),n.tooltip({title:t,container:this.$el}),n},isTitleUnique:function(e){var t=n._getUnderscore(this.codelets).without(this.getCodelet()),i=n._getUnderscore(t).chain().invoke("get","title").contains(e).value();return!i},cancelEndEditingTitle:function(e){this.$titleField.focus(),this.$titleError.text(e)},clearTitleError:function(){this.$titleError.text("")},onEndEditingTitle:function(e,t){var n=t.val();return n?this.isTitleUnique(n)?(this.clearTitleError(),void this.saveSoon()):this.cancelEndEditingTitle("Another codelet already has that name"):this.cancelEndEditingTitle("You must name your codelet")},logsShown:function(){return!this.$logPane.hasClass("hidden")},toggleLogs:function(e){var t;this.lastLogs=null,arguments.length&&(t=!e),this.$logPane.toggleClass("hidden",t);var n=this.logsShown();this.$mirrorPane.safeToggleClass("log-shown",n),n&&(this.pollLogs(),this.scrollLogsToBottom()),this.mirror.refresh()},events:{"blur $titleField":"onEndEditingTitle","keydown $titleField":function(e){this.$titleError.text(""),a.matchEvent(e,"RETURN","TAB")&&(this.onNextTick(function(){this.$titleField.blur(),this.mirror&&this.mirror.focus()}),e.stopPropagation())},"click .codelet-item:not(.new-codelet)":function(e,t){var n=t.data("id");this.setCodelet(this.codelets.find({id:n}))},"focus .codelet-url":function(e,t){e.preventDefault(),t[0].select()},"click $deployButton":function(){this.captureActions(function(){this.deploy()}),this.mirror.focus()},"click $revertButton":function(){this.revert(),this.mirror.focus()},"click .new-codelet":function(){this.makeNewCodelet()},"click $deleteButton":function(){this.deleteCodelet()},"click .make-private":function(e){this.save({attributes:{"public":!1}}),e.preventDefault()},"click .make-public":function(e){var t=this,i=n._getUnderscore(this.context()).extend({template:"codeletPublicWarning"});return s.qShow(i).then(function(){t.save({attributes:{"public":!0}}),e.preventDefault()}).fail(function(e){if(e)throw e}).done()},"click $mirrorPane":function(e,t){t.is(e.target)&&this.mirror.focus()},"click .copy-book":function(){this.bookView.copyBook("show_codelets=1")},"click $logButton":function(){this.toggleLogs()}},keyMappings:{"Cmd-S":"deploy","Ctrl-S":"deploy",Tab:"!insertSoftTab"},keyMethods:{deploy:function(){this.validate(),this.canDeploy()&&this.deploy()}}}).addProperties("codeView").addGetters({anon:function(){return r.account.isAnonymousUser()},book:"bookView.model",bookId:"book.id",bookView:"codeView.bookView",codelets:"book.@codelets.sort()",readOnly:"book.isApiReadOnlyMode()",title:function(){return this.$titleField.val()}}).addComponents({titleField:".title-field",titleError:".title-error",urlField:".codelet-url",codeletMenu:".codelet-menu",deployButton:".codelet-deploy-button",revertButton:".codelet-revert-button",deleteButton:".codelet-delete-button",statusMessage:".status-message",errorMarker:".error-marker",privilegesContainer:".view-privileges",logButton:".btn.toggle-log",logPane:".log-view",mirrorPane:".mirror-container"});g.deferrableRendering()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/syncedTime":250,"../keys":25,"../models/account":27,"./deleteCodeletConfirmModal":147,"./modalView":203,"./view":236,"codemirror/addon/comment/comment":609,"codemirror/addon/dialog/dialog":610,"codemirror/addon/edit/closebrackets":611,"codemirror/addon/search/search":613,"codemirror/keymap/sublime":615,"codemirror/lib/codemirror":616,"codemirror/mode/javascript/javascript":617,esprima:659}],140:[function(e,t){"use strict";e("jquery.colorbox");var n={iframe:!0,innerWidth:1280,innerHeight:750,maxWidth:"100%",maxHeight:"90%",returnFocus:!1};t.exports=function(e,t){t=_.extend(n,t),e.colorbox(t)}},{"jquery.colorbox":"jquery.colorbox"}],141:[function(e,t){(function(n){"use strict";var i=e("./dragController"),r=(e("./geometry"),e("./view")),o=(e("jss"),i.superExtend(function(){return{scopeName:"column",handleClass:"row-handle",getTargetIndexes:function(){var e=this.view.columns;return _.range(e.length+1).filter(function(t){return e[t]&&!e[t].canDropBefore()?!1:e[t-1]&&!e[t-1].canDropAfter()?!1:!0})},makeTargetSpecs:function(){var e=this.view,t=this,i=e.columns,r=e.$header().bounds(),o=this.view.scrollView.viewportBounds(),s=this.getTargetIndexes();return n._getUnderscore(s.map(function(n){{var s,a=function(t){if(!(n>=i.length||0>n)){var r=e.columnBounds(t);return r}},l=a(n-1),c=a(n);a(n+1)}if(s=n>t.fromIndex?n-1:n,n===t.fromIndex||n===t.fromIndex+1)return null;if(0===n){if(c.left<o.left)return;return{index:s,left:r.left,right:c.centerX,line:c.left}}if(n===i.length){if(l.right<o.left)return;return{index:s,left:l.centerX,right:r.right,line:l.right}}return c.left<o.left?void 0:{index:s,left:l.centerX,right:c.centerX,line:c.left}})).compactNullish()},makeTargets:function(){var e=this,t=this.makeTargetSpecs(),i=this.view.columnBounds(0),r=i.top,o=i.height,s=window.innerHeight;this.targets=n._getUnderscore(t).map(function(t){var n=$("<div>").addClass("column-target");n.css({top:0,left:t.left,width:t.right-t.left,height:s});var i=$("<div>").addClass("column-target-line");return i.css({top:r,left:t.line,height:o}),n.append(i),n.appendTo("body"),e.makeTargetDroppable(n,t.index),n})},getModelForHandle:function(e){return this.view.getCellInfo(e).column},indexForModel:function(e){return this.view.indexForColumn(e)},makeHelper:function(e){var t=$(e.target),n=t.closest(this.handleSelector),i=this.view.$getColumnHeader(this.model),o=this.view.columnBounds(this.fromIndex),s=$("<div>");s.html(r.partials.columnSortSurrogate(this.context)),n=n.clone().attr("id",null),i=i.clone().attr("id",null),s.find(".col-handles").append(n),s.find(".col-headers").append(i);var a=$("<div>").addClass("column-helper-body");return s.appendTo("body"),a.width(o.width-1),a.height(o.height-s.find(".table").height()),s.append(a),s.detach(),s}}}));t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./dragController":148,"./geometry":183,"./view":236,jss:688}],142:[function(e,t){"use strict";var n=e("./view"),i=e("./modalView"),r=i.extend({className:"confirm-leave modal hide fade",template:n.templates.confirmLeave,events:{"click .confirm-leave":function(){this.options.onConfirm()}}});t.exports=r},{"./modalView":203,"./view":236}],143:[function(e,t){"use strict";t.exports={arrayToCSSColor:function(e){var t=e.map(function(e){return Math.round(255*e)});return"rgb("+t.join()+")"}}},{}],144:[function(e,t){(function(n){"use strict";{var i=e("papaparse"),r="\r\n";t.exports=BaseObject.extend({propertyNames:["recordLists","sheetViewModel"],initialize:function(){this.recordLists=this.sheetViewModel.recordLists()},csvData:function(){var e=this;if(this.sheetViewModel.isGrouped()){var t=n._getUnderscore(this.recordLists).map(function(t){return e.csvDataForRecordList(t,{includeTitles:!0})});return t.join(r+r)}var i=this.recordLists[0];return this.csvDataForRecordList(i)},csvDataForRecordList:function(e,t){t=t||{};var r=e.fields(),o=e.records.map(function(e){return n._getUnderscore(r).map(function(t){return e.getDisplayValue(t.get("key"),t.formatOptions()).trim()})});o.push(n._getUnderscore(r).map(function(t){var i=e.summaryValue(t);if(!i)return"";var r=i.displayName.trim(),o=i.value.displayValue(t.formatOptions()).trim();return n._getUnderscore([r,o]).compact().join(" ")}));var s=[];if(t.includeTitles){var a=n._getUnderscore(e.fixedPairs()).map(function(t){var n=e.titleForValue(t.value,t.field);return t.field.displayName()+": "+n}).join(", ");s.push([a])}return s.push(n._getUnderscore(r).invoke("displayName")),s=s.concat(o),i.unparse(s)},csvFilename:function(){var e=this.sheetViewModel.query,t=this.sheetViewModel.title(),n=this.sheetViewModel.sheet.displayTitle();if(e&&e.hasCommands()){var i=_.soak(this.sheetViewModel,"navItem().getQuery()");return i&&i.isEqual(this.sheetViewModel.query)?"{{sheetTitle}} - {{navTitle}}.csv".stencil({sheetTitle:n,navTitle:t}):"{{sheetTitle}} - {{queryTitle}}.csv".stencil({sheetTitle:n,queryTitle:e.nameify()})}return"{{name}}.csv".stencil({name:n})}})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{papaparse:697}],145:[function(e,t){"use strict";var n=e("./view"),i=e("./dropzoneView"),r=e("../../common/strings"),o=n.extend({className:"csv-import",initialize:function(){this.$el.html(n.templates.csvImport());var e=this.$(".drop-area").get(0);this.dropzoneView=new i({el:e,clickableElement:e})},gatherTitleBarInfo:function(e){e.setMode("importSync"),e.setTitle(r["import-csv"]())}});t.exports=o},{"../../common/strings":249,"./dropzoneView":151,"./view":236}],146:[function(e,t){(function(n){"use strict";var i=e("./view"),r=e("./modalView"),o=e("../../common/constants"),s=e("../../common/strings"),a=e("../../common/csvParseOptions"),l=e("./fastScrollView"),c=e("./fastTableView"),u=e("./fastTableColumn"),d=e("./fastTableRow"),h=e("papaparse"),f=e("numeral"),p=e("inflection"),m=r.extend({className:"csv-preflight modal hide fade",template:i.templates.csvPreflight,delimiters:a.delimiters,encodings:a.encodings,initialize:function(){this.parseOptions={delimiter:null,encoding:"UTF-8"},this.file=this.options.file,r.prototype.initialize.apply(this,arguments),this.readFile()},remove:function(){r.prototype.remove.apply(this,arguments),this.fastScrollView&&this.fastScrollView.remove()},context:function(){var e=this;return _.each(e.delimiters,function(t){t.current=t.key===e.parseOptions.delimiter}),_.each(e.encodings,function(t){t.current=t.key===e.parseOptions.encoding}),n._getUnderscore(e).pick("file","delimiters","encodings")},updateRowAndColCounts:function(){var e,t;0===this.tableData.length?(e=0,t=0):(e=this.tableData.length-1,t=this.tableData[0].length);var n=e*t;this.$(".row-count").text("{{count}} {{noun}}".stencil({count:f(e).format("0,0"),noun:p.inflect("row",e)})),this.$(".col-count").text("{{count}} {{noun}}".stencil({count:f(t).format("0,0"),noun:p.inflect("column",t)})),this.$(".count-display").show();var i=!1;if(this.$(".count-error").removeClass("count-error"),e>o.MAX_CSV_ROWS&&(i=!0,this.$(".row-count").addClass("count-error")),t>o.MAX_CSV_COLUMNS&&(i=!0,this.$(".col-count").addClass("count-error")),n>o.MAX_CSV_CELLS?(i=!0,this.$(".cell-count").text("({{count}} total cells)".stencil({count:f(n).format("0,0")})),this.$(".cell-count").addClass("count-error"),this.$(".cell-count").show()):this.$(".cell-count").hide(),i){var r={rowLimit:o.MAX_CSV_ROWS,columnLimit:o.MAX_CSV_COLUMNS,cellLimit:o.MAX_CSV_CELLS};r=_.mapObject(r,function(e){return f(e).format("0,0")});var a=s["csv-limits-reached"](r);this.$(".count-limits").text(a),this.$(".count-limits").show(),this.$(".btn.done").attr("disabled","disabled")}else this.$(".count-limits").hide(),this.$(".btn.done").attr("disabled",null)},render:function(){r.prototype.render.apply(this,arguments),this.fastScrollView&&this.fastScrollView.remove(),this.fastScrollView=new l,this.fastScrollView.container=this.$(".fast-scroll-container"),this.$(".fast-scroll-container").append(this.fastScrollView.el)
},readFile:function(){var e=this,t=new FileReader;t.onload=function(t){e.fileText=t.target.result,e.parseFile()},t.onerror=function(e){throw e},t.readAsText(this.file,this.parseOptions.encoding)},parseFile:function(){var e=this.fileText,t={skipEmptyLines:!0};if(this.parseOptions.delimiter){var i=n._getUnderscore(this.delimiters).findWhere({key:this.parseOptions.delimiter});t.delimiter=i.character}var r=h.parse(e,t);this.setDelimiterByChar(r.meta.delimiter),this.tableData=r.data,this.updateRowAndColCounts(),this.renderTable()},setDelimiterByChar:function(e){var t=n._getUnderscore(this.delimiters).findWhere({character:e});this.parseOptions.delimiter=t.key,this.$(".delimiter-option.current").removeClass("current"),this.$(".delimiter-"+t.key).addClass("current")},renderTable:function(){if(!this.isShown)return void this.$el.one("shown",this.renderTable.bind(this));var e=this,t=!0;this.tableView&&(t=!1,this.tableView.remove());var i=0,r=_.first(this.tableData),o=n._getUnderscore(r).map(function(e,t){var n=new g(t,e);return i+=n.width(),n}),s=n._getUnderscore(_.rest(this.tableData)).map(function(e,t){return new v(t,e)});this.tableView=new c({columns:o,rows:s,scrollView:this.fastScrollView,readOnly:!0,hasEmptyRow:!1,hasRowHandles:!1,width:i,delegate:this}),this.tableView.$el.addClass("fast-scroll-positioned"),t&&this.tableView.$el.css({opacity:0}),this.fastScrollView.setViews([this.tableView]),this.fastScrollView.render(),this.tableView.renderBase(),this.tableView.renderHeader(),this.tableView.rerenderAllRows(),t&&this.onNextTick(function(){e.tableView.$el.css({opacity:1})})},events:{"click .problem":function(e){$(e.target).blur();var t=$(e.target).is(".current");if(this.$(".problem.current").removeClass("current"),this.$(".parse-option-group").hide(),!t){$(e.target).addClass("current");var n=$(e.target).data("group");this.$("."+n+"-group").show()}},"click .delimiter-option":function(e){$(e.target).blur(),this.$(".delimiter-option.current").removeClass("current"),$(e.target).addClass("current"),this.parseOptions.delimiter=$(e.target).data("key"),this.parseFile()},"click .encoding-option":function(e){$(e.target).blur(),this.$(".encoding-option.current").removeClass("current"),$(e.target).addClass("current"),this.parseOptions.encoding=$(e.target).data("key"),this.readFile()},"click .done":function(){this.accept(this.parseOptions)}}}),g=u.extend({isWritable:!1,readOnly:!0,width:_.constant(180),initialize:function(e,t){this.index=e,this.name=t},id:function(){return this.index.toString()},headerHtml:function(){return i.partials.fastHeaderCell({name:this.name})},rowValue:function(e){return e.values[this.index]},cellHtml:function(e){return i.partials.value({text:this.rowValue(e)})},cellValue:function(e){return e?e.isHeaderRow?this.name:e.row?this.rowValue(e.row):"":""}}),v=d.extend({readOnly:!0,initialize:function(e,t){this.index=e,this.values=t},id:function(){return this.index.toString()}});t.exports=m}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/constants":239,"../../common/csvParseOptions":240,"../../common/strings":249,"./fastScrollView":170,"./fastTableColumn":174,"./fastTableRow":176,"./fastTableView":177,"./modalView":203,"./view":236,inflection:672,numeral:696,papaparse:697}],147:[function(e,t){"use strict";{var n=e("./modalView"),i=n;t.exports=i.extend({className:n.extendClassName("delete-codelet-modal"),template:"deleteCodeletModal",events:{"click .delete-button":function(){this.accept()}}})}},{"./modalView":203}],148:[function(e,t){(function(n){"use strict";var i=e("backbone"),r=e("../env"),o=t.exports=BaseObject.extend({scopeName:"abstract",handleClass:"abstract-drag-handle",refreshPositions:!1,propertyNames:function(){return["view","context","onDrop"]},initialize:function(){n._getUnderscore(this).bindAll("start","drop","stop","scope","drag"),this.handleSelector=this.handleClass.toClass(),this.targets=[]},cleanUp:function(){n._getUnderscore(this.targets).invoke("remove"),this.targets=[],this.model=null,this.fromIndex=null},scope:function(){return this.view.cid+"-"+this.scopeName+"-drag"},remove:function(){this.dragging=!1,this.cleanUp(),this.stopListening(),this.container&&this.container.find(this.handleSelector+".ui-draggable").draggable("destroy")},initDrag:function(e){if(!this.model){var t=$(e.target),n=t.closest(this.handleSelector);this.startDraggingForHandle(n)}},startDraggingForHandle:function(e){this.model=this.getModelForHandle(e),this.fromIndex=this.indexForModel(this.model),this.makeTargets()},start:function(e){this.dragging=!0,this.initDrag(e)},stop:function(){this.dragging=!1,this.cleanUp()},drop:function(e){this.onDrop(this.fromIndex,e)},drag:_.noop,makeTargetDroppable:function(e,t){var n=this;e.droppable({scope:this.scope(),tolerance:r.droppableTolerance||"pointer",hoverClass:"hover",drop:function(){n.drop(t)}})},setUpDrag:function(e){var t=this;this.container=e,e.find(this.handleSelector+".draggable").draggable({helper:function(e){return t.initDrag(e),t.makeHelper(e)},cursor:"grabbing",start:this.start,drag:this.drag,stop:this.stop,scope:this.scope(),zIndex:1e3,appendTo:"body",scroll:!1,refreshPositions:t.refreshPositions})},makeTargets:_.thrower("Child prototype must implement makeTargets"),makeHelper:_.thrower("Child prototype must implement makeHelper"),getModelForHandle:_.thrower("Child prototype must implement getModelForHandle"),indexForModel:_.thrower("Child prototype must implement indexForModel")});_.extend(o.prototype,i.Events)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../env":8,backbone:"backbone"}],149:[function(e,t){"use strict";function n(e){return{top:e.origin.top,left:e.origin.left,right:e.origin.left+e.size.width,bottom:e.origin.top+e.size.height}}t.exports=function(e,t,i,r,o){o=o||{};var s;if(e&&(s=e instanceof $?e.bounds():e.getBoundingClientRect?e.getBoundingClientRect():e.origin?n(e):e)){r=_.defaults(r||{},{top:0,left:0,right:0,bottom:0}),r.right=-r.right,r.bottom=-r.bottom;var a=$("<div>");a.addClass(t);var l=_.chain(r).keys().map(function(e){return[e,s[e]+r[e]]}).object().value();return a.offset(l),a.width(l.right-l.left),a.height(l.bottom-l.top),a.appendTo(i)}}},{}],150:[function(e,t){"use strict";var n=e("./geometry");t.exports=function(e,t,i,r,o,s){s=s||"horizontal";var a=Math.min(t.x,e.x),l=Math.min(t.y,e.y),c=Math.abs(t.x-e.x),u=Math.abs(t.y-e.y);l-=o,a-=o,i.css("position","absolute"),i.offset({top:l,left:a}),i.prop({width:c+2*o,height:u+2*o});var d=i.get(0).getContext("2d");d.translate(-a,-l),d.beginPath(),d.moveTo(e.x,e.y);var h=_.clone(e),f=_.clone(t),p=.5,m="horizontal"===s?"x":"y";h[m]=n.lerp(e[m],t[m],p),f[m]=n.lerp(t[m],e[m],p),d.bezierCurveTo(h.x,h.y,f.x,f.y,t.x,t.y),d.strokeStyle=r,d.lineWidth=o,d.stroke()}},{"./geometry":183}],151:[function(e,t){"use strict";var n=e("dropzone"),i=e("../../common/constants"),r=e("../../common/strings"),o=e("../models"),s=e("../routing"),a=e("../env"),l=e("../csrf"),c=e("./view"),u=e("./progressBarView"),d=(e("../../common/errors"),e("./csvPreflightView")),h=c.extend({initialize:function(){this.clickableElement=this.options.clickableElement,this.onNextTick(this.render)},render:function(){var e=this;e.el.dropzone&&e.el.dropzone.destroy();var t="/books.json",o=new n(e.el,{acceptedFiles:"text/csv,application/csv,.csv,application/json,.json",url:t,paramName:"import",clickable:e.clickableElement,previewsContainer:$("<div>").get(0),dictFallbackMessage:r["drag-and-drop-fallback"](),forceFallback:a.disableDropzone,accept:function(e,t){if(n.isValidFile(e,"application/json,.json"))return t();var r=Math.round(e.size/1024/10.24)/100;if(r>i.MAX_CSV_FILE_SIZE_MB)return t("File is too big ({{filesize}}MB). Max filesize: {{maxFilesize}}MB.".stencil({filesize:r,maxFilesize:i.MAX_CSV_FILE_SIZE_MB}));var s=new d({file:e});s.show().then(function(e){_.extend(o.options.params,e),t()}).fail(function(e){e||(e="preflight-canceled"),t(e)}).done()}});o instanceof n?(o.on("sending",function(t,n){e.addProgressBar(),l.addToken(n)}),o.on("uploadprogress",function(t,n){e.updateProgressBar(n)}),o.on("success",function(t,n){e.onImportSuccess(n)}),o.on("error",function(t,n){e.removeProgressBar(),"preflight-canceled"!==n&&(n===o.options.dictInvalidFileType&&(n=r["import-filetype-error"](t)),e.showAlert(n))})):o instanceof window.HTMLElement&&e.$(".import-input").on("change",function(){var n=this.files[0],o=Math.floor(n.size/1024/1024*100)/100;if(o>i.MAX_CSV_FILE_SIZE_MB)return void e.showAlert(r["error-csv-file-size-too-big"]({fileSizeInMb:o,maxFileSize:i.MAX_CSV_FILE_SIZE_MB}));var s=new d({file:n});s.show().then(function(n){mixpanel.track("new_book");var i=e.$(".import-form")[0],r=new window.FormData(i);_.each(n,function(e,t){r.append(t,e)}),$.ajax({url:t,type:"POST",xhr:function o(){var o=$.ajaxSettings.xhr();return o.upload&&o.upload.addEventListener("progress",function(t){if(t.lengthComputable){var n=t.loaded/t.total;n=parseInt(100*n),e.updateProgressBar(n)}},!1),o},beforeSend:function(t){e.addProgressBar(),l.addToken(t)},success:function(t){e.onImportSuccess(t)},error:function(t,n,i){e.removeProgressBar(),e.showAlert(i)},data:r,cache:!1,contentType:!1,processData:!1})}).fail(function(e){if(e)throw e}).done()})},addProgressBar:function(){this.progressBar||(this.progressBar=new u({title:function(e){return 100>e?r["csv-upload-progress-bar-title"]({progress:Math.round(e)}):r["csv-progress-bar-finished-title"]}})),this.progressBar.show()},updateProgressBar:function(e){this.progressBar.updateProgress(e)},removeProgressBar:function(){this.progressBar&&(this.progressBar.hide(),this.progressBar.remove(),this.render())},onImportSuccess:function(e){this.removeProgressBar();var t=o.Book.add(e);this.goToNewBook(t),o.Book.collection.add(t)},goToNewBook:function(e){mixpanel.track("new_book",{id:e.id}),s.router.flash({editSheetTitle:!e.has("template")}).goToBook(e.id)}});t.exports=h},{"../../common/constants":239,"../../common/errors":242,"../../common/strings":249,"../csrf":6,"../env":8,"../models":47,"../routing":76,"./csvPreflightView":146,"./progressBarView":213,"./view":236,dropzone:"dropzone"}],152:[function(e,t){(function(n){"use strict";{var i=e("./view"),r=30,o=6;t.exports=function(e,t){var s=(n._getUnderscore(n._getUnderscore(t).invoke("width")).sum(),1),a=$("<div>").addClass("dummy-table");return a.html(i.templates.dummyTable({rows:e.slice(0,r),columns:t})),n._getUnderscore(n._getUnderscore(a.find("thead td:not(.gutter)")).map$).each(function(e,n){var i=t[n].width();i+=o,i*=s,e.css({width:i})}),a.safeToggleClass("has-fixed",n._getUnderscore(t).soak("0.isFixed()")),a}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./view":236}],153:[function(e,t,n){"use strict";{var i=e("./fastTableEditor"),r=e("../keys"),o=e("./view"),s=(e("../csrf"),e("./attachmentUploader")),a=e("../../common/values"),l=n.HeaderEditor=i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments),this.extraClasses+=" header-editor"}});n.AttributesHeaderEditor=l.extend({}),n.SwitchEditor=i.extend({render:function(){i.prototype.render.apply(this,arguments);var e=this,t=this.cellInfo.table,n=t.delegate;this.column.field().isAnyLink()||this.$("textarea").on("keypress",function(t){var i=n.shouldUseFormulaEditor(e.cellInfo,t);i&&""===e.getRawValue()&&t.which===r.EQUALS&&(t.preventDefault(),e.trigger("switchToFormula",e))})}}),n.ImageEditor=i.extend({render:i.prototype.render.after(function(){this.$el.append(o.partials.attachmentUpload());var e=this.$textarea().outerWidth(!0)+1;this.$uploadButton.css({width:e})}),importFile:function(){var e=this;this.uploader=new s({book:this.options.book,formData:new window.FormData(this.$importForm[0]),filename:this.$importInput[0].files[0].name,finished:function(t,n){return t?(e.showAlert(t),void e.cancel()):(e.url=n,e.keepOpen=!1,e.cellInfo.$cell.find("img").remove(),void e.onEndEditing())}}),this.uploader.importFile()},getValue:function(){return this.url?new a.types.ImageValue(this.url):i.prototype.getValue.call(this)},shouldEndEditingOnBlur:i.prototype.shouldEndEditingOnBlur.withResult(function(e,t){if(!e)return!1;var n=t[1].event;return"blur"===n.type&&$(n.relatedTarget).hasClosest(".fast-table-editor")?(this.keepOpen=!0,!1):e}),events:{"change $importInput":"importFile"}}).addComponents({importForm:".attachment-import-form",importInput:".attachment-input",uploadButton:".attachment-button"})}},{"../../common/values":253,"../csrf":6,"../keys":25,"./attachmentUploader":123,"./fastTableEditor":175,"./view":236}],154:[function(e,t){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/modalView"),r=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/view"),o=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/models/account"),s=(e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/statusBarView"),e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/common/errors")),a=i,l=t.exports=a.extend({className:i.extendClassName("email-confirm"),template:r.templates.emailConfirmModal,initialize:function(){if(function(){var e=this;null==e.user&&(e.user=o.currentUser())}.call(this),!this.user)throw new Error("Email verification view shown with no user");this.listenTo(this.user,"change:emails",this.update)}.after(a.prototype.initialize),update:function(){var e=!this.user.isPrimaryEmailConfirmed();this.$completeButton.safeToggleClass("disabled",e),this.$resendButton.safeToggleClass("disabled",!e),e||(this.$sentMessage.hide(),this.$verifiedMessage.show())},events:{"click $completeButton":"accept","click $resendButton":function(){var e=this;o.account.qSendVerificationEmail().then(function(t){var n=t.result;if("alreadyVerified"===n)throw new s.DisplayableError("error-already-verified");"emailSent"===n&&e.$sentMessage.show()}).done()}},context:function(){return n({},this.user.toContext(),{descriptionKey:this.descriptionKey})}}).addProperties("user","descriptionKey").addComponents({completeButton:".action-button.complete",resendButton:".action-button.resend-link",sentMessage:".link-sent",verifiedMessage:".has-verified"});l.qShowIfNeeded=function(e){(function(){null==e&&(e={})}).call(this),e=n({user:o.currentUser()},e);var t=e.user;return t?t.isPrimaryEmailConfirmed()?Q():this.qShow(e):Q.reject(new Error("Email verification view requested with no user"))}},{"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/models/account":27,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/modalView":203,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/statusBarView":225,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/view":236,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/common/errors":242}],155:[function(e,t){"use strict";var n,i=e("./view"),r=e("./modalView"),o=(e("backbone"),r.extend({className:"error-alert modal hide fade",template:i.templates.errorAlert,initialize:function(){if(n)throw console.error("Not showing new error: "+this.options.message),new AppError("Not displaying new error, one already shown: ${this.options.message}");n=this,_.defaults(this.options,{allowClose:!0}),this.modalOptions={},this.options.backdrop?this.modalOptions=_.pick(this.options,"backdrop"):this.options.allowClose||(this.modalOptions.backdrop="static"),this.$el.on("hide",function(){n=null}),r.prototype.initialize.apply(this,arguments)},events:{"click .show-details":function(){var e=this;this.$(".error-details").slideToggle({complete:function(){e.$(".error-details").selectText()}})},"click .reload":function(){o.isReloading=!0,window.location.reload()}}}));o.isReloading=!1,t.exports=o},{"./modalView":203,"./view":236,backbone:"backbone"}],156:[function(e,t){"use strict";var n=e("./view"),i=n.superExtend(function(){return{className:"error-sheet",initialize:function(){this.sheet=this.options.sheet},render:function(){this.$el.html(n.partials.sheetImportError())}}});t.exports=i},{"./view":236}],157:[function(e,t){"use strict";var n=t.exports=BaseObject.superExtend(function(){return{initialize:function(){this.target.addEventListener(this.type,this,this.useCapture||!1)},propertyNames:function(){return["useCapture","type","callback","target","once"]},stopListening:function(){this.target.removeEventListener(this.type,this,this.useCapture||!1)},handleEvent:function(e){this.callback(e),this.once&&this.stopListening()}}});n.on=function(e){return new this(e)},n.once=function(e){return e=_.extend({},e,{once:!0}),this.on(e)}},{}],158:[function(e,t){"use strict";var n=e("./view"),i=e("./modalView"),r=e("../models/plugins/eventbrite"),o=e("../routing"),s=e("../csrf"),a=(e("../../common/errors"),i.extend({className:"eventbrite-config plugin-config modal hide fade",template:n.templates.eventbriteConfig,initialize:function(){this.trackMetric("show"),this.render(),this.loading=!0,this.eventList=new r.Event.Collection,this.incrementDeferredAction();var e=this;this.eventList.qfetch().then(function(){e.loading=!1,e.updateEvents()}).fail(function(t){throw e.hide(),t}).fin(function(){e.decrementDeferredActions()}).done(),this.addSpinner(this.$(".spinner-container"),this.greyButtonSpinnerOptions)},updateEvents:function(){this.stopSpinning(this.$(".spinner-container")),this.$(".event-container").html(n.partials.eventConfigTable({events:this.eventsContext()}))},eventsContext:function(){return this.eventList.invoke("toContext")},events:{"click .reauth-eventbrite":function(e){this.trackMetric("reauth"),e.preventDefault(),this.hide(),this.trigger("reauth")},"click .import-event":function(e){this.trackMetric("import"),e.preventDefault();var t=$(e.target).closest(".import-event");t.blur();var n=t.data("eventId");this.addSpinner(t,this.greyButtonSpinnerOptions);var i=this;this.incrementDeferredAction(),Q($.post("/plugins/eventbrite/import",{eventId:n,_csrf:s.token})).then(function(e){i.hide(),o.router.goToBook(e.bookId)}).fin(function(){i.decrementDeferredActions()}).done()}}}));t.exports=a,dev.add("eventbriteConfigView",function(){return $(".eventbrite-config").view()}),dev.add("eventList",function(){return dev.eventbriteConfigView.eventList})},{"../../common/errors":242,"../csrf":6,"../models/plugins/eventbrite":52,"../routing":76,"./modalView":203,"./view":236}],159:[function(e,t){"use strict";var n=(e("./view"),e("./eventbriteConfigView")),i=e("./pluginView"),r=i.prototype,o=i.extend({className:"eventbrite-plugin plugin-detail",slug:"eventbrite",remove:function(){this.removeConfigView(),r.remove.apply(this,arguments)},showEventConfig:function(){this.configView=new n,this.configView.show(),this.listenTo(this.configView,"reauth",function(){this.removeConfigView(),this.startOauthFlow({force:!0})})},removeConfigView:function(){this.configView&&(this.stopListening(this.configView),this.configView.remove(),this.configView=null)},onOauthSuccess:function(){this.showEventConfig()}});t.exports=o,dev.add("eventbritePluginView",function(){return o.displayedView()})},{"./eventbriteConfigView":158,"./pluginView":211,"./view":236}],160:[function(e,t){"use strict";{var n=e("./view"),i=e("../keys.js");t.exports=n.extend({tagName:"ul",className:"fast-autocomplete",maxResults:50,initialize:function(){_.extend(this,_.pick(this.options,"input","delegate","chitMode"));this.input.on("keydown."+this.eventNamespace(),_.bind(this.keyDown,this)),this.input.on("input."+this.eventNamespace(),_.bind(this.update,this)),this.firstUpdate=!0,this.changingResults=0},remove:function(){return this.input.off("."+this.eventNamespace()),n.prototype.remove.apply(this,arguments)},update:function(){var e=this.doNotSelectOnNextUpdate;this.doNotSelectOnNextUpdate=!1;var t=this.firstUpdate,n=Q(this.delegate.autocompleteValues(this.firstUpdate));this.firstUpdate=!1;var i=this;this.incrementDeferredAction(),n.then(function(n){var r=i.$el;if(r.empty(),n=_.first(n,i.maxResults),_.each(n,function(e){var t=$("<li>");t.html(i.delegate.renderAutocompleteValue(e)),t.data("autocompleteValue",e),r.append(t)}),n.length>0){var o=n[0];if(!e&&i.delegate.shouldSelectFirstItemOnDisplay(t,o)){var s=i.$("li").first();i.makeActive(s)}i.$el.show()}else i.$el.hide()}).finally(function(){i.decrementDeferredActions()}).done()},isShown:function(){return this.$el.is(":visible")},keyDown:function(e){var t=this.isShown();if(e.keyCode===i.BACKSPACE&&(t&&this.makeActive(null),this.doNotSelectOnNextUpdate=!0),t)if(e.keyCode===i.UP)e.preventDefault(),this.arrow("up");else if(e.keyCode===i.DOWN)e.preventDefault(),this.arrow("down");else if(e.keyCode===i.RETURN&&!e.altKey||e.keyCode===i.TAB){var n=this.$(".active");n.length>0&&(e.preventDefault(),e.stopPropagation(),this.acceptItem(n),e.keyCode===i.RETURN&&this.input.trigger("autocomplete-key-enter"),e.keyCode===i.TAB&&this.input.trigger("autocomplete-key-tab"))}else i.matchesKeys(e.keyCode,"LEFT","RIGHT","HOME","END")&&this.onNextTick(function(){this.update()})},hasActiveItem:function(){return this.$(".active").length>0},acceptItem:function(e){this.delegate.acceptValue(e.data("autocompleteValue"))},arrow:function(e){var t={up:"prev",down:"next"}[e],n={up:"last",down:"first"}[e],i=this.$(".active");if(i.is(this.$("li").first())&&"up"===e)return this.makeActive(null);if(i.is(this.$("li").last())&&"down"===e)return this.makeActive(null);var r=i[t]();r.length||(r=this.$("li")[n]()),this.makeActive(r)},render:function(){var e=this.input.outerWidth()+2;this.$el.css("min-width",e),this.$el.css("max-width",2*e),this.update()},makeActive:function(e){this.$(".active").removeClass("active"),e&&e.addClass("active")},events:{"mousedown li":function(e,t){this.acceptItem(t)},"mouseenter li":function(e,t){this.makeActive(t)},"mouseleave li":function(){this.makeActive(null)}}})}},{"../keys.js":25,"./view":236}],161:[function(e,t){(function(n){"use strict";var i=3,r=2,o=e("./splineTransformer"),s=t.exports=BaseObject.extend({initialize:function(){this.reports=[],this.transformer=new o({axes:["virtual","real"]})},propertyNames:function(){return["viewportHeight","scroll","views","sortController","renderUntil","noStick"]},fillWithViews:function(e){var t=this,i=0,r=_.findIndex(this.views,function(e){return i+=t.getAdjustedVirtualHeight(e),i>t.scroll?!0:void 0});if(-1===r)return $();var o=this.views[r],s=this.getAdjustedVirtualHeight(o),a=i-s;this.vShift=this.scroll-a,this.offset=0,this.virtualOffset=a;var l=r,c=!0,u=[];for(_.each(e[0].querySelectorAll(".stick-top, .stick-bottom"),function(e){e.style.zIndex="",$(e).removeData("sticking")});!this.isFull();){var d=this.views[l];if(!d)break;u.push(d),this.appendView(d,e),t.renderingView=d,d.partialRender(this),t.renderingView=null,c&&!this.noStick&&(this.stickHeaders(d),c=!1),l++}var h=n._getUnderscore(u).last();return h&&!this.noStick&&this.stickFooters(h,e),n._getUnderscore(n._getUnderscore(u).pluck("el")).$},appendView:function(e,t){if(e.isAttached()&&e.$el.contains(":focus")){var n=e.$el.nextAll();n.detach(),e.$el.before(n)}else e.isAttached()&&e.$el.is(":last-child")||(e.detach(),t.append(e.$el))},getAdjustedVirtualHeight:function(e){var t=e.getVirtualHeight();return this.sortController&&(t=this.sortController.adjustVirtualHeight({view:e,positioner:this,virtualHeight:t})),t},prepareElementAndGetRealHeight:function(e){return this.clearNonTransformPosition(e),e.getCachedHeight()},prepareContainer:function(e){this.clearNonTransformPosition(e)},clearNonTransformPosition:function(e){return e.css({position:"absolute",top:0,left:0})},reportContainedElement:function(e,t){var n,i=e.getCachedHeight();this.sortController&&(n=this.sortController.beforeReportElement({element:e,virtualHeight:t,realHeight:i,positioner:this}),t=n.virtualHeight,i=n.realHeight);var r=_.soak(n,"spacer.where");"before"===r&&this.reports.push(n.spacer),this.reports.push({virtualHeight:t,realHeight:i,element:e}),"after"===r&&this.reports.push(n.spacer)},annotateElementWithVirtualOffset:function(e,t){$(e).addClass("has-v-offset").dataAttr("virtualOffset",t)},positionContainer:function(e){var t=0,i=0,r=this,o=this.offset,s=this.virtualOffset,a=0;n._getUnderscore(this.reports).each(function(e){if(e.virtualHeight){var n,l;l=r.vShift?r.vShift/e.virtualHeight:0,n=o-l*e.realHeight,r.vShift&&r.vShift>=e.virtualHeight&&(r.vShift-=e.virtualHeight),r.vShift&&r.vShift>=e.virtualHeight?(r.vShift-=e.virtualHeight,a+=e.realHeight):r.vShift?(a+=l*e.realHeight,o+=(1-l)*e.realHeight,e.virtualHeight&&r.transformer.addPoint(s,n),r.vShift=0):(o+=e.realHeight,e.virtualHeight&&r.transformer.addPoint(s,n)),r.annotateElementWithVirtualOffset(e.element,s),s+=e.virtualHeight,t+=e.realHeight,i+=e.virtualHeight}});var l=this.offset-a;if(e[0]&&"absolute"!==e[0].style.position&&this.clearNonTransformPosition(e),e.transformY!==l&&e.transformY(l),this.annotateElementWithVirtualOffset(e,this.virtualOffset),this.sortController){var c=this.sortController.beforePositionContainer({element:e,virtualHeight:i,realHeight:t,isContainer:!0,positioner:this});t=c.realHeight,i=c.virtualHeight}this.offset+=t-a,this.virtualOffset+=i,this.reports=[]},positionElement:function(e,t){var n,i=this.prepareElementAndGetRealHeight(e);n=this.vShift?this.vShift/t:0;var r=this.offset-n*i;r=Math.trunc(r),e.transformY!==r&&e.transformY(r),e.data("positionedTop",r),this.annotateElementWithVirtualOffset(e,this.virtualOffset),this.vShift&&this.vShift>=t?this.vShift-=t:(this.offset+=(1-n)*i,this.transformer.addPoint(this.virtualOffset,r),this.vShift=0),this.virtualOffset+=t},advance:function(e,t){if(this.sortController&&(e=this.sortController.beforeAdvance({virtualHeight:e,data:t,view:this.renderingView,positioner:this})),this.vShift-=e,this.virtualOffset+=e,this.vShift<0)throw new Error("negative vShift")},stickHeaders:function(e){var t=e.$(".stick-top"),r=_.reduce(t,function(e,t){return t=$(t),e+t.getCachedHeight()},0),o=Math.min(0,this.offset-r),s=this;n._getUnderscore(t).chain().map$.each(function(e){var t=e.data("positionedTop"),n=o>t;s.lastHeaderBottom=t+e.getCachedHeight(),n&&(e.transformY(o),e.css("z-index",i).data("sticking",!0),o+=e.getCachedHeight())})},stickFooters:function(e){var t=e.$(".stick-bottom"),o=_.reduce(t,function(e,t){return t=$(t),e+t.getCachedHeight()},0),s=e.$(".stick-top").last()[0],a=this.lastHeaderBottom,l=this.viewportHeight,c=l-o;n._getUnderscore(t).chain().map$.each(function(e){var t=parseInt(e.transformY()),n=c+e.getCachedHeight(),o=t>=c&&n>a;o&&(e.transformY(c),e.css("z-index",r).data("sticking",!0)),a>c&&$(s).css("z-index",i).data("sticking",!0),c+=n})},isFull:function(){return this.virtualPixelsRequired()<=0},virtualPixelsRequired:function(){return null!=this.renderUntil?this.renderUntil-this.virtualOffset:this.viewportHeight-this.offset}}),a=s.NullPositioner=s.extend(_.mapObject(s.prototype,_.constant(_.noop)));_.extend(a.prototype,{vShift:0,virtualOffset:0,virtualPixelsRequired:_.constant(1/0)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./splineTransformer":223}],162:[function(e,t){(function(n){"use strict";var i=e("../view"),r=e("../fastScrollableView"),o=e("../../routing.js"),s=e("../nameConfigView.js"),a=e("../fastTableRow.js"),l=e("../geometry"),c=e("../../../common/values"),u=e("../editors"),d=(e("../eventListener"),e("../attachmentUploader")),h=e("../cellRender"),f=(e("../fastTableEditor"),e("../fastTableView")),p=e("../formulaView"),m=e("../statusBarView.js"),g=e("../../models"),v=e("node-uuid"),b=e("../../models/region"),y=e("../../parser").cursorToken,w=e("../../globalEvents"),x=e("../../keys"),k=e("../../../common/strings"),S=e("../fastScrollConstants"),C=e("../renderHighlight"),E=e("../../errors"),I=e("../../env"),R=r.superExtend(function(e){return{className:"fast-record-list",initialize:function(){this.model=this.options.model,this.parent=this.options.parent,this.tableId=this.cid,this.flushData=this.options.flushData,this.model.startListeners(),this.listenTo(this.model,"titleChanged",this.renderTitles),this.listenTo(this.model,"fieldsDeleted",this.onFieldsDeleted),this.listenTo(this.model,"fieldAdded",this.onFieldAdded),this.listenTo(this.model,"fieldsChanged",this.onFieldsChanged),this.listenTo(this.model,"fieldHiddenChange",this.onFieldHiddenChange),this.listenTo(this.model,"recordAdded",this.onRecordAdded),this.listenTo(this.model,"recordRemoved",this.onRecordRemoved),this.listenTo(this.model,"recordsChanged",this.onRecordsChanged),this.listenTo(this.model,"recordsSort",this.onRecordsSort),this.listenTo(this.model,"wrapTextChanged",this.onWrapTextChanged),this.listenTo(this.model,"nameFieldChange",this.rerender),this.listenTo(this.model,"duplicateNameChange",this.renderNameCell),this.listenTo(w,"formulaView:show",this.onShowFormulaView),this.listenTo(w,"formulaView:hide",this.onHideFormulaView),this.$el.addClass("fast-scroll-positioned"),this.tableView=this.setupFastTableView(),this.floatingDropdown=$(i.partials.floatingDropdown(this)).appendTo("body"),this.delegateEventsFromElement(this.floatingDropdown,this.events),e.initialize.apply(this,arguments)},onRecordsSort:function(){var e=this,t=this.model.records.map(function(t){var n=e.tableView.rowWithId(t.cid);return n?n:e.newRowForRecord(t)});this.tableView.setRows(t),w.hasChangesInflight()?this.scrollView.setNeedsRenderContent():this.scrollView.renderContent()},renderNameCell:function(e){if(this.tableView){var t=this.tableView.columns[0];this.tableView.redrawCellByIds(e.cid,t.id())}},onFieldAdded:function(e,t){this.tableView&&this.tableView.insertColumn(this.makeColumn(e),t),this.trigger("viewResize")},onShowFormulaView:function(e){this.tableView.clearDoubleClick();var t=e.getField();if(t.sheet()===this.model.sheet){var n=this.tableView.columnWithId(t.get("key"));this.tableView.$getColumnCells(n).addClass("formula-editing"),this.saveSelectionAndRemove()}},getRenderedBounds:function(){var e=this.$header().bounds(),t=this.tableView.getRenderedBounds();return l.unionOfRects(n._getUnderscore([e,t]).compactNullish())},columnDragOptions:function(){return{onDrop:function(e,t){this.onNextTick(function(){this.moveColumn({from:e,to:t})})}.bind(this)}},validateBulkChangeSize:function(e,t){t=t||"change";var n=I.REJECT_THRESHOLD_BULK_UPDATE;if(e>n)throw new E.DisplayableError("error-bulk-op-too-big",{threshold:n,action:t})},saveSelectionAndRemove:function(){this.priorSelectedCell=this.tableView.$selectedCell(),this.tableView.removeSelection()},selectionChanged:function(){var e=this.getSelectionRegion();this.trigger("selectionChanged",this.tableView,e)},getSelectionRegion:function(){var e=this.tableView,t=e.getSelectionRanges();if(t&&-1!==t.rowEnd&&t.rowStart!==e.rows.length){var i=n._getUnderscore(n._getUnderscore(e.rows).getRange(t.rowStart,t.rowEnd+1)).pluckSoak("record"),r=n._getUnderscore(i).compactNullish(),o=n._getUnderscore(e.columns).getRange(t.colStart,t.colEnd+1),s=n._getUnderscore(n._getUnderscore(o).pluckSoak("field()")).compactNullish();return new b(r,s,i)}},hasSelection:function(){return null!=this.tableView.getSelectionAnchorInfo()},getAnchorInfo:function(){return this.tableView.getSelectionAnchorInfo()},getDiagonalInfo:function(){return this.tableView.getDiagonalInfo()},selectRegionByInfo:function(e,t){return this.tableView.selectRegionByInfo(e,t)},onHideFormulaView:function(){this.$(".formula-editing").removeClass("formula-editing"),this.onNextTick(_.bind(this.restoreSavedSelection,this))},restoreSavedSelection:function(){this.priorSelectedCell&&this.priorSelectedCell.length>0&&(this.tableView.selectCell(this.priorSelectedCell),this.priorSelectedCell=null)},getHeaderVirtualHeight:function(){return this.model.hasTitles()?S.virtualHeights.TITLE_HEIGHT:S.virtualHeights.SPACER_HEIGHT},setScrollView:function(t){return this.tableView.setScrollView(t),e.setScrollView.apply(this,arguments)},selectCell:function(e){this.tableView.selectCellByInfo(e)},shouldRenderAppendGroupControl:function(){return this.model.isMetadataLocked()?!1:this.model.isLast&&"group"===this.model.type
},getVirtualHeight:function(){var e;return this.tableView?e=this.tableView.getVirtualHeight():(e=S.virtualHeights.HEADER_HEIGHT,e+=(this.model.records.length+1)*S.virtualHeights.ROW_HEIGHT),this.shouldRenderAppendGroupControl()&&(e+=S.virtualHeights.APPEND_GROUP),e+=this.getHeaderVirtualHeight()},getActualWidth:function(){var e=this.model,t=e.nonFixedFields(),i=n._getUnderscore(n._getUnderscore(t).invoke("get","width")).sum(),r=$(".book-detail").view(),o=r&&r.shouldHaveOnboardingView();return n._getUnderscore([S.widths.HANDLE,S.widths.PADDING,S.widths.ACTION_COLUMN,i,o?S.widths.ADDITIONAL_WIDTH:0,S.widths.RIGHT_MARGIN]).sum()},$header:function(){return this.$(".record-list-header-section")},updateProcessingFields:function(){this.$(".processing").removeClass("processing");var e=this;this.model.sheet.getFields().each(function(t){if(t.get("processing")){var n="col-{{sheetId}}-{{key}}".stencil({sheetId:e.model.sheet.id,key:t.get("key")});e.$("."+n).addClass("processing")}})},initialRender:function(){this.tableView.detach(),this.$el.html(i.templates.fastRecordListView(this.context())),this.$header().attr("id","record-list-{{tableId}}-header-section".stencil(this)),this.$el.append(this.tableView.el),this.tableView.renderBase(),this.renderTitles(),this.updateProcessingFields(),this.$el.safeToggleClass("wrapped",this.model.isWrapped()),this.listenTo(this.tableView,"columnResized",this.onColumnResized)},renderAppendGroupControl:function(){if(this.shouldRenderAppendGroupControl()){if(this.appendGroupControl)return;this.appendGroupControl=$(i.partials.insertGroup()),this.appendGroupControl.addClass("append-group"),this.$el.append(this.appendGroupControl)}else{if(!this.appendGroupControl)return;this.appendGroupControl.remove(),this.appendGroupControl=null}},rerender:function(){this.tableView.remove(),this.tableView=this.setupFastTableView(),this.initialRender(),this.scrollView.renderContent()},partialRender:function(e){this.tableView.isAttached()||this.initialRender(),e.positionElement(this.$(".record-list-header-section"),this.getHeaderVirtualHeight()),this.tableView.partialRender(e),this.renderAppendGroupControl(),this.appendGroupControl&&e.positionElement(this.appendGroupControl,S.virtualHeights.APPEND_GROUP),this.flushData.editFieldKey&&this.flushData.model===this.model&&(this.tableView.beginEditingColumnHeader(this.flushData.editFieldKey),this.flushData.editFieldKey=null)}.triggerTips(),goToNameConfig:function(){this.model.hasFixedKeys()?o.router.flash({configName:!0}).goToSheet(this.model.sheet.id):this.showNameConfig()},columnBounds:function(e){return this.tableView.columnBoundsForId(e.get("key"))},$table:function(){return this.$(".fast-table")},showNameConfig:function(){this.nameView=new s({recordListView:this}),this.listenTo(this.nameView,"update",this.rerender),this.listenTo(this.nameView,"done",function(){this.stopListening(this.nameView),this.nameView.remove(),this.nameView=null,this.rerender()}),this.nameView.show()},onColumnResized:function(e,t){this.captureActions(function(){var n=e.field();n.resize(t,{error:this.errorHandler("update-field-width")})})},columnsAndRows:function(){return{columns:this.createColumns(),rows:this.createRows()}},getDropdownMenu:function(){return this.floatingDropdown},tableOptions:function(){var e=this.model.sheetHasIntegration(),t=(e&&this.model.sheet.getIntegration(),this.model.isMetadataLocked());return _.extend(this.columnsAndRows(),{scrollView:this.scrollView,delegate:this,scrollChild:this,tableId:this.tableId,moveColumn:!t,resizeColumns:!t,canDeleteRow:this.canAddAndRemoveRows(),readOnlyEmptyRow:!this.canAddAndRemoveRows(),readOnly:this.model.isReadOnlyMode(),canEditHeaders:t,canChangeColumns:t,hasWrap:this.model.isWrapped()})},canAddAndRemoveRows:function(){var e=this.model.sheet.getIntegration();return e?e.canCreateRecords():!0},setupFastTableView:function(){var e=this.tableOptions(),t=new f(e);return this.bubble(t,"addedRows"),this.listenTo(t,"selectionChanged",this.selectionChanged),t},getTableView:function(){return this.tableView},removeRow:function(e){this.model.removeRecord(e.record)},addAndPositionRow:function(e,t){var n=this;this.captureActions(function(){var i={before:_.soak(t,"before.record"),after:_.soak(t,"after.record")};n.model.moveRecord(e.record,i,{error:this.errorHandler("reorder-record")})})},fields:function(){return this.model.fields()},createColumns:function(){var e=this,t=_.map(this.fields(),function(t){return e.makeColumn(t)});return t.push(new A(e.model)),t},makeColumn:function(e){var t=this.columnConstructor();return new t(e.get("key"),this.model.sheet,this.model)},createColumn:function(){var e=this.model.getFields().length,t=this;this.captureActions(function(){this.model.insertField(e,{success:function(e){t.tableView.beginEditingColumnHeader(e.get("key"))},error:this.errorHandler({action:"create-field"})})})},columnConstructor:function(){return T},createRows:function(){return _.map(this.model.records.models,this.newRowForRecord.bind(this))},newRowForRecord:function(e){return new M({record:e})},updatePosition:_.noop,moveColumn:function(e){e.from!==e.to&&this.captureActions(function(){this.model.moveField(e.from,e.to,{error:this.errorHandler("move-field")})})},delayedRemove:function(){this.tableView&&this.tableView.delayedRemove(),e.delayedRemove.apply(this,arguments)},remove:function(){this.tableView&&this.tableView.remove(),this.nameView&&this.nameView.remove(),this.fieldTypeView&&this.fieldTypeView.remove(),this.floatingDropdown&&this.floatingDropdown.remove(),i.prototype.remove.apply(this,arguments)},beforeDetach:function(){this.tableView&&this.tableView.beforeDetach()},context:function(){return this.model},onEdit:function(e){var t=this;this.captureActions(function(){t.handleRowChanges(e.rowsChanged),t.handleRowDeletes(e.rowsDeleted),t.handleFieldRenames(e.renamedColumns),t.handleBulkChanges(e.bulkChanges)}),e.bulkChanges.length>0&&e.statusText&&0===e.rowsDeleted.length&&m.show({text:e.statusText})},handleBulkChanges:function(e){if(e&&!_.isEmpty(e)){var t,i=this,r=!1;if(e[0].isHeaderRow){var o=e.shift();t={rename:o.attributes},t.previousNames={},_.each(t.rename,function(e,n){var r=i.model.fieldWithKey(n);t.previousNames[n]=r.get("name"),r.set("name",e)}),t.newFields=o.newValues?n._getUnderscore(o.newValues).map(function(e){return{name:e,guid:v.v4()}}):[]}var s=n._getUnderscore(e).map(function(e){var t={};e.row?t.record=e.row.record:(t.record=g.Record.add({sheetId:i.model.sheet.id}),r=!0);var n=t.record,o={};t.previousAttributes=o;var s={};return _.each(e.attributes,function(e,t){o[t]=n.getValue(t);var r=i.tableView.columnWithId(t),a=r.field(),l=a.resolveValue(e,n);s[t]=l,n.set(t,l,{noSymrefUpdate:!0})}),t.attributes=s,e.newValues?(t.newValues=e.newValues.map(function(e){return c.create(e)}),e.newValues.length>0&&(r=!0)):t.newValues=[],t});this.model.saveBulkChanges(t,s,{success:function(){m.hide(),r&&i.trigger("resetTables")},error:this.errorHandler("update-record-paste"),deferredHandler:this.deferredHandler("working-paste-changes")})}},handleFieldRenames:function(e){if(e){var t=this,n=this.model.getFields();e.forEach(function(e){n.findWhere({key:e.column.id()}).rename(e.name,{error:t.errorHandler("update-field-name")})})}},handleRowChanges:function(e){if(e){var t=this.model.getFields();if(e.length){var n=e.map(function(e){var n=e.attributes;return Object.keys(n).forEach(function(i){var r=t.findWhere({key:i});n[i]=r.resolveValue(n[i],e.row.record)}),{record:e.row.record,attributes:e.attributes,previousAttributes:_.chain(e.attributes).keys().map(function(t){return[t,e.row.record.getValue(t)]}).object().value()}});this.model.saveChanges(n,{error:this.errorHandler("update-record")})}}},handleRowDeletes:function(e){if(e&&e.length){var t,n;e[0].isHeaderRow&&(e.shift(),n={rename:{},previousNames:{}},_.each(this.tableView.columns,function(e){if(e.field){var t=e.field(),i=t.get("key");n.rename[i]="",n.previousNames[i]=t.get("name"),t.set("name","")}}),t="clear-header");var i;e.length&&(i=_.map(e,function(e){return"header"===e?e:e.record}),t=n?"clear-header-delete-records":e.length>1?"delete-records":"delete-record");var r={success:this.showStatus({action:t,context:this.model,undoable:!0}),error:this.errorHandler(t),deferredHandler:this.deferredHandler("working-"+t)};n||1!==i.length?this.model.destroyRecords(n,i,r):this.model.destroyRecord(i[0],r)}},createRow:function(){var e=g.Record.add({sheetId:this.model.sheet.id});return e.resolveAllValues(),this.newRowForRecord(e)},onRecordsChanged:function(e){var t=this,n={};if(e instanceof g.Record)this.onRecordChanged(e),_.extend(n,e.changed);else{if(!(e instanceof g.Record.Collection))throw new Error("onRecordsChanged called with non-record and non-record collection");e.each(function(e){t.onRecordsChanged(e),_.extend(n,e.changed)})}_(n).each(function(e,n){t.tableView.columnWithId(n)&&t.tableView.renderEmptyRowDeferred()})},updateEmptyRow:function(){this.tableView.redrawRowWithId("empty")},onRecordAdded:function(e){var t=this.newRowForRecord(e),n=this.model.records.indexOf(e);-1!==n&&(this.tableView.insertRow(t,n),this.updateEmptyRow())},onRecordRemoved:function(e){this.tableView.removeRow(e.cid),this.updateEmptyRow()},onRecordChanged:function(e){this.savedIds=this.savedIds||O({}),this.savedIds[e.cid]=1,this.renderSavedRecordsDeferred()},renderSavedRecords:function(){var e=this,t=this.savedIds;this.savedIds=O({}),n._getUnderscore(t).each(function(t,n){e.tableView.redrawRowWithId(n)})},onFieldsDeleted:function(e){this.tableView.removeColumn(e.get("key"))},onFieldsChanged:function(e){var t=_.soak(e,"changed");if(this.model.isWrapped()||this.tableView.rerenderAllRows(),e instanceof g.Field&&t){if(_.all(t,function(e,t){return"expression"===t||"type"===t}))return void this.tableView.renderHeader();if(_.any(t,function(e,t){return"validation"===t}))return void this.tableView.rerenderAllRows();this.tableView.redrawEmptyCell(e.get("key"))}else if(e instanceof g.Field.Collection)return void this.setupNewColumns();this.renderTitles(),this.tableView.renderHeader(),this.updateProcessingFields(),this.trigger("viewResize")},onFieldHiddenChange:function(){this.setupNewColumnsDeferred()},onWrapTextChanged:function(){var e=this.model.isWrapped();this.$el.safeToggleClass("wrapped",e),this.tableView.setWrap(e),this.scrollView.setNeedsRenderContent()},setupNewColumns:function(){var e=this,t=n._getUnderscore(this.model.fields()).map(function(t){var n=e.tableView.columnWithId(t.get("key"));return n?n:e.makeColumn(t)}),i=this.tableView.columnWithId("addField");t.push(i?i:new A(e.model)),this.tableView.setColumns(t)},stopFileDrag:function(){this.bodyListener&&(this.bodyListener.stopListening(),this.bodyListener=null,this.$(".upload-overlay").remove(),clearTimeout(this.dragPoll),this.dragPoll=null)},handleFileDrop:function(e,t){var i=n._getUnderscore(e).soak("originalEvent.dataTransfer.files.0");if(i){var r=new window.FormData;r.append("files",i);var o=this;this.uploader=new d({book:this.model.sheet.book(),formData:r,filename:i.name,finished:function(e,n){return e?void o.showAlert(e):void o.setImageUrlForCell(n,t)}}),this.uploader.importFile()}},setImageUrlForCell:function(e,t){var n=new c.types.ImageValue(e);t.isEmptyRow?this.tableView.createRow(t.column,n):this.tableView.cellChange(t.row,t.column,n)},events:{"click .group-option":"onClickGroupOption","click .sort-option":"onClickSortOption","click .field-settings":"onClickFieldSettings","contextmenu .row-empty .table-cell":"onAggregateContextMenu","click .set-type:not(.disabled)":"onClickSetType","click .set-aggregate":"onClickAggregate","click .set-formula:not(.disabled)":"onClickSetFormula","click .remove-formula:not(.disabled)":"onClickRemoveFormula","click .set-required:not(.disabled)":"onClickSetRequired","click .insert-record-above:not(.disabled),.insert-record-below:not(.disabled)":"insertRecordFromContextMenu","click .group-menu-value":"moveRecordToGroup","click .clear-record:not(.disabled)":"onClearRecord","click .delete-record:not(.disabled)":"onDeleteRecord","click .insert-field":"insertFieldFromContextMenu","click .hide-field":"onHideField","click .delete-field:not(.disabled)":"onDeleteField","click .record-list-settings":"showRecordListSettingsMenu","click .delete-record-list":"onDeleteRecordList","click .add-link:not(.disabled)":"onClickAddLink","click .remove-link:not(.disabled)":"onClickRemoveLink","click .add-field":"onClickAddField","click .add-missing-links":"addMissingLinks","click .record-list-title .editable-title":"beginEditingTitle","blur .record-list-title .editable-title":"endEditingTitle","mouseenter .record-list-title .editable-title":"mouseEnterTitle","mouseleave .record-list-title .editable-title":"mouseLeaveTitle","keydown .record-list-title .editable-title":"keyDownTitle","focus .record-list-title .editable-title":"focusTitle","click .unlink-record":"onClickUnlinkRecord","click .use-numeric-commas":"onClickUseNumericCommas","mouseenter .field-icon-link":function(e){var t=$(e.target).closest(".field-icon-link");C.mouseEnter(t)},"mouseleave .field-icon-link":function(e){var t=$(e.target).closest(".field-icon-link");C.mouseLeave(t)},"dropdown-close *":function(){this.onNextTick(function(){Tips.display()})},"click .edit-icon":function(e,t){var n=t.closest("td");this.tableView.beginEditing(n),e.stopPropagation()}},keyboardEvents:{escape:function(){$(".floating-dropdown.open").dropdown("toggle")}},shouldUseFormulaEditor:function(e,t){if(e.isHeaderRow)return!1;if(this.model.isMetadataLocked())return!1;var n=e.column.field();return n.isAnyLink()?!1:!n.isFormula()||t&&!x.matchesKeys(t.which,"RETURN","EQUALS","EQUALS_KEY_DOWN")&&"click"!==t.type?t&&x.matchesKeys(t.which,"EQUALS","EQUALS_KEY_DOWN")?!0:!1:!0},cellInfoForEvent:function(e){return $(e.target).closest(".main-menu").data("context").cellInfo},isEditable:function(e){return!e.column&&e.isHeaderRow?!1:!0},editHandler:function(e,t){var n=e.column.field();if(e.isEmptyRow)return this.editorForEmptyRow(e,t);if(this.shouldUseFormulaEditor(e,t)){t&&t.preventDefault();var i="";return t&&t.which!==x.RETURN&&"click"!==t.type||(i=n.get("expression").stringify(n.formulaSheet())),this.formulaEditHandler(e,i)}return n.isFormula()&&!e.isHeaderRow?!1:null},deleteHandler:function(e){var t=e.column.field();return t.hasIntegration()?!0:!t.isFormula()||e.isHeaderRow||e.isEmptyRow?!0:this.model.isMetadataLocked()?!1:this.formulaEditHandler(e,"")},formulaEditHandler:function(e,t){var n=e.column.field();if(!n.isAnyLink()){var i=this.tableView.$getColumnCells(e.column);if(0===i.length)throw new Error("Can't find column cells for field "+n.id);var r=i.offset().left,o=r+i.outerWidth(),s=this.$("thead"),a=this.tableView.$viewport()[0].getBoundingClientRect(),l=Math.max(s.offset().top,a.top),c=l+s.outerHeight();return p.beginFormulaPanel({initialValue:t,field:n,avoidSpan:{top:l,bottom:c,left:r,right:o}}),!1}},editorForCell:function(e,t){var n;return e.isHeaderRow?(n=new u.HeaderEditor(t),n.listenTo(this.scrollView,"fastScroll",n.onEndEditing)):e.column.field().isImage()?(_.defaults(t,{book:this.model.sheet.book()}),n=new u.ImageEditor(t)):(n=new u.SwitchEditor(t),this.listenTo(n,"switchToFormula",this.switchToFormula)),n},switchToFormula:function(e){e.cancel(),this.formulaEditHandler(e.cellInfo,"")},editorForEmptyRow:function(e,t){var n=$(e.cell);if(!t)return null;var i=n.find(".summary").length>0,r={},o=function(){return this.showAggregateContextMenu(r),!1}.bind(this);return"click"===t.type&&i?(r.event=t,o()):(r.cell=n,i&&t.which===x.RETURN?o():x.matchesKeys(t.which,"EQUALS","EQUALS_KEY_DOWN")?o():null)},columnForEvent:function(e,t){var n=$(e.target).closest(".row-"+t);if(n.length){var i=this.tableView.getCellInfo(n);return i.column}},columnForHandleEvent:function(e){return this.columnForEvent(e,"handle")},columnForHeaderEvent:function(e){return this.columnForEvent(e,"header")},fieldForHandleEvent:function(e){var t=this.columnForHandleEvent(e);if(t)return t.field()},onClickGroupOption:function(e){$(document.activeElement).blur();var t=this.fieldForHandleEvent(e);this.parent.onClickGroupOption(t)},onClickSortOption:function(e){$(document.activeElement).blur();var t=this.fieldForHandleEvent(e);this.parent.onClickSortOption(t)},onClickFieldSettings:function(e){$(document.activeElement).blur(),e.stopPropagation();var t=this.columnForHeaderEvent(e);this.tableView.showColumnContextMenu(t,e)}}});R.deferrableRendering();var T=R.FieldColumn=f.FastTableColumn.extend({className:"fast-field-column",initialize:function(e,t,n){this.sheet=t,this.fieldKey=e,this.recordList=n},shouldOfferAutocompletions:function(e,t){return this.field().shouldOfferAutocompletions(e,t)},useChitMode:function(){return this.field().isAnyLink()},field:function(){return this.sheet.fieldWithKey(this.fieldKey)},isFixed:function(){return this.field().isNameField()},isReadOnly:function(){return this.field().isReadOnly()},isReadOnlyEmptyRow:function(){var e=this.field();return e.isReadOnly()||e.isFormula()},headerHtml:function(){var e=this.field();return h.headerHtml(e,this.recordList)},renderFieldSummary:function(){var e=this.field(),t=this.recordList.summaryValue(this.field());return null!==t?i.partials.summaryCell({summaryValue:t.value.displayValue(e.formatOptions()),displayName:t.displayName}):""},cellHtml:function(e){return e?i.partials.value(e.cellContext(this.field(),this.sheet)):this.renderFieldSummary()},cellDisplayValue:function(e){return e.isHeaderRow?this.field().get("name"):e.row?this.field().getFormattedDisplayValue(e.row.record):""},cellContextMenu:function(e,t){if(!e.isHeaderRow&&e.row){var n={field:this.field().toContext(),row:{id:e.row.record.id}};if(n.row.canAddAndRemoveRows=t.canAddAndRemoveRows(),"subsheet"===t.model.type&&(n.isSubsheet=!0,n.parentRecordName=t.model.record.name()),n.row.hasIntegration=this.sheet.hasIntegration(),n.row.integrationName=this.sheet.integrationName(),t.model.showSearchFieldAction){var r=this.cellDisplayValue(e),o=r&&r.toLowerCase();n.keyword=k.truncate(o,50),n.value=k.truncate(r,50),n.noQuotes=!1;var s=c.create(n.value);s.constructor===c.types.NumericValue&&(n.noQuotes=!0)}var a=this.recordList.missingLinkContext([e.row.record],[this.field()]);n=_.extend(n,a),n.missingLinkSourceCell=e.cell.id,"group"===t.model.type&&(n.row.isGrouped=!0,n.row.groups=t.parent.viewModel.groupContextForRecord(e.row.record));var l=i.partials.cellMenuItems(n);return this.removeNoReadOnlyElements(l)}},removeNoReadOnlyElements:function(e){var t=$("<span />");return t.append(e),t.applyReadOnly(this.recordList.isReadOnlyMode()),t.applyMetadataLock(this.recordList.isMetadataLocked()),t.html()},contextMenu:function(){if("report"!==this.recordList.type){var e=this.field(),t=e.toContext();t.isFastTable=!0,_(t).pickFrom(this.recordList,"showSearchFieldAction","showSortFieldAction","showGroupFieldAction","showReportAction"),t.hasAnyFieldAction=t.showSearchFieldAction||t.showSortFieldAction||t.showGroupFieldAction||t.showReportAction,t.isNameField=e.isNameField(),t.newSheetName=e.displayName().inflect("pluralize"),t.sheets=this.recordList.sheet.book().get("sheets").toContext(),n._getUnderscore(t).extend(e.getConfigRestrictionInfo());var r=_.findWhere(t.sheets,{_id:this.recordList.sheet.id});r.isCurrent=!0,t.aggregates=this.recordList.generateAggregatesContext(e),t.hasFixed=this.recordList.hasFixedKeys(),t.hiddenFields=e.sheet().hiddenFieldsContext(),t.digitGroupIcon="icon-comma",t.digitGroupString="set-field-numeric-commas-us","eu"===g.Account.account.get("numberLocale")&&(t.digitGroupIcon="icon-period",t.digitGroupString="set-field-numeric-commas-eu");var o;return o=e.isNameField()?i.partials.nameFieldMenuItems(t):i.partials.fieldMenuItems(t),this.removeNoReadOnlyElements(o)}},cellValue:function(e){return e.cellValue(this.field())},getNewDisplayValue:function(e,t){return t.displayValue(this.field().formatOptions())},headerValue:function(){return this.field().get("name")},width:function(){return this.field().get("width")},id:function(){return this.field().get("key")},isNameFieldColumn:function(){var e=this.field().get("key");return this.sheet.get("nameKey")===e},headerClassList:function(){var e=[];return this.field().get("processing")&&e.push("processing"),f.FastTableColumn.prototype.headerClassList.apply(this,arguments).concat(e)},headerClasses:f.FastTableColumn.prototype.headerClasses.withResult(function(e){return e.replace(" image-cell file-drop-target","")}),bodyClassList:function(){var e=[],t=this.field(),n=t.get("key");return this.isNameFieldColumn()&&(e.push("name-col"),e.push("fixed")),t.get("processing")&&e.push("processing"),t.isFormula()&&e.push("formula"),e.push("col-{{sheetId}}-{{key}}".stencil({sheetId:this.sheet.id,key:n})),t.isImage()&&e.push("image-cell file-drop-target"),f.FastTableColumn.prototype.bodyClassList.apply(this,arguments).concat(e)},autocompleteValues:function(e){var t=Q.defer(),n=e.replace(y,"");return this.recordList.queryAutocompleteValues(this.field(),n,e,function(e){t.resolve(e)}),t.promise},draggable:function(){return!this.isNameFieldColumn()},dropBefore:function(){return!this.isNameFieldColumn()},getInputValidation:function(e,t){return t.isHeaderRow?f.FastTableColumn.prototype.getInputValidation.apply(this,arguments):this.field().getValidator(e)},dropAfter:!0,isActionColumn:!1,isFieldColumn:!0,useBodyClassesForHeaders:!0}),A=R.ActionColumn=f.FastTableColumn.extend({className:"fast-action-column",selectable:!1,isActionColumn:!0,isFieldColumn:!1,isWritable:!1,initialize:function(e){this.recordList=e},isFixed:function(){return!0},headerHtml:function(){return this.recordList.isMetadataLocked()?"":i.partials.actionColumnHeaderCell()},headerClassList:function(){var e=["action","add-field"];return f.FastTableColumn.prototype.headerClassList.apply(this,arguments).concat(e)},bodyClassList:function(){return f.FastTableColumn.prototype.bodyClassList.apply(this,arguments)},cellHtml:function(e){if(!e)return"";var t=e.record;if(!this.recordList.showRecordLink)return"";var n={url:t.viewUrl(),temporary:t.isTemporary()};return i.partials.recordLink(n)},id:function(){return"addField"},width:function(){return S.widths.ACTION_COLUMN},draggable:!1,dropBefore:!0,dropAfter:!1}),M=a.superExtend(function(e){return{propertyNames:function(){return["record"]},id:function(){return this.record.cid},cellContext:function(e,t){var n=e.get("key"),i=(this.record.getValue(n),t?t.get("nameKey"):null),r={};return i===n&&(r.href=this.record.url()),h.valueContext(this.record,n,r,t)},cellValue:function(e){return this.record.getValue(e.get("key"))},contextMenu:function(e,t){if("report"!==t.model.type&&!t.model.isReadOnlyMode()){var n={};"subsheet"===t.model.type&&(n.isSubsheet=!0,n.parentRecordName=t.model.record.name()),n.id=this.record.id,this.record.isTemporary()&&(n.temporaryCid=this.record.cid);var r=!this.record.id&&!this.record.isTemporary();return n.disabled=r||this.record.sheet().hasIntegration(),n.canAddAndRemoveRows=!r&&t.canAddAndRemoveRows(),n.hasIntegration=this.record.sheet().hasIntegration(),n.integrationName=this.record.sheet().integrationName(),"group"===t.model.type&&(n.isGrouped=!0,n.groups=t.parent.viewModel.groupContextForRecord(this.record)),i.partials.recordMenuItems(n)}},classes:function t(){var t=e.classes.apply(this,arguments);return this.record.isTemporary()&&t.push("temporary"),this.record.isIncludedDueToSticky()&&t.push("sticky-row"),t},handleIcon:function(){var e=this.record.syncState();switch(e){case"error":return"warning-sign";case"syncing":return"refresh";default:return"fb-reorder"}},handleTooltip:function(){var e=this.record.syncState();return"error"===e?this.record.syncErrorMessage():null}}});R.deferrable("setupNewColumns"),t.exports=R}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../common/strings":249,"../../../common/values":253,"../../env":8,"../../errors":9,"../../globalEvents":22,"../../keys":25,"../../models":47,"../../models/region":62,"../../parser":74,"../../routing.js":76,"../attachmentUploader":123,"../cellRender":133,"../editors":153,"../eventListener":157,"../fastScrollConstants":169,"../fastScrollableView":171,"../fastTableEditor":175,"../fastTableRow.js":176,"../fastTableView":177,"../formulaView":182,"../geometry":183,"../nameConfigView.js":204,"../renderHighlight":219,"../statusBarView.js":225,"../view":236,"node-uuid":695}],163:[function(e){"use strict";var t=e("../../models");dev.recordIdForElement=function(e){e=$(e);var n=e.data("row");return t.Record.findByCid(n).id},dev.fieldKeyForElement=function(e){return e=$(e),e.data("column")},dev.rowForRecordId=function(e,n){n||(n="body");var i=t.Record.find(e).cid;return $(n).find("tr.row-"+i)[0]},dev.cellForFieldKey=function(e,t){return $(e).find("td.col-"+t)[0]}},{"../../models":47}],164:[function(e,t){"use strict";var n=e("./core");e("./dev");var i=[e("./titles"),e("./menus"),e("./rowSort")];i.forEach(function(e){e(n)}),t.exports=n},{"./core":162,"./dev":163,"./menus":165,"./rowSort":166,"./titles":167}],165:[function(e,t){(function(n){"use strict";var i=e("../view"),r=(e("../renderHighlight"),e("../../keys"),e("../../actions")),o=e("../../namespace"),s=e("../../viewModels/fastTableRowChange"),a=e("../linkView"),l=e("../statusBarView.js"),c=e("../../../common/strings.js"),u=e("../fieldTypeView"),d=e("../../../common/errors");t.exports=function(e){_.extend(e.prototype,{onAggregateContextMenu:function(e){this.model.isMetadataLocked()||e.altKey||(e.preventDefault(),this.showAggregateContextMenu({event:e}))},onClickAggregate:function(e){this.captureActions(function(){e.preventDefault();var t=$(e.target).closest(".set-aggregate"),n=this.model.fieldWithKey(t.data("key"));n.setAggregate(t.data("type"),{error:this.errorHandler("set-aggregate")})})},onClickSetRequired:function(e,t){e.preventDefault();var n=this.model.fieldWithKey(t.data("key"));this.captureActions(function(){n.saveIfNeeded("required",!n.get("required"),{error:this.errorHandler("update-field")})})},onClickRemoveFormula:function(e){e.preventDefault();var t=$(e.target).closest(".remove-formula"),n=this.model.fieldWithKey(t.data("key"));this.captureActions(function(){n.removeFormula({error:this.errorHandler("update-field")})})},onClickSetType:function(e,t){e.preventDefault();var n=this.model.fieldWithKey(t.data("key"));this.fieldTypeView=new u({field:n}),this.fieldTypeView.show()},onClickSetFormula:function(e){e.preventDefault();var t=$(e.target).closest(".set-formula"),n=this.model.fieldWithKey(t.data("key"));if(!n.isAnyLink()){var i;i="formula"===n.get("type")?n.get("expression").stringify(n.formulaSheet()):"";var r=this.cellInfoForEvent(e);this.formulaEditHandler(r,i)}},insertRecordFromContextMenu:function(e){e.preventDefault();var t=$(e.target).closest(".insert-record-above,.insert-record-below"),n=t.hasClass("insert-record-above"),i=this.cellInfoForEvent(e),r=i.row.record,o=n?"insertRecordAbove":"insertRecordBelow",s=_.clone(i.coordinates);s||(s={},s.row=this.tableView.indexForRow(i.row)),n||s.row++,s.column=0,this.captureActions(function(){var e=this;this.model[o](r,{success:function(){var t=e.tableView.getCellInfoForCoordinates(s);e.tableView.selectCellByInfo(t)},error:this.errorHandler("insert-record")})})},moveRecordToGroup:function(e){e.preventDefault();var t=$(e.target).closest(".group-menu-value");if(!t.hasClass("selected")){var n=t.data(),i=this.cellInfoForEvent(e),o=i.row.record,s={},a={},l=this.model.sheet.fieldWithKey(n.key);s[n.key]=l.resolveValue(n.value),a[n.key]=o.getValue(n.key);var c=this.parent;this.captureActions(function(){var e=r.CreateOrUpdate.extend({defaultOptions:{success:function(){c.trigger("resetQuery")}}});o.action(e,s,a).do({error:this.errorHandler("update-record")})})}},onClearRecord:function(e){e.preventDefault();var t=this.cellInfoForEvent(e),i=this.tableView.columns;i=n._getUnderscore(i).getRange(0,i.length-1);var r=i.map(_.constant("")),o=new s({row:t.row}).setValues(i,r),a=this;this.captureActions(function(){a.handleBulkChanges([o])})},onDeleteRecord:function(e){e.preventDefault();var t=this.cellInfoForEvent(e),n=t.row.record;this.captureActions(function(){this.model.destroyRecord(n,{success:this.showStatus({action:"delete-record",context:n,undoable:!0}),error:this.errorHandler("delete-record")})})},insertFieldFromContextMenu:function(e){e.preventDefault();var t=$(e.target).closest(".insert-field"),n=t.data(),i=n.key,r=n.direction,o=this.model.getFields().pluck("key").indexOf(i);"right"===r&&o++;var s=this;this.captureActions(function(){this.endEditing(!1),this.model.insertField(o,{success:function(e){s.tableView.beginEditingColumnHeader(e.get("key"))},error:this.errorHandler({action:"create-field"})})})},onClickAddField:function(e){if(e.preventDefault(),!this.model.isMetadataLocked()){var t=this.model.getFields().length,n=this,i=this.tableView.$(".add-field .relative");this.addSpinner(i,{lines:10,rotate:30,length:4,width:1,radius:3});var r=this;this.captureActions(function(){this.endEditing(!1),this.model.insertField(t,{success:function(e){n.stopSpinning(i),r.tableView.beginEditingColumnHeader(e.get("key"))},error:this.errorHandler({action:"create-field",spinner:i})})})}},onHideField:function(e,t){e.preventDefault();var n=t.data("key");if(!n)throw new Error("No key defined for hide field");var i=this.model.fieldWithKey(n);if(!i)throw new Error("No field found for hide field (key {{key}})".stencil({key:n}));this.captureActions(function(){this.model.hideField(i,{success:this.showStatus({action:"hide-field",context:i,undoable:!0}),error:this.errorHandler("hide-field")})})},onDeleteField:function(e){e.preventDefault();var t=$(e.target).closest(".delete-field"),n=this.model.fieldWithKey(t.data("key"));this.captureActions(function(){this.model.deleteField(n,{success:this.showStatus({action:"delete-field",context:n,undoable:!0}),error:this.errorHandler("delete-field")})})},onDeleteRecordList:function(e){this.captureActions(function(){e.preventDefault();var t="delete-"+this.model.templateKey();this.model.delete({success:this.showStatus({action:t,context:{name:this.model.deleteTitle()},undoable:!0}),error:this.errorHandler(t)})})},showRecordListSettingsMenu:function(e){if(this.model.showDeleteListAction){var t={deleteActionTemplate:"delete-"+this.model.templateKey(),name:this.model.deleteTitle()};this.Menus.displayMenu({event:e},this,i.partials.groupMenuItems(t))}},showContextMenu:function(e,t,n){if(t.isEmptyRow)this.showAggregateContextMenu({event:e},t.cell);else{var i=$(t.cell).closest(".table-cell");i.isEmpty()&&(i=$(e.target)),this.Menus.displayMenu({event:e,cell:i},{cellInfo:t},n)}},showAggregateContextMenu:function(e){if(!this.model.isMetadataLocked()){var t=e.event,n=e.cell||$(t.target).closest(".table-cell"),r=this.tableView.getCellInfo(n).column;if(!r.isActionColumn){var o=r.field(),s=o.toContext();s.aggregates=this.model.generateAggregatesContext(o),this.Menus.displayMenu({event:t,cell:n},{cell:n},i.partials.aggregateMenuItems(s))}}},onClickRenameField:function(e){e.preventDefault();var t=this.cellInfoForEvent(e);this.tableView.beginEditing($(t.cell),!1,e,!0)},onClickAddLink:function(e){e.preventDefault();var t=this.cellInfoForEvent(e),n=t.column.field();if(!n.hasAnyFormula()){var i=$(t.cell),r=this.tableView.columnBoundsForHeaderCell(i),o={x:r.origin.left+r.size.width/2,y:r.origin.top+r.size.height/2},s=this.$el.closest(".book-detail").view();a.start(s,{field:n,point:o})}},onClickRemoveLink:function(e){e.preventDefault();var t=this.cellInfoForEvent(e),n=t.column.field(),i=n.linkedSheet();i&&(this.captureActions(function(){var e={fieldName:n.displayName(),sheetTitle:i.displayTitle()};n.removeLink({success:this.showStatus({action:"remove-link",context:e,undoable:!0}),error:this.errorHandler("remove-link")})}),l.show({text:c["action-working-remove-link"]()}))},onClickUnlinkRecord:function(e){var t=this.cellInfoForEvent(e),n=t.row.record;n&&this.captureActions(function(){this.model.unlinkRecord(n,{error:this.errorHandler("remove-link")})})},onClickUseNumericCommas:function(e){var t=this.cellInfoForEvent(e),n=t.column.field(),i=n.formatOptions().numericCommas;
this.captureActions(function(){n.saveFormatOptions({numericCommas:!i},{error:this.errorHandler("update-field")})})},showMultiSelectionContextMenu:function(e,t,n){var r=this.getRecordsAndFieldsFromRanges(n),o=this.model.missingLinkContext(r.records,r.fields),s=t.cell||e.target;s=$(s).closest(".table-cell"),this.Menus.displayMenu({event:e,keepSelection:!0,cell:s},this,i.partials.missingLinkMenuItem(o))},getRecordsAndFieldsFromRanges:function(e){var t=[];e.eachBodyRow(function(e){t.push(e.record)});var n=[];return e.eachColumn(function(e){n.push(e.field())}),{records:t,fields:n}},addMissingLinks:function(e){var t,n=this,i=this.tableView.getSelectionRanges();if(i)t=this.getRecordsAndFieldsFromRanges(i);else{var o=$(e.target).closest(".add-missing-links").data("missing-source-cell"),s=this.tableView.getCellInfo($("#"+o));if(0===s.length)return;if(s.isEmptyRow||s.isHeaderRow)return;t={records:[s.row.record],fields:[s.column.field()]}}this.captureActions(function(){this.model.addMissingLinks(t.records,t.fields,{error:this.errorHandler("add-missing-records")}),r.performCustomAction({perform:_.noop,revert:function(){n.onNextTick(function(){throw new d.DisplayableError("cannot-revert-bulk-create")})},reperform:function(){n.onNextTick(function(){l.show(c["cannot-reperform-bulk-create"]())})}})})}}),o(e,"Menus",{displayMenu:function(e,t,n){var i=this;e.keepSelection||i.tableView.removeSelection();var r=e.event&&e.event.originalEvent&&e.event,o=e.cell;r?(r.preventDefault(),r.stopPropagation(),$(r.target).trigger("fieldbook:showmenu")):o.trigger("fieldbook:showmenu");var s=i.getDropdownMenu(),a=s.find(".dropdown-menu").first();s.removeClass("open"),a.html(n),a.data("context",t);var l;r?l={top:r.pageY,left:r.pageX}:(l=o[0].getBoundingClientRect(),l={top:l.top,left:l.left});var c=a.outerWidth(!0),u=$(window).width();l.left+c>u&&(l.left=u-c);var d=a.outerHeight(!0),h=$(window).height();l.top+d>h&&(l.top=h-d),s.offset(l),a.find(".dropdown-submenu").on("mouseover",function(){var e=$(this).find(".dropdown-menu"),t=e.offset(),n=e.width();t.left+n>u&&(t.left=l.left-n,e.offset(t))}),s.find(".dropdown-toggle").dropdown("toggle"),a.autoTooltip({container:".fast-scroll",placement:"right",autoPlacement:!0})}})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../common/errors":242,"../../../common/strings.js":249,"../../actions":2,"../../keys":25,"../../namespace":73,"../../viewModels/fastTableRowChange":89,"../fieldTypeView":178,"../linkView":193,"../renderHighlight":219,"../statusBarView.js":225,"../view":236}],166:[function(e,t){"use strict";var n=(e("../fastSortController"),e("../fastScrollConstants")),i=e("../view");t.exports=function(e){_.extend(e.prototype,{makeSurrogateContent:function(e){var t=e.clone();t.attr("id","");var n=$(i.partials.rowSortSurrogate());return n.find(".fast-table").addClass(this.tableView.cid),n.find("table").append(this.$("colgroup").clone()),n.find(".body").append(t),n.find(".body tr").children().css({borderTopWidth:1,borderTopStyle:"solid"}),n},getId:function(){return this.tableId},makeSortSpacer:function(){return $('<tr class="table-row">')},virtualHeightForSortItem:function(){return n.virtualHeights.ROW_HEIGHT},getItemData:function(e){var t=this.tableView.rowFromRowElement(e).record;return{record:t,recordList:this.model,index:this.model.records.indexOf(t)}},getSortDelegate:function(){return this},beforeAdvance:function(e,t){return e.recordList!==this.model?t.virtualHeight:this.model.records.contains(e.record)?e.index<t.data.firstIndex?t.virtualHeight-n.virtualHeights.ROW_HEIGHT:t.virtualHeight:t.virtualHeight},onStartDrag:function(){this.tableView.removeSelection(),this.trigger("startDrag")},onCancelDrag:function(){this.trigger("stopDrag")},onStopDrag:function(e,t){return e?void this.captureActions(function(){var n=this,i={};_(t).each(function(e,t){if(e.length){var r=n.tableView.rowFromRowElement(e);r&&(i[t]=r.record)}}),this.scrollView.pauseRenderLoop(),this.model.moveRecord(e.record,i,{oldRecordList:e.recordList,error:this.errorHandler("reorder-record"),complete:function(){n.scrollView.unpauseRenderLoop(),n.trigger("stopDrag")}})}):void this.trigger("stopDrag")}})}},{"../fastScrollConstants":169,"../fastSortController":173,"../view":236}],167:[function(e,t){"use strict";var n=e("../view"),i=e("../../../common/strings"),r=e("../renderHighlight"),o=e("../../keys"),s=e("../../namespace");t.exports=function(e){_.extend(e.prototype,{beginEditingTitle:function(){if(this.model.allowTitleRename){var e=this.$(".record-list-title .editable-title");e.is(":focus")||(e.text(this.model.editableTitleText()),e.removeClass("name-placeholder"),e.focus(),this.trigger("beginEditingTitle"))}},endEditingTitle:function(e){this.model.allowTitleRename&&this.captureActions(function(){var t=$(e.target),n=i.normalize(t.text());try{this.model.rename(n,{error:this.errorHandler("rename-"+this.model.type)})}finally{this.renderTitles(),this.trigger("endEditingTitle")}})},renderTitles:function(){var e=this.$(".record-list-title");if(e&&!e.is(":focus")&&e.find(":focus").isEmpty()){var t=this.model.titles();if(t){var i=this.Titles.numberShown(),r=_.range(t.length-i,t.length),o=this.model.fixedFields(),s=this,a=_.map(r,function(e){s.model.titleUrl(e);return{valueInfo:s.model.titleContext(e),ruler:t.length>1?0===e:!1,size:s.Titles.size(e,t.length),fieldName:o[e].displayName(),placeholderTitle:s.model.placeholderTitle(),isPlaceholder:s.model.subsheet?!s.model.editableTitleText():!1}});e.html(n.partials.groupTitles({titles:a,allowTitleRename:this.model.allowTitleRename,showDeleteListAction:!this.model.isMetadataLocked()&&this.model.showDeleteListAction,showFieldNames:this.model.showFieldNames()})),this.$(".record-list-subheader .icon-fb-link").tooltip(),e.autoTooltip(),this.trigger("renderedTitles")}}},mouseEnterTitle:function(e){var t=$(e.target).closest(".record-list-title");this.model.subsheet&&r.mouseLeave(t)},mouseLeaveTitle:function(e){var t=$(e.target).closest(".field-icon-link");r.mouseEnter(t)},focusTitle:function(e){this.onNextTick(function(){$(e.target).selectText()})},keyDownTitle:function(e){var t=$(e.target);e.which===o.RETURN&&(e.stopPropagation(),t.blur())}}),s(e,"Titles",{numberShown:function(){var e=this;return null!=e.options.numberOfShownTitles?e.options.numberOfShownTitles:1},size:function(e,t){return 1===t?"middle":e===t-1?"small":e===t-2?"middle":"large"}})}},{"../../../common/strings":249,"../../keys":25,"../../namespace":73,"../renderHighlight":219,"../view":236}],168:[function(e,t){(function(n){"use strict";var i=e("./fastRecordListView"),r=e("../viewModels/sheetStyle.js"),o=e("./view.js"),s=(t.exports=i.superExtend(function(e){return{initialRender:function(){this.$el.addClass("report"),e.initialRender.apply(this,arguments),this.updateStyle()},updateStyle:function(){this.style&&this.style.detach(),this.style=new r({sheet:this.model.sheet}).attach()},remove:function(){return this.style&&this.style.detach(),this.tableView&&n._getUnderscore(this.tableView.columns).each(function(e){e.restoreWidth&&e.restoreWidth()}),e.remove.apply(this,arguments)},tableOptions:function(){var t=e.tableOptions.apply(this,arguments);return _.extend(t,{moveColumn:!0,resizeColumns:!0})},editHandler:function(t){return t.column.field().isReportFormula()?e.editHandler.apply(this,arguments):!1},shouldUseFormulaEditor:function(e){return e.column.field().isReportFormula()},columnConstructor:function(){return s},insertFieldAndEdit:function(e,t){var n=this.model.insertReportFormula(e,t);this.updateStyle();var i=this.tableView.rows[0];if(i){var r=this.tableView.columnWithId(n.get("key")),o=this.tableView.$getCell(i,r);this.tableView.beginEditing(o,{select:!0})}},onClickAddField:function(){this.insertFieldAndEdit()},showReportFieldContextMenu:function(e,t){this.Menus.displayMenu({cell:$(e.cell)},{cellInfo:e},o.partials.reportFormulaFieldMenuItems(t)),$(".root > .floating-dropdown [title]").tooltip({placement:"right",container:".record-list"})},events:{"click .insert-column-before":function(e){var t=$(e.target).closest(".dropdown-menu").data("context").cellInfo;this.insertFieldAndEdit(t.column.field(),{before:!0})},"click .insert-column-after":function(e){var t=$(e.target).closest(".dropdown-menu").data("context").cellInfo;this.insertFieldAndEdit(t.column.field(),{before:!1})},"click .edit-formula":function(e){var t=$(e.target).closest(".dropdown-menu").data("context").cellInfo;this.tableView.beginEditing(t.cell)}},columnDragOptions:function(){var t=e.columnDragOptions.apply(this,arguments);return _.extend(t,{context:{report:!0}})},showAggregateContextMenu:function(){},onColumnResized:function(e,t){e.field().set("width",t)},onFieldsChanged:function(){return this.updateStyle(),e.onFieldsChanged.apply(this,arguments)},moveColumn:function(){e.moveColumn.apply(this,arguments),this.trigger("resetTables")}}}),i.ReportColumn=i.FieldColumn.superExtend(function(e){return{initialize:function(){e.initialize.apply(this,arguments),this.originalWidth=this.field().get("width")},restoreWidth:function(){this.field().set("width",this.originalWidth)},headerClassList:function(){var t=e.headerClassList.apply(this,arguments);return t.push("no-select"),t},canDropBefore:function(){return this.field().isReportFormula()},draggable:function(){return this.field().isReportFormula()},cellContextMenu:function(){},contextMenu:function(e,t){var n=this.field();if(n.isReportFormula()){var i={key:n.get("key"),name:n.displayName()};t.showReportFieldContextMenu(e,i)}}}}))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../viewModels/sheetStyle.js":109,"./fastRecordListView":164,"./view.js":236}],169:[function(e,t){"use strict";t.exports={virtualHeights:{TITLE_HEIGHT:20,ROW_HEIGHT:20,HEADER_HEIGHT:40,SPACER_HEIGHT:10,APPEND_GROUP:18,RECORD_ADD_FIELD:15,SUBSHEET_LOADING:15,ADD_SUBSHEET:25,RESTORE_SUBSHEET:15,SAVE_RECORD:30},widths:{LEFT_MARGIN:20,HANDLE:11,ACTION_COLUMN:45,SCROLL_BAR_THICKNESS:16,ADDITIONAL_WIDTH:500,RIGHT_MARGIN:20,PADDING:40,RECORD_ADD_FIELD:100,SUBSHEET_LOADING:50,ADD_SUBSHEET:227,SAVE_RECORD:55},FLING_DELAY:5e3,SCROLL_LINE_HEIGHT:20}},{}],170:[function(e,t){(function(n){"use strict";var i=e("./view"),r=e("./fastPositioner"),o=e("./fastScrollConstants"),s=e("jss"),a=e("./geometry"),l=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/globalEvents"),c=o.widths.SCROLL_BAR_THICKNESS,u=40,d=.9,h=300,f={top:0,bottom:0,left:10,right:10},p=t.exports=i.extend({className:"fast-scroll",flingDecay:.15,minimumFling:5,initialize:function(){n._getUnderscore(this).bindAll("renderTick"),this.scrollY=this.scrollX=this.renderedScrollY=0,this.scrollHeight=this.scrollWidth=0,this.positionUnder=this.options.positionUnder,this.views=[],this.needsRenderContent=0,this.renderLoopPause=0,this.styleScope="#"+this.id()+" ",this.styles={},this.fling=[0,0]},renderBase:function(){this.$el.html(i.templates.fastScroll()),this.hasBrowserScrollHack||(this.hasBrowserScrollHack=!0,this.$el.on("scroll",function(){var e=this;e.scrollLeft=0,e.scrollTop=0})),this.startRenderLoop()},render:function(){this.renderBase(),this.$scrollBarX=this.$(".h-scroll-bar"),this.$scrollBarY=this.$(".v-scroll-bar"),this.$spacerX=this.$scrollBarX.find(".spacer"),this.$spacerY=this.$scrollBarY.find(".spacer"),this.$content=this.$(".fast-scroll-content"),this.hasRendered=!0,this.sizeToWindow(),this.stopExternalListening(),this.startExternalListening(),this.updateScrollSize(),this.renderContent()},setNeedsRenderContent:function(){this.needsRenderContent++,this.incrementDeferredAction()},startRenderLoop:function(){this.renderLoopId||(this.renderLoopId=window.requestAnimationFrame(this.renderTick))},pauseRenderLoop:function(){this.renderLoopPause++},unpauseRenderLoop:function(){this.renderLoopPause=0,this.renderTick()},decayFling:function(){var e=this;return this.fling=this.fling.map(function(t){return t*=1-e.flingDecay,Math.abs(t)<e.minimumFling&&(t=0),t}),this.fling},stopRenderLoop:function(){this.renderLoopId&&(this.decrementDeferredActions(this.needsRenderContent),this.needsRenderContent=0,window.cancelAnimationFrame(this.renderLoopId),delete this.renderLoopId)},renderTick:function(){this.renderLoopPause||(this.pauseFling||(this.decayFling(),this.scrollBy(this.fling[0],this.fling[1])),this.needsRenderContent&&!l.hasChangesInflight()&&(this.renderContent(),this.triggerScrollOnNextRender&&(this.trigger("fastScroll"),this.triggerScrollOnNextRender=!1)),this.renderLoopId=window.requestAnimationFrame(this.renderTick))},onNextRender:function(e){this.once("scrollRender",e)},triggerRenderEvent:function(){this.trigger("scrollRender"),this.$el.trigger("scrollRender")},transformRectToViewport:function(e,t){return t=t||this.$content.bounds(),e=a.makeRectFromClientRect(e),e.x-=t.x,e.y-=t.y,e},viewportBounds:function(){if(this.cachedViewportBounds)return this.cachedViewportBounds.clone();var e=this.$content.bounds();return e.bottom-=c,e.right-=c,this.cachedViewportBounds=e,e.clone()},invalidateCachedViewportBounds:function(){this.cachedViewportBounds=null},adjustedViewportBoundsForView:function(e){var t=this.viewportBounds(),n=e.$(".stick-top:data(sticking)").allBounds();if(n.length){var i=a.unionOfRects(n);t.top=i.bottom}var r=e.$(".stick-bottom:data(sticking)").allBounds();if(r.length){var o=a.unionOfRects(r);t.bottom=o.top}return t},viewportHeight:function(){var e=this.$el.innerHeight();return e-c},renderContent:function(e){this.sizeToWindow(),e=_.defaults({},e,{viewportHeight:this.viewportHeight(),scroll:this.scrollY,views:this.views,sortController:this.sortController});var t=(this.$el.innerHeight(),new r(e)),i=t.fillWithViews(this.$content);n._getUnderscore(this.$content.children().not(i)).each(function(e){var t=$(e).view();if(!t)throw new Error('ScrollView subelement has no view; tag: "{{tagName}}"; id: "{{id}}"; class: "{{className}}"'.stencil(e));t.detach()}),this.transformer=t.transformer,this.renderedScrollY=this.scrollY,this.updateZIndexes(),this.updateAllStyles(),this.$(".fast-scroll-positioned").transformX(-this.scrollX),this.triggerRenderEvent(),this.decrementDeferredActions(this.needsRenderContent),this.needsRenderContent=0},viewForElement:function(e){return e=$(e),n._getUnderscore(this.views).find(function(t){return t.$el.containsInclusive(e)})},virtualTopForView:function(e){var t=0;return n._getUnderscore(this.views).any(function(n){return n===e?!0:void(t+=n.getVirtualHeight())}),t},getStyleInfo:function(e){return this.styles[e]=this.styles[e]||{}},setViews:function(e){this.stopListeningToViews();var t=n._getUnderscore(this.views).difference(e);n._getUnderscore(t).invoke("remove"),this.views=_.clone(e),n._getUnderscore(this.views).invoke("setScrollView",this),this.listenToViews(),this.updateScrollSize()},updateZIndexes:function(){if(!(this.views.length<2)){var e=this.$content.children(),t=e.length;n._getUnderscore(n._getUnderscore(e).map$).each(function(e,n){e.css({zIndex:t-n,position:"absolute"})})}},sizeToWindow:function(){if(!this.renderLoopPause){var e=this.$el.height(),t=this.el.getBoundingClientRect(),n=this.container?this.container.bounds().bottom:window.innerHeight,i=n-t.top;e!==i&&(this.$el.height(i),this.setNeedsRenderContent())}},startExternalListening:function(){var e=this;$(window).on(this.namespacedEventName("resize"),function(){e.invalidateCachedViewportBounds(),e.sizeToWindow(),e.updateScrollBars(),e.setNeedsRenderContent()}),this.$scrollBarY.on(this.namespacedEventName("scroll"),function(){e.scrollTo(null,e.$scrollBarY.scrollTop()),e.setNeedsRenderContent()}),this.$scrollBarX.on(this.namespacedEventName("scroll"),function(){e.scrollTo(e.$scrollBarX.scrollLeft(),null),e.setNeedsRenderContent()})},listenToViews:function(){var e=this;n._getUnderscore(this.views).each(function(t){e.listenTo(t,"viewResize",e.viewResized)})},viewResized:function(){this.updateScrollSize(),this.setNeedsRenderContent()},stopListeningToViews:function(){var e=this;n._getUnderscore(this.views).each(function(t){e.stopListening(t)})},stopExternalListening:function(){$(window).unbindViewEvents(this),this.$scrollBarY&&this.$scrollBarY.unbindViewEvents(this),this.$scrollBarX&&this.$scrollBarX.unbindViewEvents(this)},remove:function(){return this.stopRenderLoop(),this.stopExternalListening(),n._getUnderscore(this.views).invoke("remove"),this.detachAllStyles(),i.prototype.remove.apply(this,arguments)},transformVerticalDelta:function(e){if(!this.transformer)return e;var t=this.scrollY-this.renderedScrollY,n=this.transformer.convert(this.scrollY).from("virtual").to("real"),i=e;n!==this.transformer.OUT_OF_BOUNDS?i+=n:t=0;var r=this.transformer.convert(i).from("real").to("virtual");return r===this.transformer.OUT_OF_BOUNDS?e:r=r-t-this.renderedScrollY},scrollBy:function(e,t){var n,i;null!=e&&(n=this.scrollX+e),null!=t&&(t=this.transformVerticalDelta(t),i=this.scrollY+t),this.scrollTo(n,i)},scrollTo:_.limitRecursion(5,function(e,t){var n=this.scrollX,i=this.scrollY;null==e||this.xScrollDisabled||(isNaN(e)&&(e=0),this.scrollX=_.clamp(e,0,this.scrollWidth-this.$content.innerWidth()+c)),null!=t&&(isNaN(t)&&(t=0),this.scrollY=_.clamp(t,0,this.scrollHeight)),(this.scrollX!==n||this.scrollY!==i)&&(this.beforeScroll(),this.triggerScrollOnNextRender=!0,this.setNeedsRenderContent(),this.updateScrollBars(),this.afterScroll())}),beforeScroll:_.debounce(function(){this.containsTip(this.$el)&&this.hideTip()},h,!0),afterScroll:_.debounce(function(){this.displayTip()},h),scrollToEndOfView:function(e){var t=(this.views.indexOf(e),this.virtualTopForView(e)+e.getVirtualHeight());this.scrollTo(null,t)},ensureVirtualPosition:function(e,t){var n=t;t<this.scrollY&&this.scrollTo(null,e-1),n+=1,this.renderContent({renderUntil:n}),this.setNeedsRenderContent()},ensureBottomOfView:function(e){e.el||(e=this.viewForElement(e)),this.scrollToEndOfView(e);var t=this.scrollY;this.scrollTo(null,this.scrollY-this.viewportHeight()),this.renderContent({renderUntil:t}),this.setNeedsRenderContent()},scrollToTopOfView:function(e,t){e.el||(e=this.viewForElement(e));var n=this.virtualTopForView(e);t&&this.scrollY<=n||(this.scrollTo(null,this.virtualTopForView(e)),this.renderContent())},scrollToBottomOfView:function(e,t){e.el||(e=this.viewForElement(e));var n=this.virtualTopForView(e)+e.getVirtualHeight();if(t){var i=this.transformer.convert(this.viewportHeight()).from("real").to("virtual");if(i>=n)return;if(i===this.transformer.OUT_OF_BOUNDS)return}this.scrollTo(null,n-this.viewportHeight()),this.renderContent({renderUntil:n,noStick:!0});var r=this.$(".has-v-offset").last().bounds();if(!r)throw new Error("No positioned elements in last view");r=this.transformRectToViewport(r);var o=r.bottom,s=this.transformer.convert(o-this.viewportHeight()).from("real").to("virtual");this.scrollTo(null,s),this.renderContent()},scrollElementToTop:_.limitRecursion(10,function(e,t,n){if(!n){var i=this.viewForElement(e);n=this.adjustedViewportBoundsForView(i)}var r,o=this.transformRectToViewport(e.bounds(),n),s=this.transformer.findRealParameter(o.top-t);if(s===this.transformer.OUT_OF_BOUNDS){if(0===this.scrollY)return;var a=this.transformer.firstVirtual();this.scrollTo(null,a-1),this.renderContent(),this.scrollElementToTop(e,t,n)}else r=this.transformer.getVirtual(s);this.scrollTo(null,r)}),scrollElementToBottom:function(e,t,n){if(!n){var i=this.viewForElement(e);n=this.adjustedViewportBoundsForView(i)}var r,o=this.transformRectToViewport(e.bounds(),n);if(o.bottom<n.height-t){var s=this.transformer.convert(o.bottom).from("real").to("virtual");this.scrollTo(null,this.scrollY-n.height),this.renderContent({renderUntil:s+1}),o=this.transformRectToViewport(e.bounds(),n)}r=this.transformer.convert(o.bottom-n.height+t).from("real").to("virtual"),this.scrollTo(null,r),this.setNeedsRenderContent()},scrollYElementIntoView:function(e,t,n){e=$(e);var i=this.viewForElement(e),r=this.adjustedViewportBoundsForView(i),o=e.bounds();r.top+=t,r.bottom-=n,o.top<r.top?this.scrollElementToTop(e,t,r):o.bottom>r.bottom&&this.scrollElementToBottom(e,n,r)},scrollXElementIntoView:function(e,t,n){var i=50,r=this.$content.bounds();r.right-=c,r.left+=t,r.right-=n;var o=e.bounds();o.x-=r.x;var s;o.width>=r.width?this.scrollBy(o.x,null):o.left<0?(s=o.left-n,this.scrollX+s<=i&&o.right<r.width?this.scrollTo(0,null):this.scrollBy(s,null)):o.right>r.width&&(s=o.right-r.width+n,this.scrollBy(s,null))},scrollElementIntoView:function(e,t,n){t=t||f,n=n||{},n.noYScroll||this.scrollYElementIntoView(e,t.top,t.bottom),n.noXScroll||this.scrollXElementIntoView(e,t.left,t.right)},updateScrollBars:function(){if(this.hasRendered){this.$spacerX.width(this.scrollWidth),this.$scrollBarX.scrollLeft(this.scrollX),this.$scrollBarX.safeToggleClass("no-pointer",this.scrollWidth<=this.$content.innerWidth());var e=this.$el.height()+this.scrollHeight;this.$spacerY.height(e),this.$scrollBarY.scrollTop(this.scrollY)}},updateScrollSize:function(){var e=this.views.reduce(function(e,t){return{height:e.height+t.getVirtualHeight(),width:Math.max(e.width,t.getActualWidth())}},{height:0,width:0});this.scrollWidth=e.width,this.scrollHeight=e.height,this.updateScrollBars(),this.setNeedsRenderContent()},onWheel:function(e){e.preventDefault(),e.stopPropagation();var t=$(e.target),n=this,i=function(e){e.preventDefault(),e.stopImmediatePropagation(),n.processWheelEvent(e)};t.on("wheel",i),_.delay(function(){t.off("wheel",i)},o.FLING_DELAY),this.processWheelEvent(e)},onTouchStart:function(e){if(1!==e.originalEvent.touches.length)return void(this.touchId=null);this.pauseFling=!0,this.fling=[0,0];var t=e.originalEvent.changedTouches[0];this.touchId=t.identifier,this.lastTouchPosition={x:t.screenX,y:t.screenY}},onTouchMove:function(e){if(null!=this.touchId){e.preventDefault();var t=this,n=e.originalEvent.changedTouches[0];if(n.identifier===this.touchId){var i={x:n.screenX,y:n.screenY},r=_.mapObject(i,function(e,n){var i=t.lastTouchPosition[n];return i-e});this.fling=[r.x,r.y],this.scrollBy(r.x,r.y),this.lastTouchPosition=i}}},onTouchEnd:function(e){var t=e.originalEvent.changedTouches[0];t.identifier===this.touchId&&(this.touchId=null,this.pauseFling=!1)},processWheelEvent:function(e){var t=e.originalEvent,n=t.deltaMode||0,i=t.deltaY,r=t.deltaX,s=1;n===WheelEvent.DOM_DELTA_LINE?s=o.SCROLL_LINE_HEIGHT:n===WheelEvent.DOM_DELTA_PAGE&&(s=this.viewportHeight()),this.scrollBy(r*s,i*s),t.preventDefault()},registerSortController:function(e){this.sortController=e},deregisterSortController:function(){this.sortController=null},events:{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"},keyboardEvents:{pageup:function(){this.scrollBy(null,-this.viewportHeight()*d)},pagedown:function(){this.scrollBy(null,this.viewportHeight()*d)},home:function(){this.scrollTo(null,0)},end:function(){var e=n._getUnderscore(this.views).last();e&&this.scrollToBottomOfView(e)},up:function(){this.scrollBy(null,-u)},down:function(){this.scrollBy(null,u)},left:function(){this.scrollBy(-u,null)},right:function(){this.scrollBy(u,null)}},disableXScroll:function(){null==this.xScrollDisabled&&(this.xScrollDisabled=0),this.xScrollDisabled++},enableXScroll:function(){this.xScrollDisabled--}}),m={width:{watch:"scrollWidth",makeRule:function(){var e=this.scrollWidth+"px",t={};return t[this.styleScope+".full-width"]={width:e,"max-width":e,"min-width":e},t}}},g=p.prototype,v=[],b=[];_(m).each(function(e,t){var n=t.inflect("capitalize"),i=g["detach"+n+"Styles"]=function(){var e=this.getStyleInfo(t);e.rule&&(e.rule.detach(),delete e.rule,delete e.lastValue)},r=g["attach"+n+"Styles"]=function(){var n=this;i.call(n);var r=n.getStyleInfo(t);r.rule=s.createStyleSheet(e.makeRule.call(n)),r.rule.attach(),r.lastValue=_.result(n,e.watch)},o=g["update"+n+"Styles"]=function(){var n=this,i=n.getStyleInfo(t),o=_.result(n,e.watch);i.rule&&i.lastValue===o||r.call(n)};v.push(i),b.push(o)}),g.detachAllStyles=function(){var e=this;v.forEach(function(t){t.call(e)})},g.updateAllStyles=function(){var e=this;b.forEach(function(t){t.call(e)})},dev.add("scrollView",function(){return $(".fast-scroll").view()}),dev.vScrollTest=function(e){e=e||100;var t=dev.scrollView;t.scrollTo(0,e),_.delay(function(){t.scrollTo(0,0)},500)},dev.hScrollTest=function(e){e=e||100;var t=dev.scrollView;t.scrollTo(e,0),_.delay(function(){t.scrollTo(0,0)},500)},p.deferrableRendering();var y=p.NullScrollView=p.extend(_.mapObject(p.prototype,_.constant(_.noop)));_.extend(y.prototype,{setNeedsRenderContent:function(){var e=this;this.onNextTick(function(){e.triggerRenderEvent()})}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./fastPositioner":161,"./fastScrollConstants":169,"./geometry":183,"./view":236,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/globalEvents":22,jss:688}],171:[function(e,t){"use strict";var n=e("./view"),i=n.extend({initialize:function(){this.setScrollView(this.options.scrollView)},startScrollListening:function(){this.scrollView&&this.listenTo(this.scrollView,"scrollRender",this.onScrollRender)},stopScrollListening:function(){this.scrollView&&this.stopListening(this.scrollView,"scrollRender",this.onScrollRender)},partialRender:function(e){this.render(),e.positionElement(this.$el,this.virtualHeight)},setScrollView:function(e){this.stopScrollListening(),this.scrollView=e,this.startScrollListening()},getVirtualHeight:_.thrower("scrollable view must implement getVirtualHeight"),getActualWidth:_.thrower("scrollable view must implement getActualWidth"),getSortDelegate:_.thrower("scrollable view must implement getSortDelegate"),onScrollRender:_.noop,cleanUp:_.noop});t.exports=i},{"./view":236}],172:[function(e,t){(function(e){"use strict";t.exports=BaseObject.extend({constructorName:"FastSelectionRange",propertyNames:["rows","columns","anchorInfo","diagonalInfo","isRowSelection"],initialize:function(){var t=this,n=(this.rows,this.columns,this.anchorInfo),i=this.diagonalInfo,r=!1,o=!1,s=[n,i].map(function(e){var n={},i=e.getCoordinates();switch(n.rowIndex=i.row,n.colIndex=i.column,n.rowIndex){case"header":n.rowIndex=-1,r=!0;break;case"empty":n.rowIndex=t.rows.length,o=!0}return n}),a=s[0],l=s[1];e._getUnderscore(this).extend({hasHeader:r,hasEmpty:o,rowStart:Math.min(a.rowIndex,l.rowIndex),rowEnd:Math.max(a.rowIndex,l.rowIndex),colStart:Math.min(a.colIndex,l.colIndex),colEnd:Math.max(a.colIndex,l.colIndex)}),this.firstBodyRowIndex=r?0:this.rowStart,this.lastBodyRowIndex=o?this.rowEnd-1:this.rowEnd},isMultiSelect:function(){return this.rowStart!==this.rowEnd?!0:this.colStart!==this.colEnd?!0:!1},firstBodyRow:function(){return this.rows[this.firstBodyRowIndex]},lastBodyRow:function(){return this.rows[this.lastBodyRowIndex]},rowCount:function(){return this.rowEnd-this.rowStart+1},eachRow:function(e){var t=this;_.rangeIterator(this.rowStart,this.rowEnd+1)(function(n){e(t.rows[n],n)})},eachBodyRow:function(e){var t=this;_.rangeIterator(this.firstBodyRowIndex,this.lastBodyRowIndex+1)(function(n){e(t.rows[n],n)})},eachColumn:function(e){var t=this;_.rangeIterator(this.colStart,this.colEnd+1)(function(n){e(t.columns[n],n)})},eachCell:function(e){var t=this;this.eachColumn(function(n,i){t.eachBodyRow(function(t,r){e(t,n,r,i)})})}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],173:[function(e,t){(function(n){"use strict";var i=e("backbone"),r=e("./geometry"),o=e("jss"),s=e("./globalCursor"),a=e("./autoScrollHelper"),l=5,c=t.exports=BaseObject.extend({propertyNames:function(){return["selector","handle","delegate","scope","hiddenClass","container"]},getDelegate:function(){return this.delegate(this.$item())},adjustVirtualHeight:function(e){return e.view.cid===this.dragInfo.originalDelegateId?e.virtualHeight-this.dragInfo.virtualHeight:e.virtualHeight},beforePositionContainer:function(e){var t=_.pick(e,"virtualHeight","realHeight");if(!this.dragInfo)return t;var n=this.dragInfo.spacerPosition,i=$(this.dragInfo.itemSelector).hasClosest(e.element),r="append"===n.method;return e.element.containsInclusive(n.selector)&&(this.addSpacer(),!i&&r&&(t.virtualHeight+=this.dragInfo.virtualHeight,t.realHeight+=this.dragInfo.realSize.height)),t},beforeReportElement:function(e){if(!this.dragInfo)return e.virtualHeight;var t=_.pick(e,"virtualHeight","realHeight"),n=this.dragInfo.spacerPosition,i=$(this.dragInfo.itemSelector).hasClosest(e.element);return i&&(t.virtualHeight-=this.dragInfo.virtualHeight,t.realHeight-=this.dragInfo.realSize.height),e.element.containsInclusive(n.selector)&&(t.spacer={where:n.method,virtualHeight:this.dragInfo.virtualHeight,realHeight:this.dragInfo.realSize.height,element:this.dragInfo.spacer}),t},beforeAdvance:function(e){var t=e.view.getSortDelegate();return t?t.beforeAdvance(this.dragInfo.itemData,e):e.virtualHeight},getContainerSelector:function(){return _.isFunction(this.container)?this.container(this):this.container},placeSpacer:function(){var e=this.mouseLoc.y,t=this.dragInfo.spacer.bounds();if(!(e>=t.top&&e<=t.bottom)){this.dragInfo.scrollView.setNeedsRenderContent();var i=this.getContainerSelector(),o=this.scope.find(i).not(".sort-surrogate *"),s=1/0,a=$();n._getUnderscore(o).chain().map$.each(function(t){var n=t.getBoundingClientRect(),i=Math.min(Math.abs(n.top-e),Math.abs(n.bottom-e));s>i&&(a=t,s=i)});var l=a.find(this.selector+":not(.sort-spacer)");if(!l.length)return void(this.dragInfo.spacerPosition={selector:"#"+a.attr("id"),method:"append"});var c=n._getUnderscore(l).find(function(t){var n=t.getBoundingClientRect();return r.pointInRect({x:n.left,y:e},n)});c=$(c);var u;if(c.length){{c.bounds()}u=0!==c.nextAll(".sort-spacer").length}else{var d=a.bounds();if(e<d.top)c=l.first(),u=!0;else{if(!(e>d.bottom))return;c=l.last(),u=!1}}var h="#"+c.attr("id");this.dragInfo.spacerPosition={selector:h},this.dragInfo.spacerPosition.method=u?"before":"after"}},addSpacer:function(){var e=this.dragInfo.spacerPosition.method,t=this.dragInfo.spacerPosition.selector;$(t)[e](this.dragInfo.spacer)},handleSelector:function(){return"{{selector}} {{handle}}".stencil({selector:this.selector,handle:this.handle})},startListening:function(){this.scope.on(this.namespacedEventName("mousedown"),this.handleSelector(),this.onMouseDown.bind(this))},stopAllListening:function(){this.scope.unbindViewEvents(this),this.stopDrag(),i.Events.stopListening.apply(this,arguments)},startScrollListening:function(){this.listenTo(this.dragInfo.scrollView,"fastScroll",this.onScroll.bind(this))},stopScrollListening:function(){this.stopListening(this.dragInfo.scrollView,"fastScroll")},$item:function(){return this.dragInfo?this.scope.find(this.dragInfo.itemSelector):$()},startDrag:function(e){if(!this.dragInfo){s.push("grabbing"),this.bindEscape();var t=e.offset(),n={x:t.left-this.mouseLoc.x,y:t.top-this.mouseLoc.y},i=e.closest(".fast-scroll").view(),r="#"+e.attr("id");this.dragInfo=new u({itemSelector:r,realSize:e.bounds(),offset:n,scrollView:i,spacerPosition:{selector:r,method:"before"}});var o=this.getDelegate();this.dragInfo.surrogate=this.makeSurrogate(e),this.dragInfo.virtualHeight=o.virtualHeightForSortItem(e),this.dragInfo.spacer=o.makeSortSpacer(e).addClass("sort-spacer"),this.dragInfo.originalDelegateId=o.getId(),this.dragInfo.itemData=o.getItemData(e),this.dragInfo.spacer.width(this.dragInfo.realSize.width),this.dragInfo.spacer.height(this.dragInfo.realSize.height),this.startScrollListening(),i.registerSortController(this),i.disableXScroll(),this.placeSurrogate(),this.placeSpacer(),this.attachHideRule(),this.startScrollLoop(),this.getDelegate().onStartDrag(e),$(document.body).on(this.namespacedEventName("mousemove"),this.onMouseMove.bind(this)),$(document.body).one(this.namespacedEventName("mouseup"),this.onMouseUp.bind(this))}},cleanupDrag:function(e){e=_.defaults({},e,{callDelegate:!0});var t=this.getDelegate();try{if(!this.dragInfo)return;$(document.body).unbindViewEvents(this),this.unbindEscape(),s.pop(),this.stopScrollLoop(),this.stopScrollListening(),this.detachHideRule(),this.dragInfo.scrollView.deregisterSortController(this),this.dragInfo.scrollView.enableXScroll(),this.dragInfo.surrogate.remove(),this.dragInfo.spacer&&this.dragInfo.spacer.remove(),this.dragInfo.scrollView.setNeedsRenderContent(),this.dragInfo=null,e.callDelegate&&t&&t.onStopDrag()
}finally{e.cancel&&e.callDelegate&&t&&t.onCancelDrag()}},bindEscape:function(){n.Mousetrap.bind("escape",this.cancelDrag.bind(this))},unbindEscape:function(){n.Mousetrap.unbind("escape")},onMouseUp:function(){var e=this.dragInfo.itemSelector;if(this.hasDragged)this.stopDrag();else{this.cancelDrag();var t=this.scope.find(e),n=t.find(this.handle);n.click()}},stopDrag:function(){if(this.dragInfo){var e=this.delegate(this.dragInfo.spacerPosition.selector);if(!e)return void this.cleanupDrag();var t=this.dragInfo.spacerPosition,n={before:$(),after:$()},i=this.dragInfo.itemSelector;if("append"!==t.method){var r=this.dragInfo.spacer,o="{{selector}}:not({{itemSelector}})".stencil({selector:this.selector,itemSelector:i});n={before:r.prevAll(o).first(),after:r.nextAll(o).first()}}var s=!0;$([n.before,n.after]).is(i)?s=!1:"append"===t.method&&$(i).hasClosest(t.selector)&&(s=!1),s&&e.onStopDrag(this.dragInfo.itemData,n),this.cleanupDrag({callDelegate:!s})}},cancelDrag:function(){this.cleanupDrag({cancel:!0})},makeSurrogate:function(e){var t=$("<div>").addClass("sort-surrogate");return t.appendTo(this.scope),t.append(this.getDelegate().makeSurrogateContent(e)),t.css({left:e.offset().left}),t},getScrollViewAtPosition:function(e,t){return $(document.elementFromPoint(e,t)).closest(".fast-scroll").view()},scrollIfNeeded:function(){if(this.mouseLoc){var e=this.mouseLoc.x,t=this.mouseLoc.y,n=this.getScrollViewAtPosition(e,t);if(n){var i=n.el.getBoundingClientRect(),r=a.getVerticalDelta(t,i);n.scrollBy(null,r)}}},startScrollLoop:function(){this.scrollTimer||(this.scrollTimer=window.setInterval(this.scrollIfNeeded.bind(this),10))},stopScrollLoop:function(){this.scrollTimer&&(window.clearInterval(this.scrollTimer),this.scrollTimer=null)},onMouseDown:function(e){if(0===e.button&&!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)){var t=$(e.target);this.target=t;var n=t.closest(this.selector);n.length&&(e.preventDefault(),this.mouseLoc={x:e.clientX,y:e.clientY},this.hasDragged=!1,this.startMouseLoc=this.mouseLoc,this.startDrag(n))}},placeSurrogate:function(){this.dragInfo.surrogate.css({top:this.mouseLoc.y+this.dragInfo.offset.y})},onMouseMove:function(e){this.mouseLoc={x:e.clientX,y:e.clientY},this.hasDragged=this.hasDragged||r.distance(this.mouseLoc,this.startMouseLoc)>l,this.placeSurrogate(),this.placeSpacer()},onScroll:function(){this.placeSpacer()},attachHideRule:function(){if(!this.hideRule){var e={};e[this.dragInfo.itemSelector]={display:"none"},this.hideRule=o.createStyleSheet(e),this.hideRule.attach()}},detachHideRule:function(){this.hideRule&&(this.hideRule.detach(),this.hideRule=null)},remove:function(){this.stopDrag(),this.stopAllListening()},namespacedEventName:function(e){return(e||"")+"."+this.cid}});_.defaults(c.prototype,i.Events);var u=BaseObject.extend({initialize:function(){n._getUnderscore(this).extend(this.options)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./autoScrollHelper":124,"./geometry":183,"./globalCursor":184,backbone:"backbone",jss:688}],174:[function(e,t){(function(n){"use strict";{var i=(e("./view"),e("../../common/values")),r=e("./renderAutocompleteValue"),o=e("../models");t.exports=BaseObject.extend({id:_.constant(""),isFixed:_.constant(!1),headerHtml:_.constant(""),cellHtml:_.constant(""),useChitMode:_.constant(!1),getInputValidation:function(e){return i.createValidator("generic",{input:e,localeOptions:o.Account.account.localeOptions()})},isReadOnlyEmptyRow:function(){return!1},shouldOfferAutocompletions:_.constant(!0),classes:function(e){return n._getUnderscore(this.bodyClassList(e)).uniq().join(" ")},headerClasses:function(){var e=this.headerClassList();return this.useBodyClassesForHeaders&&(e=e.concat(this.bodyClassList())),n._getUnderscore(e).uniq().join(" ")},bodyClassList:function(){var e=[];return this.isSelectable()||e.push("no-select"),e},headerClassList:function(){var e=[];return this.isSelectable()||e.push("no-select"),this.isDraggable()&&e.push("draggable"),e},autocompleteValues:function(){return Q([])},renderAutocompleteValue:r,useBodyClassesForHeaders:!1,width:function(){return 0},isWritable:!0,cellValue:function(){return""},cellDisplayValue:function(e){var t=this.cellValue(e.row);return t?t.displayValue?t.displayValue():t:""},safeId:function(){try{return this.id()}catch(e){return null}},selectable:!0,isSelectable:BaseObject.resultify("selectable"),draggable:!1,isDraggable:BaseObject.resultify("draggable"),dropBefore:!1,canDropBefore:BaseObject.resultify("dropBefore"),dropAfter:!1,canDropAfter:BaseObject.resultify("dropAfter"),readOnly:!1,isReadOnly:BaseObject.resultify("readOnly")})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/values":253,"../models":47,"./renderAutocompleteValue":218,"./view":236}],175:[function(e,t){"use strict";var n=e("./view"),i=e("../keys"),r=e("./fastAutocompleteView"),o=(e("../parser").cursorToken,e("./fastScrollableView")),s=(e("../../common/constants.js"),e("../../common/values")),a=(e("../../common/commas"),e("./eventListener")),l=e("../models"),c=e("./autocompleteDelegateHelper");dev.noEditorEndOnBlur=!1;t.exports=o.extend({className:"fast-table-editor",outerHeightPad:3,initialize:function(){this.helper=new c({delegate:this}),_(this).pickFrom(this.options,"cell","cellInfo","column","initialValue","selectOnFocus","extraClasses","validationType","oldEditor"),this.chitMode=!this.cellInfo.isHeaderRow&&this.column.useChitMode(this.cellInfo),this.oldEditor?(this.isFirstUpdate=this.oldEditor.autocompleteView&&this.oldEditor.autocompleteView.firstUpdate,this.initialValue=this.oldEditor.getRawValue()):(this.initialValue&&s.isValueObject(this.initialValue)&&(this.initialValue=this.initialValue.editableText({localeOptions:l.Account.account.localeOptions()})),this.chitMode&&this.initialValue&&(this.initialValue=""===this.initialValue?"":this.initialValue.trim()+", ")),o.prototype.initialize.apply(this,arguments),this.clickListener=new a({target:document.body,type:"click",callback:this.onGlobalClick.bind(this)})},onGlobalClick:function(e){var t=$(e.target);t.hasClosest(".fast-table-editor")||this.onEndEditing()},render:function(){var e=$(this.cell).find(".has-tooltip");"tooltip"===e.attr("data-toggle")&&e.tooltip("hide"),this.$el.html(n.templates[this.template](this.context())),this.positionAndSize(),this.focus(),this.listenForEndEditing(this.onEndEditing.bind(this)),this.cellInfo.isHeaderRow||(this.autocompleteView=this.autocompleteView||new r({input:this.$textarea(),delegate:this,chitMode:this.chitMode}),void 0!==this.isFirstUpdate&&(this.autocompleteView.firstUpdate=this.isFirstUpdate),this.$el.append(this.autocompleteView.$el),this.autocompleteView.render())},remove:function(){return this.autocompleteView&&this.autocompleteView.remove(),this.hasValidationError&&this.removeValidationError(),this.clickListener.stopListening(),this.$textarea().off(),n.prototype.remove.apply(this,arguments)},shouldOfferAutocompletions:function(e,t){return this.column.shouldOfferAutocompletions(e,t,this.cellInfo)},getCompletionValuesForQuery:function(e){return this.column.autocompleteValues(e,this.cellInfo.row)},autocompleteValues:function(e){return this.helper.autocompleteValues(this.chitMode,e)},renderAutocompleteValue:function(e){return this.column.renderAutocompleteValue(e,this.getQueryValue())},acceptValue:function(e){return this.helper.acceptValue(this.chitMode,this.$textarea(),e)},autoselectTypes:c.autoselectTypes,shouldSelectFirstItemOnDisplay:function(e,t){return this.helper.shouldSelectFirstItemOnDisplay(this.chitMode,e,t)},onEndEditing:function(e){this.hasEnded||(this.hasEnded=!0,this.chitMode&&/, $/.test(this.getRawValue())&&this.$textarea().val(this.getRawValue().replace(/, $/,"")),this.direction=e,this.trigger("ft-editor-end",this))},cancel:function(){this.canceled=!0,this.onEndEditing()},template:"fastTableEditor",context:function(){return this},positionAndSize:function(){this.$el.offset(this.cell.offset()),this.$el.width(this.cell.outerWidth()),this.$el.height(this.cell.outerHeight()+this.outerHeightPad)},focus:function(){var e=this.$textarea();if(e.textareaAutoSize(),e.focus(),this.selectOnFocus)e.select();else{var t=e.val().length;e[0].setSelectionRange(t,t)}},hasActiveAutocomplete:function(){return this.helper.hasActiveAutocomplete()},getValueWithCursor:function(e){return this.helper.getValueWithCursor(this.$textarea(),e)},showValidationError:function(e){if(!this.hasValidationError||this.hasValidationError!==e){this.hasValidationError&&this.removeValidationError(),this.hasValidationError=e;var t=this.$textarea();t.addClass("has-tooltip has-validation-error"),t.attr("title",e),this.$el.autoTooltip({autoPlacement:!0,placement:"right",container:$("body")}),t.tooltip("show")}},removeValidationError:function(){if(this.hasValidationError){this.hasValidationError=!1;var e=this.$textarea();e.removeClass("has-tooltip has-validation-error"),e.attr("title",""),this.$textarea().tooltip("destroy")}},updateValidationError:function(e){e=e||this.getInputValidation(),this.isValid(e)?this.removeValidationError():this.showValidationError(e.error.getMessage())},isValid:function(e){return e=e||this.getInputValidation(),e.isValid()},shouldEndEditingOnBlur:function(e,t){return dev.noEditorEndOnBlur?!1:this.keepOpen?!1:e.isValid()?t.close?!0:this.chitMode&&this.autocompleteView.hasActiveItem()?!1:!0:!1},listenForEndEditing:function(e){var t=this,n=function(n){var i=t.getInputValidation();return t.updateValidationError(i),t.shouldEndEditingOnBlur(i,n)?void e(n.direction):(n.event.preventDefault(),void(n.refocus&&t.focus()))};this.$textarea().on("blur",function(e){n({event:e,refocus:!0,close:!0})}),this.$textarea().on("keydown",function(e){return e.keyCode===i.RETURN?(t.hasActiveAutocomplete()&&t.autocompleteView.keyDown(e),e.preventDefault(),e.metaKey||e.ctrlKey||e.altKey?void t.insertCharacterAtCursor("\n","\r\n"):void n({event:e,direction:e.shiftKey?"up":"down",close:!0})):void 0}),this.$textarea().on("keydown",function(e){return e.keyCode===i.TAB?(t.hasActiveAutocomplete()&&t.autocompleteView.keyDown(e),e.preventDefault(),e.metaKey||e.ctrlKey||e.altKey?void t.insertCharacterAtCursor("	","	"):void n({event:e,direction:e.shiftKey?"left":"right"})):void 0})},insertCharacterAtCursor:function(e,t){var n=this.$textarea(),i=n[0],r=i.value;if("number"==typeof i.selectionStart&&"number"==typeof i.selectionEnd){var o=i.selectionStart;i.value=r.slice(0,o)+e+r.slice(i.selectionEnd),i.selectionStart=i.selectionEnd=o+1}else if(document.selection&&document.selection.createRange){i.focus();var s=document.selection.createRange();s.text=t,s.collapse(!1),s.select()}n.trigger("input")},$textarea:function(){return this.$("textarea")},events:{"keydown textarea":function(e){e.keyCode===i.ESC&&(e.preventDefault(),this.cancel())},"input textarea":function(){this.hasValidationError&&this.updateValidationError()},"click textarea":function(){this.autocompleteView&&this.autocompleteView.update()}},onScroll:function(){this.positionAndSize()},getInputValidation:function(){return this.column.getInputValidation(this.getRawValue(),this.cellInfo)},getQueryValue:function(){return this.helper.getQueryValue(this.chitMode)},getRawValue:function(){return this.$textarea().val()},getValue:function(){return this.getInputValidation().canonicalValue()}})},{"../../common/commas":238,"../../common/constants.js":239,"../../common/values":253,"../keys":25,"../models":47,"../parser":74,"./autocompleteDelegateHelper":125,"./eventListener":157,"./fastAutocompleteView":160,"./fastScrollableView":171,"./view":236}],176:[function(e,t){"use strict";t.exports=BaseObject.extend({id:function(){return""},safeId:function(){try{return this.id()}catch(e){return null}},classes:function(){return[]},readOnly:!1,isReadOnly:function(e){return this.readOnly?!0:e.isReadOnly()},handleIcon:_.constant("fb-reorder"),handleTooltip:_.constant(null)})},{}],177:[function(e,t){(function(n){"use strict";var i=e("./view"),r=e("../../common/strings"),o=(e("../performance"),e("./drawBox"),e("./geometry.js")),s=e("../viewModels/fastTableChanges"),a=e("./fastTableEditor"),l=e("./fastTableColumn"),c=e("../../common/invocation"),u=(e("jss"),e("./fastScrollConstants").virtualHeights),d=e("./fastScrollableView"),h=e("./clipboardInterceptor"),f=e("../keys.js"),p=e("../../common/sheetclip"),m=e("./columnDragController"),g=e("./eventListener"),v=e("../../common/indexCache"),b=e("../trackJs"),y=e("./fastSelectionRange"),w=e("../models/tiledArray"),x=e("../viewModels/fastTableRowChange"),k=e("./fastScrollConstants"),S=e("../models/errorReport"),C=e("../../common/values"),E=e("../globalEvents"),I=2,R=100,T=6,A=12,M={},F=d.superExtend(function(e){return{className:"fast-table",initialize:function(){_.defaults(this.options,{hasEmptyRow:!0,hasRowHandles:!0,hasHeaders:!0,canDeleteRow:!0,scrollChild:this,readOnlyEmptyRow:!1}),_(this).pickFrom(this.options,"columns","rows","delegate","reorderRows","tableId","scrollChild","moveColumn","resizeColumns","hasHeaders","hasEmptyRow","readOnlyEmptyRow","hasRowHandles","canDeleteRow","width","readOnly","canEditHeaders","canChangeColumns","hasWrap"),this.readOnly&&(this.resizeColumns=!1,this.readOnlyEmptyRow=!0,this.moveColumn=!1,this.canDeleteRow=!1),this.validateColumns(this.columns),this.tablePrefix=this.tableId||this.cid,this.buildCache(),this.captureCount=0,this.keyEventsBound=!1,this.$el.addClass(this.cid),this.setWrap(this.hasWrap),e.initialize.apply(this,arguments)},setWrap:function(e){this.hasWrap=e,this.$el.safeToggleClass("wrapped",e)},getActualWidth:function(){if(this.width)return this.width;throw new Error("must specify a width to FastTableView if used directly in a scrollView")},validateColumns:function(e){if(e&&n._getUnderscore(e).contains(void 0))throw new Error("Columns array contains undefined")},renderBase:function(){this.clipboardInterceptor&&(this.clipboardInterceptor.remove(),this.stopListening(this.clipboardInterceptor),this.clipboardInterceptor=null),this.$el.html(i.templates.fastTable(this.context())),this.$(".table").html(i.partials.fastTable(this.tableContext())),this.renderEmptyRow(),this.$(".table").prepend('<div class="fast-table-editor-container"/>'),this.clipboardInterceptor=new h,this.clipboardInterceptor.render(),this.$el.append(this.clipboardInterceptor.el),this.listenTo(this.clipboardInterceptor,"paste",this.onPaste),this.listenTo(this.clipboardInterceptor,"cut",this.onCut),this.listenTo(E,"locale-update",this.rerenderAllRows),this.renderHeader({noRender:!0})},initColumnDrag:function(){if(!this.readOnly){var e=(this.$header(),{view:this});_.extend(e,this.delegate.columnDragOptions()),this.colDragController=new m(e),this.colDragController.setUpDrag(this.$header())}},onCut:function(){this.onNextTick(function(){this.clearSelection()})},validateBulkChangeSize:function(e,t){return n._getUnderscore(this).soakCall("delegate.validateBulkChangeSize",e,t)},onPaste:function(e){if(!this.readOnly){var t=this.getSelectionRanges();if(t){n.isSafari&&e.match(/\n\n$/)&&(e=e.replace(/\n$/,""));var i=p.parse(e);if(0!==i.length){this.setEditingStatus(r["action-working-paste-changes"]());var o=new w({array:i}),s={rowStart:t.rowStart,colStart:t.colStart,rowEnd:Math.max(t.rowEnd,t.rowStart+o.rows-1),colEnd:Math.max(t.colEnd,t.colStart+o.columns-1)};this.canChangeColumns&&(s.colEnd=Math.min(s.colEnd,this.columns.length-2)),s.width=s.colEnd-s.colStart,s.height=s.rowEnd-s.rowStart,this.validateBulkChangeSize(s.height+1,"paste");var a=s.rowEnd-1===this.rows.length,l=this;this.captureEdits(function(){function e(e){e-=s.rowStart;var i=_.bind(o.get,o,e);return n._getUnderscore(t).map(i)}var t=_.range(0,s.width+1),i=l.columns.slice(s.colStart,s.colEnd+1);n._getUnderscore(_.range(s.rowStart,s.rowEnd+1)).each(function(t){if(-1!==t||!l.canEditHeaders){var n=t===s.height,r=e(t);if(!a||!n||""!==r.join("")){var o=new x({tableView:l,row:t});o.setValues(i,r).apply()}}})})}}}},getSortDelegate:_.constant(null),renderHeader:function(e){e=e||{},e.noRender||this.$header().html(i.partials.fastTableHeader(this.tableContext())),this.autoTooltip(),this.moveColumn&&this.initColumnDrag()},getRenderedBounds:function(){return o.unionOfRects(n._getUnderscore([this.$header().bounds(),this.$body().bounds(),this.$footer().bounds()]).compactNullish())},getVirtualHeight:function(){var e=0;return this.hasHeaders&&(e+=u.HEADER_HEIGHT),e+=this.rows.length*u.ROW_HEIGHT,this.hasEmptyRow&&(e+=u.ROW_HEIGHT),e},onScrollRender:function(){this.renderSelection()},autoTooltip:function(){this.$el.autoTooltip({container:"body"}),this.$(".error-cell").removeClass("error-cell"),this.$(".error-value").closest("td").addClass("error-cell")},partialRender:function(e){this.virtualOffset=e.virtualOffset,this.flushBody&&(this.$body().empty(),this.lastViewportColumnRange=null,this.renderEmptyRow(),this.flushBody=!1),this.flushHeader&&(this.renderHeader(),this.flushHeader=!1);var t=this.$("thead");this.hasHeaders&&e.positionElement(t,u.HEADER_HEIGHT,"top"),this.partialRenderTable(e),this.autoTooltip()},partialRenderTable:function(e){var t=this.currentEditor;t&&t.cancel();var i=_.reduce(this.columns,function(e,t){return e+t.width()},1);this.$("table").css("width",i+2*I);var r=e.virtualPixelsRequired(),o=Math.ceil(r/u.ROW_HEIGHT),s=this,a=Math.floor(e.vShift/u.ROW_HEIGHT);a=n._getUnderscore(a).clamp(0,this.rows.length),o=_.clamp(o,0,this.rows.length-a);var l=this.getViewportColumnRange(),c=_(o).times(function(e){e+=a;var t=s.rows[e],n=s.$getRow(t)[0];return n?n:(n=$(s.rowHtml(t,l)),t.cachedHeight&&n.data("outerHeight",t.cachedHeight),n[0])});c=$(c);var d=this.$body();d.children().not(c).delayedRemove();var h=d.find(c);if(this.flushRowOrder)d.children().detach(),d.append(c),this.flushRowOrder=!1;else{var f=c.first();f.isAttached()||d.prepend(f),n._getUnderscore(c).each(function(e,t){t&&(e=$(e),e.isAttached()||f.after(e),f=e)})}this.visibleColumnsChanged()&&(this.removeExtraColumns(),this.renderMissingColumns(h),this.renderEmptyRow(),this.updateSpacerWidth(),this.cacheViewportColumnRange()),this.rowAdvance=a,this.renderedRows=o,e.advance(this.rowAdvance*u.ROW_HEIGHT,{firstIndex:a}),e.prepareContainer(d),n._getUnderscore(c).each(function(t){if(null!=t){t=$(t),e.reportContainedElement(t,u.ROW_HEIGHT);var n=s.rowFromRowElement(t);n.cachedHeight=t.data("outerHeight")}}),e.positionContainer(d),this.hasEmptyRow&&e.positionElement(this.$footer(),u.ROW_HEIGHT),t&&this.anchorInfo&&0!==this.$selectedCell().length&&this.beginEditing(this.$selectedCell(),{select:!1,oldEditor:t}),this.renderSelection()},renderSelection:function(){var e=this.getSelectionAnchorInfo();if(e){var t=this.getDiagonalInfo();this.makeSelectionOverlay(e,t)}},renderEmptyRow:function(){if(this.hasEmptyRow){var e=$(this.rowHtml()),t=this.$footer();t.empty(),t.append(e),this.autoTooltip()}},redrawColumnWithId:function(e){var t=this.columnCache[e],n=this;this.$getColumnCells(t).each(function(){var e=this,i=n.getCellInfo(e);$(e).html(t.cellHtml(i.row))}),this.autoTooltip()},redrawRowWithId:function(e){var t=this.rowWithId(e),n=this.$getRow(t);n.length&&(n.replaceWith(this.rowHtml(t)),this.autoTooltip())},redrawCell:function(e){var t=this.getCellInfo(e);e.html(t.column.cellHtml(t.row)),this.autoTooltip()},redrawEmptyCell:function(e){if(this.hasEmptyRow){var t=this.getCellByIds("empty",e);0!==t.length&&(this.redrawCell(t),this.autoTooltip())}},redrawCellByIds:function(e,t){var n=this.getCellByIds(e,t);0!==n.length&&(this.redrawCell(n),this.autoTooltip())},forEachColumn:function(e){_.each(this.columns,function(t,n){e(t,n)})},columnBoundsForId:function(e){var t=this.columnIndexCache.indexOfPredicateResult(e);if(null!=t)return this.columnBounds(t)},columnBounds:function(e){var t=this.$("thead th.table-cell").eq(e);if(!t)throw new Error("Header does not exist at index "+e);return this.columnBoundsForHeaderCell(t)},columnBoundsForHeaderCell:function(e){var t=e.bounds();return t.bottom=this.hasEmptyRow?this.$footer().bounds().bottom:this.$body().bounds().bottom,t},idsMatch:function(e,t){return e&&t?e.length!==t.length?!1:_.every(e,function(e,n){var i=t[n];return e.id()===i.id()}):!1},isSameData:function(e){return e.columns&&!this.idsMatch(e.columns,this.columns)?!1:e.rows&&!this.idsMatch(e.rows,this.rows)?!1:!0},buildRowCache:function(){var e={},t=new v({array:this.rows,predicate:"id()"});this.rows.forEach(function(t){e[t.id()]=t}),this.rowCache=e,this.rowIndexCache=t},buildColumnCache:function(){var e={},t=new v({array:this.columns,predicate:"id()"});this.columns.forEach(function(t){e[t.id()]=t}),this.columnCache=e,this.columnIndexCache=t},buildCache:function(){this.buildRowCache(),this.buildColumnCache()},indexForRow:function(e){if(!e)return-1;var t=this.rowIndexCache.indexOf(e);return null==t?-1:t},normalizeRowIndex:function(e){return"header"===e?-1:"empty"===e?this.rows.length:e},indexForColumn:function(e){if(!e)return-1;var t=this.columnIndexCache.indexOf(e);return null==t?-1:t},updateRowCount:function(){this.trigger("viewResize")},selectedCellRowAndColumn:function(){return this.getCellInfo(this.$selectedCell())},$table:function(){return this.$(".table table")},movedRow:function(e,t){var n=t.from,i=n.rowFromRowElement(e);this!==n&&(this.takeOwnership(e,n),n.removeRowObject(i)),this.addAndPositionRowObject(e,i)},takeOwnership:function(e,t){var n=this;e.findInclusive(".table-row").each(function(e,i){i=$(i);var r=t.rowFromRowElement(i);i.attr("id",n.makeRowId(r).slice(1))}),e.findInclusive(".table-cell").each(function(e,i){i=$(i);var r=t.getCellInfo(i);i.attr("id",n.makeCellId(r.row,r.column).slice(1))})},removeRowObject:function(e){delete this.rowCache[e.id()],this.rows=_.without(this.rows,e),this.renderedRows--,this.updateRowCount(),this.delegate.removeRow(e)},addAndPositionRowObject:function(e,t){this.rowCache[t.id()]=t,this.renderedRow++;var n=e.prev("tr"),i={},r=0;if(1===n.length){var o=this.rowFromRowElement(n);r=this.indexForRow(o)+1,i.before=o}var s=e.next("tr");s.length>0&&(i.after=this.rowFromRowElement(s)),this.rows.splice(r,0,t),this.updateRowCount(),this.delegate.addAndPositionRow(t,i)},$viewport:function(){return $(this.el.offsetParent)},beforeRemove:function(){this.unbindKeyboardEvents(),this.animationCallbackId&&window.cancelAnimationFrame(this.animationCallbackId),this.createdClasses&&this.createdClasses.detach(),this.clipboardInterceptor&&this.clipboardInterceptor.remove(),this.colDragController&&this.colDragController.remove(),this.removeSelection()},delayedRemove:function(){return this.beforeRemove(),e.delayedRemove.apply(this,arguments)},remove:function(){return this.beforeRemove(),this.bodyListener&&this.bodyListener.stopListening(),e.remove.apply(this,arguments)},beforeDetach:function(){this.clipboardInterceptor&&this.clipboardInterceptor.blur()},tableContext:function(e){e=e||0;var t=this,n={prefix:this.tablePrefix,hasHeaders:this.hasHeaders,hasRowHandles:this.hasRowHandles,columns:_.map(this.columns,function(e){return{colId:e.id(),classes:e.headerClasses(),headerHtml:e.headerHtml(),width:e.width(),fixed:e.isFixed()}})};return n.rows=_.chain(this.rows).first(e).map(function(e){return t.rowHtml(e)}).value(),n.rows.length===this.rows.length&&this.hasEmptyRow&&n.rows.push(t.rowHtml()),n},rowHtml:function(e,t){return i.partials.fastRow(this.rowContext(e,t))},shouldRenderAllColumns:function(){return this.hasWrap||this.forceAllColumns},getViewportColumnRange:function(){if(this.shouldRenderAllColumns())return{start:0,end:this.columns.length-1};var e,t,i=k.widths,r=i.LEFT_MARGIN+i.HANDLE,o=this.scrollView,s=o.viewportBounds().width,a=o.scrollX,l=r-a;return n._getUnderscore(this.columns).any(function(n,i){if(l+=n.width(),null==e)l>=0&&(e=i);else if(l>=s)return t=i,!0}),null==t&&(t=this.columns.length-1),null==e&&(console.log("Null start for column range; scrollX = {{scrollX}}; column count: {{columns}}".stencil({scrollX:a,columns:this.columns.length})),S.reportSilently(new Error("Null start for column range"))),{start:e||0,end:t}},renderMissingColumns:function(e){var t=this.getViewportColumnRange(),i=this.lastViewportColumnRange;if(i){var r=_.range(t.start,t.end+1),o=_.range(i.start,i.end+1),s=n._getUnderscore(r).difference(o);if(s.length){var a=n._getUnderscore(s).partition(function(e){return e<o[0]});this.renderColumns(e,a[0],!0),this.renderColumns(e,a[1],!1)}}},removeExtraColumns:function(){var e=this.getViewportColumnRange(),t=this.lastViewportColumnRange;if(t){var i=_.range(e.start,e.end+1),r=_.range(t.start,t.end+1),o=n._getUnderscore(r).difference(i);if(o.length){var s=n._getUnderscore(this.columns).chain().pickArray(o).compactNullish().mapMethod(this,"makeColumnSelector").value().join(",");this.$body().find(s).delayedRemove()}}},visibleColumnsChanged:function(){return!_.isEqual(this.lastViewportColumnRange,this.getViewportColumnRange())},getSpacerWidth:function(e){return e=e||this.getViewportColumnRange(),n._getUnderscore(this.columns).chain().head(e.start).invoke("width").sum().value()},updateSpacerWidth:function(e){var t=this.getSpacerWidth(e),n=this.$(".column-spacer");n.css({minWidth:t,width:t,maxWidth:t}),this.$("table").safeToggleClass("no-column-spacer",0===t)},renderColumns:function(e,t,r){var o,s=this,a=n._getUnderscore(this.columns).pickArray(t);o=r?function(e,t){var n=e.find(".column-spacer");n.after(t)}:function(e,t){e.append(t)},n._getUnderscore(e).each(function(e){e=$(e);var t=s.rowFromRowElement(e),n=a.map(function(e){return i.partials.fastRowCell(s.cellContext(t,e))});o(e,n)})},cacheViewportColumnRange:function(){this.lastViewportColumnRange=this.getViewportColumnRange()},rowContext:function(e,t){var n=this;t=t||this.getViewportColumnRange();var i=this.columns.slice(t.start,t.end+1),r=this.getSpacerWidth(t);return{prefix:this.tablePrefix,hasRowHandles:this.hasRowHandles,classes:e?e.classes().join(" "):"",rowId:e?e.id():"empty",handleIcon:e?e.handleIcon():"fb-reorder",handleTooltip:e?e.handleTooltip():null,cells:_.map(i,function(t){return n.cellContext(e,t)}),spacerWidth:r}},cellContext:function(e,t){return{prefix:this.tablePrefix,rowId:e?e.id():"empty",content:t.cellHtml(e),colId:t.id(),classes:t.classes(e),width:t.width()}},context:function(){return{cid:this.cid}},removeSelectionHandlers:function(){if(this.$selectionDiv){var e=this.$selectionDiv.data("clickHandler");$(document).off("click."+this.cid,e)}this.$(".selected").removeClass("selected"),this.unbindKeyboardEvents(),this.$selectionDiv=null},removeSelection:function(){this.removeSelectionHandlers(),this.anchorInfo=null,this.diagonalInfo=null,this.removeSelectionOverlay(),this.trigger("selectionChanged",this)},selectCell:function(e,t){if(e&&e.length&&!e.is(".no-select")){t=_.defaults({},t,{scroll:!0});var n=this.getCellInfo(e);this.selectCellByInfo(n,t)}},isSameCell:function(e,t){if(!e||!t)return!1;var n=e.idParts,i=t.idParts;return n&&i?n.rowId!==t.idParts.rowId?!1:n.columnId!==t.idParts.columnId?!1:!0:this.cellInfoEquals(e,t)},editorIsValid:function(){return this.currentEditor?this.currentEditor.isValid():!0},selectCellByInfo:function(e,t){this.editorIsValid()&&(this.renderSelectionDeferred(),t=t||{},e&&(this.anchorInfo&&this.isSameCell(this.anchorInfo,e)||(this.removeSelection(),this.cellInfoIsValid(e)&&(e.table=this,this.anchorInfo=e,t.scroll&&this.scrollToSelection(),this.trigger("selectionChanged",this)))))},setSelectionDiagonal:function(e,t){if(e&&e.length){t=_.defaults({},t,{scroll:!0});var n=this.getCellInfo(e);this.setSelectionDiagonalInfo(n,t)}},setSelectionDiagonalInfo:function(e,t){if(this.editorIsValid()&&(this.renderSelectionDeferred(),t=t||{},e&&(this.diagonalInfo=null,this.cellInfoIsValid(e)))){var n=this.getSelectionAnchorInfo();if(this.cellInfoEquals(e,n)&&(e=null),e&&(e.table=this),this.diagonalInfo=e,t.scroll){var i=_.pick(t,"noXScroll","noYScroll");i.diagonal=!0,this.scrollToSelection(i)}this.trigger("selectionChanged",this)}},removeSelectionDiagonal:function(){this.diagonalInfo=null,this.trigger("selectionChanged",this)},selectRegion:function(e,t){this.selectCell(e),this.setSelectionDiagonal(t)},selectRegionByInfo:function(e,t){this.selectCellByInfo(e),this.setSelectionDiagonalInfo(t)},selectRegionByCoordinates:function(e,t){var n=this.getCellInfoForCoordinates(e),i=this.getCellInfoForCoordinates(t);this.selectRegionByInfo(n,i)},getSelectionInfoForKey:function(e){var t=e.infoKey,n=e.selectFn||_.noop,i=this[t];if(i){if(!this.cellInfoIsValid(i)){var r=this.$getCellByCoordinates(i.coordinates,null,function(e){return e.isSelectable()});if(!r.length)return void this.removeSelection();n.call(this,r)}return this[t]}},getSelectionAnchorInfo:function(){return this.getSelectionInfoForKey({infoKey:"anchorInfo",selectFn:this.selectCell})},getDiagonalInfo:function(){return this.getSelectionInfoForKey({infoKey:"diagonalInfo",selectFn:this.setSelectionDiagonal})},cellInfoIsValid:function(e){if(!e)return!1;if(e.row){var t=e.row.safeId();if(!t)return!1;if(!this.rowWithId(t))return!1}if(e.column){var n=e.column.safeId();if(!n)return!1;if(!this.columnWithId(n))return!1}return!0},bindKeyboardEvents:function(){e.bindKeyboardEvents.apply(this,arguments),this.keyEventsBound=!0},bindSelectionKeyboardEvents:function(){this.keyEventsBound&&this.unbindKeyboardEvents(),this.bindKeyboardEvents(this.selectionKeyboardEvents);var e=this;$("body").off(this.namespacedEventName("keydown")),$("body").on(this.namespacedEventName("keydown"),function(t){(t.target===document.body||$(t.target).is(".clipboard"))&&(t.ctrlKey||t.altKey||t.metaKey||f.isPrintableCharacter(t.which)&&13!==t.which&&(e.scrollToSelection(),e.scrollView.renderContent(),e.beginEditing(e.$selectedCell(),{select:!0,event:t})))})},unbindKeyboardEvents:function(){this.keyEventsBound&&(this.keyEventsBound=!1,e.unbindKeyboardEvents.apply(this,arguments),$("body").unbindViewEvents(this))},removeSelectionOverlay:function(){this.scrollChild.$(".selection-"+this.tablePrefix).remove()},getOverlayAnchorAndDiagonal:function(e,t){var i,r;i=r=this.$getCellByInfo(e);var o=this.$getCellByInfo(t),s=this.rowAdvance,a=this.rowAdvance+this.renderedRows-1,l=this.getViewportColumnRange();if(t){if(this.isRowSelection(e,t)&&(this.isAllSelection(e,t)?(r=this.$header().find("tr.col-handles th:first-child"),o=this.$footer().find("tr.row-empty td:last-child")):(r=this.$getRowHandleCell(e.row),e.isHeaderRow?r=this.$header().find("tr.col-headers th:first-child"):e.isEmptyRow&&(r=this.$footer().find("tr.row-empty th:first-child")),o=this.$getCell(t.row,_.last(this.columns)),t.isHeaderRow?o=this.$header().find("tr.col-headers th:last-child"):t.isEmptyRow&&(o=this.$footer().find("tr.row-empty td:last-child")))),r.length&&o.length)return{$selected:i,$anchor:r,$diagonal:o};var c=function(e){"header"!==e.row&&(e.row=n._getUnderscore(e.row).clamp(s,a),e.column=n._getUnderscore(e.column).clamp(l.start,l.end))};if(!(e.coordinates.row<s&&t.coordinates.row<s||e.coordinates.row>a&&t.coordinates.row>a||e.coordinates.column<l.start&&t.coordinates.column<l.start||e.coordinates.column>l.end&&t.coordinates.column>l.end)){var u=_.clone(t.coordinates);c(u),o=this.$getCellByCoordinates(u);var d=_.clone(e.coordinates);return c(d),r=this.$getCellByCoordinates(d),{$selected:i,$anchor:r,$diagonal:o}}}else if(r.length)return o=$(),1===this.getSelectableColumnLength()&&(r=this.$getRowHandleCell(e.row),o=this.$getCell(e.row,_.last(this.columns))),{$selected:i,$anchor:r,$diagonal:o}},regionBoxClass:"selection-region-box",anchorBoxClass:"selection-anchor-box",findOrCreateRegionBox:function(){var e=this.scrollChild.$("."+this.regionBoxClass);return e.length||(e=$("<div>").addClass(this.regionBoxClass)),e},findOrCreateAnchorBox:function(){var e=this.scrollChild.$("."+this.anchorBoxClass);return e.length||(e=$("<div>").addClass(this.anchorBoxClass).addClass("selection")),e},removeRegionBox:function(){this.scrollChild.$("."+this.regionBoxClass).remove()},removeAnchorBox:function(){this.scrollChild.$("."+this.anchorBoxClass).remove()},makeSelectionOverlay:function(e,t){var n=Math.floor(I/2),i=1;
if(this.isAttached()){var r=k.widths,s=this.isRowSelection(e,t||e),a=this.getOverlayAnchorAndDiagonal(e,t);if(a){var l=a.$selected,c=a.$anchor,u=a.$diagonal;if(0!==c.length){this.removeSelectionHandlers();var d=this.findOrCreateRegionBox(),h=l.bounds(),f=c.bounds(),p=u.bounds(),m=h;u&&u.length&&(m=o.unionRect(f,p));var g;g=this.hasHeaders?this.$header().find("tr.col-headers").bounds():this.$(".table-row").bounds();var v;v=this.hasEmptyRow?this.$footer().bounds():this.$(".table-row").last().bounds();var b=o.unionRect(g,v);b=o.unionRect(f,b);var y=t&&u&&u.length&&u.isnt(l);y&&(m=o.unionRect(f,p),e.isEmptyRow||t.isEmptyRow||!this.hasEmptyRow||(m.bottom=Math.min(m.bottom,v.top)));var w=this.$table().offsetParent(),x=w.bounds();h&&(h=o.insetRect(h,n,n),h=o.intersectionRect(h,b),h=o.rectRelativeToRect(h,x)),m=o.insetRect(m,n,n),m.right+=i,m.bottom+=i;var S=s&&this.lastViewportColumnRange.end<this.columns.length-1;S&&(m.left-=r.HANDLE),m=o.intersectionRect(m,b),m=o.rectRelativeToRect(m,x),d.setTransform(m.left,m.top),d.setSizeIfNeeded(m.width,m.height);var C=!0;if(this.scrollChild.$el.appendIfNeeded(d),y){if(h){var E=this.findOrCreateAnchorBox();C=!1,E.setTransform(h.left,h.top),E.setSizeIfNeeded(h.width,h.height),E.addClass("selection-"+this.tablePrefix),this.scrollChild.$el.appendIfNeeded(E),e.isHeaderRow||_.soak(t,"isHeaderRow")?(d.addClass("includes-header"),d.removeClass("includes-footer")):e.isEmptyRow||_.soak(t,"isEmptyRow")?(d.addClass("includes-footer"),d.removeClass("includes-header")):d.removeClass("includes-header includes-footer"),E.safeToggleClass("includes-header",e.isHeaderRow),E.safeToggleClass("includes-footer",e.isEmptyRow)}}else d.safeToggleClass("includes-header",e.isHeaderRow),d.safeToggleClass("includes-footer",e.isEmptyRow);C&&this.removeAnchorBox(),d.addClass("selection-"+this.tablePrefix),d.safeToggleClass("multi-selection",y),d.safeToggleClass("selection",!y);var R=function(e){var t=$(e.target);if(this.$el.has(e.target).length>0){if(t.is(".table-cell"))return;if(t.is("textarea"))return;if(t.parents(".table-cell").length>0)return;if(t.parents(".row-handle-cell"))return}t.hasClosest(".no-cell-deselect")||this.removeSelection()}.bind(this);return c.addClass("selected"),d.data("clickHandler",R),$(document).on("mousedown."+this.cid,R),this.$selectionDiv=d,this.bindSelectionKeyboardEvents(),this.updateClipboard(),!0}}}}.withResult(function(e){e||this.removeSelectionOverlay()}),scrollToSelection:function(e){e=e||{};var t;t=e.isDiagonal?this.getSelectionAnchorInfo():this.getDiagonalInfo()||this.getSelectionAnchorInfo();var n=this.ensureCellInfoRendered(t);if(n.length){var i=_.pick(e,"noXScroll","noYScroll");n.hasClosest(".no-scroll-to-select")&&(i.noYScroll=!0);var r=(n.closest(".table-row, thead"),this);this.forceAllColumnsForSynchronousRender(function(){r.scrollView.scrollElementIntoView(n,null,i)})}},updateClipboard:function(){if(this.clipboardInterceptor&&!this.currentEditor){var e=this.getSelectionRanges();if(!e)return void this.clipboardInterceptor.setValue("");var t=n._getUnderscore(this.columns).getRange(e.colStart,e.colEnd+1),i=[];if(-1===e.rowStart){var r=t.map(function(e){return e.cellDisplayValue({isHeaderRow:!0})});i.push(r),e.rowStart=0}var o=!1;e.rowEnd===this.rows.length&&(o=!0,e.rowEnd=this.rows.length-1);var s=n._getUnderscore(this.rows).getRange(e.rowStart,e.rowEnd+1).map(function(e){return t.map(function(t){return t.cellDisplayValue({row:e})})});if(i=i.concat(s),o){var a=n._getUnderscore(t.length).times(_.constant(""));i.push(a)}this.clipboardInterceptor.setValue(p.stringify(i))}},$selectedCell:function(){var e=this.getSelectionAnchorInfo();return this.$getCellByInfo(e)},isAllSelection:function(e,t){return e.isHeaderRow&&t.isEmptyRow?!0:e.isEmptyRow&&t.isHeaderRow?!0:!1},isRowSelection:function(e,t){return e.isFirstColumn&&e.isLastColumn?1===this.getSelectableColumnLength():e.isFirstColumn&&t.isLastColumn?!0:e.isLastColumn&&t.isFirstColumn?!0:!1},getSelectionRanges:function(){var e=this.getSelectionAnchorInfo();if(e){var t=this.getDiagonalInfo()||e;return new y({rows:this.rows,columns:this.columns,anchorInfo:e,diagonalInfo:t,isRowSelection:this.isRowSelection(e,t)})}},$selectedCells:function(){var e=this.getSelectionRanges();if(!e)return $();var t=$();-1===e.rowStart&&(t=t.add(this.$header().find(".col-headers")),e.rowStart=0),e.rowEnd===this.rows.length&&(t=t.add(this.$footer()),e.rowEnd=this.rows.length-1);var i=n._getUnderscore(this.rows).chain().getRange(e.rowStart,e.rowEnd+1).mapMethod(this,"$getRow").pluck(0).compactNullish().value();t=t.add(i);var r=n._getUnderscore(this.columns).chain().getRange(e.colStart,e.colEnd+1).mapMethod(this,"makeColumnSelector").value();return e.isRowSelection&&(r.push(".col-reorder"),r.push(".row-handle-cell"),r.push(".col-addField")),t.find(r.join(","))},$header:function(){return this.$("thead")},$body:function(){return this.$("tbody.body")},$footer:function(){return this.$("tbody.footer")},clearDoubleClick:function(){this.$(".has-last-click").data("lastClickTime",null).removeClass("has-last-click")},getSelectionOverlays:function(){return this.$el.parent().find(".multi-selection, .selection")},eventInSelection:function(e){return this.getSelectionOverlays().pointInAnyElement(e)},shouldShowMultiSelectionContextMenu:function(e){return n._getUnderscore(this).soak("getSelectionRanges().isMultiSelect()")?this.eventInSelection(e)?$(e.target).closest(".table-cell").is("td")?!0:!1:!1:!1},initializeFileDrag:function(){if(!this.bodyListener){var e=this;this.bodyListener=new g({target:document.body,type:"dragover",callback:function(e){e.preventDefault();var t=$(e.target);e.dataTransfer.dropEffect=t.hasClosest(".file-drop-target")?"copy":"none"}}),this.$(".file-drop-target").each(function(e,t){var n=$(t);n.prepend('<div class="upload-overlay"><i class="icon icon-fb-import"></i></div>');var i=n.position(),r=n.bounds();n.find(".upload-overlay").css({top:i.top,left:i.left,width:r.width,height:r.height})});var t=this.$(".upload-overlay");t.css("border-bottom","none"),t.last().css("border-bottom",""),this.dragPoll=setInterval(function(){var t=Date.now()-e.lastDragEvent;t>R&&e.stopFileDrag()},100)}},stopFileDrag:function(){this.bodyListener&&(this.bodyListener.stopListening(),this.bodyListener=null,this.$(".upload-overlay").remove(),clearTimeout(this.dragPoll),this.dragPoll=null)},events:{"drop .file-drop-target":function(e,t){e.preventDefault(),this.stopFileDrag();var n=this.getCellInfo(t.closest(".table-cell"));this.delegate.handleFileDrop&&this.delegate.handleFileDrop(e,n)},"dragover .table":function(){this.initializeFileDrag(),this.lastDragEvent=Date.now()},"dragenter .file-drop-target":function(e,t){var n=t.data();n.counter||(n.counter=0),n.counter++,this.$(".upload-overlay.hover").removeClass("hover"),t.find(".upload-overlay").addClass("hover")},"dragleave .file-drop-target":function(e,t){var n=t.data();n.counter--,0===n.counter&&t.find(".upload-overlay").removeClass("hover")},"click .no-select":function(e){$(e.target).is(".no-select")&&this.onNextTick(function(){this.updateClipboard()})},"click table th.row-handle:not(.no-select)":function(e,t){e.preventDefault();var n=this.getCellInfo(t),i=_.clone(n.coordinates),r=_.clone(i);i.row="header",r.row=this.rows.length-1,this.selectRegionByCoordinates(i,r)},"click table th.row-handle-cell":function(e){var t=$(e.target).closest("tr");e.preventDefault();var n=this.rowFromRowElement(t),i=this.indexForRow(n);0>i&&(i="empty");var r={column:0},o=this.getSelectionAnchorInfo();r.row=e.shiftKey&&o?o.isHeaderRow?"header":o.isEmptyRow?"empty":this.indexForRow(o.row):i;var s={column:this.lastSelectableColumnIndex(),row:i};this.selectRegionByCoordinates(r,s)},"click table tr.col-headers th.col-reorder":function(e){e.preventDefault();var t=($(e.target),this.getCellInfo(this.$getColumnHeader(this.columns[0]))),n=_.clone(t.coordinates);n.row="header",e.shiftKey&&this.anchorInfo&&(n.row=this.indexForRow(this.anchorInfo.row));var i={column:this.lastSelectableColumnIndex()};i.row="header",this.selectRegionByCoordinates(n,i)},"click table td:not(.no-select), table th:not(.col-reorder,.row-handle,.row-handle-cell,.no-select)":function(e){if("A"!==e.target.tagName){e.preventDefault();var t=$(e.target).closest(".table-cell");if(!e.shiftKey){var n=(t.closest(".table-row"),this.$previousSelected&&this.$previousSelected.is(t)),i=e.timeStamp-t.data("lastClickTime");n&&i<this.doubleClickThreshold?(this.beginEditing(t,{select:!1,event:e}),e.stopPropagation(),this.clearDoubleClick()):(t.data("lastClickTime",e.timeStamp),t.addClass("has-last-click"),this.currentEditor&&this.currentEditor.onEndEditing())}}},"mousedown table td:not(.no-select), table th:not(.col-reorder,.row-handle,.row-handle-cell,.no-select)":function(e){if("A"!==e.target.tagName&&(e.preventDefault(),3!==e.which||!this.eventInSelection(e))){this.$previousSelected=this.$selectedCell();var t=$(e.target).closest(".table-cell");e.shiftKey&&this.anchorInfo?(0===t.length&&(t=$(e.target).closest("tr").find(".table-cell:last")),this.setSelectionDiagonal(t)):this.selectCell(t),this.selectDragging=!0;var n=this;g.once({target:document,type:"mouseup",useCapture:!0,callback:function(){n.selectDragging=!1}})}},"mousemove table td:not(.no-select), table th:not(.row-handle,.no-select)":function(e){if(this.selectDragging){var t=$(e.target).closest(".table-cell");this.setSelectionDiagonal(t)}},contextmenu:function(e){if(!e.altKey){e.preventDefault();var t=$(e.target),n=t.closest(".table-cell");if(this.shouldShowMultiSelectionContextMenu(e))return this.showMultiSelectionContextMenu(e);var i;if(n.length){if(n.is(".row-handle")){var r=this.getCellInfo(n).column;n=this.$getColumnHeader(r)}this.selectCell(n),i=this.getCellInfo(n)}else{if(!t.hasClosest(".row-handle-cell"))return;var o=t.closest("tr"),s=this.rowFromRowElement(o);i={row:s}}this.showContextMenu(i,e)}},"mousemove thead th":function(e){if(this.resizerInfo||(this.resizerInfo={}),!this.resizerInfo.pressed){var t;t=e.offsetX<e.target.offsetWidth/2?$(e.target).closest("th").prev()[0]:$(e.target).closest("th")[0],this.resizerInfo.currentTh!==t&&this.refreshResizerPosition(t)}},"mousedown .fast-table-col-resizer .col-resizer-handle":function(e){e.preventDefault(),this.resizerInfo.startX=e.pageX,this.refreshLinePosition()},"mouseup .fast-table-col-resizer-container":function(){this.resizerInfo.pressed&&(this.trigger("columnResized",this.resizerInfo.currentColumn,this.resizerInfo.currentWidth),this.resetResizer())},"mousemove .fast-table-col-resizer-container":function(e){this.resizerInfo.pressed&&(this.resizerInfo.dragging=!0,this.resizerInfo.currentWidth=this.resizerInfo.startWidth+(e.pageX-this.resizerInfo.startX),this.resizerInfo.currentWidth<A&&(this.resizerInfo.currentWidth=A),this.adjustResizerContainer(),this.resizerInfo.resizer.css("left",this.resizerInfo.startOffset+this.resizerInfo.currentWidth))},"imageLoad .table-row":function(){$.invalidateHeightCache(),this.scrollView.setNeedsRenderContent()},"click .image-value img":function(e,t){var n=.95*window.innerWidth,r=.95*window.innerHeight,o=i.partials.colorboxImage({href:t.attr("src"),maxHeight:r,maxWidth:n});t.colorbox({transition:"none",opacity:.5,scrolling:!1,maxHeight:r,maxWidth:n,html:o})}},adjustResizerContainer:function(){var e=this.resizerInfo.resizerContainer;e.css({top:0,left:0});var t=e.bounds();e.css({top:-t.top,left:-t.left})},initializeResizer:function(){this.resizerInfo.resizer=$(i.partials.fastTableColumnResizer()),this.resizerInfo.resizer.handle=this.resizerInfo.resizer.find(".col-resizer-handle"),this.resizerInfo.resizer.handle.width(T),this.resizerInfo.resizer.line=this.resizerInfo.resizer.find(".col-resizer-line")},refreshResizerPosition:function(e){if(this.resizeColumns){var t=$(e).closest(".table-cell");if(t.length){var n=this.getCellInfo(t).column;if(n.isFieldColumn){this.resizerInfo.currentColumn=n,this.resizerInfo.currentTh=e,this.resizerInfo.resizer||this.initializeResizer();var i=$(this.resizerInfo.currentTh),r=i.bounds(),o=i.offsetParent().bounds(),s=this.$header().bounds(),a=this.$header().offsetParent().bounds(),l=r.right-o.left,c=l-T;this.resizerInfo.resizer.css("left",c);var u=s.top-a.top;this.resizerInfo.resizer.css("top",u),this.resizerInfo.resizer.handle.height(s.height-1),this.$table().append(this.resizerInfo.resizer)}}}},refreshLinePosition:function(){var e=$(this.resizerInfo.currentTh).bounds();this.resizerInfo.startOffset=e.left+(e.width-this.resizerInfo.currentColumn.width()-T),this.resizerInfo.startWidth=this.resizerInfo.currentWidth=this.resizerInfo.currentColumn.width(),this.resizerInfo.resizerContainer||(this.resizerInfo.resizerContainer=$('<div class="fast-table-col-resizer-container"></div>')),this.$el.find(this.resizerInfo.resizerContainer).length||this.$el.append(this.resizerInfo.resizerContainer),this.resizerInfo.resizerContainer.append(this.resizerInfo.resizer),this.adjustResizerContainer();var t=this.resizerInfo.startOffset+this.resizerInfo.currentWidth;this.resizerInfo.resizer.css("left",t);var n=$(this.$header()).bounds().top;this.resizerInfo.resizer.css("top",n),this.resizerInfo.resizer.line.height(this.$body().height()+this.$footer().height()-5),this.resizerInfo.resizer.addClass("active"),this.resizerInfo.pressed=!0},resetResizer:function(){this.resizerInfo.resizer&&this.resizerInfo.resizer.removeClass("active"),$(this.resizerInfo.resizerContainer).remove(),this.resizerInfo.resizerContainer=null,this.resizerInfo.dragging=!1,this.resizerInfo.pressed=!1,this.refreshResizerPosition(this.resizerInfo.currentTh)},selectionConfigForEvent:function(e){var t=e&&e.shiftKey;f.matchEvent(e,"TAB")&&(t=!1);var n,i,r;return t?(i=this.getDiagonalInfo()||this.getSelectionAnchorInfo(),r=this.setSelectionDiagonal.bind(this)):(i=this.getSelectionAnchorInfo(),r=this.selectCell.bind(this)),n=this.ensureCellInfoRendered(i),{cell:n,info:i,selectFunction:r}},selectionRight:function(e){if(this.$selectionDiv){e&&e.preventDefault();var t=this.selectionConfigForEvent(e),n=t.cell.next(".table-cell:not(.no-select)");if(!n.length){var i=this.getCellInfo(t.cell).getCoordinates(),r=i.column+1;if(r>=this.columns.length-1)return!1;var o=this.getCellInfoForCoordinates({row:i.row,column:r});n=this.ensureCellInfoRendered(o)}return t.selectFunction(n),!1}},selectionLeft:function(e){if(this.$selectionDiv){e&&e.preventDefault();var t=this.selectionConfigForEvent(e),n=t.cell.prev(".table-cell:not(.no-select)");if(!n.length){var i=this.getCellInfo(t.cell).getCoordinates();if(i.column<=0)return!1;var r=this.getCellInfoForCoordinates({row:i.row,column:i.column-1});n=this.ensureCellInfoRendered(r)}return t.selectFunction(n),!1}},selectionUp:function(e){if(this.$selectionDiv){e&&e.preventDefault();var t=this.selectionConfigForEvent(e),n=t.cell,i=t.selectFunction;if(!n.is(".row-header")){var r=n.parent("tr").prev("tr"),o=n.parent().children(".table-cell").index(n),s={noXScroll:!0};if(0!==r.length)i(r.children(".table-cell").eq(o),s);else if(n.hasClosest(".footer")){if(this.$footer().data("sticking")){var a=this.scrollView;a.ensureBottomOfView(this.el)}this.$body().find("tr").isEmpty()?(r=this.$("table thead tr.col-headers th.table-cell"),i(r.eq(o),s)):(r=this.$body().find("tr").last(),i(r.children(".table-cell").eq(o),s))}else if(n.hasClosest("tbody")){var l=this.$("table thead tr.col-headers th.table-cell");o+=this.lastViewportColumnRange.start,i(l.eq(o),s)}return!1}}},selectionDown:function(e){if(this.$selectionDiv){e&&e.preventDefault();var t=this.selectionConfigForEvent(e),n=t.cell,i=t.selectFunction,r=n.parent("tr").next("tr"),o=n.parent().children(".table-cell").index(n),s={noXScroll:!0};if(0!==r.length)i(r.children(".table-cell").eq(o),s);else{var a=this.getCellInfo(n).getCoordinates();if(a.row++,a.row<this.rows.length){var l=this.getCellInfoForCoordinates(a),c=this.ensureCellInfoRendered(l);r=c.parent("tr")}if(0!==r.length)i(r.children(".table-cell").eq(o),s);else if(n.hasClosest(".body"))r=this.$footer().find("tr"),i(r.children(".table-cell").eq(o),s);else if(n.hasClosest("thead")){this.$header().data("sticking")&&this.scrollView.scrollToTopOfView(this.el);var u=this.$("table tbody tr:first-child td.table-cell");o-=this.lastViewportColumnRange.start,i(u.eq(o),s)}}return!1}},lastSelectableColumnIndex:function(){return n._getUnderscore(this.columns).invoke("isSelectable").lastIndexOf(!0)},forEachRow:function(e){var t=this;this.$("tbody.body .table-row").each(function(){e($(this),t.rowFromRowElement(this))})},getSelectableColumnLength:function(){return n._getUnderscore(n._getUnderscore(this.columns).invoke("isSelectable")).countBy().true},jumpSelection:function(e,t){var i=this.getSelectionAnchorInfo();if(i){e.preventDefault();var r,o=t.split("+"),s=n._getUnderscore(o).last(),a="shift"===o[1],l=i.coordinates;a&&(r=n._getUnderscore(this).soak("getDiagonalInfo().coordinates")),r=r||_.clone(l);var c="selection";switch(s){case"left":r.column=0;break;case"right":r.column=this.lastSelectableColumnIndex();break;case"up":r.row=this.hasHeaders?"header":0,c="top";break;case"down":"empty"!==r.row&&(r.row=this.rows.length-1),c="bottom";break;default:throw new Error("Jump to invalid direction: "+s)}switch(a?this.selectRegionByCoordinates(l,r):this.selectRegionByCoordinates(r,r),c){case"selection":this.scrollToSelection();break;case"top":this.scrollView.scrollToTopOfView(this.scrollChild,!0);break;case"bottom":this.scrollView.scrollToBottomOfView(this.scrollChild,!0);break;default:throw new Error("Scroll to invalid position: "+c)}}},selectAll:function(){var e=this.lastSelectableColumnIndex();this.selectRegionByCoordinates({row:this.hasHeaders?"header":0,column:0},{row:this.hasEmptyRow?"empty":this.rows.length-1,column:e})},virtualOffsetForCellBottom:function(e){var t=this.virtualOffset+u.HEADER_HEIGHT;if(e.isHeaderRow)return t;if(e.isEmptyRow)return t+u.ROW_HEIGHT*(this.rows.length+1);var n=e.row,i=this.indexForRow(n);return t+u.ROW_HEIGHT*(i+1)},forceAllColumnsForSynchronousRender:function(e){this.forceAllColumns=!0;try{e()}finally{this.forceAllColumns=!1}},ensureCellInfoRendered:function(e){if(!this.cellInfoIsValid(e))return $();var t=this.$getCellByInfo(e);if(t.length)return t;var n=this.virtualOffsetForCellBottom(e),i=n-u.ROW_HEIGHT,r=this;return this.forceAllColumnsForSynchronousRender(function(){r.scrollView.ensureVirtualPosition(i,n)}),this.$getCellByInfo(e)},captureEdits:function(e){this.captureCount++,e.call(this),this.captureCount--,this.captureCount||this.dispatchEdits()},setEditingStatus:function(e){this.changes=this.changes||new s,this.changes.statusText=e},addChanges:function(e,t){this.changes=this.changes||new s,this.changes[e]=this.changes[e].concat(t),this.captureCount||this.dispatchEdits()},dispatchEdits:function(){this.changes&&(this.delegate.onEdit(this.changes),delete this.changes)},clearSelection:function(e){if(e&&e.preventDefault(),!this.readOnly){this.scrollToSelection({noXScroll:!0});var t=this.getSelectionRanges();if(this.getDiagonalInfo()){this.validateBulkChangeSize(t.rowCount(),"clear"),this.setEditingStatus(r["action-working-clearing-cells"]()),this.canEditHeaders&&(t.rowStart=Math.max(0,t.rowStart)),t.rowEnd=Math.min(t.rowEnd,this.rows.length-1);var i=n._getUnderscore(this.columns).getRange(t.colStart,t.colEnd+1),o=this;this.captureEdits(t.isRowSelection&&this.canDeleteRow?function(){n._getUnderscore(_.range(t.rowStart,t.rowEnd+1)).each(function(e){o.rowDelete(0>e?{isHeaderRow:!0}:o.rows[e])})}:function(){n._getUnderscore(_.range(t.rowStart,t.rowEnd+1)).each(function(e){var t,r=o.rows[e];t=r?n._getUnderscore(i).filter(function(e){return r?!r.isReadOnly(e):!e.isReadOnly()}):i;var s=n._getUnderscore(t).map(_.constant("")),a=new x({row:e,tableView:o});a.setValues(t,s).apply()})})}else{var s=this.getSelectionAnchorInfo();if(n._getUnderscore(this).soak("delegate.deleteHandler",s)===!1)return;if(s.isEmptyRow)return;if(s.isHeaderRow){if(this.canEditHeaders)return;return void this.headerChange(s.column,"")}if(t.isRowSelection&&this.canDeleteRow)this.rowDelete(s.row);else{if(s.column.isReadOnly())return;this.cellChange(s.row,s.column,C.createEmpty())}}}},fillDown:function(e){if(!this.readOnly){var t=this.getSelectionRanges();t&&(this.validateBulkChangeSize(t.rowCount(),"fill"),e.preventDefault(),this.setEditingStatus(r["action-working-filling-cells"]()),this.captureEdits(function(){var e=this,n={},i=t.firstBodyRow();t.eachColumn(function(e){var r;r=t.hasHeader?e.headerValue():e.cellValue(i),n[e.id()]=r});var r=!0;t.eachRow(function(t){if(r)return void(r=!1);var i=_.filterObject(n,function(n,i){var r=e.columnWithId(i);return t?!t.isReadOnly(r):!r.isReadOnly()});e.rowChange({row:t,attributes:i})})}))}},selectionKeyboardEvents:{right:"selectionRight","shift+right":"selectionRight",left:"selectionLeft","shift+left":"selectionLeft","shift+tab":"selectionLeft",tab:"selectionRight",up:"selectionUp","shift+up":"selectionUp",down:"selectionDown","shift+down":"selectionDown",backspace:"clearSelection","mod+a":"selectAll",del:"clearSelection","return":function(e){e.preventDefault();var t=this;this.scrollToSelection(),this.scrollView.setNeedsRenderContent(),this.scrollView.once("scrollRender",function(){var n=t.$selectedCell();n.length&&t.beginEditing(n,{select:!1,event:e})})},escape:"removeSelection","mod+left":"jumpSelection","mod+up":"jumpSelection","mod+right":"jumpSelection","mod+down":"jumpSelection","mod+shift+left":"jumpSelection","mod+shift+up":"jumpSelection","mod+shift+right":"jumpSelection","mod+shift+down":"jumpSelection","ctrl+d":"fillDown","ctrl+f1":"fillDown"},rowWithId:function(e){return this.rowCache[e]},columnWithId:function(e){return this.columnCache[e]},beginEditingColumnHeader:function(e){var t=this.columnWithId(e),n=this.$getColumnHeader(t);this.beginEditing(n,{select:!1})},beginEditing:function(e,t){if(t=t||{},!this.readOnly){if(!t.allowPropagation&&t.event&&t.event.stopPropagation(),!e||e instanceof $&&0===e.length)return void b.console.error("beginEditing called with null/empty cell (ignoring)");var n=this.getCellInfo(e);if(!n.isReadOnly()){if(this.selectCellByInfo(n,{scroll:!0}),this.delegate.editHandler){if(this.delegate.isEditable&&!this.delegate.isEditable(n))return;if(this.delegate.editHandler(n,t.event)===!1)return}var i,r=n.column;"initialValue"in t?i=t.initialValue:n.row?i=r.cellValue(n.row):n.isHeaderRow&&(i=r.headerValue());var o={cell:e,cellInfo:n,column:r,initialValue:i,selectOnFocus:t.select,oldEditor:t.oldEditor},s=_(n).soak("column.editorForCell",n,o)||_(this.delegate).soak("editorForCell",n,o)||this.defaultEditor(o),a=this.editorContainer();a.append(s.el),a.toggleClass("header-editor",n.isHeaderRow),a.toggleClass("footer-editor",n.isEmptyRow),s.render(),this.listenToOnce(s,"ft-editor-end",this.endEditing),this.currentEditor=s}}},endEditing:function(e){if(!e.isValid()&&!e.canceled)return e.updateValidationError(),this.listenToOnce(e,"ft-editor-end",this.endEditing),void(e.hasEnded=!1);if(this.currentEditor=null,!e.canceled){var t=e.getValue();e.cellInfo.row?this.cellChange(e.cellInfo.row,e.column,t):e.cellInfo.isHeaderRow?(this.headerChange(e.column,t.displayValue()),"right"===e.direction&&this.lastSelectableColumnIndex()===e.cellInfo.coordinates.column&&this.delegate.createColumn()):e.cellInfo.isEmptyRow&&!this.readOnlyEmptyRow&&(t.isEmpty()||(this.createRow(e.column,t),this.selectionUp()))}this.onNextTick(function(){this.buildRowCache(),e.direction&&this["selection"+r.capitalize(e.direction)]()}),dev.removeEditor&&e.remove(),this.updateClipboard()},defaultEditor:function(e){return e=_.defaults({},e,{scrollView:this.scrollView}),new a(e)},editorContainer:function(){return this.$(".fast-table-editor-container")},cellChange:function(e,t,n){if(!e.isReadOnly(t)){var i={row:e,attributes:{}},r="";e&&(r=t.getNewDisplayValue(e,t.cellValue(e)));var o=t.getNewDisplayValue(e,n);r.trim()!==o.trim()&&(i.attributes[t.id()]=n,this.addChanges("rowsChanged",i))}},rowChange:function(e){(!this.readOnlyEmptyRow||e.row)&&this.addChanges("bulkChanges",e)},rowDelete:function(e){this.addChanges("rowsDeleted",e)},headerChange:function(e,t){this.addChanges("renamedColumns",{column:e,name:t})},showContextMenu:function(e,t){var n=[e,this.delegate],i=[];e.cell&&i.push(c.create(e.column,"cellContextMenu",n)),i.push(c.create(e.row,"contextMenu",n)),i.push(c.create(e.column,"contextMenu",n)),i=i.filter(function(e){return e.canApply()});var r;i.some(function(e){return r=e.apply()}),r&&r.trim()&&this.delegate.showContextMenu(t,e,r)}.triggerTips(),showMultiSelectionContextMenu:function(e){var t=this.getSelectionAnchorInfo();this.delegate.showMultiSelectionContextMenu&&this.delegate.showMultiSelectionContextMenu(e,t,this.getSelectionRanges())},showColumnContextMenu:function(e,t){var n=this.$getColumnHeader(e),i=this.getCellInfo(n);this.showContextMenu(i,t)},createRow:function(e,t){var n=this.delegate.createRow(e,t),i={row:n,attributes:{}};return i.attributes[e.id()]=t,this.addChanges("rowsChanged",i),n},insertRow:function(e,t){if(!this.rowWithId(e.id())){this.rows.splice(t,0,e),this.buildRowCache();var n=this.rowHtml(e);if(0===t)this.$body().prepend(n);else{var i=this.rows[t-1];if(!i)return;this.$getRow(i).after(n)}this.updateRowCount(),this.scrollView.setNeedsRenderContent(),this.autoTooltip()}},removeRow:function(e){var t=this.rowWithId(e);t&&(delete this.rowCache[e],this.rows=n._getUnderscore(this.rows).without(t),this.buildRowCache(),this.$getRow(t).remove(),this.scrollView.setNeedsRenderContent())},$getRow:function(e,t){return t=t||this.$el,t.find(this.makeRowId(e))},$getRowHandleCell:function(e){return this.$getRow(e).closest("tr").children("th.row-handle-cell")},$getColumnCells:function(e,t){return t=t||this.$el,t.find(this.makeColumnSelector(e))},$getColumnHeader:function(e,t){return this.getCellByIds("header",e.id(),t)},$getCell:function(e,t,n){return n=n||this.$el,n.find(this.makeCellId(e,t))},$getCellByInfo:function(e,t){return this.cellInfoIsValid(e)?(t=t||this.$el,t.find(this.makeCellIdFromInfo(e))):$()},getCellByIds:function(e,t,n){return n=n||this.$el,n.find(this.makeColumnSelector(t)+this.constructSelector(".","row",e))},$getCellByCoordinates:function(e,t,i){var r;r=_.isString(e.row)?e.row:e.row<this.rows.length?this.rows[e.row]:"empty";var o=n._getUnderscore(this.columns).filter(i),s=n._getUnderscore(e.column).clamp(0,o.length-1),a=o[s];return this.$getCell(r,a,t)},makeCellInfoContext:function(e,t){return new V({row:e,column:t,isFirstColumn:this.isFirstColumn(t),isLastColumn:this.isLastColumn(t),table:this})},getCellInfo:function(e,t){t=t||{},e instanceof $&&(e=e[0]);var n=this.deconstructSelector(e.id,"cell-prefix-rowId-columnId");if(n.prefix!==this.tablePrefix)throw new Error("cell not in table");var i=this.makeCellInfoContext(this.rowCache[n.rowId],this.columnCache[n.columnId]);i.isEmptyRow="empty"===n.rowId,i.isHeaderRow="header"===n.rowId,i.cell=e,i.idParts=n;var r={column:this.indexForColumn(i.column)};return r.row=i.isEmptyRow?"empty":i.isHeaderRow?"header":this.indexForRow(i.row),i.coordinates=r,i},getCellInfoForCoordinates:function(e){var t=this.makeCellInfoContext(this.rows[e.row],this.columns[e.column]);return t.isEmptyRow="empty"===e.row,t.isHeaderRow="header"===e.row,t.coordinates=_.clone(e),t},cellInfoEquals:function(e,t){if(null==e)return null==t;if(null==t)return!1;if(e.cell&&t.cell){if(!$(e.cell).is(t.cell))return!1}else if(e.cell||t.cell)return!1;if(e.row&&t.row){if(e.row.id()!==t.row.id())return!1}else if(e.row||t.row)return!1;if(e.column&&t.column){if(e.column.id()!==t.column.id())return!1}else if(e.column||t.column)return!1;var i=e.coordinates,r=t.coordinates;return n._getUnderscore(["row","column"]).all(function(e){return i[e]===r[e]})},rowFromRowElement:function(e){e instanceof $&&(e=e[0]);var t=this.deconstructSelector(e.id,"row-prefix-rowId");return this.rowCache[t.rowId]},makeRowId:function(e){var t=e?e.id():"empty";return this.constructSelector("#","row",this.tablePrefix,t)},makeCellId:function(e,t){var n;if(e)if(e.id)n=e.id();else{if(!_.isString(e))throw new Error("Unknown row object type.");n=e}else n="empty";return this.constructSelector("#","cell",this.tablePrefix,n,t.id())},makeCellIdFromInfo:function(e){if(e.row&&e.column)return this.makeCellId(e.row,e.column);if(!e.column)throw new Error("Cannot create cell id without column");var t;return t=e.isHeaderRow?"header":"empty",this.constructSelector("#","cell",this.tablePrefix,t,e.column.id())},makeColumnSelector:function(e){var t=e;return _.isFunction(e.id)&&(t=e.id()),this.constructSelector(".","col",t)},insertColumn:function(e,t){this.columns.splice(t,0,e),this.buildColumnCache(),this.renderHeader();var r=this;n._getUnderscore(this.$(".table-row")).each(function(n){var o=r.rowFromRowElement(n),s=i.partials.fastRowCell(r.cellContext(o,e));$(n).find(".table-cell").eq(t).before(s)}),this.scrollView.setNeedsRenderContent(),this.hasWrap||this.rerenderAllRows(),this.autoTooltip()},setRows:function(e){this.rows=e,this.buildRowCache(),this.updateRowCount(),this.flushRowOrder=!0,this.scrollView.setNeedsRenderContent()},setColumns:function(e){this.validateColumns(),this.columns=e,this.buildColumnCache(),this.flushBody=!0,this.flushHeader=!0,this.scrollView.updateScrollSize(),this.scrollView.setNeedsRenderContent()},rerenderAllRows:function(){this.flushBody=!0,this.scrollView.setNeedsRenderContent()},removeColumn:function t(e){var t=this.columnWithId(e);this.columns=_.without(this.columns,t),this.buildColumnCache(),this.scrollView.updateScrollSize(),this.renderHeader(),this.$getColumnCells(e).remove(),this.scrollView.setNeedsRenderContent(),this.hasWrap||this.rerenderAllRows()},isFirstColumn:function(e){return this.columns[0]===e},isLastColumn:function(e){return this.columns[this.lastSelectableColumnIndex()]===e},constructSelector:function(e){var t=_(arguments).tail();return e+t.join("-")},deconstructSelector:function(e,t){var n=M[t];n||(n=M[t]=t.split("-"));var i=e.split("-");return _.object(n,i)},test_isSelected:function(e){e=$(e);var t=this.$selectedCells();return e.is(t)},test_isInSelectionOverlay:function(e){var t=$(e).bounds();if(t=o.insetRect(t,5,5),!this.test_inViewport(e))return null;var n=$(".multi-selection").bounds();return n?o.rectContainsRect(n,t):!1},test_inViewport:function(e){var t=$(e);if(!t.isAttached())return!1;var n=this.$footer().bounds();return t.bounds().top<n.top}}}),V=BaseObject.extend({propertyNames:["row","column","isFirstColumn","isLastColumn","table","isEmptyRow","isHeaderRow","cell","idParts","coordinates"],isReadOnly:function(){return this.readOnly?!0:this.row?this.row.isReadOnly(this.column):this.isEmptyRow?this.table.readOnlyEmptyRow||this.column.isReadOnlyEmptyRow():this.isHeaderRow?this.table.canEditHeaders:!1},getCoordinates:function(){{var e;_.clone(this.coordinates)}return this.isHeaderRow?e="header":this.isEmptyRow&&(e="empty"),this.table.cellInfoIsValid(this)?{row:e||this.table.indexForRow(this.row),column:this.table.indexForColumn(this.column)}:this.coordinates}}).addGetters({$cell:function(){return $(this.cell)}});dev.setOverlayTimeout=function(e){R=e},dev.add("table",function(){return $(".fast-table").view()}),dev.removeEditor=!0,F.deferrableRendering(),F.FastTableEditor=a,F.FastTableColumn=l,t.exports=F}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/indexCache":244,"../../common/invocation":245,"../../common/sheetclip":248,"../../common/strings":249,"../../common/values":253,"../globalEvents":22,"../keys.js":25,"../models/errorReport":40,"../models/tiledArray":70,"../performance":75,"../trackJs":78,"../viewModels/fastTableChanges":88,"../viewModels/fastTableRowChange":89,"./clipboardInterceptor":137,"./columnDragController":141,"./drawBox":149,"./eventListener":157,"./fastScrollConstants":169,"./fastScrollableView":171,"./fastSelectionRange":172,"./fastTableColumn":174,"./fastTableEditor":175,"./geometry.js":183,"./view":236,jss:688}],178:[function(e,t){(function(n){"use strict";{var i=e("./view"),r=e("./modalView"),o=e("./statusBarView"),s=e("../../common/strings"),a=e("../models/account"),l=[{name:"Generic",slug:"generic",iconName:"generic",symbol:""},{name:"Text",slug:"text",iconName:"text",symbol:""},{name:"Number",slug:"number",iconName:"number",symbol:"",useLocale:"number"},{name:"Currency",slug:"currency",iconName:"currency",symbol:"",useLocale:"number"},{name:"Percent",slug:"percent",iconName:"percentage",symbol:"",useLocale:"number"},{name:"Date",slug:"date",iconName:"date",symbol:"",useLocale:"date"},{name:"Day of year",slug:"dayofyear",iconName:"date",symbol:"",useLocale:"date"},{name:"Pick list",slug:"picklist",iconName:"pick-list",symbol:"",template:i.templates.pickListConfig},{name:"Email",slug:"email",iconName:"email",symbol:""},{name:"Website",slug:"website",iconName:"link",symbol:""},{name:"Image",slug:"image",oldIcon:"picture"}];
t.exports=r.extend({className:"field-type modal",template:i.templates.fieldTypeModal,initialize:function(e){this.field=e.field,r.prototype.initialize.apply(this,arguments)},show:function(){$("body").addClass("transparent-backdrop"),r.prototype.show.apply(this,arguments)},modalOptions:{backdrop:"static"},onShown:function(){this.$el.draggable()},hide:function(){$("body").removeClass("transparent-backdrop"),r.prototype.hide.apply(this,arguments)},getCurrentSlug:function(){return this.slug?this.slug:this.field.get("validation")||"generic"},context:function c(){var e,t=this.field.displayName()+" Input Type",i=this.getCurrentSlug(),r=_.chain(l).deepClone().map(function(e){return e.slug===i&&(e.active=!0),e}).value(),o=n._getUnderscore(l).find(function(e){return e.slug===i});if(o.template){var c=this.field.toContext();c.enum=c.enum&&0!==c.enum.length?n._getUnderscore(c.enum).pluck("name"):n._getUnderscore(this.field.getValues()).invoke("displayValue"),c.enum=c.enum||[],c.enum=n._getUnderscore(c.enum).chain().filter(function(e){return""!==e}).uniqString().value(),c.enumValues=c.enum.join("\n"),e=o.template(c)}else{var u="field-type-description-"+o.slug;if(o.useLocale){var d=o.useLocale,h=a.account.get(d+"Locale");u+="-"+h}e=s[u]}return{title:t,types:r,description:e}},events:{"click .type-item":function(e,t){this.slug=t.data("slug"),this.render()},"click .save":function(e){e.preventDefault(),this.hide();var t=this.getCurrentSlug(),i={validation:t},r={validation:this.field.get("validation")};if("picklist"===t){var a=this.$("textarea").val();a=n._getUnderscore(a.split("\n")).chain().map(function(e){return e.trim()}).filter(function(e){return""!==e}).value(),i.enum=a,i.type="enum",r.enum=this.field.get("enum").map(function(e){return e.get("name")}),r.type=this.field.get("type")}_.isEqual(i,r)||(this.captureActions(function(){this.field.set("processing",!0);var e=this.errorHandler("set-type");this.field.patch(i,r,{success:this.showStatus({action:"set-type",context:{fieldName:this.field.displayName()},undoable:!0}),error:function(t,n){o.hide(),e(t,n)}})}),o.show({text:s["action-working-set-type"]()}))}}})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/strings":249,"../models/account":27,"./modalView":203,"./statusBarView":225,"./view":236}],179:[function(e,t){"use strict";var n=BaseObject.extend({});t.exports=n},{}],180:[function(e,t){"use strict";{var n=e("./view"),i=n;t.exports=i.extend({className:"form-share",initialize:function(){var e=this.navItem;e&&this.listenTo(this.navItem,"change:public",this.renderDeferred),this.listenTo(this,"modal-tab-activate",function(){this.autosizeIframeText()})},autosizeIframeText:function(){this.$iframeText.length>0&&this.$iframeText.textareaAutoSize()},render:function(){this.$el.html(n.templates.formShare(this.context())),this.autosizeIframeText()},context:function(){var e=this.navItem;if(!e||!e.isForm())return{isOnForm:!1};var t=window.location.origin+"/?utm_source=forms_link&utm_medium=referral&utm_campaign=powered_by_fieldbook",n=window.location.origin+"/img/poweredbyfieldbook.png",i=window.location.origin+"/img/poweredbyfieldbook@2x.png";return{isOnForm:!0,isPublic:e.get("public"),navItemUrl:e.anonymousUrl(),iframeUrl:e.iframeUrl(),poweredByFieldbookUrl:t,poweredByFieldbookImg:n,poweredByFieldbookImg2x:i}},events:{"click .disable-share":function(){this.navItem.saveIfNeeded({"public":!1},{error:this.errorHandler("update-form")})},"click .enable-share":function(){this.navItem.saveIfNeeded({"public":!0},{error:this.errorHandler("update-form")})},"focus .share-link-input":function(e,t){t[0].select()},"focus .iframe-text":function(e,t){t[0].select()}}}).addProperties("navItem").addComponents({iframeText:".iframe-text"}).deferrableRendering()}},{"./view":236}],181:[function(e,t){(function(n){"use strict";function i(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var r=i(["form-no-multiline-validation ",""],["form-no-multiline-validation ",""]),o=i(["form-no-multiline-link"],["form-no-multiline-link"]),a=i(["form-no-fields-to-add"],["form-no-fields-to-add"]),l=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/view"),c=(e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/models"),e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/routing")),u=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/parser").cursorToken,d=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/fieldTypeView"),h=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/forms/baseFormView"),f=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/keys"),p=h,m=t.exports=p.extend({className:"form-admin",isRendering:0,initialize:function(){this.listenTo(this.navItem,"change:form",this.renderAndPreserveStateDeferred),this.listenTo(this.navItem,"change:public",this.renderAndPreserveStateDeferred)}.before(p.prototype.initialize),render:function(){var e=l.templates.form(this.context);this.$el.html(e),this.decorateForm(),0===$(":focus").length&&this.$inputs.eq(0).focus()}.after(p.prototype.render),renderAndPreserveState:function(){var e=this,t=this.isRendering;if(this.isRendering++,!t){var i=this.el.scrollTop,r=this,o=this.$(":focus"),s=this.closestComponent(o,"$fields").data("key"),a=n._getUnderscore(["$inputs","$labelEditor"]).find(function(t){return e.isComponent(o,t)}),l={};if(n._getUnderscore(this.$fields).each(function(e){e=$(e);var t=n._getUnderscore(l).ensureChild(e.data("key"),{});t.val=e.find(".user-form-input").val(),e.hasClass("error")&&(t.isError=!0)}),this.render(),this.el.scrollTop=i,a){var c=this.$(".field-group-"+s,a);this.focusEl(c)}else this.$(":focus").blur();n._getUnderscore(l).each(function(e,t){{var n=r.$("#field-"+t);r.closestComponent(n,"$fields")}n.val(e.val),e.isError&&r.updateValidationForInput(n)})}}.after(function(){this.isRendering--}),remove:function(){n._getUnderscore(this).soakCall("fieldTypeView.remove")}.before(p.prototype.remove),fieldWithKey:function(e){return this.sheet.fieldWithKey(e)},blur:function(){this.$(":focus").blur()},fieldForInput:function(e){e=$(e);var t=this.keyForInput(e);return this.fieldWithKey(t)},fieldForFieldEl:function(e){var t=$(e).data("key");return this.fieldWithKey(t)},fieldForElement:function(e){var t=this.closestComponent(e,"$fields");return this.fieldForFieldEl(t)},formatOptionsForFieldKey:function(e){var t=this.fieldWithKey(e);return t.formatOptions()},getValidatorForInput:function(e){var t=e.val(),n=this.fieldForInput(e);return n.getValidator(t)},goToRecord:function(e){c.router.goToRecord(e.id)},decorateForm:function(){var e=this.navItem.readOnlyFlag,t=this.navItem.metadataLockedFlag;e&&this.$inputs.prop("disabled",!0),this.$el.applyReadOnly(e),this.$el.applyMetadataLock(t),this.$el.autoTooltip({container:"body"}),t||this.$fieldsContainer.sortable({axis:"y",items:"> "+this.componentSelectors.$fields,update:this.onReorderField.bind(this),tolerance:"pointer"})},onReorderField:function(){this.blur(),this.saveForm()},saveForm:function(e){e||(e=this.serializeFormStructure()),this.captureActions(function(){this.navItem.saveIfNeeded({form:e},{error:this.errorHandler("update-form")})})},serializeFormStructure:function(){var e=this.navItem.get("form").fields,t=n._getUnderscore(this.$fields).chain().mapBySoak("dataset.key").invert().mapObject(Number).value(),i=n._getUnderscore(e).chain().filter(function(e){return null!=t[e.key]}).sortBy(function(e){return t[e.key]}).value();return n._getUnderscore({fields:i}).deepClone()},removeField:function(e,t){var n=this;e.preventDefault();var i=t.closest(".field");this.qDeferredAction(function(){return i.fadeOut().promise()}).then(function(){i.remove(),n.blur(),n.saveForm()}).done()},addField:function(e,t){e.preventDefault();var n=t.closest(".field"),i=this.$fields.index(n),r=t.data("slug"),o=this.fieldWithKey(r),s=this.serializeFormStructure(),a=o.getFormInfo();s.fields.splice(i+1,0,a),this.blur(),this.saveForm(s)},saveRecord:function(e){var t=this,n=e.goToRecord,i=e.target,r=this.gatherAttributes();r.sheetId=this.sheet.id,this.addSpinner(i,this.greyButtonSpinnerOptions),this.captureActions(function(){this.sheet.get("records").create(r,{success:function(e){t.stopSpinning(i),n?t.goToRecord(e):t.clearForm();var r=t.showStatus({action:"create-record",context:{name:e.name()}});r(e)},error:this.errorHandler({action:"create-record",spinner:i})})})},parseInputFromElement:function(e,t){var n=this.fieldForInput(e);return n.resolveValue(t)},currentFields:function(){var e=this.navItem.get("form").fields,t=this.sheet;return n._getUnderscore(e).map(function(e){return t.fieldWithKey(e.key)})},getPotentialFields:function(){var e=n._getUnderscore(this.sheet.getFields()).filterBySoak("validForForm()");return n._getUnderscore(e).difference(this.currentFields())},keyFromFieldIdentifier:function(e){var t=e;if(e.jquery){var n=e,i=this.fieldForElement(n);t=i.key}return t},getFormField:function(e,t){!function(n){if(1===n){t=e;var i=[];e=i[0]}}(arguments.length),function(){null==e&&(e=this.serializeFormStructure())}.call(this);var i=this.keyFromFieldIdentifier(t);return n._getUnderscore(e.fields).find({key:i})},updateFormField:function(e,t,i){!function(n){if(2===n){var r=[e,t];t=r[0],i=r[1];var o=[];e=o[0]}}(arguments.length),function(){null==e&&(e=this.serializeFormStructure())}.call(this);var r=this.getFormField(e,t);n._getUnderscore(r).extend(i),this.saveForm(e)},focusEl:function(e){if(this.isComponent(e,"$labelEditor")){var t=e,n=this.$(this.closestComponent(e,"$fields"),"$staticLabel"),i=n.bounds();t.width(i.width),t.height(i.height),n.hide(),t.removeClass("hidden"),t.focus(),t.select()}else e.focus()},getFormId:function(){return this.navItem.get("uuid")},events:{"click .remove-field":"removeField","click .add-field":"addField","click .open-form-share":function(e){e.preventDefault(),e.stopPropagation(),$(".book-detail").view().showShareModalIfConfirmed({form:!0})},"click .set-type":function(e,t){var n=this.fieldForElement(t);this.fieldTypeView=new d({field:n}),this.fieldTypeView.show()},"click .toggle-required":function(e,t){var n=this.fieldForElement(t),i=!n.get("required");this.captureActions(function(){n.saveIfNeeded({required:i},{error:this.errorHandler("update-field")})})},"click $staticLabel":function(e,t){if(!this.navItem.metadataLockedFlag){e.preventDefault(),e.stopPropagation();var n=this.closestComponent(t,"$fields"),i=this.$(n,"$labelEditor");this.focusEl(i)}},click:function(e){$(e.target).hasClosest(":focus")||this.$(":focus").blur()},"blur $labelEditor":function(e,t){if(!this.isRendering){var n=t.val();this.updateFormField(t,{label:n}),this.renderAndPreserveStateDeferred()}},"click $toggleMultiline":function(e,t){var n=this.getFormField(t).size,i="short"===n?"long":"short";this.updateFormField(t,{size:i})},"keydown $labelEditor":function(e,t){f.matchEvent(e,"RETURN")&&(e.preventDefault(),t.blur())},"focus $inputs":function(e,t){this.isComponent(t,"$joinInputs")||t.isnt('input[type="text"]')||this.showAutocomplete(t)},"blur $inputs":function(e,t){this.isComponent(t,"$joinInputs")||this.hideAutocomplete(t)},"autocomplete-key-enter $inputs":function(e,t){this.isComponent(t,"$joinInputs")||this.hideAutocompleteAndFocusNext(t)},"autocomplete-key-tab $inputs":function(e,t){this.isComponent(t,"$joinInputs")||this.hideAutocompleteAndFocusNext(t)}}}).addProperties("navItem").addGetters({sheet:"navItem.sheet()",context:function g(){var e=this,g=n._getUnderscore(this.navItem.formContext()).deepClone();g.public=this.navItem.get("public"),g.formUrl=this.navItem.anonymousUrl();var t=n._getUnderscore(["generic","text"]).makeSet();return n._getUnderscore(g.fields).each(function(n){var i=e.fieldWithKey(n.key);n.configRestrictions=i.getConfigRestrictionInfo(),n.canSetMultiline=!0,t[i.get("validation")]?i.isAnyLink()&&(n.canSetMultiline=!1,n.noMultilineReason=s(o)):(n.canSetMultiline=!1,n.noMultilineReason=s(r,i.pick("validation")))}),g.addFieldItems=n._getUnderscore(this.getPotentialFields()).map(function(e){return{cls:"add-field",text:e.displayName(),slug:e.get("key")}}),0===g.addFieldItems.length&&(g.noAddFieldReason=s(a)),g}}).deferrableRendering().addComponents({staticLabel:".field-static-label",labelEditor:".field-editable-label",toggleMultiline:".field-toggle-multiline"});m.FormAutocompleteDelegate=h.FormAutocompleteDelegate.extend({constructorName:"internalFormAutocompleteDelegate",getCompletionValuesForQuery:function(e){var t=e.replace(u,""),n=this.formView.fieldForInput(this.input);return Q.Promise(function(i,r){try{if(n.isNameField())return i([]);n.queryAutocompleteValues(t,e,i,{allowFormula:!1})}catch(o){r(o)}})}}).addProperties("formView","input"),dev.add("formView",function(){return m.displayedView()})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/forms/baseFormView":12,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/keys":25,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/models":47,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/parser":74,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/routing":76,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/fieldTypeView":178,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/view":236}],182:[function(e,t){"use strict";var n=e("./view"),i=e("./modalView"),r=e("../globalEvents"),o=e("../models/expressions/expression"),s=e("../../common/strings"),a=e("./autocompleteView"),l=e("../../common/errors"),c=i.extend({positionPad:10,className:"modal hide formula-view",template:n.templates.formula,initialize:function(){this.options.initialValue=String(this.options.initialValue),this.render(),this.setup()},context:function(){return{isReportFormula:this.options.field.isReportFormula(),initialValue:this.initialEditableValue()}},setup:function(){var e=this;this.formulaField=this.$(".formula-field"),this.onNextTick(function(){e.autocompleteView=new a({input:e.formulaField,inputSelectorClass:"formula-field",source:function(t,n){t="="+t,e.options.field.queryAutocompleteValues(t,t,function(e){n(_.map(e,function(e){return e.slice(1)}))})}}),e.$(".autocomplete-container").append(e.autocompleteView.$el)})},reposition:function(){var e=this.options.avoidSpan;if(e){var t=this.$el.offset(),n=this.$el.width(),i=e.left-n-this.positionPad,r=e.right+this.positionPad;i>this.positionPad?t.left=i:r+this.positionPad<document.body.clientWidth&&(t.left=r);var o=this.$el.height(),s=e.top-o-this.positionPad,a=e.bottom+this.positionPad;t.top=a+o+this.positionPad<window.innerHeight?a:s,this.$el.offset(t)}},events:{"input .formula-field":"onEdit","blur .formula-field":function(){this.formulaField.focus()},"click .fv-save":function(){var e={error:this.errorHandler("update-field-formula")},t=!0;return this.captureActions(function(){var n=this.options.field,i=this.formulaField.val();if(""===i.trim())if(n.restoreStashed(),n.isReportFormula()){var r=o.parse('""',n.formulaSheet(),{forbiddenFields:[n]});n.saveFormula(r,e)}else n.removeFormula(e);else try{var a=n.isReportFormula(),c=o.parse(i,n.formulaSheet(),{forbiddenFields:[n],isReportFormula:a});a&&c.validateReportExpression(),n.restoreStashed(),n.saveFormula(c,e)}catch(u){if(t=!1,u instanceof o.ParseError||u instanceof l.ValidationError){var d=this.$(".error");return d.text(u instanceof l.ValidationError?u.getMessage():s["error-parse-formula-generic"]()),void this.$(".formula-panel").addClass("has-error")}throw u}}),t?(this.didSave=!0,void this.hide()):!1},show:Tips.displayAfter(function(){this.formulaField.val(this.initialEditableValue()),r.trigger("formulaView:show",this),this.onEdit()}),shown:function(){this.reposition(),this.$el.prev().css({opacity:.3}),this.$el.draggable();var e=(this.options.field,this);this.onNextTick(function(){e.formulaField.focus()})},hide:Tips.displayAfter(function(){var e=this.options.field;this.didSave||e.restoreStashed(),c.formulaView===this&&delete c.formulaView,r.trigger("formulaView:hide",this)})},initialEditableValue:function(){var e=this.options.initialValue||"";return!this.getField().isReportFormula()||'""'!==e&&"''"!==e?e:""},getField:function(){return this.options.field},onEdit:function(e){if(13===_.soak(e,"keyCode"))this.$(".fv-save").click();else{this.$(".formula-panel").removeClass("has-error");var t=this.formulaField.val();t=t.trim()||'""';var n=this.options.field;try{var i=o.parse(t,n.formulaSheet(),{forbiddenFields:[n],isReportFormula:n.isReportFormula()});n.isReportFormula()&&i.validateReportExpression();var r=n.get("expression");if(!r||i.stringify(n.formulaSheet())!==r.stringify(n.formulaSheet())){n.stash();var s={type:"formula",expression:i};n.isReportFormula()&&(s.type="report-formula",s.name=i.nameify(n.formulaSheet())),n.set(s)}}catch(a){if(a instanceof o.ParseError||a instanceof l.ValidationError)return;throw a}}}});c.beginFormulaPanel=function(e){this.formulaView=new c(e),this.formulaView.show()},t.exports=c},{"../../common/errors":242,"../../common/strings":249,"../globalEvents":22,"../models/expressions/expression":42,"./autocompleteView":126,"./modalView":203,"./view":236}],183:[function(e,t){(function(e){"use strict";var n=t.exports={makeRect:function(e,t,n,r){return new i(e,t,n,r)},makeRectFromClientRect:function(e){return this.makeRect(e.left,e.top,e.width,e.height)},makeRectFromOriginSizeRect:function(e){var t={};return _(t).pickFrom(e.origin,"left","top"),_(t).pickFrom(e.size,"width","height"),this.makeRectFromClientRect(t)},rectContainsRect:function(e,t){return e.top>t.top?!1:e.bottom<t.bottom?!1:e.left>t.left?!1:e.right<t.right?!1:!0},rectsIntersect:function(e,t){return e.top>t.bottom?!1:t.top>e.bottom?!1:e.left>t.right?!1:t.left>e.right?!1:!0},unionRect:function(t,n){var i=this.makeRectFromClientRect(t);return e._getUnderscore(["top","left"]).each(function(e){i[e]=Math.min(t[e],n[e])}),e._getUnderscore(["bottom","right"]).each(function(e){i[e]=Math.max(t[e],n[e])}),i},intersectionRect:function(t,n){var i=this.makeRectFromClientRect(t);return e._getUnderscore(["top","left"]).each(function(e){i[e]=Math.max(t[e],n[e])}),e._getUnderscore(["bottom","right"]).each(function(e){i[e]=Math.min(t[e],n[e])}),i},rectRelativeToRect:function(e,t){return e=e.clone(),e.x-=t.x,e.y-=t.y,e},unionOfRects:function(e){return e.length?e.reduce(this.unionRect):void 0},pointInRect:function(e,t){return 3===arguments.length&&(e={x:arguments[0],y:arguments[1]},t=arguments[2]),this.rectsIntersect(t,this.makeRect(e.x,e.y,0,0))},insetRect:function(e,t,i){return n.makeRect(e.left+t,e.top+i,e.width-2*t,e.height-2*i)},outsetRect:function(e,t,i){return n.insetRect(e,-t,-i)},lerp:function(e,t,n){return(1-n)*e+n*t},qerp:function(e,t,n,i){return this.lerp(this.lerp(e,t,i),this.lerp(t,n,i),i)},distance:function(e,t){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}};_.bindAllFunctions(n);var i=function(e,t,n,i){this.x=e||0,this.y=t||0,this.width=n||0,this.height=i||0};i.prototype.clone=function(){return n.makeRectFromClientRect(this)},Object.defineProperties(i.prototype,{top:{enumerable:!0,get:function(){return this.y},set:function(e){var t=this.bottom;return this.y=e,this.bottom=t,e}},left:{enumerable:!0,get:function(){return this.x},set:function(e){var t=this.right;return this.x=e,this.right=t,e}},right:{enumerable:!0,get:function(){return this.x+this.width},set:function(e){return this.width=e-this.x,e}},bottom:{enumerable:!0,get:function(){return this.y+this.height},set:function(e){return this.height=e-this.y,e}},centerY:{enumerable:!0,get:function(){return this.y+this.height/2}},centerX:{enumerable:!0,get:function(){return this.x+this.width/2}},origin:{get:function(){return e._getUnderscore(this).pick("left","top")}},size:{get:function(){return e._getUnderscore(this).pick("width","height")}},isEmpty:{get:function(){return this.width<=0||this.height<=0}}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],184:[function(e,t){(function(n){"use strict";var i=e("jss"),r=t.exports={currentStyle:null,stack:[],push:function(e){this.stack.push(e),this.attach()},pop:function(){this.stack.pop(),this.attach()},attach:function(){this.detach();var e=n._getUnderscore(this.stack).last();this.currentStyle=i.createStyleSheet({"body *":{cursor:["-webkit-","-moz-",""].map(function(t){return"{{prefix}}{{cursor}} !important".stencil({cursor:e,prefix:t})})}}).attach()},detach:function(){this.currentStyle&&(this.currentStyle.detach(),this.currentStyle=null)}};_.bindAll(r,"push","pop")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{jss:688}],185:[function(e,t){"use strict";var n=e("./view"),i=(e("./index"),e("../viewModels/help/help")),r=i.Entry,o=e("../keys"),s=n.extend({className:"help-container",initialize:function(){this.$el.html(n.templates.help()),this.input=this.$(".help-input"),this.render()},helpClicked:function(){r.currentEntry&&r.end(),this.show()},show:function(){this.$el.fadeIn(200),this.input.focus().select()},hide:function(){this.$el.fadeOut(200)},events:{"input .help-input":"render","click .question:not(.ask)":"onClickQuestion","click .question.ask":"onClickAskUs","keydown .help-input":"onKeyDown","click .smokescreen":"hide","mouseenter li":function(e){this.$(".active").removeClass("active"),$(e.target).addClass("active")},"mouseleave li":function(e){$(e.target).removeClass("active")}},keyboardEvents:{"?":function(){return this.show(),!1}},renderQuestions:function(){var e=this,t=this.input.val();this.$(".questions").html(n.templates.helpQuestions({questions:this.getQuestions()})),r.getQueryTerms(t).forEach(function(t){e.$(".questions").highlight(t)})},render:function(){this.renderQuestions()},getQuestions:function(){var e=this.input.val(),t=r.find(e);return t.map(function(e){return{title:e.prototype.title,id:e.id}})},clear:function(){this.input.val("")},onClickQuestion:Tips.displayAfter(function(e){var t=r.get($(e.target).closest(".question").data("entry"));r.begin(t),this.clear(),this.hide()}),onClickAskUs:function(){this.clear(),this.hide(),window.Intercom("show")},onKeyDown:function(e){if(this.$el.is(":visible"))if(e.keyCode===o.DOWN||e.keyCode===o.UP){this.$("li").length>1&&e.preventDefault();var t=this.$("li.active");this.$("li").removeClass("active");var n;e.keyCode===o.DOWN?(n=t.next(),0===n.length&&(n=this.$("li").first())):e.keyCode===o.UP&&(n=t.prev(),0===n.length&&(n=this.$("li").last())),t.removeClass("active"),n.addClass("active"),n[0].scrollIntoViewIfNeeded()}else if(e.keyCode===o.RETURN){e.stopPropagation(),e.preventDefault();var i=this.$("li.active");i.click(),this.hide()}else e.keyCode===o.ESC&&this.hide()}});t.exports=s},{"../keys":25,"../viewModels/help/help":93,"./index":188,"./view":236}],186:[function(e,t){(function(n){"use strict";var i=e("../models"),r=(e("../routing"),e("./view")),o=e("../../common/strings"),s=e("../viewModels/imports").imports,a=e("../models/template"),l=e("./clickToSelectView"),c=r,u=t.exports=c.extend({className:"home-view",initialize:function(){this.bookList=i.Book.collection,this.bookList.fetchIfNeeded(),this.listenTo(a.collection,"sync",this.renderDeferred),this.listenTo(this.bookList,"add",this.renderDeferred),this.listenTo(this.bookList,"change",this.renderDeferred),this.listenTo(this.bookList,"remove",this.renderDeferred),this.listenTo(this.bookList,"reset",this.renderDeferred),this.listenTo(this.bookList,"sort",this.renderDeferred),this.listenTo(this.bookList,"sync",this.renderDeferred),this.render()},gatherTitleBarInfo:function(e){e.setMode("home")},events:{"click .intercom-button":function(){window.Intercom.public_api.showNewMessage()},"mouseup .intercom-button":function(e,t){t.blur()}},render:function(){a.collection.fetchIfNeeded();var e=i.Account.account,t={user:e.toContext(),hideReferral:e.createdWithinLastDay(),imports:s,templates:n._getUnderscore(a.collection.toContext()).head(3)};this.refLinkView&&this.refLinkView.remove(),this.refLinkView=null,this.$el.html(r.templates.homeView(t)),this.renderBooks(),this.$el.isAttached()||$("body").append(this.$el);var c=e.referralUrl();this.refLinkView=new l({text:c}),this.$(".referral-link").append(this.refLinkView.el),this.refLinkView.render(),document.title=o.title()},renderBooks:function(){var e=this.getBooksForList(),t=e.length,i=!t;if(this.$(".book-list-pane").safeToggleClass("hidden",i),!i){e=n._getUnderscore(e).head(5);var o=e.map(function(e){return r.partials.bookLink(e.toContext())}),s=this.$(".book-links");s.html(o.join("")),this.$(".book-list-pane .see-all").safeToggleClass("hidden",5>=t)}},getBooksForList:function(){return this.bookList.isLoaded()?n._getUnderscore(this.bookList).sortBy(function(e){var t=n._getUnderscore(e).soak("currentBookUser().@lastAccess");return-new Date(t)}):[]}});u.deferrableRendering()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/strings":249,"../models":47,"../models/template":68,"../routing":76,"../viewModels/imports":98,"./clickToSelectView":136,"./view":236}],187:[function(e,t){"use strict";var n=e("./view"),i=e("../viewModels/imports"),r=n.extend({className:"import-list",initialize:function(){this.$el.html(n.templates.importList(i))},gatherTitleBarInfo:function(e){e.setMode("importSync")}});t.exports=r},{"../viewModels/imports":98,"./view":236}],188:[function(e,t,n){"use strict";n.View=e("./view"),n.TipView=e("./tipView"),n.BookListView=e("./bookListView"),n.ErrorAlertView=e("./errorAlertView"),n.RecordView=e("./recordView"),n.RootView=e("./rootView"),n.BookUsersView=e("./bookUsersView"),n.BookView=e("./bookView"),n.SheetView=e("./sheetView"),n.StatusBarView=e("./statusBarView"),n.HelpView=e("./helpView"),n.TitleBarView=e("./titleBarView"),n.FastRecordListView=e("./fastRecordListView"),n.FastTableView=e("./fastTableView"),n.FastTableEditor=e("./fastTableEditor"),n.PlanView=e("./planView"),n.ModalTabView=e("./modalTabView"),n.EmailConfirmView=e("./emailConfirmView"),e("./textArea")},{"./bookListView":127,"./bookUsersView":130,"./bookView":131,"./emailConfirmView":154,"./errorAlertView":155,"./fastRecordListView":164,"./fastTableEditor":175,"./fastTableView":177,"./helpView":185,"./modalTabView":202,"./planView":210,"./recordView":217,"./rootView":220,"./sheetView":222,"./statusBarView":225,"./textArea":228,"./tipView":230,"./titleBarView":231,"./view":236}],189:[function(e){(function(t){"use strict";e("dotdotdot");var n=e("../globalEvents"),i=e("./fastScrollConstants"),r=e("./geometry"),o=e("jquery");o.heightCacheVersion=0,n.on("dataModelUpdate",function(){o.invalidateHeightCache()}),o.invalidateHeightCache=function(){o.heightCacheVersion++},o.fn.hasClosest=function(e){return this.closest(e).length>0},o.fn.cancelTransition=function(){this.addClass("no-transition"),this.flushTransition(),this.removeClass("no-transition")}.chainable(),o.fn.flushTransition=function(){var e=this[0];e&&e.offsetHeight}.chainable(),o.fn.isAttached=function(){return this.hasClosest(document.documentElement)},o.fn.hasChild=function(e){return o(e).hasParent(this)},o.fn.hasParent=function(e){this.parent().is(e)},o.fn.appendIfNeeded=function(e){return this.hasChild(e)?this:this.append(e)},o.fn.computedStyle=function(){return window.getComputedStyle(this[0])},o.fn.isnt=function(e){return!this.is(e)},o.fn.dataAttr=function(e,t){return e="data-"+e.inflect("underscore").inflect("dasherize"),2===arguments.length?(this.attr(e,t),this):this.attr(e)},o.fn.findInclusive=function(e){return this.find(e).addBack(e)},o.fn.applyReadOnly=function(e){return e?(this.find(".no-read-only").remove(),this):void 0},o.fn.applyMetadataLock=function(e){return e?(this.find(".metadata-access").remove(),this):void 0},o.fn.getTranslation=function(){if(!this.length)return[0,0];var e=this[0].style.transform;if(!e||"none"===e)return[0,0];var t=/([\d\.]+)/g;return e.match(t).map(Number)},o.fn.transformX=function(e){if(arguments.length){var n=this.transformY(),i="translate({{x}}px, {{y}}px)".stencil({x:e,y:n});return t._getUnderscore(this).each(function(e){e.style.transform=i}),this}return this.getTranslation()[0]},o.fn.transformY=function(e){if(arguments.length){var n=this.transformX(),i="translate({{x}}px, {{y}}px)".stencil({x:n,y:e});return t._getUnderscore(this).each(function(e){e.style.transform=i}),this}return this.getTranslation()[1]},o.fn.setTransform=function(e,t){return this.css("transform","translate({{x}}px, {{y}}px)".stencil({x:e,y:t})),this},o.fn.setSizeIfNeeded=function(e,t){this.css("width")!==e+"px"&&this.css("width",e),this.css("height")!==t+"px"&&this.css("height",t)},o.fn.pointInAnyElement=function(e){var n,i;"pageX"in e?(n=e.pageX,i=e.pageY):(n=e.x,i=e.y);var s={x:n,y:i};return!!t._getUnderscore(this).find(function(e){var t=o(e).bounds();return r.pointInRect(s,t)})},o.fn.autoTooltip=function(e){var t=e||{},n="top";t.autoPlacement&&t.placement&&(n=t.placement,delete t.placement);var i=this.find(".has-tooltip");return i.each(function(){var e=220,i=o(this),a=t.autoPlacement||i.data("autoPlacement");if(a){var l=i.bounds(),c=t.container?o(t.container):i.scrollParent(),u=c.bounds(),d=i.data("originalPlacement")||i.data("placement")||n;i.data("originalPlacement",d);var h;if("right"===d)h=l.right+e;else{if("left"!==d)throw new Error("Auto-placement only supported for left and right tooltips");h=l.left-e}if(r.pointInRect({x:h,y:u.centerY},u))i.data("placement",d);else{var f=s[d];i.data("placement",f)}}}),i.tooltip.apply(i,arguments)};var s={top:"bottom",right:"left",bottom:"top",left:"right"};o.fn.views=function(){return _.chain(this.toArray()).map(o).invoke("view").value()},o.fn.bounds=function(e){var t=this[0]&&this[0].getBoundingClientRect();if(!t)return null;var n=r.makeRectFromClientRect(t);if(e){var i=this.position();return n.x=i.left,n.y=i.top,n}return n},o.fn.allBounds=function(){return t._getUnderscore(this).invoke("getBoundingClientRect")},o.fn.getCachedHeight=function(){var e=this.data("outerHeight");if(e&&e.version===o.heightCacheVersion)return e.height;var t=this.outerHeight(!0);return this.isAttached()&&this.data("outerHeight",{version:o.heightCacheVersion,height:t}),t},o.fn.delayedRemove=function(e){e=e||i.FLING_DELAY;var t=this;return t.detach(),_.delay(function(){t.parent().length||t.remove()},e),this},o.fn.safeToggleClass=function(e,t){return this.toggleClass(e,!!t),this},o.fn.isEmpty=function(){return 0===this.length},o.fn.contains=function(e){return!this.find(e).isEmpty()},o.fn.containsInclusive=function(e){return!this.findInclusive(e).isEmpty()},o.fn.selectText=function(){var e=window.getSelection();return e.removeAllRanges(),this.each(function(){var t=document.createRange();t.selectNodeContents(this),e.addRange(t)}),this},o.fn.setCursorPosition=function(e){return this.each(function(t,n){if(n.setSelectionRange)n.setSelectionRange(e,e);else if(n.createTextRange){var i=n.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select()}}),this},o.deselectAllText=function(){var e=window.getSelection();e&&e.rangeCount>0&&e.getRangeAt(0).getClientRects().length>0&&e.removeAllRanges()},o.fn.indexOrLast=function(e){return this.length<=e?this.last():this.eq(e)},o.fn.view=function(){return this.data("view")},o.fn.removeView=function(){return this.each(function(){var e=o(this),t=e.view();t?t.remove():e.remove()}),this},o.fn.getBoundingClientRect=function(){return 0!==this.length?this[0].getBoundingClientRect():void 0},Object.defineProperty(o.fn,"_",{get:function(){return _(this.toArray())}}),o.hasFocusedElement=function(){var e=document.activeElement;if(!e)return!1;var t=o(e);return t.is(".copyPaste")||t.is("body")?!1:!0},o.fn.unbindViewEvents=function(e){this.off(e.namespacedEventName())}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../globalEvents":22,"./fastScrollConstants":169,"./geometry":183,dotdotdot:638,jquery:"jquery"}],190:[function(e,t){(function(n){"use strict";
{var i=e("./view"),r=e("./lazyView"),o=r,s=e("./cellRender"),a=e("../routing"),l=e("../models/record"),c=60;t.exports=o.extend({className:"lazy-record-list",initialize:function(){o.prototype.initialize.apply(this,arguments),this.sheetViewModel=this.options.sheetViewModel,this.renderedRows=[],this.updateHeight(),this.listenTo(this.recordList,"all",function(){this.resetList()})},resetList:function(){n._getUnderscore(this.renderedRows).each(function(e){$(e).remove()}),this.renderedRows=[],this.updateHeight(),this.resetRender()},updateHeight:function(){var e=this.rowCount*c;this.setHeight(e||c)},isReadOnlyMode:function(){return this.recordList.sheet.isReadOnlyMode()},renderVerticalRange:function(e,t){var n=(this.recordList.records,Math.floor(e/c)),i=Math.ceil(t/c);n=_.clamp(n,0,this.rowCount-1),i=_.clamp(i,0,this.rowCount),_.iterateRange(n,i,this.ensureRow.bind(this))},ensureRow:function(e){this.needsRow(e)&&this.makeRow(e)},makeRecordRowEl:function(e){var t=this.recordList.records.at(e);if(t.isNew()&&!t.isTemporary())return this.makeNewRecordRowEl();var n=this.rowContext(t);n.index=e;var r=i.templates.lazyRow(n);return $(r)},makeNewRecordRowEl:function(){var e=i.templates.lazyNewRecordRow();return $(e)},makeEmptyRowEl:function(){if(this.isReadOnlyMode())return"";var e={entityName:this.sheet.placeHolderName()},t=i.templates.emptyMobileRow(e);return $(t).data("new",!0)},makeRow:function(e){var t;t=e<this.recordCount?this.makeRecordRowEl(e):this.makeEmptyRowEl();var i=n._getUnderscore(this.renderedRows.slice(e+1)).find(function(e){return null!=e});i?t.insertBefore(i):t.appendTo(this.el),t.css("top",e*c),this.renderedRows[e]=t,t.data("new")&&this.addSpinner(this.$newRecordSpinner,this.greyButtonSpinnerOptions)},rowContext:function(e){var t=e.toContext();t.cid=e.cid,t.nameHTML=s.mobileRender(e,e.nameKey(),{leftAlign:!0}),t.isPlaceholder=e.usesPlaceholderName(),t.isMissing=e.isTemporary();var i=this.recordList.fields(),r=n._getUnderscore(i).filter(function(e){return!e.isImage()&&!e.isNameField()});t.previewFields=_.chain([0,1]).map(function(e){return r[e]}).compactNullish().map(function(t){var n=e.getDisplayValue(t.get("key"),t.formatOptions());return{fieldName:t.displayName(),textValue:n,isEmpty:""===n}}).value();var o=n._getUnderscore(i).find(function(e){return e.isImage()});if(o){t.hasImageField=!0;var a=e.getValue(o.get("key"));a.isImage()&&(t.imageUrl=a.getUrl())}return t},getRow:function(e){return this.renderedRows[e]},needsRow:function(e){return!this.renderedRows[e]},getSheet:function(){return dev.book.get("sheets").at(0)},goToPage:function(e){/^\/records\//.test(e)&&a.router.flash({recordIterator:this.recordList.recordIterator()}),i.prototype.goToPage.call(this,e)},onAddRecord:function(){if(!this.isReadOnlyMode()){var e=this,t=l.add();this.captureActions(function(){this.recordList.saveRecordAttributes(t,{},{},{success:function(){e.goToPage("/records/"+t.id)},error:this.errorHandler("create-record")})})}},events:{"click $recordRows":function(e,t){var n=this.recordList.records.at(t.data("index"));if(n){if(n.isTemporary())return e.preventDefault(),void e.stopPropagation();var i=this;this.parent&&(i=this.parent),i.goToPage("/records/"+n.id,this)}else console.log("Tried to navigate to unrendered record?")},"click $emptyRow":"onAddRecord"}}).addProperties("recordList","parent").addGetters({recordCount:"recordList.records.length",rowCount:function(){var e=this.recordCount;return this.isReadOnlyMode()?e:e+1},sheet:"recordList.sheet"}).addComponents({emptyRow:".empty-mobile-row",recordRows:".lazy-row:not(.empty-mobile-row, .new-record-mobile-row)",newRecordSpinner:".new-record-mobile-row .spinner-container"})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../models/record":61,"../routing":76,"./cellRender":133,"./lazyView":191,"./view":236}],191:[function(e,t){"use strict";{var n=e("./view"),i=e("../globalEvents"),r=e("jquery"),o=1e3,s=n;t.exports=s.extend({propertyNames:function(){return["height"]},initialize:function(){this.pickProperties(),this.listenTo(i,"frame",this.renderContent)},events:{touchstart:_.noop},renderContent:function(){var e=this.$el.bounds(),t=-e.top,n=t+window.innerHeight;t-=o,n+=o;var i=Math.abs(this.lastStart-t),r=Math.abs(this.lastEnd-n);null==this.lastStart&&(i=1/0),(i>o/2||r>o/2)&&(this.lastStart=t,this.lastEnd=n,this.renderVerticalRange(t,n))},resetRender:function(){this.lastStart=null,this.lastEnd=null,this.render(),this.renderContent()},render:function(){this.$el.height(this.height)},renderVerticalRange:function(){},setHeight:function(e,t){1===arguments.length&&(t=!0),this.height=e,t&&this.render()}})}r(function(){var e=function t(){i.trigger("frame"),window.requestAnimationFrame(t)};e()})},{"../globalEvents":22,"./view":236,jquery:"jquery"}],192:[function(e,t){"use strict";var n=e("./view"),i=e("./modalView"),r=e("inflection"),o=i.extend({className:"link-name-panel modal hide fade",template:n.templates.linkName,initialize:function(){this.sheetTitle=this.options.sheet.get("title"),this.fieldName=this.options.field.displayName(),this.deferred=Q.defer()},context:function(){return _.chain(this).pick(["sheetTitle","fieldName"]).extend({linkExample:r.singularize(this.sheetTitle)+" #1"}).value()},events:{"click .modal-footer .btn":"onClick"},onClick:function(e){var t=$(e.target).closest(".btn"),n=t.hasClass("add-name");this.hide(),this.deferred.resolve(n)}});o.promptNameColumn=function(e){var t=new o(e);return t.show(),t.deferred.promise},t.exports=o},{"./modalView":203,"./view":236,inflection:672}],193:[function(e,t){"use strict";{var n=e("../trackJs"),i=e("./view"),r=e("./index"),o=e("../models"),s=e("inflection"),a=e("./addLinkHelper"),l=e("../routing"),c=e("./drawLine"),u=e("./drawBox"),d=e("./cssHelper"),h=e("./geometry");e("../models/errorReport")}e("backbone.mousetrap");var f=i,p=f.extend({initialize:function(){this.parent=this.options.parent,this.listenToOnce(l.router,"route",p.end),this.parent.$el.on(this.scrollRenderEventName(),".fast-scroll",this.render.bind(this)),this.setLinkHelpKey("choose-source")},className:"link-modal",events:{mousedown:function(e){e.target===this.el&&p.end()},mouseup:function(e){e.target===this.el&&p.reset()},"mousedown .link-source":function(e){if(e.preventDefault(),this.source)return void p.reset();var t=$(e.target).closest(".link-source"),n=t.data("field"),i={point:{x:e.pageX,y:e.pageY},field:n};this.chooseSource(i),this.updateArrow(e)},"mouseup .link-source":function(e){function t(e,t){return Math.sqrt(e*e+t*t)}if(this.source){var n=5,i=this.source.point,r={x:e.pageX,y:e.pageY};t(i.x-r.x,i.y-r.y)>n&&p.reset()}},"mouseenter .link-source":function(e){var t=$(e.target).closest(".link-source"),n=t.data("field");this.$(".link-source").filter(function(e,t){return $(t).data("field")===n}).addClass("hover"),this.source||this.updateNewSheetText(n)},"mouseleave .link-source":function(){this.$(".link-source").removeClass("hover"),this.source||this.updateNewSheetText()},"mouseenter .link-target":function(e){$(e.target).closest(".link-target").addClass("hover"),this.updateMatchScore(e)},"mouseleave .link-target":function(e){this.$(".link-target").removeClass("hover"),this.updateMatchScore(e)},"mouseenter .link-match-score":"updateMatchScore","mouseleave .link-match-score":"updateMatchScore",mousemove:function(e){_.soak(this,"source.point")&&(e.preventDefault(),this.updateArrow(e))},"mouseover .link-target":function(e){$(".link-mode").is(".choose-target")&&$(e.target).closest(".link-target").addClass("hover")},"mouseout .link-target":function(e){$(".link-mode").is(".choose-target")&&$(e.target).closest(".link-target").removeClass("hover")},"mouseup .link-target":function(e){var t,n=$(e.target).closest(".link-target,.link-match-score").data("id"),i=this.source.field;n?(t=o.Sheet.find(n),a.handleMigration(i,t,this)):a.extractSupersheet(i,this),p.end()},wheel:function(e){e=e.originalEvent;var t=[1,20,window.innerHeight][e.deltaMode],n=t*e.deltaX,i=t*e.deltaY,r=this.parent.onLinkToolWheel(n,i,e.pageX,e.pageY,!!this.source);"targets"===r&&this.render()}},scrollRenderEventName:function(){return this.namespacedEventName("scrollRender")},remove:f.prototype.remove.after(function(){this.parent.$el.off(this.scrollRenderEventName())}),clickSourceToExtract:function(){this.source&&a.extractSupersheet(this.source.field,this)},chooseSource:function(e){this.source=e;var t=e.field;this.$(".link-source").filter(function(e,n){return $(n).data("field")===t}).addClass("link-source-selected"),$(".link-mode").removeClass("choose-source").addClass("choose-target"),this.updateNewSheetText(t),this.setLinkHelpKey("choose-target",!0),this.renderTargets()},renderTargets:function(){if(this.source){var e=this;this.$(".link-target").remove();var t=this.source.field,n=this.parent.$el.bounds();this.parent.$(".sheet-tab").each(function(r,s){s=$(s);var a=(s.offset(),s.bounds());a=h.insetRect(a,0,1),a=h.intersectionRect(a,n);var l=u(a,"link-target",e.$el,{right:0}),c=s.data("id");l.data("id",c),c||l.addClass("new-sheet-link-target");var d=o.Sheet.findIfExists(c);if(d&&d.id&&!d.get("records"))throw console.log("No record collection for sheet with id: ==>{{id}}<==".stencil({id:c})),console.log(s[0].outerHTML.split(">")[0]+">"),new Error("No sheet with records for match score context!");var f=t.matchScoreContextForSheet(d);if(f){var p=$("<div>").addClass("link-match-score").html(i.templates.matchScore(f)).data("scoreContext",f);f.noColor||e.colorScoreBlob(p),p.data("id",c),l.append(p)}})}},anyLinkSourcesVisible:function(){function e(e){_.soak(e,"canLink()")&&(t=!0)}var t=!1;this.parent.$(".fast-record-list").each(function(t,i){i=$(i).view();var o=i.getTableView();o.forEachColumn(function(t){if(t instanceof r.FastRecordListView.ActionColumn)return void n.console.log("got .data header with an ActionColumn, ignoring");var i=_.result(t,"field");return i?void e(i):void n.console.error(t instanceof r.FastRecordListView.FieldColumn?"got FieldColumn with no field! key: "+t.key:"column has no field; not a FieldColumn or ActionColumn, wtf?")})});var i=this.parent.$(".record-detail").view();return i&&(i=i.tableView,i.forEachRow(function(t,n){e(n.field())})),t},render:function(){$("body").addClass("link-mode choose-source").removeClass("choose-target"),this.parent.$(".link-tool").addClass("btn-warning"),this.renderLinkHelp();var e=this.parent.$submodelContent.bounds(),t=function(t,n){if(t&&t.canLink()){n=h.intersectionRect(n,e);var i=u(n,"link-source",this.$el,{top:1,left:1,right:2,bottom:2});return i.data("field",t),i}}.bind(this);if(this.$(".link-source").remove(),this.parent.$(".fast-record-list").each(function(e,i){i=$(i).view();var o=i.getTableView();o.forEachColumn(function(e,i){if(e instanceof r.FastRecordListView.ActionColumn)return void n.console.log("got .data header with an ActionColumn, ignoring");var s=_.result(e,"field");s||n.console.error(e instanceof r.FastRecordListView.FieldColumn?"got FieldColumn with no field! key: "+e.key:"column has no field; not a FieldColumn or ActionColumn, wtf?");var a=t(s,o.columnBounds(i));a&&a.addClass("record-list-link-source")})}),this.source){var i=this.source.field;this.$(".link-source").filter(function(e,t){return $(t).data("field")===i}).addClass("link-source-selected")}var o=this.parent.$(".record-detail").view();o&&(o=o.tableView,o.forEachRow(function(e,n){var i=n.field(),r=t(i,e.bounds());r&&r.addClass("attr-table-link-source")})),this.$arrow||(this.$arrow=$('<canvas class="link-arrow">').appendTo(this.el)),this.renderTargets()},renderLinkHelp:function(){this.$(".link-help").remove(),this.$el.append(this.linkHelp)},updateArrow:function(e){if(this.source&&(e||this.arrowEnd)){var t,n=this.source.point;t=e?{x:e.pageX,y:e.pageY}:this.arrowEnd;var i=3;c(n,t,this.$arrow,"hsl(45, 100%, 50%)",i),this.arrowEnd=t}},colorScoreBlob:function(e){var t=e.data("scoreContext").score;t/=100;var n,i,r=[1,0,0],o=[1,1,1],s=[0,1,0];t>.5?(n=(t-.5)/.5,i=[o,s]):(n=t/.5,i=[r,o]);var a=_.zip.apply(_,i).map(function(e){var t=e[0],i=e[1];return t*(1-n)+i*n});e.css("color",d.arrayToCSSColor(a))},keyboardEvents:{escape:function(){p.end()}},makeLinkHelp:function(e){return i.templates.linkToolHelp(e)},setLinkHelpKey:function(e,t){var n=this.nsString(e);this.linkHelp=this.makeLinkHelp({message:n}),t&&this.renderLinkHelp()},scoreBlobForEvent:function(e){var t=$(e.target).closest(".link-match-score");return t.length?t:t=$(e.target).find(".link-match-score")},updateMatchScore:function(e){var t=this.scoreBlobForEvent(e),n=t.data("scoreContext"),r=$(document.elementFromPoint(e.pageX,e.pageY)).closest(".link-match-score,.link-target"),o=r.length&&r.data("id")===t.data("id");n&&n.isNew&&(o=!1),t.html(o?i.templates.matchScoreHover(n):i.templates.matchScore(n))},updateNewSheetText:function(e){var t=this.nsString("new-sheet");if(e&&e.get("name")){var n=e.displayName();t=s.pluralize(n)}this.newSheetTabName=t,this.parent.onLinkViewChangedNewText(this,t)}});p.linkView=null,p.start=function(e,t){r.StatusBarView.hide();var n=p.linkView=new p({parent:e});return n.$el.appendTo("body"),n.anyLinkSourcesVisible()?(n.render(),n.displayTip(),e.onLinkViewStart(n),void(t?n.chooseSource(t):n.updateNewSheetText())):(p.end(),void r.StatusBarView.show({text:n.nsString("no-linkable-field")}))},p.end=function(){var e=p.linkView,t=e.parent;$("body").removeClass("link-mode choose-source choose-target"),t.$(".link-tool").removeClass("btn-warning"),t.onLinkViewEnd(e),e.remove(),e.displayTip()},p.reset=function(){var e=p.linkView.parent;p.end(),p.start(e)},dev.add("linkView",function(){return p.displayedView()}),t.exports=p},{"../models":47,"../models/errorReport":40,"../routing":76,"../trackJs":78,"./addLinkHelper":120,"./cssHelper":143,"./drawBox":149,"./drawLine":150,"./geometry":183,"./index":188,"./view":236,"backbone.mousetrap":"backbone.mousetrap",inflection:672}],194:[function(e,t){"use strict";var n=(e("./view"),e("./pluginView")),i=e("../csrf"),r=e("../routing"),o=n.prototype,s=(t.exports=n.extend({className:"mailchimp-plugin plugin-detail",slug:"mailchimp",onOauthSuccess:function(){var e=this;this.incrementDeferredAction(),Q($.post("/plugins/mailchimp/import",{_csrf:i.token})).then(function(e){r.router.goToBook(e.bookId)}).fin(function(){e.decrementDeferredActions()}).done()},startOauthFlow:function(e){return s&&(e=_.defaults({},e,{force:!0})),o.startOauthFlow.call(this,e)}}),!0);dev.forceNewMailchimpToken=function(e){s=e}},{"../csrf":6,"../routing":76,"./pluginView":211,"./view":236}],195:[function(e,t){(function(n){"use strict";var i=e("../models"),r=e("../routing"),o=e("./view"),s=e("./bookListView"),a=e("./csvImportView"),l=e("./eventbritePluginView"),c=e("./mailchimpPluginView"),u=e("./planView"),d=e("./importListView"),h=e("./tutorialsView"),f=e("./templateListView"),p=e("./templateView"),m=e("./homeView"),g=e("./organizationView"),v=e("../models/account"),b=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/emailConfirmView"),y=300,w=o.extend({className:"main-nav",initialize:function(){this.$el.html(o.templates.mainNav(this.context())),this.listenTo(r.router,"route",this.updateCurrentNavLink),this.updateCurrentNavLink()},gatherTitleBarInfo:function(e){this.mainView&&this.mainView.gatherTitleBarInfo(e)},remove:function(){return this.mainView&&this.mainView.remove(),o.prototype.remove.apply(this,arguments)},context:function x(){var x={};return x.organization=n._getUnderscore(v).soak("currentUser().@organization.toContext()"),x},events:{"click .create-book":"createBook","click .sign-out":function(e){e.preventDefault(),this.$(".hidden-logout-form").submit()}},updateCurrentNavLink:function(){var e=this.$(".nav-link");e.removeClass("current");var t=window.location.pathname;e.each(function(e,n){var i=$(n).attr("href");i&&0===t.indexOf(i)&&$(n).addClass("current")}),"/"===t&&$(".home-link").addClass("current")},directionForTransition:function(e,t){if(e&&t&&e.mainClass!==t.mainClass){if("organization"===e.mainClass)return"bottom";if("organization"===t.mainClass)return"top";var i=n._getUnderscore(["book-list","import-list","template-list","tutorials"]).invert(),r=i[e.mainClass],o=i[t.mainClass];return null==r?"top":null==o?"bottom":o>r?"right":"left"}},showView:function(e){var t=this,n=!1,i=this.mainView,r=this.directionForTransition(i,e);if(null==r)i&&i.remove(),this.content.append(e.$el);else{n=!0;var o,s;o=this.content.width(),s=this.content.height();var a={transform:"translate(0,0)"},l={old:{origin:a},"new":{destination:a}},c=function(e,t){return e*=o,t*=s,{transform:"translate({{x}}px, {{y}}px)".stencil({x:e,y:t})}},u=c(-1,0),d=c(1,0),h=c(0,1),f=c(0,-1);"left"===r?(l.old.destination=d,l.new.origin=u):"right"===r?(l.old.destination=u,l.new.origin=d):"top"===r?(l.old.destination=h,l.new.origin=f):"bottom"===r&&(l.old.destination=f,l.new.origin=h);var p=this.content.addClass("old-nav-content");p.css(l.old.origin),p.height(),this.incrementDeferredAction(),p.transition(l.old.destination,y,function(){i.remove(),p.remove(),t.decrementDeferredActions()});var m=$("<div>").addClass("nav-content").appendTo(this.el);m.append(e.$el),m.css(l.new.origin),this.incrementDeferredAction(),m.transition(l.new.destination,y,function(){t.decrementDeferredActions()})}this.mainView=e},showHome:function(){this.showView(new m)},showOrganizationRelatedView:function(e){var t=this;b.qShowIfNeeded({descriptionKey:"organization"}).then(function(){t.showView(new e)},function(e){if(null==e)return r.router.goToBookList();throw e}).finally(function(){r.router.trigger("deferredRoute")}).done()},showOrganization:function(){this.showOrganizationRelatedView(g)},showPlan:function(){this.showOrganizationRelatedView(u)},showBookList:function(){this.showView(new s({model:i.Book.collection}))},showTutorials:function(){this.showView(new h)},showTemplateList:function(){this.showView(new f)},showTemplate:function(e){var t=i.Template.find(e);this.showView(new p({model:t}))},showImportList:function(){this.showView(new d)},importViews:{csv:a,eventbrite:l,mailchimp:c},showImport:function(e){var t=this.importViews[e];this.showView(new t)},createBook:function(e,t){t.blur(),this.addSpinner(t,_.extend(this.greyButtonSpinnerOptions,{color:"white"}));var n=this;i.Book.collection.create({},{wait:!0,success:function(e){n.stopSpinning(t),n.goToNewBook(e)},error:n.errorHandler({action:"create-book",spinner:t})})},goToNewBook:function(e){mixpanel.track("new_book",{id:e.id}),r.router.flash({editSheetTitle:!e.has("template")}).goToBook(e.id)}});w.addGetters({content:function(){return this.$(".nav-content:not(.old-nav-content)")}}),t.exports=w}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../models":47,"../models/account":27,"../routing":76,"./bookListView":127,"./csvImportView":145,"./eventbritePluginView":159,"./homeView":186,"./importListView":187,"./mailchimpPluginView":194,"./organizationView":207,"./planView":210,"./templateListView":226,"./templateView":227,"./tutorialsView":234,"./view":236,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/emailConfirmView":154}],196:[function(e,t){"use strict";var n=(e("../../common/strings"),e("../models"),e("./view")),i=e("./modalView"),r=i.extend({className:"manage-api-modal modal hide fade",template:n.templates.manageApi,initialize:function(){this.listenTo(this.model,"apiKeys:add apiKeys:change apiKeys:remove apiKeys:reset change:publicApiAccess",this.render),this.render()},addKey:function(e){this.$(".new-key").html(n.partials.newApiKey(e.toContext()))},context:function(){var e=Fieldbook.env.apiDisplayDomain||"https://api.fieldbook.com";return{keys:this.model.get("apiKeys").invoke("toContext"),apiUrl:e+"/v1/"+this.model.id,publicApiAccess:this.model.get("publicApiAccess")}},events:{"click .generate-key":function(e){e.preventDefault(),this.captureActions(function(){var e=this;this.model.get("apiKeys").create({},{success:function(t){e.addKey(t)},error:this.errorHandler("generate-api-key")})})},"click .public-api-toggle":function(e){e.preventDefault(),this.captureActions(function(){var e=!this.model.get("publicApiAccess");this.model.saveIfNeeded("publicApiAccess",e,{error:this.errorHandler({action:"public-api-access"})})})},"click .remove-key":function(e){var t=$(e.target).closest(".api-key"),n=t.data("apiKeyId"),i=this.model.get("apiKeys").get(n);this.captureActions(function(){i.destroy({error:this.errorHandler("delete-api-key")})})},"focus .api-url-input":function(e,t){t[0].select()},"mouseup .api-url-input":function(e){e.preventDefault()}}});t.exports=r},{"../../common/strings":249,"../models":47,"./modalView":203,"./view":236}],197:[function(e,t){"use strict";var n=e("./view"),i=e("../keys"),r=e("../parser"),o=e("../models/powerbar/query"),s=e("../../common/strings"),a=e("../models/powerbar/commands"),l=r.cursorToken,c=10,u=48,d=n.extend({tagName:"ul",className:"autocomplete",initialize:function(){_.extend(this,_.pick(this.options,"input","source","inputSelectorClass","sheet"));var e=this;this.menuStack=[];var t={};_(["update","hide","onKeyDown","onChitBlur"]).each(function(n){t[n]=_.bind(e[n],e)}),this.input.on("input focus",t.update),this.input.on("blur nonedit-select",t.hide),this.input.on("keydown",t.onKeyDown),this.input.on("blur",".chit",t.onChitBlur),this.cleanUpEvents=function(){_.chain(t).values().each(function(t){e.input.off("",t)})}},onChitBlur:function(){this.menuStack=[]},remove:function(){this.cleanUpEvents(),n.prototype.remove.apply(this,arguments)},doneAction:function(e){var t=e.data("context"),n=e.data("editingChit");n.val(t.queryText),this.input.view().blur()},selectedCompletionItem:function(e,t){var n=e.data("query");if(!n)return t.stopPropagation(),void(e.hasClass("completion-back")?this.popMenu(e,t):e.hasClass("completion-done")&&this.doneAction(e));this.pushMenu(e);var i=e.data("editingChit"),r=this.getCompletionText(e);this.setChitText(i,r),i.$el.focus(),this.currentCompletionContext=this.getNextContext(n),this.isTerminalCompletion(n)?this.input.view().onTab(t):(this.input.trigger("input"),this.update(t))},events:{"mouseup li":function(e){e.preventDefault();var t=$(e.target).closest("li");this.selectedCompletionItem(t,e)},"mousedown li":function(e){e.preventDefault()},"mouseenter li":function(e){var t=$(e.target).closest("li");this.$(".active").removeClass("active"),t.hasClass("no-select")||t.addClass("active")},"mouseleave li":function(e){$(e.target).closest("li").removeClass("active")}},getNextContext:function(e){var t=e.getCompletionContext();return t&&t.useForNextCompletions?t:null},show:function(){this.input.view().editingChit()&&(this.clearShowHideDelays(),this.willHide=!1,this.$el.show(),this.input.trigger("autocomplete:change"),this.updatePosition())},clearShowHideDelays:function(){_.each(this.showHideDelays||[],function(e){clearTimeout(e)})},addShowHideDelay:function(e,t){this.showHideDelays=this.showHideDelays||[],this.showHideDelays.push(_.delay(e,t))},updatePosition:function(){var e=this.input.view().editingChit();if(!e)return void this.addShowHideDelay(function(){this.updatePosition()}.bind(this),50);var t=e.$el.position();t.top=this.$el.parent().find(".search-flex").bounds(!0).bottom+5,t.left-=u,this.$el.css(t)},hide:function(){var e=this;this.willHide=!0,this.clearShowHideDelays(),this.addShowHideDelay(function(){e.willHide&&e.$el.hide(),e.currentCompletionContext=null,e.menuStack=[],e.willHide=!1,e.$el.html(""),e.input.trigger("autocomplete:change")},200)},update:function(e,t){if(!_.contains([i.DOWN,i.UP],e.keyCode)&&!_.contains([i.DOWN,i.UP],_.soak(t,"keyCode"))){var n=this,r=this.input.view().editingChit();if(!r)return void this.hide();var o="",a=-1;if(r&&(o=r.textWithCursorToken(),a=$(".chit:not(:empty), .chit:focus").index(r.el)),this.currentCompletionContext){r?r.val():""}return this.lastTextQuery=o,Q.Promise(function(e){var t=n.source(o,e,n.currentCompletionContext);null!=t&&e(t)}).then(function(e){var t=r?r.val():"";if(e=_.filter(e,function(e){if(!e)return!1;var n={},i=e.getCompletionContext();return i&&i.useForNextCompletions&&(n.includeCompletionContexts=!0),t.trim()!==e.stringify(n)}),e=_.uniqString(e,function(e){return e.stringify({includeCompletionContexts:!0})}),e.length>c){var i=e.length-c;e=_.first(e,c),e.push({iconName:"search",text:s["extra-completions"]({amountOver:i}),completion:!0,"class":"no-select completion-text"})}var o=!1;if((e.length>0||!_.isEmpty(n.menuStack))&&n.queryIsValid(r)&&(o=!0,e.push({iconName:"ok",text:s["completion-done"](),itemClass:"completion-done",queryText:r.val()})),_.isEmpty(n.menuStack)||(o=!0,e.push({iconName:"chevron-left",text:s["completion-back"](),itemClass:"completion-back",queryText:_.last(n.menuStack).text})),!e.length)return void n.hide();var a=_.map(e,function(e){var t=$("<li>");return t.data("editingChit",r),t.data("originalText",n.lastTextQuery),n.renderCompletion(e,t),t});n.show(),n.$el.safeToggleClass("has-state-action",o),n.$el.empty().append(a),n.input.trigger("autocomplete:change")}).fail(function(e){if(!e.displayable)throw e;console.error(e)}).done()}},queryIsValid:function(e){var t;try{t=new o(e.val(),null,this.sheet),t.validate(this.sheet,{forbiddenFields:[]})}catch(n){return!1}return 0===t.commands.length?!1:_.all(_.pluck(t.commands,"isValid"))?!0:!1},renderCompletion:function(e,t){var i;e instanceof o?(i=e.contextify().commands[0],t.data("query",e)):i=e,t.data("context",i),_.soak(e,"getCompletionContext().is","report-summary-functions")&&(i.iconName="report",i.color="orange"),i.itemClass&&t.addClass(i.itemClass),t.html(n.partials.completionItem(i))},getCompletionText:function(e){var t,n=e.data("query"),i=e.data("editingChit");if(!n)return t=e.data("context"),null!=t.queryText?t.queryText:null;var r=n.stringify({positionCursor:!0});t=n.getCompletionContext();var o=i.val();return o!==r&&" "!==_.last(r)&&-1===r.indexOf(l)&&(r+=" "),r},pushMenu:function(e){var t=(e.data("editingChit"),e.data("originalText"));this.menuStack.push({text:t,context:this.currentCompletionContext})},popMenu:function(e,t){var n=e.data("editingChit"),i=this.menuStack.pop();i&&(this.setChitText(n,i.text),this.currentCompletionContext=i.context,this.update(t))},setChitText:function(e,t){var n=t.length,i=t.indexOf(l);if(-1!==i)n=i,t=t.replace(/‸/g,"");else{var r=this.lastTextQuery.indexOf(l);if(-1!==r){var o=this.lastTextQuery.substr(r+1);if(o.length>0){var s=t.lastIndexOf(o);-1!==s&&(n=s)}}}e.val(t),e.deformat(),e.setCursorPosition(n)},onKeyDown:function(e){if(this.$el.is(":visible")){var t=this.$("li.active");if(e.keyCode===i.DOWN||e.keyCode===i.UP){this.$("li").length>1&&e.preventDefault(),this.$("li").removeClass("active");var n;if(e.keyCode===i.DOWN){for(n=t.next();n.hasClass("no-select");)n=n.next();0===n.length&&(n=this.$("li").first())}else if(e.keyCode===i.UP)for(n=t.prev(),0===n.length&&(n=this.$("li").last());n.hasClass("no-select");)n=n.prev();var r=this.getCompletionText(n);null!=r?this.setChitText(this.input.view().editingChit(),r):e.preventDefault(),t.removeClass("active"),n.addClass("active")}else if(e.keyCode===i.RETURN||e.keyCode===i.TAB){var o=this.$("li.active");o.hasClass("completion-back")?(e.preventDefault(),e.stopPropagation(),this.popMenu(o,e)):o.hasClass("completion-done")?(e.preventDefault(),e.stopPropagation(),this.doneAction(o)):o.length?this.selectedCompletionItem(o,e):e.keyCode===i.RETURN&&this.input.view().blur()}}},isTerminalCompletion:function(e){var t=e.firstCommand();if(t.isDefaultFilter()||t instanceof a.DefaultSearch){if(1!==t.expressions.length)return!1;if(t.getCompletionContext())return!1;if(e.isValid())return!0}return!1}});t.exports=d},{"../../common/strings":249,"../keys":25,"../models/powerbar/commands":55,"../models/powerbar/query":58,"../parser":74,"./view":236}],198:[function(e,t){"use strict";{var n=e("./view"),i=n;t.exports=i.extend({className:"mobile-book-nav",initialize:function(){this.pickProperties()},render:function(){var e=this.model.toContext();this.$el.html(n.templates.mobileBookNav(e)),this.bookView.markCurrentNavActive()},hide:function(){this.bookView.toggleMobileNav(!1)},clearActive:function(){this.$(".active").removeClass("active")},events:{"click .nav-smoke":function(){this.hide()},"click .sheet-tabs a":function(){this.hide()},"click .sheet-tab-item":function(e,t){t.is(e.target)&&t.find("a.sheet-link, a.nav-item-link").click()}}}).addProperties("bookView").addGetters({model:function(){return this.bookView.model}})}},{"./view":236}],199:[function(e,t){(function(n){"use strict";var i=e("./mobileView"),r=e("./view"),o=e("./cellRender"),s=e("../viewModels"),a=e("./lazyRecordListView"),l=e("./cellEditView"),c=e("../routing"),u=e("../models"),d=t.exports=i.extend({className:"mobile-record-view",isRecordView:!0,initialize:function(){var e=this.model.sheet(),t=e.nameField().get("key");this.listenTo(this.model,"change",this.renderMainDeferred),this.listenTo(this.model,"change:"+t,this.renderTitleDeferred),this.listenTo(e,"subsheets:change subsheets:add subsheets:remove",this.renderMainDeferred),this.listenTo(e,"fields:add fields:change fields:remove",this.renderMainDeferred),this.initIterator()},isReadOnlyMode:function(){return this.sheet.isReadOnlyMode()},getSheet:function(){return this.model.sheet()},titleContext:function(){var e=this.model.name();return!e&&this.model.isTemporary()&&(e="<New record>"),{title:e}},initIterator:function(){if(!this.iterator){{var e;c.param("nav")}if(c.param("nav")){var t=this.model.sheet().queryForNavKey(c.param("nav"));e=t.executePipeline().recordIterator()}else if(c.param("subsheet")){var n=c.param("subsheet"),i=c.param("source"),r=u.Record.find(i);if(!r)return;e=new s.RecordIterator({records:r.childrenFor(n).models})}else e=new s.RecordIterator({records:this.model.sheet().get("records").models});this.setIterator(e)}},setIterator:function(e){this.iterator=e,this.iterator.setCurrent(this.model),this.renderTitle()},onFlash:function(e){var t=e.recordIterator;t&&t.contains(this.model)&&this.setIterator(t)},renderTitle:i.prototype.renderTitle.after(function(){this.$title&&this.iterator&&this.$title.append(r.partials.mobileIterator(this.iterator.toContext()))}),renderMain:function(){var e=this.orderedFields(),t=_.map(e,this.cellContext.bind(this)),n={cells:t};this._subsheetViews=[],this.$main.html(r.templates.mobileRecordDetail(n)),this.renderSubsheets()},renderSubsheets:function(){var e=this,t=this.subsheetViews();this.$subsheets.find(".subsheet-title").remove(),this.$subsheets.find(".lazy-record-list").detach(),n._getUnderscore(t).each(function(t){var n=t.recordList.title;e.$subsheets.append('<div class="subsheet-title">'+n+"</div>"),e.$subsheets.append(t.el),t.render()})},subsheetViews:function(){var e=this,t=_.soak(this,"model.sheet().get","subsheets")||[],i=_.indexBy(this._subsheetViews||[],function(e){return e.recordList.subsheet.cid}),r=n._getUnderscore(t).map(function(t){if(t.cid in i)return i[t.cid];var n=new s.SubsheetRecordList({subsheet:t,record:e.model});return new a({recordList:n,parent:e})});return _.chain(i).values().difference(r).each(function(t){e.stopListening(t),t.remove()}),this._subsheetViews=r,r},cellContext:function(e){var t=e.get("key"),n=this.model.getValue(t),i=o.headerHtml(e),r=o.mobileRender(this.model,e.get("key"),{leftAlign:!0});return{fieldKey:t,fieldHtml:i,valueHtml:r,isError:n.isError(),errorMessage:n.isError()?n.getMessage():""}},orderedFields:function(){var e=this.model.sheet(),t=e.getUnhiddenFields(),i=e.nameField();return t=n._getUnderscore(t).without(i),t.unshift(i),t},editFieldWithKey:function(e){if(!this.editor){var t=this.model.fieldWithKey(e),n=new l({recordView:this,field:t});n.begin()}},events:{"click a.missing-link":function(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},"click .ref-link":function(e,t){e.preventDefault(),e.stopPropagation();var n=t.attr("href"),i=t.closest(".record-cell"),r=i.data("fieldKey"),o=this.model.sheet().fieldWithKey(r).getJoinSubsheet();o&&(n=this.forceUrlParams(n,{subsheet:o.id,source:this.model.id})),this.goToPage(n)
},"click a.iterator-link":function(e,t){e.preventDefault(),e.stopPropagation(),this.iterator&&c.router.flash({recordIterator:this.iterator});var n={},i=c.params();n.nav?i.nav=n.nav:n.subsheet&&(i.subsheet=n.subsheet,i.source=n.source);var r=this.forceUrlParams(t.attr("href"),i);this.goToPage(r)},"click .record-cell":function(e,t){if(!$(e.target).is("a")&&!this.model.isReadOnlyMode()){var n=t.data("field-key");this.editFieldWithKey(n)}},"click .image-value img":function(e,t){e.stopPropagation(),$("body").prepend('<div class="full-image-container">');var n=$(".full-image-container");n.html(r.partials.fullImage({src:t.attr("src")})),$('meta[name="viewport"]').attr("content",""),n.on("touchstart",function(e){n.data("clickData",{x:e.originalEvent.changedTouches[0].screenX,y:e.originalEvent.changedTouches[0].screenY,time:Date.now()})}),n.on("touchend",function(e){var t=n.data("clickData");if(t){var i=e.originalEvent.changedTouches[0],r=Date.now();t.x!==i.screenX||t.y!==i.screenY||r-t.time>200||($('meta[name="viewport"]').attr("content","width=device-width, initial-scale=1, maximum-scale=1"),n.remove())}})}},goToPage:function(e,t){/records/.test(e)&&t instanceof a&&(e=this.forceUrlParams(e,{subsheet:t.recordList.subsheet.id,source:this.model.id})),i.prototype.goToPage.call(this,e)}}).addGetters({book:"model.sheet().book()",$subsheets:["$",".subsheets"],model:"viewModel.record"}).addProperties("viewModel");dev.add("mobileRecordView",function(){return d.displayedView()}),dev.add("mobileRecord",function(){return dev.mobileRecordView.model})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../models":47,"../routing":76,"../viewModels":99,"./cellEditView":132,"./cellRender":133,"./lazyRecordListView":190,"./mobileView":201,"./view":236}],200:[function(e,t){(function(n){"use strict";var i=e("./view"),r=e("./mobileView"),o=e("./lazyRecordListView"),s=(e("./titleBarView"),e("../routing")),a=e("url"),l=e("backbone"),c=e("handlebars-runtime"),u=r,d=t.exports=u.extend({className:"mobile-sheet",propertyNames:["viewModel"],initialize:function(){this.pickProperties(),this.listenTo(this.viewModel,"load",this.renderDeferred),this.listenTo(this.viewModel,"queryResultsChanged",this.renderRecordListsDeferred),this.listenTo(this.sheet,"change",this.renderDeferred),this.listenTo(this.sheet,"records:change records:remove records:add records:sort",this.renderRecordListsDeferred),this.listenTo(this.sheet,"fields:change fields:remove fields:add fields:sync",this.renderRecordListsDeferred),this.listenTo(this.book,"sheets:change sheets:sort sheets:add sheets:remove",this.renderDeferred),this.listenTo(this.book,"sheets:navItems:change sheets:navItems:sort sheets:navItems:add sheets:navItems:remove",this.renderTitleDeferred)},getSheet:function(){return this.viewModel.sheet},render:function(){var e=this;this.hasScrollListener||this.onNextTick(function(){this.hasScrollListener=!0,this.scrollParent.on("scroll."+this.cid,function(){e.updateScrollURLDeferred()}),this.scrollFromUrl()}),u.prototype.render.apply(this,arguments)},renderMain:function(){this.$main.html(i.templates.mobileSheet(this.context())),this.renderRecordLists()},renderSavedSearchQuery:function(){this.renderRecordLists()},renderRecordLists:function(){var e=this;if(!this.viewModel.needsFetch()){var t=this.recordLists;return n._getUnderscore(this).soak("recordListViews._.invoke","remove"),this.listContainer.empty(),"form"===this.navType?this.renderFormMessage():n._getUnderscore(this.recordLists).any({type:"report"})?this.renderReportMessage():void(this.recordListViews=t.map(function(t){if("group"===t.type){var n=t.fixedFields(),r=t.titles().map(function(e,t){return{groupField:n[t].displayName(),groupValue:e}});e.listContainer.append(i.templates.mobileGroupTitles({titles:r}))}var s=new o({recordList:t,parent:e,sheetViewModel:e.viewModel});return e.listContainer.append(s.el),s.renderContent(),s}))}},renderReportMessage:function(){this.listContainer.append(i.templates.mobileReportMessage())},renderFormMessage:function(){this.listContainer.append(i.templates.mobileFormMessage())},remove:u.prototype.remove.before(function(){this.scrollParent.off("."+this.cid),n._getUnderscore(this).soak("recordListViews._.invoke","remove")}),context:function(){return this.viewModel.toContext()},titleContext:function(){return{title:this.viewModel.title()}},goToPage:function(e){/^\/records\//.test(e)&&s.router.flash({recordIterator:this.viewModel.recordIterator()});var t=a.parse(e,!0),n=t.query||{};this.viewModel.navKey&&(n.nav=this.viewModel.navKey),t.query=n;var r=a.format(t);i.prototype.goToPage.call(this,r)},scrollFromUrl:function(){var e=l.history.getHash();this.scrollParent.prop("scrollTop",e)},updateScrollURL:function(){var e,t=this.scrollParent.prop("scrollTop"),i=l.history.getFragment();e=t?"#"+t:"/"+i,n.history.replaceState(null,null,e),this.updateUrlMap()},updateUrlMap:function(){var e=l.history.getFragment(),t=l.history.getHash();if(d.urlMap[window.location.pathname]="/"+n._getUnderscore([e,t]).compact().join("#"),/books/.test(e)){var i="/sheets/"+this.viewModel.sheet.id,r=n._getUnderscore([r,t]).compact().join("#");d.urlMap[i]=r}},renderTitle:u.prototype.renderTitle.after(function(){if(!this.viewModel.isReadOnlyMode()){var e=$("<a></a>").addClass("add-record").appendTo(this.$title);e.attr("title","Add record"),e.attr("href",this.sheet.url()+"/records/new")}})});d.urlMap={},d.mapUrl=function(e){return e===window.location.pathname?e:d.urlMap[e]||e},isMobile&&c.registerHelper("sheetUrl",function(e){return d.mapUrl(e)}),d.addGetters({listContainer:function(){return this.$(".record-list-container")},recordLists:function(){return this.viewModel.recordLists()},sheet:function(){return this.viewModel.sheet},book:function(){return this.sheet.book()},scrollParent:function(){return this.listContainer},navType:"viewModel.navItem().@type"}),d.deferrableRendering(),d.deferrable("updateScrollURL"),dev.add("mobileSheetView",function(){return d.displayedView()}),dev.add("mobileSheetViewModel",function(){return dev.mobileSheetView.viewModel}),dev.add("mobileSheet",function(){return dev.mobileSheetView.sheet})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../routing":76,"./lazyRecordListView":190,"./mobileView":201,"./titleBarView":231,"./view":236,backbone:"backbone","handlebars-runtime":"handlebars-runtime",url:744}],201:[function(e,t){"use strict";var n=e("./view"),i=n,r=t.exports=i.extend({className:"mobile-container",render:function(){this.$el.html(n.templates.mobileContainer()),this.$title=this.$(".title-bar"),this.$main=this.$(".mobile-main"),this.renderTitle(),this.renderMain()},renderMain:_.noop,renderTitle:function(){if(this.$title){var e=_.defaults(this.titleContext(),{title:"no title"});this.$title.html(n.templates.mobileTitleBar(e))}},setElement:function(e){return $(e).addClass("mobile-container"),i.prototype.setElement.apply(this,arguments)}});r.deferrableRendering()},{"./view":236}],202:[function(e,t){(function(n){"use strict";{var i=e("./modalView"),r=e("./view"),o=i;t.exports=o.extend({className:"modal-tab-view "+o.prototype.className,template:r.templates.modalTabView,activeTabIndex:0,intialize:function(){if(n._getUnderscore(this).soak("tabs.length"))throw new Error("Must provide at least one tab to modal tab view")}.before(o.prototype.initialize),render:o.prototype.render.after("renderContent"),renderContent:function(){var e=this;1===this.views.length&&this.$tabContainer.hide(),n._getUnderscore(this.views).each(function(t){t.tabParent=e,e.$container.append(t.el),t.render()}),this.activateTabAtIndex(0)},activateTabAtIndex:function(e){this.activeTabIndex=e,this.updateDisplayedTab(),this.activeView.trigger("modal-tab-activate")},updateDisplayedTab:function(){n._getUnderscore(this.views).pluckSoak("$el.hide()"),this.views[this.activeTabIndex].$el.show(),this.$tabs.removeClass("active"),this.$activeTab.addClass("active")},context:function s(){var s=n._getUnderscore(this).pick("title","labels","titleIcon");return s},events:{"click $tabs":function(e,t){var n=this.$tabs.index(t);this.activateTabAtIndex(n)},"click $closeButton":function(){this.hide()},shown:function(){n._getUnderscore(this).soakCall("activeView.trigger","modal-tab-activate")}}}).addGetters({labels:function(){return n._getUnderscore(this.tabs).pluck("label")},views:function(){return n._getUnderscore(this.tabs).pluck("view")},activeView:function(){return this.views[this.activeTabIndex]},$activeTab:function(){return this.$tabs.eq(this.activeTabIndex)}}).addComponents({tabs:".modal-tab",tabContainer:".modal-tabs",container:".tab-subview-container",closeButton:".done"}).addProperties("tabs","title","titleIcon","modalOptions")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./modalView":203,"./view":236}],203:[function(e,t){"use strict";var n=e("./view"),i=n.extend({className:"modal hide fade",template:null,initialize:function(){var e=this;this.template=this.template||this.options.template,this.$el.on("show",function(){e.incrementDeferredAction()}),this.$el.on("shown",function(){e.decrementDeferredActions()}),_.isString(this.template)&&(this.template=n.templates[this.template]),this.deferred=Q.defer(),this.render()},context:function(){return this.options},render:function(){var e=this;this.$el.html(this.template(this.context()));var t={show:!1,keyboard:!0};this.modalOptions&&_.extend(t,this.modalOptions),this.$el.modal(t),this.$el.on("hidden",this.onHidden.bind(this)),this.$el.on("shown",function(){e.isShown=!0,e.onShown(),Tips.display()}),this.$el.on("hide",this.onHide.bind(this))},onShown:_.noop,onHide:function(){this.isShown=!1,this.deferred&&(this.deferred.reject(),delete this.deferred)},onHidden:function(){this.isShown=!1,this.remove()},show:function(){return this.$el.modal("show"),this.deferred?this.deferred.promise:void 0},hide:function(){this.$el.modal("hide")},accept:function(e){this.deferred&&(this.deferred.resolve(e),delete this.deferred),this.hide()},events:{"click .modal-answer":function(e,t){var n=t.dataAttr("answer");this.accept(null==n?t:n)},"click .modal-cancel":function(){this.hide()}}});i.extendClassName=function(e){return e+" "+i.prototype.className},i.qShow=function(e){var t=new this(e);return t.show()},t.exports=i},{"./view":236}],204:[function(e,t){"use strict";var n=e("./modalView"),i=e("../viewModels/nameConfig"),r=e("./drawBox"),o=e("../../common/strings"),s=e("./view"),a=e("./geometry"),l=n.extend({className:n.extendClassName("name-config"),template:"nameConfig",initialize:function(){this.recordListView=this.options.recordListView,this.model=new i({sheet:this.sheet}),this.listenTo(this.model,"update",function(){this.renderControls(),this.renderBoxesDeferred(),this.trigger("update")});var e=this.recordListView.scrollView;e&&e.on("scrollRender",this.renderBoxes,this),this.super("initialize")},context:function(){var e=function(e){return this.model.mode===e?{active:"active"}:{}}.bind(this);return{sheetTitle:this.sheet.displayTitle(),single:_.extend(e("single")),multi:e("multi"),numeric:e("numeric"),separator:o["default-name-separator"]()}},events:{"click .mode-buttons .btn":function(e){var t=$(e.target).closest(".btn");t.closest(".mode-buttons").find(".active").removeClass("active"),t.addClass("active");var n=t.data("target").slice(".name-config-tab-".length);this.model.setMode(n),this.renderControls()},show:function(){this.onNextTick(function(){var e=this,t=$(".modal-backdrop");t.addClass("name-config-backdrop"),t.off("click"),t.on("wheel",function(t){e.onWheel(t)})})},hide:function(){$(".name-config-box").remove(),this.saved||(this.model.reset(),this.sheet.clearStash(),this.sheet.trigger("reset"),this.sheet.get("fields").trigger("reset"),this.sheet.initializeNameCache())},"click .name-config-box":function(e){var t=$(e.target).closest(".name-config-box"),n=this.model.mode;if("single"===n)this.model.setKey(t.hasClass("highlight")?null:t.data("key"));else if("multi"===n){var i=this.model.formulaKeys,r=t.data("key");i=_.contains(i,r)?_.without(i,r):i.concat([r]),this.model.setFormulaKeys(i)}},"click .save:not(.disabled)":function(){var e=this;this.addSpinner(this.$(".save"),this.greyButtonSpinnerOptions),this.captureActions(function(){this.model.save({success:function(){e.saved=!0,e.accept(e.sheet),e.trigger("done")},error:this.errorHandler("config-name-field")})})},"input .name-config-multi-separator":function(){this.model.setSeparator($(".name-config-multi-separator").val())},wheel:"onWheel"},onWheel:function(e){var t=this.recordListView.scrollView;t&&t.onWheel(e)},render:function(){this.super("render");var e=this.recordListView.$table().bounds(),t=$(".content").bounds();e=a.intersectionRect(e,t),this.$el.css({left:e.centerX}),this.renderControls(),this.renderBoxes()},renderControls:function(){if("single"===this.mode){var e,t=_.chain(this.fields).without(this.sheet.nameField()).invoke("isAnyLink").all().value();e=this.nsString(t?"single-no-option":"single-description"),this.$(".name-config-tab-single").text(e)}var n=null==this.sheet.nameField();this.$(".save").toggleClass("disabled",n),"multi"===this.model.mode&&this.renderMultiFields()},renderBoxes:function(){var e=this;if($(".name-config-box").delayedRemove(),this.recordListView.tableView){var t=this.recordListView.$el.closest(".table-container, .fast-scroll-container");if(t.length){var n=t.bounds(),i=this.model.mode;"numeric"!==i&&(this.lastRenderFields=_(this.fields).pluck("key"),this.fields.forEach(function(t){if(!(t.isAnyLink()&&"single"===i||"multi"===i&&t.isNameField())){var o=e.recordListView.columnBounds(t);if(o&&(o=a.intersectionRect(o,n),!o.isEmpty)){var s=r(o,"name-config-box",e.el,{top:1,left:1,right:2,bottom:2});s.data("key",t.id);var l=!1;"single"===i&&t.isNameField()?l=!0:"multi"===i&&_.contains(e.model.formulaKeys,t.id)&&(l=!0),l&&s.addClass("highlight")}}}))}}},renderMultiFields:function(){var e=this,t=this.$(".name-config-multi-container");t.empty();var n=this.model.formulaKeys.map(function(t){return e.sheet.fieldWithKey(t)});n.forEach(function(e){t.append(s.partials.nameConfigField({name:e.displayName(),key:e.id}))},this),t.sortable({stop:function(){var e=this.$(".name-config-field").toArray(),t=_.chain(e).pluck("dataset").pluck("key").value();this.model.setFormulaKeys(t)}.bind(this),axis:"x",tolerance:"pointer"}).disableSelection(),this.$(".name-config-multi-separator").val(this.model.separator)},remove:function(){var e=this.recordListView.scrollView;return e&&e.off("scrollRender",this.renderBoxes,this),s.prototype.remove.apply(this,arguments)},nsString:function(e){return this.nsString=o.ns("name-config"),this.nsString(e)}});Object.defineProperties(l.prototype,{sheet:{get:function(){return this.recordListView.model.sheet}},fields:{get:function(){return _.chain(this.sheet).soak("get","fields").soak("toArray()").value()||[]}}}),l.deferrableRendering(),t.exports=l},{"../../common/strings":249,"../viewModels/nameConfig":101,"./drawBox":149,"./geometry":183,"./modalView":203,"./view":236}],205:[function(e,t){"use strict";var n=e("./view"),i=(t.exports=n.extend({className:"oauth-window-view hidden",initialize:function(){_.extend(this,this.options),!this.type&&this.repairIntegration&&(this.type=this.repairIntegration.get("type")),this.oauthUrl="/plugins/{{type}}/oauth".stencil(this);var e=[];(this.force||this.repairIntegration)&&e.push("forceNewToken=true"),this.repairIntegration&&(e.push("repairBook="+this.repairIntegration.bookId()),e.push("repairIntegration="+this.repairIntegration.id)),e.length>0&&(this.oauthUrl+="?"+e.join("&")),_.defaults(this,{finishCallback:_.noop})},remove:function(){this.oauthWindow&&(window.onOauthFinished=null,this.oauthWindow&&!this.oauthWindow.closed&&this.oauthWindow.close(),this.oauthWindow=null)},finishOauth:function(e){this.trackMetric("oauth_"+(e?"success":"failure")),this.decrementDeferredActions(),window.onOauthFinished=null,this.oauthWindow=null,this.finishCallback(e)},onOauthSuccess:_.noop,render:function(){var e=this;this.trackMetric("oauth_start"),window.onOauthFinished=function(t){_.delay(function(){e.finishOauth(t)})},dev.lastOuathWindowUrl=this.oauthUrl,i?r=this.oauthUrl:(this.incrementDeferredAction(),this.oauthWindow=window.open(this.oauthUrl,this.type+"-oauth","dialog=yes,height=540,width=750,location=no,status=no"))}}),!1);dev.doNotOpenOauthWindow=function(){i=!0};var r;dev.add("lastOauthWindowUrl",function(){return r})},{"./view":236}],206:[function(e,t){(function(n){"use strict";var i=e("./view"),r=e("../viewModels/help/help"),o=e("../models/account"),s=r.Entry,a=(e("../globalEvents"),i.extend({className:"onboarding-container",initialize:function(){n._getUnderscore(this).extend(_.pick(this.options,"book")),this.isShown=o.account.get("showOnboardingPane")||!1;var e=o.account.get("shownOnboardingTours")||[];this.shownOnboardingTours=n._getUnderscore(e).clone()},createContext:function(){var e=this,t=this.book.getIntegrationType(),n=_.map(s.getIntegrationTours(t),function(t){var n=t.prototype.cid;return{title:t.prototype.onboardingTitle,id:t.id,isActive:e.currentTourId&&t.id===e.currentTourId,isTourShown:_.contains(e.shownOnboardingTours,n)}});return{tours:n}},remove:function(){return this.cancelCurrentTour(),i.prototype.remove.apply(this,arguments)},render:function(){var e=this.createContext();this.$el.html(i.templates.onboardingPane(e)),this.$el.safeToggleClass("onboarding-hidden",!this.isShown)},setPaneState:function(e){this.isShown=e,this.render(),o.account.saveIfNeeded("showOnboardingPane",this.isShown,{error:this.errorHandler("update-user")})},openPane:function(){this.setPaneState(!0)},closePane:function(){this.setPaneState(!1),this.cancelCurrentTour()},cancelCurrentTour:function(){s.cancel(),this.currentTourId=null,this.hideTip(),this.render()},events:{"click .onboarding-pane .close":"closePane","click .onboarding-button i":"openPane","click .onboarding-entry":"onClickEntry"},keyboardEvents:{escape:"closePane"},onClickEntry:function(e){var t=s.get($(e.target).closest(".onboarding-entry").data("entry"));if(t.id===this.currentTourId)return void this.cancelCurrentTour();var i=this,r=s.begin(t);r.once("end",function(){var e=o.account,t=this.cid;_.contains(i.shownOnboardingTours,t)||(i.shownOnboardingTours.push(t),e.saveIfNeeded("shownOnboardingTours",n._getUnderscore(i.shownOnboardingTours).clone(),{error:i.errorHandler("update-user")})),i.currentTourId=null,i.render()}),this.currentTourId=t.id,this.render(),this.displayTip()}}));t.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../globalEvents":22,"../models/account":27,"../viewModels/help/help":93,"./view":236}],207:[function(e,t){(function(n){"use strict";var i=e("./view"),r=e("../models"),o=e("../models/user"),s=e("./clickToSelectView"),a=e("../env"),l=e("../../common/strings"),c=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/emailConfirmView"),u=i,d=t.exports=u.extend({className:"organization",initialize:function(){this.$el.addClass("organization-view"),this.user=r.Account.currentUser(),this.listenTo(this.user,"organization:sync",this.renderDeferred);var e=this;this.stripeHandler=window.StripeCheckout.configure({key:a.stripeApiKey,image:"/img/fieldbook-logo.png",locale:"auto",token:this.createdToken.bind(this)}),$(window).on(this.namespacedEventName("popstate"),function(){e.stripeHandler.close()}),this.render(),this.user.fetchOrganization({success:function(){e.hasFetchedOrg=!0},error:this.errorHandler("fetch-organization")})},gatherTitleBarInfo:function(e){e.setMode("organization")},remove:u.prototype.remove.after(function(){this.stripeHandler.close(),$(window).off(this.namespacedEventName("popstate"))}),createdToken:function(e){var t=this,n=this.user.get("organization");this.hasOrg()||(n=new r.Organization);var i={name:this.orgName(),stripeToken:{email:e.email,tokenId:e.id}},o=this.$(".auto-join");o.length&&this.$(".auto-join")[0].checked&&(i.domain=this.user.emailDomain()),n.saveIfNeeded(i,{success:function(){t.user.set("organization",n),t.render()},error:t.errorHandler("create-organization")})},orgName:function(){var e=n._getUnderscore(this).soak("user.@organization.@name");return e||this.$(".org-name").val().trim()},events:{"click .refresh":function(){this.spinRefreshButton(),this.user.fetchOrganization({error:this.errorHandler("fetch-organization")})},"input .search":function(){this.renderDeferred()},"change .select-access":"onChangeAccess","click .join-organization-button":function(e,t){e.preventDefault(),t.blur();var n=this;c.qShowIfNeeded({descriptionKey:"join"}).then(function(){n.user.saveIfNeeded({organization:{_id:n.user.get("potentialOrganization")._id}},{success:function(){n.user.fetchOrganization({error:n.errorHandler("fetch-organization")}),n.renderDeferred()},error:n.errorHandler("join-organization")})},function(e){if(e)throw e}).done()},"click .upgrade-and-create":function(e,t){t.blur();var n=this;return c.qShowIfNeeded({descriptionKey:"upgrade"}).then(function(){var e=n.orgName();return""===e?void n.$(".blank-name-error").removeClass("hidden"):(n.$(".blank-name-error").addClass("hidden"),void n.showStripe())},function(e){if(e)throw e}).done},"click .restart-subscription":function(){this.showStripe()}},showStripe:function(){if(h)return void(f=!0);var e=n._getUnderscore(this).soak("user.@organization.@activeUserCount")||1;this.stripeHandler.open({name:l["stripe-name"](),description:l["stripe-description"](),amount:10*e*100})},hasOrg:function(){return!!n._getUnderscore(this).soak("user.@organization.id")},render:function(){var e="join";this.hasOrg()&&(e="orgList"),e!==this.oldMode&&this.clear(),this.oldMode=e,"orgList"===e?this.renderOrganizationList():(this.renderJoinOrganization(),this.renderCreateOrganization())},renderCreateOrganization:function(){var e=this.user.toContext();e.disableAutoJoin=e.blockedEmail||e.potentialOrganization,this.$el.append(i.templates.createOrganization(e))},renderJoinOrganization:function(){this.user.has("potentialOrganization")&&this.$el.append(i.partials.joinOrganization(this.user.get("potentialOrganization")))},renderOrganizationList:function(){var e=this.getOrganizationContext(this.$(".search").val());e.hasFetched=this.hasFetchedOrg;var t=this.$(".org-list");if(this.joinLinkView&&this.joinLinkView.remove(),this.joinLinkView=null,t.length?(this.$(".org-head").html(i.partials.organizationHeader(e)),this.hasFetchedOrg&&this.$(".org-table-container").html(i.partials.organizationTable(e))):this.$el.append(i.templates.organizationList(e)),!this.hasFetchedOrg){var r=this.$(".user-table-spinner");this.addSpinner(r,this.largeGreySpinnerOptions)}var o=n._getUnderscore(this).soak("user.@organization.joinUrl()");this.joinLinkView=new s({text:o}),this.$(".org-head .join-link").replaceWith(this.joinLinkView.el),this.joinLinkView.render()},spinRefreshButton:function(){var e=this.$(".refresh-spinner");this.addSpinner(e,this.greyButtonSpinnerOptions)},getOrganizationContext:function(e){var t=this.user,n=t.get("organization");if(n){var i=n.toContext();i.users=this.filterUsers(i.users,e).map(function(e){new Date(e.lastActive||0);return e.inactive=!e.recentlyActive||"deactivated"===e.accessLevel,e.root=i,e}),i.user=t.toContext();var r="admin"===t.get("accessLevel"),o="business"===n.get("plan");return i.isAdmin=r,i.adminAccess=r&&o,i.accessLevels=["user","admin","deactivated"],i}},filterUsers:function(e,t){return e=e||[],t?(t=t.toLowerCase(),n._getUnderscore(e).filter(function(e){return n._getUnderscore([e.name,e.email,e.accessLevel]).any(function(e){return e?-1!==e.toLowerCase().indexOf(t):!1})})):e},onChangeAccess:function(e,t){var n=t.data("user"),i=o.find(n),r=this;this.spinRefreshButton(),i.saveIfNeeded("accessLevel",t.val(),{success:function(){r.user.fetchOrganization({error:r.errorHandler("fetch-organization")})},error:this.errorHandler("change-access-level")})},clear:function(){this.$el.empty()}}),h=!1,f=!1;dev.doNotOpenStripe=function(e){null==e&&(e=!0),h=e,f=!1},dev.add("skippedStripeOpen",function(){return f}),dev.add("orgView",function(){return $(".organization-view").view()}),d.deferrableRendering()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/strings":249,"../env":8,"../models":47,"../models/user":71,"./clickToSelectView":136,"./view":236,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/emailConfirmView":154}],208:[function(e,t){"use strict";var n=e("./view"),i=e("./bookSubmodelView"),r=i.superExtend(function(){return{className:"pending-sheet",initialize:function(){this.sheet=this.options.sheet},render:function(){this.$el.html(n.templates.pendingSheet()),this.fullWidth=this.$(".progress").width(),this.update()},update:function(){var e=this.sheet.get("progress");isNaN(e)&&(e=0),e=10+.9*e,this.$(".percentage").text(Math.round(e)),this.$(".progress .bar").animate({width:Math.round(this.fullWidth*e/100)})},toolbarTitle:function(){return{parent:"Loading…"}}}});t.exports=r},{"./bookSubmodelView":128,"./view":236}],209:[function(e,t){"use strict";var n=e("./view"),i=e("../performance"),r=e("../globalEvents"),o=e("../models"),s=e("./index"),a=50,l=10,c=t.exports=n.extend({className:"performance-panel",noPerformanceTiming:!0,initialize:function(e){this.performance=i.getInstance(),this.performance.enablePerformanceMetrics&&!isMobile&&(this.listenTo(this.performance,"noPerformanceHolds",this.checkForNewOutput),this.listenTo(r,"noDeferredActions noOutstandingRequests",this.checkForNewOutput),this.display=o.Account.account.get("admin"),this.display&&(this.render(),this.$el.appendTo(e)))},render:function(){this.$el.addClass("alert"),this.$el.html(n.templates.performance()),this.renderTimingDeferred()},renderTiming:function(){var e=this.performance.totalTiming();e>a&&(this.$(".timing").text(e),this.$(".signature").text(this.performance.contextSignature())),e>l?(this.addPerformanceDetails(),this.performance.sendTiming()):this.performance.resetTiming()},addPerformanceDetails:function(){this.$(".trace-details").prepend("<pre>"+this.performance.timingTraceString()+"</pre>")},checkForNewOutput:function(){o.outstandingRequests||s.deferredActions||!this.performance.shouldReport()||(this.display?this.renderTiming():this.performance.sendTiming())},events:{click:function(){""===window.getSelection().toString()&&this.$(".trace-details").toggle("fast")}}});c.deferrableRendering()},{"../globalEvents":22,"../models":47,"../performance":75,"./index":188,"./view":236}],210:[function(e,t){(function(n){"use strict";var i=e("./view"),r=(e("../models/user"),e("../models"),e("../viewModels/numberHelpers")),o=e("numeral"),s=e("../env"),a=(e("../../common/strings"),e("../routing"),i),l=e("../models/account"),c=t.exports=a.extend({className:"plan-view",initialize:function(){this.render();var e=this.getUser();this.listenTo(e,"change",this.renderDeferred),l.account.fetchAndUpdateUser({error:this.errorHandler("fetch-user")})},gatherTitleBarInfo:function(e){e.setMode("plan")},render:function(){var e=i.templates.plan(this.context());this.$el.html(e)},contextConfig:function(){var e,t=this.getUser(),i=this.getInvoice();return e=i?i.apiCount:t.get("apiCount"),e=e||0,{apiCalls:e,hasActiveOrganization:t.hasActiveOrganization(),userApiLimit:t.get("apiCountLimit"),organization:n._getUnderscore(this).soak("getOrganization().toContext()")}},context:function(){return new u(this.contextConfig())},getUser:function(){return l.currentUser()},getInvoice:function(){return this.getUser().hasActiveOrganization()?n._getUnderscore(this).soak("getOrganization().@invoice"):void 0},getOrganization:function(){return this.getUser().get("organization")}});c.deferrableRendering();var u=BaseObject.extend({initialize:function(){n._getUnderscore(this).extend(this.options)},isIndividual:function(){return!this.organization},type:function(){return this.organization?this.organization.plan:"basic"},isPaid:function(){return"business"===this.type()},planName:function(){return"business"===this.type()?"Business plan":"Free plan"},monthlyRate:function(){if(!this.isPaid())return null;if(this.isIndividual())return s.businessBaseMonthlyRate;var e=this.organization.activeUserCount-s.businessFreeMembers,t=e*s.businessPerUserRate;return s.businessBaseMonthlyRate+Math.max(0,t)},freeApiCalls:function(){return this.hasActiveOrganization?this.organization.freeApiCalls:this.userApiLimit?this.userApiLimit:s.freeApiCallsBasic},freeApiCallsFormatted:function(){return o(this.freeApiCalls()).format()},apiOverage:function(){if(!this.isPaid())return null;var e=this.apiCalls-this.freeApiCalls();if(0>=e)return null;var t=s.apiCallPrice/100;return(e*t).toFixed(2)},apiPercentage:function(){return Math.min(100,100*this.apiCalls/this.freeApiCalls())},apiDisplayPercentage:function(){return this.apiPercentage().toFixed(0)},apiMeterPercentage:function(){return Math.ceil(this.apiPercentage()).toFixed(0)},orgSummary:function(){return this.isIndividual()?"N/A":this.organization.activeUserCount},formattedApiCalls:function(){return r.format3SigFigs(this.apiCalls)}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/strings":249,"../env":8,"../models":47,"../models/account":27,"../models/user":71,"../routing":76,"../viewModels/numberHelpers":102,"./view":236,numeral:696}],211:[function(e,t){"use strict";var n=e("./view"),i=e("./oauthWindowView"),r=e("../../common/strings"),o=t.exports=n.extend({className:"plugin-detail",initialize:function(){_.defaults(this,{templateName:this.slug+"Plugin"}),this.trackMetric("show"),this.render()},gatherTitleBarInfo:function(e){e.setMode("importSync"),e.setTitle(this.getTitle())},getTitle:function(){var e=r["integration-name-"+this.slug]();return"{{name}} Import".stencil({name:e})},render:function(){this.$el.html(n.templates[this.templateName](this.context()))},context:function(){return{}},remove:function(){this.removeSubviews("oauthWindowView"),n.prototype.remove.apply(this,arguments)},onOauthSuccess:_.noop,startOauthFlow:function(e){e=e||{};var t=this;this.oauthWindowView=new i({type:this.slug,metricsContext:this.slug+"_plugin",finishCallback:function(e){e&&t.onOauthSuccess()},force:e.force}),this.oauthWindowView.render()},events:{"click .use-plugin":function(e){this.trackMetric("click_import"),e.preventDefault(),this.$(".use-plugin").blur(),this.startOauthFlow()}}});dev.add("pluginView",function(){return o.displayedView()})},{"../../common/strings":249,"./oauthWindowView":205,"./view":236}],212:[function(e,t){(function(n){"use strict";var i=e("./view"),r=(e("../keys"),e("../routing")),o=(e("./autocompleteView"),e("./chitWellView")),s=e("./menuAutocompleteView"),a=i.extend({className:"powerbar",template:i.templates.powerbar,initialize:function(){this.viewModel=this.options.viewModel,this.setQueryTextDelayed=this.debounce(_.bind(this.setQueryText,this),100),this.listenTo(this.viewModel,"queryTextChanged",this.renderQueryTextDeferred),this.listenTo(this.viewModel,"sheetChanged",this.renderSaveSearchButtonDeferred),this.listenTo(this.viewModel,"navQueryChanged",this.renderSavedSearchQueryDeferred),this.listenTo(this.viewModel,"queryResultsChanged",this.bindQuery)},renderSaveSearchButton:function(){var e=this.$(".save-action-button"),t=this.$(".search").val();this.viewModel.canSaveSearch(t)?e.removeAttr("disabled"):e.attr("disabled",!0)},renderSavedSearchQuery:function(){_.soak(this.chitWell,"blur()");var e=this.viewModel.navItemSearchText();this.viewModel.setQueryText(e),_.soak(this.chitWell,"render()")},remove:function(){this.chitWell&&this.chitWell.remove(),this.autocompleteView&&this.autocompleteView.remove(),i.prototype.remove.call(this)},render:function(){this.$el.html(i.templates.powerbar(this.context())),this.renderSavedSearchQuery(),this.renderSaveSearchButton(),this.chitWell&&this.chitWell.remove(),this.chitWell=new o({viewModel:this.viewModel}),this.$(".search-container").append(this.chitWell.el),this.chitWell.alignChits(),this.autocompleteView&&this.autocompleteView.remove(),this.autocompleteView=new s({source:_.bind(this.viewModel.queryAutocompletions,this.viewModel),sheet:this.viewModel.sheet,input:this.chitWell.$el,inputSelectorClass:this.chitWell.className}),this.autocompleteView.render(),this.$el.append(this.autocompleteView.$el)
},bindQuery:function(){this.viewModel.query.boundTerms()},renderQueryText:function(){this.bindQuery(),this.chitWell.render()},context:function(){return{showUpdateSearchButton:this.viewModel.navQuery(),metadataLocked:this.viewModel.isMetadataLocked()}},saveOrUpdateSearch:function(e,t){if(this.viewModel.canSaveSearch()){var n=this,i=this.$(".save-search");t&&(i=this.$(".save-as-new")),this.addSpinner(i,this.greyButtonSpinnerOptions);var o={success:function(e){n.stopSpinning(i),mixpanel.track("save_search",{sheet_id:n.viewModel.sheet.id,navKey:e.id});var o={};(t||!n.viewModel.navQuery())&&(o.editSheetTitle=!0),r.router.flash(o).goToSheet(n.viewModel.sheet.id,e.id)},error:this.errorHandler({action:"create-nav-item",spinner:i}),forceNewNavItem:t};this.viewModel.navQuery()&&!t?this.viewModel.updateSearch(o):this.viewModel.saveSearch(o)}},setQueryText:function(){var e=this.chitWell.getQueryString();this.renderSaveSearchButton();try{this.viewModel.setQueryText(e)}catch(t){console.warn(t)}},setQueryAndRender:function(e){this.viewModel.setQueryText(e),n._getUnderscore(this).soak("chitWell.render()")},editedChit:function(){this.captureActions(function(){this.viewModel.originalQuery||this.viewModel.beginEditingQueryText(),this.setQueryText(),this.viewModel.endEditingQueryText(),this.chitWell.renderDeferred()})},keyboardEvents:{"/":function(){return this.chitWell.focus(),!1}},beginEditingQuery:function(){this.viewModel.beginEditingQueryText(),this.pauseTip()},events:{"focus .chit-well":"beginEditingQuery","startEditingChit .chit-well":"beginEditingQuery","blur .chit-well":function(){this.editedChit(),this.resumeTip(),this.bindQuery()},"input .chit-well":function(){this.setQueryTextDelayed()},"submit .search-form":function(e){e.preventDefault(),this.$(".search").blur()},"click .save-search":function(e){this.captureActions(function(){e.preventDefault(),this.saveOrUpdateSearch(e)})},"click .save-as-new":function(e){this.captureActions(function(){e.preventDefault(),this.saveOrUpdateSearch(e,!0)})}}});dev.add("powerbar",function(){return $(".powerbar").view()}),dev.setQuery=function(e){try{var t=this.powerbar;t.chitWell&&t.chitWell.blur(),t.setQueryAndRender(e)}catch(n){this.mobileSetQuery(e)}},dev.getQuery=function(){return n._getUnderscore(dev).soak("sheetViewModel.queryString()")},dev.mobileSetQuery=function(e){dev.mobileSheetViewModel.setQueryText(e)},a.deferrableRendering(),t.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../keys":25,"../routing":76,"./autocompleteView":126,"./chitWellView":135,"./menuAutocompleteView":197,"./view":236}],213:[function(e,t){"use strict";var n=e("./view"),i=e("./modalView"),r=(e("../../common/strings"),i.extend({className:"progress-bar modal hide",template:n.templates.progressBar,initialize:function(){this.progress=this.options.progress||0,this.options.title&&(this.title=this.options.title),this.modalOptions={keyboard:!1},this.render()},context:function(){var e=100===this.progress;return{finished:e,title:this.title(this.progress),progress:this.progress}},title:function(e){return e+"% complete"},updateProgress:function(e){e&&(this.progress=e),this.render()},events:{show:function(){this.onNextTick(function(){var e=$(".modal-backdrop");e.addClass("progress-bar-backdrop"),e.off("click")})}}}));n.ProgressBarView=r,t.exports=r},{"../../common/strings":249,"./modalView":203,"./view":236}],214:[function(e,t){(function(n){"use strict";{var i=e("./dragController"),r=e("./view"),o=e("./dummyTable"),s=e("./autoScrollHelper");t.exports=i.superExtend(function(e){return{scopeName:"record-list",handleClass:"record-list-header",targetClass:"group-target",lineClass:"group-target-line",refreshPositions:!0,initialize:function(){e.initialize.apply(this,arguments)},propertyNames:function(){return e.propertyNames.apply(this,arguments).concat(["scrollView"])},getViews:function(){return n._getUnderscore(n._getUnderscore(this.view.$(".fast-record-list")).map$).invoke("view")},makeTarget:function(e,t){var n=this.scrollView.viewportBounds();if(e!==this.fromIndex&&e!==this.fromIndex+1){var i,r,o,s=this.getViews(),a=s[t],l=s[t-1],c=_.soak(a,"getRenderedBounds()"),u=_.soak(l,"getRenderedBounds()");i=u?u.centerY:0,o=c?c.centerY:window.innerHeight,r=c?c.top+10:u?u.bottom+10:n.top;var d=$("<div>").addClass(this.targetClass),h=$("<div>").addClass(this.lineClass);d.append(h),$("body").append(d),d.css({top:i,left:n.left,width:n.width,height:o-i}),h.css({top:r,left:n.left,width:n.width});var f=e>this.fromIndex?e-1:e;return this.makeTargetDroppable(d,f),d}},makeTargets:function(){n._getUnderscore(this.targets).invoke("remove"),this.targets=[];var e=this,t=this.getViews(),i=this.scrollView.views.length-1;n._getUnderscore(t).each(function(t,n){var r=e.indexForModel(t.model);i=r;var o=e.makeTarget(r,n);o&&e.targets.push(o)});var r=this.makeTarget(i+1,t.length);r&&e.targets.push(r)},start:function(t){this.mouseY=t.clientY,this.startScrollLoop(),this.stopListening(),this.listenTo(this.scrollView,"scrollRender",this.makeTargets),e.start.apply(this,arguments)},stop:function(){return this.stopScrollLoop(),this.stopListening(),e.stop.apply(this,arguments)},drag:function(e){this.mouseY=e.clientY},startScrollLoop:function(){this.scrollTimer||(this.scrollTimer=window.setInterval(this.scrollIfNeeded.bind(this),10))},stopScrollLoop:function(){this.scrollTimer&&(window.clearInterval(this.scrollTimer),this.scrollTimer=null)},scrollIfNeeded:function(){var e=this.scrollView.viewportBounds(),t=s.getVerticalDelta(this.mouseY,e);this.scrollView.scrollBy(null,t)},remove:function(){return this.stopListening(),this.stopScrollLoop(),e.remove.apply(this,arguments)},makeHelper:function(e){var t=$(e.target),n=t.closest(this.handleSelector),i=n.closest(".record-list-header").html(),s=$("<div>").addClass("group-helper");s.html(r.partials.groupSortSurrogate(this.context)),s.find(".record-list-header").html(i);var a=this.viewForHandle(n).tableView,l=o(a.rows,a.columns);return s.append(l),s},viewForHandle:function(e){return e.closest(".fast-record-list").view()},getModelForHandle:function(e){return this.viewForHandle(e).model},indexForModel:function(e){return this.scrollView.indexOfRecordList(e)}}})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./autoScrollHelper":124,"./dragController":148,"./dummyTable":152,"./view":236}],215:[function(e,t){(function(n){"use strict";{var i=e("./fastScrollView.js"),r=e("./fastSortController.js"),o=e("../../common/indexCache");t.exports=i.superExtend(function(e){return{initialize:function(){i.prototype.initialize.apply(this,arguments),this.sortable=this.options.sortable,this.recordListIndexCache={},this.setupSortController(),this.setSortable(this.sortable)},setupSortController:function(){this.sortable&&(this.rowSortController=new r(this.sortControllerOptions()),this.rowSortController.startListening())},sortControllerOptions:function(){return{selector:".table-row:not(.row-empty)",handle:".row-handle-cell",delegate:_.bind(this.findDelegate,this),scope:this.$el,hiddenClass:"fast-sort-hidden-row"}},setViews:function(){var t=e.setViews.apply(this,arguments);return this.recordListIndexCache=new o({array:n._getUnderscore(this.views).pluck("model"),predicate:"cid"}),t},removeSortController:function(){this.rowSortController&&(this.rowSortController.remove(),this.rowSortController=null)},indexOfRecordList:function(e){return this.recordListIndexCache.indexOf(e)},setSortable:function(e){var t=this.sortable;this.sortable=e,this.$el.safeToggleClass("sortable",e),t&&!e?this.removeSortController():!t&&e&&this.setupSortController()},findDelegate:function(e){return $(e).closest(".fast-record-list").view()},remove:function(){this.removeSortController(),i.prototype.remove.apply(this,arguments)}}})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/indexCache":244,"./fastScrollView.js":170,"./fastSortController.js":173}],216:[function(e,t){"use strict";{var n=e("./recordListsScrollView");t.exports=n.superExtend(function(e){return{sortControllerOptions:function(){var t=e.sortControllerOptions.apply(this,arguments);return t.container=function(e){var t=e.$item();if(0===t.length){var n=e.dragInfo;if(!n)throw new Error("tried to get container selector but no drag info");throw new Error("tried to get container selector but couldn't find '"+n.itemSelector+"' in scope")}var i=t.closest(".fast-table");if(0===i.length)throw new Error("tried to get container selector but no .fast-table for item: "+t.prop("tagName")+" "+t.attr("class"));var r=i.attr("id");if(!r)throw new Error("tried to get container selector but table has no id: "+i.prop("tagName")+" "+i.attr("class"));return"#{{tableId}} .body".stencil({tableId:r})},t}}})}},{"./recordListsScrollView":215}],217:[function(e,t){(function(n){"use strict";var i=e("url"),r=e("../../common/values"),o=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/globalEvents"),s=e("../../common/strings"),a=(e("../models"),e("../viewModels")),l=e("./view"),c=(e("./statusBarView"),e("./fastTableView")),u=e("./fastTableRow"),d=e("./cellRender"),h=(e("./fastPositioner"),e("./fastScrollView"),e("./editors")),f=e("./renderHighlight"),p=e("./drawBox"),m=e("./drawLine"),g=e("../viewModels/bulkChange"),v=e("../keys"),b=e("../routing"),y=e("../models/region"),w=(e("../models/expressions/expression"),e("../errors")),x=e("./fastRecordListView"),k=e("./flushData"),S=e("./recordScrollView"),C=e("./staticScrollableView"),E=e("./fastScrollConstants"),I=e("./fastScrollableView"),R=e("./bookSubmodelView"),T=e("./sheetView"),A=e("./attachmentUploader"),M=t.exports=R.extend({className:"fast-record-detail",initialize:function(){this.pickProperties(),this.recordListViews=[],this.flushData=new k,this.pauseRendering=0,this.loadData(),this.initIteratorIfNeeded(),this.listenTo(this.viewModel,"madePermanent",this.onMadePermanent)},getSheet:function(){return this.model.sheet()},remove:function(){this.hideSubsheetPreview(),this.fastScrollView&&this.fastScrollView.remove(),l.prototype.remove.apply(this,arguments)},loadData:function(){this.stopListening();var e=this;this.pauseRender(),this.model.qfetchIfNeeded().thenImmediate(function(){return e.model.sheetPromise()}).thenImmediate(function(){e.unpauseRender(),e.listenTo(e.model,"change",e.renderAttributes),e.listenTo(e.model,"sync",e.onValueChange),e.listenTo(e.model,"change",e.renderHeaderDeferred),e.model.sortChildren();var t=e.model.sheet();t&&(e.sheet||(e.sheet=t,e.sheetLoaded=e.sheet.isLoaded(),e.sheetLoaded?e.setupListeners():e.listenTo(e.sheet,"all",e.checkLoaded)))}).done()},setupListeners:function(){var e=this;this.listenTo(this.sheet,"change:title",this.renderHeaderDeferred),this.listenTo(this.sheet,"change:nameKey",this.renderHeaderDeferred),this.listenTo(this.sheet,"fields:add",this.onFieldAdd),this.listenTo(this.sheet,"fields:change",this.onFieldChange),this.listenTo(this.sheet,"fields:remove",this.onFieldChange),this.listenTo(this.sheet,"fields:reset",this.onFieldChange),this.listenTo(this.sheet,"fields:sort",this.onFieldChange),this.listenTo(this.sheet,"subsheets:add",this.onSubsheetChangeDeferred),this.listenTo(this.sheet,"subsheets:change",this.onSubsheetChange),this.listenTo(this.sheet,"subsheets:remove",this.onSubsheetChange),this.listenTo(this.sheet,"subsheets:reset",this.onSubsheetChange),this.listenTo(this.model,"made-permanent",this.onSubsheetChangeDeferred),this.listenTo(this.sheet,"subsheets:sheet:records:change",this.onSubsheetChange),this.listenTo(this,"redrawAllRows",this.redrawAllRows),this.sheet.getFields().each(function(t){e.listenTo(e.model,"change:"+t.get("key"),function(){e.onValueChange(t)})})},scrollBy:function(e,t){this.fastScrollView&&this.fastScrollView.scrollBy(e,t)},initIteratorIfNeeded:function(){var e=this.model;if(e&&this.sheet){var t,r=i.parse(window.location.href,!0),o=r.query;if(o){var s;if(this.iterator)t=this.iterator;else{var a,l=o.query;l?a=this.sheet.query(l):o.nav&&(a=this.sheet.queryForNavKey(o.nav)),s=!a,s&&(a=this.sheet.query(""));var c="/sheets/"+this.sheet.id;o.nav&&(c+="/"+o.nav);var u=i.parse(c,!0);u.query.query=l;var d=i.format(u).replace(/%20/g,"+");T.urlMap[c]=T.urlMap[c]||d,t=a.executePipeline().recordIterator(),t.setCurrent(e),this.iterator=t,this.renderHeaderDeferred()}if(s){delete r.query.query,delete r.query.nav,delete r.search;var h=i.format(r);n.history.replaceState(null,null,h)}else t.setQueryString(r.search)}}},onSubsheetChange:function(){this.updateScrollableViews(),this.fastScrollView.setNeedsRenderContent()},pauseRender:function(){0===this.pauseRendering&&(this.shouldRenderAfterPause=!1),this.pauseRendering++,this.fastScrollView&&this.fastScrollView.pauseRenderLoop()},unpauseRender:function(){this.pauseRendering--,0===this.pauseRendering&&(this.fastScrollView&&this.fastScrollView.unpauseRenderLoop(),this.shouldRenderAfterPause&&(this.shouldRenderAfterPause=!1,this.render()))},checkLoaded:function(){this.sheetLoaded||this.sheet.isLoaded()&&(this.sheetLoaded=!0,this.setupListeners(),this.createView(),this.renderDeferred())},onFieldChange:function(){this.tableView&&(this.tableView.setRows(this.createRows()),this.tableView.rerenderAllRows())},onFieldAdd:function(e){var t=this;this.listenTo(t.model,"change:"+e.get("key"),function(){t.onValueChange(e)}),this.onFieldChange(e)},onValueChange:function(e){return this.tableView?o.hasChangesInflight()?void this.triggerOnceIdle("redrawAllRows"):void(e?this.tableView.redrawRowWithId(e.get("key")):this.tableView.rerenderAllRows()):void 0},redrawAllRows:function(){this.tableView&&this.tableView.rerenderAllRows()},onRecordChange:function(){this.resetView()},resetView:function(){this.createView(!0),this.renderDeferred()},createView:function(e){(!this.hasCreatedBaseHtml||e)&&(this.$el.addClass("record-detail"),this.$el.html(l.templates.record({temporary:this.model.isTemporary(),nameEditable:this.nameIsEditable(),placeHolderName:this.model.placeHolderName()})),this.hasRenderedBase=!1),this.hasCreatedBaseHtml=!0,(!this.fastScrollView||e)&&this.createScrollView(),this.updateScrollableViews(e)},updateScrollableViews:function(e){var t=[];this.fastScrollView&&((!this.tableView||e)&&this.createAttributesTable(),t.push(this.tableView),this.model.isMetadataLocked()||((!this.addFieldView||e)&&(this.addFieldView=new C({virtualHeight:E.virtualHeights.RECORD_ADD_FIELD,width:E.widths.RECORD_ADD_FIELD,html:l.partials.recordAddField()})),t.push(this.addFieldView)),t=t.concat(this.createSubsheetViews(e)),this.model.isReadOnlyMode()||(this.model.isTemporary()?this.model.isTemporary()&&((!this.saveButtonView||e)&&(this.saveButtonView=new C({virtualHeight:E.virtualHeights.SAVE_RECORD,width:E.widths.SAVE_RECORD,html:l.partials.recordSaveButton()})),t.push(this.saveButtonView)):this.model.isMetadataLocked()||((!this.subsheetButtonsView||e)&&(this.subsheetButtonsView=new O({record:this.model})),t.push(this.subsheetButtonsView))),this.fastScrollView.setViews(t))},createScrollView:function(){return this.fastScrollView&&(this.fastScrollView.remove(),this.stopListening(this.fastScrollView)),this.fastScrollView=new S({sortable:!this.model.isMetadataLocked()}),this.$(".fast-scroll-container").append(this.fastScrollView.el),this.fastScrollView},createAttributesTable:function(){return this.tableView&&(this.tableView.remove(),this.stopListening(this.tableView)),this.tableView=new c({delegate:this,tablePrefix:this.cid+"-attributes",columns:[new F,new V({record:this.model,viewModel:this.viewModel})],rows:this.createRows(),hasHeaders:!1,hasEmptyRow:!1,hasRowHandles:!1,canDeleteRow:!1,width:600,scrollView:this.fastScrollView,readOnly:this.model.isReadOnlyMode()}),this.tableView.$el.addClass("attributes"),this.listenTo(this.tableView,"selectionChanged",this.selectionChanged),this.tableView},selectionChanged:function(){var e,t=this.tableView.getSelectionRanges();if(t){var n=[this.model],i=[];t.eachRow(function(e){i.push(e.field())}),e=new y(n,i)}this.trigger("selectionChanged",this.tableView,e)},createRows:function(){var e=this.getSheet();if(!e)throw new Error("RecordView has no sheet (for record: {{recordId}})",{recordId:this.model&&this.model.id});return e.getUnhiddenFields().filter(function(e){return!e.isNameField()}).map(function(t){return new L({fieldKey:t.get("key"),sheet:e})})},nameIsEditable:function(){if(this.model.isReadOnlyMode())return!1;if(n._getUnderscore(this).soak("sheet.nameField().hasIntegration()"))return!1;var e=this.model.sheet().get("nameFieldMode");return!this.model.isTemporary()&&"single"===e},render:function(){return this.pauseRendering>0?void(this.shouldRenderAfterPause=!0):(this.tableView||this.createView(),this.renderHeader(),void(this.hasRenderedBase?this.fastScrollView.setNeedsRenderContent():(this.tableView.renderBase(),this.fastScrollView.render(),this.hasRenderedBase=!0)))}.triggerTips(),renderAttributes:function(){this.fastScrollView&&this.fastScrollView.setNeedsRenderContent()},hasLoadedSubsheets:function(){var e=this.sheet&&this.sheet.get("subsheets");return e?0===e.length?!0:this.model.isLoaded()?this.sheet.isLoaded()?!0:!1:!1:!1},createSubsheetViews:function(e){var t=this;if(this.model.isTemporary())return[];if(!this.hasLoadedSubsheets())return[new C({virtualHeight:E.virtualHeights.SUBSHEET_LOADING,width:E.widths.SUBSHEET_LOADING,html:l.partials.loadingSubsheets()})];var i=this.sheet&&this.sheet.get("subsheets"),r={};e||(r=n._getUnderscore(this.recordListViews).indexBy(function(e){return e.model.subsheet.cid}));var o=n._getUnderscore(i).map(function(e){if(e.cid in r)return r[e.cid];var n=new a.SubsheetRecordList({subsheet:e,record:t.model});return new x({model:n,parent:t,flushData:t.flushData,scrollView:t.fastScrollView})});return _.chain(r).values().difference(o).each(function(e){t.stopListening(e),e.remove()}),this.recordListViews=o,this.bubble(this.recordListViews,"selectionChanged"),this.recordListViews},onSubsheetMoved:function(e,t){this.captureActions(function(){var e=t.item.data("view"),n=e.model,i=this.$(".subsheets .record-list").index(t.item),r=this.sheet.get("subsheets");r.move(n.subsheet,i,{error:this.errorHandler("move-subsheet")})})},renderHeader:function(){return this.sheet&&this.sheet.has("fields")?void this.trigger("needsBookToolbarRender"):void this.$(".record-header").hide()},editorForCell:function(e,t){var n=e.row.field();if(e.column.isFieldNameColumn)return new h.AttributesHeaderEditor(t);if(n.isFormula())t.initialValue=n.editableFormula();else if(n.isImage())return _.defaults(t,{book:this.model.sheet().book()}),new h.ImageEditor(t)},switchToFormula:function(){},isRecordView:!0,onEdit:function(e){var t=this;this.captureActions(function(){t.handleRowChanges(e.rowsChanged),t.handleBulkChanges(e.bulkChanges)})},handleBulkChanges:function(e){if(!_.isEmpty(e)){var t={rename:{},previousNames:{}},i={record:this.model,attributes:{},previousAttributes:{}},r=this;n._getUnderscore(e).each(function(e){var n=e.row,o=n.field(),s=o.get("key");_.each(e.attributes,function(e,a){var l=r.tableView.columnWithId(a);if(!n.isReadOnly(l))if(l.isFieldNameColumn)t.rename[s]=e,t.previousNames[s]=o.get("name"),o.set("name",e);else{if(o.isFormula())return;var c=o.resolveValue(e,r.model);i.attributes[s]=c,i.previousAttributes[s]=r.model.getValue(s),r.model.set(s,c)}})}),g.saveBulkChanges(this.getSheet(),t,[i],null,{error:this.errorHandler("update-record-paste")})}},handleRowChanges:function(e){var t=this,i={},r={};n._getUnderscore(e).each(function(e){var n=e.row,o=n.field();_.each(e.attributes,function(e,s){var a=t.tableView.columnWithId(s),l=e.displayValue();if(!n.isReadOnly(a))if(a.isFieldNameColumn)o.rename(l,{error:t.errorHandler("update-field-name")});else try{t.viewModel.addUpdateToPatch(e,o,i,r,t.boundErrorHandler)}catch(c){t.handlePatchError(c,l)}})}),this.viewModel.applyPatch(i,r,this.boundErrorHandler)},handlePatchError:function(e,t){var n;n=e instanceof w.ValidationError?e.getMessage():s["error-parse-formula-no-cancel"]({badFormula:t});var i=this;i.showStatus({message:n})()},onMadePermanent:function(){this.addSpinner(this.$(".save"),_.extend(this.greyButtonSpinnerOptions,{color:"white"}))},makePermanent:function(){this.onMadePermanent(),this.model.makePermanent()},showSubsheetPreview:function(){var e=this.$(".btn.add-subsheet"),t=$(".add-sheet"),n=$('<canvas class="link-arrow">').appendTo(this.bookView().el);p(e,"add-subsheet-box",this.bookView().el),p(t,"add-subsheet-box",this.bookView().el);var i={},r={},o=e.bounds(),s=t.bounds();i.x=s.centerX,r.x=o.centerX,i.y=s.bottom,r.y=o.top,m(i,r,n,"hsl(45, 100%, 50%)",3,"vertical")},hideSubsheetPreview:function(){this.bookView().$(".add-subsheet-box").remove(),this.bookView().$(".link-arrow").remove()},captureLink:function(e,t){if(/^\/records\//.test(t)){var n=$(e.target).closest(".fast-record-list").data("view");if(n){var i=n.model;b.router.flash({recordIterator:i.recordIterator()})}}l.prototype.captureLink.apply(this,arguments)},addSubsheet:function(e){this.captureActions(function(){if(this.sheet){var t=$(e.target).closest(".add-subsheet"),n=!1,i={};t.data("sheetId")&&t.data("fieldKey")?(i.sheet={_id:t.data("sheetId")},i.field={key:t.data("fieldKey")}):n=!0;var r=this.$(".add-subsheet.btn");r.blur(),this.addSpinner(r,this.greyButtonSpinnerOptions);var o=this;this.sheet.addSubsheet(i,{wait:!0,silent:n,success:function(e){o.stopSpinning(r),n&&o.fastScrollView.onNextRender(function(){o.editSubsheetTitle(e)})},error:this.errorHandler({action:"create-subsheet",spinner:r})})}}),this.hideSubsheetPreview()},editSubsheetTitle:function(e){var t=n._getUnderscore(this.recordListViews).find(function(t){return t.model.subsheet===e});t&&t.beginEditingTitle()},toolbarTitle:function(){var e=this.getSheet();return{parent:e.displayTitle(),parentUrl:T.mapUrl(e.url()),child:this.model.name()}},onFlash:function(e){var t=e.recordIterator;t&&t.contains(this.model)&&(this.iterator=t,this.iterator.setCurrent(this.model),this.renderHeader())},renderToolbarTitle:function(e,t){var n=t.find(".title-part:last-child");n.addClass("record-name"),n.attr("contenteditable",this.nameIsEditable()),n.safeToggleClass("name-placeholder",this.model.usesPlaceholderName()),document.title=this.model.name(),this.delegateEventsFromElement(t.parent(),this.toolbarEvents),this.iterator&&t.after(l.partials.recordIterator(this.iterator.toContext()))},$recordName:function(){return $(".book-toolbar .record-name")},handleFileDrop:function(e,t){var i=n._getUnderscore(e).soak("originalEvent.dataTransfer.files.0");if(i){var r=new window.FormData;r.append("files",i);var o=this;this.uploader=new A({book:this.model.sheet().book(),formData:r,filename:i.name,finished:function(e,n){return e?void o.showAlert(e):void o.setImageUrlForCell(n,t)}}),this.uploader.importFile()}},setImageUrlForCell:function(e,t){var n=new r.types.ImageValue(e);this.tableView.cellChange(t.row,t.column,n)},toolbarEvents:{"focus .record-name":function(e,t){this.onNextTick(function(){this.model.rawName()||t.text("").removeClass("name-placeholder"),t.selectText()})},"keydown .record-name":function(e,t){e.which===v.COMMAND?e.stopPropagation():e.which===v.RETURN&&(e.stopPropagation(),e.preventDefault(),t.blur())},"blur .record-name":function(e,t){this.captureActions(function(){var e=t.text().trim();this.model.isTemporary()?(this.model.setName(e),this.makePermanent()):this.model.saveName(e,{error:this.errorHandler("update-record")})}),this.renderHeader()},"click .iterator-button":function(e){var t=$(e.target).closest(".iterator-button"),n=t.data("id");n&&b.router.flash({recordIterator:this.iterator}).goToRecord(n,this.iterator.queryString)}},events:{"mouseenter .btn.add-subsheet":"showSubsheetPreview","mouseleave .btn.add-subsheet":"hideSubsheetPreview","click .add-subsheet":"addSubsheet","click .fast-record-list a":"onLinkClicked","click .save":function(e){e.preventDefault(),this.makePermanent()},"mouseenter .record-list-title .editable-title":function(e){var t=$(e.target).closest(".record-list-title");f.mouseEnter(t)},"mouseleave .record-list-title .editable-title":function(e){var t=$(e.target).closest(".record-list-title");f.mouseLeave(t)},"mouseenter .field-icon-link":function(e){var t=$(e.target).closest(".field-icon-link");f.mouseEnter(t)},"mouseleave .field-icon-link":function(e){var t=$(e.target).closest(".field-icon-link");f.mouseLeave(t)},"click .add-record-column":function(e){var t=$(e.target).closest(".add-record-column"),n=this;this.addSpinner(t,{lines:10,rotate:30,length:4,width:1,radius:3}),this.captureActions(function(){this.model.sheet().get("fields").create({},{wait:!0,success:function(e){n.stopSpinning(t),n.fastScrollView.onNextRender(function(){var t=n.tableView.getCellByIds(e.get("key"),"fieldName");n.tableView.beginEditing(t)})},error:this.errorHandler({action:"create-field",spinner:t})})})},"click .attributes .edit-icon":function(e,t){var n=t.closest("td");this.tableView.beginEditing(n),e.stopPropagation()}}}).addProperties("viewModel").addGetters({model:"viewModel.record"});M.deferrableRendering(),M.deferrable("onRecordChange","onSubsheetChange","onFieldChange");var F=c.FastTableColumn.superExtend(function(e){return{isFieldNameColumn:!0,id:function(){return"fieldName"},width:function(){return 200},cellHtml:function(e){var t=e.field();return d.headerHtml(t)},cellValue:function(e){return e.field().get("name")},getNewDisplayValue:function(e,t){return t.toString()},bodyClassList:function(){var t=e.bodyClassList.apply(this,arguments);return t.concat(["field"])}}}),V=c.FastTableColumn.superExtend(function(e){return{id:function(){return"value"},shouldOfferAutocompletions:function(e,t,n){return n.row.field().shouldOfferAutocompletions(e,t)},useChitMode:function(e){return e.row.field().isAnyLink()},getInputValidation:function(e,t){return t.row.field().getValidator(e)},bodyClassList:function(t){var n=e.bodyClassList.apply(this,arguments);return t.field().isImage()&&(n=n.concat(["image-cell","file-drop-target"])),n.concat(["value"])},width:function(){return 400},cellHtml:function(e){return l.partials.value(this.cellContext(e))},cellValue:function(e){return this.record.getValue(e.field())},getNewDisplayValue:function(e,t){return t.displayValue(e.field().formatOptions())},cellDisplayValue:function(e){return e.row.field().getFormattedDisplayValue(this.record)},cellContext:function(e){return d.valueContext(this.record,e.fieldKey,{leftAlign:!0},e.sheet)},autocompleteValues:function(e,t){var n=t.field();return this.viewModel.autocompleteValues(e,n)}}}).addProperties("record","viewModel"),L=u.superExtend(function(e){return{id:function(){return this.fieldKey},propertyNames:function(){return["fieldKey","sheet"]},field:function(){return this.sheet.fieldWithKey(this.fieldKey)},isReadOnly:function(t){var n=this.field(),i=n.sheet();return n.hasIntegration()?"fieldName"!==t.id():n.isFormula()&&i.isMetadataLocked()?!0:i.isMetadataLocked()?"fieldName"===t.id():e.isReadOnly.apply(this,arguments)}}}),O=I.superExtend(function(){return{className:"add-subsheet-group",initialize:function(){this.record=this.options.record},potentialSubsheets:function(){return this.record.sheet().potentialSubsheets()},render:function(){var e={recordName:this.record.name()||s["this-record"](),potentialSubsheets:this.potentialSubsheets()};this.$el.html(l.partials.addSubsheetButtons(e))},getVirtualHeight:function(){var e=E.virtualHeights.ADD_SUBSHEET;return this.potentialSubsheets()&&(e+=E.virtualHeights.RESTORE_SUBSHEET),e},getActualWidth:function(){return E.widths.ADD_SUBSHEET},getSortDelegate:_.constant(null)}});dev.add("recordView",function(){return M.displayedView()}),dev.add("record",function(){return dev.recordView.model})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/strings":249,"../../common/values":253,"../errors":9,"../keys":25,"../models":47,"../models/expressions/expression":42,"../models/region":62,"../routing":76,"../viewModels":99,"../viewModels/bulkChange":86,"./attachmentUploader":123,"./bookSubmodelView":128,"./cellRender":133,"./drawBox":149,"./drawLine":150,"./editors":153,"./fastPositioner":161,"./fastRecordListView":164,"./fastScrollConstants":169,"./fastScrollView":170,"./fastScrollableView":171,"./fastTableRow":176,"./fastTableView":177,"./flushData":179,"./recordScrollView":216,"./renderHighlight":219,"./sheetView":222,"./staticScrollableView":224,"./statusBarView":225,"./view":236,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/globalEvents":22,url:744}],218:[function(e,t){"use strict";{var n=e("./view");t.exports=function(e,t){t=t.trim(),_.isObject(e)&&(e=e.value);var i=e,r="",o="",s=e.toLowerCase().indexOf(t.toLowerCase());return-1!==s&&(i=e.substr(0,s),o=e.substr(s,t.length),r=e.substr(s+t.length,e.length)),n.partials.autocompleteValue({before:i,current:o,after:r})}}},{"./view":236}],219:[function(e,t){"use strict";var n=(e("../models"),e("./drawLine")),i=t.exports={mouseEnter:function(e){var t=e.data("field-key"),n=e.data("id");t?this.highlightField(t):n&&this.highlightSheet(e,n)},highlightSheet:function(e,t){var i=$(".sheet-tab.existing-sheet").filter(function(e,n){var i=$(n).data("id");return i===t});if(i.length){i.addClass("highlight");var r=this.makeArrowElement(e.parent()),o=i[0].getBoundingClientRect(),s=e[0].getBoundingClientRect(),a={},l={};a.x=o.right,a.y=(o.top+o.bottom)/2,l.x=s.left,l.y=(s.top+s.bottom)/2,n(a,l,r,"hsl(45, 100%, 50%)",3)}},highlightField:function(e){var t=$("td.field").filter(function(t,n){n=$(n);var i=n.data("field");if(i)return i&&i.get("key")===e;var r=n.data("row");return e===r});t.addClass("highlight")},mouseLeave:function(){$(".sheet-tab.highlight").removeClass("highlight"),$("td.field.highlight").removeClass("highlight"),this.removeArrowElements(),$(".render-highlight").remove()},removeArrowElements:function(){this.arrowElements=[]},arrowElements:[],observeArrows:function(){var e=this,t=new window.MutationObserver(function(){var t=e.arrowElements.filter(function(e){var t=e.data("arrowParent");return t?!e.data("arrowParent").isAttached():!1});e.arrowElements=_.difference(e.arrowElements,t),t.forEach(function(e){e.remove()})});t.observe(document,{childList:!0,subtree:!0})},makeArrowElement:function(e){var t=$("<canvas>").addClass("render-highlight link-arrow");return t.data("arrowParent",e),t.appendTo($("body")),this.arrowElements.push(t),t}};i.observeArrows()},{"../models":47,"./drawLine":150}],220:[function(e,t){(function(n){"use strict";var i=e("../models"),r=(e("../viewModels"),e("../routing").router),o=e("./view"),s=e("./mainNavView"),a=e("./bookView"),l=e("./statusBarView"),c=e("./titleBarView"),u=e("./performanceView"),d=e("../errors"),h=o.extend({className:"root",initialize:function(){this.model=this.model||i.Book.collection;var e=i.Account.account;this.$el.html(o.templates.root(e.toContext())),this.content=this.$(".content"),this.$(".inner-content").on("scroll",function(e){e.target.scrollTop=0}),isMobile||(this.titleBarView=new c({el:this.$(".title-bar")})),this.statusBarView=new l({el:this.$(".status-bar")}),this.performanceView=new u(this.$el.parent());var t=this;$(document.body).on("click","a",function(e){t.onLinkClicked(e)})},isShowingMainNav:function(){return this.mainView instanceof s},isShowingBook:function(e){return e?this.mainView instanceof a&&this.mainView.model===e:!1},showView:function(e){this.mainView&&this.mainView.remove(),this.mainView=e,this.$(".inner-content").append(e.$el),e.render()},showBook:function(e){var t=i.Book.find(e);this.isShowingBook(t)?this.mainView.showBook():this.showView(new a({model:t}))},gatherTitleBarInfo:function(e){this.mainView.gatherTitleBarInfo(e)},showSheet:function(e,t){var n=i.Sheet.find(e),r=n.book();this.isShowingBook(r)?this.mainView.showSheet(n,t):this.showView(new a({model:r,submodel:n,navKey:t}))},showRecord:function(e){var t=i.Record.find(e);if(!t.effectiveSheetId())throw new Error("record "+e+" missing sheet id");
var n=t.sheet();if(!n)throw new Error("no sheet for record "+e+" with sheet id "+t.effectiveSheetId());var r=n.book();if(!r)throw new Error("no book for record "+e+", sheet "+n.id);this.isShowingBook(r)?this.mainView.showRecord(t):this.showView(new a({model:r,submodel:t}))},newRecord:function(e,t){var n=i.Sheet.find(e),o=n.findRecordByName(t);if(o&&o.id)return void r.goToRecord(o.id);n.get("records");o||(o=n.findOrCreateMissingRecord(t)),_.soak(n,"nameField().hasAnyFormula()")||o.setName(t);var s=n.book();this.isShowingBook(s)?this.mainView.showRecord(o):this.showView(new a({model:s,submodel:o}))},showMainNavIfNeeded:function(){if(i.Account.account.isAnonymousUser())throw new d.NeedsLogin;this.isShowingMainNav()||this.showView(new s)},showHome:function(){this.showMainNavIfNeeded(),this.mainView.showHome()},showOrganization:function(){this.showMainNavIfNeeded(),this.mainView.showOrganization()},showPlan:function(){this.showMainNavIfNeeded(),this.mainView.showPlan()},showBookList:function(){this.showMainNavIfNeeded(),this.mainView.showBookList()},showTutorials:function(){this.showMainNavIfNeeded(),this.mainView.showTutorials()},showTemplateList:function(){this.showMainNavIfNeeded(),this.mainView.showTemplateList()},showTemplate:function(e){this.showMainNavIfNeeded(),this.mainView.showTemplate(e)},showImportList:function(){this.showMainNavIfNeeded(),this.mainView.showImportList()},showImport:function(e){this.showMainNavIfNeeded(),this.mainView.showImport(e)},showEventbritePlugin:function(){this.showMainNavIfNeeded(),this.mainView.showEventbritePlugin()},onFlash:function(e){"function"==typeof this.mainView.onFlash&&this.mainView.onFlash(e)}});t.exports=h,n.defaultErrorHandler=function(){var e=h.displayedView();if(!e)throw new Error("No root view to create error handler");return e.errorHandler.apply(e,arguments)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":9,"../models":47,"../routing":76,"../viewModels":99,"./bookView":131,"./mainNavView":195,"./performanceView":209,"./statusBarView":225,"./titleBarView":231,"./view":236}],221:[function(e,t){"use strict";{var n=e("./recordListsScrollView");t.exports=n.superExtend(function(e){return{sortControllerOptions:function(){var t=e.sortControllerOptions.apply(this,arguments);return t.container=".body",t}}})}},{"./recordListsScrollView":215}],222:[function(e,t){(function(n){"use strict";var i=e("../models"),r=e("../routing"),o=e("../keys"),s=e("./view"),a=e("./powerbarView"),l=e("../../common/strings"),c=(e("./index"),e("./nameConfigView"),e("./fastRecordListView")),u=e("./sheetScrollView.js"),d=e("./flushData.js"),h=e("./fastReportRecordListView.js"),f=e("./recordListDragController"),p=e("./bookSubmodelView"),m=e("backbone"),g=e("handlebars-runtime"),v=e("url"),b=e("../models/record"),y=e("./formView"),w=e("./fastScrollConstants"),x=(w.virtualHeights,20),k=["add","hidden","block","editor"],S=p.extend({className:"sheet-detail",tinySpinnerOptions:{lines:8,radius:2,length:3,width:2},initialize:function(){return this.viewModel=this.options.viewModel,this.flushData=new d,this.recordListViews=[],this.listenTo(this.viewModel,"titleChanged",this.renderTitleDeferred),this.listenTo(this.viewModel,"sheetChanged",this.onSheetChanged),this.listenTo(this.viewModel,"queryResultsChanged",this.renderQueryResultsDeferred),this.listenTo(this.viewModel,"queryTextChanged",this.renderQueryResultsDeferred),this.listenTo(this.viewModel,"queryChanged",this.onQueryChange),this.listenTo(this.viewModel,"frozenFiltersChanged",this.onFrozenFiltersChanged),this.listenTo(this.viewModel,"groupsChanged",this.updateRecordListOrder),this.listenTo(this.viewModel,"load",this.renderDeferred),this.listenTo(this.viewModel,"fieldsChanged",this.renderGroupingMessage),this.listenTo(this.viewModel,"renderFields",this.renderFields),this.listenTo(this.viewModel,"descriptionChanged",this.renderDescription),this.listenTo(this.viewModel,"collapseChanged",this.renderDescription),this.listenTo(r.router,"route:book route:sheet",this.onRoute),this.listenTo(this,"resetTables",this.resetFastTablesDeferred),this.listenTo(this,"resetQuery",this.resetQuery),this},onFrozenFiltersChanged:function(){var e=this.$frozenFiltersSmokescreen;if(!this.viewModel.frozenFilters)return void e.width(0);var t=this.$searchBox.bounds();e.css({width:0}),e.find(".description-container").css({width:t.width}),e.show(),e.height(),e.width("100%")},resetQuery:function(){this.viewModel.updateQueryResults(),this.resetFastTablesDeferred()},renderFields:function(){this.recordListViews&&this.resetFastTablesDeferred()},resetFastTables:function(){this.saveSelectionPosition(),this.clearView(),this.renderTables()},getSheet:function(){return this.viewModel.sheet},renderSavedSearchQuery:function(){this.powerbarView&&this.powerbarView.renderSavedSearchQuery()},updateRecordListOrder:function(){this.renderTablesDeferred()},remove:function(){this.recordListViews&&n._getUnderscore(this.recordListViews).each(_.bind(this.removeRecordListView,this)),this.powerbarView&&this.powerbarView.remove(),this.fastScrollView&&this.fastScrollView.remove(),n._getUnderscore(this).soakCall("formView.remove"),$(window).unbindViewEvents(this),s.prototype.remove.apply(this,arguments)},onRoute:function(){this.renderPageTitle()},onDidShowSheet:function(){this.bookView().submodelView===this&&(this.scrollFromUrl(),this.queryFromUrlDeferred())},renderPageTitle:function(){"sheet"===r.observer.currentRoute.name&&(document.title=this.viewModel.title())},renderTitle:function(){this.trigger("needsBookToolbarRender")},renderTextWrap:function(){var e=this.$(".table-container");this.viewModel.sheet.get("wrapText")?e.addClass("wrapped"):e.removeClass("wrapped")},onCellRender:function(e,t){t.removeHighlight(),this.viewModel.query&&this.viewModel.query.termsForKey(e.key).forEach(function(e){t.highlight(e)})},clearView:function(){this.clearTables(),this.clearForm()},clearForm:function(){this.formView&&(this.formView.remove(),this.formView=null)},clearTables:function(){this.undelegateViews(),_.each(this.recordListViews,_.bind(this.stopListening,this)),_.invoke(this.recordListViews,"remove"),this.recordListViews=[]},saveSelectionPosition:function(){var e,t=this;if(!this.restoreSelectionFunction&&this.recordListViews&&0!==this.recordListViews.length){var i,r,o=n._getUnderscore(this.recordListViews).find(function(t,n){return e=n,t.hasSelection()});o&&(i=o.getAnchorInfo(),r=o.getDiagonalInfo(),this.restoreSelectionFunction=function(){n._getUnderscore(t.recordListViews).soak(e+".selectRegionByInfo",i,r)})}},restoreSelectionPosition:function(){this.restoreSelectionFunction&&(this.restoreSelectionFunction(),this.restoreSelectionFunction=null)},renderAppendGroupControl:function(){this.viewModel.showGroupInsertActions()?this.$el.addClass("enable-insert-block"):this.$el.removeClass("enable-insert-block")},renderSortableGroupContainer:function(){if(!this.viewModel.allowGroupsSortable()){var e=this.$(".table-container");return void(e.hasClass("ui-sortable")&&e.sortable("destroy"))}this.updateFastGroupSort()},renderColumnsAndRows:function(){_.invoke(this.recordListViews,"renderColumnsAndRows")},onRenderedTitles:function(){this.groupSortController&&(this.groupSortController.dragging||this.updateFastGroupSortDeferred())},updateFastGroupSort:function(){var e=this;this.groupSortController&&this.groupSortController.remove();var t=this.viewModel.allowGroupsSortable();this.$(".fast-scroll-container").safeToggleClass("group-draggable",t),t&&(this.groupSortController=new f({view:this,scrollView:this.fastScrollView,onDrop:function(t,n){e.onNextTick(function(){this.captureActions(function(){var e=this.viewModel.recordLists();this.viewModel.moveGroup(e[t],n)})})}}),this.groupSortController.setUpDrag(this.$el))},disableGroupSort:function(){this.groupSortController&&(this.groupSortController.remove(),this.groupSortController=null)},findOrCreateRecordListView:function(e,t,n){var i=n||_.noop,r=_.find(this.recordListViews,function(t){return t.model===e}),o=!r;return r||(r=this.createRecordListView(e,t)),i(r,o),r},createRecordListView:function(e,t){var n,i={model:e,parent:this,numberOfShownTitles:e.numberOfShownTitles(t),flushData:this.flushData};_.extend(i,{scrollParent:this.$el.find(".table-container")}),n=c,"report"===e.type&&(n=h);var r=new n(i);return this.delegateEventsFromElement(r.floatingDropdown,this.events),r},updateSelections:function(e){n._getUnderscore(this.recordListViews).without(e).each(function(e){e.removeSelection()})},removeRecordListView:function(e){e&&(e.remove(),this.undelegateViews(e),this.stopListening(e),this.recordListViews=_.without(this.recordListViews,e))},renderGroupingMessage:function(){var e=this.viewModel.groupFields(),t=this.$(".grouping-message");if(_.isEmpty(e))return void t.hide();var n=_.map(e,function(e){var t=e.displayName();return{name:t,isEnum:e.isEnum(),key:e.get("key"),showRemove:!e.hasValidation("picklist")}}),i=_.filter(n,function(e){return e.isEnum});t.html(s.partials.groupingMessage({fields:n,anyCustomOrder:i.length>0,customOrderFields:i})),t.show()},onQueryChange:function(){this.fastScrollView&&this.fastScrollView.scrollTo(0,0),this.trigger("navShouldUpdate"),this.updateQueryUrlDeferred()},renderQueryResults:function(){this.viewModel.recordLists();return this.powerbarView&&this.powerbarView.renderSaveSearchButton(),this.renderTablesDeferred()},deselectAllLists:function(){_.invoke(this.recordListViews,"deselect")},pendingChangesForRecords:function(e,t,n,i){var r=[];return _.each(e,function(e){e.isEmptyRow||(n&&-1!==n.getIndexForRecord(e)?t&&t.getIndexForRecord(e)!==n.getIndexForRecord(e)&&r.push({record:e,action:"sort"}):r.push(_.contains(i,e)?{record:e,action:"sort"}:{record:e,action:"remove"}))}),r},hasPendingRecords:function(){return this.recordListViews&&_.any(this.recordListViews,function(e){return e.hasPendingRecords()})},autocompleteHeight:function(){var e=this.$(".autocomplete");return e.is(":visible")?e.outerHeight()+x:0},basicTableContainerTop:function(){var e=this.$(".sheet-toolbar"),t=e.offset(),n=this.$el.offset();return t.top+e.outerHeight()-n.top+x},updateTableContainerPosition:function(){var e=this.basicTableContainerTop(),t=this.autocompleteHeight(),i=e+t,r=this.$(".table-container");if(r.css({top:i}),r.data("last-rendered-top")!==e&&0===t){r.data("last-rendered-top",e);var o=_.filter(this.recordListViews,function(e){return n._getUnderscore(e).soak("model.absolute")});_.invoke(o,"render")}},renderTables:function(){this.renderTipsAndTables()},renderTipsAndTables:function(){if(!this.viewModel.needsFetch()){var e=this.$el.parent().scrollTop(),t=this.$(".table-container");if(0===t.length)return void this.render();this.saveSelectionPosition(),this.updateTableContainerPosition(),this.sizeScrollView();var i,r=this.viewModel.recordLists(),o=this,s=_.map(r,function(e){var t=o.findOrCreateRecordListView(e,i);return i=e,t}),a=n._getUnderscore(this.recordListViews).without(s);this.recordListViews=s;var l=n._getUnderscore(r).chain().pluck("sortable").all().value();this.fastScrollView?(this.fastScrollView.setSortable(l),this.fastScrollView.setViews(this.recordListViews),this.fastScrollView.setNeedsRenderContent()):(this.fastScrollView=new u({sortable:l}),this.fastScrollView.setViews(this.recordListViews),this.$(".fast-scroll-container").append(this.fastScrollView.el),this.listenTo(this.fastScrollView,"scrollRender",this.onScrollRender),this.listenTo(this.fastScrollView,"fastScroll",this.updateScrollURLDeferred),this.scrollFromUrl(),this.fastScrollView.render()),n._getUnderscore(a).each(function(e){o.stopListening(e)}),this.listenToViews(s),this.renderAppendGroupControl(),this.renderSortableGroupContainer(),this.$el.parent().scrollTop(e),_.invoke(this.recordListViews,"updatePosition"),this.positionForAutocomplete(),this.renderGroupingMessage(),this.restoreSelectionPosition(),this.renderHighlights(),this.displayTip()}},listenToViews:function(e){_.each(e,function(e){this.stopListening(e),this.listenTo(e,"selectionChanged",function(t,n){this.onSelectionChanged(e,t,n)}),this.listenTo(e,"reflow",this.fieldsAdded),this.listenTo(e,"resetTables",this.resetFastTablesDeferred),this.listenTo(e,"renderedTitles",this.onRenderedTitles),this.listenTo(e,"beginEditingTitle",this.disableGroupSort),this.listenTo(e,"endEditingTitle",this.updateFastGroupSort),this.listenTo(e,"startDrag",this.pauseQueryUpdates),this.listenTo(e,"stopDrag",this.resumeQueryUpdatesDeferred)}.bind(this))},pauseQueryUpdates:function(){this.viewModel.pauseQueryUpdates()},resumeQueryUpdates:function(){this.viewModel.resumeQueryUpdates()},onSelectionChanged:function(e,t,n){this.trigger("selectionChanged",t,n)},renderHighlights:function(){if(this.$el.removeHighlight(),this.viewModel.query){var e=this;this.$el.find(".record td.data").each(function(){var t=$(this),n=t.data("column");n&&_.each(e.viewModel.query.termsForKey(n.key),function(e){t.highlight(e)})})}},context:function(){return this.viewModel.toContext()},undelegateViews:function(e){e=e||this.recordListViews,_.isArray(e)||(e=[e]);var t=this;n._getUnderscore(e).each(function(e){t.undelegateEventsFromElement(e.floatingDropdown)})},renderSheet:function(){this.recordListViews&&(this.undelegateViews(),n._getUnderscore(this.recordListViews).invoke("remove")),this.$el.addClass("fast-sheet"),this.$el.html(s.templates.sheet(this.context())),this.renderPowerbar(),this.renderTitle(),this.renderTextWrap(),this.renderTables()},renderForm:function(){var e=this.viewModel.navItem();if(!e||"form"!==e.get("type"))throw new Error("Called render on non-form nav item");n._getUnderscore(this).soak("formView.navItem")===e?this.formView.renderAndPreserveStateDeferred():(this.clearView(),this.formView=new y({navItem:e}),this.$el.append(this.formView.el),this.formView.render())},renderPowerbar:function(){this.powerbarView&&this.stopListening(this.powerbarView),this.powerbarView||(this.powerbarView=new a({viewModel:this.viewModel,el:this.$el.find(".powerbar")})),this.powerbarView.render(),this.queryFromUrl()},render:Tips.displayAfter(function(){if(this.viewModel.needsFetch())return this.viewModel.load();var e=this.viewModel.navItem(),t=e&&"form"===e.get("type");t?(this.renderForm(),this.$el.css("overflow","auto")):(this.saveSelectionPosition(),this.clearView(),this.renderSheet(),this.restoreSelectionPosition(),this.$el.css("overflow","hidden"),this.$(".table-container").css("overflow","auto"));var n=this.bookView();n&&!this.isListeningToBookView&&(this.isListeningToBookView=!0,this.listenTo(n,"didShowSheet",this.onDidShowSheet))}),onGroupMoved:function(e,t){var n=this;n.captureActions(function(){var e=n.$(".record-list").get(),i=e.map(function(e){return $(e).data("view").model}),r=$(t.item[0]).data("view").model,o=_.indexOf(i,r);n.viewModel.moveGroup(r,o,{error:n.errorHandler("reorder-group")})})},updateScrollURL:function(){if(this.fastScrollView){var e,t=Math.round(this.fastScrollView.scrollY),i=m.history.getFragment();if(e=t?"#"+t:"/"+i,n.isSafari){var r="/sheets/"+this.viewModel.sheet.id;return void(S.urlMap[r]=r+(t?"#"+t:""))}n.history.replaceState(null,null,e),this.updateUrlMap()}},updateUrlMap:function(){var e=m.history.getFragment();if(S.urlMap[window.location.pathname]="/"+n._getUnderscore([e,m.history.getHash()]).compact().join("#"),/books/.test(e)){var t="/sheets/"+this.viewModel.sheet.id,i=v.parse(t,!0),r=this.viewModel.queryString();r&&(i.query.query=r);var o=v.format(i).replace(/%20/g,"+");o=n._getUnderscore([o,m.history.getHash()]).compact().join("#"),S.urlMap[t]=o}},updateQueryUrl:function(){var e=window.location.href,t=v.parse(e,!0);this.viewModel.canSaveSearch()?(t.query||(t.query={}),t.query.query=this.viewModel.queryString()):t.query&&delete t.query.query,t.search=null;var i=v.format(t);i=i.replace(/%20/g,"+"),n.history.replaceState(null,null,i),this.updateUrlMap()},scrollFromUrl:function(){if(this.fastScrollView){var e=Number(m.history.getHash());this.fastScrollView.scrollTo(null,e)}},queryFromUrl:function(){var e=window.location.href,t=v.parse(e,!0).query;t&&t.query&&this.powerbarView&&this.powerbarView.setQueryAndRender(t.query)},sizeScrollView:function(){n._getUnderscore(this).soak("fastScrollView.sizeToWindow()")},setDescriptionMode:function(e){var t=this.$descriptionGroup();n._getUnderscore(k).each(function(e){t.removeClass("description-"+e)}),t.addClass("description-"+e),this.fastScrollView&&this.fastScrollView.viewResized()},$descriptionGroup:function(){var e=$(".book-toolbar .description-group");return e.length>0?e:($(".book-toolbar").append('<div class="description-group"></div>'),$(".book-toolbar .description-group"))},getDescriptionMode:function(){var e=this.$descriptionGroup(),t=n._getUnderscore(k).find(function(t){return e.hasClass("description-"+t)});return t?t:"unknown"},$description:function(){return this.$descriptionGroup().find(".sheet-description")},startEditingDescription:function(){if(!this.viewModel.isMetadataLocked()&&"editor"!==this.getDescriptionMode()){var e=this;this.setDescriptionMode("editor");var t=this.$description();t.replaceWith(s.partials.descriptionEditor(this.viewModel.getDescriptionConfig()));var n=this.$description();n.textareaAutoSize({minHeight:44}),n.on(this.namespacedEventName("autosizeChanged"),function(){e.fastScrollView&&e.fastScrollView.viewResized()}),n.focus(),n.select(),this.fastScrollView&&this.fastScrollView.viewResized()}},scrollBy:function(e,t){this.fastScrollView&&this.fastScrollView.scrollBy(e,t)},events:{"click a":"onLinkClicked","click .resume-filters":function(){this.viewModel.resumeFilters()},"click .remove-custom-order":function(e){var t=this;t.captureActions(function(){var n=$(e.target).closest(".remove-custom-order").data("key");t.viewModel.removeCustomOrder(n,{error:t.errorHandler("reorder-group")})})},"click .ungroup":function(e){this.captureActions(function(){var t=$(e.target).closest(".ungroup").data("key");this.viewModel.ungroup(t)})},"click .description-action":function(e){var t=this.getDescriptionMode();return e.preventDefault(),"editor"!==t?"add"===t?void this.startEditingDescription():void this.captureActions(function(){var e="block"===t?!0:!1;this.viewModel.saveCollapseStatus(e,{error:this.errorHandler("update-collapse")})}):void 0},"click .insert-group-button":function(e){this.viewModel.showGroupInsertActions()&&this.captureActions(function(){var t,n=$(e.target).closest(".insert-group-block"),i=this,r=n.closest(".fast-record-list").view();t=this.recordListViews.indexOf(r),n.is(".append-group")&&t++;var o=this.viewModel.insertGroup(t,{error:this.errorHandler("insert-group")});this.fastScrollView.onNextRender(function(){i.recordListViews[o].$(".record-list-title .editable-title").focus()})})},"click .search-field":function(e){e.preventDefault();var t=$(e.target).closest(".search-field"),n=this.viewModel.fieldWithKey(t.data("key")),i=_.soak(this.viewModel,"query.stringify()")||"",r=n.slug()+":";i.length>0&&" "!==i.slice(-1)&&(r=" "+r),this.viewModel.setQueryText(i+r),$(".chit-well").view().render();var o=$(".chit:not(:empty):last");o.focus(),o.view().setCursorPosition("end")},"click .search-cell-value":function(e){this.captureActions(function(){e.preventDefault();var t=$(e.target).closest(".search-cell-value"),n=i.Record.find(t.data("id")),r=n.getDisplayValue(t.data("key"));this.viewModel.addKeyword(r.toLowerCase())})},"click .filter-cell-value":function(e){this.captureActions(function(){e.preventDefault();var t=$(e.target).closest(".filter-cell-value"),n=i.Record.find(t.data("id")),r=n.getDisplayValue(t.data("key"));this.viewModel.addFilter(t.data("key"),r)})},"click .report-on-field":function(e){this.captureActions(function(){e.preventDefault();var t=$(e.target).closest(".report-on-field").data("key");this.viewModel.reportOn(t)})},"click .sort-field":function(e){this.captureActions(function(){e.preventDefault();var t=$(e.target).closest(".sort-field");t.is(".disabled")||this.viewModel.sortField(t.data("key"),t.data("sortDirection"))})},"click .group-field":function(e){this.captureActions(function(){e.preventDefault();var t=$(e.target).closest(".group-field");t.is(".disabled")||this.viewModel.groupBy(t.data("key"))})},"autocomplete:change":function(){this.onNextTick(this.positionForAutocomplete)},"click .configure-name:not(.disabled)":function(e){e.preventDefault(),this.showNameConfig()},"dblclick tr > td.name-col":function(){if(!this.viewModel.sheet.hasIntegration()){var e=this.viewModel.sheet.get("nameFieldMode");"single"!==e&&this.showNameConfig()}},"click .unhide-field":"unhideField"},showNameConfig:function(){this.recordListViews[0].showNameConfig()},beginEditingTitle:function(){var e=this.bookView().$(".sheet-title");e.get(0).focus(),e.selectText()},captureLink:function(e,t){/^\/records\//.test(t)&&(r.router.flash({recordIterator:this.viewModel.recordIterator()}),t=this.makeRecordIteratorUrl(t)),s.prototype.captureLink.call(this,e,t)},makeRecordIteratorUrl:function(e){var t=v.parse(e,!0);t.search=null;var n=_.findKey(r.router.routes,function(e){return"record"===e});n=r.router._routeToRegExp(n);var i;try{var o=t.pathname.slice(1);i=r.router._extractParameters(n,o)}catch(s){return e}var a=i[0],l=b.find(a);if(l.sheet()!==this.viewModel.sheet)return e;var c=t.query||{},u=this.viewModel.queryString();u&&this.viewModel.canSaveSearch()&&(c.query=u),this.viewModel.navKey&&(c.nav=this.viewModel.navKey),t.query=c;var d=v.format(t);return d.replace(/%20/g,"+")},onClickGroupOption:function(e){var t=e.get("key");this.captureActions(function(){this.viewModel.groupBy(t)})},onClickSortOption:function(e){var t=e.get("key");this.captureActions(function(){this.viewModel.toggleSortField(t)})},unhideField:function(e,t){this.bookView().unhideField(e,t)},onSheetChanged:function(){this.renderTextWrapDeferred()},onFlash:function(e){e.editSheetTitle&&this.onNextTick(this.beginEditingTitle),e.configName&&this.listenToOnce(this,"transition-done",this.showNameConfig),e.query&&this.viewModel.setQueryText(e.query)},pauseRender:function(){this.fastScrollView&&this.fastScrollView.pauseRenderLoop()},unpauseRender:function(){this.fastScrollView&&this.fastScrollView.unpauseRenderLoop()},onScrollRender:function(){n._getUnderscore(this).soak("groupSortController.dragging")||this.updateFastGroupSort()},setFieldToEditTitle:function(e){this.fieldToEditTitle=e},getFieldToEditTitle:function(){return this.fieldToEditTitle},positionForAutocomplete:function(){this.updateTableContainerPosition();var e=this.autocompleteHeight(),t=this.$(".sheet-toolbar");t.css("margin-bottom",e),this.sizeScrollView()},canLink:function(){return!this.viewModel.hasReportQuery()},noLinkReasonKey:function(){return this.viewModel.hasReportQuery()?"no-link-reason-report":p.prototype.noLinkReasonKey.apply(this,arguments)},toolbarTitle:function(){return{parent:this.viewModel.title()}},renderToolbarTitle:function(e,t){var n=t.find(".title-part:first-child");n.addClass("sheet-title"),n.attr("contenteditable",!this.viewModel.isMetadataLocked()),n.addClass("with-placeholder"),n.attr("placeholder",this.getSheet().placeholderTitle()),document.title=this.viewModel.title(),this.delegateEventsFromElement(t.parent(),this.toolbarEvents),this.renderDescription()},renderDescription:function(){var e=$(".book-toolbar"),t=e.find(".sheet-title");e.find(".sheet-description-control, .description-group").remove();var n=this.viewModel.getDescriptionConfig();n.metadataLocked=this.viewModel.isMetadataLocked(),n.hasDescription=!0,"add"===n.expandType&&(n.hasDescription=!1),t.after(s.partials.sheetDescriptionIcon(n)),e.append(s.partials.sheetDescription(n)),this.fastScrollView&&this.fastScrollView.viewResized(),e.find(".sheet-description-control").tooltip({title:l["description-tooltip-"+n.expandType](),container:"body",placement:"right"})},$sheetTitle:function(){return $(".book-toolbar .sheet-title")},toolbarEvents:{"focus .sheet-title":function(){this.onNextTick(function(){var e=this.$sheetTitle();e.removeClass("name-placeholder"),e.text(this.viewModel.editableTitleText()),e.selectText()})},"click .sheet-description-control":function(){var e=this.getDescriptionMode();if("add"===e)return void this.startEditingDescription();var t=!1;"hidden"===e&&(t=!0),this.captureActions(function(){this.viewModel.saveCollapseStatus(!t,{error:this.errorHandler("update-collapse")})})},"blur textarea.sheet-description":function(e,t){t.is("textarea")&&this.captureActions(function(){t.unbindViewEvents(this);var e=this.$description(),n=e.val();this.viewModel.saveDescription(n,{error:this.errorHandler("update-description")}),this.renderDescription()})},"click .sheet-description":function(e){$(e.target).is("a")||this.startEditingDescription()},"keydown .sheet-title":function(e){var t=$(e.target);e.which===o.COMMAND?e.stopPropagation():e.which===o.RETURN&&(e.stopPropagation(),t.blur())},"blur .sheet-title":function(e,t){this.captureActions(function(){var e=t.text().trim();this.viewModel.saveTitle(e,{error:this.errorHandler("update-title")}),this.renderTitle(),this.hideTip()})},"click .close-action":function(){this.captureActions(function(){this.viewModel.saveCollapseStatus(!0,{error:this.errorHandler("update-collapse")})})}}}).addGetters({$frozenFiltersSmokescreen:["$",".frozen-filters-smokescreen"],$searchBox:["$",".search-container"]});S.urlMap={},S.mapUrl=function(e){return e===window.location.pathname?e:S.urlMap[e]||e},isMobile||g.registerHelper("sheetUrl",function(e){return S.mapUrl(e)}),S.deferrableRendering(),S.deferrable("resetFastTables"),S.deferrable("updateFastGroupSort"),S.deferrable("resumeQueryUpdates"),S.deferrable("updateScrollURL"),S.deferrable("scrollFromUrl"),S.deferrable("queryFromUrl"),S.deferrable("updateQueryUrl"),dev.add("sheetView",function(){return S.displayedView()}),dev.add("sheetViewModel",function(){return n._getUnderscore(dev).soak("sheetView.viewModel")}),dev.add("sheet",function(){return dev.sheetViewModel.sheet}),dev.add("recordLists",function(){return dev.sheetViewModel.recordLists()}),dev.add("recordList",function(){return dev.recordLists[0]}),dev.add("recordListView",function(){return dev.sheetView.recordListViews[0].view}),dev.add("records",function(){return dev.sheet.get("records")}),t.exports=S}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/strings":249,"../keys":25,"../models":47,"../models/record":61,"../routing":76,"./bookSubmodelView":128,"./fastRecordListView":164,"./fastReportRecordListView.js":168,"./fastScrollConstants":169,"./flushData.js":179,"./formView":181,"./index":188,"./nameConfigView":204,"./powerbarView":212,"./recordListDragController":214,"./sheetScrollView.js":221,"./view":236,backbone:"backbone","handlebars-runtime":"handlebars-runtime",url:744}],223:[function(e,t){(function(n){"use strict";{var i=e("./geometry"),r=e("../models/errorReport");t.exports=BaseObject.extend({propertyNames:function(){return["axes"]},initialize:function(){this.arrays={};var e=this;n._getUnderscore(this.axes).each(function(t){var i={capName:t.inflect("capitalize")},r=e.arrays[t]=[],o=function(e){return e.stencil(i)};e[o("find{{capName}}Parameter")]=function(t){return e.findParameter(r,t)},e[o("get{{capName}}")]=function(t){return e.getValue(r,t)},e[o("first{{capName}}")]=function(){return n._getUnderscore(r).first()},e[o("last{{capName}}")]=function(){return n._getUnderscore(r).last()}})},addPoint:function(){var e=this;_(arguments).each(function(t,i){var o=e.axes[i],s=e.arrays[o];if(n._getUnderscore(s).last()>=t){var a=new Error("Non-increasing {{name}} value".stencil({name:o}));r.reportSilently(a)}s.push(t)})},convert:function(e){var t=this;return{from:function(n){var i=t.arrays[n];return{to:function(n){var r=t.arrays[n],o=t.findParameter(i,e);return o===t.OUT_OF_BOUNDS?o:t.getValue(r,o)}}}}},findParameter:function(e,t){var i=n._getUnderscore(e).sortedIndex(t);if(0===i)return t===e[0]?i:this.OUT_OF_BOUNDS;if(i>=e.length)return this.OUT_OF_BOUNDS;i--;var r=e[i],o=e[i+1],s=o-r;return i+(t-r)/s},getValue:function(e,t){var n=Math.floor(t);if(t===this.OUT_OF_BOUNDS)return this.OUT_OF_BOUNDS;if(1===e.length)return 0===t?e[0]:this.OUT_OF_BOUNDS;var r=t-n,o=e[n],s=e[n+1],a=i.lerp(o,s,r);return _.isNaN(a)?this.OUT_OF_BOUNDS:a},OUT_OF_BOUNDS:{sentinel:"value out of bounds"}})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../models/errorReport":40,"./geometry":183}],224:[function(e,t){"use strict";{var n=e("./fastScrollableView");t.exports=n.superExtend(function(e){return{initialize:function(){e.initialize.apply(this,arguments),this.virtualHeight=this.options.virtualHeight,this.width=this.options.width,this.html=this.options.html},render:function(){this.$el.html(this.html)},getVirtualHeight:function(){return this.virtualHeight},getActualWidth:function(){return this.width},getSortDelegate:_.noop}})}},{"./fastScrollableView":171}],225:[function(e,t){"use strict";var n=e("../actions"),i=(e("../routing"),e("./view")),r=i.extend({className:"status-bar",fadeDuration:200,initialize:function(){this.message={},this.messageOptions={},this.render(),this.$el.hide(),this.listenTo(n.history,"do",this.hide),this.listenTo(n.history,"undo",this.hide),this.listenTo(n.history,"redo",this.hide),r.view=this},isShown:function(){return this.$el.is(":visible")},isHidden:function(){return!this.isShown()},render:function(){this.$el.html(i.templates.statusBar(this.message))},show:function(e){_.isString(e)&&(e={text:e}),this.message=e,this.render(),this.$el.fadeIn(this.fadeDuration)},hide:function(e){e=e||{},(!this.messageOptions.permanent||e.force)&&this.$el.fadeOut(this.fadeDuration)},events:{"click .text":function(){this.hide({force:this.messageOptions.clickToDismiss})},"click .undo":function(){this.undo()},"click .reload":function(){window.location.reload()}},setMessageOptions:function(e){this.messageOptions=_.defaults({},e,{clickToDismiss:!0})}});r.show=function(e,t){this.view&&(this.view.setMessageOptions(t),this.view.show(e))},r.hide=function(e){this.view&&this.view.hide(e)},t.exports=r},{"../actions":2,"../routing":76,"./view":236}],226:[function(e,t){(function(n){"use strict";var i=e("./view"),r=e("../models/template"),o=i.extend({className:"template-list",gatherTitleBarInfo:function(e){e.setMode("templates")},initialize:function(){this.listenTo(r.collection,"sync",this.render),this.render()},templateCategories:function(){var e=r.collection.toContext(),t=n._getUnderscore(e).chain().pluck("category").uniq().value(),i=n._getUnderscore(e).groupBy("category");return _.map(t,function(e){return{categoryTitle:e,templates:i[e]}})},render:function(){r.collection.fetchIfNeeded();var e={categories:this.templateCategories()};this.$el.html(i.partials.templateList(e))}});t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../models/template":68,"./view":236}],227:[function(e,t){"use strict";var n=e("./view"),i=(e("../models/template"),e("../models/book")),r=e("../routing"),o=e("./colorboxify"),s=n.extend({className:"template-detail",initialize:function(){this.model=this.options.model,this.listenTo(this.model,"change",this.render),this.render()},gatherTitleBarInfo:function(e){e.setMode("templates")},context:function(){return this.model.toContext()},render:function(){this.model.fetchIfNeeded(),this.$el.html(n.templates.templateDetail(this.context())),o(this.$(".screenshot-link"),{innerWidth:1080,innerHeight:720})},events:{"click .use-template":function(e){var t=this,n=$(e.target).closest(".use-template");n.blur(),this.addSpinner(n,this.greyButtonSpinnerOptions),i.collection.create({templateSlug:this.model.get("slug")},{wait:!0,success:function(e){t.stopSpinning(n),t.goToNewBook(e)},error:this.errorHandler({action:"create-book",spinner:n})})}},goToNewBook:function(e){var t={id:e.id};e.has("template")&&(t.template={_id:e.get("template").id}),mixpanel.track("new_book",t),r.router.goToBook(e.id)}});t.exports=s
},{"../models/book":31,"../models/template":68,"../routing":76,"./colorboxify":140,"./view":236}],228:[function(e){"use strict";function t(e,t,i){var r=t.css("min-height");t.css("min-height","");var o=t.computedStyle(),s=n("<div>").css(_.pick(o,"minHeight","width","font","whiteSpace","lineHeight","margin","padding","boxSizing","borderRadius","border","wordWrap","-webkit-appearance")),a=t.val()+" ";i.padChars&&(a+=i.padChars),s.text(a),n("body").append(s);var l=s.height();"border-box"===o.boxSizing&&(l=s.outerHeight()),i.maxHeight&&(l=Math.min(l,i.maxHeight)),s.remove();var c=l;i.minHeight&&c<i.minHeight&&(c=i.minHeight),t.css("min-height",c),r!==c&&t.trigger("autosizeChanged")}var n=e("jquery");_(n.fn).extend({textareaAutoSize:function(e){e=e||{};var i=n(this);return i.data("textareaAutoSize")?void i.data("resize")():(i.data("textareaAutoSize",!0),i.data("resize",function(){t(null,i,e)}),i.on("input",function(n){t(n,i,e)}),i.on("focus",function(n){t(n,i,e)}),void t(null,i,e))}})},{jquery:"jquery"}],229:[function(e,t){"use strict";function n(e,t,n){this.xAnchor=e,this.yAnchor=t,this.points=_.deepClone(n)}var i="hsl(45, 100%, 57%)",r="hsl(45, 100%, 47%)",o=16,s={x:1,y:2,blur:8,color:"rgba(0,0,0,0.3)"};_.extend(n.prototype,{adjustedShape:function(e,t){var i=this,r=new n(null,null,this.points);return r.points.forEach(function(n){"right"===i.xAnchor&&(n[0]=e-n[0]),"bottom"===i.yAnchor&&(n[1]=t-n[1])}),r},getBounds:function(){var e=1/0,t=1/0,n=-1/0,i=-1/0;return this.points.forEach(function(r){e=Math.min(r[0],e),t=Math.min(r[1],t),n=Math.max(r[0],n),i=Math.max(r[1],i)}),{left:e,right:n,top:t,bottom:i}}});var a={top:new n("left","top",[[16,-40],[16,0],[32,0]]),"top-right":new n("right","top",[[16,-40],[16,0],[32,0]]),bottom:new n("left","bottom",[[16,-40],[16,0],[32,0]]),"bottom-right":new n("right","bottom",[[16,-40],[16,0],[32,0]]),"bottom-left":new n("left","bottom",[[16,-25],[16,0],[32,0]]),left:new n("left","bottom",[[-40,18],[0,35],[0,14]])};t.exports=function(e,t,n){var l=a[n],c={top:0,left:0,right:e,bottom:t};if(l){l=l.adjustedShape(e,t);var u=l.getBounds();c={top:Math.min(c.top,u.top),left:Math.min(c.left,u.left),bottom:Math.max(c.bottom,u.bottom),right:Math.max(c.right,u.right)}}var d,h=s.blur,f={x:-c.left+h-s.x,y:-c.top+h-s.y};if(l){var p=l.points[0];d={left:-p[0],top:-p[1]}}else d={left:0,top:0};var m,g,v=window.devicePixelRatio||1;m=c.right-c.left+2*h,g=c.bottom-c.top+2*h;var b=$("<canvas>").prop({width:m*v,height:g*v}).css({left:-f.x,top:-f.y,width:m,height:g}),y=b[0].getContext("2d");y.scale(v,v),y.translate(f.x,f.y),y.beginPath(),y.moveTo(o,0),y.arcTo(e,0,e,t,o),y.arcTo(e,t,0,t,o),y.arcTo(0,t,0,0,o),y.arcTo(0,0,e,0,o),l&&(y.moveTo.apply(y,_.last(l.points)),l.points.forEach(function(e){y.lineTo.apply(y,e)})),y.closePath();var w=y.createLinearGradient(0,0,0,t);return w.addColorStop(0,i),w.addColorStop(1,r),y.fillStyle=w,y.shadowOffsetX=s.x,y.shadowOffsetY=s.y,y.shadowBlur=s.blur,y.shadowColor=s.color,y.fill(),$("<div>").addClass("tip-background").css(d).append(b)}},{}],230:[function(e,t){(function(n){"use strict";var i=e("backbone"),r=e("./view"),o=e("./index"),s=e("../models"),a=e("../viewModels/tips/tip"),l=e("../routing").router,c=e("./tipBackground");e("../viewModels/tips");var u=e("../globalEvents"),d=1500,h=_.clone(i.Events);_.extend(h,{checkStable:function(){s.outstandingRequests||o.deferredActions||this.trigger("stable")},onceStable:function(e){s.outstandingRequests||o.deferredActions?this.once("stable",e):e()}}),h.listenTo(u,"noDeferredActions noOutstandingRequests",h.checkStable);var f=!1,p=r.extend({className:"tip-box",initialize:function(){this.content=this.options.content,this.element=this.options.element,this.pointerLocation=this.options.pointerLocation,this.dismiss=this.dismiss.bind(this)},render:function(){this.contentEl=$("<div>").addClass("tip-content").html(this.content),$("body").append(this.$el),this.place(),this.element&&this.element.addClass("tip-target"),this.scroll=_.throttle(this.place.bind(this),100);var e;e=Tips.help.Entry.currentEntry?1:1500,_.delay(function(){$("body").one("click mousedown",this.dismiss)}.bind(this),e),$("body").on("scroll mousewheel keydown",this.scroll)},dismiss:function(){p.currentTipView=null,this.element&&this.element.removeClass("tip-target"),this.$el.fadeOut(200,function(){this.remove()}.bind(this)),$("body").off(null,this.dismiss),$("body").off(null,this.scroll)},place:function(){if(this.element){if(!this.element.closest("body").length)return void this.dismiss();this.$el.addClass("has-pointer");var e=["left","top","top-right","bottom","bottom-right","bottom-left"];e=_.without(e,this.pointerLocation);var t=this.element[0].getBoundingClientRect(),n={top:{left:(t.right+t.left)/2,top:t.bottom},"top-right":{left:(t.right+t.left)/2,top:t.bottom},bottom:{left:(t.right+t.left)/2,top:t.top},left:{left:t.right,top:(t.top+t.bottom)/2},"bottom-right":{left:(t.right+t.left)/2,top:t.top},"bottom-left":{left:(t.right+t.left)/3,top:t.top}};e.unshift(this.pointerLocation);var i=function(e){return e.top>=0&&e.left>=0&&e.right<=window.innerWidth&&e.bottom<=window.innerHeight},r=this;e.every(function(e){r.adjustedPointerLocation=e,r.$el.offset(n[e]),r.$(".tip-background").remove(),r.addBackground(),r.$(".tip-background").append(r.contentEl),r.$el.appendTo("body");var t=r.$("canvas")[0].getBoundingClientRect();return!i(t)})}else this.$(".tip-background").remove(),this.addBackground(),this.$(".tip-background").append(this.contentEl)},addBackground:function(){this.contentEl.appendTo("body");var e=this.contentEl.outerWidth(!0),t=this.contentEl.outerHeight(!0);this.contentEl.detach();var n=c(e,t,this.adjustedPointerLocation);this.$el.append(n)}});p.create=function(e){return new p({content:e.content(),element:_.soak(e,"findElement()"),pointerLocation:e.pointerLocation})};var m=0;document.addEventListener("keydown",function(){m=Date.now()},!0),p.display=function(t){h.onceStable(function(){var n=e("../viewModels/help/help");if(n.Entry.currentEntry)return void n.Entry.currentEntry.showNext();var i=Date.now()-m;if(d>i)return void _.delay(p.display,d-i,t);if(!p.currentTipView){var r=a.create(t);if(r){var o=p.create(r);p.currentTipView=o,f=!1,_.delay(function(){return $(":focus").length&&(f=!0),f?(r.unshow(),o.remove(),f=!1,void(p.currentTipView=null)):(o.render(),void o.$el.hide().fadeIn(200))},800)}}})},p.throttledDisplay=_.throttle(p.display,100,{trailing:!0}),p.showTip=function(e,t){if(p.currentTipView){if(!t)return;p.currentTipView.dismiss()}_.each($(".tip-box"),function(e){var t=$(e).data("view");t&&t.dismiss()});var n=p.create(e);n.render(),n.$el.hide().fadeIn(200),p.currentTipView=n},p.dismiss=function(){$(".tip-box").each(function(e){var t=$(e).view();t&&t.dismiss()})},p.displayAfter=function(e,t){return function(){var n=this,i=e.apply(n,arguments);return n.onNextTick(function(){p.throttledDisplay(t||this)}),i}};var g=Function.prototype;g.triggerTips=function(){return p.displayAfter(this)},p.currentAttachedElement=function(){return _.soak(p.currentTipView,"element")||$()},l.on("route",function(){p.currentTipView&&(f=!0,p.currentTipView.remove(),p.currentTipView=null)}),t.exports=p,n.Tips=p}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../globalEvents":22,"../models":47,"../routing":76,"../viewModels/help/help":93,"../viewModels/tips":114,"../viewModels/tips/tip":116,"./index":188,"./tipBackground":229,"./view":236,backbone:"backbone"}],231:[function(e,t){(function(n){"use strict";var i=e("../models"),r=e("./view"),o=e("../routing"),s=e("../errors"),a=e("../../common/strings"),l=(e("./eventListener"),e("../globalEvents")),c=e("../models/account"),u=e("./userSettingsView"),d=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/emailConfirmView"),h=r.extend({className:"title-bar",template:"titleBar",propertyNames:["template","parent"],initialize:function(){this.pickProperties(),this.parent&&this.setElement(this.parent.$(".title-bar")),this.info=new f({view:this}),this.user=i.Account.currentUser(),this.user&&this.listenTo(this.user,"change:organization organization:change change:emails",this.render),this.listenTo(o.router,"route",this.onRoute),this.listenTo(o.router,"deferredRoute",this.onRoute),this.listenTo(l,"updateNav",this.updateView),this.renderDeferred()},render:function(){this.rootView().gatherTitleBarInfo(this.info),this.$el.html(r.templates.titleBar(this.context())),Intercom("reattach_activator"),this.updateView()},updateView:function(){this.rootView().gatherTitleBarInfo(this.info);var e=this.context(),t=this.$el.contains(".read-only-info");Boolean(e.isReadOnlyMode)!==t&&this.render(),this.info.renderTitle(this,this.$(".section-title")),this.positionActiveIndicatorDeferred(),this.$(".account-menu-dropdown").safeToggleClass("hidden",!this.user),this.info.get("hideMainNav")?this.$(".main-nav-item").addClass("hidden"):this.$(".main-nav-item").removeClass("hidden")}.limitRecursion(2),positionActiveIndicator:function(){var e=this.$(this.info.navItemSelector()),t=this.$(".active-indicator");if(this.$(".nav-item").removeClass("active"),e.addClass("active"),0===e.length)t.css({display:"none"});else{var n=e.bounds();t.css({display:"block",top:n.bottom-2,left:n.x,width:n.width})}},rootView:function(){return o.router.root},onRoute:function(){this.setAccountMenuState({open:!1}),this.updateView()},context:function p(){var p={title:this.info.getModeTitle(),mode:this.info.mode};if(this.user){p.user=this.user.toContext();var e=this.user.get("organization");e&&(p.organization=e.toContext())}return this.info.transformContext(p)},setAccountMenuState:function(e){var t=this.$(".account-menu-dropdown");t.hasClass("open")!==e.open&&this.$(".account-menu-dropdown a").dropdown("toggle")},events:{"click .account-menu-dropdown":function(e,t){this.setAccountMenuState({open:!t.hasClass("open")})},"click .organization":function(){o.router.navigate("/organization",{trigger:!0})},"click .plan":function(){o.router.navigate("/plan",{trigger:!0})},"click .user-settings":function(){this.userSettingsView=new u({model:c.account}),this.userSettingsView.show()},"click .sign-out":function(e){e.preventDefault(),this.$(".hidden-logout-form").submit()},"click #intercom-button":function(){if(!window.Intercom.booted)throw new s.DisplayableError("error-intercom-not-loaded")},"click .account-notification-need-verify":function(){d.qShow({descriptionKey:"sharing"}).catch(function(e){if(null!=e)throw e}).done()}}});h.deferrable("positionActiveIndicator"),h.deferrableRendering();var f=h.TitleBarInfo=BaseObject.extend({className:"TitleBarInfo",propertyNames:["view"],modeDefaults:{book:{title:"",navItemSelector:".bookList-nav",hideMainNav:!0},bookList:{title:a["book-links-title"]()},importSync:{title:a["import-sync"]()},templates:{title:a.templates()},tutorials:{title:a.tutorials()},documentation:{title:a.documentation()},organization:{title:a.organization()},plan:{title:a.plan()},unknown:{title:""}},get:function(e){return this.modeInfo[e]},initialize:function(){this.resetMode("unknown")},navItemSelector:function(){return this.modeInfo.navItemSelector?this.modeInfo.navItemSelector:".{{mode}}-nav".stencil({mode:this.mode})},transformContext:function(e){return n._getUnderscore(this.modeInfo.contextTransforms).reduce(function(e,t){var n=t(e);return n?n:e},e)},addContextTransform:function(e){this.modeInfo.contextTransforms.push(e)},resetMode:function(e){this.mode=e,this.modeInfo=_.clone(this.modeDefaults[e]),this.modeInfo=_.defaults(this.modeInfo,{contextTransforms:[]})},getModeTitle:function(){return this.modeInfo.title},setMode:function(e){if(!(e in this.modeDefaults))throw new Error("Unknown titleBar mode: "+e);this.resetMode(e)},setTitle:function(e){this.modeInfo.title=e},setCustomTitleRender:function(e){this.modeInfo.customTitleRender=e},hasCustomTitle:function(){return!!this.modeInfo.customTitleRender},renderTitle:function(e,t){this.hasCustomTitle()?this.modeInfo.customTitleRender(e,t):t.text(this.getModeTitle())}});t.exports=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/strings":249,"../errors":9,"../globalEvents":22,"../models":47,"../models/account":27,"../routing":76,"./eventListener":157,"./userSettingsView":235,"./view":236,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/emailConfirmView":154}],232:[function(e,t){"use strict";{var n=(e("./view"),e("./modalView")),i=e("../tutorials/tutorial"),r=n;t.exports=r.extend({className:"tutorial-outro modal hide fade",template:"tutorialOutro",initialize:function(){this.tutorial=i.tutorialWithSlug(this.slug),r.prototype.initialize.apply(this,arguments)},render:r.prototype.render.after(function(){Tips.dismiss()}),context:function(){return this.tutorial.prototype.config}}).addProperties("slug")}},{"../tutorials/tutorial":84,"./modalView":203,"./view":236}],233:[function(e,t){"use strict";{var n=(e("./view"),e("./modalView")),i=e("../tutorials/tutorial"),r=n;t.exports=r.extend({className:"tutorial-intro modal hide fade",template:"tutorialIntro",initialize:function(){this.tutorial=i.tutorialWithSlug(this.slug),r.prototype.initialize.apply(this,arguments)},context:function(){return this.tutorial.prototype.config},onHidden:function(){r.prototype.onHidden.apply(this,arguments),i.startTutorialWithSlug(this.slug)}}).addProperties("slug")}},{"../tutorials/tutorial":84,"./modalView":203,"./view":236}],234:[function(e,t){"use strict";var n=e("./view");e("../tutorials/index");var i=e("../tutorials/tutorial"),r=e("../models/book"),o=e("../routing"),s=(e("./colorboxify"),n.extend({className:"tutorials",gatherTitleBarInfo:function(e){e.setMode("tutorials")},initialize:function(){this.listenTo(r.collection,"sync",this.render),r.collection.fetchIfNeeded(),this.render()},context:function(){var e=this,t={};return t.tutorials=i.entries.map(function(t){return t=t.prototype,{slug:t.slug,title:t.title,complete:e.hasCompleted(t.slug)}}),t},hasCompleted:function(e){return r.collection.any(function(t){return t.get("tutorialSlug")!==e?!1:t.get("tutorialComplete")})},render:function(){this.$el.html(n.templates.tutorials(this.context()))},goToNewBook:function(e){var t={id:e.id};e.has("tutorialSlug")&&(t.tutorialSlug={_id:e.get("tutorialSlug")}),mixpanel.track("new_book",t),o.router.goToBook(e.id)},events:{"click .tutorial":function(e,t){var n=t.data("slug"),i=this;r.collection.create({tutorialSlug:n},{wait:!0,success:function(e){i.goToNewBook(e)},error:this.errorHandler({action:"create-book"})})}}}));t.exports=s},{"../models/book":31,"../routing":76,"../tutorials/index":82,"../tutorials/tutorial":84,"./colorboxify":140,"./view":236}],235:[function(e,t){"use strict";{var n=(e("../../common/strings"),e("../models"),e("./view")),i=e("./modalView"),r=e("../globalEvents");t.exports=i.extend({className:"user-settings modal hide fade",template:n.templates.userSettings,initialize:i.prototype.initialize.after(function(){this.render()}),context:function(){return this.model.toContext()},events:{"click .done":"hide","change input":function(e,t){var n=t.attr("name"),i={};i[n]=t.attr("value"),this.model.saveIfNeeded(i,{patch:!0,error:this.errorHandler("update-locale"),complete:function(){r.trigger("locale-update")}})}}})}},{"../../common/strings":249,"../globalEvents":22,"../models":47,"./modalView":203,"./view":236}],236:[function(e,t){(function(n){"use strict";function i(){var e=[];a.fn.tooltipBase=a.fn.tooltip,a.fn.tooltip=function(t){var n=this,i=(null==n.data("tooltip"),n.tooltipBase(t)),r=i.data("tooltip");return r&&(!_.contains(e),r&&e.push(r)),i},_.extend(a.fn.tooltip,a.fn.tooltipBase);var t=new window.MutationObserver(function(){var t=e.filter(function(e){return!e.$element.hasClosest(document.documentElement)});e=_.difference(e,t),t.forEach(function(e){e.destroy()})});t.observe(document,{childList:!0,subtree:!0})}function r(e,t){var n=/Script error\.?/;if(n.test(t))return console.warn("Script error in third-party code (maybe a browser extension?)"),!0;var i=/Permission denied to access property/;if(i.test(t))return console.warn('"Permission denied" error; maybe from third-party code?'),!0;var r=/intercom/i,o=/ping/i;if(e&&r.test(e.stack)&&o.test(e.stack))return console.warn("Intercom ping failure"),!0;var s=/__gCrWeb/;return s.test(t)?(console.warn("__gCrWeb error (known harmless iOS Chrome issue)"),!0):!1}function o(e){var t=K[e];return t||(t=K[e]=_.throttle(q,1e3)),t}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=e("jquery");e("./jquery.fieldbook.js");var l=e("backbone"),c=e("handlebars-runtime");e("templates");var u=e("spin"),d=e("dropzone"),h=e("linkify"),f=e("../tipable"),p=e("../bubblable"),m=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/common/delayedTriggerable"),g=e("../../common/strings"),v=e("../trackJs"),b=e("../csrf"),y=e("../models"),w=e("../actions"),x=e("../routing"),k=e("../errors"),S=e("../keys"),C=e("../env"),E=e("./index"),I=e("../actionQueue"),R=e("../performance"),T=e("./fastScrollConstants"),A=e("../globalEvents"),M=e("../metrics"),F=e("moment"),V=e("crypto"),L=e("url"),O=(e("./geometry"),e("numeral"),e("util"));e("../gen/templates");var N=function(e){var t=e.requestSettings,n=["REQUEST "+t.headers["X-Request-ID"],t.type+" "+t.url,t.data,"","RESPONSE "+e.status+" "+e.statusText,e.getAllResponseHeaders(),e.responseText,"","CLIENT","User agent: "+navigator.userAgent,"App version: "+navigator.appVersion,"Platform: "+navigator.platform,"Vendor: "+navigator.vendor];return n.join("\n")};i(),a("body").on("mouseover",".dropdown-submenu",function(e){var t=a(e.target).closest(".dropdown-submenu"),n=t.find("ul.dropdown-menu");if(n.length){n.css({top:""});var i=window.innerHeight,r=.05,o=r*i,s=(1-r)*i,l=n.bounds();l.top<o?n.css("top",o-l.top):l.bottom>window.innerHeight&&n.css("top",s-l.bottom)}}),c.registerHelper("noop",_.constant("")),c.registerHelper("s",function(e,t){var i=n._getUnderscore(arguments).initial();t=n._getUnderscore(arguments).last();var r=i.join(""),o=g[r];if(!o)return"";var s=this;return _.isEmpty(t.hash)||(s=_.extend(t.hash,this)),o(s)}),c.registerHelper("icon",function(e){return new c.SafeString('<i class="icon icon-fb-{{classes}}"></i>'.stencil({classes:e}))}),c.registerHelper("icon-fa",function(e){return new c.SafeString('<i class="icon icon-{{classes}}"></i>'.stencil({classes:e}))}),c.registerHelper("csrfToken",function(){return b.token}),c.registerHelper("userImage",function(e){if(!e)return"";if(e.imageUrl)return e.imageUrl;var t=V.createHash("md5");return e.email&&(t=t.update(e.email)),"https://gravatar.com/avatar/{{md5}}?d=mm".stencil({md5:t.digest("hex")})});var $=function(e){var t=E.BookView,i=n._getUnderscore(t).soak("displayedView().model");if(!i)throw new Error("Cannot use access level helper without book");if("metadata"===e)return i.isMetadataLocked();if("editRow"===e)return i.isReadOnlyMode();throw new Error("Unknown access type: "+e)};c.registerHelper("ifAccess",function(e,t){var n=$(e);return n?t.inverse(this):t.fn(this)}),c.registerHelper("unlessAccess",function(e,t){var n=$(e);return n?t.fn(this):t.inverse(this)}),c.registerHelper("ifExists",function(e,t){return null!=e?t.fn(this):t.inverse(this)}),c.registerHelper("unlessExists",function(e,t){return null==e?t.fn(this):t.inverse(this)});var D=n._getUnderscore(["apt","bitcoin","file","finger","ftp","git","gopher","http","https","imap","ipp","ipps","irc","jabber","lastfm","mailto","mms","sftp","skype","sms","spotify","ssh","svn","teamspeak","tel","telnet","udp","view-source","vnc","xmpp"]).makeSet(),P=function(e){var t=e.indexOf(":"),n=e.slice(0,t);return!!D[n]};c.registerHelper("linkify",function(e){var t=c.Utils.escapeExpression(e);return new c.SafeString(h(t,{callback:function(e,t){return t?P(t)?'<a target="_blank" rel="noreferrer" href="'+t+'">'+e+"</a>":e:e}}))}),c.registerHelper("toggle",function(e,t){return e?t:void 0}),c.registerHelper("untoggle",function(e,t){return e?void 0:t}),c.registerHelper("toggleMatch",function(e,t,n){return e===t?n:void 0}),c.registerHelper("shortcut",function(e){var t=/^mac/i.test(window.navigator.platform),n=t?"cmd":"ctrl";return"{{modKey}} + {{key}}".stencil({modKey:n,key:e})}),c.registerHelper("logContext",function(){console.log("Handlebars Context:"),console.log(this)}),c.registerHelper("debugger",function(){}),c.registerHelper("truncate",g.truncate),c.registerHelper("join",function(e,t,n){return e?_.compactNullish(e.map(function(e){return n.fn(e)})).join(t):""}),c.registerHelper("ifMobile",function(e){return isMobile?e.fn(this):e.inverse(this)}),c.registerHelper("unlessMobile",function(e){return isMobile?e.inverse(this):e.fn(this)}),c.registerHelper("withData",function(e,t){var n="return ("+e+")",i=Function,r=new i(n);return t.fn(r.call(this))}),c.registerHelper("include",function(e){var t={},i=function(e){n._getUnderscore(t).extend(e)};return i(this),i(e.hash),e.fn(t)}),c.registerHelper("compare",function(e,t,n,i){var r,o;if(arguments.length<3)throw new Error("Handlerbars Helper 'compare' needs 2 parameters");if(void 0===i&&(i=n,n=t,t="==="),r={"===":function(e,t){return e===t},"!==":function(e,t){return e!==t},"<":function(e,t){return t>e},">":function(e,t){return e>t},"<=":function(e,t){return t>=e},">=":function(e,t){return e>=t},"typeof":function(e,t){return("undefined"==typeof e?"undefined":s(e))===t}},r["="]=r["==="],!r[t])throw new Error("Handlerbars Helper 'compare' doesn't know the operator "+t);return o=r[t](e,n),o?i.fn(this):i.inverse(this)}),c.registerHelper("inflect",function(e,t){return t=String(t),t.inflect(e)}),c.registerHelper("pluralize",function(e,t){return t=Number(t),1===t?e:e.inflect("pluralize")}),c.registerHelper("calendar",function(e){return e?F.from(e).calendar():""}),c.registerHelper("default",function(){return n._getUnderscore(n._getUnderscore(arguments).initial()).find()}),d.autoDiscover=!1,function(){var e=a._data(document,"events").click.filter(function(e){return"data-api.dropdown"===e.namespace&&void 0===e.selector})[0].handler;a(document).off("click.data-api.dropdown",e).on("click.data-api.dropdown",function(t){3!==t.which&&2!==t.button&&e()})}(),a(window).on("beforeunload",function(){return y.outstandingModifyingRequests>0||I.countQueuedActions()>0?g["outstanding-requests-warning"]():void 0});var j,B=window.onerror;window.onerror=function(e,t,n,i,o){if(!(C.disableExceptionCatching||j&&j.isShown)){var s,a=o;if(a&&a.innerError&&(a=a.innerError),C.useAlertForErrors&&!x.hasParam("normal_errors")&&!dev.forceNormalErrors){E.deferredActions++;var l=new y.ErrorReport.makeFromError(a,e);return l.data.alertError=!0,void l.save({success:function(){window.alert(e)},complete:function(){E.deferredActions--}})}if(a instanceof k.DisplayableError)s={message:a.getMessage()},s.displayable=!0;else if(k.isDisplayableErrorMessage(e))s={message:k.removeDisplayableErrorPrefix(e)},s.displayable=!0;else{if(r(a,e,t,n))return;var c=new y.ErrorReport.makeFromError(a,e);c.save(),s={},a&&(s.report=a.stack),a instanceof k.ServerError?(s.message=a.message,s.report="\n"+a.networkReport):s.message=g["client-error"]()}if(!E.ErrorAlertView)return void console.error("Error in ErrorAlertView initialization");j=new E.ErrorAlertView(s),j.show(),B&&B.apply(this,arguments)}};var U=!1;A.on("unauthorizedRequest",function(){if(!U){U=!0;var t=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/errorAlertView"),n=new t({message:g["error-must-reauthorize"](),allowClose:!1});n.show()}});var H=l.View.before(function(e){this.shouldPickProperties&&this.pickProperties(e)});O.inherits(H,l.View),superExtendable(H);var z=H.extend({initialize:function(e){this.options=e},id:function(){return(this.mainClass||"").replace(" ","-")+"-"+this.cid},doubleClickThreshold:400,setElement:function(e,t){this.$el&&this.$el.data("view",void 0),l.View.prototype.setElement.call(this,e,t),this.$el.addClass(this.className),this.$el&&!this.$el.data("view")&&this.$el.data("view",this)},addSpinner:function(e,t){var n=t.clearHtml;if(void 0===n&&(n=!0),delete t.clearHtml,e=a(e),n&&!e.data("original-html")){e.data("original-style",e.attr("style")||""),e.data("original-html",e.html());var i=e.width(),r=e.height();e.width(i),e.height(r),e.html("")}var o=e.data("spinner");o&&o.stop(),t=_.extend({color:"#333",hwaccel:!0},t),o=new u(t).spin(e.get(0)),e.data("spinner",o)},greyButtonSpinnerOptions:{lines:11,radius:5,length:4,width:2},largeGreySpinnerOptions:{lines:11,radius:11,length:11,width:4},stopSpinning:function(e){var t=e.data("spinner");t&&t.stop(),e.data("original-html")&&e.html(e.data("original-html")),e.data("original-style")&&e.attr("style",e.data("original-style")),e.removeData(["spinner","original-html","original-style"])},undo:function(){w.history.undo({error:this.errorHandler("undo"),deferredHandler:this.deferredHandler("working-undo")})},redo:function(){w.history.redo({error:this.errorHandler("redo"),deferredHandler:this.deferredHandler("working-redo")})},listenForUndo:function(){w.history.reset();var e=this;this.undoKeydownEventName="keydown.undo"+this.cid,a(document).on(this.undoKeydownEventName,function(t){if((t.metaKey||t.ctrlKey)&&t.which===S.Z){if(a.hasFocusedElement())return;t.preventDefault(),t.shiftKey?e.redo():e.undo()}})},remove:function(){this.undoKeydownEventName&&a(document).off(this.undoKeydownEventName),this.viewModel&&this.viewModel.remove(),this.deferredIds&&this.clearDeferreds(),l.View.prototype.remove.apply(this,arguments)},removeSubviews:function(){var e=this;_.chain(arguments).map(function(t){var n=e[t];return e[t]=null,n}).compactNullish().invoke("remove")},delayedRemove:function(e){this.stopListening(),e=e||T.FLING_DELAY,this.$el.detach();var t=this;_.delay(function(){t.remove()},e)},beforeDetach:function(){},detach:function(){this.beforeDetach(),this.$el.detach()},isAttached:function(){return this.$el.hasClosest(document.documentElement)},captureActions:function(e){w.history.capture(_.bind(e,this))},showAlert:function(e){_.isString(e)&&(e={message:e});var t=new E.ErrorAlertView(e);t.show()},getActionStringFromOptions:function(e){var t;if(e.action&&(t=g["action-"+e.action],!t))throw new Error("No action string for action named "+e.action);return t},deferredHandler:function(e){_.isString(e)&&(e={action:e});var t=this.getActionStringFromOptions(e);if(!t)throw new Error("No action provided to deferredHandler");var n;return{onDeferred:function(){n=new z.ProgressBarView({title:t}),n.show()},onComplete:function(){n.hide()},onProgress:function(e){e=Math.round(100*e),n.updateProgress(e)}}},errorHandler:function(e){var t,n=this;return _.isString(e)&&(e={action:e}),t=this.getActionStringFromOptions(e),function(i,r){e.bare&&(r=i),e.spinner&&n.stopSpinning(e.spinner);var o;t?o=t():e.actionTemplate&&(o=g["action-"+e.actionTemplate](e.object.toContext()));var s=g["error-template"]({action:o}),a=N(r);return C.useAlertForErrors&&!x.hasParam("normal_errors")?void window.alert(s+" "+a):void _.defer(409===r.status?function(){throw new k.DisplayableError("conflict-template",{action:o})}:function(){throw new k.ServerError(s,a)})}},showStatus:function(e){return function(){var t=e.context||{};"function"==typeof t.toContext&&(t=t.toContext());var n;e.action?n=g["action-success-"+e.action](t):e.message&&(n=e.message),E.StatusBarView.show({text:n,undoable:e.undoable,reload:e.reload})}},show:function(){this.$el.show()},hide:function(){this.$el.hide()},endEditing:function(){a(":focus").blur()},$:function(){var e=this;return n._getUnderscore(arguments).reduce(function(t,n){return _.isString(n)&&"$"===n[0]&&(n=e.componentSelectors[n]),t.find(n)},this.$el)},closestComponent:function(e,t){var n=this.$(e);return n.closest(this.componentSelectors[t])},findCousin:function(e,t){e=this.$(e),!t.jquery&&n._getUnderscore(t).isString()&&t.startsWith("$")&&(t=this.componentSelectors[t]);for(var i=e.closest(t),r=arguments.length,o=Array(r>2?r-2:0),s=2;r>s;s++)o[s-2]=arguments[s];return this.$.apply(this,[i].concat(o))},isComponent:function(e,t){var n=this.$(e);return n.is(this.componentSelectors[t])},onLinkClicked:function(e){if(!(e.shiftKey||e.ctrlKey||e.metaKey)){var t=a(e.target).closest("a");if("_blank"!==t.attr("target")){var n=t.attr("href");"string"==typeof n&&n.match(/^\//)&&this.captureLink(e,n)}}},captureLink:function(e,t){e.preventDefault(),e.stopPropagation();var n=l.history.getFragment(t);return n===l.history.fragment?(l.history.fragment=null,void l.history.navigate(n,!0)):void x.router.navigate(t,{trigger:!0})},forceUrlParams:function(e,t){var n=L.parse(e,!0);return n.query=t,L.format(n)},goToPage:function(e){x.router.navigate(e,{trigger:!0})},onNextTick:function(e){this.afterWait(1,e)},afterWait:function(e,t){t=_.bind(t,this),this.incrementDeferredAction();var n=this,i=_.delay(function(){try{t()}finally{n.removeDeferredId(i)}},e);this.getDeferredIds()[i]=1},debounce:function(e,t,i){if(i)return _.debounce(e,t,i);var r=this,o=0,s=e.after(function(){r.decrementDeferredActions(o),o=0}),a=[s].concat(n._getUnderscore(arguments).rest()),l=_.debounce.apply(_,a);return l.before(function(){o++,r.incrementDeferredAction()})},clearDeferreds:function(){var e=this,t=this.getDeferredIds();_.each(t,function(e,t){clearTimeout(t)}),e.removeDeferredIds(_.keys(t))},decrementDeferredActions:function(e){if(null==e&&(e=1),E.deferredActions-=e,E.deferredActions||A.trigger("noDeferredActions"),E.deferredActions<0)throw new Error("Deferred count dropped below zero")},incrementDeferredAction:function(e){null==e&&(e=1),E.deferredActions+=e},qDeferredAction:function(e){var t=this;return this.incrementDeferredAction(),Q(e()).then(function(){t.decrementDeferredActions()})},removeDeferredId:function(e){this.removeDeferredIds([e])},removeDeferredIds:function(e){if(0!==e.length){var t=this.getDeferredIds(),i=0;n._getUnderscore(e).each(function(e){e in t&&(delete t[e],i++)}),i>0&&this.decrementDeferredActions(i)}},getDeferredIds:function(){return this.deferredIds||(this.deferredIds={}),this.deferredIds},nsString:function(e){return this.nsString=g.ns(this.className),this.nsString(e)},debugString:function(){return"view: "+this.cid+" with class: "+(this.className||"unknown")},eventNamespace:function(){var e=this.className||"";return e+this.cid},namespacedEventName:function(e){return(e||"")+"."+this.eventNamespace()},trackMetric:function(e,t){this.metricsContext=this.metricsContext||this.className.split(" ")[0].replace(/-/g,"_"),M.track(this.metricsContext,e,t)},delegateEventSplitter:/^(\S+)\s*(.*)$/,delegateEventsFromElement:function(e,t){this.undelegateEventsFromElement(e),this.addDelegatedElement(e);var n=this;return _.each(t,function(t,i){if(_.isFunction(t)||(t=n[t]),!t)throw new Error("No method found for: "+i+", "+t);var r=i.match(n.delegateEventSplitter),o=r[1],s=r[2];a(e).on(o+".delegateEvents"+n.cid,s,function(e){return n.callEventHandler(e,t)})}),this},delegateEvents:function(e){var t=this;return e=e||n._getUnderscore(this).result("events"),e=_.chain(e).map(function(e,n){var i=n.match(t.delegateEventSplitter);if("$"===i[2][0]){var r=t.componentSelectors[i[2]];n=i[1]+" "+r}return[n,e]}).object().value(),H.prototype.delegateEvents.call(this,e)},addDelegatedElement:function(e){e=a(e)[0],this.delegatedFromElements||(this.delegatedFromElements=[]),this.delegatedFromElements.push(e)},removeDelegatedElement:function(e){e=a(e)[0],this.delegatedFromElements&&(this.delegatedFromElements=n._getUnderscore(this.delegatedFromElements).without(e))},undelegateEventsFromElement:function(e){return a(e).off(".delegateEvents"+this.cid),this.removeDelegatedElement(e),this},stopListening:l.View.prototype.stopListening.before(function(e){var t=this;if(e){if(!this.delegatedFromElements)return;if(!n._getUnderscore(this.delegatedFromElements).contains(e))return;return void this.undelegateEventsFromElement(e)}this.delegatedFromElements&&!n._getUnderscore(this.delegatedFromElements).isEmpty()&&(n._getUnderscore(this.delegatedFromElements).each(function(e){a(e).off(".delegateEvents"+t.cid)
}),this.delegatedFromElements=[])}),callEventHandler:function(e,t){var n=a(e.currentTarget);return n.is(".disabled")?(e.preventDefault(),void n.blur()):t.call(this,e,n)},transition:function(e,t,n){var i=this;e=a(e),n=n||{},n.complete=n.complete||_.noop,n.complete=n.complete.after(function(){i.decrementDeferredActions()}),this.incrementDeferredAction(),e.transition(t,n)}});z.displayedView=function(){return a("."+this.prototype.className).data("view")};var q=v.console.debug.bind(v.console),W=_.debounce(q,250,!0),K={},G=z.extend;z.extend=function(e){var t=e.events;e.events&&delete e.events;var n=G.apply(this,arguments);if(n.super_=this,t&&(n.prototype.events=_.clone(n.prototype.events||{}),_.extend(n.prototype.events,t)),n.prototype.events&&_.each(n.prototype.events,function(e,t){var i=e;if(_.isString(e)&&(i=function(){return this[e].apply(this,arguments)}),!i.wrapped){var r=i;n.prototype.noPerformanceTiming||(r=function(){return R.getInstance().addTiming(this.className+":"+t,i,this,arguments)});var s=q;/^(mouseover|mouseout|mouseenter|mouseleave|mousemove)/.test(t)?s=o("mouse"):/^(keyup|keydown|keypress|input)/.test(t)?s=o("keyboard"):/^click/.test(t)||(s=o(t));var a=function(e){var n=this;return s('Calling event handler for: "'+t+'" on '+n.debugString()),n.callEventHandler(e,r)};a.wrapped=!0,n.prototype.events[t]=a}}),!n.prototype.noPerformanceTiming){var i={};_.each(n.prototype,function(e,t){if(0===t.indexOf("render")&&-1===t.indexOf("Deferred")&&_.isFunction(e)){var r=(n.prototype.className||"unknownView")+":"+t;i[t]=R.createTimedFunction(r,e)}}),_.extend(n.prototype,i)}var r=this;n.prototype.super=function(e){var t=[].slice.call(arguments,1);return r.prototype[e].apply(this,t)};var s=n.prototype.initialize;return n.prototype.initialize=function(e){var t=this;return t.options=e||{},s.apply(t,arguments)},n},E.deferredActions=0,z.deferrable=function(){var e=this.prototype;e.getNeedsInvocation=function(e){return this.needsInvocation&&this.needsInvocation[e]},e.setNeedsInvocation=function(e,t){var n=this;void 0===t&&(t=!0),n.needsInvocation=n.needsInvocation||{},n.needsInvocation[e]=t},e.registerDeferrable=function(e){var t=this,n=t[e];if("function"==typeof n){t[e]=function(){var t=this;return t.setNeedsInvocation(e,!1),W("Called "+e+" on "+t.debugString()),n.apply(t,arguments)};var i=g.capitalize(e),r=e+"IfNeeded";t[r]=t[r]||function(){var t=this;t.getNeedsInvocation(e)&&t[e].apply(t,arguments)};var o="setNeeds"+i;t[o]=t[o]||function(){var t=this;t.setNeedsInvocation(e)};var s=e+"Deferred";t[s]=t[s]||function(){var e=this;e[o](),e.onNextTick(e[r])}}},_.each(arguments,function(t){e.registerDeferrable(t)})};var Y=["pickProperties"],J=["addProperties"];_.extend(z.prototype,_.pick(BaseObject.prototype,Y)),_.extend(z,_.pick(BaseObject,J)),z.addProperties=z.addProperties.after(function(){this.prototype.shouldPickProperties=!0}),z.deferrableRendering=function(){var e=this.prototype,t=_.filter(_.keys(e),function(t){return 0===t.indexOf("render")&&"function"==typeof e[t]});return this.deferrable.apply(this,t),this},f(z),p(z),gettable(z),m(z),z.addGetters({mainClass:function(){return this.className?this.className.split(" ",1)[0]:""},boundErrorHandler:function(){return this.errorHandler.bind(this)}}),z.addComponents=function(e){var t=this,n=t.prototype,i=n.componentSelectors=_.extend({},n.componentSelectors),r=_.chain(e).map(function(e,t){var n=["$",e];return t="$"+t,i[t]=e,[t,n]}).object().value();return t.addGetters(r),t},z.templates=c.templates,z.partials=c.partials,a(function(){document.body.id=isMobile?"MOBILE":"NON-MOBILE"}),t.exports=z}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/strings":249,"../actionQueue":1,"../actions":2,"../bubblable":5,"../csrf":6,"../env":8,"../errors":9,"../gen/templates":20,"../globalEvents":22,"../keys":25,"../metrics":26,"../models":47,"../performance":75,"../routing":76,"../tipable":77,"../trackJs":78,"./fastScrollConstants":169,"./geometry":183,"./index":188,"./jquery.fieldbook.js":189,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/views/errorAlertView":155,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/common/delayedTriggerable":241,backbone:"backbone",crypto:626,dropzone:"dropzone","handlebars-runtime":"handlebars-runtime",jquery:"jquery",linkify:"linkify",moment:"moment",numeral:696,spin:"spin",templates:20,url:744,util:749}],237:[function(e,t){"use strict";var n=e("util"),i=function r(){this.initialize.apply(this,arguments),r.super_.call(this,this.message),this.stack||(this.stack=new Error(this.message).stack)};n.inherits(i,Error),_.extend(i.prototype,{name:"AppError",initialize:function(e){this.message=e},isSoftError:!0}),extendable(i),t.exports=i},{util:749}],238:[function(e,t,n){"use strict";var i=e("./gen/splitCommasParser");n.split=function(e){var t=i.parse(e);return _(t).invoke("trim")};var r=n.quote=function(e){var t=/[,"\\]/;return t.test(e)?(e=e.replace(/\\/g,"\\\\"),e=e.replace(/"/g,'\\"'),'"'+e+'"'):e};n.join=function(e){return e.map(r).join(", ")}},{"./gen/splitCommasParser":243}],239:[function(e,t){"use strict";var n={MAX_CSV_FILE_SIZE_MB:5,TIME_SYNC_INTERVAL_MINUTES:5,MAX_AUTOCOMPLETE_LENGTH:140,RECENT_ERROR_COUNT:10,MAX_CSV_ROWS:1e4,MAX_CSV_COLUMNS:500,MAX_CSV_CELLS:1e5};t.exports=n},{}],240:[function(e,t,n){"use strict";n.delimiters=[{key:"comma",name:"Comma (,)",character:","},{key:"tab",name:"Tab",character:"	"},{key:"semicolon",name:"Semicolon (;)",character:";"},{key:"pipe",name:"Pipe (|)",character:"|"}],n.encodings=[{key:"UTF-8",name:"UTF-8 (standard)"},{key:"ISO-8859-1",name:"Latin-1 (ISO-8859-1)"},{key:"macintosh",name:"Macintosh (Roman)"},{key:"cyrillic",name:"Cyrillic"},{key:"greek",name:"Greek"},{key:"arabic",name:"Arabic"},{key:"hebrew",name:"Hebrew"},{key:"shift-jis",name:"Japanese (Shift-JIS)"}]},{}],241:[function(e,t){(function(n){"use strict";var i=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/globalEvents"),r={triggerOnceIdle:function(e){i.hasChangesInflight()?(this.setupDelayedEventsIfNeeded(),this.delayedEvents[e]=_.toArray(arguments)):this.trigger.apply(this,arguments)},setupDelayedEventsIfNeeded:function(){this.delayedEvents||(this.delayedEvents={},this.addChangesDoneListener())},addChangesDoneListener:function(){var e=this;i.once("changesDone",function(){e.triggerDelayedEvents()})},triggerDelayedEvents:function(){var e=this;if(i.hasChangesInflight())return void this.addChangesDoneListener();var t=this.delayedEvents;this.delayedEvents=void 0,n._getUnderscore(t).each(function(t){e.trigger.apply(e,t)})}};t.exports=function(e){_.extend(e.prototype,r)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/globalEvents":22}],242:[function(e,t,n){"use strict";var i=e("../common/strings"),r="DisplayableError",o=r+": ",s=n.DisplayableError=AppError.extend({name:r,displayable:!0,initialize:function(e,t){var n;if(n=t?i.stencil(e,t):i.stencil(e),!n)throw new AppError("no error message for "+e);this.message=o+n,this.rawMessage=n},getMessage:function(){return this.rawMessage}}),a=n.ExecutionError=s.extend({name:"ExecutionError"}),l=(n.UnknownContext=a.extend({name:"UnknownContext"}),n.ValidationError=s.extend({name:"ValidationError"}));n.isDisplayableErrorMessage=function(e){return-1!==e.indexOf(o)},n.removeDisplayableErrorPrefix=function(e){return e.replace(new RegExp("^.*"+o),"")};{var c=n.InputValidationError=l.extend({name:"InputValidationError"});n.ReloadedInputValidationError=c.extend({initialize:function(e){this.message=o+e,this.rawMessage=e}})}n.AppError=AppError},{"../common/strings":249}],243:[function(e,t,n){(function(i){var r=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,empty:3,elementChar:4,'"':5,CHARS:6,element:7,elements:8,COMMA:9,output:10,$accept:0,$end:1},terminals_:{2:"error",5:'"',6:"CHARS",9:"COMMA"},productions_:[0,[3,0],[4,1],[4,1],[7,1],[7,2],[8,1],[8,1],[8,3],[8,2],[10,1]],performAction:function(e,t,n,i,r,o){var s=o.length-1;switch(r){case 2:this.$="";break;case 5:this.$=o[s-1]+o[s];break;case 6:this.$=[];break;case 7:this.$=[o[s]];break;case 8:this.$=o[s-2].concat(o[s]);break;case 9:this.$=o[s-1];break;case 10:return o[s]}},table:[{1:[2,1],3:3,4:5,5:[1,6],6:[1,7],7:4,8:2,9:[2,1],10:1},{1:[3]},{1:[2,10],9:[1,8]},{1:[2,6],9:[2,6]},{1:[2,7],4:9,5:[1,6],6:[1,7],9:[2,7]},{1:[2,4],5:[2,4],6:[2,4],9:[2,4]},{1:[2,2],5:[2,2],6:[2,2],9:[2,2]},{1:[2,3],5:[2,3],6:[2,3],9:[2,3]},{1:[2,9],4:5,5:[1,6],6:[1,7],7:10,9:[2,9]},{1:[2,5],5:[2,5],6:[2,5],9:[2,5]},{1:[2,8],4:9,5:[1,6],6:[1,7],9:[2,8]}],defaultActions:{},parseError:function(e,t){if(!t.recoverable)throw new Error(e);this.trace(e)},parse:function(e){function t(){var e;return e=n.lexer.lex()||h,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,i=[0],r=[null],o=[],s=this.table,a="",l=0,c=0,u=0,d=2,h=1;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var f=this.lexer.yylloc;o.push(f);var p=this.lexer.options&&this.lexer.options.ranges;this.parseError="function"==typeof this.yy.parseError?this.yy.parseError:Object.getPrototypeOf(this).parseError;for(var m,g,v,b,y,w,x,k,_,S={};;){if(v=i[i.length-1],this.defaultActions[v]?b=this.defaultActions[v]:((null===m||"undefined"==typeof m)&&(m=t()),b=s[v]&&s[v][m]),"undefined"==typeof b||!b.length||!b[0]){var C="";_=[];for(w in s[v])this.terminals_[w]&&w>d&&_.push("'"+this.terminals_[w]+"'");C=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+_.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(l+1)+": Unexpected "+(m==h?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[m]||m,line:this.lexer.yylineno,loc:f,expected:_})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+m);switch(b[0]){case 1:i.push(m),r.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(b[1]),m=null,g?(m=g,g=null):(c=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,f=this.lexer.yylloc,u>0&&u--);break;case 2:if(x=this.productions_[b[1]][1],S.$=r[r.length-x],S._$={first_line:o[o.length-(x||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(x||1)].first_column,last_column:o[o.length-1].last_column},p&&(S._$.range=[o[o.length-(x||1)].range[0],o[o.length-1].range[1]]),y=this.performAction.call(S,a,c,l,this.yy,b[1],r,o),"undefined"!=typeof y)return y;x&&(i=i.slice(0,-1*x*2),r=r.slice(0,-1*x),o=o.slice(0,-1*x)),i.push(this.productions_[b[1]][0]),r.push(S.$),o.push(S._$),k=s[i[i.length-2]][i[i.length-1]],i.push(k);break;case 3:return!0}}return!0}},n=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),i=e[0].match(/(?:\r\n?|\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in r)this[o]=r[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,i;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;o<r.length;o++)if(n=this._input.match(this.rules[r[o]]),n&&(!t||n[0].length>t[0].length)){if(t=n,i=o,this.options.backtrack_lexer){if(e=this.test_match(n,r[o]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?(e=this.test_match(t,r[i]),e!==!1?e:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,n,i){switch(n){case 0:return 9;case 1:return 6;case 2:return this.begin("QUOTE"),5;case 3:return this.popState(),5;case 4:this.begin("ESC");break;case 5:return 6;case 6:return this.popState(),6}},rules:[/^(?:,)/,/^(?:[^\,\"])/,/^(?:")/,/^(?:")/,/^(?:\\)/,/^(?:[^"\\])/,/^(?:.)/],conditions:{ESC:{rules:[6],inclusive:!1},QUOTE:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,2],inclusive:!0}}};return e}();return t.lexer=n,e.prototype=t,t.Parser=e,new e}();"undefined"!=typeof e&&"undefined"!=typeof n&&(n.parser=r,n.Parser=r.Parser,n.parse=function(){return r.parse.apply(r,arguments)},n.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),i.exit(1));var r=e("fs").readFileSync(e("path").normalize(t[1]),"utf8");return n.parser.parse(r)},"undefined"!=typeof t&&e.main===t&&n.main(i.argv.slice(1)))}).call(this,e("_process"))},{_process:705,fs:602,path:702}],244:[function(e,t){"use strict";t.exports=BaseObject.extend({propertyNames:function(){return["array","predicate","lazy"]},lazy:!0,initialize:function(){this.makePredicateFunction(),this.resetCache()},setArray:function(e){this.array=e,this.resetCache()},makePredicateFunction:function(){var e,t=this.predicate;e=_.isString(t)?function(e){return _.soak(e,t)}:t,this.predicateFunction=e},resetCache:function(){this.cache=null,this.lazy||this.buildCache()},buildCache:function(){if(!this.cache){var e={},t=this;this.array.forEach(function(n,i){var r=t.applyPredicate(n);e[r]=i}),this.cache=e}},indexOf:function(e){var t=this.applyPredicate(e);return this.indexOfPredicateResult(t)},indexOfPredicateResult:function(e){return this.buildCache(),this.cache[e]},applyPredicate:function(e){return this.predicateFunction(e)}})},{}],245:[function(e,t){"use strict";var n=t.exports=BaseObject.extend({constructorName:"Invocation",propertyNames:["target","name","args"],canApply:function(){return this.target&&this.target[this.name]},apply:function(){return this.target[this.name].apply(this.target,this.args)}});n.create=function(e,t,i){return new n({target:e,name:t,args:i})}},{}],246:[function(e){"use strict";var t=e("moment");t.lang("en",{calendar:{lastDay:"[Yesterday at] LT",sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",lastWeek:"[Last] dddd [at] LT",nextWeek:"dddd [at] LT",sameElse:"MMM D, YYYY"}}),t.from=function(e){if(null==e)throw new AppError("date is undefined");return t.apply(null,arguments)}},{moment:"moment"}],247:[function(){"use strict";_.defaults(String.prototype,{mixedToCamelCase:function(e){return this.inflect("underscore").inflect("camelize",e)},test:function(e){return e.test(this)}})},{}],248:[function(e,t,n){"use strict";var i=e("papaparse");n.parse=function(e){e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n"),e=e.replace(/\n$/,"");var t=i.parse(e,{delimiter:"	",newline:"\n"});return t.data},n.stringify=function(e){return i.unparse(e,{delimiter:"	",newline:"\n"})+"\n"}},{papaparse:697}],249:[function(e,t){(function(e){"use strict";_.templateSettings.interpolate=/\{\{(.+?)\}\}/g;var n={title:"Fieldbook","title-bar":"FIELDBOOK",home:"Home",templates:"Templates",tutorials:"Tutorials",documentation:"Help & FAQ","import-sync":"Imports & sync","account-notification-need-verify":"Verify your email address","account-notification-need-verify-details":"Click to resend verification email",organization:"Organization",plan:"Plan","your-settings":"Your settings","title-bar-help":"Help","title-bar-feedback":"Message us",demo:"Demo","join-us":"We're hiring!",tagline:"Create a database, as easily as a spreadsheet","register-beta":"Sign up for the beta:","register-beta-waitlist":"Sign up for the beta:","register-beta-email-example":"you@example.com","register-beta-button":"Go","sign-in":"Sign in",name:"Name","already-have-account":"Already have an account?","sign-in-for-access":"Sign in","sign-up-for-access":"Create account","reset-password":"Reset password","forgot-submit":"Send reset link","reset-submit":"Set password","create-account":"Create account","user-info":"User Profile","confirmation-sent":"Check your email","forgot-password":"Forgot password?","forgot-password-link":"Reset it","remembered-password":"Remembered it?","not-registered-yet":"Not registered?","not-registered-yet-link":"Sign up","sign-up":"Sign up","resend-email":"Didn't get it?","resend-email-link":"Resend","use-different-email":"Sign up with a different email","sign-up-email":"Sign up with email address","sign-in-email":"Sign in with email address","not-logged-in":"Not logged in",email:"Email address","with-google":"With Google","sign-up-google":"Sign up with Google","sign-in-google":"Sign in with Google","do-you-have-google":"Have a google account?","sign-out":"Sign out","bad-login-request":"Enter your email and password to sign in, or sign in with Google.","all-books":"All Books",books:"Books","new-book-title":"Untitled book","new-sheet-title":"Sheet ","copied-title":"{{title}} (copy)","default-field-name":"Field ","default-link-field-name":"Linked record","name-field-name":"name or identifier","super-sheet-name-field":"{{sourceTitle}} name","warning-missing-name":"{{fieldName}} is missing","warning-duplicate-name":"{{fieldName}} is a duplicate","identifier-name":"Identifier","search-placeholder":"Try: keywords, column names, “where”, “sort”, “group”","add-description":"Add description","save-search":"Save view","update-search":"Update view","save-search-as-new":"Save as new view",share:"Share…","sheet-sharing-private":"Private to you. Click to share","sheet-sharing-one":"Shared with {{nameOrEmail}}","sheet-sharing-multiple":"Shared with {{count}} other users","export-csv":"Download as CSV","export-current-csv":"Download as CSV (current view)","wrap-text":"Wrap text","copy-book":"Copy book","download-book":"Download book as JSON","leave-book":"Leave book","delete-book":"Delete book","invite-placeholder":"Enter email addresses",invite:"Share","add-field":"+","add-sheet":"Add sheet","link-tool":"Link sheets…","add-subsheet":"Create new sheet that links here","book-links-title":"Your books","referral-banner-title":"Invite people to Fieldbook with your referral link:","click-to-select":"(click to select)","no-books":"No books right now","no-book-options":"Here are a few options to get started:","mobile-no-book-options":"Sorry, can't create books on mobile right now. Create a book on a desktop computer to get started.","tutorials-teaser-prompt":"Wondering what you can do with Fieldbook?","tutorials-teaser-link":"Check out our tutorial introduction","empty-mobile-row":"Add {{entityName}}","create-book":"Create book","use-template":"Use template","import-csv":"Import CSV","drag-and-drop-tip":"Pro tip: Drag CSV files here to import","drag-and-drop-fallback":"Drag-and-drop is not supported in your browser. Import a CSV here instead:","csv-limits-reached":"Sorry, this file is larger than we can handle right now. Imported files can have no more than {{rowLimit}} rows, {{columnLimit}} columns, or {{cellLimit}} total cells.","view-record":"View","new-group-nav-item-name":"By {{name}}","new-unnamed-field-group-nav-item-name":"Grouped","default-group-name":"(none)","default-field-display-name":"Field {{position}}","new-group-name":"New {{name}}","by-groups":"By {{fieldNames}}","named-value":"{{fieldName}}: {{displayValue}}","unknown-field":"Unknown Field","all-clump-value":"All","select-name-field":"Links to this page display as:",unnamed:"(no name)","unnamed-field-slug":"field_{{position}}","unnamed-name-field-slug":"name",untitled:"(no title)","this-record":"(this record)","removed-user":"Removed","restore-user":"undo","test-errors":"Test errors","test-displayable-errors":"Test displayable errors","test-silent-errors":"Test silent errors","test-log-only-errors":"Test log-only errors","test-error-text":"BOOM!","cannot-revert-bulk-create":"Can't undo adding missing links.","cannot-reperform-bulk-create":"Nothing to redo because adding missing links was not undone.","grouping-by":"Grouping by","custom-order-message":"Using custom order on","templates-title":"Templates","all-templates":"All templates","use-this-template":"Create book with this template","get-started-create":"Start from scratch","get-started-template":"Browse templates","get-started-import-file":"Import a file","create-organization":"Upgrade and create an organization","create-organization-description":"Organizations let you easily invite new members and manage access levels. Upgrade to a Fieldbook Business plan to create an organization.","create-organization-detail":"Fieldbook Business is $10/user/month. We’ll only charge you for active users, there are no long-term contracts, and you can cancel at any time without losing your data.","create-organization-more-info":"Read more about plans & pricing","restart-organization-description":"You're on the free Basic plan. To manage this organization, upgrade to a Business plan (for $10/user/month).","upgrade-to-create-organization":"Upgrade to Fieldbook Business to create an organization.","organization-name":"Organization name","upgrade-and-create-organization":"Upgrade and create this organization","company-or-team":"Company or team","org-signup-prompt":"You've been invited to create a Fieldbook account in this organization. Create an account:","join-organization":"Join {{name}}","join-organization-description":"There's an organization for {{name}} that anyone with an email <b>@{{domain}}</b> can join.  Once you join this, your account with be managed by the organization admins.","auto-join-organization":"Let anyone with an email address <b>@{{emailDomain}}</b> join this organization","blank-org-name":"Organization name is required.","stripe-name":"Fieldbook Inc","stripe-description":"Upgrade to Fieldbook Business","anonymous-access":"Allow read only access","shareable-link":"Shareable link (view-only)","shareable-form-link":"Share this form externally","anonymous-access-on":"ON: Anyone with the link can view:","anonymous-access-off":"OFF: Only the users below can access.","anonymous-form-access-on":"ON: Anyone can submit data through the form at this link:","anonymous-form-access-off":"OFF: The form is not accessible outside this book.","get-share-link":"Enable","disable-share-link":"Disable","on-list":"Are you on this list?","log-in":"Log in","invite-others":"to invite others to edit.","share-title":"Share","share-book-label":"Entire book","share-form-label":"This form","invite-people":"Invite people by email","shared-people-description":"Admins can view and edit the book, and invite others.<br>“Edit rows” lets people enter data but not change sheets, fields, links or formulas.",editors:"Shared with","invite-to-edit":"Invite","share-invite-explanation":"Anyone added to this list will be invited to join Fieldbook if needed","read-only-view":"Viewing read-only.","another-account":"Have another account with access?","switch-to-edit":"Switch users to edit.","have-access":"If you have access, you can","sign-in-to-edit":"sign in to edit.","share-form-not-on-form":"You are not on a form. Create or navigate to a form to share it.","manage-api":"API Access","generate-api-keys":"Generate a new API key","default-api-key-name":"key-{{shortId}}","api-keys":"API keys (read/write)","no-api-keys":"No API keys.","api-url-label":"Base API URL for this book","api-key-only-once-warning":"Please write down this password, it will only be displayed once.",username:"Username",password:"Password","public-api-label":"Public API access (read-only)","public-api-on":"ON: Anyone can make GET API requests","public-api-off":"OFF: Only authorized keys can make API requests","public-api-button-on":"Disable","public-api-button-off":"Enable","api-limit-exceeded":"You have hit the limit of {{limit}} API calls/month on a Free plan. To make more API calls this month, upgrade to a Business plan: https://fieldbook.com/plan","api-rate-limit-exceeded":"You have hit the limit of concurrent api requests of {{limit}} at one time.  Please serialize or limit your calls.","auth-rate-limited":"Too many requests. Please wait a while.","survey-question-use-case":"What are you interested in using Fieldbook for?","connect-fieldbook":"Connect to Fieldbook to import your event:","fieldbook-sign-in":"Sign in to Fieldbook","fieldbook-create-new":"Create a new Fieldbook account","connect-fieldbook-as":"Connect Eventbrite to this Fieldbook account?","account-continue":"Continue with this account","switch-accounts":"Switch accounts","event-not-imported":"This event has not yet been imported.","event-is-imported":"This event has been successfully imported.","import-event":"Import this event","imported-events":"Imported events","events-not-imported":"Events not yet imported","view-event-button":"View","import-event-button":"Import","view-event-main":"View event in Fieldbook","book-invite-message":"{{addedByUser.name}} has invited you to share this book at {{email}}. You are logged in as:","book-invite-options":"You can add this email address to your account to view the book, or log in as a different user to claim the invitation.","book-invite-must-login":"An account with that email address already exists. To claim this invite, you must sign in with that account.","claim-invite":"Add {{email}} to {{currentUser.name}}","claim-invite-different-user":"Log in as a different user","confirm-leave-title":"Leave this book?","confirm-leave-message":"You can't undo this. To rejoin the book, someone will have to share it with you again.","confirm-leave":"Leave book","delete-sheet":"Delete sheet “{{displayTitle}}”","delete-nav-item":"Delete saved view “{{displayName}}”","delete-form":"Delete form “{{displayName}}”","unhide-fields":"Unhide columns…","disabled-reason-no-hidden-fields":"Disabled because no fields are hidden.","name-field":"Name column","rename-field":"Rename column","search-field":"Search column","sort-field":"Sort by this column","sort-field-asc":"Sort by this column","sort-field-desc":"Sort by this column in reverse","group-field":"Group by this column","report-on-field":"Report based on this column","edit-report-formula":"Edit summary formula for this column","insert-report-column-before":"Insert formula column left","insert-report-column-after":"Insert formula column right","remove-report-column":'Remove column "{{name}}"',"set-field-aggregate":"Display formula at bottom","set-aggregate-is-current":"(current)","set-field-numeric-commas-us":"Use digit grouping (1,000)","set-field-numeric-commas-eu":"Use digit grouping (1.000)","add-link":"Link this column to sheet…","add-link-this-sheet":"(this sheet)","add-link-new-sheet":"(new sheet)","set-type":"Set type…","required-field":"Required field","remove-link":"Unlink from sheet “{{linkedSheetTitle}}”","delete-field":"Delete column “{{name}}”","delete-unnamed-field":"Delete this column","hide-field":'Hide <%if (!name) print("this")%> column <%if (name) print("”" + name + "”")%>',"group-menu":"Move to {{fieldName}}…","insert-record-above":"Insert row above","insert-record-below":"Insert row below","insert-field-left":"Insert column left","insert-field-right":"Insert column right","unlink-record":"Unlink row from “{{parentRecordName}}”","clear-record":"Clear row","delete-record":"Delete row","delete-group":"Delete group “{{name}}”","delete-subsheet":"Hide mentions from “{{name}}”","delete-join-subsheet":"Hide expanded view of {{name}}","restore-mentions":"Restore hidden views…","restore-mention-item":"Mentions from {{sheet.title}} where {{field.displayName}} = ","restore-join-mention-item":"Expanded view of {{field.oppositeFieldName}}","search-cell-value":"Find “{{keyword}}” in this sheet","filter-cell-value":"Filter for {{field.name}} = “{{value}}”","filter-cell-value-no-quote":"Filter for {{field.name}} = {{value}}","set-field-formula":"Set a formula for this column","edit-field-formula":"Edit the formula for this column","remove-field-formula":"Remove the formula for this column","disabled-reason-formula-is-link":"Cannot set a formula on a link column. First remove the link.","disabled-reason-no-link-formula":"Cannot make a link from a formula column. First remove the formula.","disabled-reason-field-integration":"Disabled because this field is connected to {{integrationName}}","disabled-reason-sheet-integration":"Disabled because this sheet is connected to {{integrationName}}","disabled-reason-field-is-link":"Cannot set input type on link column. First remove the link","disabled-reason-required-no-link":"Cannot make field required on link column. First remove the link","disabled-reason-field-is-formula":"Cannot set input type on formula column.  First remove the formula.","disabled-reason-required-no-formula":"Cannot make field required on formula column.  First remove the formula.","field-type-description-generic":"Accepts any input: text, numbers, dates, etc. Examples:<br><br>Alice<br>123<br>8/11/2015","field-type-description-text":"Input is always treated as text. Examples:<br><br>Alice<br>01234<br>3/5<br><br>Good for zip codes, tracking numbers, or other codes that might be misinterpreted as numbers.","field-type-description-number-us":"Input must be a number. Examples:<br><br>321<br>1,000<br>0.5<br>-57","field-type-description-currency-us":"Input must be a dollar amount. Examples:<br><br>$50<br>$1,000</br>$1.23","field-type-description-percent-us":"Input must be a percent. Examples:<br><br>30%<br>1.25%<br>200%","field-type-description-number-eu":"Input must be a number. Examples:<br><br>321<br>1.000<br>0,5<br>-57","field-type-description-currency-eu":"Input must be a dollar amount. Examples:<br><br>$50<br>$1.000</br>$1,23","field-type-description-percent-eu":"Input must be a percent. Examples:<br><br>30%<br>1,25%<br>200%","field-type-description-date-us":"Input must be a date. Examples:<br><br>10/21/2015<br>10/26/1985<br>9/2/1885<br><br>","field-type-description-dayofyear-us":"Input must be a day of the year, like a birthday or anniversary. Examples:<br><br>10/21<br>July 4<br>Dec 25<br><br>","field-type-description-date-eu":"Input must be a date. Examples:<br><br>21/10/2015<br>26/10/1985<br>2/9/1885<br><br>","field-type-description-dayofyear-eu":"Input must be a day of the year, like a birthday or anniversary. Examples:<br><br>21/10<br>July 4<br>Dec 25<br><br>","field-type-description-email":"Input must be an email address. Examples:<br><br>info@fieldbook.com<br>alice@example.com<br>bob@example.co.uk","field-type-description-website":"Input must be a website (URL). Examples:<br><br>https://fieldbook.com<br>http://twitter.com/fieldbookapp<br>example.com/bacon.html","field-type-description-image":"Drag and drop images files to upload them, or paste an image link from the web. Examples:<br><br>https://yourdomain.com/images/me.png<br>http://example.com/bacon.jpg","update-integration":"Update from {{integrationName}}","last-updated-integration":"Updated {{integrationUpdateTime}}","integration-updated-status":"Updated data from {{integrationName}}","integration-updating-status":"Updating from {{integrationName}}…","repair-integration":"Syncing Broken. Repair now","oauth-invalid-warning":"This book's connection to {{type}} is broken.","repair-syncing-now":"Repair syncing now",ok:"OK",done:"Done",details:"Details",more:"More",loading:"Loading…",undo:"Undo",redo:"Redo",cancel:"Cancel",save:"Save",remove:"remove",ungroup:"ungroup",reload:"Reload",id:"ID",user:"user","delete":"Delete","description-tooltip-add":"Click to add description","description-tooltip-block":"Click to hide description","description-tooltip-hidden":"Click to show description","admin-title":"Fieldbook Admin","admin-title-bar":"Fieldbook Admin","disabled-reason-delete-book":"Only the creator of a book can delete it.","disabled-reason-leave-book":"You can't leave this book because you created it.","disabled-reason-export-csv":"Only sheets can be downloaded right now.","error-invite-self":"You already have access to this book; no need to share with yourself!","error-invite-existing":"{{name}} ({{email}}) already has access to this book.","error-duplicate-group-name":"There is already a group named “{{group}}”.","error-delete-nonempty-group":"This group still has records in it. Delete the records or move them to another group first.","error-no-user-with-email":"No user with email {{email}}","error-invite-share-limit":"You can't invite more people to this book, because it already has {{limit}} or more collaborators, and you're on the Free plan. To invite unlimited collaborators, <a href=\"/plan\">upgrade to a Business plan</a>.","error-already-verified":"Your email address has already been verified.","error-parse-formula":'Can\'t interpret formula: "{{badFormula}}" (Press esc to cancel)',"error-parse-formula-no-cancel":'Can\'t interpret formula: "{{badFormula}}"',"error-parse-formula-generic":"Can't interpret formula (syntax error)","error-unknown-operator-1":"Could not perform {{operator}} with {{a}}, unknown operator!","error-unknown-operator-2":"Could not perform {{a}} {{operator}} {{b}}, unknown operator!","error-data-add-dates":"Cannot add two dates","error-date-add-bad-type":"Cannot add a date and a {{otherType}}","error-subtraction":"Cannot perform {{aType}} - {{bType}}","error-value":"Error","error-unknown-context":"Could not find linked sheet for {{name}}","error-not-a-date":"Argument to {{func}}() is not a date","error-invalid-date":"Arguments do not form a valid date","error-div-by-zero":"Division by zero","error-formula-unknown-field":"Could not find a referenced field (was it misspelled?)","error-formula-unknown-field-named":"Cannot interpret formula: “{{input}}” is not a field","error-formula-circular":"Cannot make circular references with formulas, bad key: {{key}}","error-formula-unknown-function":'Cannot interpret formula: unknown function "{{name}}"',"error-formula-field-not-link":"Cannot interpret formula: “{{dotExprLeft}}” is not a link field","error-formula-function-argument-not-formula":"Cannot use {{name}} on a formula, only a linked column","error-formula-sort-top-level":"“Ascending” or “descending” may only appear at the end of a sort expression","error-formula-too-few-args":'{{name}} requires at least {{minArgs}} argument<% if (minArgs !== 1) print("s") %>',"error-formula-too-many-args":'{{name}} requires at most {{maxArgs}} argument<% if (maxArgs !== 1) print("s") %>',"error-formula-wrong-args":'{{name}} requires exactly {{minArgs}} argument<% if (minArgs !== 1) print("s") %>',"error-formula-calculation":"Calculation error","error-report-formula-not-aggregate":"Function {{name}} is not an aggregate function","error-report-formula-too-many-args":"Summary formulas must have at most 1 argument","error-report-formula-too-few-args":"Function {{name}} requires at least {{count}} arguments","error-report-missing-arguments":"Report needs at least one summary function","error-interpret-query-term":"Cannot interpret query term","error-interpret-query-term-colon":"Cannot interpret query term:","error-report-comes-last":"Report must be the last term.","error-report-trailing-comma":"Extra comma at the end","error-report-expression-must-be-function":"Can only report on a single summary function (sum, count, etc.)","error-invalid-search-term":"Raw search terms cannot contain operators","add-missing-link":"Add missing record","add-missing-links":"Add {{missingLinkCount}} missing records","omitted-formula-links-for-add":"Cannot add {{formulaCount}} records in sheets with formula names.","omitted-id-links-for-add":"Cannot add {{numericCount}} records in sheets with id names.","omitted-formula-and-id-links-for-add":"Cannot add {{formulaCount}} records with formula names and {{numericCount}} records with id names.","no-missing-records":"No missing records to add.","no-group-expression":"Need at least one column to group","no-sort-expression":"Need at least one column to sort by","error-not-numeric":"Input is not a number","error-not-percent":"Input is not a percent value","error-not-currency":"Input is not a dollar value","error-percent-not-currency":"Percent cannot be converted to currency","error-currency-not-percent":"Currency cannot be converted to a percent","error-not-date":"Input is not a valid date or not a recognized date format","error-not-email":"Input is not an email","error-not-url":"Input is not a website","error-not-image-url":"Input is not an image URL","error-not-in-pick-list":"Input is not in pick list. Valid values: {{values}}","error-not-day-of-year":"Input is not a recognized date format","error-value-required":"This field is required","error-cannot-move-error-group":"Cannot move a group with an error value","error-cannot-move-group-below-error-group":"Cannot move a group below a group with an error value","error-bulk-op-too-big":"Cannot {{action}} more than {{threshold}} records at a time.","error-action-while-linking":"We're still updating this field. Please try {{action}}ing again in a moment.","book-error-forbidden-title":"Private","book-error-forbidden-message":"You don't have access to this book.","book-load-error-title":"Error loading book","book-load-error-message":"Either you're having a network problem, or you hit a bug.","sheet-import-error-title":"Error importing sheet","sheet-import-error-message":"Sorry, your import failed.","action-working-add-link":"Linking…","action-working-extract-supersheet":"Creating linked sheet…","action-working-remove-link":"Removing link…","action-working-paste-changes":"Pasting changes…","action-working-undo":"Undoing changes…","action-working-redo":"Redoing changes…","action-working-clearing-cells":"Clearing cells…","action-working-filling-cells":"Filling cells…","action-working-set-type":"Setting field type…","action-working-delete-records":"Deleting records…","action-working-delete-record":"Deleting record…","action-working-clear-header":"Clearing header…","action-working-clear-header-delete-records":"Clearing header and deleting records…","action-success-add-link":"Linked field “{{fieldName}}” to sheet “{{sheetTitle}}”.","action-success-delete-book":"Deleted book “{{title}}”.","action-success-delete-field":"Deleted field “{{displayName}}”.","action-success-hide-field":"Hid field “{{displayName}}”.","action-success-unhide-field":"Unhid field “{{displayName}}”.","action-success-hide-name":"Name field hidden.","action-success-delete-group":"Deleted group “{{name}}”.","action-success-delete-nav-item":"Deleted saved view “{{name}}”.","action-success-delete-record":"Deleted record.","action-success-clear-header":"Cleared header.","action-success-delete-records":"Deleted records.","action-success-clear-header-delete-records":"Cleared header and deleted records.","action-success-delete-sheet":"Deleted sheet “{{displayTitle}}.”","action-success-delete-subsheet":"Hid mentions from “{{name}}”.","action-success-delete-join-subsheet":"Hid expanded view of {{name}}.","action-success-extract-supersheet":"Created sheet “{{title}}”.","action-success-leave-book":"Left book “{{title}}”.","action-success-remove-link":"Removed link from field “{{fieldName}}” to sheet “{{sheetTitle}}”.","action-success-set-type":"Set type of “{{fieldName}}”.","action-success-delete-codelet":"Deleted codelet “{{title}}”","action-success-create-record":"Created “{{name}}”","error-socket-bad-version":"Fieldbook has been updated! Reload to get the latest version. (Live updates are paused until you reload.)","error-bad-server-response-version":"The version of Fieldbook in your browser is out of date. We've saved your changes, but you'll need to reload to continue.","error-must-reauthorize":"You have been logged out of Fieldbook, your changes have not been saved.  Please reload to sign in.","schema-update-network-error":"Error connecting for live updates—sorry, we're not sure what happened. A reload may fix this.","schema-update-book-removed":"This book has been removed.","schema-update-book-user-added":"This book has been shared with a new user. Reload to pick up this change.","schema-update-book-user-removed":"A user from this book has been removed. Reload to pick up this change.","schema-update-book-user-access":"A user from this book has changed permissions. Reload to pick up this change.","schema-update-sheet-updated":"Live updates paused because a sheet has been updated. Reload to resume.","schema-update-field-updated":"Live updates paused because a field has been updated. Reload to resume.","schema-update-subsheet-created":"Live updates paused because a linked sheet has been unhidden. Reload to resume.","schema-update-subsheet-updated":"Live updates paused because a linked sheet has been moved. Reload to resume.","schema-update-subsheet-removed":"Live updates paused because a linked sheet has been hidden. Reload to resume.","schema-update-access-changed":"This book has changed access permissions. Reload to resume live updates.","error-template":"Error {{action}}. This is our fault. Refresh the page and try again?","conflict-template":"Conflict {{action}}. Please try again after the process is finished.","action-add-book-user":"sharing sheet","action-add-link":"making link","action-add-missing-records":"adding missing links","action-set-aggregate":"setting aggregate","action-copy-book":"copying book","action-create-book":"creating book","action-create-field":"adding field","action-create-nav-item":"saving view","action-create-sheet":"creating sheet","action-update-book":"updating book","action-update-sheet":"updating sheet","action-create-record":"creating record","action-public-api-access":"changing public API access","action-create-subsheet":"adding linked sheet","action-delete-book":"deleting book","action-delete-book-user":"removing user","action-change-anonymous-access":"changing anonymous sharing","action-change-share-level":"changing user share level","action-generate-api-key":"generating api key","action-delete-api-key":"deleting api key","action-delete-field":"deleting field","action-hide-field":"hiding field","action-unhide-field":"unhiding field","action-hide-name":"hiding name field","action-delete-group":"deleting group","action-delete-nav-item":"deleting saved view “{{name}}”","action-delete-record":"deleting record","action-delete-records":"deleting records","action-delete-sheet":"deleting sheet “{{title}}”","action-delete-subsheet":"hiding mentions","action-delete-join-subsheet":"hiding expanded view","action-group-field":"creating grouped view","action-insert-group":"inserting group","action-insert-record":"inserting record","action-leave-book":"leaving book","action-move-field":"moving column","action-move-sheet":"moving sheet","action-move-nav-item":"moving nav item","action-move-subsheet":"moving subsheet","action-clear-header":"clearing header","action-clear-header-delete-records":"deleting records","action-redo":"redoing action","action-remove-link":"removing link from field","action-rename-group":"renaming group","action-rename-subsheet":"renaming mentions","action-reorder-group":"moving group","action-reorder-record":"moving record","action-set-name-field":"setting link display text","action-undo":"undoing action","action-update-field":"updating column","action-update-field-formula":"updating formula","action-update-field-name":"updating field name","action-update-field-width":"saving column width","action-join-organization":"joining organization","action-stripe-subscription":"subscribing to plan","action-create-organization":"creating organization","action-change-access-level":"changing access level","action-create-plan":"creating paid plan","action-update-record":"updating record","action-update-record-paste":"updating record for paste","action-update-title":"updating title","action-update-locale":"updating locale","action-update-description":"updating description","action-update-collapse":"updating description expansion status","action-save-codelet":"saving codelet","action-revert-codelet":"reverting codelet","action-deploy-codelet":"deploying codelet","action-delete-codelet":"deleting codelet","action-set-type":"setting type","action-fetch-organization":"fetching organization info","action-fetch-user":"fetching user info","action-update-user":"updating user info","action-update-missing-links":"updating missing links","action-config-name-field":"configuring name field","action-add-form":"adding form","action-update-form":"updating form","action-fetch-sheet":"loading sheet","action-submit-form":"submitting form","import-filetype-error":"You can only import from CSV files. The file “{{name}}” appears to be of type {{type}}.","client-error":"Something went wrong, and it's our fault. Refresh the page and try again?","frozen-filter-description":"Filter paused while you edit","resume-filters":"Resume filter","outstanding-requests-warning":"We're still saving your changes; if you leave or reload this page now, we might lose some of them.","aggregate-name-sum":"Sum","aggregate-name-max":"Max","aggregate-name-min":"Min","aggregate-name-avg":"Average","aggregate-name-first":"First","aggregate-name-last":"Last","aggregate-name-blank":"Blanks","aggregate-name-count":"Count","aggregate-name-non-blank":"Nonblanks","aggregate-name-none":"None","aggregate-name-default":"Sum","aggregate-type-name-default":"Default","aggregate-name-rows":"Rows","aggregate-name-cols":"Columns","aggregate-name-cells":"Cells","invalid-email":"Invalid email address","formula-panel-text":"Set formula for this column:","report-formula-panel-text":"Set summary formula for this column:","formula-panel-save":"Save","formula-panel-equals":"＝",selection:"Selection","field-icon-link":"This field links to {{name}}","field-icon-name":"When other sheets link to here, the link text comes from this field","col-tip-id":"ID number for each record (automatically assigned)","pending-records-done-remove":'The record you were editing has been filtered by the query "{{query}}".',"pending-records-done-sort":"The record you were editing has been sorted to a new position.","pending-records-remove":'The record you are editing does not match the query "{{query}}". It will be hidden when you finish editing.',"pending-records-sort":"The record you are editing will be sorted to a new position when you finish editing.","help-ask":"Ask us a question…","help-placeholder":"Search help by keyword","command-search-tip":"Search for keyword “{{keyword}}”","command-column-search-tip":"Search column “{{column}}” for keyword “{{keyword}}”","command-where-tip":"Filter for records matching: {{formula}}","command-sort-tip":"Sort by “{{column}}”","command-sort-desc-tip":" (descending)","command-group-tip":"Group by “{{column}}”","command-more-tip":", then by “{{column}}”","context-name-secondary-field":"secondary field","context-name-secondary-report-function":"another summary function","context-name-function":"function...","context-name-search-keyword":"keyword search","context-name-filter-formula":"formula","context-name-by-column":"column","context-name-default-filter":"column search","context-name-default-filter-keyword":"keyword","context-name-more-completions":"…","context-name-value":"value","context-name-field":"field","context-name-boolean-formula":"formula","context-name-report-functions":"function1, function2, …","context-name-report-summary-functions":"summary functions","extra-completions":"{{amountOver}} more, type to search","completion-back":"Back","completion-done":"Done","log-render":"Called {{name}} on view {{cid}} with class: {{className}}","trackjs-url":"https://my.trackjs.com/users/filtered?userid={{email}}","record-list-toggle-name":"Show name column","record-list-hide-name":"Hide name column","record-show-names":"Display record names/titles","record-show-ids":"Display only record ID numbers","link-name-use-ids":"Use IDs for links","link-name-add":"Add name column to {{sheetTitle}}","link-modal-choose-source":"Choose a column to link","link-modal-choose-target":"Drag to the tab of the sheet you want to link to","link-modal-new-sheet":"New sheet","link-modal-no-linkable-field":"No linkable columns here. Try adding a new one first?","email-confirm-title":"Verify your email address","email-confirm-sent":"We've sent a verification link to your email address","email-confirm-success":"Your email address is verified!","email-confirm-success-title":"You're verified!","email-confirm-description-sharing":"\n      In order to access the sharing features of Fieldbook,\n      you'll need to verify your email address\n    ","email-confirm-description-upgrade":"\n      In order to upgrade your Fieldbook account,\n      you'll need to verify your email address\n    ","email-confirm-description-join":"\n      In order to join an organization,\n      you'll need to verify your email address\n    ","email-confirm-description-organization":"\n      In order to access the organization features of Fieldbook,\n      you'll need to verify your email address\n    ","email-confirm-resend":"Email me the link","email-confirm-complete":"I'm verified!","no-link-reason-default":"Linking is not allowed from this view.","no-link-reason-report":"Links cannot be created from a report view.","value-link-missing-tooltip":"“{{text}}” not in “{{targetTitle}}” (click to add)","value-link-missing-tooltip-no-add":"“{{text}}” not in “{{targetTitle}}”","value-link-invalid":"Not a valid ID number for sheet “{{targetTitle}}”","record-detail-temporary":"(not saved)","default-record-name":"Record","configure-name":"Configure this column…","name-config-title":"Choose a unique descriptor for {{sheetTitle}}","name-config-tab-single":"Single Column","name-config-tab-multi":"Multiple Columns","name-config-tab-numeric":"Numeric ID","name-config-single-no-option":"Since all of your columns are linked, none of them can be used.","name-config-single-description":"Choose a column below to be used as the descriptor column.","name-config-multi-description":"Click columns below to select/deselect. Drag in the box above to reorder.","name-config-multi-separator":"Separator:","name-config-multi-formula":"Advanced: Set a formula for the descriptor","name-config-numeric-description":"Fieldbook will assign a numeric ID automatically.","default-name-separator":" – ","tutorials-title":"How to be awesome with Fieldbook","tutorials-intro":"Learn what powers Fieldbook gives you, and how to wield them effectively, in these brief tutorials:","tutorials-subsheets-title":"Add more detail to a row (1 min)","tutorials-link-tool-title":"Add detail to a column without duplication (1 min)","tutorials-querying-title":"Sort, filter and group like a pro (1 min)","add-record-column":"Add Field","field-autocomplete-suffix":"(link to {{title}})","add-record":"Add",upload:"Upload","csv-upload-progress-bar-title":"Uploading: {{progress}}% complete","csv-progress-bar-finished-title":"Creating your book…","csv-progress-bar-finished-title-in-book":"Creating your sheet…","error-csv-file-size-too-big":"File is too big ({{fileSizeInMb}}MB). Max file size: {{maxFileSize}}MB","pending-sheet-message":"Importing: ","not-seeing-correct-events":"Not the right events?","reauth-eventbrite":"Switch user","eventbrite-no-events":"No events found","integration-name-eventbrite":"Eventbrite","integration-name-mailchimp":"MailChimp","mailchimp-book-title":"{{account_name}} MailChimp Lists","bad-mailchimp-profile":'This user can\'t sync lists because it only has "{{role}}" permissions on this MailChimp account.  Sign in as a user with Owner, Admin, or Manager permissions to import these lists.',"onboarding-title":"Quick tour","onboarding-subtitle":"Click to explore the highlights:","plan-name-basic":"Basic","plan-name-business":"Business","mailchimp-duplicate-error":"Another member already has this email address.","integration-error-in-field":"Error in field: {{fields}}","integration-error-in-fields":"Errors in fields: {{fields}}","error-page-title-not-found":"Not found","error-page-title-bad-request":"Broken link","error-page-title-other-client-error":"Something went wrong","error-page-title-internal-server-error":"Something went wrong","error-page-description-not-found":"Sorry… we honestly don't know what you were looking for. It might have been moved or deleted.","error-page-description-bad-request":"If you clicked this link from an email, it might have gotten cut off. In any case… it doesn't work.","error-page-description-other-client-error":"As engineers like to say, “this should never happen.”","error-page-description-internal-server-error":"Sorry, this is our fault. Our engineering team has already been alerted.","error-graphic-shrug":"¯\\_(ツ)_/¯","error-graphic-dead":"(✖╭╮✖)","error-intercom-not-loaded":"Uh-oh: chat failed to load. If you're using an ad blocker, try adding an exception for intercom.io. Alternately, email us: support@fieldbook.com","date-format":"Date format","date-format-us":"12/31 (month/day)","date-format-eu":"31/12 (day/month)","number-format":"Number format","number-format-us":"1,234.5","number-format-eu":"1.234,5","forms-save":"Save","forms-submit":"Submit","forms-save-and-new":"Save & New","form-default-description":"Use this space for an explanation or instructions.","form-picklist-prompt":"Select…","form-submit-thank-you":"Got it, thanks!","form-validation-message":"Oops, there are some problems here—please see above","form-share-externally":"Share this form externally","form-update-share":"update share settings","form-share-via-iframe":"Embed this form on your website:","error-form-disabled":"This form has been disabled","form-no-multiline-validation":"Canʼt set multiline on a {{validation.capitalize()}} column, only Generic or Text.","form-no-multiline-link":"Link fields cannot be multiline. Remove the link first.","form-no-fields-to-add":"All fields are already shown."},i={};
_.each(n,function(e,t){i[t]=_.template(e)});var r="A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",o=new RegExp("[^_0-9"+r+"]+","g");i.slug=function(e){return _.isString(e)?(e=e.replace(o," "),e=e.trim(),e=e.replace(/\s+/g,"_"),e=e.toLowerCase(),/^\d/.test(e)&&(e="_"+e),e):void 0},i.normalizeCase=function(e){return void 0===e||null===e?"":e.toString().toLowerCase()},i.normalize=function(e){return e?e.toString().trim():""},i.escapeRegExp=function(e){return i.escapeChars(e,".*+?^=!:${}()|\\[\\]/")},i.escapeChars=function(e,t){var n=new RegExp("(["+t+"\\\\])","g");return e.replace(n,"\\$1")},i.isBlank=function(e){return!e||0===e.trim().length},i.defaultString=function(e,t){return i.isBlank(e)?i[t]():e},i.contains=function(e,t){var n=i.normalizeCase(e),r=i.normalizeCase(t);return n&&-1!==n.indexOf(r)},i.capitalize=function(e){return e.capitalize()},i.truncate=function(e,t){return null==e?"":e.length<=t?e:e.slice(0,t-1)+"…"},i.padToWidth=function(e,t){for(var n=t-e.length;n-->0;)e+=" ";return e},i.get=function(){return this[_.chain(arguments).toArray().compactNullish().value().join("-")]},i.ns=function(e){return function(t){return i[e+"-"+t]}},i.countLines=function(e){return e.split("\n").length},i.stencil=function(e,t){var n=this[e];return n?n(t):null};var s=function(e,t){var n=e[0].trim(),r=i[n];if(!r)throw new AppError("Bad template name: "+n);return r(t)};e.s=s,t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],250:[function(e,t){"use strict";var n,i=t.exports=BaseObject.extend({offset:0,sync:function(e){this.offset=e-Date.now()},now:function(){return this.adjust(Date.now())},adjust:function(e){return this.offset+e}});Object.defineProperty(i,"singleton",{get:function(){return n||(n=new i),n}})},{}],251:[function(){(function(e){"use strict";e.dlog=console.log.bind(console)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],252:[function(e,t,n){"use strict";var i=e("./types"),r=e("../strings"),o=(n.computeAggregate=function(e,t){var n;if(!(e in s))throw new AppError("Cannot find aggregate with type: "+e);n=s[e];var i=new n(t);return i.canPerform()?{displayName:i.displayName,value:i.perform()}:null},n.Aggregate=function(){this.initialize.apply(this,arguments)});_.extend(o.prototype,{initialize:function(e){var t=this;this.values=_.map(e,function(e){return _.filter(e,t.filter)})},canPerform:function(){return!0},hasInterestingData:function(){return this.canPerform()},filter:function(){return!0},perform:function(){throw new AppError("subclass should implement perform")}}),extendable(o);var s=n.registry={},a=function(e){s[e.prototype.type]=e},l=n.LinearAggregate=o.extend({initialize:function(){o.prototype.initialize.apply(this,arguments),this.values=_.flatten(this.values,!0)}}),c=n.NumberAggregate=l.extend({canPerform:function(){return this.values.length>0},filter:function(e){return e.isNumericValue()}}),u=n.SumAggregate=c.extend({type:"sum",canPerform:function(){return!0},hasInterestingData:function(){return this.values.length>0},perform:function(){return 0===this.values.length?i.createNumber(0):_.reduce(_.rest(this.values),function(e,t){return e.performOperation("+",t)},this.values[0])}}),d=n.MinMaxAggregate=l.extend({canPerform:function(){return this.values.length>0},filter:function(e){return!e.isError()&&!e.isEmpty()&&!e.isBoolean()},perform:function(){var e=this;return _.reduce(this.values,function(t,n){var i=t.performOperation(e.operation,n);return i.booleanValue()&&(t=n),t},this.values[0])}}),h=n.MaxAggregate=d.extend({type:"max",minArgs:1,maxArgs:Number.MAX_VALUE,operation:"<"}),f=n.MinAggregate=d.extend({type:"min",minArgs:1,maxArgs:Number.MAX_VALUE,operation:">"}),p=n.FirstAggregate=l.extend({type:"first",canPerform:function(){return this.values.length>0},perform:function(){return this.values[0]}}),m=n.LastAggregate=l.extend({type:"last",canPerform:function(){return this.values.length>0},perform:function(){return this.values[this.values.length-1]}}),g=n.AverageAggregate=c.extend({type:"avg",perform:function(){if(0===this.values.length)return i.createEmpty();var e=i.createNumber(this.values.length),t=_.reduce(_.rest(this.values),function(e,t){return e.performOperation("+",t)},this.values[0]);return t.performOperation("/",e)}}),v=n.CountAggregate=l.extend({type:"count",commandMinArgs:0,commandMaxArgs:0,minArgs:1,maxArgs:Number.MAX_VALUE,perform:function(){return i.createNumber(this.values.length)}}),b=n.BlankAggregate=v.extend({type:"blank",minArgs:1,maxArgs:Number.MAX_VALUE,commandMinArgs:1,commandMaxArgs:Number.MAX_VALUE,hasInterestingData:function(){return this.values.length>0},filter:function(e){return e.isBlank()}}),y=n.NonblankAggregate=v.extend({type:"non-blank",minArgs:1,maxArgs:Number.MAX_VALUE,commandMinArgs:1,commandMaxArgs:Number.MAX_VALUE,hasInterestingData:function(){return this.values.length>0},filter:function(e){return!e.isBlank()}}),w=n.NoneAggregate=o.extend({type:"none",canPerform:function(){return!1}}),x=n.DefaultAggregate=u.extend({type:"default",canPerform:function(){return _.any(this.values,function(e){return e.isNumericValue()})}}),k=n.RowsAggregate=o.extend({type:"rows",canPerform:function(){return this.values.length>1},perform:function(){return i.createNumber(this.values.length)}}),S=n.ColumnsAggregate=o.extend({type:"cols",canPerform:function(){return this.values[0].length>1},perform:function(){return i.createNumber(this.values[0].length)}}),C=(n.CellsAggregate=o.extend({type:"cells",canPerform:function(){var e=this.values.length,t=this.values[0].length;return e>1&&t>1},perform:function(){return i.createNumber(_.flatten(this.values).length)}}),n.selectionAggregates=[u,g,k,S]),E=n.fieldAggregates=[x,u,f,g,h,b,y,v,w],I=n.expressionAggregates=[v,u,f,g,h,p,m,b,y];_.each(E,a),_.chain(E).concat(C,I).each(function(e){var t=e.prototype.type,n=r["aggregate-name-"+t](),i=r["aggregate-type-name-"+t];i=i?i():n;var o=e.prototype.functionName||r.slug(t);e.prototype.displayName=n,e.prototype.typeName=i,e.prototype.functionName=o})},{"../strings":249,"./types":256}],253:[function(e,t,n){"use strict";var i=n.types=e("./types"),r=n.sorting=e("./sorting"),o=n.aggregates=e("./aggregates"),s=n.input=e("./input");n.clone=i.clone,n.create=i.create,n.createEmpty=i.createEmpty,n.createNumber=i.createNumber,n.diffRefs=i.diffRefs,n.isEmpty=i.isEmpty,n.isRef=i.isRef,n.isValueObject=i.isValueObject,n.makeError=i.makeError,n.makeInputError=i.makeInputError,n.makeJSON=i.makeJSON,n.makeMultiRef=i.makeMultiRef,n.makeRef=i.makeRef,n.parseType=i.parseType,n.getType=i.getType,n.splitRefString=i.splitRefString,n.stringToRef=i.stringToRef,n.SortKey=r.SortKey,n.sortValues=r.sortValues,n.sortWithKeys=r.sortWithKeys,n.OLD_VALUE_OVERRIDE="OVERRIDE",n.computeAggregate=o.computeAggregate,n.getValidator=s.getValidator,n.createValueWithInputType=s.createValueWithInputType,n.createValidator=s.createValidator},{"./aggregates":252,"./input":254,"./sorting":255,"./types":256}],254:[function(e,t,n){(function(t){"use strict";var i=e("../errors"),r=(e("../strings"),e("../commas"),e("./types")),o=e("validator"),s=e("moment"),a=n.InputType=BaseObject.extend({constructorName:"InputType",propertyNames:["input","required","localeOptions"],initialize:function(){r.isValueObject(this.input)&&(this.input=this.input.getInput()),this.valueObject=r.create(this.input,{localeOptions:this.localeOptions})},isValid:function(){if(null!=this.valid)return this.valid;try{this.valueObject.isEmpty()?this.checkEmptyValue():this.validate()}catch(e){if(!(e instanceof i.InputValidationError))throw e;this.error=e}return this.valid=!this.error,this.valid},checkEmptyValue:function(){if(this.required)throw new i.InputValidationError("error-value-required")},validate:_.noop,canonicalValue:function(){var e=this,t=function(){return e.isValid()?e.valueObject.isEmpty()?e.valueObject:e.coercedValue():new r.InputErrorValue(e.input,e.error)}();return t.input=this.input,t}}),l=n.registry={},c=a.extend;a.extend=function(e){var t=c.apply(this,arguments);if(!e.type)throw new AppError("Subclass must have type parameter");return l[e.type]=t,t};var u=(n.GenericInput=a.extend({constructorName:"GenericInput",type:"generic",validate:_.noop,coercedValue:function(){return this.valueObject}}),n.TextInput=a.extend({constructorName:"TextInput",type:"text",coercedValue:function(){var e=String(this.input).trim();return new r.StringValue(e)}})),d=(n.LinkInput=u.extend({constructorName:"LinkInput",type:"link"}),n.NumberInput=a.extend({constructorName:"NumberInput",type:"number",validate:function(){this.valueObject.isNumericValue()||this.numericError()},numericError:function(){throw new i.InputValidationError("error-not-numeric")},coercedValue:function(){return new r.NumericValue(this.valueObject.numericValue())}})),h=(n.CurrencyInput=d.extend({constructorName:"CurrencyInput",type:"currency",validate:function(){if(d.prototype.validate.apply(this,arguments),"percent"===this.valueObject.type)throw new i.InputValidationError("error-percent-not-currency")},numericError:function(){throw new i.InputValidationError("error-not-currency")},coercedValue:function(){return new r.CurrencyValue(this.valueObject.numericValue())}}),n.PercentInput=d.extend({constructorName:"PercentInput",type:"percent",coercedValue:function(){var e=this.valueObject.numericValue();return"numeric"===this.valueObject.type&&(e/=100),new r.PercentValue(e)},numericError:function(){throw new i.InputValidationError("error-not-percent")},validate:function(){if(d.prototype.validate.apply(this,arguments),"currency"===this.valueObject.type)throw new i.InputValidationError("error-currency-not-percent")}}),n.DateInput=a.extend({constructorName:"DateInput",type:"date",conversionStrings:["today","tomorrow","yesterday"],validate:function(){if(t._getUnderscore(this.conversionStrings).contains(this.valueObject.displayValue()))return!0;if(!this.valueObject.isDate())throw new i.InputValidationError("error-not-date")},canonicalValue:a.prototype.canonicalValue.withResult(function(e){return t._getUnderscore(this.conversionStrings).contains(this.input)&&(e.input=e.displayValue()),e}),coercedValue:function(){var e=this.valueObject.displayValue();return"today"===e?new r.DateValue(s()):"tomorrow"===e?new r.DateValue(s().add(1,"day")):"yesterday"===e?new r.DateValue(s().subtract(1,"day")):this.valueObject}}),n.EmaiInput=a.extend({constructorName:"EmailInput",type:"email",regex:/^[^@()\[\]<>]+@[^@]+\.[a-zA-Z]+$/,validate:function(){if(!this.regex.test(this.input.trim()))throw new i.InputValidationError("error-not-email")},coercedValue:function(){return new r.StringValue(this.input.trim())}}),n.WebsiteInput=a.extend({constructorName:"WebsiteInput",type:"website",errorSlug:"error-not-url",validate:function(){if(!o.isURL(this.input.trim()))throw new i.InputValidationError(this.errorSlug)},coercedValue:function(){return new r.StringValue(this.input.trim())}})),f=(n.PickListInput=a.extend({constructorName:"PickListInput",type:"picklist",propertyNames:function(){return a.prototype.propertyNames.concat(["enum"])},initialize:function(){if(a.prototype.initialize.apply(this,arguments),!this.enum)throw new AppError("No enum specified for pick list");this.validValues=_.indexBy(this.enum,function(e){return e.toLowerCase().trim()});var e=this.input||"";this.canonicalInput=e.toString().trim().toLowerCase()},validate:function(){if(!this.getEnumValue())throw new i.InputValidationError("error-not-in-pick-list",{values:this.enum.join(", ")})},getEnumValue:function(){return this.validValues[this.canonicalInput]},coercedValue:function(){return r.create(this.getEnumValue(),{localeOptions:this.localeOptions})}}),["M/D YYYY","M-D YYYY","MMM D YYYY"]);_.each(["st","nd","rd","th"],function(e){f.push("MMM D["+e+"] YYYY")});{var p=(n.DayOfYearInput=a.extend({constructorName:"DayOfYearInput",type:"dayofyear",initialize:function(){a.prototype.initialize.apply(this,arguments),this.moment=this.valueObject.isDate()||this.valueObject.isDayOfYear()?this.valueObject.moment():s.from(this.input+" 2012",f,!0)},validate:function(){if(!this.moment.isValid())throw new i.InputValidationError("error-not-day-of-year")},coercedValue:function(){return new r.DayOfYearValue(this.moment.format("MM/DD"))}}),n.ImageInput=h.extend({constructorName:"ImageInput",type:"image",errorSlug:"error-not-image-url",coercedValue:function(){return new r.ImageValue(this.input.trim())}}),n.getValidator=function(e){if(e in l)return l[e];throw new AppError("No registered validator for "+e)}),m=n.createValidator=function(e,t){var n=p(e),i=new n(t);return i};n.createValueWithInputType=function(e,t){var n=m(e,t);return n.validate(),n.canonicalValue()}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../commas":238,"../errors":242,"../strings":249,"./types":256,moment:"moment",validator:750}],255:[function(e,t,n){"use strict";var i=e("./types"),r=n.sortWithKeys=function(e,t){t||(t=[new o(_.identity,!0)]);var n=_.map(e,function(e,n){return{index:n,sortValues:_.map(t,function(t){return t.sortValueFor(e)}),value:e}});return n.sort(function(e,t){for(var n=0,i=_.zip(e.sortValues,t.sortValues),r=0;r<i.length;r++){var o=i[r][0],s=i[r][1];if(n=o.compare(s),0!==n)break}return 0===n&&(n=e.index-t.index),n}),_.map(n,function(e){return e.value})};n.sortValues=function(e,t){return r(e,[new o(_.identity,!t)])};var o=n.SortKey=function(){this.initialize.apply(this,arguments)};_.extend(o.prototype,{initialize:function(e,t,n){this.func=e,this.ascending=t,this.orderedValueMap=n||{}},sortValueFor:function(e){var t=this.func(e),n=t;i.isValueObject(n)||(n=i.create(t));var r=this.orderedValueFor(n);return null!==r&&(n=new a(n,r)),new s(n,this.ascending)},orderedValueFor:function(e){if(!this.orderedValueMap)return null;var t=e.displayValue();return t in this.orderedValueMap?this.orderedValueMap[t]:null}});var s=function(){this.initialize.apply(this,arguments)};_.extend(s.prototype,{initialize:function(e,t){this.value=e,this.ascending=t},compare:function(e){var t=this.value.differentTypeCompare(e.value);return"empty"!==this.value.type&&"empty"!==e.value.type?this.ascending?t:-1*t:"empty"===this.value.type&&"empty"===e.value.type?0:"empty"===this.value.type?1:-1}});var a=i.Value.extend({type:"enum",initialize:function(e,t){this.baseValue=e,this.enumOrder=t,this.value=e.value,this.textValue=e.textValue,this.precedence=e.precedence},compare:function(e){return this.enumOrder-e.enumOrder},forwarder:function(e,t){return this.baseValue[e].apply(this.baseValue,t)},callOperation:function(){return this.forwarder("callOperation",arguments)},hasOperator:function(){return this.forwarder("hasOperator",arguments)},numericValue:function(){return this.forwarder("numericValue",arguments)},booleanValue:function(){return this.forwarder("booleanValue",arguments)},displayValue:function(){return this.forwarder("displayValue",arguments)},saveValue:function(){return this.forwarder("saveValue",arguments)}});i.addOrder(a,0)},{"./types":256}],256:[function(e,t,n){(function(i){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=e("../errors"),s=e("moment"),a=e("../strings"),l=e("../commas"),c=e("numeral"),u=n.registry={};c.language("eu",{delimiters:{thousands:".",decimal:","}});var d=function(e){var t=e.prototype.type;u[t]=e,e.type=t},h=n.create=function(e,t){var n=p.create(e,t),i=_.soak(e,"input");return i&&(n.input=i),n},f=function(e,t,n){return isFinite(e)?("eu"===_.soak(n,"localeOptions.number")&&c.language("eu"),c(e).format(t)):String(e)}.after(function(){c.language("en")}),p=n.Value=function(){this.initialize.apply(this,arguments)};_.extend(p.prototype,{type:"generic",initialize:function(e,t){null==e&&(e=""),this.textValue=e.toString(),null==t&&(t=e),this.value=t},validateRef:_.noop,defaultOperators:{"+":function(e,t){return e.numericValue()+t.numericValue()},"-":function(e,t){return e.numericValue()-t.numericValue()},"*":function(e,t){return e.numericValue()*t.numericValue()},"/":function(e,t){var n=t.numericValue();if(0===n)throw new o.ExecutionError("error-div-by-zero");return e.numericValue()/n},"^":function(e,t){return Math.pow(e.numericValue(),t.numericValue())},neg:function(e){return-e.numericValue()},":":function(e,t){return x.make(a.contains(e.displayValue(),t.displayValue()))},and:function(e,t){return x.make(e.booleanValue()&&t.booleanValue())},or:function(e,t){return x.make(e.booleanValue()||t.booleanValue())},"!":function(e){return x.make(!e.booleanValue())},"=":function(e,t){return x.make(0===e.differentTypeCompare(t))},"!=":function(e,t){return x.make(0!==e.differentTypeCompare(t))},"<":function(e,t){return x.make(e.differentTypeCompare(t)<0)},">":function(e,t){return x.make(e.differentTypeCompare(t)>0)},"<=":function(e,t){var n=e.differentTypeCompare(t);return x.make(0>=n)},">=":function(e,t){var n=e.differentTypeCompare(t);return x.make(n>=0)}},isValueObject:!0,differentTypeCompare:function(e){return this.order===e.order?this.compare(e):this.order-e.order},callOperation:function(e,t,n){var i=this.operators[e].call(this,t,n);return D(i)?i:new this.constructor(i)},numericValue:function(){return this.value},booleanValue:function(){return this.value},displayValue:function(){return this.textValue},getInput:function(){return this.input?this.input.toString():this.displayValue()},groupingValue:function(){return this.displayValue()},exprValue:function(){return this.displayValue()},toString:function(e){return this.displayValue(e)},valuesList:function(){return[]},valueByAddingRef:function(e){return e},valueByRemovingRef:function(){return P()},hasRef:function(e){return e.id?this.hasId(e.id):this.hasMissingRefWithName(e.name)},isError:_.constant(!1),isInputError:_.constant(!1),isRef:_.constant(!1),isMultiRef:_.constant(!1),isDate:_.constant(!1),isDayOfYear:_.constant(!1),isImage:_.constant(!1),isEmpty:_.constant(!1),isNumericValue:_.constant(!1),isNaN:_.constant(!1),isMissing:_.constant(!1),isString:_.constant(!1),isBoolean:_.constant(!1),hasId:_.constant(!1),hasMissingRefWithName:_.constant(!1),isRightAligned:_.constant(!1),editableText:function(e){return this.toString(e)},isEmptyRef:function(){return this.isRef()&&!this.valuesList().length},isBlank:function(){return this.isEmpty()||this.isEmptyRef()},isEqual:function(e){return 0===this.differentTypeCompare(e)},linkUrl:_.constant(null),linkUrlTemplate:_.constant(""),saveValue:function(){return this.textValue},highestPrecedenceType:function(e){return e?this.precedence>=e.precedence?this:e:this},context:function(e){return e=_.defaults(e||{},{defaultString:""}),{text:this.displayValue(e)||e.defaultString}},linkContext:function(e){return this.context(e)},hasOperator:function(e){return e in this.operators},performOperation:function(e,t){var n=this.highestPrecedenceType(t);if(n.hasOperator(e))return n.callOperation(e,this,t);var i={operator:e,a:this.value},r="error-unknown-operator-1";throw t&&(i.b=t.value,r="error-unknown-operator-2"),new o.ExecutionError(r,i)},toJSON:function(){return _.extend(this.jsonAttributes(),{type:this.type})},jsonAttributes:function(){return{value:this.saveValue(),input:this.getInput()}},apiValue:function(){return this.displayValue()}}),p.parse=function(e){return new this(e.value)},p.prototype.operators=p.prototype.defaultOperators,p.prototype.overrideOperators=function(e){var t=this;this.operators=_.clone(this.operators),_.each(e,function(e,n){void 0!==e?t.operators[n]=e:delete t.operators[n]})},p.create=function(e,t){if(D(e))return e;if(_.isObject(e)&&e.type)return q(e,t);_.isString(e)&&(e=e.trim());var n=$(e,t),i=_.find(j,function(i){return i.verifier(e,n,t)});if(!i)throw new AppError("can't determine type for '"+e+"'");return i.make?i.make(e,n):new i(e,n,t)},extendable(p),p.verifier=function(){return!0};var m=p.extend;p.extend=function(){var e=m.apply(this,arguments);return d(e),e};var g=n.NumericValue=p.extend({type:"numeric",initialize:function(e,t){if(_.isNumber(e))this.value=e,this.textValue=e.toString();else{if(null==t){var n="undefined"==typeof e?"undefined":r(e);throw new AppError("Cannot parse "+n+" as numeric")}this.value=t,this.textValue=t.toString()}},isNumericValue:_.constant(!0),isRightAligned:_.constant(!0),isNaN:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return isNaN(this.numericValue())}),booleanValue:function(){return 0!==this.value},exprValue:function(){return this.value.toString()},apiValue:function(){return this.value},compare:function(e){return this.numericValue()-e.numericValue()},saveValue:function(){return this.value},jsonAttributes:function(){return{value:this.value,input:this.getInput()}},formatNumber:function(e,t){t=t||{};var n;return n=t.numericCommas?"0,0[.][000]":"0[.][000]",f(e,n,t)},displayValue:function(e){return this.formatNumber(this.value,e)},formatForEdit:function(e,t){return"eu"===_.soak(t||{},"localeOptions.number")?e.toString().replace(".",","):e.toString()},editableText:function(e){return this.formatForEdit(this.value,e)}});g.prototype.overrideOperators({"/":function(e,t){var n=t.numericValue();if(0===n)throw new o.ExecutionError("error-div-by-zero");var i=e.numericValue()/n;if(e.type===t.type)return new g(i);if("numeric"===t.type){if("percent"===e.type)return new b(i);if("currency"===e.type)return new v(i)}return i}}),g.verifier=function(e,t){return _.isNumber(t)};var v=(n.createNumber=function(e){return new g(e)},n.CurrencyValue=g.extend({type:"currency",displayValue:function(e){return this.value>=0?"$"+this.formatNumber(this.value,e):"-$"+this.formatNumber(Math.abs(this.value),e)},formatNumber:function(e,t){t=t||{};var n;return n=t.numericCommas?"0,0[.]00":"0[.]00",f(e,n,t)},editableText:function(e){var t=this.formatForEdit(Math.abs(this.value),e);return this.value>=0?"$"+t:"-$"+t},saveValue:function(){return this.value>=0?"$"+this.value.toString():"-$"+Math.abs(this.value).toString()}}));v.verifier=function(e,t){if(_.isNumber(t)){var n=e.toString().trim();return n.match(/^-?\$/)?!0:n.match(/^\(\$/)&&n.match(/\)$/)?!0:!1}return!1};var b=n.PercentValue=g.extend({type:"percent",displayValue:function(e){return this.formatNumber(100*this.value,e)+"%"},editableText:function(e){return this.formatForEdit(100*this.value,e)+"%"}});b.verifier=function(e,t){return _.isNumber(t)?/%$/.test(e.toString().trim()):!1};var y=n.StringValue=p.extend({type:"string",isString:_.constant(!0),initialize:function(e){this.value=e,this.textValue=e.toString()},booleanValue:function(){return"false"!==this.displayValue().trim().toLowerCase()},compare:function(e){return this.displayValue().localeCompare(e.displayValue())},differentTypeCompare:function(e){return"empty"===e.type&&""===this.displayValue().trim()?0:p.prototype.differentTypeCompare.apply(this,arguments)}});y.prototype.overrideOperators({"+":function(e,t){return e.displayValue()+t.displayValue()},"-":void 0,"*":void 0,"/":void 0,"^":void 0,neg:void 0}),y.verifier=function(e){return _.isString(e)&&""!==e&&!/^\s*$/.test(e)};var w=n.EmptyValue=p.extend({type:"empty",initialize:function(){this.value="",this.textValue=""},booleanValue:function(){return!1},numericValue:function(){return 0},compare:function(){return 0},differentTypeCompare:function(e){return"string"===e.type&&""===e.displayValue().trim()?0:p.prototype.differentTypeCompare.apply(this,arguments)},isEmpty:function(){return!0},jsonAttributes:function(){return null},apiValue:function(){return null}});w.parse=function(){return w.make()},w.verifier=function(e){return null==e?!0:""===e?!0:_.isString(e)&&/^\s*$/.test(e)?!0:!1},w.make=function(){return P()};var x=n.BooleanValue=p.extend({type:"boolean",isBoolean:_.constant(!0),compare:function(e){return this.value===e.value?0:this.value?-1:1},jsonAttributes:function(){return{value:this.value,input:this.getInput()}},apiValue:function(){return this.value}});x.verifier=function(e){return _.isBoolean(e)},x.parse=function(e){return x.make(e.value)},x.prototype.overrideOperators({"+":void 0,"-":void 0,"*":void 0,"/":void 0,"^":void 0,neg:void 0,">":void 0,"<":void 0,"<=":void 0,">=":void 0}),x.make=function(e,t){var n;return _.isBoolean(e)?n=e:_.isString(t)&&(n="true"===t.toString().toLowerCase()),n?k:S};var k=new x(!0),S=new x(!1),C=n.RefValue=p.extend({type:"ref",initialize:function(e,t,n,i,r){e&&e._id?(this.id=e._id,this.sheetId=e.sheetId,this.name=e.name,this.ordinal=e.ordinal,this.shortId=e.shortId):(this.id=C.convertId(e),this.sheetId=t,this.name=n,this.ordinal=i,this.shortId=r)},displayValue:function(){return this.name},validateRef:function(){if(!(null!=this.id||this.name&&this.sheetId))throw new AppError("Malformed ref value")},booleanValue:function(){return!0},refOrdinal:function(){var e=this.linkedRecord();return e?e.get("ordinal"):Number.MAX_VALUE},compare:function(e){if(this.isMultiRef()||e.isMultiRef()){var t=this.valuesList(),n=e.valuesList();return _.reduce(_.zip(t,n),function(e,t){return 0!==e?e:t[0]?t[1]?t[0].ordinalCompare(t[1]):1:-1},0)}return this.ordinalCompare(e)},valuesList:function(){return[this]},valueByAddingRef:function(e){return e.isRef()?e.isMultiRef()?e.valueByAddingRef(this):e.hasRef(this)?e:G([this,e]):this},valueByRemovingRef:function(e){return e.hasRef(this)?P():this},ordinalCompare:function(e){return this.refOrdinal()-e.refOrdinal()},isRef:function(){return!0},hasId:function(e){return!(!this.id||!e||this.id.toString()!==e.toString())},hasMissingRefWithName:function(e){return this.id?!1:null==e?!1:this.name===e},linkUrl:function(){return this.id?"/records/"+this.id:null},linkUrlTemplate:function(){return this.linkUrl()||"/sheets/"+this.sheetId+"/records/new?name={{encodeURIComponent(name)}}"},isMissing:function(){return!this.id},saveValue:function(){return this.id},valueReplacingName:function(e,t,n,i){if(i=i||{},this.isMissing()&&this.name===e){var r=K(t,n,e);return i.lockedMissing&&(r.lockedMissing=!0),i.setName&&(r.name=i.setName),r}return this},groupingValue:function(){return this.id},jsonAttributes:function(){var e={};return this.id&&(e.id=this.id),this.sheetId&&(e.sheetId=this.sheetId),void 0!==this.name&&(e.name=this.name),null!=this.lockedMissing&&(e.lockedMissing=this.lockedMissing),e.input=this.getInput(),e},isEqual:function(e){return e.type===this.type?this.id?this.hasId(e.id):this.id===e.id&&this.name===e.name&&this.sheetId===e.sheetId:!1},eachRef:function(e){e(this)},ids:function(){return[this.id]},context:function(e){return{links:[this.linkContext(e)]}},linkContext:function(e){return _.extend(p.prototype.context.call(this,e),{url:this.linkUrl(),missing:this.isMissing()})}});C.convertId=function(e){return e},C.prototype.overrideOperators({"+":function(e,t){return new y(e.displayValue()+t.displayValue())},"-":void 0,"*":void 0,"/":void 0,"^":void 0,neg:void 0,"=":function(e,t){return x.make(0===e.displayValue().localeCompare(t.displayValue()))},"!=":function(e,t){return x.make(0!==e.displayValue().localeCompare(t.displayValue()))},"<":function(e,t){return x.make(e.displayValue().localeCompare(t.displayValue())>0)},">":function(e,t){return x.make(e.displayValue().localeCompare(t.displayValue())<0)},"<=":function(e,t){var n=e.displayValue().localeCompare(t.displayValue());return x.make(0>=n)},">=":function(e,t){var n=e.displayValue().localeCompare(t.displayValue());return x.make(n>=0)}}),C.verifier=function(e){return _.isObject(e)},C.parse=function(e){var t=new C(e.id,e.sheetId,e.name,e.ordinal,e.shortId);return null!=e.lockedMissing&&(t.lockedMissing=e.lockedMissing),t};var E=t.exports.MultiRefValue=C.extend({type:"multiref",initialize:function(e){if(this.values=_.map(e.values,function(e){return D(e)?e:C.parse(e)}),e.oldValue){var t=e.oldValue;"OVERRIDE"===e.oldValue&&(t={type:"string",value:"OVERRIDE"}),this.oldValue=n.parseType(t)}},validateRef:function(){i._getUnderscore(this.values).invoke("validateRef")},valuesList:function(){return this.values},valueByAddingRef:function(e){var t=this,n=e.valuesList().filter(function(e){return e.isRef()&&!t.hasRef(e)});return G(this.values.concat(n))},valueByRemovingRef:function(e){var t=this.valuesList().filter(function(t){return!e.hasRef(t)});return G(t)},ids:function(){return _.pluck(this.values,"id")},firstValue:function(){return this.values.length>0?this.values[0]:P()},displayValue:function(){var e=_.map(this.values,function(e){return e.displayValue()});return l.join(e)},isMultiRef:_.constant(!0),eachRef:function(e){var t=_.filter(this.values,function(e){return e.isRef()});_.each(t,e)},context:function(e){return{links:_.invoke(this.values,"linkContext",e)}},valueReplacingName:function(e,t,n,i){var r=_.map(this.values,function(r){return r.isRef()?r.valueReplacingName(e,t,n,i):r});return new E({values:r})},hasId:function(e){return _.any(this.values,function(t){return t.isRef()&&t.hasId(e)})},hasMissingRefWithName:function(e){return _.any(this.values,function(t){return t.hasMissingRefWithName(e)})},linkUrl:function(){return this.firstValue().linkUrl()},linkUrlTemplate:function(){return this.firstValue().linkUrlTemplate()},isMissing:function(){return _.any(this.values,function(e){return e.isMissing()})},groupingValue:function(){return this.ids().join(",")},jsonAttributes:function(){return{values:_.map(this.values,function(e){return e.toJSON()}),oldValue:_.isString(this.oldValue)?this.oldValue:_.soak(this,"oldValue.toJSON()")}},isEqual:function(e){return e.type===this.type&&e.values.length===this.values.length?_.all(this.values,function(t,n){var i=e.values[n];return t.isEqual(i)}):!1},booleanValue:function(){return!this.isEmptyRef()}});E.verifier=function(e){return _.isObject(e)&&e.values},E.parse=function(e){return new E(e)};var I=864e5,R=["YYYY-MM-DD","YYYY-M-D","MMM D YYYY","MMM DD YYYY","MMM D, YYYY","MMM DD, YYYY","MMM DD","MMM D"];_.each(["st","nd","rd","th"],function(e){R.push("MMM D["+e+"] YYYY"),R.push("MMM DD["+e+"] YYYY"),R.push("MMM D["+e+",] YYYY"),R.push("MMM DD["+e+",] YYYY"),R.push("MMM D["+e+"]"),R.push("MMM DD["+e+"]")});var T={us:["MM/DD/YYYY","M/D/YYYY","MM/DD/YY","M/D/YY","MM/DD","M/D"],eu:["DD/MM/YYYY","D/M/YYYY","DD/MM/YY","D/M/YY","DD/MM","D/M"]},A={};i._getUnderscore(T).each(function(e,t){A[t]=e.concat(R)});var M=n.DateValue=p.extend({type:"date",initialize:function(e,t,n){this.value=s.isMoment(e)?e:s.utc(e.toString().trim(),M.getFormats(n),!0).utc()},moment:function(){return s.from(this.value)},displayValue:function(e){e=e||{};var t="l";return"eu"===i._getUnderscore(e).soak("localeOptions.date")&&(t="D/M/YYYY"),this.value.format(t)},apiValue:function(){return this.value.format("YYYY-MM-DD")},numericValue:function(){return this.value.valueOf()/I},saveValue:function(){return this.value.format("L")},compare:function(e){return this.value-e.value},booleanValue:function(){return!0},isDate:function(){return!0},isRightAligned:_.constant(!0)});M.getFormats=function(e){return A[e.localeOptions.date]},M.parse=function(e){var t=s.utc(e.value,"MM/DD/YYYY",!0).utc();return new M(t)},M.today=function(){return new M(s())},M.prototype.overrideOperators({"+":function(e,t){if(e.isDate()&&t.isDate())throw new o.ExecutionError("error-data-add-dates");
var n,i;if(e.isDate()?(n=e,i=t):(n=t,i=e),"numeric"!==i.type)throw new o.ExecutionError("error-date-add-bad-type",{otherType:i.type});return new M(n.moment().add("days",i.numericValue()))},"-":function(e,t){if(e.isDate()&&t.isDate())return new g(e.numericValue()-t.numericValue());if(t.isDate())throw new o.ExecutionError("error-subtraction",{aType:e.type,bType:t.type});if("numeric"!==t.type)throw new o.ExecutionError("error-subtraction",{aType:e.type,bType:t.type});return new M(e.moment().subtract("days",t.numericValue()))},"*":void 0,"/":void 0,"^":void 0,neg:void 0});var F=[/^\d{1,2}\/\d{1,2}(?:\/(?:\d{2}|\d{4}))?$/,/^\d{4}-\d{1,2}-\d{1,2}$/,/^\S+ \d{1,2}(?:st|nd|rd|th)?,? \d{4}$/,/^\S+ \d{1,2}(?:st|nd|rd|th)?$/];M.verifier=function(e,t,n){if(!_.isString(e))return!1;var i=_.any(F,function(e){return e.test(t)});return i?s.from(t,M.getFormats(n),!0).isValid():!1};var V=n.DayOfYearValue=p.extend({type:"dayofyear",initialize:function(e){this.value=e},saveValue:function(){return this.value},moment:function(){return s.from(this.value+"/2008",["MM/DD/YYYY"],!0)},booleanValue:_.constant(!0),isRightAligned:_.constant(!0),isDayOfYear:_.constant(!0),compare:function(e){return this.moment().utc()-e.moment().utc()},displayValue:function(){return this.moment().format("M/D")},apiValue:function(){return this.moment().format("MM-DD")}});V.prototype.overrideOperators({"+":void 0,"-":void 0,"*":void 0,"/":void 0,"^":void 0,neg:void 0});var L=n.ImageValue=y.extend({type:"image",isString:_.constant(!1),isImage:_.constant(!0),getUrl:function(){return this.value}}),O=n.ErrorValue=p.extend({type:"error",initialize:function(e){this.error=e},toJSON:function(){return null},compare:function(){return 0},isEqual:function(e){return this===e},isError:function(){return!0},displayValue:function(){return a["error-value"]()},booleanValue:function(){throw this.getError()},numericValue:function(){throw this.getError()},callOperation:function(){throw this.getError()},getError:function(){return this.error},getMessage:function(){var e=this.getError();return e.getMessage?e.getMessage():e.message},context:function Q(){var Q=p.prototype.context.apply(this,arguments);return _.extend(Q,{error:this.isError(),errorMessage:this.getMessage()})}});n.makeError=function(e){return new O(e)};var N=n.InputErrorValue=O.extend({type:"inputerror",initialize:function(e,t){this.value=e,this.input=e,_.isString(t)?this.message=t:(this.message=t.getMessage(),this.error=t)},editableText:function(){return this.value},isInputError:_.constant(!0),jsonAttributes:function(){return{value:this.value,input:this.getInput(),message:this.message}},displayValue:function(){return this.value.toString()},toJSON:function(){return p.prototype.toJSON.apply(this,arguments)},isEqual:function(){return p.prototype.isEqual.apply(this,arguments)},compare:function(e){var t=this.message.localeCompare(e.message);return 0!==t?t:this.value.toString().localeCompare(e.value.toString())},getError:function(){return this.error?this.error:new o.ReloadedInputValidationError(this.message)}});N.parse=function(e){return new N(e.value,e.message)},n.makeInputError=function(e,t){return new N(e,t)};var $=n.canonicalValue=function(e,t){if(void 0===e||null===e)return"";if(_.isString(e)){if(!t||!t.localeOptions)throw new AppError("Missing locale settings in value parsing");var n=e.trim();if("us"===t.localeOptions.number)for(;/\d,\d\d\d\b/.test(n);)n=n.replace(/(\d),(\d\d\d)/,"$1$2");else{for(;/\d\.\d\d\d\b/.test(n);)n=n.replace(/(\d)\.(\d\d\d)/,"$1$2");if(-1!==n.indexOf("."))return e.trim();2===n.split(",").length&&(n=n.replace(/,/,"."))}var i=!1;n.match(/^\(\$(\d*(\.\d*)?)\)$/)&&(n=n.replace(/^\(/,""),n=n.replace(/\)$/,""),i=!0),n=n.replace(/^(-?)\$/,"$1");var r=!1;if(n.match(/%$/)&&(r=!0,n=n.replace(/%$/,"")),n.match(/^\s*-?(\d+\.?|\d*\.\d+)\s*$/)){var o=parseFloat(n);return r?o/100:i?-o:o}return e.trim()}return e},D=n.isValueObject=function(e){return e&&e.constructor.prototype.isValueObject},P=(n.isRef=function(e){return D(e)?e.isRef():!1},n.isEmpty=function(e){return D(e)?e.isEmpty():w.verifier(e)},n.createEmpty=function(){return new w}),j=[E,C,v,b,g,M,x,y,w],B=[w,p,b,g,v,x,M,V,L,y,C,N,O],U=n.addPrecedence=function(e){var t;_.contains(B,e)?t=B.indexOf(e):(t=B.length,B.push(e)),e.prototype.precedence=t};_.each(B,function(e){U(e)});var H=[g,M,V,y,C,w,p,N,O],z=n.addOrder=function(e,t){var n;_.contains(H,e)?n=H.indexOf(e):(n=void 0!==t?t:H.length,H.splice(n,0,e)),_.each(H,function(e,t){e.prototype.order=t})};_.each(H,function(e){z(e)});{var q=n.parseType=function(e,t){var n=W(e,t),i=_.soak(e,"input");return i&&(n.input=i),n},W=function(e,t){if(null==e||""===e)return P();if(D(e))return e;var n=e.type;if(n in u)return u[n].parse(e);if(void 0===n)return h(e,t);throw new AppError("Cannot find type entry for "+n+" given value: "+JSON.stringify(e))},K=(n.getType=function(e,t){return e=h(e,t),e.type},n.makeRef=function(e,t,n){return new C(e,t,n)}),G=n.makeMultiRef=function(e){return new E({values:e})},Y=(n.stringToRef=function(e,t){var n=Y(e);return new E({values:_.map(n,function(e){return t(e)})})},n.diffRefs=function(e,t){e=e||P(),t=t||P();var n=_(t.valuesList()).filter(function(t){return!e.hasRef(t)}),i=_(e.valuesList()).filter(function(e){return!t.hasRef(e)}),r=_(t.valuesList()).filter(function(t){return e.hasRef(t)});return{added:n,removed:i,same:r}},n.splitRefString=function(e){return _.filter(l.split(e),function(e){return!/^\s*$/.test(e)})});n.makeJSON=function(e,t){var n=h(e,t);return _.isString(e)&&(n.input=e),n.toJSON()},n.clone=function(e){return q(h(e).toJSON())}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../commas":238,"../errors":242,"../strings":249,moment:"moment",numeral:696}],257:[function(e,t){(function(n){"use strict";var i=e("../syncedTime"),r=t.exports=BaseObject.extend({propertyNames:function(){return this.timestampParts},timestampParts:["time","clientId"],constructorName:"valueTimestamp",isTimestamp:!0,compare:function(e){e=e||r.epoch;var t=this,i=0;return n._getUnderscore(this.timestampParts).any(function(n){var r=t[n],o=e[n];return o===r?!1:(i=o>r?-1:1,!0)}),i},isBefore:function(e){return this.compare(e)<0},isAfter:function(e){return this.compare(e)>0},isEqual:function(e){return 0===this.compare(e)},toJSON:function(){return n._getUnderscore(this).pick(this.timestampParts)},toString:function(){return JSON.stringify(this.toJSON())}});r.now=function(){return new r({time:i.singleton.now(),clientId:r.getClientId()})},r.epoch=new r({time:0}),r.override=new r({time:1/0}),r.override.isOverride=!0,r.parse=function(e){return"now"===e?r.now():null==e?r.epoch:e instanceof r?e:new r(e)},r.fromString=function(e){if(!e)return r.epoch;var t=JSON.parse(e);return r.parse(t)},r.getClientId=_.constant(null)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../syncedTime":250}],258:[function(e,t,n){(function(e){"use strict";_.extend(n,{versionString:function(){return"v{{version}}.{{date}}.{{shortDescription}}".stencil(e._getUnderscore(t.rawVersion).mapObject(function(e){return e.toString().replace(" ","-")}))},isEqual:function(e){return _.isObject(e)&&(e=e.versionString()),t.versionString()===e}});var t=n;t.rawVersion=O({version:9,date:"2016-07-28",shortDescription:"UnverifiedUsers"})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],259:[function(e,t){(function(e){"use strict";var n=t.exports=BaseObject.extend({initialize:function(){this.fieldInfoByKey=e._getUnderscore(this.info.fields).indexBy("key")},contextForField:function(e){return new i({formField:e,formContext:this})},toJSON:function(){return e._getUnderscore(this).pick("title","description","fields","nameMaps")},toContext:function(){return e._getUnderscore(this).deepClone()}}).addProperties("form","info").addGetters({title:"info.navItem.name",description:"info.navItem.description",nameMaps:"info.nameMaps",fields:function(){return e._getUnderscore(this.form.fields).chain().mapMethod(this,"contextForField").filter({shouldDisplay:!0}).value()}}),i=n.FormFieldContext=BaseObject.extend({toJSON:function(){return e._getUnderscore(this).pick("key","size","type","required","enum","validation","label","hasCustomLabel","linkedSheetIndex","htmlInputType","formatOptions")},multilineValidations:e._getUnderscore(["generic","text"]).makeSet(),canBeMultiline:function(){return this.multilineValidations[this.validation]&&"join"!==this.type},htmlInputTypeMapping:{number:"number",date:"date",currency:"number",percent:"number",email:"email",website:"url"}}).addProperties("formField","formContext").addGetters({key:"formField.key",size:function(){return this.canBeMultiline()?this.formField.size:"short"},type:"fieldInfo.type",required:"fieldInfo.required","enum":"fieldInfo.enum",validForForm:"fieldInfo.validForForm",validation:"fieldInfo.validation",linkedSheetIndex:"fieldInfo.linkedSheetIndex",formatOptions:"fieldInfo.formatOptions",htmlInputType:function(){return this.htmlInputTypeMapping[this.validation]||"text"},label:function(){return this.formField.label||this.fieldInfo.label},hasCustomLabel:function(){return!!this.formField.label},fieldInfo:function(){return this.formContext.fieldInfoByKey[this.key]},shouldDisplay:function(){return null!=this.fieldInfo&&this.validForForm}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],260:[function(e,t,n){var i=n;i.bignum=e("bn.js"),i.define=e("./asn1/api").define,i.base=e("./asn1/base"),i.constants=e("./asn1/constants"),i.decoders=e("./asn1/decoders"),i.encoders=e("./asn1/encoders")},{"./asn1/api":261,"./asn1/base":263,"./asn1/constants":267,"./asn1/decoders":269,"./asn1/encoders":272,"bn.js":572}],261:[function(e,t,n){function i(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}var r=e("../asn1"),o=e("inherits"),s=n;s.define=function(e,t){return new i(e,t)},i.prototype._createNamed=function(t){var n;try{n=e("vm").runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(i){n=function(e){this._initNamed(e)}}return o(n,t),n.prototype._initNamed=function(e){t.call(this,e)},new n(this)},i.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(r.decoders[e])),this.decoders[e]},i.prototype.decode=function(e,t,n){return this._getDecoder(t).decode(e,n)},i.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(r.encoders[e])),this.encoders[e]},i.prototype.encode=function(e,t,n){return this._getEncoder(t).encode(e,n)}},{"../asn1":260,inherits:274,vm:751}],262:[function(e,t,n){function i(e,t){return s.call(this,t),a.isBuffer(e)?(this.base=e,this.offset=0,void(this.length=e.length)):void this.error("Input not Buffer")}function r(e,t){if(Array.isArray(e))this.length=0,this.value=e.map(function(e){return e instanceof r||(e=new r(e,t)),this.length+=e.length,e},this);else if("number"==typeof e){if(!(e>=0&&255>=e))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=a.byteLength(e);else{if(!a.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}var o=e("inherits"),s=e("../base").Reporter,a=e("buffer").Buffer;o(i,s),n.DecoderBuffer=i,i.prototype.save=function(){return{offset:this.offset,reporter:s.prototype.save.call(this)}},i.prototype.restore=function(e){var t=new i(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,s.prototype.restore.call(this,e.reporter),t},i.prototype.isEmpty=function(){return this.offset===this.length},i.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},i.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");var n=new i(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n},i.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},n.EncoderBuffer=r,r.prototype.join=function(e,t){return e||(e=new a(this.length)),t||(t=0),0===this.length?e:(Array.isArray(this.value)?this.value.forEach(function(n){n.join(e,t),t+=n.length}):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):a.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length),e)}},{"../base":263,buffer:605,inherits:274}],263:[function(e,t,n){var i=n;i.Reporter=e("./reporter").Reporter,i.DecoderBuffer=e("./buffer").DecoderBuffer,i.EncoderBuffer=e("./buffer").EncoderBuffer,i.Node=e("./node")},{"./buffer":262,"./node":264,"./reporter":265}],264:[function(e,t){function n(e,t){var n={};this._baseState=n,n.enc=e,n.parent=t||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n["default"]=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}var i=e("../base").Reporter,r=e("../base").EncoderBuffer,o=e("../base").DecoderBuffer,s=e("minimalistic-assert"),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],l=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a),c=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];t.exports=n;var u=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit"];n.prototype.clone=function(){var e=this._baseState,t={};u.forEach(function(n){t[n]=e[n]});var n=new this.constructor(t.parent);return n._baseState=t,n},n.prototype._wrap=function(){var e=this._baseState;l.forEach(function(t){this[t]=function(){var n=new this.constructor(this);return e.children.push(n),n[t].apply(n,arguments)}},this)},n.prototype._init=function(e){var t=this._baseState;s(null===t.parent),e.call(this),t.children=t.children.filter(function(e){return e._baseState.parent===this},this),s.equal(t.children.length,1,"Root node can have only one child")},n.prototype._useArgs=function(e){var t=this._baseState,n=e.filter(function(e){return e instanceof this.constructor},this);e=e.filter(function(e){return!(e instanceof this.constructor)},this),0!==n.length&&(s(null===t.children),t.children=n,n.forEach(function(e){e._baseState.parent=this},this)),0!==e.length&&(s(null===t.args),t.args=e,t.reverseArgs=e.map(function(e){if("object"!=typeof e||e.constructor!==Object)return e;var t={};return Object.keys(e).forEach(function(n){n==(0|n)&&(n|=0);var i=e[n];t[i]=n}),t}))},c.forEach(function(e){n.prototype[e]=function(){var t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}}),a.forEach(function(e){n.prototype[e]=function(){var t=this._baseState,n=Array.prototype.slice.call(arguments);return s(null===t.tag),t.tag=e,this._useArgs(n),this}}),n.prototype.use=function(e){var t=this._baseState;return s(null===t.use),t.use=e,this},n.prototype.optional=function(){var e=this._baseState;return e.optional=!0,this},n.prototype.def=function(e){var t=this._baseState;return s(null===t["default"]),t["default"]=e,t.optional=!0,this},n.prototype.explicit=function(e){var t=this._baseState;return s(null===t.explicit&&null===t.implicit),t.explicit=e,this},n.prototype.implicit=function(e){var t=this._baseState;return s(null===t.explicit&&null===t.implicit),t.implicit=e,this},n.prototype.obj=function(){var e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},n.prototype.key=function(e){var t=this._baseState;return s(null===t.key),t.key=e,this},n.prototype.any=function(){var e=this._baseState;return e.any=!0,this},n.prototype.choice=function(e){var t=this._baseState;return s(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map(function(t){return e[t]})),this},n.prototype.contains=function(e){var t=this._baseState;return s(null===t.use),t.contains=e,this},n.prototype._decode=function(e){var t=this._baseState;if(null===t.parent)return e.wrapResult(t.children[0]._decode(e));var n,i=t["default"],r=!0;if(null!==t.key&&(n=e.enterKey(t.key)),t.optional){var s=null;if(null!==t.explicit?s=t.explicit:null!==t.implicit?s=t.implicit:null!==t.tag&&(s=t.tag),null!==s||t.any){if(r=this._peekTag(e,s,t.any),e.isError(r))return r}else{var a=e.save();try{null===t.choice?this._decodeGeneric(t.tag,e):this._decodeChoice(e),r=!0}catch(l){r=!1}e.restore(a)}}var c;if(t.obj&&r&&(c=e.enterObject()),r){if(null!==t.explicit){var u=this._decodeTag(e,t.explicit);if(e.isError(u))return u;e=u}if(null===t.use&&null===t.choice){if(t.any)var a=e.save();var d=this._decodeTag(e,null!==t.implicit?t.implicit:t.tag,t.any);if(e.isError(d))return d;t.any?i=e.raw(a):e=d}if(i=t.any?i:null===t.choice?this._decodeGeneric(t.tag,e):this._decodeChoice(e),e.isError(i))return i;if(t.any||null!==t.choice||null===t.children||t.children.forEach(function(t){t._decode(e)}),t.contains&&("octstr"===t.tag||"bitstr"===t.tag)){var h=new o(i);i=this._getUse(t.contains,e._reporterState.obj)._decode(h)}}return t.obj&&r&&(i=e.leaveObject(c)),null===t.key||null===i&&r!==!0||e.leaveKey(n,t.key,i),i},n.prototype._decodeGeneric=function(e,t){var n=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,n.args[0]):/str$/.test(e)?this._decodeStr(t,e):"objid"===e&&n.args?this._decodeObjid(t,n.args[0],n.args[1]):"objid"===e?this._decodeObjid(t,null,null):"gentime"===e||"utctime"===e?this._decodeTime(t,e):"null_"===e?this._decodeNull(t):"bool"===e?this._decodeBool(t):"int"===e||"enum"===e?this._decodeInt(t,n.args&&n.args[0]):null!==n.use?this._getUse(n.use,t._reporterState.obj)._decode(t):t.error("unknown tag: "+e)},n.prototype._getUse=function(e,t){var n=this._baseState;return n.useDecoder=this._use(e,t),s(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},n.prototype._decodeChoice=function(e){var t=this._baseState,n=null,i=!1;return Object.keys(t.choice).some(function(r){var o=e.save(),s=t.choice[r];try{var a=s._decode(e);if(e.isError(a))return!1;n={type:r,value:a},i=!0}catch(l){return e.restore(o),!1}return!0},this),i?n:e.error("Choice not matched")},n.prototype._createEncoderBuffer=function(e){return new r(e,this.reporter)},n.prototype._encode=function(e,t,n){var i=this._baseState;if(null===i["default"]||i["default"]!==e){var r=this._encodeValue(e,t,n);if(void 0!==r&&!this._skipDefault(r,t,n))return r}},n.prototype._encodeValue=function(e,t,n){var r=this._baseState;if(null===r.parent)return r.children[0]._encode(e,t||new i);var o=null;if(this.reporter=t,r.optional&&void 0===e){if(null===r["default"])return;e=r["default"]}var s=null,a=!1;if(r.any)o=this._createEncoderBuffer(e);else if(r.choice)o=this._encodeChoice(e,t);else if(r.contains)s=this._getUse(r.contains,n)._encode(e,t),a=!0;else if(r.children)s=r.children.map(function(n){if("null_"===n._baseState.tag)return n._encode(null,t,e);if(null===n._baseState.key)return t.error("Child should have a key");var i=t.enterKey(n._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");var r=n._encode(e[n._baseState.key],t,e);return t.leaveKey(i),r},this).filter(function(e){return e}),s=this._createEncoderBuffer(s);else if("seqof"===r.tag||"setof"===r.tag){if(!r.args||1!==r.args.length)return t.error("Too many args for : "+r.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");var l=this.clone();l._baseState.implicit=null,s=this._createEncoderBuffer(e.map(function(n){var i=this._baseState;return this._getUse(i.args[0],e)._encode(n,t)},l))}else null!==r.use?o=this._getUse(r.use,n)._encode(e,t):(s=this._encodePrimitive(r.tag,e),a=!0);var o;if(!r.any&&null===r.choice){var c=null!==r.implicit?r.implicit:r.tag,u=null===r.implicit?"universal":"context";null===c?null===r.use&&t.error("Tag could be ommited only for .use()"):null===r.use&&(o=this._encodeComposite(c,a,u,s))}return null!==r.explicit&&(o=this._encodeComposite(r.explicit,!1,"context",o)),o},n.prototype._encodeChoice=function(e,t){var n=this._baseState,i=n.choice[e.type];return i||s(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),i._encode(e.value,t)},n.prototype._encodePrimitive=function(e,t){var n=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&n.args)return this._encodeObjid(t,n.reverseArgs[0],n.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,n.args&&n.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);throw new Error("Unsupported tag: "+e)},n.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},n.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(e)}},{"../base":263,"minimalistic-assert":694}],265:[function(e,t,n){function i(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function r(e,t){this.path=e,this.rethrow(t)}var o=e("inherits");n.Reporter=i,i.prototype.isError=function(e){return e instanceof r},i.prototype.save=function(){var e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},i.prototype.restore=function(e){var t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},i.prototype.enterKey=function(e){return this._reporterState.path.push(e)},i.prototype.leaveKey=function(e,t,n){var i=this._reporterState;i.path=i.path.slice(0,e-1),null!==i.obj&&(i.obj[t]=n)},i.prototype.enterObject=function(){var e=this._reporterState,t=e.obj;return e.obj={},t},i.prototype.leaveObject=function(e){var t=this._reporterState,n=t.obj;return t.obj=e,n},i.prototype.error=function(e){var t,n=this._reporterState,i=e instanceof r;if(t=i?e:new r(n.path.map(function(e){return"["+JSON.stringify(e)+"]"}).join(""),e.message||e,e.stack),!n.options.partial)throw t;return i||n.errors.push(t),t},i.prototype.wrapResult=function(e){var t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},o(r,Error),r.prototype.rethrow=function(e){return this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace(this,r),this}},{inherits:274}],266:[function(e,t,n){var i=e("../constants");n.tagClass={0:"universal",1:"application",2:"context",3:"private"},n.tagClassByName=i._reverse(n.tagClass),n.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},n.tagByName=i._reverse(n.tag)},{"../constants":267}],267:[function(e,t,n){var i=n;i._reverse=function(e){var t={};return Object.keys(e).forEach(function(n){(0|n)==n&&(n=0|n);var i=e[n];t[i]=n}),t},i.der=e("./der")},{"./der":266}],268:[function(e,t){function n(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new i,this.tree._init(e.body)}function i(e){l.Node.call(this,"der",e)}function r(e,t){var n=e.readUInt8(t);if(e.isError(n))return n;var i=u.tagClass[n>>6],r=0===(32&n);if(31===(31&n)){var o=n;for(n=0;128===(128&o);){if(o=e.readUInt8(t),e.isError(o))return o;n<<=7,n|=127&o}}else n&=31;var s=u.tag[n];return{cls:i,primitive:r,tag:n,tagStr:s}}function o(e,t,n){var i=e.readUInt8(n);if(e.isError(i))return i;if(!t&&128===i)return null;if(0===(128&i))return i;var r=127&i;if(r>=4)return e.error("length octect is too long");i=0;for(var o=0;r>o;o++){i<<=8;var s=e.readUInt8(n);if(e.isError(s))return s;i|=s}return i}var s=e("inherits"),a=e("../../asn1"),l=a.base,c=a.bignum,u=a.constants.der;t.exports=n,n.prototype.decode=function(e,t){return e instanceof l.DecoderBuffer||(e=new l.DecoderBuffer(e,t)),this.tree._decode(e,t)},s(i,l.Node),i.prototype._peekTag=function(e,t,n){if(e.isEmpty())return!1;var i=e.save(),o=r(e,'Failed to peek tag: "'+t+'"');return e.isError(o)?o:(e.restore(i),o.tag===t||o.tagStr===t||o.tagStr+"of"===t||n)},i.prototype._decodeTag=function(e,t,n){var i=r(e,'Failed to decode tag of "'+t+'"');if(e.isError(i))return i;var s=o(e,i.primitive,'Failed to get length of "'+t+'"');if(e.isError(s))return s;if(!n&&i.tag!==t&&i.tagStr!==t&&i.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(i.primitive||null!==s)return e.skip(s,'Failed to match body of: "'+t+'"');var a=e.save(),l=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(l)?l:(s=e.offset-a.offset,e.restore(a),e.skip(s,'Failed to match body of: "'+t+'"'))},i.prototype._skipUntilEnd=function(e,t){for(;;){var n=r(e,t);if(e.isError(n))return n;var i=o(e,n.primitive,t);if(e.isError(i))return i;var s;if(s=n.primitive||null!==i?e.skip(i):this._skipUntilEnd(e,t),e.isError(s))return s;if("end"===n.tagStr)break}},i.prototype._decodeList=function(e,t,n){for(var i=[];!e.isEmpty();){var r=this._peekTag(e,"end");if(e.isError(r))return r;var o=n.decode(e,"der");if(e.isError(o)&&r)break;i.push(o)}return i},i.prototype._decodeStr=function(e,t){if("bitstr"===t){var n=e.readUInt8();return e.isError(n)?n:{unused:n,data:e.raw()}}if("bmpstr"===t){var i=e.raw();if(i.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");for(var r="",o=0;o<i.length/2;o++)r+=String.fromCharCode(i.readUInt16BE(2*o));return r}if("numstr"===t){var s=e.raw().toString("ascii");return this._isNumstr(s)?s:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("printstr"===t){var a=e.raw().toString("ascii");return this._isPrintstr(a)?a:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},i.prototype._decodeObjid=function(e,t,n){for(var i,r=[],o=0;!e.isEmpty();){var s=e.readUInt8();o<<=7,o|=127&s,0===(128&s)&&(r.push(o),o=0)}128&s&&r.push(o);var a=r[0]/40|0,l=r[0]%40;if(i=n?r:[a,l].concat(r.slice(1)),t){var c=t[i.join(" ")];void 0===c&&(c=t[i.join(".")]),void 0!==c&&(i=c)}return i},i.prototype._decodeTime=function(e,t){var n=e.raw().toString();if("gentime"===t)var i=0|n.slice(0,4),r=0|n.slice(4,6),o=0|n.slice(6,8),s=0|n.slice(8,10),a=0|n.slice(10,12),l=0|n.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");var i=0|n.slice(0,2),r=0|n.slice(2,4),o=0|n.slice(4,6),s=0|n.slice(6,8),a=0|n.slice(8,10),l=0|n.slice(10,12);i=70>i?2e3+i:1900+i}return Date.UTC(i,r-1,o,s,a,l,0)},i.prototype._decodeNull=function(){return null},i.prototype._decodeBool=function(e){var t=e.readUInt8();return e.isError(t)?t:0!==t},i.prototype._decodeInt=function(e,t){var n=e.raw(),i=new c(n);return t&&(i=t[i.toString(10)]||i),i},i.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},{"../../asn1":260,inherits:274}],269:[function(e,t,n){var i=n;i.der=e("./der"),i.pem=e("./pem")},{"./der":268,"./pem":270}],270:[function(e,t){function n(e){o.call(this,e),this.enc="pem"}var i=e("inherits"),r=e("buffer").Buffer,o=e("./der");i(n,o),t.exports=n,n.prototype.decode=function(e,t){for(var n=e.toString().split(/[\r\n]+/g),i=t.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/,a=-1,l=-1,c=0;c<n.length;c++){var u=n[c].match(s);if(null!==u&&u[2]===i){if(-1!==a){if("END"!==u[1])break;l=c;break}if("BEGIN"!==u[1])break;a=c}}if(-1===a||-1===l)throw new Error("PEM section not found for: "+i);var d=n.slice(a+1,l).join("");d.replace(/[^a-z0-9\+\/=]+/gi,"");var h=new r(d,"base64");return o.prototype.decode.call(this,h,t)}},{"./der":268,buffer:605,inherits:274}],271:[function(e,t){function n(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new i,this.tree._init(e.body)}function i(e){c.Node.call(this,"der",e)}function r(e){return 10>e?"0"+e:e}function o(e,t,n,i){var r;if("seqof"===e?e="seq":"setof"===e&&(e="set"),u.tagByName.hasOwnProperty(e))r=u.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return i.error("Unknown tag: "+e);r=e}return r>=31?i.error("Multi-octet tag encoding unsupported"):(t||(r|=32),r|=u.tagClassByName[n||"universal"]<<6)}var s=e("inherits"),a=e("buffer").Buffer,l=e("../../asn1"),c=l.base,u=l.constants.der;t.exports=n,n.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},s(i,c.Node),i.prototype._encodeComposite=function(e,t,n,i){var r=o(e,t,n,this.reporter);if(i.length<128){var s=new a(2);return s[0]=r,s[1]=i.length,this._createEncoderBuffer([s,i])}for(var l=1,c=i.length;c>=256;c>>=8)l++;var s=new a(2+l);s[0]=r,s[1]=128|l;for(var c=1+l,u=i.length;u>0;c--,u>>=8)s[c]=255&u;return this._createEncoderBuffer([s,i])},i.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){for(var n=new a(2*e.length),i=0;i<e.length;i++)n.writeUInt16BE(e.charCodeAt(i),2*i);return this._createEncoderBuffer(n)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},i.prototype._encodeObjid=function(e,t,n){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s\.]+/g);for(var i=0;i<e.length;i++)e[i]|=0}else if(Array.isArray(e)){e=e.slice();for(var i=0;i<e.length;i++)e[i]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}for(var r=0,i=0;i<e.length;i++){var o=e[i];for(r++;o>=128;o>>=7)r++}for(var s=new a(r),l=s.length-1,i=e.length-1;i>=0;i--){var o=e[i];for(s[l--]=127&o;(o>>=7)>0;)s[l--]=128|127&o}return this._createEncoderBuffer(s)},i.prototype._encodeTime=function(e,t){var n,i=new Date(e);return"gentime"===t?n=[r(i.getFullYear()),r(i.getUTCMonth()+1),r(i.getUTCDate()),r(i.getUTCHours()),r(i.getUTCMinutes()),r(i.getUTCSeconds()),"Z"].join(""):"utctime"===t?n=[r(i.getFullYear()%100),r(i.getUTCMonth()+1),r(i.getUTCDate()),r(i.getUTCHours()),r(i.getUTCMinutes()),r(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(n,"octstr")},i.prototype._encodeNull=function(){return this._createEncoderBuffer("")},i.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!a.isBuffer(e)){var n=e.toArray();!e.sign&&128&n[0]&&n.unshift(0),e=new a(n)}if(a.isBuffer(e)){var i=e.length;0===e.length&&i++;var r=new a(i);return e.copy(r),0===e.length&&(r[0]=0),this._createEncoderBuffer(r)}if(128>e)return this._createEncoderBuffer(e);
if(256>e)return this._createEncoderBuffer([0,e]);for(var i=1,o=e;o>=256;o>>=8)i++;for(var r=new Array(i),o=r.length-1;o>=0;o--)r[o]=255&e,e>>=8;return 128&r[0]&&r.unshift(0),this._createEncoderBuffer(new a(r))},i.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},i.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},i.prototype._skipDefault=function(e,t,n){var i,r=this._baseState;if(null===r["default"])return!1;var o=e.join();if(void 0===r.defaultBuffer&&(r.defaultBuffer=this._encodeValue(r["default"],t,n).join()),o.length!==r.defaultBuffer.length)return!1;for(i=0;i<o.length;i++)if(o[i]!==r.defaultBuffer[i])return!1;return!0}},{"../../asn1":260,buffer:605,inherits:274}],272:[function(e,t,n){var i=n;i.der=e("./der"),i.pem=e("./pem")},{"./der":271,"./pem":273}],273:[function(e,t){function n(e){r.call(this,e),this.enc="pem"}var i=e("inherits"),r=e("./der");i(n,r),t.exports=n,n.prototype.encode=function(e,t){for(var n=r.prototype.encode.call(this,e),i=n.toString("base64"),o=["-----BEGIN "+t.label+"-----"],s=0;s<i.length;s+=64)o.push(i.slice(s,s+64));return o.push("-----END "+t.label+"-----"),o.join("\n")}},{"./der":271,inherits:274}],274:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],275:[function(e){(function(t){"use strict";function n(e,t,n){e[t]||Object[i](e,t,{writable:!0,configurable:!0,value:n})}if(e("core-js/shim"),e("regenerator-runtime/runtime"),e("core-js/fn/regexp/escape"),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var i="defineProperty";n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&n(Array,e,Function.call.bind([][e]))})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"core-js/fn/regexp/escape":276,"core-js/shim":570,"regenerator-runtime/runtime":718}],276:[function(e,t){e("../../modules/core.regexp.escape"),t.exports=e("../../modules/_core").RegExp.escape},{"../../modules/_core":297,"../../modules/core.regexp.escape":394}],277:[function(e,t){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],278:[function(e,t){var n=e("./_cof");t.exports=function(e,t){if("number"!=typeof e&&"Number"!=n(e))throw TypeError(t);return+e}},{"./_cof":292}],279:[function(e,t){var n=e("./_wks")("unscopables"),i=Array.prototype;void 0==i[n]&&e("./_hide")(i,n,{}),t.exports=function(e){i[n][e]=!0}},{"./_hide":314,"./_wks":391}],280:[function(e,t){t.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},{}],281:[function(e,t){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":323}],282:[function(e,t){"use strict";var n=e("./_to-object"),i=e("./_to-index"),r=e("./_to-length");t.exports=[].copyWithin||function(e,t){var o=n(this),s=r(o.length),a=i(e,s),l=i(t,s),c=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===c?s:i(c,s))-l,s-a),d=1;for(a>l&&l+u>a&&(d=-1,l+=u-1,a+=u-1);u-->0;)l in o?o[a]=o[l]:delete o[a],a+=d,l+=d;return o}},{"./_to-index":379,"./_to-length":382,"./_to-object":383}],283:[function(e,t){"use strict";var n=e("./_to-object"),i=e("./_to-index"),r=e("./_to-length");t.exports=function(e){for(var t=n(this),o=r(t.length),s=arguments.length,a=i(s>1?arguments[1]:void 0,o),l=s>2?arguments[2]:void 0,c=void 0===l?o:i(l,o);c>a;)t[a++]=e;return t}},{"./_to-index":379,"./_to-length":382,"./_to-object":383}],284:[function(e,t){var n=e("./_for-of");t.exports=function(e,t){var i=[];return n(e,!1,i.push,i,t),i}},{"./_for-of":311}],285:[function(e,t){var n=e("./_to-iobject"),i=e("./_to-length"),r=e("./_to-index");t.exports=function(e){return function(t,o,s){var a,l=n(t),c=i(l.length),u=r(s,c);if(e&&o!=o){for(;c>u;)if(a=l[u++],a!=a)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===o)return e||u||0;return!e&&-1}}},{"./_to-index":379,"./_to-iobject":381,"./_to-length":382}],286:[function(e,t){var n=e("./_ctx"),i=e("./_iobject"),r=e("./_to-object"),o=e("./_to-length"),s=e("./_array-species-create");t.exports=function(e,t){var a=1==e,l=2==e,c=3==e,u=4==e,d=6==e,h=5==e||d,f=t||s;return function(t,s,p){for(var m,g,v=r(t),b=i(v),y=n(s,p,3),w=o(b.length),x=0,k=a?f(t,w):l?f(t,0):void 0;w>x;x++)if((h||x in b)&&(m=b[x],g=y(m,x,v),e))if(a)k[x]=g;else if(g)switch(e){case 3:return!0;case 5:return m;case 6:return x;case 2:k.push(m)}else if(u)return!1;return d?-1:c||u?u:k}}},{"./_array-species-create":289,"./_ctx":299,"./_iobject":319,"./_to-length":382,"./_to-object":383}],287:[function(e,t){var n=e("./_a-function"),i=e("./_to-object"),r=e("./_iobject"),o=e("./_to-length");t.exports=function(e,t,s,a,l){n(t);var c=i(e),u=r(c),d=o(c.length),h=l?d-1:0,f=l?-1:1;if(2>s)for(;;){if(h in u){a=u[h],h+=f;break}if(h+=f,l?0>h:h>=d)throw TypeError("Reduce of empty array with no initial value")}for(;l?h>=0:d>h;h+=f)h in u&&(a=t(a,u[h],h,c));return a}},{"./_a-function":277,"./_iobject":319,"./_to-length":382,"./_to-object":383}],288:[function(e,t){var n=e("./_is-object"),i=e("./_is-array"),r=e("./_wks")("species");t.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&(t=t[r],null===t&&(t=void 0))),void 0===t?Array:t}},{"./_is-array":321,"./_is-object":323,"./_wks":391}],289:[function(e,t){var n=e("./_array-species-constructor");t.exports=function(e,t){return new(n(e))(t)}},{"./_array-species-constructor":288}],290:[function(e,t){"use strict";var n=e("./_a-function"),i=e("./_is-object"),r=e("./_invoke"),o=[].slice,s={},a=function(e,t,n){if(!(t in s)){for(var i=[],r=0;t>r;r++)i[r]="a["+r+"]";s[t]=Function("F,a","return new F("+i.join(",")+")")}return s[t](e,n)};t.exports=Function.bind||function(e){var t=n(this),s=o.call(arguments,1),l=function(){var n=s.concat(o.call(arguments));return this instanceof l?a(t,n.length,n):r(t,n,e)};return i(t.prototype)&&(l.prototype=t.prototype),l}},{"./_a-function":277,"./_invoke":318,"./_is-object":323}],291:[function(e,t){var n=e("./_cof"),i=e("./_wks")("toStringTag"),r="Arguments"==n(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(n){}};t.exports=function(e){var t,s,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(s=o(t=Object(e),i))?s:r?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},{"./_cof":292,"./_wks":391}],292:[function(e,t){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],293:[function(e,t){"use strict";var n=e("./_object-dp").f,i=e("./_object-create"),r=(e("./_hide"),e("./_redefine-all")),o=e("./_ctx"),s=e("./_an-instance"),a=e("./_defined"),l=e("./_for-of"),c=e("./_iter-define"),u=e("./_iter-step"),d=e("./_set-species"),h=e("./_descriptors"),f=e("./_meta").fastKey,p=h?"_s":"size",m=function(e,t){var n,i=f(t);if("F"!==i)return e._i[i];for(n=e._f;n;n=n.n)if(n.k==t)return n};t.exports={getConstructor:function(e,t,c,u){var d=e(function(e,n){s(e,d,t,"_i"),e._i=i(null),e._f=void 0,e._l=void 0,e[p]=0,void 0!=n&&l(n,c,e[u],e)});return r(d.prototype,{clear:function(){for(var e=this,t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[p]=0},"delete":function(e){var t=this,n=m(t,e);if(n){var i=n.n,r=n.p;delete t._i[n.i],n.r=!0,r&&(r.n=i),i&&(i.p=r),t._f==n&&(t._f=i),t._l==n&&(t._l=r),t[p]--}return!!n},forEach:function(e){s(this,d,"forEach");for(var t,n=o(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!m(this,e)}}),h&&n(d.prototype,"size",{get:function(){return a(this[p])}}),d},def:function(e,t,n){var i,r,o=m(e,t);return o?o.v=n:(e._l=o={i:r=f(t,!0),k:t,v:n,p:i=e._l,n:void 0,r:!1},e._f||(e._f=o),i&&(i.n=o),e[p]++,"F"!==r&&(e._i[r]=o)),e},getEntry:m,setStrong:function(e,t,n){c(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?u(0,n.k):"values"==t?u(0,n.v):u(0,[n.k,n.v]):(e._t=void 0,u(1))},n?"entries":"values",!n,!0),d(t)}}},{"./_an-instance":280,"./_ctx":299,"./_defined":301,"./_descriptors":302,"./_for-of":311,"./_hide":314,"./_iter-define":327,"./_iter-step":329,"./_meta":336,"./_object-create":340,"./_object-dp":341,"./_redefine-all":360,"./_set-species":365}],294:[function(e,t){var n=e("./_classof"),i=e("./_array-from-iterable");t.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},{"./_array-from-iterable":284,"./_classof":291}],295:[function(e,t){"use strict";var n=e("./_redefine-all"),i=e("./_meta").getWeak,r=e("./_an-object"),o=e("./_is-object"),s=e("./_an-instance"),a=e("./_for-of"),l=e("./_array-methods"),c=e("./_has"),u=l(5),d=l(6),h=0,f=function(e){return e._l||(e._l=new p)},p=function(){this.a=[]},m=function(e,t){return u(e.a,function(e){return e[0]===t})};p.prototype={get:function(e){var t=m(this,e);return t?t[1]:void 0},has:function(e){return!!m(this,e)},set:function(e,t){var n=m(this,e);n?n[1]=t:this.a.push([e,t])},"delete":function(e){var t=d(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},t.exports={getConstructor:function(e,t,r,l){var u=e(function(e,n){s(e,u,t,"_i"),e._i=h++,e._l=void 0,void 0!=n&&a(n,r,e[l],e)});return n(u.prototype,{"delete":function(e){if(!o(e))return!1;var t=i(e);return t===!0?f(this)["delete"](e):t&&c(t,this._i)&&delete t[this._i]},has:function(e){if(!o(e))return!1;var t=i(e);return t===!0?f(this).has(e):t&&c(t,this._i)}}),u},def:function(e,t,n){var o=i(r(t),!0);return o===!0?f(e).set(t,n):o[e._i]=n,e},ufstore:f}},{"./_an-instance":280,"./_an-object":281,"./_array-methods":286,"./_for-of":311,"./_has":313,"./_is-object":323,"./_meta":336,"./_redefine-all":360}],296:[function(e,t){"use strict";var n=e("./_global"),i=e("./_export"),r=e("./_redefine"),o=e("./_redefine-all"),s=e("./_meta"),a=e("./_for-of"),l=e("./_an-instance"),c=e("./_is-object"),u=e("./_fails"),d=e("./_iter-detect"),h=e("./_set-to-string-tag"),f=e("./_inherit-if-required");t.exports=function(e,t,p,m,g,v){var b=n[e],y=b,w=g?"set":"add",x=y&&y.prototype,k={},_=function(e){var t=x[e];r(x,e,"delete"==e?function(e){return v&&!c(e)?!1:t.call(this,0===e?0:e)}:"has"==e?function(e){return v&&!c(e)?!1:t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof y&&(v||x.forEach&&!u(function(){(new y).entries().next()}))){var S=new y,C=S[w](v?{}:-0,1)!=S,E=u(function(){S.has(1)}),I=d(function(e){new y(e)}),R=!v&&u(function(){for(var e=new y,t=5;t--;)e[w](t,t);return!e.has(-0)});I||(y=t(function(t,n){l(t,y,e);var i=f(new b,t,y);return void 0!=n&&a(n,g,i[w],i),i}),y.prototype=x,x.constructor=y),(E||R)&&(_("delete"),_("has"),g&&_("get")),(R||C)&&_(w),v&&x.clear&&delete x.clear}else y=m.getConstructor(t,e,g,w),o(y.prototype,p),s.NEED=!0;return h(y,e),k[e]=y,i(i.G+i.W+i.F*(y!=b),k),v||m.setStrong(y,e,g),y}},{"./_an-instance":280,"./_export":306,"./_fails":308,"./_for-of":311,"./_global":312,"./_inherit-if-required":317,"./_is-object":323,"./_iter-detect":328,"./_meta":336,"./_redefine":361,"./_redefine-all":360,"./_set-to-string-tag":366}],297:[function(e,t){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},{}],298:[function(e,t){"use strict";var n=e("./_object-dp"),i=e("./_property-desc");t.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},{"./_object-dp":341,"./_property-desc":359}],299:[function(e,t){var n=e("./_a-function");t.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":277}],300:[function(e,t){"use strict";var n=e("./_an-object"),i=e("./_to-primitive"),r="number";t.exports=function(e){if("string"!==e&&e!==r&&"default"!==e)throw TypeError("Incorrect hint");return i(n(this),e!=r)}},{"./_an-object":281,"./_to-primitive":384}],301:[function(e,t){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],302:[function(e,t){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":308}],303:[function(e,t){var n=e("./_is-object"),i=e("./_global").document,r=n(i)&&n(i.createElement);t.exports=function(e){return r?i.createElement(e):{}}},{"./_global":312,"./_is-object":323}],304:[function(e,t){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],305:[function(e,t){var n=e("./_object-keys"),i=e("./_object-gops"),r=e("./_object-pie");t.exports=function(e){var t=n(e),o=i.f;if(o)for(var s,a=o(e),l=r.f,c=0;a.length>c;)l.call(e,s=a[c++])&&t.push(s);return t}},{"./_object-gops":347,"./_object-keys":350,"./_object-pie":351}],306:[function(e,t){var n=e("./_global"),i=e("./_core"),r=e("./_hide"),o=e("./_redefine"),s=e("./_ctx"),a="prototype",l=function(e,t,c){var u,d,h,f,p=e&l.F,m=e&l.G,g=e&l.S,v=e&l.P,b=e&l.B,y=m?n:g?n[t]||(n[t]={}):(n[t]||{})[a],w=m?i:i[t]||(i[t]={}),x=w[a]||(w[a]={});m&&(c=t);for(u in c)d=!p&&y&&void 0!==y[u],h=(d?y:c)[u],f=b&&d?s(h,n):v&&"function"==typeof h?s(Function.call,h):h,y&&o(y,u,h,e&l.U),w[u]!=h&&r(w,u,f),v&&x[u]!=h&&(x[u]=h)};n.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},{"./_core":297,"./_ctx":299,"./_global":312,"./_hide":314,"./_redefine":361}],307:[function(e,t){var n=e("./_wks")("match");t.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[n]=!1,!"/./"[e](t)}catch(r){}}return!0}},{"./_wks":391}],308:[function(e,t){t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],309:[function(e,t){"use strict";var n=e("./_hide"),i=e("./_redefine"),r=e("./_fails"),o=e("./_defined"),s=e("./_wks");t.exports=function(e,t,a){var l=s(e),c=a(o,l,""[e]),u=c[0],d=c[1];r(function(){var t={};return t[l]=function(){return 7},7!=""[e](t)})&&(i(String.prototype,e,u),n(RegExp.prototype,l,2==t?function(e,t){return d.call(e,this,t)}:function(e){return d.call(e,this)}))}},{"./_defined":301,"./_fails":308,"./_hide":314,"./_redefine":361,"./_wks":391}],310:[function(e,t){"use strict";var n=e("./_an-object");t.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{"./_an-object":281}],311:[function(e,t,n){var i=e("./_ctx"),r=e("./_iter-call"),o=e("./_is-array-iter"),s=e("./_an-object"),a=e("./_to-length"),l=e("./core.get-iterator-method"),c={},u={},n=t.exports=function(e,t,n,d,h){var f,p,m,g,v=h?function(){return e}:l(e),b=i(n,d,t?2:1),y=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(o(v)){for(f=a(e.length);f>y;y++)if(g=t?b(s(p=e[y])[0],p[1]):b(e[y]),g===c||g===u)return g}else for(m=v.call(e);!(p=m.next()).done;)if(g=r(m,b,p.value,t),g===c||g===u)return g};n.BREAK=c,n.RETURN=u},{"./_an-object":281,"./_ctx":299,"./_is-array-iter":320,"./_iter-call":325,"./_to-length":382,"./core.get-iterator-method":392}],312:[function(e,t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],313:[function(e,t){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],314:[function(e,t){var n=e("./_object-dp"),i=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,n){return e[t]=n,e}},{"./_descriptors":302,"./_object-dp":341,"./_property-desc":359}],315:[function(e,t){t.exports=e("./_global").document&&document.documentElement},{"./_global":312}],316:[function(e,t){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":302,"./_dom-create":303,"./_fails":308}],317:[function(e,t){var n=e("./_is-object"),i=e("./_set-proto").set;t.exports=function(e,t,r){var o,s=t.constructor;return s!==r&&"function"==typeof s&&(o=s.prototype)!==r.prototype&&n(o)&&i&&i(e,o),e}},{"./_is-object":323,"./_set-proto":364}],318:[function(e,t){t.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},{}],319:[function(e,t){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":292}],320:[function(e,t){var n=e("./_iterators"),i=e("./_wks")("iterator"),r=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||r[i]===e)}},{"./_iterators":330,"./_wks":391}],321:[function(e,t){var n=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./_cof":292}],322:[function(e,t){var n=e("./_is-object"),i=Math.floor;t.exports=function(e){return!n(e)&&isFinite(e)&&i(e)===e}},{"./_is-object":323}],323:[function(e,t){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],324:[function(e,t){var n=e("./_is-object"),i=e("./_cof"),r=e("./_wks")("match");t.exports=function(e){var t;return n(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==i(e))}},{"./_cof":292,"./_is-object":323,"./_wks":391}],325:[function(e,t){var n=e("./_an-object");t.exports=function(e,t,i,r){try{return r?t(n(i)[0],i[1]):t(i)}catch(o){var s=e["return"];throw void 0!==s&&n(s.call(e)),o}}},{"./_an-object":281}],326:[function(e,t){"use strict";var n=e("./_object-create"),i=e("./_property-desc"),r=e("./_set-to-string-tag"),o={};e("./_hide")(o,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,s){e.prototype=n(o,{next:i(1,s)}),r(e,t+" Iterator")}},{"./_hide":314,"./_object-create":340,"./_property-desc":359,"./_set-to-string-tag":366,"./_wks":391}],327:[function(e,t){"use strict";var n=e("./_library"),i=e("./_export"),r=e("./_redefine"),o=e("./_hide"),s=e("./_has"),a=e("./_iterators"),l=e("./_iter-create"),c=e("./_set-to-string-tag"),u=e("./_object-gpo"),d=e("./_wks")("iterator"),h=!([].keys&&"next"in[].keys()),f="@@iterator",p="keys",m="values",g=function(){return this};t.exports=function(e,t,v,b,y,w,x){l(v,t,b);var k,_,S,C=function(e){if(!h&&e in T)return T[e];switch(e){case p:return function(){return new v(this,e)};case m:return function(){return new v(this,e)}}return function(){return new v(this,e)}},E=t+" Iterator",I=y==m,R=!1,T=e.prototype,A=T[d]||T[f]||y&&T[y],M=A||C(y),F=y?I?C("entries"):M:void 0,V="Array"==t?T.entries||A:A;if(V&&(S=u(V.call(new e)),S!==Object.prototype&&(c(S,E,!0),n||s(S,d)||o(S,d,g))),I&&A&&A.name!==m&&(R=!0,M=function(){return A.call(this)}),n&&!x||!h&&!R&&T[d]||o(T,d,M),a[t]=M,a[E]=g,y)if(k={values:I?M:C(m),keys:w?M:C(p),entries:F},x)for(_ in k)_ in T||r(T,_,k[_]);else i(i.P+i.F*(h||R),t,k);return k}},{"./_export":306,"./_has":313,"./_hide":314,"./_iter-create":326,"./_iterators":330,"./_library":332,"./_object-gpo":348,"./_redefine":361,"./_set-to-string-tag":366,"./_wks":391}],328:[function(e,t){var n=e("./_wks")("iterator"),i=!1;try{var r=[7][n]();r["return"]=function(){i=!0},Array.from(r,function(){throw 2})}catch(o){}t.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o=[7],s=o[n]();s.next=function(){return{done:r=!0}},o[n]=function(){return s},e(o)}catch(a){}return r}},{"./_wks":391}],329:[function(e,t){t.exports=function(e,t){return{value:t,done:!!e}}},{}],330:[function(e,t){t.exports={}},{}],331:[function(e,t){var n=e("./_object-keys"),i=e("./_to-iobject");t.exports=function(e,t){for(var r,o=i(e),s=n(o),a=s.length,l=0;a>l;)if(o[r=s[l++]]===t)return r}},{"./_object-keys":350,"./_to-iobject":381}],332:[function(e,t){t.exports=!1},{}],333:[function(e,t){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&1e-6>e?e+e*e/2:Math.exp(e)-1}:n},{}],334:[function(e,t){t.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&1e-8>e?e-e*e/2:Math.log(1+e)}},{}],335:[function(e,t){t.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:0>e?-1:1}},{}],336:[function(e,t){var n=e("./_uid")("meta"),i=e("./_is-object"),r=e("./_has"),o=e("./_object-dp").f,s=0,a=Object.isExtensible||function(){return!0},l=!e("./_fails")(function(){return a(Object.preventExtensions({}))}),c=function(e){o(e,n,{value:{i:"O"+ ++s,w:{}}})},u=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,n)){if(!a(e))return"F";if(!t)return"E";c(e)}return e[n].i},d=function(e,t){if(!r(e,n)){if(!a(e))return!0;if(!t)return!1;c(e)}return e[n].w},h=function(e){return l&&f.NEED&&a(e)&&!r(e,n)&&c(e),e},f=t.exports={KEY:n,NEED:!1,fastKey:u,getWeak:d,onFreeze:h}},{"./_fails":308,"./_has":313,"./_is-object":323,"./_object-dp":341,"./_uid":388}],337:[function(e,t){var n=e("./es6.map"),i=e("./_export"),r=e("./_shared")("metadata"),o=r.store||(r.store=new(e("./es6.weak-map"))),s=function(e,t,i){var r=o.get(e);if(!r){if(!i)return void 0;o.set(e,r=new n)}var s=r.get(t);if(!s){if(!i)return void 0;r.set(t,s=new n)}return s},a=function(e,t,n){var i=s(t,n,!1);return void 0===i?!1:i.has(e)},l=function(e,t,n){var i=s(t,n,!1);return void 0===i?void 0:i.get(e)},c=function(e,t,n,i){s(n,i,!0).set(e,t)},u=function(e,t){var n=s(e,t,!1),i=[];return n&&n.forEach(function(e,t){i.push(t)}),i},d=function(e){return void 0===e||"symbol"==typeof e?e:String(e)},h=function(e){i(i.S,"Reflect",e)};t.exports={store:o,map:s,has:a,get:l,set:c,keys:u,key:d,exp:h}},{"./_export":306,"./_shared":368,"./es6.map":424,"./es6.weak-map":530}],338:[function(e,t){var n=e("./_global"),i=e("./_task").set,r=n.MutationObserver||n.WebKitMutationObserver,o=n.process,s=n.Promise,a="process"==e("./_cof")(o);t.exports=function(){var e,t,l,c=function(){var n,i;for(a&&(n=o.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?l():t=void 0,r}}t=void 0,n&&n.enter()};if(a)l=function(){o.nextTick(c)};else if(r){var u=!0,d=document.createTextNode("");new r(c).observe(d,{characterData:!0}),l=function(){d.data=u=!u}}else if(s&&s.resolve){var h=s.resolve();l=function(){h.then(c)}}else l=function(){i.call(n,c)};return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,l()),t=i}}},{"./_cof":292,"./_global":312,"./_task":378}],339:[function(e,t){"use strict";var n=e("./_object-keys"),i=e("./_object-gops"),r=e("./_object-pie"),o=e("./_to-object"),s=e("./_iobject"),a=Object.assign;t.exports=!a||e("./_fails")(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=a({},e)[n]||Object.keys(a({},t)).join("")!=i})?function(e){for(var t=o(e),a=arguments.length,l=1,c=i.f,u=r.f;a>l;)for(var d,h=s(arguments[l++]),f=c?n(h).concat(c(h)):n(h),p=f.length,m=0;p>m;)u.call(h,d=f[m++])&&(t[d]=h[d]);return t}:a},{"./_fails":308,"./_iobject":319,"./_object-gops":347,"./_object-keys":350,"./_object-pie":351,"./_to-object":383}],340:[function(e,t){var n=e("./_an-object"),i=e("./_object-dps"),r=e("./_enum-bug-keys"),o=e("./_shared-key")("IE_PROTO"),s=function(){},a="prototype",l=function(){var t,n=e("./_dom-create")("iframe"),i=r.length,o=">";for(n.style.display="none",e("./_html").appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object</script"+o),t.close(),l=t.F;i--;)delete l[a][r[i]];return l()};t.exports=Object.create||function(e,t){var r;return null!==e?(s[a]=n(e),r=new s,s[a]=null,r[o]=e):r=l(),void 0===t?r:i(r,t)}},{"./_an-object":281,"./_dom-create":303,"./_enum-bug-keys":304,"./_html":315,"./_object-dps":342,"./_shared-key":367}],341:[function(e,t,n){var i=e("./_an-object"),r=e("./_ie8-dom-define"),o=e("./_to-primitive"),s=Object.defineProperty;n.f=e("./_descriptors")?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return s(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},{"./_an-object":281,"./_descriptors":302,"./_ie8-dom-define":316,"./_to-primitive":384}],342:[function(e,t){var n=e("./_object-dp"),i=e("./_an-object"),r=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){i(e);for(var o,s=r(t),a=s.length,l=0;a>l;)n.f(e,o=s[l++],t[o]);return e}},{"./_an-object":281,"./_descriptors":302,"./_object-dp":341,"./_object-keys":350}],343:[function(e,t){t.exports=e("./_library")||!e("./_fails")(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete e("./_global")[t]})},{"./_fails":308,"./_global":312,"./_library":332}],344:[function(e,t,n){var i=e("./_object-pie"),r=e("./_property-desc"),o=e("./_to-iobject"),s=e("./_to-primitive"),a=e("./_has"),l=e("./_ie8-dom-define"),c=Object.getOwnPropertyDescriptor;n.f=e("./_descriptors")?c:function(e,t){if(e=o(e),t=s(t,!0),l)try{return c(e,t)}catch(n){}return a(e,t)?r(!i.f.call(e,t),e[t]):void 0}},{"./_descriptors":302,"./_has":313,"./_ie8-dom-define":316,"./_object-pie":351,"./_property-desc":359,"./_to-iobject":381,"./_to-primitive":384}],345:[function(e,t){var n=e("./_to-iobject"),i=e("./_object-gopn").f,r={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(t){return o.slice()}};t.exports.f=function(e){return o&&"[object Window]"==r.call(e)?s(e):i(n(e))}},{"./_object-gopn":346,"./_to-iobject":381}],346:[function(e,t,n){var i=e("./_object-keys-internal"),r=e("./_enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},{"./_enum-bug-keys":304,"./_object-keys-internal":349}],347:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],348:[function(e,t){var n=e("./_has"),i=e("./_to-object"),r=e("./_shared-key")("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,r)?e[r]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},{"./_has":313,"./_shared-key":367,"./_to-object":383}],349:[function(e,t){var n=e("./_has"),i=e("./_to-iobject"),r=e("./_array-includes")(!1),o=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var s,a=i(e),l=0,c=[];for(s in a)s!=o&&n(a,s)&&c.push(s);for(;t.length>l;)n(a,s=t[l++])&&(~r(c,s)||c.push(s));return c}},{"./_array-includes":285,"./_has":313,"./_shared-key":367,"./_to-iobject":381}],350:[function(e,t){var n=e("./_object-keys-internal"),i=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,i)}},{"./_enum-bug-keys":304,"./_object-keys-internal":349}],351:[function(e,t,n){n.f={}.propertyIsEnumerable},{}],352:[function(e,t){var n=e("./_export"),i=e("./_core"),r=e("./_fails");t.exports=function(e,t){var o=(i.Object||{})[e]||Object[e],s={};s[e]=t(o),n(n.S+n.F*r(function(){o(1)}),"Object",s)}},{"./_core":297,"./_export":306,"./_fails":308}],353:[function(e,t){var n=e("./_object-keys"),i=e("./_to-iobject"),r=e("./_object-pie").f;t.exports=function(e){return function(t){for(var o,s=i(t),a=n(s),l=a.length,c=0,u=[];l>c;)r.call(s,o=a[c++])&&u.push(e?[o,s[o]]:s[o]);return u}}},{"./_object-keys":350,"./_object-pie":351,"./_to-iobject":381}],354:[function(e,t){var n=e("./_object-gopn"),i=e("./_object-gops"),r=e("./_an-object"),o=e("./_global").Reflect;t.exports=o&&o.ownKeys||function(e){var t=n.f(r(e)),o=i.f;return o?t.concat(o(e)):t}},{"./_an-object":281,"./_global":312,"./_object-gopn":346,"./_object-gops":347}],355:[function(e,t){var n=e("./_global").parseFloat,i=e("./_string-trim").trim;t.exports=1/n(e("./_string-ws")+"-0")!==-1/0?function(e){var t=i(String(e),3),r=n(t);return 0===r&&"-"==t.charAt(0)?-0:r}:n},{"./_global":312,"./_string-trim":376,"./_string-ws":377}],356:[function(e,t){var n=e("./_global").parseInt,i=e("./_string-trim").trim,r=e("./_string-ws"),o=/^[\-+]?0[xX]/;t.exports=8!==n(r+"08")||22!==n(r+"0x16")?function(e,t){var r=i(String(e),3);return n(r,t>>>0||(o.test(r)?16:10))}:n},{"./_global":312,"./_string-trim":376,"./_string-ws":377}],357:[function(e,t){"use strict";var n=e("./_path"),i=e("./_invoke"),r=e("./_a-function");t.exports=function(){for(var e=r(this),t=arguments.length,o=Array(t),s=0,a=n._,l=!1;t>s;)(o[s]=arguments[s++])===a&&(l=!0);return function(){var n,r=this,s=arguments.length,c=0,u=0;if(!l&&!s)return i(e,o,r);if(n=o.slice(),l)for(;t>c;c++)n[c]===a&&(n[c]=arguments[u++]);for(;s>u;)n.push(arguments[u++]);return i(e,n,r)}}},{"./_a-function":277,"./_invoke":318,"./_path":358}],358:[function(e,t){t.exports=e("./_global")},{"./_global":312}],359:[function(e,t){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],360:[function(e,t){var n=e("./_redefine");t.exports=function(e,t,i){for(var r in t)n(e,r,t[r],i);return e}},{"./_redefine":361}],361:[function(e,t){var n=e("./_global"),i=e("./_hide"),r=e("./_has"),o=e("./_uid")("src"),s="toString",a=Function[s],l=(""+a).split(s);e("./_core").inspectSource=function(e){return a.call(e)},(t.exports=function(e,t,s,a){var c="function"==typeof s;c&&(r(s,"name")||i(s,"name",t)),e[t]!==s&&(c&&(r(s,o)||i(s,o,e[t]?""+e[t]:l.join(String(t)))),e===n?e[t]=s:a?e[t]?e[t]=s:i(e,t,s):(delete e[t],i(e,t,s)))})(Function.prototype,s,function(){return"function"==typeof this&&this[o]||a.call(this)})},{"./_core":297,"./_global":312,"./_has":313,"./_hide":314,"./_uid":388}],362:[function(e,t){t.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},{}],363:[function(e,t){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},{}],364:[function(e,t){var n=e("./_is-object"),i=e("./_an-object"),r=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,i){try{i=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2),i(t,[]),n=!(t instanceof Array)}catch(o){n=!0}return function(e,t){return r(e,t),n?e.__proto__=t:i(e,t),e}}({},!1):void 0),check:r}},{"./_an-object":281,"./_ctx":299,"./_is-object":323,"./_object-gopd":344}],365:[function(e,t){"use strict";var n=e("./_global"),i=e("./_object-dp"),r=e("./_descriptors"),o=e("./_wks")("species");t.exports=function(e){var t=n[e];r&&t&&!t[o]&&i.f(t,o,{configurable:!0,get:function(){return this}})}},{"./_descriptors":302,"./_global":312,"./_object-dp":341,"./_wks":391}],366:[function(e,t){var n=e("./_object-dp").f,i=e("./_has"),r=e("./_wks")("toStringTag");t.exports=function(e,t,o){e&&!i(e=o?e:e.prototype,r)&&n(e,r,{configurable:!0,value:t})}},{"./_has":313,"./_object-dp":341,"./_wks":391}],367:[function(e,t){var n=e("./_shared")("keys"),i=e("./_uid");t.exports=function(e){return n[e]||(n[e]=i(e))}},{"./_shared":368,"./_uid":388}],368:[function(e,t){var n=e("./_global"),i="__core-js_shared__",r=n[i]||(n[i]={});t.exports=function(e){return r[e]||(r[e]={})}},{"./_global":312}],369:[function(e,t){var n=e("./_an-object"),i=e("./_a-function"),r=e("./_wks")("species");t.exports=function(e,t){var o,s=n(e).constructor;return void 0===s||void 0==(o=n(s)[r])?t:i(o)}},{"./_a-function":277,"./_an-object":281,"./_wks":391}],370:[function(e,t){var n=e("./_fails");t.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)
})}},{"./_fails":308}],371:[function(e,t){var n=e("./_to-integer"),i=e("./_defined");t.exports=function(e){return function(t,r){var o,s,a=String(i(t)),l=n(r),c=a.length;return 0>l||l>=c?e?"":void 0:(o=a.charCodeAt(l),55296>o||o>56319||l+1===c||(s=a.charCodeAt(l+1))<56320||s>57343?e?a.charAt(l):o:e?a.slice(l,l+2):(o-55296<<10)+(s-56320)+65536)}}},{"./_defined":301,"./_to-integer":380}],372:[function(e,t){var n=e("./_is-regexp"),i=e("./_defined");t.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(e))}},{"./_defined":301,"./_is-regexp":324}],373:[function(e,t){var n=e("./_export"),i=e("./_fails"),r=e("./_defined"),o=/"/g,s=function(e,t,n,i){var s=String(r(e)),a="<"+t;return""!==n&&(a+=" "+n+'="'+String(i).replace(o,"&quot;")+'"'),a+">"+s+"</"+t+">"};t.exports=function(e,t){var r={};r[e]=t(s),n(n.P+n.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",r)}},{"./_defined":301,"./_export":306,"./_fails":308}],374:[function(e,t){var n=e("./_to-length"),i=e("./_string-repeat"),r=e("./_defined");t.exports=function(e,t,o,s){var a=String(r(e)),l=a.length,c=void 0===o?" ":String(o),u=n(t);if(l>=u||""==c)return a;var d=u-l,h=i.call(c,Math.ceil(d/c.length));return h.length>d&&(h=h.slice(0,d)),s?h+a:a+h}},{"./_defined":301,"./_string-repeat":375,"./_to-length":382}],375:[function(e,t){"use strict";var n=e("./_to-integer"),i=e("./_defined");t.exports=function(e){var t=String(i(this)),r="",o=n(e);if(0>o||1/0==o)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(r+=t);return r}},{"./_defined":301,"./_to-integer":380}],376:[function(e,t){var n=e("./_export"),i=e("./_defined"),r=e("./_fails"),o=e("./_string-ws"),s="["+o+"]",a="​",l=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),u=function(e,t,i){var s={},l=r(function(){return!!o[e]()||a[e]()!=a}),c=s[e]=l?t(d):o[e];i&&(s[i]=c),n(n.P+n.F*l,"String",s)},d=u.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(c,"")),e};t.exports=u},{"./_defined":301,"./_export":306,"./_fails":308,"./_string-ws":377}],377:[function(e,t){t.exports="	\n\f\r   ᠎             　\u2028\u2029﻿"},{}],378:[function(e,t){var n,i,r,o=e("./_ctx"),s=e("./_invoke"),a=e("./_html"),l=e("./_dom-create"),c=e("./_global"),u=c.process,d=c.setImmediate,h=c.clearImmediate,f=c.MessageChannel,p=0,m={},g="onreadystatechange",v=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},b=function(e){v.call(e.data)};d&&h||(d=function(e){for(var t=[],i=1;arguments.length>i;)t.push(arguments[i++]);return m[++p]=function(){s("function"==typeof e?e:Function(e),t)},n(p),p},h=function(e){delete m[e]},"process"==e("./_cof")(u)?n=function(e){u.nextTick(o(v,e,1))}:f?(i=new f,r=i.port2,i.port1.onmessage=b,n=o(r.postMessage,r,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(e){c.postMessage(e+"","*")},c.addEventListener("message",b,!1)):n=g in l("script")?function(e){a.appendChild(l("script"))[g]=function(){a.removeChild(this),v.call(e)}}:function(e){setTimeout(o(v,e,1),0)}),t.exports={set:d,clear:h}},{"./_cof":292,"./_ctx":299,"./_dom-create":303,"./_global":312,"./_html":315,"./_invoke":318}],379:[function(e,t){var n=e("./_to-integer"),i=Math.max,r=Math.min;t.exports=function(e,t){return e=n(e),0>e?i(e+t,0):r(e,t)}},{"./_to-integer":380}],380:[function(e,t){var n=Math.ceil,i=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},{}],381:[function(e,t){var n=e("./_iobject"),i=e("./_defined");t.exports=function(e){return n(i(e))}},{"./_defined":301,"./_iobject":319}],382:[function(e,t){var n=e("./_to-integer"),i=Math.min;t.exports=function(e){return e>0?i(n(e),9007199254740991):0}},{"./_to-integer":380}],383:[function(e,t){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":301}],384:[function(e,t){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var i,r;if(t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;if("function"==typeof(i=e.valueOf)&&!n(r=i.call(e)))return r;if(!t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":323}],385:[function(e,t){"use strict";if(e("./_descriptors")){var n=e("./_library"),i=e("./_global"),r=e("./_fails"),o=e("./_export"),s=e("./_typed"),a=e("./_typed-buffer"),l=e("./_ctx"),c=e("./_an-instance"),u=e("./_property-desc"),d=e("./_hide"),h=e("./_redefine-all"),f=(e("./_is-integer"),e("./_to-integer")),p=e("./_to-length"),m=e("./_to-index"),g=e("./_to-primitive"),v=e("./_has"),b=e("./_same-value"),y=e("./_classof"),w=e("./_is-object"),x=e("./_to-object"),k=e("./_is-array-iter"),_=e("./_object-create"),S=e("./_object-gpo"),C=e("./_object-gopn").f,E=(e("./core.is-iterable"),e("./core.get-iterator-method")),I=e("./_uid"),R=e("./_wks"),T=e("./_array-methods"),A=e("./_array-includes"),M=e("./_species-constructor"),F=e("./es6.array.iterator"),V=e("./_iterators"),L=e("./_iter-detect"),O=e("./_set-species"),N=e("./_array-fill"),$=e("./_array-copy-within"),D=e("./_object-dp"),P=e("./_object-gopd"),j=D.f,B=P.f,U=i.RangeError,H=i.TypeError,z=i.Uint8Array,q="ArrayBuffer",W="Shared"+q,K="BYTES_PER_ELEMENT",G="prototype",Y=Array[G],Q=a.ArrayBuffer,J=a.DataView,X=T(0),Z=T(2),et=T(3),tt=T(4),nt=T(5),it=T(6),rt=A(!0),ot=A(!1),st=F.values,at=F.keys,lt=F.entries,ct=Y.lastIndexOf,ut=Y.reduce,dt=Y.reduceRight,ht=Y.join,ft=Y.sort,pt=Y.slice,mt=Y.toString,gt=Y.toLocaleString,vt=R("iterator"),bt=R("toStringTag"),yt=I("typed_constructor"),wt=I("def_constructor"),xt=s.CONSTR,kt=s.TYPED,_t=s.VIEW,St="Wrong length!",Ct=T(1,function(e,t){return Mt(M(e,e[wt]),t)}),Et=r(function(){return 1===new z(new Uint16Array([1]).buffer)[0]}),It=!!z&&!!z[G].set&&r(function(){new z(1).set({})}),Rt=function(e,t){if(void 0===e)throw H(St);var n=+e,i=p(e);if(t&&!b(n,i))throw U(St);return i},Tt=function(e,t){var n=f(e);if(0>n||n%t)throw U("Wrong offset!");return n},At=function(e){if(w(e)&&kt in e)return e;throw H(e+" is not a typed array!")},Mt=function(e,t){if(!(w(e)&&yt in e))throw H("It is not a typed array constructor!");return new e(t)},Ft=function(e,t){return Vt(M(e,e[wt]),t)},Vt=function(e,t){for(var n=0,i=t.length,r=Mt(e,i);i>n;)r[n]=t[n++];return r},Lt=function(e,t,n){j(e,t,{get:function(){return this._d[n]}})},Ot=function(e){var t,n,i,r,o,s,a=x(e),c=arguments.length,u=c>1?arguments[1]:void 0,d=void 0!==u,h=E(a);if(void 0!=h&&!k(h)){for(s=h.call(a),i=[],t=0;!(o=s.next()).done;t++)i.push(o.value);a=i}for(d&&c>2&&(u=l(u,arguments[2],2)),t=0,n=p(a.length),r=Mt(this,n);n>t;t++)r[t]=d?u(a[t],t):a[t];return r},Nt=function(){for(var e=0,t=arguments.length,n=Mt(this,t);t>e;)n[e]=arguments[e++];return n},$t=!!z&&r(function(){gt.call(new z(1))}),Dt=function(){return gt.apply($t?pt.call(At(this)):At(this),arguments)},Pt={copyWithin:function(e,t){return $.call(At(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return tt(At(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(){return N.apply(At(this),arguments)},filter:function(e){return Ft(this,Z(At(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return nt(At(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return it(At(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){X(At(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ot(At(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return rt(At(this),e,arguments.length>1?arguments[1]:void 0)},join:function(){return ht.apply(At(this),arguments)},lastIndexOf:function(){return ct.apply(At(this),arguments)},map:function(e){return Ct(At(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(){return ut.apply(At(this),arguments)},reduceRight:function(){return dt.apply(At(this),arguments)},reverse:function(){for(var e,t=this,n=At(t).length,i=Math.floor(n/2),r=0;i>r;)e=t[r],t[r++]=t[--n],t[n]=e;return t},some:function(e){return et(At(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ft.call(At(this),e)},subarray:function(e,t){var n=At(this),i=n.length,r=m(e,i);return new(M(n,n[wt]))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,p((void 0===t?i:m(t,i))-r))}},jt=function(e,t){return Ft(this,pt.call(At(this),e,t))},Bt=function(e){At(this);var t=Tt(arguments[1],1),n=this.length,i=x(e),r=p(i.length),o=0;if(r+t>n)throw U(St);for(;r>o;)this[t+o]=i[o++]},Ut={entries:function(){return lt.call(At(this))},keys:function(){return at.call(At(this))},values:function(){return st.call(At(this))}},Ht=function(e,t){return w(e)&&e[kt]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},zt=function(e,t){return Ht(e,t=g(t,!0))?u(2,e[t]):B(e,t)},qt=function(e,t,n){return!(Ht(e,t=g(t,!0))&&w(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?j(e,t,n):(e[t]=n.value,e)};xt||(P.f=zt,D.f=qt),o(o.S+o.F*!xt,"Object",{getOwnPropertyDescriptor:zt,defineProperty:qt}),r(function(){mt.call({})})&&(mt=gt=function(){return ht.call(this)});var Wt=h({},Pt);h(Wt,Ut),d(Wt,vt,Ut.values),h(Wt,{slice:jt,set:Bt,constructor:function(){},toString:mt,toLocaleString:Dt}),Lt(Wt,"buffer","b"),Lt(Wt,"byteOffset","o"),Lt(Wt,"byteLength","l"),Lt(Wt,"length","e"),j(Wt,bt,{get:function(){return this[kt]}}),t.exports=function(e,t,a,l){l=!!l;var u=e+(l?"Clamped":"")+"Array",h="Uint8Array"!=u,f="get"+e,m="set"+e,g=i[u],v=g||{},b=g&&S(g),x=!g||!s.ABV,k={},E=g&&g[G],I=function(e,n){var i=e._d;return i.v[f](n*t+i.o,Et)},R=function(e,n,i){var r=e._d;l&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),r.v[m](n*t+r.o,i,Et)},T=function(e,t){j(e,t,{get:function(){return I(this,t)},set:function(e){return R(this,t,e)},enumerable:!0})};x?(g=a(function(e,n,i,r){c(e,g,u,"_d");var o,s,a,l,h=0,f=0;if(w(n)){if(!(n instanceof Q||(l=y(n))==q||l==W))return kt in n?Vt(g,n):Ot.call(g,n);o=n,f=Tt(i,t);var m=n.byteLength;if(void 0===r){if(m%t)throw U(St);if(s=m-f,0>s)throw U(St)}else if(s=p(r)*t,s+f>m)throw U(St);a=s/t}else a=Rt(n,!0),s=a*t,o=new Q(s);for(d(e,"_d",{b:o,o:f,l:s,e:a,v:new J(o)});a>h;)T(e,h++)}),E=g[G]=_(Wt),d(E,"constructor",g)):L(function(e){new g(null),new g(e)},!0)||(g=a(function(e,n,i,r){c(e,g,u);var o;return w(n)?n instanceof Q||(o=y(n))==q||o==W?void 0!==r?new v(n,Tt(i,t),r):void 0!==i?new v(n,Tt(i,t)):new v(n):kt in n?Vt(g,n):Ot.call(g,n):new v(Rt(n,h))}),X(b!==Function.prototype?C(v).concat(C(b)):C(v),function(e){e in g||d(g,e,v[e])}),g[G]=E,n||(E.constructor=g));var A=E[vt],M=!!A&&("values"==A.name||void 0==A.name),F=Ut.values;d(g,yt,!0),d(E,kt,u),d(E,_t,!0),d(E,wt,g),(l?new g(1)[bt]==u:bt in E)||j(E,bt,{get:function(){return u}}),k[u]=g,o(o.G+o.W+o.F*(g!=v),k),o(o.S,u,{BYTES_PER_ELEMENT:t,from:Ot,of:Nt}),K in E||d(E,K,t),o(o.P,u,Pt),O(u),o(o.P+o.F*It,u,{set:Bt}),o(o.P+o.F*!M,u,Ut),o(o.P+o.F*(E.toString!=mt),u,{toString:mt}),o(o.P+o.F*r(function(){new g(1).slice()}),u,{slice:jt}),o(o.P+o.F*(r(function(){return[1,2].toLocaleString()!=new g([1,2]).toLocaleString()})||!r(function(){E.toLocaleString.call([1,2])})),u,{toLocaleString:Dt}),V[u]=M?A:F,n||M||d(E,vt,F)}}else t.exports=function(){}},{"./_an-instance":280,"./_array-copy-within":282,"./_array-fill":283,"./_array-includes":285,"./_array-methods":286,"./_classof":291,"./_ctx":299,"./_descriptors":302,"./_export":306,"./_fails":308,"./_global":312,"./_has":313,"./_hide":314,"./_is-array-iter":320,"./_is-integer":322,"./_is-object":323,"./_iter-detect":328,"./_iterators":330,"./_library":332,"./_object-create":340,"./_object-dp":341,"./_object-gopd":344,"./_object-gopn":346,"./_object-gpo":348,"./_property-desc":359,"./_redefine-all":360,"./_same-value":363,"./_set-species":365,"./_species-constructor":369,"./_to-index":379,"./_to-integer":380,"./_to-length":382,"./_to-object":383,"./_to-primitive":384,"./_typed":387,"./_typed-buffer":386,"./_uid":388,"./_wks":391,"./core.get-iterator-method":392,"./core.is-iterable":393,"./es6.array.iterator":405}],386:[function(e,t,n){"use strict";var i=e("./_global"),r=e("./_descriptors"),o=e("./_library"),s=e("./_typed"),a=e("./_hide"),l=e("./_redefine-all"),c=e("./_fails"),u=e("./_an-instance"),d=e("./_to-integer"),h=e("./_to-length"),f=e("./_object-gopn").f,p=e("./_object-dp").f,m=e("./_array-fill"),g=e("./_set-to-string-tag"),v="ArrayBuffer",b="DataView",y="prototype",w="Wrong length!",x="Wrong index!",k=i[v],_=i[b],S=i.Math,C=(i.parseInt,i.RangeError),E=i.Infinity,I=k,R=S.abs,T=S.pow,A=(S.min,S.floor),M=S.log,F=S.LN2,V="buffer",L="byteLength",O="byteOffset",N=r?"_b":V,$=r?"_l":L,D=r?"_o":O,P=function(e,t,n){var i,r,o,s=Array(n),a=8*n-t-1,l=(1<<a)-1,c=l>>1,u=23===t?T(2,-24)-T(2,-77):0,d=0,h=0>e||0===e&&0>1/e?1:0;for(e=R(e),e!=e||e===E?(r=e!=e?1:0,i=l):(i=A(M(e)/F),e*(o=T(2,-i))<1&&(i--,o*=2),e+=i+c>=1?u/o:u*T(2,1-c),e*o>=2&&(i++,o/=2),i+c>=l?(r=0,i=l):i+c>=1?(r=(e*o-1)*T(2,t),i+=c):(r=e*T(2,c-1)*T(2,t),i=0));t>=8;s[d++]=255&r,r/=256,t-=8);for(i=i<<t|r,a+=t;a>0;s[d++]=255&i,i/=256,a-=8);return s[--d]|=128*h,s},j=function(e,t,n){var i,r=8*n-t-1,o=(1<<r)-1,s=o>>1,a=r-7,l=n-1,c=e[l--],u=127&c;for(c>>=7;a>0;u=256*u+e[l],l--,a-=8);for(i=u&(1<<-a)-1,u>>=-a,a+=t;a>0;i=256*i+e[l],l--,a-=8);if(0===u)u=1-s;else{if(u===o)return i?0/0:c?-E:E;i+=T(2,t),u-=s}return(c?-1:1)*i*T(2,u-t)},B=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},U=function(e){return[255&e]},H=function(e){return[255&e,e>>8&255]},z=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},q=function(e){return P(e,52,8)},W=function(e){return P(e,23,4)},K=function(e,t,n){p(e[y],t,{get:function(){return this[n]}})},G=function(e,t,n,i){var r=+n,o=d(r);if(r!=o||0>o||o+t>e[$])throw C(x);var s=e[N]._b,a=o+e[D],l=s.slice(a,a+t);return i?l:l.reverse()},Y=function(e,t,n,i,r,o){var s=+n,a=d(s);if(s!=a||0>a||a+t>e[$])throw C(x);for(var l=e[N]._b,c=a+e[D],u=i(+r),h=0;t>h;h++)l[c+h]=u[o?h:t-h-1]},Q=function(e,t){u(e,k,v);var n=+t,i=h(n);if(n!=i)throw C(w);return i};if(s.ABV){if(!c(function(){new k})||!c(function(){new k(.5)})){k=function(e){return new I(Q(this,e))};for(var J,X=k[y]=I[y],Z=f(I),et=0;Z.length>et;)(J=Z[et++])in k||a(k,J,I[J]);o||(X.constructor=k)}var tt=new _(new k(2)),nt=_[y].setInt8;tt.setInt8(0,2147483648),tt.setInt8(1,2147483649),(tt.getInt8(0)||!tt.getInt8(1))&&l(_[y],{setInt8:function(e,t){nt.call(this,e,t<<24>>24)},setUint8:function(e,t){nt.call(this,e,t<<24>>24)}},!0)}else k=function(e){var t=Q(this,e);this._b=m.call(Array(t),0),this[$]=t},_=function(e,t,n){u(this,_,b),u(e,k,b);var i=e[$],r=d(t);if(0>r||r>i)throw C("Wrong offset!");if(n=void 0===n?i-r:h(n),r+n>i)throw C(w);this[N]=e,this[D]=r,this[$]=n},r&&(K(k,L,"_l"),K(_,V,"_b"),K(_,L,"_l"),K(_,O,"_o")),l(_[y],{getInt8:function(e){return G(this,1,e)[0]<<24>>24},getUint8:function(e){return G(this,1,e)[0]},getInt16:function(e){var t=G(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=G(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return B(G(this,4,e,arguments[1]))},getUint32:function(e){return B(G(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return j(G(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return j(G(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){Y(this,1,e,U,t)},setUint8:function(e,t){Y(this,1,e,U,t)},setInt16:function(e,t){Y(this,2,e,H,t,arguments[2])},setUint16:function(e,t){Y(this,2,e,H,t,arguments[2])},setInt32:function(e,t){Y(this,4,e,z,t,arguments[2])},setUint32:function(e,t){Y(this,4,e,z,t,arguments[2])},setFloat32:function(e,t){Y(this,4,e,W,t,arguments[2])},setFloat64:function(e,t){Y(this,8,e,q,t,arguments[2])}});g(k,v),g(_,b),a(_[y],s.VIEW,!0),n[v]=k,n[b]=_},{"./_an-instance":280,"./_array-fill":283,"./_descriptors":302,"./_fails":308,"./_global":312,"./_hide":314,"./_library":332,"./_object-dp":341,"./_object-gopn":346,"./_redefine-all":360,"./_set-to-string-tag":366,"./_to-integer":380,"./_to-length":382,"./_typed":387}],387:[function(e,t){for(var n,i=e("./_global"),r=e("./_hide"),o=e("./_uid"),s=o("typed_array"),a=o("view"),l=!(!i.ArrayBuffer||!i.DataView),c=l,u=0,d=9,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d>u;)(n=i[h[u++]])?(r(n.prototype,s,!0),r(n.prototype,a,!0)):c=!1;t.exports={ABV:l,CONSTR:c,TYPED:s,VIEW:a}},{"./_global":312,"./_hide":314,"./_uid":388}],388:[function(e,t){var n=0,i=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},{}],389:[function(e,t){var n=e("./_global"),i=e("./_core"),r=e("./_library"),o=e("./_wks-ext"),s=e("./_object-dp").f;t.exports=function(e){var t=i.Symbol||(i.Symbol=r?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},{"./_core":297,"./_global":312,"./_library":332,"./_object-dp":341,"./_wks-ext":390}],390:[function(e,t,n){n.f=e("./_wks")},{"./_wks":391}],391:[function(e,t){var n=e("./_shared")("wks"),i=e("./_uid"),r=e("./_global").Symbol,o="function"==typeof r,s=t.exports=function(e){return n[e]||(n[e]=o&&r[e]||(o?r:i)("Symbol."+e))};s.store=n},{"./_global":312,"./_shared":368,"./_uid":388}],392:[function(e,t){var n=e("./_classof"),i=e("./_wks")("iterator"),r=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){return void 0!=e?e[i]||e["@@iterator"]||r[n(e)]:void 0}},{"./_classof":291,"./_core":297,"./_iterators":330,"./_wks":391}],393:[function(e,t){var n=e("./_classof"),i=e("./_wks")("iterator"),r=e("./_iterators");t.exports=e("./_core").isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||r.hasOwnProperty(n(t))}},{"./_classof":291,"./_core":297,"./_iterators":330,"./_wks":391}],394:[function(e){var t=e("./_export"),n=e("./_replacer")(/[\\^$*+?.()|[\]{}]/g,"\\$&");t(t.S,"RegExp",{escape:function(e){return n(e)}})},{"./_export":306,"./_replacer":362}],395:[function(e){var t=e("./_export");t(t.P,"Array",{copyWithin:e("./_array-copy-within")}),e("./_add-to-unscopables")("copyWithin")},{"./_add-to-unscopables":279,"./_array-copy-within":282,"./_export":306}],396:[function(e){"use strict";var t=e("./_export"),n=e("./_array-methods")(4);t(t.P+t.F*!e("./_strict-method")([].every,!0),"Array",{every:function(e){return n(this,e,arguments[1])}})},{"./_array-methods":286,"./_export":306,"./_strict-method":370}],397:[function(e){var t=e("./_export");t(t.P,"Array",{fill:e("./_array-fill")}),e("./_add-to-unscopables")("fill")},{"./_add-to-unscopables":279,"./_array-fill":283,"./_export":306}],398:[function(e){"use strict";var t=e("./_export"),n=e("./_array-methods")(2);t(t.P+t.F*!e("./_strict-method")([].filter,!0),"Array",{filter:function(e){return n(this,e,arguments[1])}})},{"./_array-methods":286,"./_export":306,"./_strict-method":370}],399:[function(e){"use strict";var t=e("./_export"),n=e("./_array-methods")(6),i="findIndex",r=!0;i in[]&&Array(1)[i](function(){r=!1}),t(t.P+t.F*r,"Array",{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),e("./_add-to-unscopables")(i)},{"./_add-to-unscopables":279,"./_array-methods":286,"./_export":306}],400:[function(e){"use strict";var t=e("./_export"),n=e("./_array-methods")(5),i="find",r=!0;i in[]&&Array(1)[i](function(){r=!1}),t(t.P+t.F*r,"Array",{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),e("./_add-to-unscopables")(i)},{"./_add-to-unscopables":279,"./_array-methods":286,"./_export":306}],401:[function(e){"use strict";var t=e("./_export"),n=e("./_array-methods")(0),i=e("./_strict-method")([].forEach,!0);t(t.P+t.F*!i,"Array",{forEach:function(e){return n(this,e,arguments[1])}})},{"./_array-methods":286,"./_export":306,"./_strict-method":370}],402:[function(e){"use strict";var t=e("./_ctx"),n=e("./_export"),i=e("./_to-object"),r=e("./_iter-call"),o=e("./_is-array-iter"),s=e("./_to-length"),a=e("./_create-property"),l=e("./core.get-iterator-method");n(n.S+n.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var n,c,u,d,h=i(e),f="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,g=void 0!==m,v=0,b=l(h);if(g&&(m=t(m,p>2?arguments[2]:void 0,2)),void 0==b||f==Array&&o(b))for(n=s(h.length),c=new f(n);n>v;v++)a(c,v,g?m(h[v],v):h[v]);else for(d=b.call(h),c=new f;!(u=d.next()).done;v++)a(c,v,g?r(d,m,[u.value,v],!0):u.value);return c.length=v,c}})},{"./_create-property":298,"./_ctx":299,"./_export":306,"./_is-array-iter":320,"./_iter-call":325,"./_iter-detect":328,"./_to-length":382,"./_to-object":383,"./core.get-iterator-method":392}],403:[function(e){"use strict";var t=e("./_export"),n=e("./_array-includes")(!1),i=[].indexOf,r=!!i&&1/[1].indexOf(1,-0)<0;t(t.P+t.F*(r||!e("./_strict-method")(i)),"Array",{indexOf:function(e){return r?i.apply(this,arguments)||0:n(this,e,arguments[1])}})},{"./_array-includes":285,"./_export":306,"./_strict-method":370}],404:[function(e){var t=e("./_export");t(t.S,"Array",{isArray:e("./_is-array")})},{"./_export":306,"./_is-array":321}],405:[function(e,t){"use strict";var n=e("./_add-to-unscopables"),i=e("./_iter-step"),r=e("./_iterators"),o=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),r.Arguments=r.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":279,"./_iter-define":327,"./_iter-step":329,"./_iterators":330,"./_to-iobject":381}],406:[function(e){"use strict";var t=e("./_export"),n=e("./_to-iobject"),i=[].join;t(t.P+t.F*(e("./_iobject")!=Object||!e("./_strict-method")(i)),"Array",{join:function(e){return i.call(n(this),void 0===e?",":e)}})},{"./_export":306,"./_iobject":319,"./_strict-method":370,"./_to-iobject":381}],407:[function(e){"use strict";var t=e("./_export"),n=e("./_to-iobject"),i=e("./_to-integer"),r=e("./_to-length"),o=[].lastIndexOf,s=!!o&&1/[1].lastIndexOf(1,-0)<0;t(t.P+t.F*(s||!e("./_strict-method")(o)),"Array",{lastIndexOf:function(e){if(s)return o.apply(this,arguments)||0;var t=n(this),a=r(t.length),l=a-1;for(arguments.length>1&&(l=Math.min(l,i(arguments[1]))),0>l&&(l=a+l);l>=0;l--)if(l in t&&t[l]===e)return l||0;return-1}})},{"./_export":306,"./_strict-method":370,"./_to-integer":380,"./_to-iobject":381,"./_to-length":382}],408:[function(e){"use strict";var t=e("./_export"),n=e("./_array-methods")(1);t(t.P+t.F*!e("./_strict-method")([].map,!0),"Array",{map:function(e){return n(this,e,arguments[1])}})},{"./_array-methods":286,"./_export":306,"./_strict-method":370}],409:[function(e){"use strict";var t=e("./_export"),n=e("./_create-property");t(t.S+t.F*e("./_fails")(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,i=new("function"==typeof this?this:Array)(t);t>e;)n(i,e,arguments[e++]);return i.length=t,i}})},{"./_create-property":298,"./_export":306,"./_fails":308}],410:[function(e){"use strict";var t=e("./_export"),n=e("./_array-reduce");t(t.P+t.F*!e("./_strict-method")([].reduceRight,!0),"Array",{reduceRight:function(e){return n(this,e,arguments.length,arguments[1],!0)}})},{"./_array-reduce":287,"./_export":306,"./_strict-method":370}],411:[function(e){"use strict";var t=e("./_export"),n=e("./_array-reduce");t(t.P+t.F*!e("./_strict-method")([].reduce,!0),"Array",{reduce:function(e){return n(this,e,arguments.length,arguments[1],!1)}})},{"./_array-reduce":287,"./_export":306,"./_strict-method":370}],412:[function(e){"use strict";var t=e("./_export"),n=e("./_html"),i=e("./_cof"),r=e("./_to-index"),o=e("./_to-length"),s=[].slice;t(t.P+t.F*e("./_fails")(function(){n&&s.call(n)}),"Array",{slice:function(e,t){var n=o(this.length),a=i(this);if(t=void 0===t?n:t,"Array"==a)return s.call(this,e,t);for(var l=r(e,n),c=r(t,n),u=o(c-l),d=Array(u),h=0;u>h;h++)d[h]="String"==a?this.charAt(l+h):this[l+h];return d}})},{"./_cof":292,"./_export":306,"./_fails":308,"./_html":315,"./_to-index":379,"./_to-length":382}],413:[function(e){"use strict";var t=e("./_export"),n=e("./_array-methods")(3);t(t.P+t.F*!e("./_strict-method")([].some,!0),"Array",{some:function(e){return n(this,e,arguments[1])}})},{"./_array-methods":286,"./_export":306,"./_strict-method":370}],414:[function(e){"use strict";var t=e("./_export"),n=e("./_a-function"),i=e("./_to-object"),r=e("./_fails"),o=[].sort,s=[1,2,3];t(t.P+t.F*(r(function(){s.sort(void 0)})||!r(function(){s.sort(null)})||!e("./_strict-method")(o)),"Array",{sort:function(e){return void 0===e?o.call(i(this)):o.call(i(this),n(e))}})},{"./_a-function":277,"./_export":306,"./_fails":308,"./_strict-method":370,"./_to-object":383}],415:[function(e){e("./_set-species")("Array")},{"./_set-species":365}],416:[function(e){var t=e("./_export");t(t.S,"Date",{now:function(){return(new Date).getTime()}})},{"./_export":306}],417:[function(e){"use strict";var t=e("./_export"),n=e("./_fails"),i=Date.prototype.getTime,r=function(e){return e>9?e:"0"+e};t(t.P+t.F*(n(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!n(function(){new Date(0/0).toISOString()})),"Date",{toISOString:function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),o=0>t?"-":t>9999?"+":"";return o+("00000"+Math.abs(t)).slice(o?-6:-4)+"-"+r(e.getUTCMonth()+1)+"-"+r(e.getUTCDate())+"T"+r(e.getUTCHours())+":"+r(e.getUTCMinutes())+":"+r(e.getUTCSeconds())+"."+(n>99?n:"0"+r(n))+"Z"}})},{"./_export":306,"./_fails":308}],418:[function(e){"use strict";var t=e("./_export"),n=e("./_to-object"),i=e("./_to-primitive");t(t.P+t.F*e("./_fails")(function(){return null!==new Date(0/0).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(){var e=n(this),t=i(e);return"number"!=typeof t||isFinite(t)?e.toISOString():null}})},{"./_export":306,"./_fails":308,"./_to-object":383,"./_to-primitive":384}],419:[function(e){var t=e("./_wks")("toPrimitive"),n=Date.prototype;t in n||e("./_hide")(n,t,e("./_date-to-primitive"))},{"./_date-to-primitive":300,"./_hide":314,"./_wks":391}],420:[function(e){var t=Date.prototype,n="Invalid Date",i="toString",r=t[i],o=t.getTime;new Date(0/0)+""!=n&&e("./_redefine")(t,i,function(){var e=o.call(this);return e===e?r.call(this):n})},{"./_redefine":361}],421:[function(e){var t=e("./_export");t(t.P,"Function",{bind:e("./_bind")})},{"./_bind":290,"./_export":306}],422:[function(e){"use strict";var t=e("./_is-object"),n=e("./_object-gpo"),i=e("./_wks")("hasInstance"),r=Function.prototype;i in r||e("./_object-dp").f(r,i,{value:function(e){if("function"!=typeof this||!t(e))return!1;if(!t(this.prototype))return e instanceof this;for(;e=n(e);)if(this.prototype===e)return!0;return!1}})},{"./_is-object":323,"./_object-dp":341,"./_object-gpo":348,"./_wks":391}],423:[function(e){var t=e("./_object-dp").f,n=e("./_property-desc"),i=e("./_has"),r=Function.prototype,o=/^\s*function ([^ (]*)/,s="name",a=Object.isExtensible||function(){return!0};s in r||e("./_descriptors")&&t(r,s,{configurable:!0,get:function(){try{var e=this,r=(""+e).match(o)[1];return i(e,s)||!a(e)||t(e,s,n(5,r)),r}catch(l){return""}}})},{"./_descriptors":302,"./_has":313,"./_object-dp":341,"./_property-desc":359}],424:[function(e,t){"use strict";var n=e("./_collection-strong");t.exports=e("./_collection")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(this,e);return t&&t.v},set:function(e,t){return n.def(this,0===e?0:e,t)}},n,!0)},{"./_collection":296,"./_collection-strong":293}],425:[function(e){var t=e("./_export"),n=e("./_math-log1p"),i=Math.sqrt,r=Math.acosh;t(t.S+t.F*!(r&&710==Math.floor(r(Number.MAX_VALUE))&&1/0==r(1/0)),"Math",{acosh:function(e){return(e=+e)<1?0/0:e>94906265.62425156?Math.log(e)+Math.LN2:n(e-1+i(e-1)*i(e+1))}})},{"./_export":306,"./_math-log1p":334}],426:[function(e){function t(e){return isFinite(e=+e)&&0!=e?0>e?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}var n=e("./_export"),i=Math.asinh;n(n.S+n.F*!(i&&1/i(0)>0),"Math",{asinh:t})},{"./_export":306}],427:[function(e){var t=e("./_export"),n=Math.atanh;t(t.S+t.F*!(n&&1/n(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},{"./_export":306}],428:[function(e){var t=e("./_export"),n=e("./_math-sign");t(t.S,"Math",{cbrt:function(e){return n(e=+e)*Math.pow(Math.abs(e),1/3)}})},{"./_export":306,"./_math-sign":335}],429:[function(e){var t=e("./_export");t(t.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},{"./_export":306}],430:[function(e){var t=e("./_export"),n=Math.exp;t(t.S,"Math",{cosh:function(e){return(n(e=+e)+n(-e))/2}})},{"./_export":306}],431:[function(e){var t=e("./_export"),n=e("./_math-expm1");t(t.S+t.F*(n!=Math.expm1),"Math",{expm1:n})},{"./_export":306,"./_math-expm1":333}],432:[function(e){var t=e("./_export"),n=e("./_math-sign"),i=Math.pow,r=i(2,-52),o=i(2,-23),s=i(2,127)*(2-o),a=i(2,-126),l=function(e){return e+1/r-1/r};t(t.S,"Math",{fround:function(e){var t,i,c=Math.abs(e),u=n(e);return a>c?u*l(c/a/o)*a*o:(t=(1+o/r)*c,i=t-(t-c),i>s||i!=i?1/0*u:u*i)}})},{"./_export":306,"./_math-sign":335}],433:[function(e){var t=e("./_export"),n=Math.abs;t(t.S,"Math",{hypot:function(){for(var e,t,i=0,r=0,o=arguments.length,s=0;o>r;)e=n(arguments[r++]),e>s?(t=s/e,i=i*t*t+1,s=e):e>0?(t=e/s,i+=t*t):i+=e;return 1/0===s?1/0:s*Math.sqrt(i)}})},{"./_export":306}],434:[function(e){var t=e("./_export"),n=Math.imul;t(t.S+t.F*e("./_fails")(function(){return-5!=n(4294967295,5)||2!=n.length}),"Math",{imul:function(e,t){var n=65535,i=+e,r=+t,o=n&i,s=n&r;return 0|o*s+((n&i>>>16)*s+o*(n&r>>>16)<<16>>>0)}})},{"./_export":306,"./_fails":308}],435:[function(e){var t=e("./_export");t(t.S,"Math",{log10:function(e){return Math.log(e)/Math.LN10}})},{"./_export":306}],436:[function(e){var t=e("./_export");t(t.S,"Math",{log1p:e("./_math-log1p")})},{"./_export":306,"./_math-log1p":334}],437:[function(e){var t=e("./_export");t(t.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},{"./_export":306}],438:[function(e){var t=e("./_export");t(t.S,"Math",{sign:e("./_math-sign")})},{"./_export":306,"./_math-sign":335}],439:[function(e){var t=e("./_export"),n=e("./_math-expm1"),i=Math.exp;t(t.S+t.F*e("./_fails")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(n(e)-n(-e))/2:(i(e-1)-i(-e-1))*(Math.E/2)}})},{"./_export":306,"./_fails":308,"./_math-expm1":333}],440:[function(e){var t=e("./_export"),n=e("./_math-expm1"),i=Math.exp;t(t.S,"Math",{tanh:function(e){var t=n(e=+e),r=n(-e);return 1/0==t?1:1/0==r?-1:(t-r)/(i(e)+i(-e))}})},{"./_export":306,"./_math-expm1":333}],441:[function(e){var t=e("./_export");t(t.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},{"./_export":306}],442:[function(e){"use strict";var t=e("./_global"),n=e("./_has"),i=e("./_cof"),r=e("./_inherit-if-required"),o=e("./_to-primitive"),s=e("./_fails"),a=e("./_object-gopn").f,l=e("./_object-gopd").f,c=e("./_object-dp").f,u=e("./_string-trim").trim,d="Number",h=t[d],f=h,p=h.prototype,m=i(e("./_object-create")(p))==d,g="trim"in String.prototype,v=function(e){var t=o(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():u(t,3);var n,i,r,s=t.charCodeAt(0);if(43===s||45===s){if(n=t.charCodeAt(2),88===n||120===n)return 0/0}else if(48===s){switch(t.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+t}for(var a,l=t.slice(2),c=0,d=l.length;d>c;c++)if(a=l.charCodeAt(c),48>a||a>r)return 0/0;return parseInt(l,i)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof h&&(m?s(function(){p.valueOf.call(n)}):i(n)!=d)?r(new f(v(t)),n,h):v(t)};for(var b,y=e("./_descriptors")?a(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;y.length>w;w++)n(f,b=y[w])&&!n(h,b)&&c(h,b,l(f,b));h.prototype=p,p.constructor=h,e("./_redefine")(t,d,h)
}},{"./_cof":292,"./_descriptors":302,"./_fails":308,"./_global":312,"./_has":313,"./_inherit-if-required":317,"./_object-create":340,"./_object-dp":341,"./_object-gopd":344,"./_object-gopn":346,"./_redefine":361,"./_string-trim":376,"./_to-primitive":384}],443:[function(e){var t=e("./_export");t(t.S,"Number",{EPSILON:Math.pow(2,-52)})},{"./_export":306}],444:[function(e){var t=e("./_export"),n=e("./_global").isFinite;t(t.S,"Number",{isFinite:function(e){return"number"==typeof e&&n(e)}})},{"./_export":306,"./_global":312}],445:[function(e){var t=e("./_export");t(t.S,"Number",{isInteger:e("./_is-integer")})},{"./_export":306,"./_is-integer":322}],446:[function(e){var t=e("./_export");t(t.S,"Number",{isNaN:function(e){return e!=e}})},{"./_export":306}],447:[function(e){var t=e("./_export"),n=e("./_is-integer"),i=Math.abs;t(t.S,"Number",{isSafeInteger:function(e){return n(e)&&i(e)<=9007199254740991}})},{"./_export":306,"./_is-integer":322}],448:[function(e){var t=e("./_export");t(t.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":306}],449:[function(e){var t=e("./_export");t(t.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{"./_export":306}],450:[function(e){var t=e("./_export"),n=e("./_parse-float");t(t.S+t.F*(Number.parseFloat!=n),"Number",{parseFloat:n})},{"./_export":306,"./_parse-float":355}],451:[function(e){var t=e("./_export"),n=e("./_parse-int");t(t.S+t.F*(Number.parseInt!=n),"Number",{parseInt:n})},{"./_export":306,"./_parse-int":356}],452:[function(e){"use strict";var t=e("./_export"),n=(e("./_an-instance"),e("./_to-integer")),i=e("./_a-number-value"),r=e("./_string-repeat"),o=1..toFixed,s=Math.floor,a=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",c="0",u=function(e,t){for(var n=-1,i=t;++n<6;)i+=e*a[n],a[n]=i%1e7,i=s(i/1e7)},d=function(e){for(var t=6,n=0;--t>=0;)n+=a[t],a[t]=s(n/e),n=n%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==a[e]){var n=String(a[e]);t=""===t?n:t+r.call(c,7-n.length)+n}return t},f=function(e,t,n){return 0===t?n:t%2===1?f(e,t-1,n*e):f(e*e,t/2,n)},p=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t};t(t.P+t.F*(!!o&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0))||!e("./_fails")(function(){o.call({})})),"Number",{toFixed:function(e){var t,o,s,a,m=i(this,l),g=n(e),v="",b=c;if(0>g||g>20)throw RangeError(l);if(m!=m)return"NaN";if(-1e21>=m||m>=1e21)return String(m);if(0>m&&(v="-",m=-m),m>1e-21)if(t=p(m*f(2,69,1))-69,o=0>t?m*f(2,-t,1):m/f(2,t,1),o*=4503599627370496,t=52-t,t>0){for(u(0,o),s=g;s>=7;)u(1e7,0),s-=7;for(u(f(10,s,1),0),s=t-1;s>=23;)d(1<<23),s-=23;d(1<<s),u(1,1),d(2),b=h()}else u(0,o),u(1<<-t,0),b=h()+r.call(c,g);return g>0?(a=b.length,b=v+(g>=a?"0."+r.call(c,g-a)+b:b.slice(0,a-g)+"."+b.slice(a-g))):b=v+b,b}})},{"./_a-number-value":278,"./_an-instance":280,"./_export":306,"./_fails":308,"./_string-repeat":375,"./_to-integer":380}],453:[function(e){"use strict";var t=e("./_export"),n=e("./_fails"),i=e("./_a-number-value"),r=1..toPrecision;t(t.P+t.F*(n(function(){return"1"!==r.call(1,void 0)})||!n(function(){r.call({})})),"Number",{toPrecision:function(e){var t=i(this,"Number#toPrecision: incorrect invocation!");return void 0===e?r.call(t):r.call(t,e)}})},{"./_a-number-value":278,"./_export":306,"./_fails":308}],454:[function(e){var t=e("./_export");t(t.S+t.F,"Object",{assign:e("./_object-assign")})},{"./_export":306,"./_object-assign":339}],455:[function(e){var t=e("./_export");t(t.S,"Object",{create:e("./_object-create")})},{"./_export":306,"./_object-create":340}],456:[function(e){var t=e("./_export");t(t.S+t.F*!e("./_descriptors"),"Object",{defineProperties:e("./_object-dps")})},{"./_descriptors":302,"./_export":306,"./_object-dps":342}],457:[function(e){var t=e("./_export");t(t.S+t.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":302,"./_export":306,"./_object-dp":341}],458:[function(e){var t=e("./_is-object"),n=e("./_meta").onFreeze;e("./_object-sap")("freeze",function(e){return function(i){return e&&t(i)?e(n(i)):i}})},{"./_is-object":323,"./_meta":336,"./_object-sap":352}],459:[function(e){var t=e("./_to-iobject"),n=e("./_object-gopd").f;e("./_object-sap")("getOwnPropertyDescriptor",function(){return function(e,i){return n(t(e),i)}})},{"./_object-gopd":344,"./_object-sap":352,"./_to-iobject":381}],460:[function(e){e("./_object-sap")("getOwnPropertyNames",function(){return e("./_object-gopn-ext").f})},{"./_object-gopn-ext":345,"./_object-sap":352}],461:[function(e){var t=e("./_to-object"),n=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return n(t(e))}})},{"./_object-gpo":348,"./_object-sap":352,"./_to-object":383}],462:[function(e){var t=e("./_is-object");e("./_object-sap")("isExtensible",function(e){return function(n){return t(n)?e?e(n):!0:!1}})},{"./_is-object":323,"./_object-sap":352}],463:[function(e){var t=e("./_is-object");e("./_object-sap")("isFrozen",function(e){return function(n){return t(n)?e?e(n):!1:!0}})},{"./_is-object":323,"./_object-sap":352}],464:[function(e){var t=e("./_is-object");e("./_object-sap")("isSealed",function(e){return function(n){return t(n)?e?e(n):!1:!0}})},{"./_is-object":323,"./_object-sap":352}],465:[function(e){var t=e("./_export");t(t.S,"Object",{is:e("./_same-value")})},{"./_export":306,"./_same-value":363}],466:[function(e){var t=e("./_to-object"),n=e("./_object-keys");e("./_object-sap")("keys",function(){return function(e){return n(t(e))}})},{"./_object-keys":350,"./_object-sap":352,"./_to-object":383}],467:[function(e){var t=e("./_is-object"),n=e("./_meta").onFreeze;e("./_object-sap")("preventExtensions",function(e){return function(i){return e&&t(i)?e(n(i)):i}})},{"./_is-object":323,"./_meta":336,"./_object-sap":352}],468:[function(e){var t=e("./_is-object"),n=e("./_meta").onFreeze;e("./_object-sap")("seal",function(e){return function(i){return e&&t(i)?e(n(i)):i}})},{"./_is-object":323,"./_meta":336,"./_object-sap":352}],469:[function(e){var t=e("./_export");t(t.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":306,"./_set-proto":364}],470:[function(e){"use strict";var t=e("./_classof"),n={};n[e("./_wks")("toStringTag")]="z",n+""!="[object z]"&&e("./_redefine")(Object.prototype,"toString",function(){return"[object "+t(this)+"]"},!0)},{"./_classof":291,"./_redefine":361,"./_wks":391}],471:[function(e){var t=e("./_export"),n=e("./_parse-float");t(t.G+t.F*(parseFloat!=n),{parseFloat:n})},{"./_export":306,"./_parse-float":355}],472:[function(e){var t=e("./_export"),n=e("./_parse-int");t(t.G+t.F*(parseInt!=n),{parseInt:n})},{"./_export":306,"./_parse-int":356}],473:[function(e){"use strict";var t,n,i,r=e("./_library"),o=e("./_global"),s=e("./_ctx"),a=e("./_classof"),l=e("./_export"),c=e("./_is-object"),u=(e("./_an-object"),e("./_a-function")),d=e("./_an-instance"),h=e("./_for-of"),f=(e("./_set-proto").set,e("./_species-constructor")),p=e("./_task").set,m=e("./_microtask")(),g="Promise",v=o.TypeError,b=o.process,y=o[g],b=o.process,w="process"==a(b),x=function(){},k=!!function(){try{var t=y.resolve(1),n=(t.constructor={})[e("./_wks")("species")]=function(e){e(x,x)};return(w||"function"==typeof PromiseRejectionEvent)&&t.then(x)instanceof n}catch(i){}}(),_=function(e,t){return e===t||e===y&&t===i},S=function(e){var t;return c(e)&&"function"==typeof(t=e.then)?t:!1},C=function(e){return _(y,e)?new E(e):new n(e)},E=n=function(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw v("Bad Promise constructor");t=e,n=i}),this.resolve=u(t),this.reject=u(n)},I=function(e){try{e()}catch(t){return{error:t}}},R=function(e,t){if(!e._n){e._n=!0;var n=e._c;m(function(){for(var i=e._v,r=1==e._s,o=0,s=function(t){var n,o,s=r?t.ok:t.fail,a=t.resolve,l=t.reject,c=t.domain;try{s?(r||(2==e._h&&M(e),e._h=1),s===!0?n=i:(c&&c.enter(),n=s(i),c&&c.exit()),n===t.promise?l(v("Promise-chain cycle")):(o=S(n))?o.call(n,a,l):a(n)):l(i)}catch(u){l(u)}};n.length>o;)s(n[o++]);e._c=[],e._n=!1,t&&!e._h&&T(e)})}},T=function(e){p.call(o,function(){var t,n,i,r=e._v;if(A(e)&&(t=I(function(){w?b.emit("unhandledRejection",r,e):(n=o.onunhandledrejection)?n({promise:e,reason:r}):(i=o.console)&&i.error&&i.error("Unhandled promise rejection",r)}),e._h=w||A(e)?2:1),e._a=void 0,t)throw t.error})},A=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,i=0;n.length>i;)if(t=n[i++],t.fail||!A(t.promise))return!1;return!0},M=function(e){p.call(o,function(){var t;w?b.emit("rejectionHandled",e):(t=o.onrejectionhandled)&&t({promise:e,reason:e._v})})},F=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),R(t,!0))},V=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw v("Promise can't be resolved itself");(t=S(e))?m(function(){var i={_w:n,_d:!1};try{t.call(e,s(V,i,1),s(F,i,1))}catch(r){F.call(i,r)}}):(n._v=e,n._s=1,R(n,!1))}catch(i){F.call({_w:n,_d:!1},i)}}};k||(y=function(e){d(this,y,g,"_h"),u(e),t.call(this);try{e(s(V,this,1),s(F,this,1))}catch(n){F.call(this,n)}},t=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},t.prototype=e("./_redefine-all")(y.prototype,{then:function(e,t){var n=C(f(this,y));return n.ok="function"==typeof e?e:!0,n.fail="function"==typeof t&&t,n.domain=w?b.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&R(this,!1),n.promise},"catch":function(e){return this.then(void 0,e)}}),E=function(){var e=new t;this.promise=e,this.resolve=s(V,e,1),this.reject=s(F,e,1)}),l(l.G+l.W+l.F*!k,{Promise:y}),e("./_set-to-string-tag")(y,g),e("./_set-species")(g),i=e("./_core")[g],l(l.S+l.F*!k,g,{reject:function(e){var t=C(this),n=t.reject;return n(e),t.promise}}),l(l.S+l.F*(r||!k),g,{resolve:function(e){if(e instanceof y&&_(e.constructor,this))return e;var t=C(this),n=t.resolve;return n(e),t.promise}}),l(l.S+l.F*!(k&&e("./_iter-detect")(function(e){y.all(e)["catch"](x)})),g,{all:function(e){var t=this,n=C(t),i=n.resolve,r=n.reject,o=I(function(){var n=[],o=0,s=1;h(e,!1,function(e){var a=o++,l=!1;n.push(void 0),s++,t.resolve(e).then(function(e){l||(l=!0,n[a]=e,--s||i(n))},r)}),--s||i(n)});return o&&r(o.error),n.promise},race:function(e){var t=this,n=C(t),i=n.reject,r=I(function(){h(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return r&&i(r.error),n.promise}})},{"./_a-function":277,"./_an-instance":280,"./_an-object":281,"./_classof":291,"./_core":297,"./_ctx":299,"./_export":306,"./_for-of":311,"./_global":312,"./_is-object":323,"./_iter-detect":328,"./_library":332,"./_microtask":338,"./_redefine-all":360,"./_set-proto":364,"./_set-species":365,"./_set-to-string-tag":366,"./_species-constructor":369,"./_task":378,"./_wks":391}],474:[function(e){var t=e("./_export"),n=e("./_a-function"),i=e("./_an-object"),r=Function.apply;t(t.S,"Reflect",{apply:function(e,t,o){return r.call(n(e),t,i(o))}})},{"./_a-function":277,"./_an-object":281,"./_export":306}],475:[function(e){var t=e("./_export"),n=e("./_object-create"),i=e("./_a-function"),r=e("./_an-object"),o=e("./_is-object"),s=e("./_bind");t(t.S+t.F*e("./_fails")(function(){function e(){}return!(Reflect.construct(function(){},[],e)instanceof e)}),"Reflect",{construct:function(e,t){i(e),r(t);var a=arguments.length<3?e:i(arguments[2]);if(e==a){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var l=[null];return l.push.apply(l,t),new(s.apply(e,l))}var c=a.prototype,u=n(o(c)?c:Object.prototype),d=Function.apply.call(e,u,t);return o(d)?d:u}})},{"./_a-function":277,"./_an-object":281,"./_bind":290,"./_export":306,"./_fails":308,"./_is-object":323,"./_object-create":340}],476:[function(e){var t=e("./_object-dp"),n=e("./_export"),i=e("./_an-object"),r=e("./_to-primitive");n(n.S+n.F*e("./_fails")(function(){Reflect.defineProperty(t.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,n,o){i(e),n=r(n,!0),i(o);try{return t.f(e,n,o),!0}catch(s){return!1}}})},{"./_an-object":281,"./_export":306,"./_fails":308,"./_object-dp":341,"./_to-primitive":384}],477:[function(e){var t=e("./_export"),n=e("./_object-gopd").f,i=e("./_an-object");t(t.S,"Reflect",{deleteProperty:function(e,t){var r=n(i(e),t);return r&&!r.configurable?!1:delete e[t]}})},{"./_an-object":281,"./_export":306,"./_object-gopd":344}],478:[function(e){"use strict";var t=e("./_export"),n=e("./_an-object"),i=function(e){this._t=n(e),this._i=0;var t,i=this._k=[];for(t in e)i.push(t)};e("./_iter-create")(i,"Object",function(){var e,t=this,n=t._k;do if(t._i>=n.length)return{value:void 0,done:!0};while(!((e=n[t._i++])in t._t));return{value:e,done:!1}}),t(t.S,"Reflect",{enumerate:function(e){return new i(e)}})},{"./_an-object":281,"./_export":306,"./_iter-create":326}],479:[function(e){var t=e("./_object-gopd"),n=e("./_export"),i=e("./_an-object");n(n.S,"Reflect",{getOwnPropertyDescriptor:function(e,n){return t.f(i(e),n)}})},{"./_an-object":281,"./_export":306,"./_object-gopd":344}],480:[function(e){var t=e("./_export"),n=e("./_object-gpo"),i=e("./_an-object");t(t.S,"Reflect",{getPrototypeOf:function(e){return n(i(e))}})},{"./_an-object":281,"./_export":306,"./_object-gpo":348}],481:[function(e){function t(e,o){var l,c,u=arguments.length<3?e:arguments[2];return a(e)===u?e[o]:(l=n.f(e,o))?r(l,"value")?l.value:void 0!==l.get?l.get.call(u):void 0:s(c=i(e))?t(c,o,u):void 0}var n=e("./_object-gopd"),i=e("./_object-gpo"),r=e("./_has"),o=e("./_export"),s=e("./_is-object"),a=e("./_an-object");o(o.S,"Reflect",{get:t})},{"./_an-object":281,"./_export":306,"./_has":313,"./_is-object":323,"./_object-gopd":344,"./_object-gpo":348}],482:[function(e){var t=e("./_export");t(t.S,"Reflect",{has:function(e,t){return t in e}})},{"./_export":306}],483:[function(e){var t=e("./_export"),n=e("./_an-object"),i=Object.isExtensible;t(t.S,"Reflect",{isExtensible:function(e){return n(e),i?i(e):!0}})},{"./_an-object":281,"./_export":306}],484:[function(e){var t=e("./_export");t(t.S,"Reflect",{ownKeys:e("./_own-keys")})},{"./_export":306,"./_own-keys":354}],485:[function(e){var t=e("./_export"),n=e("./_an-object"),i=Object.preventExtensions;t(t.S,"Reflect",{preventExtensions:function(e){n(e);try{return i&&i(e),!0}catch(t){return!1}}})},{"./_an-object":281,"./_export":306}],486:[function(e){var t=e("./_export"),n=e("./_set-proto");n&&t(t.S,"Reflect",{setPrototypeOf:function(e,t){n.check(e,t);try{return n.set(e,t),!0}catch(i){return!1}}})},{"./_export":306,"./_set-proto":364}],487:[function(e){function t(e,s,u){var d,h,f=arguments.length<4?e:arguments[3],p=i.f(l(e),s);if(!p){if(c(h=r(e)))return t(h,s,u,f);p=a(0)}return o(p,"value")?p.writable!==!1&&c(f)?(d=i.f(f,s)||a(0),d.value=u,n.f(f,s,d),!0):!1:void 0===p.set?!1:(p.set.call(f,u),!0)}var n=e("./_object-dp"),i=e("./_object-gopd"),r=e("./_object-gpo"),o=e("./_has"),s=e("./_export"),a=e("./_property-desc"),l=e("./_an-object"),c=e("./_is-object");s(s.S,"Reflect",{set:t})},{"./_an-object":281,"./_export":306,"./_has":313,"./_is-object":323,"./_object-dp":341,"./_object-gopd":344,"./_object-gpo":348,"./_property-desc":359}],488:[function(e){var t=e("./_global"),n=e("./_inherit-if-required"),i=e("./_object-dp").f,r=e("./_object-gopn").f,o=e("./_is-regexp"),s=e("./_flags"),a=t.RegExp,l=a,c=a.prototype,u=/a/g,d=/a/g,h=new a(u)!==u;if(e("./_descriptors")&&(!h||e("./_fails")(function(){return d[e("./_wks")("match")]=!1,a(u)!=u||a(d)==d||"/a/i"!=a(u,"i")}))){a=function(e,t){var i=this instanceof a,r=o(e),u=void 0===t;return!i&&r&&e.constructor===a&&u?e:n(h?new l(r&&!u?e.source:e,t):l((r=e instanceof a)?e.source:e,r&&u?s.call(e):t),i?this:c,a)};for(var f=(function(e){e in a||i(a,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})}),p=r(l),m=0;p.length>m;)f(p[m++]);c.constructor=a,a.prototype=c,e("./_redefine")(t,"RegExp",a)}e("./_set-species")("RegExp")},{"./_descriptors":302,"./_fails":308,"./_flags":310,"./_global":312,"./_inherit-if-required":317,"./_is-regexp":324,"./_object-dp":341,"./_object-gopn":346,"./_redefine":361,"./_set-species":365,"./_wks":391}],489:[function(e){e("./_descriptors")&&"g"!=/./g.flags&&e("./_object-dp").f(RegExp.prototype,"flags",{configurable:!0,get:e("./_flags")})},{"./_descriptors":302,"./_flags":310,"./_object-dp":341}],490:[function(e){e("./_fix-re-wks")("match",1,function(e,t,n){return[function(n){"use strict";var i=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},n]})},{"./_fix-re-wks":309}],491:[function(e){e("./_fix-re-wks")("replace",2,function(e,t,n){return[function(i,r){"use strict";var o=e(this),s=void 0==i?void 0:i[t];return void 0!==s?s.call(i,o,r):n.call(String(o),i,r)},n]})},{"./_fix-re-wks":309}],492:[function(e){e("./_fix-re-wks")("search",1,function(e,t,n){return[function(n){"use strict";var i=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},n]})},{"./_fix-re-wks":309}],493:[function(e){e("./_fix-re-wks")("split",2,function(t,n,i){"use strict";var r=e("./_is-regexp"),o=i,s=[].push,a="split",l="length",c="lastIndex";if("c"=="abbc"[a](/(b)*/)[1]||4!="test"[a](/(?:)/,-1)[l]||2!="ab"[a](/(?:ab)*/)[l]||4!="."[a](/(.?)(.?)/)[l]||"."[a](/()()/)[l]>1||""[a](/.?/)[l]){var u=void 0===/()??/.exec("")[1];i=function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!r(e))return o.call(n,e,t);var i,a,d,h,f,p=[],m=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,v=void 0===t?4294967295:t>>>0,b=new RegExp(e.source,m+"g");for(u||(i=new RegExp("^"+b.source+"$(?!\\s)",m));(a=b.exec(n))&&(d=a.index+a[0][l],!(d>g&&(p.push(n.slice(g,a.index)),!u&&a[l]>1&&a[0].replace(i,function(){for(f=1;f<arguments[l]-2;f++)void 0===arguments[f]&&(a[f]=void 0)}),a[l]>1&&a.index<n[l]&&s.apply(p,a.slice(1)),h=a[0][l],g=d,p[l]>=v)));)b[c]===a.index&&b[c]++;return g===n[l]?(h||!b.test(""))&&p.push(""):p.push(n.slice(g)),p[l]>v?p.slice(0,v):p}}else"0"[a](void 0,0)[l]&&(i=function(e,t){return void 0===e&&0===t?[]:o.call(this,e,t)});return[function(e,r){var o=t(this),s=void 0==e?void 0:e[n];return void 0!==s?s.call(e,o,r):i.call(String(o),e,r)},i]})},{"./_fix-re-wks":309,"./_is-regexp":324}],494:[function(e){"use strict";e("./es6.regexp.flags");var t=e("./_an-object"),n=e("./_flags"),i=e("./_descriptors"),r="toString",o=/./[r],s=function(t){e("./_redefine")(RegExp.prototype,r,t,!0)};e("./_fails")(function(){return"/a/b"!=o.call({source:"a",flags:"b"})})?s(function(){var e=t(this);return"/".concat(e.source,"/","flags"in e?e.flags:!i&&e instanceof RegExp?n.call(e):void 0)}):o.name!=r&&s(function(){return o.call(this)})},{"./_an-object":281,"./_descriptors":302,"./_fails":308,"./_flags":310,"./_redefine":361,"./es6.regexp.flags":489}],495:[function(e,t){"use strict";var n=e("./_collection-strong");t.exports=e("./_collection")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(this,e=0===e?0:e,e)}},n)},{"./_collection":296,"./_collection-strong":293}],496:[function(e){"use strict";e("./_string-html")("anchor",function(e){return function(t){return e(this,"a","name",t)}})},{"./_string-html":373}],497:[function(e){"use strict";e("./_string-html")("big",function(e){return function(){return e(this,"big","","")}})},{"./_string-html":373}],498:[function(e){"use strict";e("./_string-html")("blink",function(e){return function(){return e(this,"blink","","")}})},{"./_string-html":373}],499:[function(e){"use strict";e("./_string-html")("bold",function(e){return function(){return e(this,"b","","")}})},{"./_string-html":373}],500:[function(e){"use strict";var t=e("./_export"),n=e("./_string-at")(!1);t(t.P,"String",{codePointAt:function(e){return n(this,e)}})},{"./_export":306,"./_string-at":371}],501:[function(e){"use strict";var t=e("./_export"),n=e("./_to-length"),i=e("./_string-context"),r="endsWith",o=""[r];t(t.P+t.F*e("./_fails-is-regexp")(r),"String",{endsWith:function(e){var t=i(this,e,r),s=arguments.length>1?arguments[1]:void 0,a=n(t.length),l=void 0===s?a:Math.min(n(s),a),c=String(e);return o?o.call(t,c,l):t.slice(l-c.length,l)===c}})},{"./_export":306,"./_fails-is-regexp":307,"./_string-context":372,"./_to-length":382}],502:[function(e){"use strict";e("./_string-html")("fixed",function(e){return function(){return e(this,"tt","","")}})},{"./_string-html":373}],503:[function(e){"use strict";e("./_string-html")("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},{"./_string-html":373}],504:[function(e){"use strict";e("./_string-html")("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},{"./_string-html":373}],505:[function(e){var t=e("./_export"),n=e("./_to-index"),i=String.fromCharCode,r=String.fromCodePoint;t(t.S+t.F*(!!r&&1!=r.length),"String",{fromCodePoint:function(){for(var e,t=[],r=arguments.length,o=0;r>o;){if(e=+arguments[o++],n(e,1114111)!==e)throw RangeError(e+" is not a valid code point");t.push(65536>e?i(e):i(((e-=65536)>>10)+55296,e%1024+56320))}return t.join("")}})},{"./_export":306,"./_to-index":379}],506:[function(e){"use strict";var t=e("./_export"),n=e("./_string-context"),i="includes";t(t.P+t.F*e("./_fails-is-regexp")(i),"String",{includes:function(e){return!!~n(this,e,i).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},{"./_export":306,"./_fails-is-regexp":307,"./_string-context":372}],507:[function(e){"use strict";e("./_string-html")("italics",function(e){return function(){return e(this,"i","","")}})},{"./_string-html":373}],508:[function(e){"use strict";var t=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,n=this._t,i=this._i;return i>=n.length?{value:void 0,done:!0}:(e=t(n,i),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":327,"./_string-at":371}],509:[function(e){"use strict";e("./_string-html")("link",function(e){return function(t){return e(this,"a","href",t)}})},{"./_string-html":373}],510:[function(e){var t=e("./_export"),n=e("./_to-iobject"),i=e("./_to-length");t(t.S,"String",{raw:function(e){for(var t=n(e.raw),r=i(t.length),o=arguments.length,s=[],a=0;r>a;)s.push(String(t[a++])),o>a&&s.push(String(arguments[a]));return s.join("")}})},{"./_export":306,"./_to-iobject":381,"./_to-length":382}],511:[function(e){var t=e("./_export");t(t.P,"String",{repeat:e("./_string-repeat")})},{"./_export":306,"./_string-repeat":375}],512:[function(e){"use strict";e("./_string-html")("small",function(e){return function(){return e(this,"small","","")}})},{"./_string-html":373}],513:[function(e){"use strict";var t=e("./_export"),n=e("./_to-length"),i=e("./_string-context"),r="startsWith",o=""[r];t(t.P+t.F*e("./_fails-is-regexp")(r),"String",{startsWith:function(e){var t=i(this,e,r),s=n(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),a=String(e);return o?o.call(t,a,s):t.slice(s,s+a.length)===a}})},{"./_export":306,"./_fails-is-regexp":307,"./_string-context":372,"./_to-length":382}],514:[function(e){"use strict";e("./_string-html")("strike",function(e){return function(){return e(this,"strike","","")}})},{"./_string-html":373}],515:[function(e){"use strict";e("./_string-html")("sub",function(e){return function(){return e(this,"sub","","")}})},{"./_string-html":373}],516:[function(e){"use strict";e("./_string-html")("sup",function(e){return function(){return e(this,"sup","","")}})},{"./_string-html":373}],517:[function(e){"use strict";e("./_string-trim")("trim",function(e){return function(){return e(this,3)}})},{"./_string-trim":376}],518:[function(e){"use strict";var t=e("./_global"),n=e("./_has"),i=e("./_descriptors"),r=e("./_export"),o=e("./_redefine"),s=e("./_meta").KEY,a=e("./_fails"),l=e("./_shared"),c=e("./_set-to-string-tag"),u=e("./_uid"),d=e("./_wks"),h=e("./_wks-ext"),f=e("./_wks-define"),p=e("./_keyof"),m=e("./_enum-keys"),g=e("./_is-array"),v=e("./_an-object"),b=e("./_to-iobject"),y=e("./_to-primitive"),w=e("./_property-desc"),x=e("./_object-create"),k=e("./_object-gopn-ext"),_=e("./_object-gopd"),S=e("./_object-dp"),C=e("./_object-keys"),E=_.f,I=S.f,R=k.f,T=t.Symbol,A=t.JSON,M=A&&A.stringify,F="prototype",V=d("_hidden"),L=d("toPrimitive"),O={}.propertyIsEnumerable,N=l("symbol-registry"),$=l("symbols"),D=l("op-symbols"),P=Object[F],j="function"==typeof T,B=t.QObject,U=!B||!B[F]||!B[F].findChild,H=i&&a(function(){return 7!=x(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=E(P,t);i&&delete P[t],I(e,t,n),i&&e!==P&&I(P,t,i)}:I,z=function(e){var t=$[e]=x(T[F]);return t._k=e,t},q=j&&"symbol"==typeof T.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof T},W=function(e,t,i){return e===P&&W(D,t,i),v(e),t=y(t,!0),v(i),n($,t)?(i.enumerable?(n(e,V)&&e[V][t]&&(e[V][t]=!1),i=x(i,{enumerable:w(0,!1)})):(n(e,V)||I(e,V,w(1,{})),e[V][t]=!0),H(e,t,i)):I(e,t,i)},K=function(e,t){v(e);for(var n,i=m(t=b(t)),r=0,o=i.length;o>r;)W(e,n=i[r++],t[n]);return e},G=function(e,t){return void 0===t?x(e):K(x(e),t)},Y=function(e){var t=O.call(this,e=y(e,!0));return this===P&&n($,e)&&!n(D,e)?!1:t||!n(this,e)||!n($,e)||n(this,V)&&this[V][e]?t:!0},Q=function(e,t){if(e=b(e),t=y(t,!0),e!==P||!n($,t)||n(D,t)){var i=E(e,t);return!i||!n($,t)||n(e,V)&&e[V][t]||(i.enumerable=!0),i}},J=function(e){for(var t,i=R(b(e)),r=[],o=0;i.length>o;)n($,t=i[o++])||t==V||t==s||r.push(t);return r},X=function(e){for(var t,i=e===P,r=R(i?D:b(e)),o=[],s=0;r.length>s;)n($,t=r[s++])&&(i?n(P,t):!0)&&o.push($[t]);return o};j||(T=function(){if(this instanceof T)throw TypeError("Symbol is not a constructor!");var e=u(arguments.length>0?arguments[0]:void 0),t=function(i){this===P&&t.call(D,i),n(this,V)&&n(this[V],e)&&(this[V][e]=!1),H(this,e,w(1,i))};return i&&U&&H(P,e,{configurable:!0,set:t}),z(e)},o(T[F],"toString",function(){return this._k}),_.f=Q,S.f=W,e("./_object-gopn").f=k.f=J,e("./_object-pie").f=Y,e("./_object-gops").f=X,i&&!e("./_library")&&o(P,"propertyIsEnumerable",Y,!0),h.f=function(e){return z(d(e))}),r(r.G+r.W+r.F*!j,{Symbol:T});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;Z.length>et;)d(Z[et++]);for(var Z=C(d.store),et=0;Z.length>et;)f(Z[et++]);r(r.S+r.F*!j,"Symbol",{"for":function(e){return n(N,e+="")?N[e]:N[e]=T(e)},keyFor:function(e){if(q(e))return p(N,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){U=!0},useSimple:function(){U=!1}}),r(r.S+r.F*!j,"Object",{create:G,defineProperty:W,defineProperties:K,getOwnPropertyDescriptor:Q,getOwnPropertyNames:J,getOwnPropertySymbols:X}),A&&r(r.S+r.F*(!j||a(function(){var e=T();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!q(e)){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);return t=i[1],"function"==typeof t&&(n=t),(n||!g(t))&&(t=function(e,t){return n&&(t=n.call(this,e,t)),q(t)?void 0:t}),i[1]=t,M.apply(A,i)}}}),T[F][L]||e("./_hide")(T[F],L,T[F].valueOf),c(T,"Symbol"),c(Math,"Math",!0),c(t.JSON,"JSON",!0)},{"./_an-object":281,"./_descriptors":302,"./_enum-keys":305,"./_export":306,"./_fails":308,"./_global":312,"./_has":313,"./_hide":314,"./_is-array":321,"./_keyof":331,"./_library":332,"./_meta":336,"./_object-create":340,"./_object-dp":341,"./_object-gopd":344,"./_object-gopn":346,"./_object-gopn-ext":345,"./_object-gops":347,"./_object-keys":350,"./_object-pie":351,"./_property-desc":359,"./_redefine":361,"./_set-to-string-tag":366,"./_shared":368,"./_to-iobject":381,"./_to-primitive":384,"./_uid":388,"./_wks":391,"./_wks-define":389,"./_wks-ext":390}],519:[function(e){"use strict";var t=e("./_export"),n=e("./_typed"),i=e("./_typed-buffer"),r=e("./_an-object"),o=e("./_to-index"),s=e("./_to-length"),a=e("./_is-object"),l=(e("./_wks")("typed_array"),e("./_global").ArrayBuffer),c=e("./_species-constructor"),u=i.ArrayBuffer,d=i.DataView,h=n.ABV&&l.isView,f=u.prototype.slice,p=n.VIEW,m="ArrayBuffer";t(t.G+t.W+t.F*(l!==u),{ArrayBuffer:u}),t(t.S+t.F*!n.CONSTR,m,{isView:function(e){return h&&h(e)||a(e)&&p in e}}),t(t.P+t.U+t.F*e("./_fails")(function(){return!new u(2).slice(1,void 0).byteLength}),m,{slice:function(e,t){if(void 0!==f&&void 0===t)return f.call(r(this),e);for(var n=r(this).byteLength,i=o(e,n),a=o(void 0===t?n:t,n),l=new(c(this,u))(s(a-i)),h=new d(this),p=new d(l),m=0;a>i;)p.setUint8(m++,h.getUint8(i++));return l}}),e("./_set-species")(m)},{"./_an-object":281,"./_export":306,"./_fails":308,"./_global":312,"./_is-object":323,"./_set-species":365,"./_species-constructor":369,"./_to-index":379,"./_to-length":382,"./_typed":387,"./_typed-buffer":386,"./_wks":391}],520:[function(e){var t=e("./_export");t(t.G+t.W+t.F*!e("./_typed").ABV,{DataView:e("./_typed-buffer").DataView})},{"./_export":306,"./_typed":387,"./_typed-buffer":386}],521:[function(e){e("./_typed-array")("Float32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},{"./_typed-array":385}],522:[function(e){e("./_typed-array")("Float64",8,function(e){return function(t,n,i){return e(this,t,n,i)}})},{"./_typed-array":385}],523:[function(e){e("./_typed-array")("Int16",2,function(e){return function(t,n,i){return e(this,t,n,i)}})},{"./_typed-array":385}],524:[function(e){e("./_typed-array")("Int32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},{"./_typed-array":385}],525:[function(e){e("./_typed-array")("Int8",1,function(e){return function(t,n,i){return e(this,t,n,i)}})},{"./_typed-array":385}],526:[function(e){e("./_typed-array")("Uint16",2,function(e){return function(t,n,i){return e(this,t,n,i)}})},{"./_typed-array":385}],527:[function(e){e("./_typed-array")("Uint32",4,function(e){return function(t,n,i){return e(this,t,n,i)}})},{"./_typed-array":385}],528:[function(e){e("./_typed-array")("Uint8",1,function(e){return function(t,n,i){return e(this,t,n,i)}})},{"./_typed-array":385}],529:[function(e){e("./_typed-array")("Uint8",1,function(e){return function(t,n,i){return e(this,t,n,i)}},!0)},{"./_typed-array":385}],530:[function(e,t){"use strict";var n,i=e("./_array-methods")(0),r=e("./_redefine"),o=e("./_meta"),s=e("./_object-assign"),a=e("./_collection-weak"),l=e("./_is-object"),c=(e("./_has"),o.getWeak),u=Object.isExtensible,d=a.ufstore,h={},f=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},p={get:function(e){if(l(e)){var t=c(e);return t===!0?d(this).get(e):t?t[this._i]:void 0}},set:function(e,t){return a.def(this,e,t)}},m=t.exports=e("./_collection")("WeakMap",f,p,a,!0,!0);7!=(new m).set((Object.freeze||Object)(h),7).get(h)&&(n=a.getConstructor(f),s(n.prototype,p),o.NEED=!0,i(["delete","has","get","set"],function(e){var t=m.prototype,i=t[e];r(t,e,function(t,r){if(l(t)&&!u(t)){this._f||(this._f=new n);var o=this._f[e](t,r);return"set"==e?this:o}return i.call(this,t,r)})}))},{"./_array-methods":286,"./_collection":296,"./_collection-weak":295,"./_has":313,"./_is-object":323,"./_meta":336,"./_object-assign":339,"./_redefine":361}],531:[function(e){"use strict";var t=e("./_collection-weak");e("./_collection")("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return t.def(this,e,!0)}},t,!1,!0)},{"./_collection":296,"./_collection-weak":295}],532:[function(e){"use strict";var t=e("./_export"),n=e("./_array-includes")(!0);t(t.P,"Array",{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),e("./_add-to-unscopables")("includes")},{"./_add-to-unscopables":279,"./_array-includes":285,"./_export":306}],533:[function(e){var t=e("./_export"),n=e("./_microtask")(),i=e("./_global").process,r="process"==e("./_cof")(i);t(t.G,{asap:function(e){var t=r&&i.domain;n(t?t.bind(e):e)}})},{"./_cof":292,"./_export":306,"./_global":312,"./_microtask":338}],534:[function(e){var t=e("./_export"),n=e("./_cof");t(t.S,"Error",{isError:function(e){return"Error"===n(e)}})},{"./_cof":292,"./_export":306}],535:[function(e){var t=e("./_export");t(t.P+t.R,"Map",{toJSON:e("./_collection-to-json")("Map")})
},{"./_collection-to-json":294,"./_export":306}],536:[function(e){var t=e("./_export");t(t.S,"Math",{iaddh:function(e,t,n,i){var r=e>>>0,o=t>>>0,s=n>>>0;return o+(i>>>0)+((r&s|(r|s)&~(r+s>>>0))>>>31)|0}})},{"./_export":306}],537:[function(e){var t=e("./_export");t(t.S,"Math",{imulh:function(e,t){var n=65535,i=+e,r=+t,o=i&n,s=r&n,a=i>>16,l=r>>16,c=(a*s>>>0)+(o*s>>>16);return a*l+(c>>16)+((o*l>>>0)+(c&n)>>16)}})},{"./_export":306}],538:[function(e){var t=e("./_export");t(t.S,"Math",{isubh:function(e,t,n,i){var r=e>>>0,o=t>>>0,s=n>>>0;return o-(i>>>0)-((~r&s|~(r^s)&r-s>>>0)>>>31)|0}})},{"./_export":306}],539:[function(e){var t=e("./_export");t(t.S,"Math",{umulh:function(e,t){var n=65535,i=+e,r=+t,o=i&n,s=r&n,a=i>>>16,l=r>>>16,c=(a*s>>>0)+(o*s>>>16);return a*l+(c>>>16)+((o*l>>>0)+(c&n)>>>16)}})},{"./_export":306}],540:[function(e){"use strict";var t=e("./_export"),n=e("./_to-object"),i=e("./_a-function"),r=e("./_object-dp");e("./_descriptors")&&t(t.P+e("./_object-forced-pam"),"Object",{__defineGetter__:function(e,t){r.f(n(this),e,{get:i(t),enumerable:!0,configurable:!0})}})},{"./_a-function":277,"./_descriptors":302,"./_export":306,"./_object-dp":341,"./_object-forced-pam":343,"./_to-object":383}],541:[function(e){"use strict";var t=e("./_export"),n=e("./_to-object"),i=e("./_a-function"),r=e("./_object-dp");e("./_descriptors")&&t(t.P+e("./_object-forced-pam"),"Object",{__defineSetter__:function(e,t){r.f(n(this),e,{set:i(t),enumerable:!0,configurable:!0})}})},{"./_a-function":277,"./_descriptors":302,"./_export":306,"./_object-dp":341,"./_object-forced-pam":343,"./_to-object":383}],542:[function(e){var t=e("./_export"),n=e("./_object-to-array")(!0);t(t.S,"Object",{entries:function(e){return n(e)}})},{"./_export":306,"./_object-to-array":353}],543:[function(e){var t=e("./_export"),n=e("./_own-keys"),i=e("./_to-iobject"),r=e("./_object-gopd"),o=e("./_create-property");t(t.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,s=i(e),a=r.f,l=n(s),c={},u=0;l.length>u;)o(c,t=l[u++],a(s,t));return c}})},{"./_create-property":298,"./_export":306,"./_object-gopd":344,"./_own-keys":354,"./_to-iobject":381}],544:[function(e){"use strict";var t=e("./_export"),n=e("./_to-object"),i=e("./_to-primitive"),r=e("./_object-gpo"),o=e("./_object-gopd").f;e("./_descriptors")&&t(t.P+e("./_object-forced-pam"),"Object",{__lookupGetter__:function(e){var t,s=n(this),a=i(e,!0);do if(t=o(s,a))return t.get;while(s=r(s))}})},{"./_descriptors":302,"./_export":306,"./_object-forced-pam":343,"./_object-gopd":344,"./_object-gpo":348,"./_to-object":383,"./_to-primitive":384}],545:[function(e){"use strict";var t=e("./_export"),n=e("./_to-object"),i=e("./_to-primitive"),r=e("./_object-gpo"),o=e("./_object-gopd").f;e("./_descriptors")&&t(t.P+e("./_object-forced-pam"),"Object",{__lookupSetter__:function(e){var t,s=n(this),a=i(e,!0);do if(t=o(s,a))return t.set;while(s=r(s))}})},{"./_descriptors":302,"./_export":306,"./_object-forced-pam":343,"./_object-gopd":344,"./_object-gpo":348,"./_to-object":383,"./_to-primitive":384}],546:[function(e){var t=e("./_export"),n=e("./_object-to-array")(!1);t(t.S,"Object",{values:function(e){return n(e)}})},{"./_export":306,"./_object-to-array":353}],547:[function(e){"use strict";var t=e("./_export"),n=e("./_global"),i=e("./_core"),r=e("./_microtask")(),o=e("./_wks")("observable"),s=e("./_a-function"),a=e("./_an-object"),l=e("./_an-instance"),c=e("./_redefine-all"),u=e("./_hide"),d=e("./_for-of"),h=d.RETURN,f=function(e){return null==e?void 0:s(e)},p=function(e){var t=e._c;t&&(e._c=void 0,t())},m=function(e){return void 0===e._o},g=function(e){m(e)||(e._o=void 0,p(e))},v=function(e,t){a(e),this._c=void 0,this._o=e,e=new b(this);try{var n=t(e),i=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){i.unsubscribe()}:s(n),this._c=n)}catch(r){return void e.error(r)}m(this)&&p(this)};v.prototype=c({},{unsubscribe:function(){g(this)}});var b=function(e){this._s=e};b.prototype=c({},{next:function(e){var t=this._s;if(!m(t)){var n=t._o;try{var i=f(n.next);if(i)return i.call(n,e)}catch(r){try{g(t)}finally{throw r}}}},error:function(e){var t=this._s;if(m(t))throw e;var n=t._o;t._o=void 0;try{var i=f(n.error);if(!i)throw e;e=i.call(n,e)}catch(r){try{p(t)}finally{throw r}}return p(t),e},complete:function(e){var t=this._s;if(!m(t)){var n=t._o;t._o=void 0;try{var i=f(n.complete);e=i?i.call(n,e):void 0}catch(r){try{p(t)}finally{throw r}}return p(t),e}}});var y=function(e){l(this,y,"Observable","_f")._f=s(e)};c(y.prototype,{subscribe:function(e){return new v(e,this._f)},forEach:function(e){var t=this;return new(i.Promise||n.Promise)(function(n,i){s(e);var r=t.subscribe({next:function(t){try{return e(t)}catch(n){i(n),r.unsubscribe()}},error:i,complete:n})})}}),c(y,{from:function(e){var t="function"==typeof this?this:y,n=f(a(e)[o]);if(n){var i=a(n.call(e));return i.constructor===t?i:new t(function(e){return i.subscribe(e)})}return new t(function(t){var n=!1;return r(function(){if(!n){try{if(d(e,!1,function(e){return t.next(e),n?h:void 0})===h)return}catch(i){if(n)throw i;return void t.error(i)}t.complete()}}),function(){n=!0}})},of:function(){for(var e=0,t=arguments.length,n=Array(t);t>e;)n[e]=arguments[e++];return new("function"==typeof this?this:y)(function(e){var t=!1;return r(function(){if(!t){for(var i=0;i<n.length;++i)if(e.next(n[i]),t)return;e.complete()}}),function(){t=!0}})}}),u(y.prototype,o,function(){return this}),t(t.G,{Observable:y}),e("./_set-species")("Observable")},{"./_a-function":277,"./_an-instance":280,"./_an-object":281,"./_core":297,"./_export":306,"./_for-of":311,"./_global":312,"./_hide":314,"./_microtask":338,"./_redefine-all":360,"./_set-species":365,"./_wks":391}],548:[function(e){var t=e("./_metadata"),n=e("./_an-object"),i=t.key,r=t.set;t.exp({defineMetadata:function(e,t,o,s){r(e,t,n(o),i(s))}})},{"./_an-object":281,"./_metadata":337}],549:[function(e){var t=e("./_metadata"),n=e("./_an-object"),i=t.key,r=t.map,o=t.store;t.exp({deleteMetadata:function(e,t){var s=arguments.length<3?void 0:i(arguments[2]),a=r(n(t),s,!1);if(void 0===a||!a["delete"](e))return!1;if(a.size)return!0;var l=o.get(t);return l["delete"](s),!!l.size||o["delete"](t)}})},{"./_an-object":281,"./_metadata":337}],550:[function(e){var t=e("./es6.set"),n=e("./_array-from-iterable"),i=e("./_metadata"),r=e("./_an-object"),o=e("./_object-gpo"),s=i.keys,a=i.key,l=function(e,i){var r=s(e,i),a=o(e);if(null===a)return r;var c=l(a,i);return c.length?r.length?n(new t(r.concat(c))):c:r};i.exp({getMetadataKeys:function(e){return l(r(e),arguments.length<2?void 0:a(arguments[1]))}})},{"./_an-object":281,"./_array-from-iterable":284,"./_metadata":337,"./_object-gpo":348,"./es6.set":495}],551:[function(e){var t=e("./_metadata"),n=e("./_an-object"),i=e("./_object-gpo"),r=t.has,o=t.get,s=t.key,a=function(e,t,n){var s=r(e,t,n);if(s)return o(e,t,n);var l=i(t);return null!==l?a(e,l,n):void 0};t.exp({getMetadata:function(e,t){return a(e,n(t),arguments.length<3?void 0:s(arguments[2]))}})},{"./_an-object":281,"./_metadata":337,"./_object-gpo":348}],552:[function(e){var t=e("./_metadata"),n=e("./_an-object"),i=t.keys,r=t.key;t.exp({getOwnMetadataKeys:function(e){return i(n(e),arguments.length<2?void 0:r(arguments[1]))}})},{"./_an-object":281,"./_metadata":337}],553:[function(e){var t=e("./_metadata"),n=e("./_an-object"),i=t.get,r=t.key;t.exp({getOwnMetadata:function(e,t){return i(e,n(t),arguments.length<3?void 0:r(arguments[2]))}})},{"./_an-object":281,"./_metadata":337}],554:[function(e){var t=e("./_metadata"),n=e("./_an-object"),i=e("./_object-gpo"),r=t.has,o=t.key,s=function(e,t,n){var o=r(e,t,n);if(o)return!0;var a=i(t);return null!==a?s(e,a,n):!1};t.exp({hasMetadata:function(e,t){return s(e,n(t),arguments.length<3?void 0:o(arguments[2]))}})},{"./_an-object":281,"./_metadata":337,"./_object-gpo":348}],555:[function(e){var t=e("./_metadata"),n=e("./_an-object"),i=t.has,r=t.key;t.exp({hasOwnMetadata:function(e,t){return i(e,n(t),arguments.length<3?void 0:r(arguments[2]))}})},{"./_an-object":281,"./_metadata":337}],556:[function(e){var t=e("./_metadata"),n=e("./_an-object"),i=e("./_a-function"),r=t.key,o=t.set;t.exp({metadata:function(e,t){return function(s,a){o(e,t,(void 0!==a?n:i)(s),r(a))}}})},{"./_a-function":277,"./_an-object":281,"./_metadata":337}],557:[function(e){var t=e("./_export");t(t.P+t.R,"Set",{toJSON:e("./_collection-to-json")("Set")})},{"./_collection-to-json":294,"./_export":306}],558:[function(e){"use strict";var t=e("./_export"),n=e("./_string-at")(!0);t(t.P,"String",{at:function(e){return n(this,e)}})},{"./_export":306,"./_string-at":371}],559:[function(e){"use strict";var t=e("./_export"),n=e("./_defined"),i=e("./_to-length"),r=e("./_is-regexp"),o=e("./_flags"),s=RegExp.prototype,a=function(e,t){this._r=e,this._s=t};e("./_iter-create")(a,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),t(t.P,"String",{matchAll:function(e){if(n(this),!r(e))throw TypeError(e+" is not a regexp!");var t=String(this),l="flags"in s?String(e.flags):o.call(e),c=new RegExp(e.source,~l.indexOf("g")?l:"g"+l);return c.lastIndex=i(e.lastIndex),new a(c,t)}})},{"./_defined":301,"./_export":306,"./_flags":310,"./_is-regexp":324,"./_iter-create":326,"./_to-length":382}],560:[function(e){"use strict";var t=e("./_export"),n=e("./_string-pad");t(t.P,"String",{padEnd:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},{"./_export":306,"./_string-pad":374}],561:[function(e){"use strict";var t=e("./_export"),n=e("./_string-pad");t(t.P,"String",{padStart:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},{"./_export":306,"./_string-pad":374}],562:[function(e){"use strict";e("./_string-trim")("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},{"./_string-trim":376}],563:[function(e){"use strict";e("./_string-trim")("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},{"./_string-trim":376}],564:[function(e){e("./_wks-define")("asyncIterator")},{"./_wks-define":389}],565:[function(e){e("./_wks-define")("observable")},{"./_wks-define":389}],566:[function(e){var t=e("./_export");t(t.S,"System",{global:e("./_global")})},{"./_export":306,"./_global":312}],567:[function(e){for(var t=e("./es6.array.iterator"),n=e("./_redefine"),i=e("./_global"),r=e("./_hide"),o=e("./_iterators"),s=e("./_wks"),a=s("iterator"),l=s("toStringTag"),c=o.Array,u=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],d=0;5>d;d++){var h,f=u[d],p=i[f],m=p&&p.prototype;if(m){m[a]||r(m,a,c),m[l]||r(m,l,f),o[f]=c;for(h in t)m[h]||n(m,h,t[h],!0)}}},{"./_global":312,"./_hide":314,"./_iterators":330,"./_redefine":361,"./_wks":391,"./es6.array.iterator":405}],568:[function(e){var t=e("./_export"),n=e("./_task");t(t.G+t.B,{setImmediate:n.set,clearImmediate:n.clear})},{"./_export":306,"./_task":378}],569:[function(e){var t=e("./_global"),n=e("./_export"),i=e("./_invoke"),r=e("./_partial"),o=t.navigator,s=!!o&&/MSIE .\./.test(o.userAgent),a=function(e){return s?function(t,n){return e(i(r,[].slice.call(arguments,2),"function"==typeof t?t:Function(t)),n)}:e};n(n.G+n.B+n.F*s,{setTimeout:a(t.setTimeout),setInterval:a(t.setInterval)})},{"./_export":306,"./_global":312,"./_invoke":318,"./_partial":357}],570:[function(e,t){e("./modules/es6.symbol"),e("./modules/es6.object.create"),e("./modules/es6.object.define-property"),e("./modules/es6.object.define-properties"),e("./modules/es6.object.get-own-property-descriptor"),e("./modules/es6.object.get-prototype-of"),e("./modules/es6.object.keys"),e("./modules/es6.object.get-own-property-names"),e("./modules/es6.object.freeze"),e("./modules/es6.object.seal"),e("./modules/es6.object.prevent-extensions"),e("./modules/es6.object.is-frozen"),e("./modules/es6.object.is-sealed"),e("./modules/es6.object.is-extensible"),e("./modules/es6.object.assign"),e("./modules/es6.object.is"),e("./modules/es6.object.set-prototype-of"),e("./modules/es6.object.to-string"),e("./modules/es6.function.bind"),e("./modules/es6.function.name"),e("./modules/es6.function.has-instance"),e("./modules/es6.parse-int"),e("./modules/es6.parse-float"),e("./modules/es6.number.constructor"),e("./modules/es6.number.to-fixed"),e("./modules/es6.number.to-precision"),e("./modules/es6.number.epsilon"),e("./modules/es6.number.is-finite"),e("./modules/es6.number.is-integer"),e("./modules/es6.number.is-nan"),e("./modules/es6.number.is-safe-integer"),e("./modules/es6.number.max-safe-integer"),e("./modules/es6.number.min-safe-integer"),e("./modules/es6.number.parse-float"),e("./modules/es6.number.parse-int"),e("./modules/es6.math.acosh"),e("./modules/es6.math.asinh"),e("./modules/es6.math.atanh"),e("./modules/es6.math.cbrt"),e("./modules/es6.math.clz32"),e("./modules/es6.math.cosh"),e("./modules/es6.math.expm1"),e("./modules/es6.math.fround"),e("./modules/es6.math.hypot"),e("./modules/es6.math.imul"),e("./modules/es6.math.log10"),e("./modules/es6.math.log1p"),e("./modules/es6.math.log2"),e("./modules/es6.math.sign"),e("./modules/es6.math.sinh"),e("./modules/es6.math.tanh"),e("./modules/es6.math.trunc"),e("./modules/es6.string.from-code-point"),e("./modules/es6.string.raw"),e("./modules/es6.string.trim"),e("./modules/es6.string.iterator"),e("./modules/es6.string.code-point-at"),e("./modules/es6.string.ends-with"),e("./modules/es6.string.includes"),e("./modules/es6.string.repeat"),e("./modules/es6.string.starts-with"),e("./modules/es6.string.anchor"),e("./modules/es6.string.big"),e("./modules/es6.string.blink"),e("./modules/es6.string.bold"),e("./modules/es6.string.fixed"),e("./modules/es6.string.fontcolor"),e("./modules/es6.string.fontsize"),e("./modules/es6.string.italics"),e("./modules/es6.string.link"),e("./modules/es6.string.small"),e("./modules/es6.string.strike"),e("./modules/es6.string.sub"),e("./modules/es6.string.sup"),e("./modules/es6.date.now"),e("./modules/es6.date.to-json"),e("./modules/es6.date.to-iso-string"),e("./modules/es6.date.to-string"),e("./modules/es6.date.to-primitive"),e("./modules/es6.array.is-array"),e("./modules/es6.array.from"),e("./modules/es6.array.of"),e("./modules/es6.array.join"),e("./modules/es6.array.slice"),e("./modules/es6.array.sort"),e("./modules/es6.array.for-each"),e("./modules/es6.array.map"),e("./modules/es6.array.filter"),e("./modules/es6.array.some"),e("./modules/es6.array.every"),e("./modules/es6.array.reduce"),e("./modules/es6.array.reduce-right"),e("./modules/es6.array.index-of"),e("./modules/es6.array.last-index-of"),e("./modules/es6.array.copy-within"),e("./modules/es6.array.fill"),e("./modules/es6.array.find"),e("./modules/es6.array.find-index"),e("./modules/es6.array.species"),e("./modules/es6.array.iterator"),e("./modules/es6.regexp.constructor"),e("./modules/es6.regexp.to-string"),e("./modules/es6.regexp.flags"),e("./modules/es6.regexp.match"),e("./modules/es6.regexp.replace"),e("./modules/es6.regexp.search"),e("./modules/es6.regexp.split"),e("./modules/es6.promise"),e("./modules/es6.map"),e("./modules/es6.set"),e("./modules/es6.weak-map"),e("./modules/es6.weak-set"),e("./modules/es6.typed.array-buffer"),e("./modules/es6.typed.data-view"),e("./modules/es6.typed.int8-array"),e("./modules/es6.typed.uint8-array"),e("./modules/es6.typed.uint8-clamped-array"),e("./modules/es6.typed.int16-array"),e("./modules/es6.typed.uint16-array"),e("./modules/es6.typed.int32-array"),e("./modules/es6.typed.uint32-array"),e("./modules/es6.typed.float32-array"),e("./modules/es6.typed.float64-array"),e("./modules/es6.reflect.apply"),e("./modules/es6.reflect.construct"),e("./modules/es6.reflect.define-property"),e("./modules/es6.reflect.delete-property"),e("./modules/es6.reflect.enumerate"),e("./modules/es6.reflect.get"),e("./modules/es6.reflect.get-own-property-descriptor"),e("./modules/es6.reflect.get-prototype-of"),e("./modules/es6.reflect.has"),e("./modules/es6.reflect.is-extensible"),e("./modules/es6.reflect.own-keys"),e("./modules/es6.reflect.prevent-extensions"),e("./modules/es6.reflect.set"),e("./modules/es6.reflect.set-prototype-of"),e("./modules/es7.array.includes"),e("./modules/es7.string.at"),e("./modules/es7.string.pad-start"),e("./modules/es7.string.pad-end"),e("./modules/es7.string.trim-left"),e("./modules/es7.string.trim-right"),e("./modules/es7.string.match-all"),e("./modules/es7.symbol.async-iterator"),e("./modules/es7.symbol.observable"),e("./modules/es7.object.get-own-property-descriptors"),e("./modules/es7.object.values"),e("./modules/es7.object.entries"),e("./modules/es7.object.define-getter"),e("./modules/es7.object.define-setter"),e("./modules/es7.object.lookup-getter"),e("./modules/es7.object.lookup-setter"),e("./modules/es7.map.to-json"),e("./modules/es7.set.to-json"),e("./modules/es7.system.global"),e("./modules/es7.error.is-error"),e("./modules/es7.math.iaddh"),e("./modules/es7.math.isubh"),e("./modules/es7.math.imulh"),e("./modules/es7.math.umulh"),e("./modules/es7.reflect.define-metadata"),e("./modules/es7.reflect.delete-metadata"),e("./modules/es7.reflect.get-metadata"),e("./modules/es7.reflect.get-metadata-keys"),e("./modules/es7.reflect.get-own-metadata"),e("./modules/es7.reflect.get-own-metadata-keys"),e("./modules/es7.reflect.has-metadata"),e("./modules/es7.reflect.has-own-metadata"),e("./modules/es7.reflect.metadata"),e("./modules/es7.asap"),e("./modules/es7.observable"),e("./modules/web.timers"),e("./modules/web.immediate"),e("./modules/web.dom.iterable"),t.exports=e("./modules/_core")},{"./modules/_core":297,"./modules/es6.array.copy-within":395,"./modules/es6.array.every":396,"./modules/es6.array.fill":397,"./modules/es6.array.filter":398,"./modules/es6.array.find":400,"./modules/es6.array.find-index":399,"./modules/es6.array.for-each":401,"./modules/es6.array.from":402,"./modules/es6.array.index-of":403,"./modules/es6.array.is-array":404,"./modules/es6.array.iterator":405,"./modules/es6.array.join":406,"./modules/es6.array.last-index-of":407,"./modules/es6.array.map":408,"./modules/es6.array.of":409,"./modules/es6.array.reduce":411,"./modules/es6.array.reduce-right":410,"./modules/es6.array.slice":412,"./modules/es6.array.some":413,"./modules/es6.array.sort":414,"./modules/es6.array.species":415,"./modules/es6.date.now":416,"./modules/es6.date.to-iso-string":417,"./modules/es6.date.to-json":418,"./modules/es6.date.to-primitive":419,"./modules/es6.date.to-string":420,"./modules/es6.function.bind":421,"./modules/es6.function.has-instance":422,"./modules/es6.function.name":423,"./modules/es6.map":424,"./modules/es6.math.acosh":425,"./modules/es6.math.asinh":426,"./modules/es6.math.atanh":427,"./modules/es6.math.cbrt":428,"./modules/es6.math.clz32":429,"./modules/es6.math.cosh":430,"./modules/es6.math.expm1":431,"./modules/es6.math.fround":432,"./modules/es6.math.hypot":433,"./modules/es6.math.imul":434,"./modules/es6.math.log10":435,"./modules/es6.math.log1p":436,"./modules/es6.math.log2":437,"./modules/es6.math.sign":438,"./modules/es6.math.sinh":439,"./modules/es6.math.tanh":440,"./modules/es6.math.trunc":441,"./modules/es6.number.constructor":442,"./modules/es6.number.epsilon":443,"./modules/es6.number.is-finite":444,"./modules/es6.number.is-integer":445,"./modules/es6.number.is-nan":446,"./modules/es6.number.is-safe-integer":447,"./modules/es6.number.max-safe-integer":448,"./modules/es6.number.min-safe-integer":449,"./modules/es6.number.parse-float":450,"./modules/es6.number.parse-int":451,"./modules/es6.number.to-fixed":452,"./modules/es6.number.to-precision":453,"./modules/es6.object.assign":454,"./modules/es6.object.create":455,"./modules/es6.object.define-properties":456,"./modules/es6.object.define-property":457,"./modules/es6.object.freeze":458,"./modules/es6.object.get-own-property-descriptor":459,"./modules/es6.object.get-own-property-names":460,"./modules/es6.object.get-prototype-of":461,"./modules/es6.object.is":465,"./modules/es6.object.is-extensible":462,"./modules/es6.object.is-frozen":463,"./modules/es6.object.is-sealed":464,"./modules/es6.object.keys":466,"./modules/es6.object.prevent-extensions":467,"./modules/es6.object.seal":468,"./modules/es6.object.set-prototype-of":469,"./modules/es6.object.to-string":470,"./modules/es6.parse-float":471,"./modules/es6.parse-int":472,"./modules/es6.promise":473,"./modules/es6.reflect.apply":474,"./modules/es6.reflect.construct":475,"./modules/es6.reflect.define-property":476,"./modules/es6.reflect.delete-property":477,"./modules/es6.reflect.enumerate":478,"./modules/es6.reflect.get":481,"./modules/es6.reflect.get-own-property-descriptor":479,"./modules/es6.reflect.get-prototype-of":480,"./modules/es6.reflect.has":482,"./modules/es6.reflect.is-extensible":483,"./modules/es6.reflect.own-keys":484,"./modules/es6.reflect.prevent-extensions":485,"./modules/es6.reflect.set":487,"./modules/es6.reflect.set-prototype-of":486,"./modules/es6.regexp.constructor":488,"./modules/es6.regexp.flags":489,"./modules/es6.regexp.match":490,"./modules/es6.regexp.replace":491,"./modules/es6.regexp.search":492,"./modules/es6.regexp.split":493,"./modules/es6.regexp.to-string":494,"./modules/es6.set":495,"./modules/es6.string.anchor":496,"./modules/es6.string.big":497,"./modules/es6.string.blink":498,"./modules/es6.string.bold":499,"./modules/es6.string.code-point-at":500,"./modules/es6.string.ends-with":501,"./modules/es6.string.fixed":502,"./modules/es6.string.fontcolor":503,"./modules/es6.string.fontsize":504,"./modules/es6.string.from-code-point":505,"./modules/es6.string.includes":506,"./modules/es6.string.italics":507,"./modules/es6.string.iterator":508,"./modules/es6.string.link":509,"./modules/es6.string.raw":510,"./modules/es6.string.repeat":511,"./modules/es6.string.small":512,"./modules/es6.string.starts-with":513,"./modules/es6.string.strike":514,"./modules/es6.string.sub":515,"./modules/es6.string.sup":516,"./modules/es6.string.trim":517,"./modules/es6.symbol":518,"./modules/es6.typed.array-buffer":519,"./modules/es6.typed.data-view":520,"./modules/es6.typed.float32-array":521,"./modules/es6.typed.float64-array":522,"./modules/es6.typed.int16-array":523,"./modules/es6.typed.int32-array":524,"./modules/es6.typed.int8-array":525,"./modules/es6.typed.uint16-array":526,"./modules/es6.typed.uint32-array":527,"./modules/es6.typed.uint8-array":528,"./modules/es6.typed.uint8-clamped-array":529,"./modules/es6.weak-map":530,"./modules/es6.weak-set":531,"./modules/es7.array.includes":532,"./modules/es7.asap":533,"./modules/es7.error.is-error":534,"./modules/es7.map.to-json":535,"./modules/es7.math.iaddh":536,"./modules/es7.math.imulh":537,"./modules/es7.math.isubh":538,"./modules/es7.math.umulh":539,"./modules/es7.object.define-getter":540,"./modules/es7.object.define-setter":541,"./modules/es7.object.entries":542,"./modules/es7.object.get-own-property-descriptors":543,"./modules/es7.object.lookup-getter":544,"./modules/es7.object.lookup-setter":545,"./modules/es7.object.values":546,"./modules/es7.observable":547,"./modules/es7.reflect.define-metadata":548,"./modules/es7.reflect.delete-metadata":549,"./modules/es7.reflect.get-metadata":551,"./modules/es7.reflect.get-metadata-keys":550,"./modules/es7.reflect.get-own-metadata":553,"./modules/es7.reflect.get-own-metadata-keys":552,"./modules/es7.reflect.has-metadata":554,"./modules/es7.reflect.has-own-metadata":555,"./modules/es7.reflect.metadata":556,"./modules/es7.set.to-json":557,"./modules/es7.string.at":558,"./modules/es7.string.match-all":559,"./modules/es7.string.pad-end":560,"./modules/es7.string.pad-start":561,"./modules/es7.string.trim-left":562,"./modules/es7.string.trim-right":563,"./modules/es7.symbol.async-iterator":564,"./modules/es7.symbol.observable":565,"./modules/es7.system.global":566,"./modules/web.dom.iterable":567,"./modules/web.immediate":568,"./modules/web.timers":569}],571:[function(e,t,n){"use strict";function i(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;n>t;++t)l[t]=e[t],c[e.charCodeAt(t)]=t;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63}function r(e){var t,n,i,r,o,s,a=e.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[a-2]?2:"="===e[a-1]?1:0,s=new u(3*a/4-o),i=o>0?a-4:a;var l=0;for(t=0,n=0;i>t;t+=4,n+=3)r=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],s[l++]=r>>16&255,s[l++]=r>>8&255,s[l++]=255&r;return 2===o?(r=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,s[l++]=255&r):1===o&&(r=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,s[l++]=r>>8&255,s[l++]=255&r),s}function o(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function s(e,t,n){for(var i,r=[],s=t;n>s;s+=3)i=(e[s]<<16)+(e[s+1]<<8)+e[s+2],r.push(o(i));return r.join("")}function a(e){for(var t,n=e.length,i=n%3,r="",o=[],a=16383,c=0,u=n-i;u>c;c+=a)o.push(s(e,c,c+a>u?u:c+a));return 1===i?(t=e[n-1],r+=l[t>>2],r+=l[t<<4&63],r+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],r+=l[t>>10],r+=l[t>>4&63],r+=l[t<<2&63],r+="="),o.push(r),o.join("")}n.toByteArray=r,n.fromByteArray=a;var l=[],c=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array;i()},{}],572:[function(e,t){!function(t,n){"use strict";function i(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function o(e,t,n){return o.isBN(e)?e:(this.negative=0,this.words=null,this.length=0,this.red=null,void(null!==e&&(("le"===t||"be"===t)&&(n=t,t=10),this._init(e||0,t||10,n||"be"))))}function s(e,t,n){for(var i=0,r=Math.min(e.length,n),o=t;r>o;o++){var s=e.charCodeAt(o)-48;i<<=4,i|=s>=49&&54>=s?s-49+10:s>=17&&22>=s?s-17+10:15&s}return i}function a(e,t,n,i){for(var r=0,o=Math.min(e.length,n),s=t;o>s;s++){var a=e.charCodeAt(s)-48;r*=i,r+=a>=49?a-49+10:a>=17?a-17+10:a}return r}function l(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var i=n/26|0,r=n%26;t[n]=(e.words[i]&1<<r)>>>r}return t}function c(e,t,n){n.negative=t.negative^e.negative;var i=e.length+t.length|0;n.length=i,i=i-1|0;var r=0|e.words[0],o=0|t.words[0],s=r*o,a=67108863&s,l=s/67108864|0;n.words[0]=a;for(var c=1;i>c;c++){for(var u=l>>>26,d=67108863&l,h=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);h>=f;f++){var p=c-f|0;r=0|e.words[p],o=0|t.words[f],s=r*o+d,u+=s/67108864|0,d=67108863&s}n.words[c]=0|d,l=0|u}return 0!==l?n.words[c]=0|l:n.length--,n.strip()}function u(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var i=0,r=0,o=0;o<n.length-1;o++){var s=r;r=0;for(var a=67108863&i,l=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);l>=c;c++){var u=o-c,d=0|e.words[u],h=0|t.words[c],f=d*h,p=67108863&f;s=s+(f/67108864|0)|0,p=p+a|0,a=67108863&p,s=s+(p>>>26)|0,r+=s>>>26,s&=67108863}n.words[o]=a,i=s,s=r}return 0!==i?n.words[o]=i:n.length--,n.strip()}function d(e,t,n){var i=new h;return i.mulp(e,t,n)}function h(e,t){this.x=e,this.y=t}function f(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function p(){f.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function m(){f.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function g(){f.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){f.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function b(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function y(e){b.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}"object"==typeof t?t.exports=o:n.BN=o,o.BN=o,o.wordSize=26;var w;try{w=e("buffer").Buffer}catch(x){}o.isBN=function(e){return null!==e&&"object"==typeof e&&"BN"===e.constructor.name&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&36>=t),e=e.toString().replace(/\s+/g,"");var r=0;"-"===e[0]&&r++,16===t?this._parseHex(e,r):this._parseBase(e,t,r),"-"===e[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initNumber=function(e,t,n){0>e&&(this.negative=1,e=-e),67108864>e?(this.words=[67108863&e],this.length=1):4503599627370496>e?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(9007199254740992>e),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(i("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var o,s,a=0;if("be"===n)for(r=e.length-1,o=0;r>=0;r-=3)s=e[r]|e[r-1]<<8|e[r-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,a+=24,a>=26&&(a-=26,o++);else if("le"===n)for(r=0,o=0;r<e.length;r+=3)s=e[r]|e[r+1]<<8|e[r+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,a+=24,a>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,r,o=0;for(n=e.length-6,i=0;n>=t;n-=6)r=s(e,n,n+6),this.words[i]|=r<<o&67108863,this.words[i+1]|=r>>>26-o&4194303,o+=24,o>=26&&(o-=26,i++);n+6!==t&&(r=s(e,t,n+6),this.words[i]|=r<<o&67108863,this.words[i+1]|=r>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var i=0,r=1;67108863>=r;r*=t)i++;i--,r=r/t|0;for(var o=e.length-n,s=o%i,l=Math.min(o,o-s)+n,c=0,u=n;l>u;u+=i)c=a(e,u,u+i,t),this.imuln(r),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var d=1;for(c=a(e,u,e.length,t),u=0;s>u;u++)d*=t;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var k=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(e,t){e=e||10,t=0|t||1;var n;if(16===e||"hex"===e){n="";for(var r=0,o=0,s=0;s<this.length;s++){var a=this.words[s],l=(16777215&(a<<r|o)).toString(16);o=a>>>24-r&16777215,n=0!==o||s!==this.length-1?k[6-l.length]+l+n:l+n,r+=2,r>=26&&(r-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n
}if(e===(0|e)&&e>=2&&36>=e){var c=_[e],u=S[e];n="";var d=this.clone();for(d.negative=0;!d.isZero();){var h=d.modn(u).toString(e);d=d.idivn(u),n=d.isZero()?h+n:k[c-h.length]+h+n}for(this.isZero()&&(n="0"+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return i("undefined"!=typeof w),this.toArrayLike(w,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){var r=this.byteLength(),o=n||Math.max(1,r);i(o>=r,"byte array longer than desired length"),i(o>0,"Requested array length <= 0"),this.strip();var s,a,l="le"===t,c=new e(o),u=this.clone();if(l){for(a=0;!u.isZero();a++)s=u.andln(255),u.iushrn(8),c[a]=s;for(;o>a;a++)c[a]=0}else{for(a=0;o-r>a;a++)c[a]=0;for(a=0;!u.isZero();a++)s=u.andln(255),u.iushrn(8),c[o-a-1]=s}return c},o.prototype._countBits=Math.clz32?function(e){return 32-Math.clz32(e)}:function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0===(8191&t)&&(n+=13,t>>>=13),0===(127&t)&&(n+=7,t>>>=7),0===(15&t)&&(n+=4,t>>>=4),0===(3&t)&&(n+=2,t>>>=2),0===(1&t)&&n++,n},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return i(0===(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return i(0===(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var i=0;i<n.length;i++)this.words[i]=t.words[i]^n.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return i(0===(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){i("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var r=0;t>r;r++)this.words[r]=67108863&~this.words[r];return n>0&&(this.words[r]=~this.words[r]&67108863>>26-n),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){i("number"==typeof e&&e>=0);var n=e/26|0,r=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<r:this.words[n]&~(1<<r),this.strip()},o.prototype.iadd=function(e){var t;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();var n,i;this.length>e.length?(n=this,i=e):(n=e,i=this);for(var r=0,o=0;o<i.length;o++)t=(0|n.words[o])+(0|i.words[o])+r,this.words[o]=67108863&t,r=t>>>26;for(;0!==r&&o<n.length;o++)t=(0|n.words[o])+r,this.words[o]=67108863&t,r=t>>>26;if(this.length=n.length,0!==r)this.words[this.length]=r,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;var i,r;n>0?(i=this,r=e):(i=e,r=this);for(var o=0,s=0;s<r.length;s++)t=(0|i.words[s])-(0|r.words[s])+o,o=t>>26,this.words[s]=67108863&t;for(;0!==o&&s<i.length;s++)t=(0|i.words[s])+o,o=t>>26,this.words[s]=67108863&t;if(0===o&&s<i.length&&i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this.length=Math.max(this.length,s),i!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var C=function(e,t,n){var i,r,o,s=e.words,a=t.words,l=n.words,c=0,u=0|s[0],d=8191&u,h=u>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],v=8191&g,b=g>>>13,y=0|s[3],w=8191&y,x=y>>>13,k=0|s[4],_=8191&k,S=k>>>13,C=0|s[5],E=8191&C,I=C>>>13,R=0|s[6],T=8191&R,A=R>>>13,M=0|s[7],F=8191&M,V=M>>>13,L=0|s[8],O=8191&L,N=L>>>13,$=0|s[9],D=8191&$,P=$>>>13,j=0|a[0],B=8191&j,U=j>>>13,H=0|a[1],z=8191&H,q=H>>>13,W=0|a[2],K=8191&W,G=W>>>13,Y=0|a[3],Q=8191&Y,J=Y>>>13,X=0|a[4],Z=8191&X,et=X>>>13,tt=0|a[5],nt=8191&tt,it=tt>>>13,rt=0|a[6],ot=8191&rt,st=rt>>>13,at=0|a[7],lt=8191&at,ct=at>>>13,ut=0|a[8],dt=8191&ut,ht=ut>>>13,ft=0|a[9],pt=8191&ft,mt=ft>>>13;n.negative=e.negative^t.negative,n.length=19,i=Math.imul(d,B),r=Math.imul(d,U),r+=Math.imul(h,B),o=Math.imul(h,U);var gt=c+i+((8191&r)<<13);c=o+(r>>>13)+(gt>>>26),gt&=67108863,i=Math.imul(p,B),r=Math.imul(p,U),r+=Math.imul(m,B),o=Math.imul(m,U),i+=Math.imul(d,z),r+=Math.imul(d,q),r+=Math.imul(h,z),o+=Math.imul(h,q);var vt=c+i+((8191&r)<<13);c=o+(r>>>13)+(vt>>>26),vt&=67108863,i=Math.imul(v,B),r=Math.imul(v,U),r+=Math.imul(b,B),o=Math.imul(b,U),i+=Math.imul(p,z),r+=Math.imul(p,q),r+=Math.imul(m,z),o+=Math.imul(m,q),i+=Math.imul(d,K),r+=Math.imul(d,G),r+=Math.imul(h,K),o+=Math.imul(h,G);var bt=c+i+((8191&r)<<13);c=o+(r>>>13)+(bt>>>26),bt&=67108863,i=Math.imul(w,B),r=Math.imul(w,U),r+=Math.imul(x,B),o=Math.imul(x,U),i+=Math.imul(v,z),r+=Math.imul(v,q),r+=Math.imul(b,z),o+=Math.imul(b,q),i+=Math.imul(p,K),r+=Math.imul(p,G),r+=Math.imul(m,K),o+=Math.imul(m,G),i+=Math.imul(d,Q),r+=Math.imul(d,J),r+=Math.imul(h,Q),o+=Math.imul(h,J);var yt=c+i+((8191&r)<<13);c=o+(r>>>13)+(yt>>>26),yt&=67108863,i=Math.imul(_,B),r=Math.imul(_,U),r+=Math.imul(S,B),o=Math.imul(S,U),i+=Math.imul(w,z),r+=Math.imul(w,q),r+=Math.imul(x,z),o+=Math.imul(x,q),i+=Math.imul(v,K),r+=Math.imul(v,G),r+=Math.imul(b,K),o+=Math.imul(b,G),i+=Math.imul(p,Q),r+=Math.imul(p,J),r+=Math.imul(m,Q),o+=Math.imul(m,J),i+=Math.imul(d,Z),r+=Math.imul(d,et),r+=Math.imul(h,Z),o+=Math.imul(h,et);var wt=c+i+((8191&r)<<13);c=o+(r>>>13)+(wt>>>26),wt&=67108863,i=Math.imul(E,B),r=Math.imul(E,U),r+=Math.imul(I,B),o=Math.imul(I,U),i+=Math.imul(_,z),r+=Math.imul(_,q),r+=Math.imul(S,z),o+=Math.imul(S,q),i+=Math.imul(w,K),r+=Math.imul(w,G),r+=Math.imul(x,K),o+=Math.imul(x,G),i+=Math.imul(v,Q),r+=Math.imul(v,J),r+=Math.imul(b,Q),o+=Math.imul(b,J),i+=Math.imul(p,Z),r+=Math.imul(p,et),r+=Math.imul(m,Z),o+=Math.imul(m,et),i+=Math.imul(d,nt),r+=Math.imul(d,it),r+=Math.imul(h,nt),o+=Math.imul(h,it);var xt=c+i+((8191&r)<<13);c=o+(r>>>13)+(xt>>>26),xt&=67108863,i=Math.imul(T,B),r=Math.imul(T,U),r+=Math.imul(A,B),o=Math.imul(A,U),i+=Math.imul(E,z),r+=Math.imul(E,q),r+=Math.imul(I,z),o+=Math.imul(I,q),i+=Math.imul(_,K),r+=Math.imul(_,G),r+=Math.imul(S,K),o+=Math.imul(S,G),i+=Math.imul(w,Q),r+=Math.imul(w,J),r+=Math.imul(x,Q),o+=Math.imul(x,J),i+=Math.imul(v,Z),r+=Math.imul(v,et),r+=Math.imul(b,Z),o+=Math.imul(b,et),i+=Math.imul(p,nt),r+=Math.imul(p,it),r+=Math.imul(m,nt),o+=Math.imul(m,it),i+=Math.imul(d,ot),r+=Math.imul(d,st),r+=Math.imul(h,ot),o+=Math.imul(h,st);var kt=c+i+((8191&r)<<13);c=o+(r>>>13)+(kt>>>26),kt&=67108863,i=Math.imul(F,B),r=Math.imul(F,U),r+=Math.imul(V,B),o=Math.imul(V,U),i+=Math.imul(T,z),r+=Math.imul(T,q),r+=Math.imul(A,z),o+=Math.imul(A,q),i+=Math.imul(E,K),r+=Math.imul(E,G),r+=Math.imul(I,K),o+=Math.imul(I,G),i+=Math.imul(_,Q),r+=Math.imul(_,J),r+=Math.imul(S,Q),o+=Math.imul(S,J),i+=Math.imul(w,Z),r+=Math.imul(w,et),r+=Math.imul(x,Z),o+=Math.imul(x,et),i+=Math.imul(v,nt),r+=Math.imul(v,it),r+=Math.imul(b,nt),o+=Math.imul(b,it),i+=Math.imul(p,ot),r+=Math.imul(p,st),r+=Math.imul(m,ot),o+=Math.imul(m,st),i+=Math.imul(d,lt),r+=Math.imul(d,ct),r+=Math.imul(h,lt),o+=Math.imul(h,ct);var _t=c+i+((8191&r)<<13);c=o+(r>>>13)+(_t>>>26),_t&=67108863,i=Math.imul(O,B),r=Math.imul(O,U),r+=Math.imul(N,B),o=Math.imul(N,U),i+=Math.imul(F,z),r+=Math.imul(F,q),r+=Math.imul(V,z),o+=Math.imul(V,q),i+=Math.imul(T,K),r+=Math.imul(T,G),r+=Math.imul(A,K),o+=Math.imul(A,G),i+=Math.imul(E,Q),r+=Math.imul(E,J),r+=Math.imul(I,Q),o+=Math.imul(I,J),i+=Math.imul(_,Z),r+=Math.imul(_,et),r+=Math.imul(S,Z),o+=Math.imul(S,et),i+=Math.imul(w,nt),r+=Math.imul(w,it),r+=Math.imul(x,nt),o+=Math.imul(x,it),i+=Math.imul(v,ot),r+=Math.imul(v,st),r+=Math.imul(b,ot),o+=Math.imul(b,st),i+=Math.imul(p,lt),r+=Math.imul(p,ct),r+=Math.imul(m,lt),o+=Math.imul(m,ct),i+=Math.imul(d,dt),r+=Math.imul(d,ht),r+=Math.imul(h,dt),o+=Math.imul(h,ht);var St=c+i+((8191&r)<<13);c=o+(r>>>13)+(St>>>26),St&=67108863,i=Math.imul(D,B),r=Math.imul(D,U),r+=Math.imul(P,B),o=Math.imul(P,U),i+=Math.imul(O,z),r+=Math.imul(O,q),r+=Math.imul(N,z),o+=Math.imul(N,q),i+=Math.imul(F,K),r+=Math.imul(F,G),r+=Math.imul(V,K),o+=Math.imul(V,G),i+=Math.imul(T,Q),r+=Math.imul(T,J),r+=Math.imul(A,Q),o+=Math.imul(A,J),i+=Math.imul(E,Z),r+=Math.imul(E,et),r+=Math.imul(I,Z),o+=Math.imul(I,et),i+=Math.imul(_,nt),r+=Math.imul(_,it),r+=Math.imul(S,nt),o+=Math.imul(S,it),i+=Math.imul(w,ot),r+=Math.imul(w,st),r+=Math.imul(x,ot),o+=Math.imul(x,st),i+=Math.imul(v,lt),r+=Math.imul(v,ct),r+=Math.imul(b,lt),o+=Math.imul(b,ct),i+=Math.imul(p,dt),r+=Math.imul(p,ht),r+=Math.imul(m,dt),o+=Math.imul(m,ht),i+=Math.imul(d,pt),r+=Math.imul(d,mt),r+=Math.imul(h,pt),o+=Math.imul(h,mt);var Ct=c+i+((8191&r)<<13);c=o+(r>>>13)+(Ct>>>26),Ct&=67108863,i=Math.imul(D,z),r=Math.imul(D,q),r+=Math.imul(P,z),o=Math.imul(P,q),i+=Math.imul(O,K),r+=Math.imul(O,G),r+=Math.imul(N,K),o+=Math.imul(N,G),i+=Math.imul(F,Q),r+=Math.imul(F,J),r+=Math.imul(V,Q),o+=Math.imul(V,J),i+=Math.imul(T,Z),r+=Math.imul(T,et),r+=Math.imul(A,Z),o+=Math.imul(A,et),i+=Math.imul(E,nt),r+=Math.imul(E,it),r+=Math.imul(I,nt),o+=Math.imul(I,it),i+=Math.imul(_,ot),r+=Math.imul(_,st),r+=Math.imul(S,ot),o+=Math.imul(S,st),i+=Math.imul(w,lt),r+=Math.imul(w,ct),r+=Math.imul(x,lt),o+=Math.imul(x,ct),i+=Math.imul(v,dt),r+=Math.imul(v,ht),r+=Math.imul(b,dt),o+=Math.imul(b,ht),i+=Math.imul(p,pt),r+=Math.imul(p,mt),r+=Math.imul(m,pt),o+=Math.imul(m,mt);var Et=c+i+((8191&r)<<13);c=o+(r>>>13)+(Et>>>26),Et&=67108863,i=Math.imul(D,K),r=Math.imul(D,G),r+=Math.imul(P,K),o=Math.imul(P,G),i+=Math.imul(O,Q),r+=Math.imul(O,J),r+=Math.imul(N,Q),o+=Math.imul(N,J),i+=Math.imul(F,Z),r+=Math.imul(F,et),r+=Math.imul(V,Z),o+=Math.imul(V,et),i+=Math.imul(T,nt),r+=Math.imul(T,it),r+=Math.imul(A,nt),o+=Math.imul(A,it),i+=Math.imul(E,ot),r+=Math.imul(E,st),r+=Math.imul(I,ot),o+=Math.imul(I,st),i+=Math.imul(_,lt),r+=Math.imul(_,ct),r+=Math.imul(S,lt),o+=Math.imul(S,ct),i+=Math.imul(w,dt),r+=Math.imul(w,ht),r+=Math.imul(x,dt),o+=Math.imul(x,ht),i+=Math.imul(v,pt),r+=Math.imul(v,mt),r+=Math.imul(b,pt),o+=Math.imul(b,mt);var It=c+i+((8191&r)<<13);c=o+(r>>>13)+(It>>>26),It&=67108863,i=Math.imul(D,Q),r=Math.imul(D,J),r+=Math.imul(P,Q),o=Math.imul(P,J),i+=Math.imul(O,Z),r+=Math.imul(O,et),r+=Math.imul(N,Z),o+=Math.imul(N,et),i+=Math.imul(F,nt),r+=Math.imul(F,it),r+=Math.imul(V,nt),o+=Math.imul(V,it),i+=Math.imul(T,ot),r+=Math.imul(T,st),r+=Math.imul(A,ot),o+=Math.imul(A,st),i+=Math.imul(E,lt),r+=Math.imul(E,ct),r+=Math.imul(I,lt),o+=Math.imul(I,ct),i+=Math.imul(_,dt),r+=Math.imul(_,ht),r+=Math.imul(S,dt),o+=Math.imul(S,ht),i+=Math.imul(w,pt),r+=Math.imul(w,mt),r+=Math.imul(x,pt),o+=Math.imul(x,mt);var Rt=c+i+((8191&r)<<13);c=o+(r>>>13)+(Rt>>>26),Rt&=67108863,i=Math.imul(D,Z),r=Math.imul(D,et),r+=Math.imul(P,Z),o=Math.imul(P,et),i+=Math.imul(O,nt),r+=Math.imul(O,it),r+=Math.imul(N,nt),o+=Math.imul(N,it),i+=Math.imul(F,ot),r+=Math.imul(F,st),r+=Math.imul(V,ot),o+=Math.imul(V,st),i+=Math.imul(T,lt),r+=Math.imul(T,ct),r+=Math.imul(A,lt),o+=Math.imul(A,ct),i+=Math.imul(E,dt),r+=Math.imul(E,ht),r+=Math.imul(I,dt),o+=Math.imul(I,ht),i+=Math.imul(_,pt),r+=Math.imul(_,mt),r+=Math.imul(S,pt),o+=Math.imul(S,mt);var Tt=c+i+((8191&r)<<13);c=o+(r>>>13)+(Tt>>>26),Tt&=67108863,i=Math.imul(D,nt),r=Math.imul(D,it),r+=Math.imul(P,nt),o=Math.imul(P,it),i+=Math.imul(O,ot),r+=Math.imul(O,st),r+=Math.imul(N,ot),o+=Math.imul(N,st),i+=Math.imul(F,lt),r+=Math.imul(F,ct),r+=Math.imul(V,lt),o+=Math.imul(V,ct),i+=Math.imul(T,dt),r+=Math.imul(T,ht),r+=Math.imul(A,dt),o+=Math.imul(A,ht),i+=Math.imul(E,pt),r+=Math.imul(E,mt),r+=Math.imul(I,pt),o+=Math.imul(I,mt);var At=c+i+((8191&r)<<13);c=o+(r>>>13)+(At>>>26),At&=67108863,i=Math.imul(D,ot),r=Math.imul(D,st),r+=Math.imul(P,ot),o=Math.imul(P,st),i+=Math.imul(O,lt),r+=Math.imul(O,ct),r+=Math.imul(N,lt),o+=Math.imul(N,ct),i+=Math.imul(F,dt),r+=Math.imul(F,ht),r+=Math.imul(V,dt),o+=Math.imul(V,ht),i+=Math.imul(T,pt),r+=Math.imul(T,mt),r+=Math.imul(A,pt),o+=Math.imul(A,mt);var Mt=c+i+((8191&r)<<13);c=o+(r>>>13)+(Mt>>>26),Mt&=67108863,i=Math.imul(D,lt),r=Math.imul(D,ct),r+=Math.imul(P,lt),o=Math.imul(P,ct),i+=Math.imul(O,dt),r+=Math.imul(O,ht),r+=Math.imul(N,dt),o+=Math.imul(N,ht),i+=Math.imul(F,pt),r+=Math.imul(F,mt),r+=Math.imul(V,pt),o+=Math.imul(V,mt);var Ft=c+i+((8191&r)<<13);c=o+(r>>>13)+(Ft>>>26),Ft&=67108863,i=Math.imul(D,dt),r=Math.imul(D,ht),r+=Math.imul(P,dt),o=Math.imul(P,ht),i+=Math.imul(O,pt),r+=Math.imul(O,mt),r+=Math.imul(N,pt),o+=Math.imul(N,mt);var Vt=c+i+((8191&r)<<13);c=o+(r>>>13)+(Vt>>>26),Vt&=67108863,i=Math.imul(D,pt),r=Math.imul(D,mt),r+=Math.imul(P,pt),o=Math.imul(P,mt);var Lt=c+i+((8191&r)<<13);return c=o+(r>>>13)+(Lt>>>26),Lt&=67108863,l[0]=gt,l[1]=vt,l[2]=bt,l[3]=yt,l[4]=wt,l[5]=xt,l[6]=kt,l[7]=_t,l[8]=St,l[9]=Ct,l[10]=Et,l[11]=It,l[12]=Rt,l[13]=Tt,l[14]=At,l[15]=Mt,l[16]=Ft,l[17]=Vt,l[18]=Lt,0!==c&&(l[19]=c,n.length++),n};Math.imul||(C=c),o.prototype.mulTo=function(e,t){var n,i=this.length+e.length;return n=10===this.length&&10===e.length?C(this,e,t):63>i?c(this,e,t):1024>i?u(this,e,t):d(this,e,t)},h.prototype.makeRBT=function(e){for(var t=new Array(e),n=o.prototype._countBits(e)-1,i=0;e>i;i++)t[i]=this.revBin(i,n,e);return t},h.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var i=0,r=0;t>r;r++)i|=(1&e)<<t-r-1,e>>=1;return i},h.prototype.permute=function(e,t,n,i,r,o){for(var s=0;o>s;s++)i[s]=t[e[s]],r[s]=n[e[s]]},h.prototype.transform=function(e,t,n,i,r,o){this.permute(o,e,t,n,i,r);for(var s=1;r>s;s<<=1)for(var a=s<<1,l=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),u=0;r>u;u+=a)for(var d=l,h=c,f=0;s>f;f++){var p=n[u+f],m=i[u+f],g=n[u+f+s],v=i[u+f+s],b=d*g-h*v;v=d*v+h*g,g=b,n[u+f]=p+g,i[u+f]=m+v,n[u+f+s]=p-g,i[u+f+s]=m-v,f!==a&&(b=l*d-c*h,h=l*h+c*d,d=b)}},h.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),i=1&n,r=0;for(n=n/2|0;n;n>>>=1)r++;return 1<<r+1+i},h.prototype.conjugate=function(e,t,n){if(!(1>=n))for(var i=0;n/2>i;i++){var r=e[i];e[i]=e[n-i-1],e[n-i-1]=r,r=t[i],t[i]=-t[n-i-1],t[n-i-1]=-r}},h.prototype.normalize13b=function(e,t){for(var n=0,i=0;t/2>i;i++){var r=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+n;e[i]=67108863&r,n=67108864>r?0:r/67108864|0}return e},h.prototype.convert13b=function(e,t,n,r){for(var o=0,s=0;t>s;s++)o+=0|e[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*t;r>s;++s)n[s]=0;i(0===o),i(0===(-8192&o))},h.prototype.stub=function(e){for(var t=new Array(e),n=0;e>n;n++)t[n]=0;return t},h.prototype.mulp=function(e,t,n){var i=2*this.guessLen13b(e.length,t.length),r=this.makeRBT(i),o=this.stub(i),s=new Array(i),a=new Array(i),l=new Array(i),c=new Array(i),u=new Array(i),d=new Array(i),h=n.words;h.length=i,this.convert13b(e.words,e.length,s,i),this.convert13b(t.words,t.length,c,i),this.transform(s,o,a,l,i,r),this.transform(c,o,u,d,i,r);for(var f=0;i>f;f++){var p=a[f]*u[f]-l[f]*d[f];l[f]=a[f]*d[f]+l[f]*u[f],a[f]=p}return this.conjugate(a,l,i),this.transform(a,l,h,o,i,r),this.conjugate(h,o,i),this.normalize13b(h,i),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),d(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){i("number"==typeof e),i(67108864>e);for(var t=0,n=0;n<this.length;n++){var r=(0|this.words[n])*e,o=(67108863&r)+(67108863&t);t>>=26,t+=r/67108864|0,t+=o>>>26,this.words[n]=67108863&o}return 0!==t&&(this.words[n]=t,this.length++),this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=l(e);if(0===t.length)return new o(1);for(var n=this,i=0;i<t.length&&0===t[i];i++,n=n.sqr());if(++i<t.length)for(var r=n.sqr();i<t.length;i++,r=r.sqr())0!==t[i]&&(n=n.mul(r));return n},o.prototype.iushln=function(e){i("number"==typeof e&&e>=0);var t,n=e%26,r=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,l=(0|this.words[t])-a<<n;this.words[t]=l|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==r){for(t=this.length-1;t>=0;t--)this.words[t+r]=this.words[t];for(t=0;r>t;t++)this.words[t]=0;this.length+=r}return this.strip()},o.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){i("number"==typeof e&&e>=0);var r;r=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,l=n;if(r-=s,r=Math.max(0,r),l){for(var c=0;s>c;c++)l.words[c]=this.words[c];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=r);c--){var d=0|this.words[c];this.words[c]=u<<26-o|d>>>o,u=d&a}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,n){return i(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){i("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,r=1<<t;if(this.length<=n)return!1;var o=this.words[n];return!!(o&r)},o.prototype.imaskn=function(e){i("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var r=67108863^67108863>>>t<<t;this.words[this.length-1]&=r}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return i("number"==typeof e),i(67108864>e),0>e?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(i("number"==typeof e),i(67108864>e),0>e)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var r,o=e.length+n;this._expand(o);var s,a=0;for(r=0;r<e.length;r++){s=(0|this.words[r+n])+a;var l=(0|e.words[r])*t;s-=67108863&l,a=(s>>26)-(l/67108864|0),this.words[r+n]=67108863&s}for(;r<this.length-n;r++)s=(0|this.words[r+n])+a,a=s>>26,this.words[r+n]=67108863&s;if(0===a)return this.strip();for(i(-1===a),a=0,r=0;r<this.length;r++)s=-(0|this.words[r])+a,a=s>>26,this.words[r]=67108863&s;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var n=this.length-e.length,i=this.clone(),r=e,s=0|r.words[r.length-1],a=this._countBits(s);n=26-a,0!==n&&(r=r.ushln(n),i.iushln(n),s=0|r.words[r.length-1]);var l,c=i.length-r.length;if("mod"!==t){l=new o(null),l.length=c+1,l.words=new Array(l.length);for(var u=0;u<l.length;u++)l.words[u]=0}var d=i.clone()._ishlnsubmul(r,1,c);0===d.negative&&(i=d,l&&(l.words[c]=1));for(var h=c-1;h>=0;h--){var f=67108864*(0|i.words[r.length+h])+(0|i.words[r.length+h-1]);for(f=Math.min(f/s|0,67108863),i._ishlnsubmul(r,f,h);0!==i.negative;)f--,i.negative=0,i._ishlnsubmul(r,1,h),i.isZero()||(i.negative^=1);l&&(l.words[h]=f)}return l&&l.strip(),i.strip(),"div"!==t&&0!==n&&i.iushrn(n),{div:l||null,mod:i}},o.prototype.divmod=function(e,t,n){if(i(!e.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var r,s,a;return 0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(r=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:r,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(r=a.div.neg()),{div:r,mod:a.mod}):0!==(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t)},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),r=e.andln(1),o=n.cmp(i);return 0>o||1===r&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){i(67108863>=e);for(var t=(1<<26)%e,n=0,r=this.length-1;r>=0;r--)n=(t*n+(0|this.words[r]))%e;return n},o.prototype.idivn=function(e){i(67108863>=e);for(var t=0,n=this.length-1;n>=0;n--){var r=(0|this.words[n])+67108864*t;this.words[n]=r/e|0,t=r%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r=new o(1),s=new o(0),a=new o(0),l=new o(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var u=n.clone(),d=t.clone();!t.isZero();){for(var h=0,f=1;0===(t.words[0]&f)&&26>h;++h,f<<=1);if(h>0)for(t.iushrn(h);h-->0;)(r.isOdd()||s.isOdd())&&(r.iadd(u),s.isub(d)),r.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(n.words[0]&m)&&26>p;++p,m<<=1);if(p>0)for(n.iushrn(p);p-->0;)(a.isOdd()||l.isOdd())&&(a.iadd(u),l.isub(d)),a.iushrn(1),l.iushrn(1);t.cmp(n)>=0?(t.isub(n),r.isub(a),s.isub(l)):(n.isub(t),a.isub(r),l.isub(s))}return{a:a,b:l,gcd:n.iushln(c)}},o.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var r=new o(1),s=new o(0),a=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var l=0,c=1;0===(t.words[0]&c)&&26>l;++l,c<<=1);if(l>0)for(t.iushrn(l);l-->0;)r.isOdd()&&r.iadd(a),r.iushrn(1);for(var u=0,d=1;0===(n.words[0]&d)&&26>u;++u,d<<=1);if(u>0)for(n.iushrn(u);u-->0;)s.isOdd()&&s.iadd(a),s.iushrn(1);t.cmp(n)>=0?(t.isub(n),r.isub(s)):(n.isub(t),s.isub(r))}var h;return h=0===t.cmpn(1)?r:s,h.cmpn(0)<0&&h.iadd(e),h},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var i=0;t.isEven()&&n.isEven();i++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var r=t.cmp(n);if(0>r){var o=t;t=n,n=o}else if(0===r||0===n.cmpn(1))break;t.isub(n)}return n.iushln(i)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){i("number"==typeof e);var t=e%26,n=(e-t)/26,r=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=r,this;for(var o=r,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];a+=o,o=a>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t=0>e;if(0!==this.negative&&!t)return-1;if(0===this.negative&&t)return 1;this.strip();var n;if(this.length>1)n=1;else{t&&(e=-e),i(67108863>=e,"Number is too big");var r=0|this.words[0];n=r===e?0:e>r?-1:1}return 0!==this.negative?0|-n:n},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var i=0|this.words[n],r=0|e.words[n];if(i!==r){r>i?t=-1:i>r&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new b(e)},o.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var E={k256:null,p224:null,p192:null,p25519:null};f.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},f.prototype.ireduce=function(e){var t,n=e;do this.split(n,this.tmp),n=this.imulK(n),n=n.iadd(this.tmp),t=n.bitLength();while(t>this.n);var i=t<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):n.strip(),n},f.prototype.split=function(e,t){e.iushrn(this.n,0,t)},f.prototype.imulK=function(e){return e.imul(this.k)},r(p,f),p.prototype.split=function(e,t){for(var n=4194303,i=Math.min(e.length,9),r=0;i>r;r++)t.words[r]=e.words[r];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&n,r=10;r<e.length;r++){var s=0|e.words[r];e.words[r-10]=(s&n)<<4|o>>>22,o=s}o>>>=22,e.words[r-10]=o,e.length-=0===o&&e.length>10?10:9},p.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var i=0|e.words[n];t+=977*i,e.words[n]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(m,f),r(g,f),r(v,f),v.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var i=19*(0|e.words[n])+t,r=67108863&i;i>>>=26,e.words[n]=r,t=i}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function I(e){if(E[e])return E[e];var I;if("k256"===e)I=new p;else if("p224"===e)I=new m;else if("p192"===e)I=new g;else{if("p25519"!==e)throw new Error("Unknown prime "+e);I=new v}return E[e]=I,I},b.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},b.prototype._verify2=function(e,t){i(0===(e.negative|t.negative),"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},b.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},b.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},b.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},b.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},b.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)
},b.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},b.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},b.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},b.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},b.prototype.isqr=function(e){return this.imul(e,e.clone())},b.prototype.sqr=function(e){return this.mul(e,e)},b.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2===1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var r=this.m.subn(1),s=0;!r.isZero()&&0===r.andln(1);)s++,r.iushrn(1);i(!r.isZero());var a=new o(1).toRed(this),l=a.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new o(2*u*u).toRed(this);0!==this.pow(u,c).cmp(l);)u.redIAdd(l);for(var d=this.pow(u,r),h=this.pow(e,r.addn(1).iushrn(1)),f=this.pow(e,r),p=s;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();i(p>g);var v=this.pow(d,new o(1).iushln(p-g-1));h=h.redMul(v),d=v.redSqr(),f=f.redMul(d),p=g}return h},b.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},b.prototype.pow=function(e,t){if(t.isZero())return new o(1);if(0===t.cmpn(1))return e.clone();var n=4,i=new Array(1<<n);i[0]=new o(1).toRed(this),i[1]=e;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],e);var s=i[0],a=0,l=0,c=t.bitLength()%26;for(0===c&&(c=26),r=t.length-1;r>=0;r--){for(var u=t.words[r],d=c-1;d>=0;d--){var h=u>>d&1;s!==i[0]&&(s=this.sqr(s)),0!==h||0!==a?(a<<=1,a|=h,l++,(l===n||0===r&&0===d)&&(s=this.mul(s,i[a]),l=0,a=0)):l=0}c=26}return s},b.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},b.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new y(e)},r(y,b),y.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},y.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},y.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=n.isub(i).iushrn(this.shift),o=r;return r.cmp(this.m)>=0?o=r.isub(this.m):r.cmpn(0)<0&&(o=r.iadd(this.m)),o._forceRed(this)},y.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var n=e.mul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=n.isub(i).iushrn(this.shift),s=r;return r.cmp(this.m)>=0?s=r.isub(this.m):r.cmpn(0)<0&&(s=r.iadd(this.m)),s._forceRed(this)},y.prototype.invm=function(e){var t=this.imod(e._invmp(this.m).mul(this.r2));return t._forceRed(this)}}("undefined"==typeof t||t,this)},{}],573:[function(e,t){function n(e){this.rand=e}var i;if(t.exports=function(e){return i||(i=new n(null)),i.generate(e)},t.exports.Rand=n,n.prototype.generate=function(e){return this._rand(e)},"object"==typeof window)n.prototype._rand=window.crypto&&window.crypto.getRandomValues?function(e){var t=new Uint8Array(e);return window.crypto.getRandomValues(t),t}:window.msCrypto&&window.msCrypto.getRandomValues?function(e){var t=new Uint8Array(e);return window.msCrypto.getRandomValues(t),t}:function(){throw new Error("Not implemented yet")};else try{var r=e("crypto");n.prototype._rand=function(e){return r.randomBytes(e)}}catch(o){n.prototype._rand=function(e){for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t}}},{}],574:[function(){},{}],575:[function(e,t,n){(function(e){function t(e){var t,n;return t=e>a||0>e?(n=Math.abs(e)%a,0>e?a-n:n):e}function i(e){for(var t=0;t<e.length;e++)e[t]=0;return!1}function r(){this.SBOX=[],this.INV_SBOX=[],this.SUB_MIX=[[],[],[],[]],this.INV_SUB_MIX=[[],[],[],[]],this.init(),this.RCON=[0,1,2,4,8,16,32,64,128,27,54]}function o(e){for(var t=e.length/4,n=new Array(t),i=-1;++i<t;)n[i]=e.readUInt32BE(4*i);return n}function s(e){this._key=o(e),this._doReset()}var a=Math.pow(2,32);r.prototype.init=function(){var e,t,n,i,r,o,s,a,l,c;for(e=function(){var e,n;for(n=[],t=e=0;256>e;t=++e)n.push(128>t?t<<1:t<<1^283);return n}(),r=0,l=0,t=c=0;256>c;t=++c)n=l^l<<1^l<<2^l<<3^l<<4,n=n>>>8^255&n^99,this.SBOX[r]=n,this.INV_SBOX[n]=r,o=e[r],s=e[o],a=e[s],i=257*e[n]^16843008*n,this.SUB_MIX[0][r]=i<<24|i>>>8,this.SUB_MIX[1][r]=i<<16|i>>>16,this.SUB_MIX[2][r]=i<<8|i>>>24,this.SUB_MIX[3][r]=i,i=16843009*a^65537*s^257*o^16843008*r,this.INV_SUB_MIX[0][n]=i<<24|i>>>8,this.INV_SUB_MIX[1][n]=i<<16|i>>>16,this.INV_SUB_MIX[2][n]=i<<8|i>>>24,this.INV_SUB_MIX[3][n]=i,0===r?r=l=1:(r=o^e[e[e[a^o]]],l^=e[e[l]]);return!0};var l=new r;s.blockSize=16,s.prototype.blockSize=s.blockSize,s.keySize=32,s.prototype.keySize=s.keySize,s.prototype._doReset=function(){var e,t,n,i,r,o;for(n=this._key,t=n.length,this._nRounds=t+6,r=4*(this._nRounds+1),this._keySchedule=[],i=0;r>i;i++)this._keySchedule[i]=t>i?n[i]:(o=this._keySchedule[i-1],i%t===0?(o=o<<8|o>>>24,o=l.SBOX[o>>>24]<<24|l.SBOX[o>>>16&255]<<16|l.SBOX[o>>>8&255]<<8|l.SBOX[255&o],o^=l.RCON[i/t|0]<<24):t>6&&i%t===4?o=l.SBOX[o>>>24]<<24|l.SBOX[o>>>16&255]<<16|l.SBOX[o>>>8&255]<<8|l.SBOX[255&o]:void 0,this._keySchedule[i-t]^o);for(this._invKeySchedule=[],e=0;r>e;e++)i=r-e,o=this._keySchedule[i-(e%4?0:4)],this._invKeySchedule[e]=4>e||4>=i?o:l.INV_SUB_MIX[0][l.SBOX[o>>>24]]^l.INV_SUB_MIX[1][l.SBOX[o>>>16&255]]^l.INV_SUB_MIX[2][l.SBOX[o>>>8&255]]^l.INV_SUB_MIX[3][l.SBOX[255&o]];return!0},s.prototype.encryptBlock=function(t){t=o(new e(t));var n=this._doCryptBlock(t,this._keySchedule,l.SUB_MIX,l.SBOX),i=new e(16);return i.writeUInt32BE(n[0],0),i.writeUInt32BE(n[1],4),i.writeUInt32BE(n[2],8),i.writeUInt32BE(n[3],12),i},s.prototype.decryptBlock=function(t){t=o(new e(t));var n=[t[3],t[1]];t[1]=n[0],t[3]=n[1];var i=this._doCryptBlock(t,this._invKeySchedule,l.INV_SUB_MIX,l.INV_SBOX),r=new e(16);return r.writeUInt32BE(i[0],0),r.writeUInt32BE(i[3],4),r.writeUInt32BE(i[2],8),r.writeUInt32BE(i[1],12),r},s.prototype.scrub=function(){i(this._keySchedule),i(this._invKeySchedule),i(this._key)},s.prototype._doCryptBlock=function(e,n,i,r){var o,s,a,l,c,u,d,h,f;s=e[0]^n[0],a=e[1]^n[1],l=e[2]^n[2],c=e[3]^n[3],o=4;for(var p=1;p<this._nRounds;p++)u=i[0][s>>>24]^i[1][a>>>16&255]^i[2][l>>>8&255]^i[3][255&c]^n[o++],d=i[0][a>>>24]^i[1][l>>>16&255]^i[2][c>>>8&255]^i[3][255&s]^n[o++],h=i[0][l>>>24]^i[1][c>>>16&255]^i[2][s>>>8&255]^i[3][255&a]^n[o++],f=i[0][c>>>24]^i[1][s>>>16&255]^i[2][a>>>8&255]^i[3][255&l]^n[o++],s=u,a=d,l=h,c=f;return u=(r[s>>>24]<<24|r[a>>>16&255]<<16|r[l>>>8&255]<<8|r[255&c])^n[o++],d=(r[a>>>24]<<24|r[l>>>16&255]<<16|r[c>>>8&255]<<8|r[255&s])^n[o++],h=(r[l>>>24]<<24|r[c>>>16&255]<<16|r[s>>>8&255]<<8|r[255&a])^n[o++],f=(r[c>>>24]<<24|r[s>>>16&255]<<16|r[a>>>8&255]<<8|r[255&l])^n[o++],[t(u),t(d),t(h),t(f)]},n.AES=s}).call(this,e("buffer").Buffer)},{buffer:605}],576:[function(e,t){(function(n){function i(e,t,r,a){if(!(this instanceof i))return new i(e,t,r);s.call(this),this._finID=n.concat([r,new n([0,0,0,1])]),r=n.concat([r,new n([0,0,0,2])]),this._cipher=new o.AES(t),this._prev=new n(r.length),this._cache=new n(""),this._secCache=new n(""),this._decrypt=a,this._alen=0,this._len=0,r.copy(this._prev),this._mode=e;var c=new n(4);c.fill(0),this._ghash=new l(this._cipher.encryptBlock(c)),this._authTag=null,this._called=!1}function r(e,t){var n=0;e.length!==t.length&&n++;for(var i=Math.min(e.length,t.length),r=-1;++r<i;)n+=e[r]^t[r];return n}var o=e("./aes"),s=e("cipher-base"),a=e("inherits"),l=e("./ghash"),c=e("buffer-xor");a(i,s),t.exports=i,i.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;16>t&&(t=new n(t),t.fill(0),this._ghash.update(t))}this._called=!0;var i=this._mode.encrypt(this,e);return this._ghash.update(this._decrypt?e:i),this._len+=e.length,i},i.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=c(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt){if(r(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data")}else this._authTag=e;this._cipher.scrub()},i.prototype.getAuthTag=function(){if(!this._decrypt&&n.isBuffer(this._authTag))return this._authTag;throw new Error("Attempting to get auth tag in unsupported state")},i.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},i.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length}}).call(this,e("buffer").Buffer)},{"./aes":575,"./ghash":580,buffer:605,"buffer-xor":604,"cipher-base":607,inherits:589}],577:[function(e,t,n){function i(){return Object.keys(s)}var r=e("./encrypter");n.createCipher=n.Cipher=r.createCipher,n.createCipheriv=n.Cipheriv=r.createCipheriv;var o=e("./decrypter");n.createDecipher=n.Decipher=o.createDecipher,n.createDecipheriv=n.Decipheriv=o.createDecipheriv;var s=e("./modes");n.listCiphers=n.getCiphers=i},{"./decrypter":578,"./encrypter":579,"./modes":581}],578:[function(e,t,n){(function(t){function i(e,n,o){return this instanceof i?(c.call(this),this._cache=new r,this._last=void 0,this._cipher=new l.AES(n),this._prev=new t(o.length),o.copy(this._prev),this._mode=e,void(this._autopadding=!0)):new i(e,n,o)}function r(){return this instanceof r?void(this.cache=new t("")):new r}function o(e){for(var t=e[15],n=-1;++n<t;)if(e[n+(16-t)]!==t)throw new Error("unable to decrypt data");return 16!==t?e.slice(0,16-t):void 0}function s(e,n,r){var o=d[e.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if("string"==typeof r&&(r=new t(r)),"string"==typeof n&&(n=new t(n)),n.length!==o.key/8)throw new TypeError("invalid key length "+n.length);if(r.length!==o.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===o.type?new h(m[o.mode],n,r,!0):"auth"===o.type?new f(m[o.mode],n,r,!0):new i(m[o.mode],n,r)}function a(e,t){var n=d[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var i=p(t,!1,n.key,n.iv);return s(e,i.key,i.iv)}var l=e("./aes"),c=e("cipher-base"),u=e("inherits"),d=e("./modes"),h=e("./streamCipher"),f=e("./authCipher"),p=e("evp_bytestokey");u(i,c),i.prototype._update=function(e){this._cache.add(e);for(var n,i,r=[];n=this._cache.get(this._autopadding);)i=this._mode.decrypt(this,n),r.push(i);return t.concat(r)},i.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return o(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},i.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},r.prototype.add=function(e){this.cache=t.concat([this.cache,e])},r.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},r.prototype.flush=function(){return this.cache.length?this.cache:void 0};var m={ECB:e("./modes/ecb"),CBC:e("./modes/cbc"),CFB:e("./modes/cfb"),CFB8:e("./modes/cfb8"),CFB1:e("./modes/cfb1"),OFB:e("./modes/ofb"),CTR:e("./modes/ctr"),GCM:e("./modes/ctr")};n.createDecipher=a,n.createDecipheriv=s}).call(this,e("buffer").Buffer)},{"./aes":575,"./authCipher":576,"./modes":581,"./modes/cbc":582,"./modes/cfb":583,"./modes/cfb1":584,"./modes/cfb8":585,"./modes/ctr":586,"./modes/ecb":587,"./modes/ofb":588,"./streamCipher":590,buffer:605,"cipher-base":607,evp_bytestokey:661,inherits:589}],579:[function(e,t,n){(function(t){function i(e,n,o){return this instanceof i?(l.call(this),this._cache=new r,this._cipher=new a.AES(n),this._prev=new t(o.length),o.copy(this._prev),this._mode=e,void(this._autopadding=!0)):new i(e,n,o)}function r(){return this instanceof r?void(this.cache=new t("")):new r}function o(e,n,r){var o=u[e.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if("string"==typeof r&&(r=new t(r)),"string"==typeof n&&(n=new t(n)),n.length!==o.key/8)throw new TypeError("invalid key length "+n.length);if(r.length!==o.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===o.type?new h(p[o.mode],n,r):"auth"===o.type?new f(p[o.mode],n,r):new i(p[o.mode],n,r)}function s(e,t){var n=u[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var i=d(t,!1,n.key,n.iv);return o(e,i.key,i.iv)}var a=e("./aes"),l=e("cipher-base"),c=e("inherits"),u=e("./modes"),d=e("evp_bytestokey"),h=e("./streamCipher"),f=e("./authCipher");c(i,l),i.prototype._update=function(e){this._cache.add(e);for(var n,i,r=[];n=this._cache.get();)i=this._mode.encrypt(this,n),r.push(i);return t.concat(r)},i.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if("10101010101010101010101010101010"!==e.toString("hex"))throw this._cipher.scrub(),new Error("data not multiple of block length")},i.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},r.prototype.add=function(e){this.cache=t.concat([this.cache,e])},r.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},r.prototype.flush=function(){for(var e=16-this.cache.length,n=new t(e),i=-1;++i<e;)n.writeUInt8(e,i);var r=t.concat([this.cache,n]);return r};var p={ECB:e("./modes/ecb"),CBC:e("./modes/cbc"),CFB:e("./modes/cfb"),CFB8:e("./modes/cfb8"),CFB1:e("./modes/cfb1"),OFB:e("./modes/ofb"),CTR:e("./modes/ctr"),GCM:e("./modes/ctr")};n.createCipheriv=o,n.createCipher=s}).call(this,e("buffer").Buffer)},{"./aes":575,"./authCipher":576,"./modes":581,"./modes/cbc":582,"./modes/cfb":583,"./modes/cfb1":584,"./modes/cfb8":585,"./modes/ctr":586,"./modes/ecb":587,"./modes/ofb":588,"./streamCipher":590,buffer:605,"cipher-base":607,evp_bytestokey:661,inherits:589}],580:[function(e,t){(function(e){function n(t){this.h=t,this.state=new e(16),this.state.fill(0),this.cache=new e("")}function i(e){return[e.readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)]}function r(t){t=t.map(o);var n=new e(16);return n.writeUInt32BE(t[0],0),n.writeUInt32BE(t[1],4),n.writeUInt32BE(t[2],8),n.writeUInt32BE(t[3],12),n}function o(e){var t,n;return t=e>l||0>e?(n=Math.abs(e)%l,0>e?l-n:n):e}function s(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]}var a=new e(16);a.fill(0),t.exports=n,n.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},n.prototype._multiply=function(){for(var e,t,n,o=i(this.h),a=[0,0,0,0],l=-1;++l<128;){for(t=0!==(this.state[~~(l/8)]&1<<7-l%8),t&&(a=s(a,o)),n=0!==(1&o[3]),e=3;e>0;e--)o[e]=o[e]>>>1|(1&o[e-1])<<31;o[0]=o[0]>>>1,n&&(o[0]=o[0]^225<<24)}this.state=r(a)},n.prototype.update=function(t){this.cache=e.concat([this.cache,t]);for(var n;this.cache.length>=16;)n=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(n)},n.prototype.final=function(t,n){return this.cache.length&&this.ghash(e.concat([this.cache,a],16)),this.ghash(r([0,t,0,n])),this.state};var l=Math.pow(2,32)}).call(this,e("buffer").Buffer)},{buffer:605}],581:[function(e,t,n){n["aes-128-ecb"]={cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},n["aes-192-ecb"]={cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},n["aes-256-ecb"]={cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},n["aes-128-cbc"]={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},n["aes-192-cbc"]={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},n["aes-256-cbc"]={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},n.aes128=n["aes-128-cbc"],n.aes192=n["aes-192-cbc"],n.aes256=n["aes-256-cbc"],n["aes-128-cfb"]={cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},n["aes-192-cfb"]={cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},n["aes-256-cfb"]={cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},n["aes-128-cfb8"]={cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},n["aes-192-cfb8"]={cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},n["aes-256-cfb8"]={cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},n["aes-128-cfb1"]={cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},n["aes-192-cfb1"]={cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},n["aes-256-cfb1"]={cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},n["aes-128-ofb"]={cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},n["aes-192-ofb"]={cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},n["aes-256-ofb"]={cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},n["aes-128-ctr"]={cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},n["aes-192-ctr"]={cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},n["aes-256-ctr"]={cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},n["aes-128-gcm"]={cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},n["aes-192-gcm"]={cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},n["aes-256-gcm"]={cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},{}],582:[function(e,t,n){var i=e("buffer-xor");n.encrypt=function(e,t){var n=i(t,e._prev);return e._prev=e._cipher.encryptBlock(n),e._prev},n.decrypt=function(e,t){var n=e._prev;e._prev=t;var r=e._cipher.decryptBlock(t);return i(r,n)}},{"buffer-xor":604}],583:[function(e,t,n){(function(t){function i(e,n,i){var o=n.length,s=r(n,e._cache);return e._cache=e._cache.slice(o),e._prev=t.concat([e._prev,i?n:s]),s}var r=e("buffer-xor");n.encrypt=function(e,n,r){for(var o,s=new t("");n.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=new t("")),!(e._cache.length<=n.length)){s=t.concat([s,i(e,n,r)]);break}o=e._cache.length,s=t.concat([s,i(e,n.slice(0,o),r)]),n=n.slice(o)}return s}}).call(this,e("buffer").Buffer)},{buffer:605,"buffer-xor":604}],584:[function(e,t,n){(function(e){function t(e,t,n){for(var r,o,s,a=-1,l=8,c=0;++a<l;)r=e._cipher.encryptBlock(e._prev),o=t&1<<7-a?128:0,s=r[0]^o,c+=(128&s)>>a%8,e._prev=i(e._prev,n?o:s);return c}function i(t,n){var i=t.length,r=-1,o=new e(t.length);for(t=e.concat([t,new e([n])]);++r<i;)o[r]=t[r]<<1|t[r+1]>>7;return o}n.encrypt=function(n,i,r){for(var o=i.length,s=new e(o),a=-1;++a<o;)s[a]=t(n,i[a],r);return s}}).call(this,e("buffer").Buffer)},{buffer:605}],585:[function(e,t,n){(function(e){function t(t,n,i){var r=t._cipher.encryptBlock(t._prev),o=r[0]^n;return t._prev=e.concat([t._prev.slice(1),new e([i?n:o])]),o}n.encrypt=function(n,i,r){for(var o=i.length,s=new e(o),a=-1;++a<o;)s[a]=t(n,i[a],r);return s}}).call(this,e("buffer").Buffer)},{buffer:605}],586:[function(e,t,n){(function(t){function i(e){for(var t,n=e.length;n--;){if(t=e.readUInt8(n),255!==t){t++,e.writeUInt8(t,n);break}e.writeUInt8(0,n)}}function r(e){var t=e._cipher.encryptBlock(e._prev);return i(e._prev),t}var o=e("buffer-xor");n.encrypt=function(e,n){for(;e._cache.length<n.length;)e._cache=t.concat([e._cache,r(e)]);var i=e._cache.slice(0,n.length);return e._cache=e._cache.slice(n.length),o(n,i)}}).call(this,e("buffer").Buffer)},{buffer:605,"buffer-xor":604}],587:[function(e,t,n){n.encrypt=function(e,t){return e._cipher.encryptBlock(t)},n.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},{}],588:[function(e,t,n){(function(t){function i(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}var r=e("buffer-xor");n.encrypt=function(e,n){for(;e._cache.length<n.length;)e._cache=t.concat([e._cache,i(e)]);var o=e._cache.slice(0,n.length);return e._cache=e._cache.slice(n.length),r(n,o)}}).call(this,e("buffer").Buffer)},{buffer:605,"buffer-xor":604}],589:[function(e,t,n){arguments[4][274][0].apply(n,arguments)},{dup:274}],590:[function(e,t){(function(n){function i(e,t,s,a){return this instanceof i?(o.call(this),this._cipher=new r.AES(t),this._prev=new n(s.length),this._cache=new n(""),this._secCache=new n(""),this._decrypt=a,s.copy(this._prev),void(this._mode=e)):new i(e,t,s)}var r=e("./aes"),o=e("cipher-base"),s=e("inherits");s(i,o),t.exports=i,i.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},i.prototype._final=function(){this._cipher.scrub()}}).call(this,e("buffer").Buffer)},{"./aes":575,buffer:605,"cipher-base":607,inherits:589}],591:[function(e,t,n){function i(e,t){var n,i;if(e=e.toLowerCase(),h[e])n=h[e].key,i=h[e].iv;else{if(!d[e])throw new TypeError("invalid suite type");n=8*d[e].key,i=d[e].iv}var r=l(t,!1,n,i);return o(e,r.key,r.iv)}function r(e,t){var n,i;if(e=e.toLowerCase(),h[e])n=h[e].key,i=h[e].iv;else{if(!d[e])throw new TypeError("invalid suite type");n=8*d[e].key,i=d[e].iv}var r=l(t,!1,n,i);return s(e,r.key,r.iv)}function o(e,t,n){if(e=e.toLowerCase(),h[e])return c.createCipheriv(e,t,n);if(d[e])return new u({key:t,iv:n,mode:e});throw new TypeError("invalid suite type")}function s(e,t,n){if(e=e.toLowerCase(),h[e])return c.createDecipheriv(e,t,n);if(d[e])return new u({key:t,iv:n,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}function a(){return Object.keys(d).concat(c.getCiphers())}var l=e("evp_bytestokey"),c=e("browserify-aes/browser"),u=e("browserify-des"),d=e("browserify-des/modes"),h=e("browserify-aes/modes");n.createCipher=n.Cipher=i,n.createCipheriv=n.Cipheriv=o,n.createDecipher=n.Decipher=r,n.createDecipheriv=n.Decipheriv=s,n.listCiphers=n.getCiphers=a},{"browserify-aes/browser":577,"browserify-aes/modes":581,"browserify-des":592,"browserify-des/modes":593,evp_bytestokey:661}],592:[function(e,t){(function(n){function i(e){r.call(this);var t,i=e.mode.toLowerCase(),o=a[i];t=e.decrypt?"decrypt":"encrypt";var s=e.key;("des-ede"===i||"des-ede-cbc"===i)&&(s=n.concat([s,s.slice(0,8)]));var l=e.iv;this._des=o.create({key:s,iv:l,type:t})}var r=e("cipher-base"),o=e("des.js"),s=e("inherits"),a={"des-ede3-cbc":o.CBC.instantiate(o.EDE),"des-ede3":o.EDE,"des-ede-cbc":o.CBC.instantiate(o.EDE),"des-ede":o.EDE,"des-cbc":o.CBC.instantiate(o.DES),"des-ecb":o.DES};a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],t.exports=i,s(i,r),i.prototype._update=function(e){return new n(this._des.update(e))},i.prototype._final=function(){return new n(this._des.final())}}).call(this,e("buffer").Buffer)},{buffer:605,"cipher-base":607,"des.js":627,inherits:594}],593:[function(e,t,n){n["des-ecb"]={key:8,iv:0},n["des-cbc"]=n.des={key:8,iv:8},n["des-ede3-cbc"]=n.des3={key:24,iv:8},n["des-ede3"]={key:24,iv:0},n["des-ede-cbc"]={key:16,iv:8},n["des-ede"]={key:16,iv:0}},{}],594:[function(e,t,n){arguments[4][274][0].apply(n,arguments)},{dup:274}],595:[function(e,t){(function(n){function i(e){var t=o(e),n=t.toRed(s.mont(e.modulus)).redPow(new s(e.publicExponent)).fromRed();return{blinder:n,unblinder:t.invm(e.modulus)}}function r(e,t){var r=i(t),o=t.modulus.byteLength(),a=(s.mont(t.modulus),new s(e).mul(r.blinder).umod(t.modulus)),l=a.toRed(s.mont(t.prime1)),c=a.toRed(s.mont(t.prime2)),u=t.coefficient,d=t.prime1,h=t.prime2,f=l.redPow(t.exponent1),p=c.redPow(t.exponent2);f=f.fromRed(),p=p.fromRed();var m=f.isub(p).imul(u).umod(d);return m.imul(h),p.iadd(m),new n(p.imul(r.unblinder).umod(t.modulus).toArray(!1,o))}function o(e){for(var t=e.modulus.byteLength(),n=new s(a(t));n.cmp(e.modulus)>=0||!n.umod(e.prime1)||!n.umod(e.prime2);)n=new s(a(t));return n}var s=e("bn.js"),a=e("randombytes");t.exports=r,r.getr=o}).call(this,e("buffer").Buffer)},{"bn.js":572,buffer:605,randombytes:717}],596:[function(e,t,n){(function(e){"use strict";n["RSA-SHA224"]=n.sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:new e("302d300d06096086480165030402040500041c","hex")},n["RSA-SHA256"]=n.sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:new e("3031300d060960864801650304020105000420","hex")},n["RSA-SHA384"]=n.sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:new e("3041300d060960864801650304020205000430","hex")},n["RSA-SHA512"]=n.sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:new e("3051300d060960864801650304020305000440","hex")},n["RSA-SHA1"]={sign:"rsa",hash:"sha1",id:new e("3021300906052b0e03021a05000414","hex")},n["ecdsa-with-SHA1"]={sign:"ecdsa",hash:"sha1",id:new e("","hex")},n.DSA=n["DSA-SHA1"]=n["DSA-SHA"]={sign:"dsa",hash:"sha1",id:new e("","hex")},n["DSA-SHA224"]=n["DSA-WITH-SHA224"]={sign:"dsa",hash:"sha224",id:new e("","hex")},n["DSA-SHA256"]=n["DSA-WITH-SHA256"]={sign:"dsa",hash:"sha256",id:new e("","hex")},n["DSA-SHA384"]=n["DSA-WITH-SHA384"]={sign:"dsa",hash:"sha384",id:new e("","hex")},n["DSA-SHA512"]=n["DSA-WITH-SHA512"]={sign:"dsa",hash:"sha512",id:new e("","hex")},n["DSA-RIPEMD160"]={sign:"dsa",hash:"rmd160",id:new e("","hex")},n["RSA-RIPEMD160"]=n.ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:new e("3021300906052b2403020105000414","hex")},n["RSA-MD5"]=n.md5WithRSAEncryption={sign:"rsa",hash:"md5",id:new e("3020300c06082a864886f70d020505000410","hex")}}).call(this,e("buffer").Buffer)},{buffer:605}],597:[function(e,t){(function(n){function i(e){d.Writable.call(this);var t=f[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=l(t.hash),this._tag=t.id,this._signType=t.sign}function r(e){d.Writable.call(this);var t=f[e];if(!t)throw new Error("Unknown message digest");this._hash=l(t.hash),this._tag=t.id,this._signType=t.sign}function o(e){return new i(e)}function s(e){return new r(e)}var a=e("./algos"),l=e("create-hash"),c=e("inherits"),u=e("./sign"),d=e("stream"),h=e("./verify"),f={};Object.keys(a).forEach(function(e){f[e]=f[e.toLowerCase()]=a[e]}),c(i,d.Writable),i.prototype._write=function(e,t,n){this._hash.update(e),n()},i.prototype.update=function(e,t){return"string"==typeof e&&(e=new n(e,t)),this._hash.update(e),this},i.prototype.sign=function(e,t){this.end();var i=this._hash.digest(),r=u(n.concat([this._tag,i]),e,this._hashType,this._signType);return t?r.toString(t):r},c(r,d.Writable),r.prototype._write=function(e,t,n){this._hash.update(e),n()},r.prototype.update=function(e,t){return"string"==typeof e&&(e=new n(e,t)),this._hash.update(e),this},r.prototype.verify=function(e,t,i){"string"==typeof t&&(t=new n(t,i)),this.end();var r=this._hash.digest();return h(t,n.concat([this._tag,r]),e,this._signType)},t.exports={Sign:o,Verify:s,createSign:o,createVerify:s}}).call(this,e("buffer").Buffer)},{"./algos":596,"./sign":600,"./verify":601,buffer:605,"create-hash":620,inherits:599,stream:729}],598:[function(e,t,n){"use strict";n["1.3.132.0.10"]="secp256k1",n["1.3.132.0.33"]="p224",n["1.2.840.10045.3.1.1"]="p192",n["1.2.840.10045.3.1.7"]="p256",n["1.3.132.0.34"]="p384",n["1.3.132.0.35"]="p521"},{}],599:[function(e,t,n){arguments[4][274][0].apply(n,arguments)},{dup:274}],600:[function(e,t){(function(n){function i(e,t,n,i){var s=g(t);if(s.curve){if("ecdsa"!==i)throw new Error("wrong private key type");return r(e,s)}if("dsa"===s.type){if("dsa"!==i)throw new Error("wrong private key type");return o(e,s,n)}if("rsa"!==i)throw new Error("wrong private key type");for(var a=s.modulus.byteLength(),l=[0,1];e.length+l.length+1<a;)l.push(255);l.push(0);for(var c=-1;++c<e.length;)l.push(e[c]);var u=f(l,s);return u}function r(e,t){var i=p[t.curve.join(".")];if(!i)throw new Error("unknown curve "+t.curve.join("."));var r=new b(i),o=r.genKeyPair();o._importPrivate(t.privateKey);var s=o.sign(e);return new n(s.toDER())}function o(e,t,n){for(var i,r=t.params.priv_key,o=t.params.p,c=t.params.q,h=t.params.g,f=new v(0),p=l(e,c).mod(c),m=!1,g=a(r,c,e,n);m===!1;)i=u(c,g,n),f=d(h,i,o,c),m=i.invm(c).imul(p.add(r.mul(f))).mod(c),m.cmpn(0)||(m=!1,f=new v(0));return s(f,m)}function s(e,t){e=e.toArray(),t=t.toArray(),128&e[0]&&(e=[0].concat(e)),128&t[0]&&(t=[0].concat(t));var i=e.length+t.length+4,r=[48,i,2,e.length];return r=r.concat(e,[2,t.length],t),new n(r)}function a(e,t,i,r){if(e=new n(e.toArray()),e.length<t.byteLength()){var o=new n(t.byteLength()-e.length);o.fill(0),e=n.concat([o,e])}var s=i.length,a=c(i,t),l=new n(s);l.fill(1);var u=new n(s);return u.fill(0),u=h(r,u).update(l).update(new n([0])).update(e).update(a).digest(),l=h(r,u).update(l).digest(),u=h(r,u).update(l).update(new n([1])).update(e).update(a).digest(),l=h(r,u).update(l).digest(),{k:u,v:l}}function l(e,t){var n=new v(e),i=(e.length<<3)-t.bitLength();return i>0&&n.ishrn(i),n}function c(e,t){e=l(e,t),e=e.mod(t);var i=new n(e.toArray());if(i.length<t.byteLength()){var r=new n(t.byteLength()-i.length);r.fill(0),i=n.concat([r,i])}return i}function u(e,t,i){var r,o;do{for(r=new n("");8*r.length<e.bitLength();)t.v=h(i,t.k).update(t.v).digest(),r=n.concat([r,t.v]);o=l(r,e),t.k=h(i,t.k).update(t.v).update(new n([0])).digest(),t.v=h(i,t.k).update(t.v).digest()}while(-1!==o.cmp(e));return o}function d(e,t,n,i){return e.toRed(v.mont(n)).redPow(t).fromRed().mod(i)}var h=e("create-hmac"),f=e("browserify-rsa"),p=e("./curves"),m=e("elliptic"),g=e("parse-asn1"),v=e("bn.js"),b=m.ec;t.exports=i,t.exports.getKey=a,t.exports.makeKey=u}).call(this,e("buffer").Buffer)},{"./curves":598,"bn.js":572,"browserify-rsa":595,buffer:605,"create-hmac":624,elliptic:639,"parse-asn1":701}],601:[function(e,t){(function(n){function i(e,t,i,s){var a=c(i);if("ec"===a.type){if("ecdsa"!==s)throw new Error("wrong public key type");return r(e,t,a)}if("dsa"===a.type){if("dsa"!==s)throw new Error("wrong public key type");return o(e,t,a)}if("rsa"!==s)throw new Error("wrong public key type");for(var l=a.modulus.byteLength(),d=[1],h=0;t.length+d.length+2<l;)d.push(255),h++;d.push(0);for(var f=-1;++f<t.length;)d.push(t[f]);d=new n(d);var p=u.mont(a.modulus);e=new u(e).toRed(p),e=e.redPow(new u(a.publicExponent)),e=new n(e.fromRed().toArray());var m=0;for(8>h&&(m=1),l=Math.min(e.length,d.length),e.length!==d.length&&(m=1),f=-1;++f<l;)m|=e[f]^d[f];return 0===m}function r(e,t,n){var i=a[n.data.algorithm.curve.join(".")];if(!i)throw new Error("unknown curve "+n.data.algorithm.curve.join("."));var r=new d(i),o=n.data.subjectPrivateKey.data;return r.verify(t,e,o)}function o(e,t,n){var i=n.data.p,r=n.data.q,o=n.data.g,a=n.data.pub_key,l=c.signature.decode(e,"der"),d=l.s,h=l.r;s(d,r),s(h,r);var f=u.mont(i),p=d.invm(r),m=o.toRed(f).redPow(new u(t).mul(p).mod(r)).fromRed().mul(a.toRed(f).redPow(h.mul(p).mod(r)).fromRed()).mod(i).mod(r);return!m.cmp(h)}function s(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}var a=e("./curves"),l=e("elliptic"),c=e("parse-asn1"),u=e("bn.js"),d=l.ec;t.exports=i}).call(this,e("buffer").Buffer)},{"./curves":598,"bn.js":572,buffer:605,elliptic:639,"parse-asn1":701}],602:[function(e,t,n){arguments[4][574][0].apply(n,arguments)},{dup:574}],603:[function(e,t,n){(function(t){"use strict";var i=e("buffer"),r=i.Buffer,o=i.SlowBuffer,s=i.kMaxLength||2147483647;n.alloc=function(e,t,n){if("function"==typeof r.alloc)return r.alloc(e,t,n);if("number"==typeof n)throw new TypeError("encoding must not be number");if("number"!=typeof e)throw new TypeError("size must be a number");if(e>s)throw new RangeError("size is too large");var i=n,o=t;void 0===o&&(i=void 0,o=0);var a=new r(e);if("string"==typeof o)for(var l=new r(o,i),c=l.length,u=-1;++u<e;)a[u]=l[u%c];else a.fill(o);return a},n.allocUnsafe=function(e){if("function"==typeof r.allocUnsafe)return r.allocUnsafe(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>s)throw new RangeError("size is too large");return new r(e)},n.from=function(e,n,i){if("function"==typeof r.from&&(!t.Uint8Array||Uint8Array.from!==r.from))return r.from(e,n,i);if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("string"==typeof e)return new r(e,n);if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){var o=n;if(1===arguments.length)return new r(e);"undefined"==typeof o&&(o=0);var s=i;if("undefined"==typeof s&&(s=e.byteLength-o),o>=e.byteLength)throw new RangeError("'offset' is out of bounds");if(s>e.byteLength-o)throw new RangeError("'length' is out of bounds");return new r(e.slice(o,o+s))}if(r.isBuffer(e)){var a=new r(e.length);return e.copy(a,0,0,e.length),a}if(e){if(Array.isArray(e)||"undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return new r(e);if("Buffer"===e.type&&Array.isArray(e.data))return new r(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")
},n.allocUnsafeSlow=function(e){if("function"==typeof r.allocUnsafeSlow)return r.allocUnsafeSlow(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>=s)throw new RangeError("size is too large");return new o(e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{buffer:605}],604:[function(e,t){(function(e){t.exports=function(t,n){for(var i=Math.min(t.length,n.length),r=new e(i),o=0;i>o;++o)r[o]=t[o]^n[o];return r}}).call(this,e("buffer").Buffer)},{buffer:605}],605:[function(e,t,n){(function(t){"use strict";function i(){try{var e=new Uint8Array(1);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function r(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=s.prototype):(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return a(this,e,t,n)}function a(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?f(e,t,n,i):"string"==typeof t?d(e,t,n):p(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number')}function c(e,t,n,i){return l(t),0>=t?o(e,t):void 0!==n?"string"==typeof i?o(e,t).fill(n,i):o(e,t).fill(n):o(e,t)}function u(e,t){if(l(t),e=o(e,0>t?0:0|m(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;t>n;n++)e[n]=0;return e}function d(e,t,n){if(("string"!=typeof n||""===n)&&(n="utf8"),!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|v(t,n);return e=o(e,i),e.write(t,n),e}function h(e,t){var n=0|m(t.length);e=o(e,n);for(var i=0;n>i;i+=1)e[i]=255&t[i];return e}function f(e,t,n,i){if(t.byteLength,0>n||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i),s.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=s.prototype):e=h(e,t),e}function p(e,t){if(s.isBuffer(t)){var n=0|m(t.length);return e=o(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Y(t.length)?o(e,0):h(e,t);if("Buffer"===t.type&&X(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),s.alloc(+e)}function v(e,t){if(s.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(e).length;default:if(i)return z(e).length;t=(""+t).toLowerCase(),i=!0}}function b(e,t,n){var i=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if(n>>>=0,t>>>=0,t>=n)return"";for(e||(e="utf8");;)switch(e){case"hex":return F(this,t,n);case"utf8":case"utf-8":return R(this,t,n);case"ascii":return A(this,t,n);case"binary":return M(this,t,n);case"base64":return I(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function y(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function w(e,t,n,i){function r(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,s=e.length,a=t.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,s/=2,a/=2,n/=2}for(var l=-1,c=0;s>n+c;c++)if(r(e,n+c)===r(t,-1===l?0:c-l)){if(-1===l&&(l=c),c-l+1===a)return(n+l)*o}else-1!==l&&(c-=c-l),l=-1;return-1}function x(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;i>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function k(e,t,n,i){return G(z(t,e.length-n),e,n,i)}function _(e,t,n,i){return G(q(t),e,n,i)}function S(e,t,n,i){return _(e,t,n,i)}function C(e,t,n,i){return G(K(t),e,n,i)}function E(e,t,n,i){return G(W(t,e.length-n),e,n,i)}function I(e,t,n){return Q.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function R(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;n>r;){var o=e[r],s=null,a=o>239?4:o>223?3:o>191?2:1;if(n>=r+a){var l,c,u,d;switch(a){case 1:128>o&&(s=o);break;case 2:l=e[r+1],128===(192&l)&&(d=(31&o)<<6|63&l,d>127&&(s=d));break;case 3:l=e[r+1],c=e[r+2],128===(192&l)&&128===(192&c)&&(d=(15&o)<<12|(63&l)<<6|63&c,d>2047&&(55296>d||d>57343)&&(s=d));break;case 4:l=e[r+1],c=e[r+2],u=e[r+3],128===(192&l)&&128===(192&c)&&128===(192&u)&&(d=(15&o)<<18|(63&l)<<12|(63&c)<<6|63&u,d>65535&&1114112>d&&(s=d))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),r+=a}return T(i)}function T(e){var t=e.length;if(Z>=t)return String.fromCharCode.apply(String,e);for(var n="",i=0;t>i;)n+=String.fromCharCode.apply(String,e.slice(i,i+=Z));return n}function A(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;n>r;r++)i+=String.fromCharCode(127&e[r]);return i}function M(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;n>r;r++)i+=String.fromCharCode(e[r]);return i}function F(e,t,n){var i=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>i)&&(n=i);for(var r="",o=t;n>o;o++)r+=H(e[o]);return r}function V(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function L(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,i,r,o){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||o>t)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function N(e,t,n,i){0>t&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-n,2);o>r;r++)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function $(e,t,n,i){0>t&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-n,4);o>r;r++)e[n+r]=t>>>8*(i?r:3-r)&255}function D(e,t,n,i){if(n+i>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function P(e,t,n,i,r){return r||D(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,n,i,23,4),n+4}function j(e,t,n,i,r){return r||D(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,n,i,52,8),n+8}function B(e){if(e=U(e).replace(et,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function U(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function H(e){return 16>e?"0"+e.toString(16):e.toString(16)}function z(e,t){t=t||1/0;for(var n,i=e.length,r=null,o=[],s=0;i>s;s++){if(n=e.charCodeAt(s),n>55295&&57344>n){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function W(e,t){for(var n,i,r,o=[],s=0;s<e.length&&!((t-=2)<0);s++)n=e.charCodeAt(s),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function K(e){return Q.toByteArray(B(e))}function G(e,t,n,i){for(var r=0;i>r&&!(r+n>=t.length||r>=e.length);r++)t[r+n]=e[r];return r}function Y(e){return e!==e}var Q=e("base64-js"),J=e("ieee754"),X=e("isarray");n.Buffer=s,n.SlowBuffer=g,n.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),n.kMaxLength=r(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return a(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return c(null,e,t,n)},s.allocUnsafe=function(e){return u(null,e)},s.allocUnsafeSlow=function(e){return u(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,o=Math.min(n,i);o>r;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return i>n?-1:n>i?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!X(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var i=s.allocUnsafe(t),r=0;for(n=0;n<e.length;n++){var o=e[n];if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},s.byteLength=v,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;e>t;t+=2)y(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;e>t;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?R(this,0,e):b.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,i,r){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),0>t||n>e.length||0>i||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,r>>>=0,this===e)return 0;for(var o=r-i,a=n-t,l=Math.min(o,a),c=this.slice(i,r),u=e.slice(t,n),d=0;l>d;++d)if(c[d]!==u[d]){o=c[d],a=u[d];break}return a>o?-1:o>a?1:0},s.prototype.indexOf=function(e,t,n){if("string"==typeof t?(n=t,t=0):t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e&&(e=s.from(e,n)),s.isBuffer(e))return 0===e.length?-1:w(this,e,t,n);if("number"==typeof e)return s.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):w(this,[e],t,n);throw new TypeError("val must be string, number or Buffer")},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(n)?(n=0|n,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return x(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":return _(this,e,t,n);case"binary":return S(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;s.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e);var i;if(s.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=s.prototype;else{var r=t-e;i=new s(r,void 0);for(var o=0;r>o;o++)i[o]=this[o+e]}return i},s.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||L(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},s.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||L(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},s.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||L(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},s.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||L(e,t,this.length);for(var i=t,r=1,o=this[e+--i];i>0&&(r*=256);)o+=this[e+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},s.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),J.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),J.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),J.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),J.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=0|t,n=0|n,!i){var r=Math.pow(2,8*n)-1;O(this,e,t,n,r,0)}var o=1,s=0;for(this[t]=255&e;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=0|t,n=0|n,!i){var r=Math.pow(2,8*n)-1;O(this,e,t,n,r,0)}var o=n-1,s=1;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t=0|t,n||O(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=0|t,n||O(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=0|t,n||O(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=0|t,n||O(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):$(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=0|t,n||O(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):$(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=0|t,!i){var r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)0>e&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},s.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=0|t,!i){var r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)0>e&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t=0|t,n||O(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t=0|t,n||O(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t=0|t,n||O(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t=0|t,n||O(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):$(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t=0|t,n||O(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):$(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return P(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return P(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&n>i&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,o=i-n;if(this===e&&t>n&&i>t)for(r=o-1;r>=0;r--)e[r+t]=this[r+n];else if(1e3>o||!s.TYPED_ARRAY_SUPPORT)for(r=0;o>r;r++)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},s.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var r=e.charCodeAt(0);256>r&&(e=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!s.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e=255&e);if(0>t||this.length<t||this.length<n)throw new RangeError("Out of range index");if(t>=n)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;n>o;o++)this[o]=e;else{var a=s.isBuffer(e)?e:z(new s(e,i).toString()),l=a.length;for(o=0;n-t>o;o++)this[o+t]=a[o%l]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":571,ieee754:670,isarray:606}],606:[function(e,t){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],607:[function(e,t){(function(n){function i(e){r.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._decoder=null,this._encoding=null}var r=e("stream").Transform,o=e("inherits"),s=e("string_decoder").StringDecoder;t.exports=i,o(i,r),i.prototype.update=function(e,t,i){"string"==typeof e&&(e=new n(e,t));var r=this._update(e);return this.hashMode?this:(i&&(r=this._toString(r,i)),r)},i.prototype.setAutoPadding=function(){},i.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},i.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},i.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},i.prototype._transform=function(e,t,n){var i;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(r){i=r}finally{n(i)}},i.prototype._flush=function(e){var t;try{this.push(this._final())}catch(n){t=n}finally{e(t)}},i.prototype._finalOrDigest=function(e){var t=this._final()||new n("");return e&&(t=this._toString(t,e,!0)),t},i.prototype._toString=function(e,t,n){if(this._decoder||(this._decoder=new s(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var i=this._decoder.write(e);return n&&(i+=this._decoder.end()),i}}).call(this,e("buffer").Buffer)},{buffer:605,inherits:608,stream:729,string_decoder:742}],608:[function(e,t,n){arguments[4][274][0].apply(n,arguments)},{dup:274}],609:[function(e,t,n){!function(i){"object"==typeof n&&"object"==typeof t?i(e("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){"use strict";function t(e){var t=e.search(i);return-1==t?0:t}var n={},i=/[^\s ]/,r=e.Pos;e.commands.toggleComment=function(e){e.toggleComment()},e.defineExtension("toggleComment",function(e){e||(e=n);for(var t=this,i=1/0,o=this.listSelections(),s=null,a=o.length-1;a>=0;a--){var l=o[a].from(),c=o[a].to();l.line>=i||(c.line>=i&&(c=r(i,0)),i=l.line,null==s?t.uncomment(l,c,e)?s="un":(t.lineComment(l,c,e),s="line"):"un"==s?t.uncomment(l,c,e):t.lineComment(l,c,e))}}),e.defineExtension("lineComment",function(e,o,s){s||(s=n);var a=this,l=a.getModeAt(e),c=s.lineComment||l.lineComment;if(!c)return void((s.blockCommentStart||l.blockCommentStart)&&(s.fullLines=!0,a.blockComment(e,o,s)));var u=a.getLine(e.line);if(null!=u){var d=Math.min(0!=o.ch||o.line==e.line?o.line+1:o.line,a.lastLine()+1),h=null==s.padding?" ":s.padding,f=s.commentBlankLines||e.line==o.line;a.operation(function(){if(s.indent){for(var n=null,o=e.line;d>o;++o){var l=a.getLine(o),u=l.slice(0,t(l));(null==n||n.length>u.length)&&(n=u)}for(var o=e.line;d>o;++o){var l=a.getLine(o),p=n.length;(f||i.test(l))&&(l.slice(0,p)!=n&&(p=t(l)),a.replaceRange(n+c+h,r(o,0),r(o,p)))}}else for(var o=e.line;d>o;++o)(f||i.test(a.getLine(o)))&&a.replaceRange(c+h,r(o,0))})}}),e.defineExtension("blockComment",function(e,t,o){o||(o=n);var s=this,a=s.getModeAt(e),l=o.blockCommentStart||a.blockCommentStart,c=o.blockCommentEnd||a.blockCommentEnd;if(!l||!c)return void((o.lineComment||a.lineComment)&&0!=o.fullLines&&s.lineComment(e,t,o));var u=Math.min(t.line,s.lastLine());u!=e.line&&0==t.ch&&i.test(s.getLine(u))&&--u;var d=null==o.padding?" ":o.padding;e.line>u||s.operation(function(){if(0!=o.fullLines){var n=i.test(s.getLine(u));s.replaceRange(d+c,r(u)),s.replaceRange(l+d,r(e.line,0));var h=o.blockCommentLead||a.blockCommentLead;if(null!=h)for(var f=e.line+1;u>=f;++f)(f!=u||n)&&s.replaceRange(h+d,r(f,0))}else s.replaceRange(c,t),s.replaceRange(l,e)})}),e.defineExtension("uncomment",function(e,t,o){o||(o=n);var s,a=this,l=a.getModeAt(e),c=Math.min(0!=t.ch||t.line==e.line?t.line:t.line-1,a.lastLine()),u=Math.min(e.line,c),d=o.lineComment||l.lineComment,h=[],f=null==o.padding?" ":o.padding;e:if(d){for(var p=u;c>=p;++p){var m=a.getLine(p),g=m.indexOf(d);if(g>-1&&!/comment/.test(a.getTokenTypeAt(r(p,g+1)))&&(g=-1),-1==g&&(p!=c||p==u)&&i.test(m))break e;if(g>-1&&i.test(m.slice(0,g)))break e;h.push(m)}if(a.operation(function(){for(var e=u;c>=e;++e){var t=h[e-u],n=t.indexOf(d),i=n+d.length;0>n||(t.slice(i,i+f.length)==f&&(i+=f.length),s=!0,a.replaceRange("",r(e,n),r(e,i)))}}),s)return!0}var v=o.blockCommentStart||l.blockCommentStart,b=o.blockCommentEnd||l.blockCommentEnd;if(!v||!b)return!1;var y=o.blockCommentLead||l.blockCommentLead,w=a.getLine(u),x=c==u?w:a.getLine(c),k=w.indexOf(v),_=x.lastIndexOf(b);if(-1==_&&u!=c&&(x=a.getLine(--c),_=x.lastIndexOf(b)),-1==k||-1==_||!/comment/.test(a.getTokenTypeAt(r(u,k+1)))||!/comment/.test(a.getTokenTypeAt(r(c,_+1))))return!1;var S=w.lastIndexOf(v,e.ch),C=-1==S?-1:w.slice(0,e.ch).indexOf(b,S+v.length);if(-1!=S&&-1!=C&&C+b.length!=e.ch)return!1;C=x.indexOf(b,t.ch);var E=x.slice(t.ch).lastIndexOf(v,C-t.ch);return S=-1==C||-1==E?-1:t.ch+E,-1!=C&&-1!=S&&S!=t.ch?!1:(a.operation(function(){a.replaceRange("",r(c,_-(f&&x.slice(_-f.length,_)==f?f.length:0)),r(c,_+b.length));var e=k+v.length;if(f&&w.slice(e,e+f.length)==f&&(e+=f.length),a.replaceRange("",r(u,k),r(u,e)),y)for(var t=u+1;c>=t;++t){var n=a.getLine(t),o=n.indexOf(y);if(-1!=o&&!i.test(n.slice(0,o))){var s=o+y.length;f&&n.slice(s,s+f.length)==f&&(s+=f.length),a.replaceRange("",r(t,o),r(t,s))}}}),!0)})})},{"../../lib/codemirror":616}],610:[function(e,t,n){!function(i){"object"==typeof n&&"object"==typeof t?i(e("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){function t(e,t,n){var i,r=e.getWrapperElement();return i=r.appendChild(document.createElement("div")),i.className=n?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof t?i.innerHTML=t:i.appendChild(t),i}function n(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",function(i,r,o){function s(e){if("string"==typeof e)d.value=e;else{if(c)return;c=!0,l.parentNode.removeChild(l),u.focus(),o.onClose&&o.onClose(l)}}o||(o={}),n(this,null);var a,l=t(this,i,o.bottom),c=!1,u=this,d=l.getElementsByTagName("input")[0];return d?(o.value&&(d.value=o.value,o.selectValueOnOpen!==!1&&d.select()),o.onInput&&e.on(d,"input",function(e){o.onInput(e,d.value,s)}),o.onKeyUp&&e.on(d,"keyup",function(e){o.onKeyUp(e,d.value,s)}),e.on(d,"keydown",function(t){o&&o.onKeyDown&&o.onKeyDown(t,d.value,s)||((27==t.keyCode||o.closeOnEnter!==!1&&13==t.keyCode)&&(d.blur(),e.e_stop(t),s()),13==t.keyCode&&r(d.value,t))}),o.closeOnBlur!==!1&&e.on(d,"blur",s),d.focus()):(a=l.getElementsByTagName("button")[0])&&(e.on(a,"click",function(){s(),u.focus()}),o.closeOnBlur!==!1&&e.on(a,"blur",s),a.focus()),s}),e.defineExtension("openConfirm",function(i,r,o){function s(){c||(c=!0,a.parentNode.removeChild(a),u.focus())}n(this,null);var a=t(this,i,o&&o.bottom),l=a.getElementsByTagName("button"),c=!1,u=this,d=1;l[0].focus();for(var h=0;h<l.length;++h){var f=l[h];!function(t){e.on(f,"click",function(n){e.e_preventDefault(n),s(),t&&t(u)})}(r[h]),e.on(f,"blur",function(){--d,setTimeout(function(){0>=d&&s()},200)}),e.on(f,"focus",function(){++d})}}),e.defineExtension("openNotification",function(i,r){function o(){l||(l=!0,clearTimeout(s),a.parentNode.removeChild(a))}n(this,o);var s,a=t(this,i,r&&r.bottom),l=!1,c=r&&"undefined"!=typeof r.duration?r.duration:5e3;return e.on(a,"click",function(t){e.e_preventDefault(t),o()}),c&&(s=setTimeout(o,c)),o})})},{"../../lib/codemirror":616}],611:[function(e,t,n){!function(i){"object"==typeof n&&"object"==typeof t?i(e("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){function t(e,t){return"pairs"==t&&"string"==typeof e?e:"object"==typeof e&&null!=e[t]?e[t]:d[t]}function n(e){return function(t){return a(t,e)}}function i(e){var t=e.state.closeBrackets;if(!t)return null;var n=e.getModeAt(e.getCursor());return n.closeBrackets||t}function r(n){var r=i(n);if(!r||n.getOption("disableInput"))return e.Pass;for(var o=t(r,"pairs"),s=n.listSelections(),a=0;a<s.length;a++){if(!s[a].empty())return e.Pass;var l=c(n,s[a].head);if(!l||o.indexOf(l)%2!=0)return e.Pass}for(var a=s.length-1;a>=0;a--){var u=s[a].head;n.replaceRange("",h(u.line,u.ch-1),h(u.line,u.ch+1),"+delete")}}function o(n){var r=i(n),o=r&&t(r,"explode");if(!o||n.getOption("disableInput"))return e.Pass;for(var s=n.listSelections(),a=0;a<s.length;a++){if(!s[a].empty())return e.Pass;var l=c(n,s[a].head);if(!l||o.indexOf(l)%2!=0)return e.Pass}n.operation(function(){n.replaceSelection("\n\n",null),n.execCommand("goCharLeft"),s=n.listSelections();for(var e=0;e<s.length;e++){var t=s[e].head.line;n.indentLine(t,null,!0),n.indentLine(t+1,null,!0)}})}function s(t){var n=e.cmpPos(t.anchor,t.head)>0;return{anchor:new h(t.anchor.line,t.anchor.ch+(n?-1:1)),head:new h(t.head.line,t.head.ch+(n?1:-1))}}function a(n,r){var o=i(n);if(!o||n.getOption("disableInput"))return e.Pass;var a=t(o,"pairs"),c=a.indexOf(r);if(-1==c)return e.Pass;for(var d,f,p=t(o,"triples"),m=a.charAt(c+1)==r,g=n.listSelections(),v=c%2==0,b=0;b<g.length;b++){var y,w=g[b],x=w.head,f=n.getRange(x,h(x.line,x.ch+1));if(v&&!w.empty())y="surround";else if(!m&&v||f!=r)if(m&&x.ch>1&&p.indexOf(r)>=0&&n.getRange(h(x.line,x.ch-2),x)==r+r&&(x.ch<=2||n.getRange(h(x.line,x.ch-3),h(x.line,x.ch-2))!=r))y="addFour";else if(m){if(e.isWordChar(f)||!u(n,x,r))return e.Pass;y="both"}else{if(!v||n.getLine(x.line).length!=x.ch&&!l(f,a)&&!/\s/.test(f))return e.Pass;y="both"}else y=p.indexOf(r)>=0&&n.getRange(x,h(x.line,x.ch+3))==r+r+r?"skipThree":"skip";if(d){if(d!=y)return e.Pass}else d=y}var k=c%2?a.charAt(c-1):r,_=c%2?r:a.charAt(c+1);n.operation(function(){if("skip"==d)n.execCommand("goCharRight");else if("skipThree"==d)for(var e=0;3>e;e++)n.execCommand("goCharRight");else if("surround"==d){for(var t=n.getSelections(),e=0;e<t.length;e++)t[e]=k+t[e]+_;n.replaceSelections(t,"around"),t=n.listSelections().slice();for(var e=0;e<t.length;e++)t[e]=s(t[e]);n.setSelections(t)}else"both"==d?(n.replaceSelection(k+_,null),n.triggerElectric(k+_),n.execCommand("goCharLeft")):"addFour"==d&&(n.replaceSelection(k+k+k+k,"before"),n.execCommand("goCharRight"))})}function l(e,t){var n=t.lastIndexOf(e);return n>-1&&n%2==1}function c(e,t){var n=e.getRange(h(t.line,t.ch-1),h(t.line,t.ch+1));return 2==n.length?n:null}function u(t,n,i){var r=t.getLine(n.line),o=t.getTokenAt(n);if(/\bstring2?\b/.test(o.type))return!1;var s=new e.StringStream(r.slice(0,n.ch)+i+r.slice(n.ch),4);for(s.pos=s.start=o.start;;){var a=t.getMode().token(s,o.state);if(s.pos>=n.ch+1)return/\bstring2?\b/.test(a);s.start=s.pos}}var d={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}"},h=e.Pos;e.defineOption("autoCloseBrackets",!1,function(t,n,i){i&&i!=e.Init&&(t.removeKeyMap(p),t.state.closeBrackets=null),n&&(t.state.closeBrackets=n,t.addKeyMap(p))});for(var f=d.pairs+"`",p={Backspace:r,Enter:o},m=0;m<f.length;m++)p["'"+f.charAt(m)+"'"]=n(f.charAt(m))})},{"../../lib/codemirror":616}],612:[function(e,t,n){!function(i){"object"==typeof n&&"object"==typeof t?i(e("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){function t(e,t,i,r){var o=e.getLineHandle(t.line),l=t.ch-1,c=l>=0&&a[o.text.charAt(l)]||a[o.text.charAt(++l)];if(!c)return null;var u=">"==c.charAt(1)?1:-1;if(i&&u>0!=(l==t.ch))return null;var d=e.getTokenTypeAt(s(t.line,l+1)),h=n(e,s(t.line,l+(u>0?1:0)),u,d||null,r);return null==h?null:{from:s(t.line,l),to:h&&h.pos,match:h&&h.ch==c.charAt(0),forward:u>0}}function n(e,t,n,i,r){for(var o=r&&r.maxScanLineLength||1e4,l=r&&r.maxScanLines||1e3,c=[],u=r&&r.bracketRegex?r.bracketRegex:/[(){}[\]]/,d=n>0?Math.min(t.line+l,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-l),h=t.line;h!=d;h+=n){var f=e.getLine(h);if(f){var p=n>0?0:f.length-1,m=n>0?f.length:-1;if(!(f.length>o))for(h==t.line&&(p=t.ch-(0>n?1:0));p!=m;p+=n){var g=f.charAt(p);if(u.test(g)&&(void 0===i||e.getTokenTypeAt(s(h,p+1))==i)){var v=a[g];if(">"==v.charAt(1)==n>0)c.push(g);
else{if(!c.length)return{pos:s(h,p),ch:g};c.pop()}}}}}return h-n==(n>0?e.lastLine():e.firstLine())?!1:null}function i(e,n,i){for(var r=e.state.matchBrackets.maxHighlightLineLength||1e3,a=[],l=e.listSelections(),c=0;c<l.length;c++){var u=l[c].empty()&&t(e,l[c].head,!1,i);if(u&&e.getLine(u.from.line).length<=r){var d=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";a.push(e.markText(u.from,s(u.from.line,u.from.ch+1),{className:d})),u.to&&e.getLine(u.to.line).length<=r&&a.push(e.markText(u.to,s(u.to.line,u.to.ch+1),{className:d}))}}if(a.length){o&&e.state.focused&&e.focus();var h=function(){e.operation(function(){for(var e=0;e<a.length;e++)a[e].clear()})};if(!n)return h;setTimeout(h,800)}}function r(e){e.operation(function(){l&&(l(),l=null),l=i(e,!1,e.state.matchBrackets)})}var o=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),s=e.Pos,a={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},l=null;e.defineOption("matchBrackets",!1,function(t,n,i){i&&i!=e.Init&&t.off("cursorActivity",r),n&&(t.state.matchBrackets="object"==typeof n?n:{},t.on("cursorActivity",r))}),e.defineExtension("matchBrackets",function(){i(this,!0)}),e.defineExtension("findMatchingBracket",function(e,n,i){return t(this,e,n,i)}),e.defineExtension("scanForBracket",function(e,t,i,r){return n(this,e,t,i,r)})})},{"../../lib/codemirror":616}],613:[function(e,t,n){!function(i){"object"==typeof n&&"object"==typeof t?i(e("../../lib/codemirror"),e("./searchcursor"),e("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],i):i(CodeMirror)}(function(e){"use strict";function t(e,t){return"string"==typeof e?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(t){e.lastIndex=t.pos;var n=e.exec(t.string);return n&&n.index==t.pos?(t.pos+=n[0].length||1,"searching"):void(n?t.pos=n.index:t.skipToEnd())}}}function n(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function i(e){return e.state.search||(e.state.search=new n)}function r(e){return"string"==typeof e&&e==e.toLowerCase()}function o(e,t,n){return e.getSearchCursor(t,n,r(t))}function s(e,t,n,i){e.openDialog(t,i,{value:n,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){p(e)}})}function a(e,t,n,i,r){e.openDialog?e.openDialog(t,r,{value:i,selectValueOnOpen:!0}):r(prompt(n,i))}function l(e,t,n,i){e.openConfirm?e.openConfirm(t,i):confirm(n)&&i[0]()}function c(e){return e.replace(/\\(.)/g,function(e,t){return"n"==t?"\n":"r"==t?"\r":t})}function u(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],-1==t[2].indexOf("i")?"":"i")}catch(n){}else e=c(e);return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}function d(e,n,i){n.queryText=i,n.query=u(i),e.removeOverlay(n.overlay,r(n.query)),n.overlay=t(n.query,r(n.query)),e.addOverlay(n.overlay),e.showMatchesOnScrollbar&&(n.annotate&&(n.annotate.clear(),n.annotate=null),n.annotate=e.showMatchesOnScrollbar(n.query,r(n.query)))}function h(t,n,r){var o=i(t);if(o.query)return f(t,n);var l=t.getSelection()||o.lastQuery;if(r&&t.openDialog){var c=null;s(t,v,l,function(n,i){e.e_stop(i),n&&(n!=o.queryText&&d(t,o,n),c&&(c.style.opacity=1),f(t,i.shiftKey,function(e,n){var i;n.line<3&&document.querySelector&&(i=t.display.wrapper.querySelector(".CodeMirror-dialog"))&&i.getBoundingClientRect().bottom-4>t.cursorCoords(n,"window").top&&((c=i).style.opacity=.4)}))})}else a(t,v,"Search for:",l,function(e){e&&!o.query&&t.operation(function(){d(t,o,e),o.posFrom=o.posTo=t.getCursor(),f(t,n)})})}function f(t,n,r){t.operation(function(){var s=i(t),a=o(t,s.query,n?s.posFrom:s.posTo);(a.find(n)||(a=o(t,s.query,n?e.Pos(t.lastLine()):e.Pos(t.firstLine(),0)),a.find(n)))&&(t.setSelection(a.from(),a.to()),t.scrollIntoView({from:a.from(),to:a.to()},20),s.posFrom=a.from(),s.posTo=a.to(),r&&r(a.from(),a.to()))})}function p(e){e.operation(function(){var t=i(e);t.lastQuery=t.query,t.query&&(t.query=t.queryText=null,e.removeOverlay(t.overlay),t.annotate&&(t.annotate.clear(),t.annotate=null))})}function m(e,t,n){e.operation(function(){for(var i=o(e,t);i.findNext();)if("string"!=typeof t){var r=e.getRange(i.from(),i.to()).match(t);i.replace(n.replace(/\$(\d)/g,function(e,t){return r[t]}))}else i.replace(n)})}function g(e,t){if(!e.getOption("readOnly")){var n=e.getSelection()||i(e).lastQuery,r=t?"Replace all:":"Replace:";a(e,r+b,r,n,function(n){n&&(n=u(n),a(e,y,"Replace with:","",function(i){if(i=c(i),t)m(e,n,i);else{p(e);var r=o(e,n,e.getCursor()),s=function(){var t,c=r.from();!(t=r.findNext())&&(r=o(e,n),!(t=r.findNext())||c&&r.from().line==c.line&&r.from().ch==c.ch)||(e.setSelection(r.from(),r.to()),e.scrollIntoView({from:r.from(),to:r.to()}),l(e,w,"Replace?",[function(){a(t)},s,function(){m(e,n,i)}]))},a=function(e){r.replace("string"==typeof n?i:i.replace(/\$(\d)/g,function(t,n){return e[n]})),s()};s()}}))})}}var v='Search: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',b=' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',y='With: <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',w="Replace? <button>Yes</button> <button>No</button> <button>All</button> <button>Stop</button>";e.commands.find=function(e){p(e),h(e)},e.commands.findPersistent=function(e){p(e),h(e,!1,!0)},e.commands.findNext=h,e.commands.findPrev=function(e){h(e,!0)},e.commands.clearSearch=p,e.commands.replace=g,e.commands.replaceAll=function(e){g(e,!0)}})},{"../../lib/codemirror":616,"../dialog/dialog":610,"./searchcursor":614}],614:[function(e,t,n){!function(i){"object"==typeof n&&"object"==typeof t?i(e("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){"use strict";function t(e,t,r,o){if(this.atOccurrence=!1,this.doc=e,null==o&&"string"==typeof t&&(o=!1),r=r?e.clipPos(r):i(0,0),this.pos={from:r,to:r},"string"!=typeof t)t.global||(t=new RegExp(t.source,t.ignoreCase?"ig":"g")),this.matches=function(n,r){if(n){t.lastIndex=0;for(var o,s,a=e.getLine(r.line).slice(0,r.ch),l=0;;){t.lastIndex=l;var c=t.exec(a);if(!c)break;if(o=c,s=o.index,l=o.index+(o[0].length||1),l==a.length)break}var u=o&&o[0].length||0;u||(0==s&&0==a.length?o=void 0:s!=e.getLine(r.line).length&&u++)}else{t.lastIndex=r.ch;var a=e.getLine(r.line),o=t.exec(a),u=o&&o[0].length||0,s=o&&o.index;s+u==a.length||u||(u=1)}return o&&u?{from:i(r.line,s),to:i(r.line,s+u),match:o}:void 0};else{var s=t;o&&(t=t.toLowerCase());var a=o?function(e){return e.toLowerCase()}:function(e){return e},l=t.split("\n");if(1==l.length)this.matches=t.length?function(r,o){if(r){var l=e.getLine(o.line).slice(0,o.ch),c=a(l),u=c.lastIndexOf(t);if(u>-1)return u=n(l,c,u),{from:i(o.line,u),to:i(o.line,u+s.length)}}else{var l=e.getLine(o.line).slice(o.ch),c=a(l),u=c.indexOf(t);if(u>-1)return u=n(l,c,u)+o.ch,{from:i(o.line,u),to:i(o.line,u+s.length)}}}:function(){};else{var c=s.split("\n");this.matches=function(t,n){var r=l.length-1;if(t){if(n.line-(l.length-1)<e.firstLine())return;if(a(e.getLine(n.line).slice(0,c[r].length))!=l[l.length-1])return;for(var o=i(n.line,c[r].length),s=n.line-1,u=r-1;u>=1;--u,--s)if(l[u]!=a(e.getLine(s)))return;var d=e.getLine(s),h=d.length-c[0].length;if(a(d.slice(h))!=l[0])return;return{from:i(s,h),to:o}}if(!(n.line+(l.length-1)>e.lastLine())){var d=e.getLine(n.line),h=d.length-c[0].length;if(a(d.slice(h))==l[0]){for(var f=i(n.line,h),s=n.line+1,u=1;r>u;++u,++s)if(l[u]!=a(e.getLine(s)))return;if(a(e.getLine(s).slice(0,c[r].length))==l[r])return{from:f,to:i(s,c[r].length)}}}}}}}function n(e,t,n){if(e.length==t.length)return n;for(var i=Math.min(n,e.length);;){var r=e.slice(0,i).toLowerCase().length;if(n>r)++i;else{if(!(r>n))return i;--i}}}var i=e.Pos;t.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){function t(e){var t=i(e,0);return n.pos={from:t,to:t},n.atOccurrence=!1,!1}for(var n=this,r=this.doc.clipPos(e?this.pos.from:this.pos.to);;){if(this.pos=this.matches(e,r))return this.atOccurrence=!0,this.pos.match||!0;if(e){if(!r.line)return t(0);r=i(r.line-1,this.doc.getLine(r.line-1).length)}else{var o=this.doc.lineCount();if(r.line==o-1)return t(o);r=i(r.line+1,0)}}},from:function(){return this.atOccurrence?this.pos.from:void 0},to:function(){return this.atOccurrence?this.pos.to:void 0},replace:function(t,n){if(this.atOccurrence){var r=e.splitLines(t);this.doc.replaceRange(r,this.pos.from,this.pos.to,n),this.pos.to=i(this.pos.from.line+r.length-1,r[r.length-1].length+(1==r.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",function(e,n,i){return new t(this.doc,e,n,i)}),e.defineDocExtension("getSearchCursor",function(e,n,i){return new t(this,e,n,i)}),e.defineExtension("selectMatches",function(t,n){for(var i=[],r=this.getSearchCursor(t,this.getCursor("from"),n);r.findNext()&&!(e.cmpPos(r.to(),this.getCursor("to"))>0);)i.push({anchor:r.from(),head:r.to()});i.length&&this.setSelections(i,0)})})},{"../../lib/codemirror":616}],615:[function(e,t,n){!function(i){"object"==typeof n&&"object"==typeof t?i(e("../lib/codemirror"),e("../addon/search/searchcursor"),e("../addon/edit/matchbrackets")):"function"==typeof define&&define.amd?define(["../lib/codemirror","../addon/search/searchcursor","../addon/edit/matchbrackets"],i):i(CodeMirror)}(function(e){"use strict";function t(t,n,i){if(0>i&&0==n.ch)return t.clipPos(h(n.line-1));var r=t.getLine(n.line);if(i>0&&n.ch>=r.length)return t.clipPos(h(n.line+1,0));for(var o,s="start",a=n.ch,l=0>i?0:r.length,c=0;a!=l;a+=i,c++){var u=r.charAt(0>i?a-1:a),d="_"!=u&&e.isWordChar(u)?"w":"o";if("w"==d&&u.toUpperCase()==u&&(d="W"),"start"==s)"o"!=d&&(s="in",o=d);else if("in"==s&&o!=d){if("w"==o&&"W"==d&&0>i&&a--,"W"==o&&"w"==d&&i>0){o="w";continue}break}}return h(n.line,a)}function n(e,n){e.extendSelectionsBy(function(i){return e.display.shift||e.doc.extend||i.empty()?t(e.doc,i.head,n):0>n?i.from():i.to()})}function i(t,n){return t.isReadOnly()?e.Pass:void t.operation(function(){for(var e=t.listSelections().length,i=[],r=-1,o=0;e>o;o++){var s=t.listSelections()[o].head;if(!(s.line<=r)){var a=h(s.line+(n?0:1),0);t.replaceRange("\n",a,null,"+insertLine"),t.indentLine(a.line,null,!0),i.push({head:a,anchor:a}),r=s.line+1}}t.setSelections(i)})}function r(t,n){for(var i=n.ch,r=i,o=t.getLine(n.line);i&&e.isWordChar(o.charAt(i-1));)--i;for(;r<o.length&&e.isWordChar(o.charAt(r));)++r;return{from:h(n.line,i),to:h(n.line,r),word:o.slice(i,r)}}function o(e){var t=e.getCursor(),n=e.scanForBracket(t,-1);if(n)for(;;){var i=e.scanForBracket(t,1);if(!i)return;if(i.ch==g.charAt(g.indexOf(n.ch)+1))return e.setSelection(h(n.pos.line,n.pos.ch+1),i.pos,!1),!0;t=h(i.pos.line,i.pos.ch+1)}}function s(t,n){if(t.isReadOnly())return e.Pass;for(var i,r=t.listSelections(),o=[],s=0;s<r.length;s++){var a=r[s];if(!a.empty()){for(var l=a.from().line,c=a.to().line;s<r.length-1&&r[s+1].from().line==c;)c=a[++s].to().line;o.push(l,c)}}o.length?i=!0:o.push(t.firstLine(),t.lastLine()),t.operation(function(){for(var e=[],r=0;r<o.length;r+=2){var s=o[r],a=o[r+1],l=h(s,0),c=h(a),u=t.getRange(l,c,!1);n?u.sort():u.sort(function(e,t){var n=e.toUpperCase(),i=t.toUpperCase();return n!=i&&(e=n,t=i),t>e?-1:e==t?0:1}),t.replaceRange(u,l,c),i&&e.push({anchor:l,head:c})}i&&t.setSelections(e,0)})}function a(t,n){t.operation(function(){for(var i=t.listSelections(),o=[],s=[],a=0;a<i.length;a++){var l=i[a];l.empty()?(o.push(a),s.push("")):s.push(n(t.getRange(l.from(),l.to())))}t.replaceSelections(s,"around","case");for(var c,a=o.length-1;a>=0;a--){var l=i[o[a]];if(!(c&&e.cmpPos(l.head,c)>0)){var u=r(t,l.head);c=u.from,t.replaceRange(n(u.word),u.from,u.to)}}})}function l(t){var n=t.getCursor("from"),i=t.getCursor("to");if(0==e.cmpPos(n,i)){var o=r(t,n);if(!o.word)return;n=o.from,i=o.to}return{from:n,to:i,query:t.getRange(n,i),word:o}}function c(e,t){var n=l(e);if(n){var i=n.query,r=e.getSearchCursor(i,t?n.to:n.from);(t?r.findNext():r.findPrevious())?e.setSelection(r.from(),r.to()):(r=e.getSearchCursor(i,t?h(e.firstLine(),0):e.clipPos(h(e.lastLine()))),(t?r.findNext():r.findPrevious())?e.setSelection(r.from(),r.to()):n.word&&e.setSelection(n.from,n.to))}}var u=e.keyMap.sublime={fallthrough:"default"},d=e.commands,h=e.Pos,f=e.keyMap["default"]==e.keyMap.macDefault,p=f?"Cmd-":"Ctrl-";d[u["Alt-Left"]="goSubwordLeft"]=function(e){n(e,-1)},d[u["Alt-Right"]="goSubwordRight"]=function(e){n(e,1)};var m=f?"Ctrl-Alt-":"Ctrl-";d[u[m+"Up"]="scrollLineUp"]=function(e){var t=e.getScrollInfo();if(!e.somethingSelected()){var n=e.lineAtHeight(t.top+t.clientHeight,"local");e.getCursor().line>=n&&e.execCommand("goLineUp")}e.scrollTo(null,t.top-e.defaultTextHeight())},d[u[m+"Down"]="scrollLineDown"]=function(e){var t=e.getScrollInfo();if(!e.somethingSelected()){var n=e.lineAtHeight(t.top,"local")+1;e.getCursor().line<=n&&e.execCommand("goLineDown")}e.scrollTo(null,t.top+e.defaultTextHeight())},d[u["Shift-"+p+"L"]="splitSelectionByLine"]=function(e){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++)for(var r=t[i].from(),o=t[i].to(),s=r.line;s<=o.line;++s)o.line>r.line&&s==o.line&&0==o.ch||n.push({anchor:s==r.line?r:h(s,0),head:s==o.line?o:h(s)});e.setSelections(n,0)},u["Shift-Tab"]="indentLess",d[u.Esc="singleSelectionTop"]=function(e){var t=e.listSelections()[0];e.setSelection(t.anchor,t.head,{scroll:!1})},d[u[p+"L"]="selectLine"]=function(e){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++){var r=t[i];n.push({anchor:h(r.from().line,0),head:h(r.to().line+1,0)})}e.setSelections(n)},u["Shift-"+p+"K"]="deleteLine",d[u[p+"Enter"]="insertLineAfter"]=function(e){return i(e,!1)},d[u["Shift-"+p+"Enter"]="insertLineBefore"]=function(e){return i(e,!0)},d[u[p+"D"]="selectNextOccurrence"]=function(t){var n=t.getCursor("from"),i=t.getCursor("to"),o=t.state.sublimeFindFullWord==t.doc.sel;if(0==e.cmpPos(n,i)){var s=r(t,n);if(!s.word)return;t.setSelection(s.from,s.to),o=!0}else{var a=t.getRange(n,i),l=o?new RegExp("\\b"+a+"\\b"):a,c=t.getSearchCursor(l,i);c.findNext()?t.addSelection(c.from(),c.to()):(c=t.getSearchCursor(l,h(t.firstLine(),0)),c.findNext()&&t.addSelection(c.from(),c.to()))}o&&(t.state.sublimeFindFullWord=t.doc.sel)};var g="(){}[]";d[u["Shift-"+p+"Space"]="selectScope"]=function(e){o(e)||e.execCommand("selectAll")},d[u["Shift-"+p+"M"]="selectBetweenBrackets"]=function(t){return o(t)?void 0:e.Pass},d[u[p+"M"]="goToBracket"]=function(t){t.extendSelectionsBy(function(n){var i=t.scanForBracket(n.head,1);if(i&&0!=e.cmpPos(i.pos,n.head))return i.pos;var r=t.scanForBracket(n.head,-1);return r&&h(r.pos.line,r.pos.ch+1)||n.head})};var v=f?"Cmd-Ctrl-":"Shift-Ctrl-";d[u[v+"Up"]="swapLineUp"]=function(t){if(t.isReadOnly())return e.Pass;for(var n=t.listSelections(),i=[],r=t.firstLine()-1,o=[],s=0;s<n.length;s++){var a=n[s],l=a.from().line-1,c=a.to().line;o.push({anchor:h(a.anchor.line-1,a.anchor.ch),head:h(a.head.line-1,a.head.ch)}),0!=a.to().ch||a.empty()||--c,l>r?i.push(l,c):i.length&&(i[i.length-1]=c),r=c}t.operation(function(){for(var e=0;e<i.length;e+=2){var n=i[e],r=i[e+1],s=t.getLine(n);t.replaceRange("",h(n,0),h(n+1,0),"+swapLine"),r>t.lastLine()?t.replaceRange("\n"+s,h(t.lastLine()),null,"+swapLine"):t.replaceRange(s+"\n",h(r,0),null,"+swapLine")}t.setSelections(o),t.scrollIntoView()})},d[u[v+"Down"]="swapLineDown"]=function(t){if(t.isReadOnly())return e.Pass;for(var n=t.listSelections(),i=[],r=t.lastLine()+1,o=n.length-1;o>=0;o--){var s=n[o],a=s.to().line+1,l=s.from().line;0!=s.to().ch||s.empty()||a--,r>a?i.push(a,l):i.length&&(i[i.length-1]=l),r=l}t.operation(function(){for(var e=i.length-2;e>=0;e-=2){var n=i[e],r=i[e+1],o=t.getLine(n);n==t.lastLine()?t.replaceRange("",h(n-1),h(n),"+swapLine"):t.replaceRange("",h(n,0),h(n+1,0),"+swapLine"),t.replaceRange(o+"\n",h(r,0),null,"+swapLine")}t.scrollIntoView()})},d[u[p+"/"]="toggleCommentIndented"]=function(e){e.toggleComment({indent:!0})},d[u[p+"J"]="joinLines"]=function(e){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++){for(var r=t[i],o=r.from(),s=o.line,a=r.to().line;i<t.length-1&&t[i+1].from().line==a;)a=t[++i].to().line;n.push({start:s,end:a,anchor:!r.empty()&&o})}e.operation(function(){for(var t=0,i=[],r=0;r<n.length;r++){for(var o,s=n[r],a=s.anchor&&h(s.anchor.line-t,s.anchor.ch),l=s.start;l<=s.end;l++){var c=l-t;l==s.end&&(o=h(c,e.getLine(c).length+1)),c<e.lastLine()&&(e.replaceRange(" ",h(c),h(c+1,/^\s*/.exec(e.getLine(c+1))[0].length)),++t)}i.push({anchor:a||o,head:o})}e.setSelections(i,0)})},d[u["Shift-"+p+"D"]="duplicateLine"]=function(e){e.operation(function(){for(var t=e.listSelections().length,n=0;t>n;n++){var i=e.listSelections()[n];i.empty()?e.replaceRange(e.getLine(i.head.line)+"\n",h(i.head.line,0)):e.replaceRange(e.getRange(i.from(),i.to()),i.from())}e.scrollIntoView()})},u[p+"T"]="transposeChars",d[u.F9="sortLines"]=function(e){s(e,!0)},d[u[p+"F9"]="sortLinesInsensitive"]=function(e){s(e,!1)},d[u.F2="nextBookmark"]=function(e){var t=e.state.sublimeBookmarks;if(t)for(;t.length;){var n=t.shift(),i=n.find();if(i)return t.push(n),e.setSelection(i.from,i.to)}},d[u["Shift-F2"]="prevBookmark"]=function(e){var t=e.state.sublimeBookmarks;if(t)for(;t.length;){t.unshift(t.pop());var n=t[t.length-1].find();if(n)return e.setSelection(n.from,n.to);t.pop()}},d[u[p+"F2"]="toggleBookmark"]=function(e){for(var t=e.listSelections(),n=e.state.sublimeBookmarks||(e.state.sublimeBookmarks=[]),i=0;i<t.length;i++){for(var r=t[i].from(),o=t[i].to(),s=e.findMarks(r,o),a=0;a<s.length;a++)if(s[a].sublimeBookmark){s[a].clear();for(var l=0;l<n.length;l++)n[l]==s[a]&&n.splice(l--,1);break}a==s.length&&n.push(e.markText(r,o,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},d[u["Shift-"+p+"F2"]="clearBookmarks"]=function(e){var t=e.state.sublimeBookmarks;if(t)for(var n=0;n<t.length;n++)t[n].clear();t.length=0},d[u["Alt-F2"]="selectBookmarks"]=function(e){var t=e.state.sublimeBookmarks,n=[];if(t)for(var i=0;i<t.length;i++){var r=t[i].find();r?n.push({anchor:r.from,head:r.to}):t.splice(i--,0)}n.length&&e.setSelections(n,0)},u["Alt-Q"]="wrapLines";var b=p+"K ";u[b+p+"Backspace"]="delLineLeft",d[u.Backspace="smartBackspace"]=function(t){if(t.somethingSelected())return e.Pass;var n=t.getCursor(),i=t.getRange({line:n.line,ch:0},n),r=e.countColumn(i,null,t.getOption("tabSize")),o=t.getOption("indentUnit");if(i&&!/\S/.test(i)&&r%o==0){var s=new h(n.line,e.findColumn(i,r-o,o));return s.ch==n.ch?e.Pass:t.replaceRange("",s,n,"+delete")}return e.Pass},d[u[b+p+"K"]="delLineRight"]=function(e){e.operation(function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange("",t[n].anchor,h(t[n].to().line),"+delete");e.scrollIntoView()})},d[u[b+p+"U"]="upcaseAtCursor"]=function(e){a(e,function(e){return e.toUpperCase()})},d[u[b+p+"L"]="downcaseAtCursor"]=function(e){a(e,function(e){return e.toLowerCase()})},d[u[b+p+"Space"]="setSublimeMark"]=function(e){e.state.sublimeMark&&e.state.sublimeMark.clear(),e.state.sublimeMark=e.setBookmark(e.getCursor())},d[u[b+p+"A"]="selectToSublimeMark"]=function(e){var t=e.state.sublimeMark&&e.state.sublimeMark.find();t&&e.setSelection(e.getCursor(),t)},d[u[b+p+"W"]="deleteToSublimeMark"]=function(t){var n=t.state.sublimeMark&&t.state.sublimeMark.find();if(n){var i=t.getCursor(),r=n;if(e.cmpPos(i,r)>0){var o=r;r=i,i=o}t.state.sublimeKilled=t.getRange(i,r),t.replaceRange("",i,r)}},d[u[b+p+"X"]="swapWithSublimeMark"]=function(e){var t=e.state.sublimeMark&&e.state.sublimeMark.find();t&&(e.state.sublimeMark.clear(),e.state.sublimeMark=e.setBookmark(e.getCursor()),e.setCursor(t))},d[u[b+p+"Y"]="sublimeYank"]=function(e){null!=e.state.sublimeKilled&&e.replaceSelection(e.state.sublimeKilled,null,"paste")},u[b+p+"G"]="clearBookmarks",d[u[b+p+"C"]="showInCenter"]=function(e){var t=e.cursorCoords(null,"local");e.scrollTo(null,(t.top+t.bottom)/2-e.getScrollInfo().clientHeight/2)},d[u["Shift-Alt-Up"]="selectLinesUpward"]=function(e){e.operation(function(){for(var t=e.listSelections(),n=0;n<t.length;n++){var i=t[n];i.head.line>e.firstLine()&&e.addSelection(h(i.head.line-1,i.head.ch))}})},d[u["Shift-Alt-Down"]="selectLinesDownward"]=function(e){e.operation(function(){for(var t=e.listSelections(),n=0;n<t.length;n++){var i=t[n];i.head.line<e.lastLine()&&e.addSelection(h(i.head.line+1,i.head.ch))}})},d[u[p+"F3"]="findUnder"]=function(e){c(e,!0)},d[u["Shift-"+p+"F3"]="findUnderPrevious"]=function(e){c(e,!1)},d[u["Alt-F3"]="findAllUnder"]=function(e){var t=l(e);if(t){for(var n=e.getSearchCursor(t.query),i=[],r=-1;n.findNext();)i.push({anchor:n.from(),head:n.to()}),n.from().line<=t.from.line&&n.from().ch<=t.from.ch&&r++;e.setSelections(i,r)}},u["Shift-"+p+"["]="fold",u["Shift-"+p+"]"]="unfold",u[b+p+"0"]=u[b+p+"j"]="unfoldAll",u[p+"I"]="findIncremental",u["Shift-"+p+"I"]="findIncrementalReverse",u[p+"H"]="replace",u.F3="findNext",u["Shift-F3"]="findPrev",e.normalizeKeyMap(u)})},{"../addon/edit/matchbrackets":612,"../addon/search/searchcursor":614,"../lib/codemirror":616}],616:[function(e,t,n){!function(e){if("object"==typeof n&&"object"==typeof t)t.exports=e();else{if("function"==typeof define&&define.amd)return define([],e);(this||window).CodeMirror=e()}}(function(){"use strict";function e(n,i){if(!(this instanceof e))return new e(n,i);this.options=i=i?Do(i):{},Do(Zs,i,!1),f(i);var r=i.value;"string"==typeof r&&(r=new _a(r,i.mode,null,i.lineSeparator)),this.doc=r;var o=new e.inputStyles[i.inputStyle](this),s=this.display=new t(n,r,o);s.wrapper.CodeMirror=this,c(this),a(this),i.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),i.autofocus&&!Ts&&s.input.focus(),v(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Mo,keySeq:null,specialChars:null};var l=this;ys&&11>ws&&setTimeout(function(){l.display.input.reset(!0)},20),Hn(this),Qo(),xn(this),this.curOp.forceUpdate=!0,Qr(this,r),i.autofocus&&!Ts||l.hasFocus()?setTimeout(Po(vi,this),20):bi(this);for(var u in ea)ea.hasOwnProperty(u)&&ea[u](this,i[u],ta);k(this),i.finishInit&&i.finishInit(this);for(var d=0;d<oa.length;++d)oa[d](this);_n(this),xs&&i.lineWrapping&&"optimizelegibility"==getComputedStyle(s.lineDiv).textRendering&&(s.lineDiv.style.textRendering="auto")}function t(e,t,n){var i=this;this.input=n,i.scrollbarFiller=Ho("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=Ho("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=Ho("div",null,"CodeMirror-code"),i.selectionDiv=Ho("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=Ho("div",null,"CodeMirror-cursors"),i.measure=Ho("div",null,"CodeMirror-measure"),i.lineMeasure=Ho("div",null,"CodeMirror-measure"),i.lineSpace=Ho("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none"),i.mover=Ho("div",[Ho("div",[i.lineSpace],"CodeMirror-lines")],null,"position: relative"),i.sizer=Ho("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=Ho("div",null,null,"position: absolute; height: "+La+"px; width: 1px;"),i.gutters=Ho("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=Ho("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=Ho("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),ys&&8>ws&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),xs||gs&&Ts||(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,n.init(i)}function n(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),i(t)}function i(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,Pt(e,100),e.state.modeGen++,e.curOp&&Nn(e)}function r(e){e.options.lineWrapping?(Ja(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Qa(e.display.wrapper,"CodeMirror-wrap"),h(e)),s(e),Nn(e),ln(e),setTimeout(function(){b(e)},100)}function o(e){var t=yn(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/wn(e.display)-3);return function(r){if(kr(e.doc,r))return 0;var o=0;if(r.widgets)for(var s=0;s<r.widgets.length;s++)r.widgets[s].height&&(o+=r.widgets[s].height);return n?o+(Math.ceil(r.text.length/i)||1)*t:o+t}}function s(e){var t=e.doc,n=o(e);t.iter(function(e){var t=n(e);t!=e.height&&eo(e,t)})}function a(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ln(e)}function l(e){c(e),Nn(e),setTimeout(function(){x(e)},20)}function c(e){var t=e.display.gutters,n=e.options.gutters;zo(t);for(var i=0;i<n.length;++i){var r=n[i],o=t.appendChild(Ho("div",null,"CodeMirror-gutter "+r));"CodeMirror-linenumbers"==r&&(e.display.lineGutter=o,o.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=i?"":"none",u(e)}function u(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function d(e){if(0==e.height)return 0;for(var t,n=e.text.length,i=e;t=mr(i);){var r=t.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=e;t=gr(i);){var r=t.find(0,!0);n-=i.text.length-r.from.ch,i=r.to.line,n+=i.text.length-r.to.ch}return n}function h(e){var t=e.display,n=e.doc;t.maxLine=Jr(n,n.first),t.maxLineLength=d(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=d(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function f(e){var t=Lo(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function p(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+zt(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+Wt(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}function m(e,t,n){this.cm=n;var i=this.vert=Ho("div",[Ho("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=Ho("div",[Ho("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(i),e(r),Ta(i,"scroll",function(){i.clientHeight&&t(i.scrollTop,"vertical")}),Ta(r,"scroll",function(){r.clientWidth&&t(r.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,ys&&8>ws&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function g(){}function v(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&Qa(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new e.scrollbarModel[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),Ta(e,"mousedown",function(){t.state.focused&&setTimeout(function(){t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,n){"horizontal"==n?oi(t,e):ri(t,e)},t),t.display.scrollbars.addClass&&Ja(t.display.wrapper,t.display.scrollbars.addClass)}function b(e,t){t||(t=p(e));var n=e.display.barWidth,i=e.display.barHeight;y(e,t);for(var r=0;4>r&&n!=e.display.barWidth||i!=e.display.barHeight;r++)n!=e.display.barWidth&&e.options.lineWrapping&&M(e),y(e,p(e)),n=e.display.barWidth,i=e.display.barHeight}function y(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}function w(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-Ht(e));var r=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight,o=no(t,i),s=no(t,r);if(n&&n.ensure){var a=n.ensure.from.line,l=n.ensure.to.line;o>a?(o=a,s=no(t,io(Jr(t,a))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=s&&(o=no(t,io(Jr(t,l))-e.wrapper.clientHeight),s=l)}return{from:o,to:Math.max(s,o+1)}}function x(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=S(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,o=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){e.options.fixedGutter&&n[s].gutter&&(n[s].gutter.style.left=o);var a=n[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=i+r+"px")}}function k(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=_(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(Ho("div",[Ho("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,s=r.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",u(e),!0}return!1}function _(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function S(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function C(e,t,n){var i=e.display;this.viewport=t,this.visible=w(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=Kt(e),this.force=n,this.dims=V(e),this.events=[]}function E(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Wt(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Wt(e)+"px",t.scrollbarsClipped=!0)}function I(e,t){var n=e.display,i=e.doc;if(t.editorIsHidden)return Dn(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==Un(e))return!1;k(e)&&(Dn(e),t.dims=V(e));var r=i.first+i.size,o=Math.max(t.visible.from-e.options.viewportMargin,i.first),s=Math.min(r,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(i.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(r,n.viewTo)),Ns&&(o=wr(e.doc,o),s=xr(e.doc,s));var a=o!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;Bn(e,o,s),n.viewOffset=io(Jr(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var l=Un(e);if(!a&&0==l&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=Wo();return l>4&&(n.lineDiv.style.display="none"),L(e,n.updateLineNumbers,t.dims),l>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,c&&Wo()!=c&&c.offsetHeight&&c.focus(),zo(n.cursorDiv),zo(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,a&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,Pt(e,400)),n.updateLineNumbers=null,!0
}function R(e,t){for(var n=t.viewport,i=!0;(i&&e.options.lineWrapping&&t.oldDisplayWidth!=Kt(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+zt(e.display)-Gt(e),n.top)}),t.visible=w(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&I(e,t);i=!1){M(e);var r=p(e);Lt(e),A(e,r),b(e,r)}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function T(e,t){var n=new C(e,t);if(I(e,n)){M(e),R(e,n);var i=p(e);Lt(e),A(e,i),b(e,i),n.finish()}}function A(e,t){e.display.sizer.style.minHeight=t.docHeight+"px";var n=t.docHeight+e.display.barHeight;e.display.heightForcer.style.top=n+"px",e.display.gutters.style.height=Math.max(n+Wt(e),t.clientHeight)+"px"}function M(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=0;i<t.view.length;i++){var r,o=t.view[i];if(!o.hidden){if(ys&&8>ws){var s=o.node.offsetTop+o.node.offsetHeight;r=s-n,n=s}else{var a=o.node.getBoundingClientRect();r=a.bottom-a.top}var l=o.line.height-r;if(2>r&&(r=yn(t)),(l>.001||-.001>l)&&(eo(o.line,r),F(o.line),o.rest))for(var c=0;c<o.rest.length;c++)F(o.rest[c])}}}function F(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.parentNode.offsetHeight}function V(e){for(var t=e.display,n={},i={},r=t.gutters.clientLeft,o=t.gutters.firstChild,s=0;o;o=o.nextSibling,++s)n[e.options.gutters[s]]=o.offsetLeft+o.clientLeft+r,i[e.options.gutters[s]]=o.clientWidth;return{fixedPos:S(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function L(e,t,n){function i(t){var n=t.nextSibling;return xs&&As&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var r=e.display,o=e.options.lineNumbers,s=r.lineDiv,a=s.firstChild,l=r.view,c=r.viewFrom,u=0;u<l.length;u++){var d=l[u];if(d.hidden);else if(d.node&&d.node.parentNode==s){for(;a!=d.node;)a=i(a);var h=o&&null!=t&&c>=t&&d.lineNumber;d.changes&&(Lo(d.changes,"gutter")>-1&&(h=!1),O(e,d,c,n)),h&&(zo(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(_(e.options,c)))),a=d.node.nextSibling}else{var f=H(e,d,c,n);s.insertBefore(f,a)}c+=d.size}for(;a;)a=i(a)}function O(e,t,n,i){for(var r=0;r<t.changes.length;r++){var o=t.changes[r];"text"==o?P(e,t):"gutter"==o?B(e,t,n,i):"class"==o?j(t):"widget"==o&&U(e,t,i)}t.changes=null}function N(e){return e.node==e.text&&(e.node=Ho("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),ys&&8>ws&&(e.node.style.zIndex=2)),e.node}function $(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var n=N(e);e.background=n.insertBefore(Ho("div",null,t),n.firstChild)}}function D(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Dr(e,t)}function P(e,t){var n=t.text.className,i=D(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,j(t)):n&&(t.text.className=n)}function j(e){$(e),e.line.wrapClass?N(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function B(e,t,n,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var r=N(t);t.gutterBackground=Ho("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),r.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var r=N(t),s=t.gutter=Ho("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(e.display.input.setUneditable(s),r.insertBefore(s,t.text),t.line.gutterClass&&(s.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=s.appendChild(Ho("div",_(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var a=0;a<e.options.gutters.length;++a){var l=e.options.gutters[a],c=o.hasOwnProperty(l)&&o[l];c&&s.appendChild(Ho("div",[c],"CodeMirror-gutter-elt","left: "+i.gutterLeft[l]+"px; width: "+i.gutterWidth[l]+"px"))}}}function U(e,t,n){t.alignable&&(t.alignable=null);for(var i,r=t.node.firstChild;r;r=i){var i=r.nextSibling;"CodeMirror-linewidget"==r.className&&t.node.removeChild(r)}z(e,t,n)}function H(e,t,n,i){var r=D(e,t);return t.text=t.node=r.pre,r.bgClass&&(t.bgClass=r.bgClass),r.textClass&&(t.textClass=r.textClass),j(t),B(e,t,n,i),z(e,t,i),t.node}function z(e,t,n){if(q(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)q(e,t.rest[i],t,n,!1)}function q(e,t,n,i,r){if(t.widgets)for(var o=N(n),s=0,a=t.widgets;s<a.length;++s){var l=a[s],c=Ho("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),W(l,c,n,i),e.display.input.setUneditable(c),r&&l.above?o.insertBefore(c,n.gutter||n.text):o.appendChild(c),Co(l,"redraw")}}function W(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var r=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(r-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=r+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function K(e){return $s(e.line,e.ch)}function G(e,t){return Ds(e,t)<0?t:e}function Y(e,t){return Ds(e,t)<0?e:t}function Q(e){e.state.focused||(e.display.input.focus(),vi(e))}function J(e,t,n,i,r){var o=e.doc;e.display.shift=!1,i||(i=o.sel);var s=e.state.pasteIncoming||"paste"==r,a=o.splitLines(t),l=null;if(s&&i.ranges.length>1)if(Ps&&Ps.join("\n")==t){if(i.ranges.length%Ps.length==0){l=[];for(var c=0;c<Ps.length;c++)l.push(o.splitLines(Ps[c]))}}else a.length==i.ranges.length&&(l=Oo(a,function(e){return[e]}));for(var c=i.ranges.length-1;c>=0;c--){var u=i.ranges[c],d=u.from(),h=u.to();u.empty()&&(n&&n>0?d=$s(d.line,d.ch-n):e.state.overwrite&&!s&&(h=$s(h.line,Math.min(Jr(o,h.line).text.length,h.ch+Vo(a).length))));var f=e.curOp.updateInput,p={from:d,to:h,text:l?l[c%l.length]:a,origin:r||(s?"paste":e.state.cutIncoming?"cut":"+input")};Ei(e.doc,p),Co(e,"inputRead",e,p)}t&&!s&&Z(e,t),Di(e),e.curOp.updateInput=f,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function X(e,t){var n=e.clipboardData&&e.clipboardData.getData("text/plain");return n?(e.preventDefault(),t.isReadOnly()||t.options.disableInput||An(t,function(){J(t,n,0,null,"paste")}),!0):void 0}function Z(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var r=n.ranges[i];if(!(r.head.ch>100||i&&n.ranges[i-1].head.line==r.head.line)){var o=e.getModeAt(r.head),s=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(t.indexOf(o.electricChars.charAt(a))>-1){s=ji(e,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Jr(e.doc,r.head.line).text.slice(0,r.head.ch))&&(s=ji(e,r.head.line,"smart"));s&&Co(e,"electricInput",e,r.head.line)}}}function et(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var r=e.doc.sel.ranges[i].head.line,o={anchor:$s(r,0),head:$s(r+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function tt(e){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck","false")}function nt(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Mo,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function it(){var e=Ho("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),t=Ho("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return xs?e.style.width="1000px":e.setAttribute("wrap","off"),Rs&&(e.style.border="1px solid black"),tt(e),t}function rt(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Mo,this.gracePeriod=!1}function ot(e,t){var n=Zt(e,t.line);if(!n||n.hidden)return null;var i=Jr(e.doc,t.line),r=Qt(n,i,t.line),o=ro(i),s="left";if(o){var a=us(o,t.ch);s=a%2?"right":"left"}var l=nn(r.map,t.ch,s);return l.offset="right"==l.collapse?l.end:l.start,l}function st(e,t){return t&&(e.bad=!0),e}function at(e,t,n){var i;if(t==e.display.lineDiv){if(i=e.display.lineDiv.childNodes[n],!i)return st(e.clipPos($s(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var r=0;r<e.display.view.length;r++){var o=e.display.view[r];if(o.node==i)return lt(o,t,n)}}function lt(e,t,n){function i(t,n,i){for(var r=-1;r<(u?u.length:0);r++)for(var o=0>r?c.map:u[r],s=0;s<o.length;s+=3){var a=o[s+2];if(a==t||a==n){var l=to(0>r?e.line:e.rest[r]),d=o[s]+i;return(0>i||a!=t)&&(d=o[s+(i?1:0)]),$s(l,d)}}}var r=e.text.firstChild,o=!1;if(!t||!Ka(r,t))return st($s(to(e.line),0),!0);if(t==r&&(o=!0,t=r.childNodes[n],n=0,!t)){var s=e.rest?Vo(e.rest):e.line;return st($s(to(s),s.text.length),o)}var a=3==t.nodeType?t:null,l=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,n&&(n=a.nodeValue.length));l.parentNode!=r;)l=l.parentNode;var c=e.measure,u=c.maps,d=i(a,l,n);if(d)return st(d,o);for(var h=l.nextSibling,f=a?a.nodeValue.length-n:0;h;h=h.nextSibling){if(d=i(h,h.firstChild,0))return st($s(d.line,d.ch-f),o);f+=h.textContent.length}for(var p=l.previousSibling,f=n;p;p=p.previousSibling){if(d=i(p,p.firstChild,-1))return st($s(d.line,d.ch+f),o);f+=h.textContent.length}}function ct(e,t,n,i,r){function o(e){return function(t){return t.id==e}}function s(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(null!=n)return""==n&&(n=t.textContent.replace(/​/g,"")),void(a+=n);var u,d=t.getAttribute("cm-marker");if(d){var h=e.findMarks($s(i,0),$s(r+1,0),o(+d));return void(h.length&&(u=h[0].find())&&(a+=Xr(e.doc,u.from,u.to).join(c)))}if("false"==t.getAttribute("contenteditable"))return;for(var f=0;f<t.childNodes.length;f++)s(t.childNodes[f]);/^(pre|div|p)$/i.test(t.nodeName)&&(l=!0)}else if(3==t.nodeType){var p=t.nodeValue;if(!p)return;l&&(a+=c,l=!1),a+=p}}for(var a="",l=!1,c=e.doc.lineSeparator();s(t),t!=n;)t=t.nextSibling;return a}function ut(e,t){this.ranges=e,this.primIndex=t}function dt(e,t){this.anchor=e,this.head=t}function ht(e,t){var n=e[t];e.sort(function(e,t){return Ds(e.from(),t.from())}),t=Lo(e,n);for(var i=1;i<e.length;i++){var r=e[i],o=e[i-1];if(Ds(o.to(),r.from())>=0){var s=Y(o.from(),r.from()),a=G(o.to(),r.to()),l=o.empty()?r.from()==r.head:o.from()==o.head;t>=i&&--t,e.splice(--i,2,new dt(l?a:s,l?s:a))}}return new ut(e,t)}function ft(e,t){return new ut([new dt(e,t||e)],0)}function pt(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function mt(e,t){if(t.line<e.first)return $s(e.first,0);var n=e.first+e.size-1;return t.line>n?$s(n,Jr(e,n).text.length):gt(t,Jr(e,t.line).text.length)}function gt(e,t){var n=e.ch;return null==n||n>t?$s(e.line,t):0>n?$s(e.line,0):e}function vt(e,t){return t>=e.first&&t<e.first+e.size}function bt(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=mt(e,t[i]);return n}function yt(e,t,n,i){if(e.cm&&e.cm.display.shift||e.extend){var r=t.anchor;if(i){var o=Ds(n,r)<0;o!=Ds(i,r)<0?(r=n,n=i):o!=Ds(n,i)<0&&(n=i)}return new dt(r,n)}return new dt(i||n,n)}function wt(e,t,n,i){Et(e,new ut([yt(e,e.sel.primary(),t,n)],0),i)}function xt(e,t,n){for(var i=[],r=0;r<e.sel.ranges.length;r++)i[r]=yt(e,e.sel.ranges[r],t[r],null);var o=ht(i,e.sel.primIndex);Et(e,o,n)}function kt(e,t,n,i){var r=e.sel.ranges.slice(0);r[t]=n,Et(e,ht(r,e.sel.primIndex),i)}function _t(e,t,n,i){Et(e,ft(t,n),i)}function St(e,t,n){var i={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new dt(mt(e,t[n].anchor),mt(e,t[n].head))},origin:n&&n.origin};return Fa(e,"beforeSelectionChange",e,i),e.cm&&Fa(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?ht(i.ranges,i.ranges.length-1):t}function Ct(e,t,n){var i=e.history.done,r=Vo(i);r&&r.ranges?(i[i.length-1]=t,It(e,t,n)):Et(e,t,n)}function Et(e,t,n){It(e,t,n),ho(e,e.sel,e.cm?e.cm.curOp.id:0/0,n)}function It(e,t,n){(To(e,"beforeSelectionChange")||e.cm&&To(e.cm,"beforeSelectionChange"))&&(t=St(e,t,n));var i=n&&n.bias||(Ds(t.primary().head,e.sel.primary().head)<0?-1:1);Rt(e,At(e,t,i,!0)),n&&n.scroll===!1||!e.cm||Di(e.cm)}function Rt(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,Ro(e.cm)),Co(e,"cursorActivity",e))}function Tt(e){Rt(e,At(e,e.sel,null,!1),Na)}function At(e,t,n,i){for(var r,o=0;o<t.ranges.length;o++){var s=t.ranges[o],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=Ft(e,s.anchor,a&&a.anchor,n,i),c=Ft(e,s.head,a&&a.head,n,i);(r||l!=s.anchor||c!=s.head)&&(r||(r=t.ranges.slice(0,o)),r[o]=new dt(l,c))}return r?ht(r,t.primIndex):t}function Mt(e,t,n,i,r){var o=Jr(e,t.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var a=o.markedSpans[s],l=a.marker;if((null==a.from||(l.inclusiveLeft?a.from<=t.ch:a.from<t.ch))&&(null==a.to||(l.inclusiveRight?a.to>=t.ch:a.to>t.ch))){if(r&&(Fa(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(!l.atomic)continue;if(n){var c,u=l.find(0>i?1:-1);if((0>i?l.inclusiveRight:l.inclusiveLeft)&&(u=Vt(e,u,-i,o)),u&&u.line==t.line&&(c=Ds(u,n))&&(0>i?0>c:c>0))return Mt(e,u,t,i,r)}var d=l.find(0>i?-1:1);return(0>i?l.inclusiveLeft:l.inclusiveRight)&&(d=Vt(e,d,i,o)),d?Mt(e,d,t,i,r):null}}return t}function Ft(e,t,n,i,r){var o=i||1,s=Mt(e,t,n,o,r)||!r&&Mt(e,t,n,o,!0)||Mt(e,t,n,-o,r)||!r&&Mt(e,t,n,-o,!0);return s?s:(e.cantEdit=!0,$s(e.first,0))}function Vt(e,t,n,i){return 0>n&&0==t.ch?t.line>e.first?mt(e,$s(t.line-1)):null:n>0&&t.ch==(i||Jr(e,t.line)).text.length?t.line<e.first+e.size-1?$s(t.line+1,0):null:new $s(t.line,t.ch+n)}function Lt(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Ot(e,t){for(var n=e.doc,i={},r=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++)if(t!==!1||s!=n.sel.primIndex){var a=n.sel.ranges[s],l=a.empty();(l||e.options.showCursorWhenSelecting)&&Nt(e,a.head,r),l||$t(e,a,o)}return i}function Nt(e,t,n){var i=pn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),r=n.appendChild(Ho("div"," ","CodeMirror-cursor"));if(r.style.left=i.left+"px",r.style.top=i.top+"px",r.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",i.other){var o=n.appendChild(Ho("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=i.other.left+"px",o.style.top=i.other.top+"px",o.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function $t(e,t,n){function i(e,t,n,i){0>t&&(t=0),t=Math.round(t),i=Math.round(i),a.appendChild(Ho("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==n?u-e:n)+"px; height: "+(i-t)+"px"))}function r(t,n,r){function o(n,i){return fn(e,$s(t,n),"div",d,i)}var a,l,d=Jr(s,t),h=d.text.length;return ts(ro(d),n||0,null==r?h:r,function(e,t,s){var d,f,p,m=o(e,"left");if(e==t)d=m,f=p=m.left;else{if(d=o(t-1,"right"),"rtl"==s){var g=m;m=d,d=g}f=m.left,p=d.right}null==n&&0==e&&(f=c),d.top-m.top>3&&(i(f,m.top,null,m.bottom),f=c,m.bottom<d.top&&i(f,m.bottom,null,d.top)),null==r&&t==h&&(p=u),(!a||m.top<a.top||m.top==a.top&&m.left<a.left)&&(a=m),(!l||d.bottom>l.bottom||d.bottom==l.bottom&&d.right>l.right)&&(l=d),c+1>f&&(f=c),i(f,d.top,p-f,d.bottom)}),{start:a,end:l}}var o=e.display,s=e.doc,a=document.createDocumentFragment(),l=qt(e.display),c=l.left,u=Math.max(o.sizerWidth,Kt(e)-o.sizer.offsetLeft)-l.right,d=t.from(),h=t.to();if(d.line==h.line)r(d.line,d.ch,h.ch);else{var f=Jr(s,d.line),p=Jr(s,h.line),m=br(f)==br(p),g=r(d.line,d.ch,m?f.text.length+1:null).end,v=r(h.line,m?0:null,h.ch).start;m&&(g.top<v.top-2?(i(g.right,g.top,null,g.bottom),i(c,v.top,v.left,v.bottom)):i(g.right,g.top,v.left-g.right,g.bottom)),g.bottom<v.top&&i(c,g.bottom,null,v.top)}n.appendChild(a)}function Dt(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Pt(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,Po(jt,e))}function jt(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=aa(t.mode,Ut(e,t.frontier)),r=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(t.frontier>=e.display.viewFrom){var s=o.styles,a=o.text.length>e.options.maxHighlightLength,l=Lr(e,o,a?aa(t.mode,i):i,!0);o.styles=l.styles;var c=o.styleClasses,u=l.classes;u?o.styleClasses=u:c&&(o.styleClasses=null);for(var d=!s||s.length!=o.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),h=0;!d&&h<s.length;++h)d=s[h]!=o.styles[h];d&&r.push(t.frontier),o.stateAfter=a?i:aa(t.mode,i)}else o.text.length<=e.options.maxHighlightLength&&Nr(e,o.text,i),o.stateAfter=t.frontier%5==0?aa(t.mode,i):null;return++t.frontier,+new Date>n?(Pt(e,e.options.workDelay),!0):void 0}),r.length&&An(e,function(){for(var t=0;t<r.length;t++)$n(e,r[t],"text")})}}function Bt(e,t,n){for(var i,r,o=e.doc,s=n?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>s;--a){if(a<=o.first)return o.first;var l=Jr(o,a-1);if(l.stateAfter&&(!n||a<=o.frontier))return a;var c=Pa(l.text,null,e.options.tabSize);(null==r||i>c)&&(r=a-1,i=c)}return r}function Ut(e,t,n){var i=e.doc,r=e.display;if(!i.mode.startState)return!0;var o=Bt(e,t,n),s=o>i.first&&Jr(i,o-1).stateAfter;return s=s?aa(i.mode,s):la(i.mode),i.iter(o,t,function(n){Nr(e,n.text,s);var a=o==t-1||o%5==0||o>=r.viewFrom&&o<r.viewTo;n.stateAfter=a?aa(i.mode,s):null,++o}),n&&(i.frontier=o),s}function Ht(e){return e.lineSpace.offsetTop}function zt(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function qt(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=qo(e.measure,Ho("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(e.cachedPaddingH=i),i}function Wt(e){return La-e.display.nativeBarWidth}function Kt(e){return e.display.scroller.clientWidth-Wt(e)-e.display.barWidth}function Gt(e){return e.display.scroller.clientHeight-Wt(e)-e.display.barHeight}function Yt(e,t,n){var i=e.options.lineWrapping,r=i&&Kt(e);if(!t.measure.heights||i&&t.measure.width!=r){var o=t.measure.heights=[];if(i){t.measure.width=r;for(var s=t.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],c=s[a+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}function Qt(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var i=0;i<e.rest.length;i++)if(to(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Jt(e,t){t=br(t);var n=to(t),i=e.display.externalMeasured=new Ln(e.doc,t,n);i.lineN=n;var r=i.built=Dr(e,i);return i.text=r.pre,qo(e.display.lineMeasure,r.pre),i}function Xt(e,t,n,i){return tn(e,en(e,t),n,i)}function Zt(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Pn(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function en(e,t){var n=to(t),i=Zt(e,n);i&&!i.text?i=null:i&&i.changes&&(O(e,i,n,V(e)),e.curOp.forceUpdate=!0),i||(i=Jt(e,t));var r=Qt(i,t,n);return{line:t,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function tn(e,t,n,i,r){t.before&&(n=-1);var o,s=n+(i||"");return t.cache.hasOwnProperty(s)?o=t.cache[s]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Yt(e,t.view,t.rect),t.hasHeights=!0),o=rn(e,t,n,i),o.bogus||(t.cache[s]=o)),{left:o.left,right:o.right,top:r?o.rtop:o.top,bottom:r?o.rbottom:o.bottom}}function nn(e,t,n){for(var i,r,o,s,a=0;a<e.length;a+=3){var l=e[a],c=e[a+1];if(l>t?(r=0,o=1,s="left"):c>t?(r=t-l,o=r+1):(a==e.length-3||t==c&&e[a+3]>t)&&(o=c-l,r=o-1,t>=c&&(s="right")),null!=r){if(i=e[a+2],l==c&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==r)for(;a&&e[a-2]==e[a-3]&&e[a-1].insertLeft;)i=e[(a-=3)+2],s="left";if("right"==n&&r==c-l)for(;a<e.length-3&&e[a+3]==e[a+4]&&!e[a+5].insertLeft;)i=e[(a+=3)+2],s="right";break}}return{node:i,start:r,end:o,collapse:s,coverStart:l,coverEnd:c}}function rn(e,t,n,i){var r,o=nn(t.map,n,i),s=o.node,a=o.start,l=o.end,c=o.collapse;if(3==s.nodeType){for(var u=0;4>u;u++){for(;a&&Uo(t.line.text.charAt(o.coverStart+a));)--a;for(;o.coverStart+l<o.coverEnd&&Uo(t.line.text.charAt(o.coverStart+l));)++l;if(ys&&9>ws&&0==a&&l==o.coverEnd-o.coverStart)r=s.parentNode.getBoundingClientRect();else if(ys&&e.options.lineWrapping){var d=Ha(s,a,l).getClientRects();r=d.length?d["right"==i?d.length-1:0]:Hs}else r=Ha(s,a,l).getBoundingClientRect()||Hs;if(r.left||r.right||0==a)break;l=a,a-=1,c="right"}ys&&11>ws&&(r=on(e.display.measure,r))}else{a>0&&(c=i="right");var d;r=e.options.lineWrapping&&(d=s.getClientRects()).length>1?d["right"==i?d.length-1:0]:s.getBoundingClientRect()}if(ys&&9>ws&&!a&&(!r||!r.left&&!r.right)){var h=s.parentNode.getClientRects()[0];r=h?{left:h.left,right:h.left+wn(e.display),top:h.top,bottom:h.bottom}:Hs}for(var f=r.top-t.rect.top,p=r.bottom-t.rect.top,m=(f+p)/2,g=t.view.measure.heights,u=0;u<g.length-1&&!(m<g[u]);u++);var v=u?g[u-1]:0,b=g[u],y={left:("right"==c?r.right:r.left)-t.rect.left,right:("left"==c?r.left:r.right)-t.rect.left,top:v,bottom:b};return r.left||r.right||(y.bogus=!0),e.options.singleCursorHeightPerLine||(y.rtop=f,y.rbottom=p),y}function on(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!es(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*i,bottom:t.bottom*i}}function sn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function an(e){e.display.externalMeasure=null,zo(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)sn(e.display.view[t])}function ln(e){an(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function cn(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function un(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function dn(e,t,n,i){if(t.widgets)for(var r=0;r<t.widgets.length;++r)if(t.widgets[r].above){var o=Cr(t.widgets[r]);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var s=io(t);if("local"==i?s+=Ht(e.display):s-=e.display.viewOffset,"page"==i||"window"==i){var a=e.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==i?0:un());var l=a.left+("window"==i?0:cn());n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function hn(e,t,n){if("div"==n)return t;var i=t.left,r=t.top;if("page"==n)i-=cn(),r-=un();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();i+=o.left,r+=o.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:r-s.top}}function fn(e,t,n,i,r){return i||(i=Jr(e.doc,t.line)),dn(e,i,Xt(e,i,t.ch,r),n)}function pn(e,t,n,i,r,o){function s(t,s){var a=tn(e,r,t,s?"right":"left",o);return s?a.left=a.right:a.right=a.left,dn(e,i,a,n)}function a(e,t){var n=l[t],i=n.level%2;return e==ns(n)&&t&&n.level<l[t-1].level?(n=l[--t],e=is(n)-(n.level%2?0:1),i=!0):e==is(n)&&t<l.length-1&&n.level<l[t+1].level&&(n=l[++t],e=ns(n)-n.level%2,i=!1),i&&e==n.to&&e>n.from?s(e-1):s(e,i)}i=i||Jr(e.doc,t.line),r||(r=en(e,i));var l=ro(i),c=t.ch;if(!l)return s(c);var u=us(l,c),d=a(c,u);return null!=ol&&(d.other=a(c,ol)),d}function mn(e,t){var n=0,t=mt(e.doc,t);e.options.lineWrapping||(n=wn(e.display)*t.ch);var i=Jr(e.doc,t.line),r=io(i)+Ht(e.display);return{left:n,right:n,top:r,bottom:r+i.height}}function gn(e,t,n,i){var r=$s(e,t);return r.xRel=i,n&&(r.outside=!0),r}function vn(e,t,n){var i=e.doc;if(n+=e.display.viewOffset,0>n)return gn(i.first,0,!0,-1);var r=no(i,n),o=i.first+i.size-1;if(r>o)return gn(i.first+i.size-1,Jr(i,o).text.length,!0,1);0>t&&(t=0);for(var s=Jr(i,r);;){var a=bn(e,s,r,t,n),l=gr(s),c=l&&l.find(0,!0);if(!l||!(a.ch>c.from.ch||a.ch==c.from.ch&&a.xRel>0))return a;r=to(s=c.to.line)}}function bn(e,t,n,i,r){function o(i){var r=pn(e,$s(n,i),"line",t,c);return a=!0,s>r.bottom?r.left-l:s<r.top?r.left+l:(a=!1,r.left)}var s=r-io(t),a=!1,l=2*e.display.wrapper.clientWidth,c=en(e,t),u=ro(t),d=t.text.length,h=rs(t),f=os(t),p=o(h),m=a,g=o(f),v=a;if(i>g)return gn(n,f,v,1);for(;;){if(u?f==h||f==hs(t,h,1):1>=f-h){for(var b=p>i||g-i>=i-p?h:f,y=i-(b==h?p:g);Uo(t.text.charAt(b));)++b;var w=gn(n,b,b==h?m:v,-1>y?-1:y>1?1:0);return w}var x=Math.ceil(d/2),k=h+x;if(u){k=h;for(var _=0;x>_;++_)k=hs(t,k,1)}var S=o(k);S>i?(f=k,g=S,(v=a)&&(g+=1e3),d=x):(h=k,p=S,m=a,d-=x)}}function yn(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==js){js=Ho("pre");for(var t=0;49>t;++t)js.appendChild(document.createTextNode("x")),js.appendChild(Ho("br"));js.appendChild(document.createTextNode("x"))}qo(e.measure,js);var n=js.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),zo(e.measure),n||1}function wn(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=Ho("span","xxxxxxxxxx"),n=Ho("pre",[t]);qo(e.measure,n);var i=t.getBoundingClientRect(),r=(i.right-i.left)/10;return r>2&&(e.cachedCharWidth=r),r||10}function xn(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++qs},zs?zs.ops.push(e.curOp):e.curOp.ownsGroup=zs={ops:[e.curOp],delayedCallbacks:[]}}function kn(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var i=0;i<e.ops.length;i++){var r=e.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<t.length)}function _n(e){var t=e.curOp,n=t.ownsGroup;if(n)try{kn(n)}finally{zs=null;for(var i=0;i<n.ops.length;i++)n.ops[i].cm.curOp=null;Sn(n)}}function Sn(e){for(var t=e.ops,n=0;n<t.length;n++)Cn(t[n]);for(var n=0;n<t.length;n++)En(t[n]);for(var n=0;n<t.length;n++)In(t[n]);for(var n=0;n<t.length;n++)Rn(t[n]);for(var n=0;n<t.length;n++)Tn(t[n])}function Cn(e){var t=e.cm,n=t.display;E(t),e.updateMaxLine&&h(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new C(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function En(e){e.updatedDisplay=e.mustUpdate&&I(e.cm,e.update)}function In(e){var t=e.cm,n=t.display;e.updatedDisplay&&M(t),e.barMeasure=p(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Xt(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Wt(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Kt(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Rn(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&oi(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.preparedSelection&&t.display.input.showSelection(e.preparedSelection),e.updatedDisplay&&A(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&b(t,e.barMeasure),e.selectionChanged&&Dt(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),!e.focus||e.focus!=Wo()||document.hasFocus&&!document.hasFocus()||Q(e.cm)}function Tn(e){var t=e.cm,n=t.display,i=t.doc;if(e.updatedDisplay&&R(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null==e.scrollTop||n.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(i.scrollTop=Math.max(0,Math.min(n.scroller.scrollHeight-n.scroller.clientHeight,e.scrollTop)),n.scrollbars.setScrollTop(i.scrollTop),n.scroller.scrollTop=i.scrollTop),null==e.scrollLeft||n.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(i.scrollLeft=Math.max(0,Math.min(n.scroller.scrollWidth-Kt(t),e.scrollLeft)),n.scrollbars.setScrollLeft(i.scrollLeft),n.scroller.scrollLeft=i.scrollLeft,x(t)),e.scrollToPos){var r=Li(t,mt(i,e.scrollToPos.from),mt(i,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&Vi(t,r)}var o=e.maybeHiddenMarkers,s=e.maybeUnhiddenMarkers;if(o)for(var a=0;a<o.length;++a)o[a].lines.length||Fa(o[a],"hide");if(s)for(var a=0;a<s.length;++a)s[a].lines.length&&Fa(s[a],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Fa(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function An(e,t){if(e.curOp)return t();xn(e);try{return t()}finally{_n(e)}}function Mn(e,t){return function(){if(e.curOp)return t.apply(e,arguments);xn(e);try{return t.apply(e,arguments)}finally{_n(e)}}}function Fn(e){return function(){if(this.curOp)return e.apply(this,arguments);xn(this);try{return e.apply(this,arguments)}finally{_n(this)}}}function Vn(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);xn(t);try{return e.apply(this,arguments)}finally{_n(t)}}}function Ln(e,t,n){this.line=t,this.rest=yr(t),this.size=this.rest?to(Vo(this.rest))-n+1:1,this.node=this.text=null,this.hidden=kr(e,t)}function On(e,t,n){for(var i,r=[],o=t;n>o;o=i){var s=new Ln(e.doc,Jr(e.doc,o),o);i=o+s.size,r.push(s)}return r}function Nn(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var r=e.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>t)&&(r.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=r.viewTo)Ns&&wr(e.doc,t)<r.viewTo&&Dn(e);else if(n<=r.viewFrom)Ns&&xr(e.doc,n+i)>r.viewFrom?Dn(e):(r.viewFrom+=i,r.viewTo+=i);else if(t<=r.viewFrom&&n>=r.viewTo)Dn(e);else if(t<=r.viewFrom){var o=jn(e,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):Dn(e)}else if(n>=r.viewTo){var o=jn(e,t,t,-1);o?(r.view=r.view.slice(0,o.index),r.viewTo=o.lineN):Dn(e)}else{var s=jn(e,t,t,-1),a=jn(e,n,n+i,1);s&&a?(r.view=r.view.slice(0,s.index).concat(On(e,s.lineN,a.lineN)).concat(r.view.slice(a.index)),r.viewTo+=i):Dn(e)}var l=r.externalMeasured;l&&(n<l.lineN?l.lineN+=i:t<l.lineN+l.size&&(r.externalMeasured=null))}function $n(e,t,n){e.curOp.viewChanged=!0;var i=e.display,r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var o=i.view[Pn(e,t)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==Lo(s,n)&&s.push(n)}}}function Dn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Pn(e,t){if(t>=e.display.viewTo)return null;
if(t-=e.display.viewFrom,0>t)return null;for(var n=e.display.view,i=0;i<n.length;i++)if(t-=n[i].size,0>t)return i}function jn(e,t,n,i){var r,o=Pn(e,t),s=e.display.view;if(!Ns||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var a=0,l=e.display.viewFrom;o>a;a++)l+=s[a].size;if(l!=t){if(i>0){if(o==s.length-1)return null;r=l+s[o].size-t,o++}else r=l-t;t+=r,n+=r}for(;wr(e.doc,n)!=n;){if(o==(0>i?0:s.length-1))return null;n+=i*s[o-(0>i?1:0)].size,o+=i}return{index:o,lineN:n}}function Bn(e,t,n){var i=e.display,r=i.view;0==r.length||t>=i.viewTo||n<=i.viewFrom?(i.view=On(e,t,n),i.viewFrom=t):(i.viewFrom>t?i.view=On(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(Pn(e,t))),i.viewFrom=t,i.viewTo<n?i.view=i.view.concat(On(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,Pn(e,n)))),i.viewTo=n}function Un(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var r=t[i];r.hidden||r.node&&!r.changes||++n}return n}function Hn(e){function t(){r.activeTouch&&(o=setTimeout(function(){r.activeTouch=null},1e3),s=r.activeTouch,s.end=+new Date)}function n(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function i(e,t){if(null==t.left)return!0;var n=t.left-e.left,i=t.top-e.top;return n*n+i*i>400}var r=e.display;Ta(r.scroller,"mousedown",Mn(e,Gn)),ys&&11>ws?Ta(r.scroller,"dblclick",Mn(e,function(t){if(!Io(e,t)){var n=Kn(e,t);if(n&&!Zn(e,t)&&!Wn(e.display,t)){Ea(t);var i=e.findWordAt(n);wt(e.doc,i.anchor,i.head)}}})):Ta(r.scroller,"dblclick",function(t){Io(e,t)||Ea(t)}),Ls||Ta(r.scroller,"contextmenu",function(t){yi(e,t)});var o,s={end:0};Ta(r.scroller,"touchstart",function(t){if(!Io(e,t)&&!n(t)){clearTimeout(o);var i=+new Date;r.activeTouch={start:i,moved:!1,prev:i-s.end<=300?s:null},1==t.touches.length&&(r.activeTouch.left=t.touches[0].pageX,r.activeTouch.top=t.touches[0].pageY)}}),Ta(r.scroller,"touchmove",function(){r.activeTouch&&(r.activeTouch.moved=!0)}),Ta(r.scroller,"touchend",function(n){var o=r.activeTouch;if(o&&!Wn(r,n)&&null!=o.left&&!o.moved&&new Date-o.start<300){var s,a=e.coordsChar(r.activeTouch,"page");s=!o.prev||i(o,o.prev)?new dt(a,a):!o.prev.prev||i(o,o.prev.prev)?e.findWordAt(a):new dt($s(a.line,0),mt(e.doc,$s(a.line+1,0))),e.setSelection(s.anchor,s.head),e.focus(),Ea(n)}t()}),Ta(r.scroller,"touchcancel",t),Ta(r.scroller,"scroll",function(){r.scroller.clientHeight&&(ri(e,r.scroller.scrollTop),oi(e,r.scroller.scrollLeft,!0),Fa(e,"scroll",e))}),Ta(r.scroller,"mousewheel",function(t){si(e,t)}),Ta(r.scroller,"DOMMouseScroll",function(t){si(e,t)}),Ta(r.wrapper,"scroll",function(){r.wrapper.scrollTop=r.wrapper.scrollLeft=0}),r.dragFunctions={enter:function(t){Io(e,t)||Ra(t)},over:function(t){Io(e,t)||(ni(e,t),Ra(t))},start:function(t){ti(e,t)},drop:Mn(e,ei),leave:function(){ii(e)}};var a=r.input.getField();Ta(a,"keyup",function(t){pi.call(e,t)}),Ta(a,"keydown",Mn(e,hi)),Ta(a,"keypress",Mn(e,mi)),Ta(a,"focus",Po(vi,e)),Ta(a,"blur",Po(bi,e))}function zn(t,n,i){var r=i&&i!=e.Init;if(!n!=!r){var o=t.display.dragFunctions,s=n?Ta:Ma;s(t.display.scroller,"dragstart",o.start),s(t.display.scroller,"dragenter",o.enter),s(t.display.scroller,"dragover",o.over),s(t.display.scroller,"dragleave",o.leave),s(t.display.scroller,"drop",o.drop)}}function qn(e){var t=e.display;(t.lastWrapHeight!=t.wrapper.clientHeight||t.lastWrapWidth!=t.wrapper.clientWidth)&&(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function Wn(e,t){for(var n=ko(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Kn(e,t,n,i){var r=e.display;if(!n&&"true"==ko(t).getAttribute("cm-not-content"))return null;var o,s,a=r.lineSpace.getBoundingClientRect();try{o=t.clientX-a.left,s=t.clientY-a.top}catch(t){return null}var l,c=vn(e,o,s);if(i&&1==c.xRel&&(l=Jr(e.doc,c.line).text).length==c.ch){var u=Pa(l,l.length,e.options.tabSize)-l.length;c=$s(c.line,Math.max(0,Math.round((o-qt(e.display).left)/wn(e.display))-u))}return c}function Gn(e){var t=this,n=t.display;if(!(Io(t,e)||n.activeTouch&&n.input.supportsTouch())){if(n.shift=e.shiftKey,Wn(n,e))return void(xs||(n.scroller.draggable=!1,setTimeout(function(){n.scroller.draggable=!0},100)));if(!Zn(t,e)){var i=Kn(t,e);switch(window.focus(),_o(e)){case 1:t.state.selectingText?t.state.selectingText(e):i?Yn(t,e,i):ko(e)==n.scroller&&Ea(e);break;case 2:xs&&(t.state.lastMiddleDown=+new Date),i&&wt(t.doc,i),setTimeout(function(){n.input.focus()},20),Ea(e);break;case 3:Ls?yi(t,e):gi(t)}}}}function Yn(e,t,n){ys?setTimeout(Po(Q,e),0):e.curOp.focus=Wo();var i,r=+new Date;Us&&Us.time>r-400&&0==Ds(Us.pos,n)?i="triple":Bs&&Bs.time>r-400&&0==Ds(Bs.pos,n)?(i="double",Us={time:r,pos:n}):(i="single",Bs={time:r,pos:n});var o,s=e.doc.sel,a=As?t.metaKey:t.ctrlKey;e.options.dragDrop&&Za&&!e.isReadOnly()&&"single"==i&&(o=s.contains(n))>-1&&(Ds((o=s.ranges[o]).from(),n)<0||n.xRel>0)&&(Ds(o.to(),n)>0||n.xRel<0)?Qn(e,t,n,a):Jn(e,t,n,i,a)}function Qn(e,t,n,i){var r=e.display,o=+new Date,s=Mn(e,function(a){xs&&(r.scroller.draggable=!1),e.state.draggingText=!1,Ma(document,"mouseup",s),Ma(r.scroller,"drop",s),Math.abs(t.clientX-a.clientX)+Math.abs(t.clientY-a.clientY)<10&&(Ea(a),!i&&+new Date-200<o&&wt(e.doc,n),xs||ys&&9==ws?setTimeout(function(){document.body.focus(),r.input.focus()},20):r.input.focus())});xs&&(r.scroller.draggable=!0),e.state.draggingText=s,r.scroller.dragDrop&&r.scroller.dragDrop(),Ta(document,"mouseup",s),Ta(r.scroller,"drop",s)}function Jn(e,t,n,i,r){function o(t){if(0!=Ds(g,t))if(g=t,"rect"==i){for(var r=[],o=e.options.tabSize,s=Pa(Jr(c,n.line).text,n.ch,o),a=Pa(Jr(c,t.line).text,t.ch,o),l=Math.min(s,a),f=Math.max(s,a),p=Math.min(n.line,t.line),m=Math.min(e.lastLine(),Math.max(n.line,t.line));m>=p;p++){var v=Jr(c,p).text,b=ja(v,l,o);l==f?r.push(new dt($s(p,b),$s(p,b))):v.length>b&&r.push(new dt($s(p,b),$s(p,ja(v,f,o))))}r.length||r.push(new dt(n,n)),Et(c,ht(h.ranges.slice(0,d).concat(r),d),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var y=u,w=y.anchor,x=t;if("single"!=i){if("double"==i)var k=e.findWordAt(t);else var k=new dt($s(t.line,0),mt(c,$s(t.line+1,0)));Ds(k.anchor,w)>0?(x=k.head,w=Y(y.from(),k.anchor)):(x=k.anchor,w=G(y.to(),k.head))}var r=h.ranges.slice(0);r[d]=new dt(mt(c,w),x),Et(c,ht(r,d),$a)}}function s(t){var n=++b,r=Kn(e,t,!0,"rect"==i);if(r)if(0!=Ds(r,g)){e.curOp.focus=Wo(),o(r);var a=w(l,c);(r.line>=a.to||r.line<a.from)&&setTimeout(Mn(e,function(){b==n&&s(t)}),150)}else{var u=t.clientY<v.top?-20:t.clientY>v.bottom?20:0;u&&setTimeout(Mn(e,function(){b==n&&(l.scroller.scrollTop+=u,s(t))}),50)}}function a(t){e.state.selectingText=!1,b=1/0,Ea(t),l.input.focus(),Ma(document,"mousemove",y),Ma(document,"mouseup",x),c.history.lastSelOrigin=null}var l=e.display,c=e.doc;Ea(t);var u,d,h=c.sel,f=h.ranges;if(r&&!t.shiftKey?(d=c.sel.contains(n),u=d>-1?f[d]:new dt(n,n)):(u=c.sel.primary(),d=c.sel.primIndex),t.altKey)i="rect",r||(u=new dt(n,n)),n=Kn(e,t,!0,!0),d=-1;else if("double"==i){var p=e.findWordAt(n);u=e.display.shift||c.extend?yt(c,u,p.anchor,p.head):p}else if("triple"==i){var m=new dt($s(n.line,0),mt(c,$s(n.line+1,0)));u=e.display.shift||c.extend?yt(c,u,m.anchor,m.head):m}else u=yt(c,u,n);r?-1==d?(d=f.length,Et(c,ht(f.concat([u]),d),{scroll:!1,origin:"*mouse"})):f.length>1&&f[d].empty()&&"single"==i&&!t.shiftKey?(Et(c,ht(f.slice(0,d).concat(f.slice(d+1)),0),{scroll:!1,origin:"*mouse"}),h=c.sel):kt(c,d,u,$a):(d=0,Et(c,new ut([u],0),$a),h=c.sel);var g=n,v=l.wrapper.getBoundingClientRect(),b=0,y=Mn(e,function(e){_o(e)?s(e):a(e)}),x=Mn(e,a);e.state.selectingText=x,Ta(document,"mousemove",y),Ta(document,"mouseup",x)}function Xn(e,t,n,i){try{var r=t.clientX,o=t.clientY}catch(t){return!1}if(r>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&Ea(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(o>a.bottom||!To(e,n))return xo(t);o-=a.top-s.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var c=s.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=r){var u=no(e.doc,o),d=e.options.gutters[l];return Fa(e,n,e,u,d,t),xo(t)}}}function Zn(e,t){return Xn(e,t,"gutterClick",!0)}function ei(e){var t=this;if(ii(t),!Io(t,e)&&!Wn(t.display,e)){Ea(e),ys&&(Ws=+new Date);var n=Kn(t,e,!0),i=e.dataTransfer.files;if(n&&!t.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),s=0,a=function(e,i){if(!t.options.allowDropFileTypes||-1!=Lo(t.options.allowDropFileTypes,e.type)){var a=new FileReader;a.onload=Mn(t,function(){var e=a.result;if(/[ --]{2}/.test(e)&&(e=""),o[i]=e,++s==r){n=mt(t.doc,n);var l={from:n,to:n,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:"paste"};Ei(t.doc,l),Ct(t.doc,ft(n,Xs(l)))}}),a.readAsText(e)}},l=0;r>l;++l)a(i[l],l);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){t.display.input.focus()},20);try{var o=e.dataTransfer.getData("Text");if(o){if(t.state.draggingText&&!(As?e.altKey:e.ctrlKey))var c=t.listSelections();if(It(t.doc,ft(n,n)),c)for(var l=0;l<c.length;++l)Fi(t.doc,"",c[l].anchor,c[l].head,"drag");t.replaceSelection(o,"around","paste"),t.display.input.focus()}}catch(e){}}}}function ti(e,t){if(ys&&(!e.state.draggingText||+new Date-Ws<100))return void Ra(t);if(!Io(e,t)&&!Wn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!Cs)){var n=Ho("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Ss&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),Ss&&n.parentNode.removeChild(n)}}function ni(e,t){var n=Kn(e,t);if(n){var i=document.createDocumentFragment();Nt(e,n,i),e.display.dragCursor||(e.display.dragCursor=Ho("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),qo(e.display.dragCursor,i)}}function ii(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function ri(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,gs||T(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),gs&&T(e),Pt(e,100))}function oi(e,t,n){(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,x(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function si(e,t){var n=Ys(t),i=n.x,r=n.y,o=e.display,s=o.scroller,a=s.scrollWidth>s.clientWidth,l=s.scrollHeight>s.clientHeight;if(i&&a||r&&l){if(r&&As&&xs)e:for(var c=t.target,u=o.view;c!=s;c=c.parentNode)for(var d=0;d<u.length;d++)if(u[d].node==c){e.display.currentWheelTarget=c;break e}if(i&&!gs&&!Ss&&null!=Gs)return r&&l&&ri(e,Math.max(0,Math.min(s.scrollTop+r*Gs,s.scrollHeight-s.clientHeight))),oi(e,Math.max(0,Math.min(s.scrollLeft+i*Gs,s.scrollWidth-s.clientWidth))),(!r||r&&l)&&Ea(t),void(o.wheelStartX=null);if(r&&null!=Gs){var h=r*Gs,f=e.doc.scrollTop,p=f+o.wrapper.clientHeight;0>h?f=Math.max(0,f+h-50):p=Math.min(e.doc.height,p+h+50),T(e,{top:f,bottom:p})}20>Ks&&(null==o.wheelStartX?(o.wheelStartX=s.scrollLeft,o.wheelStartY=s.scrollTop,o.wheelDX=i,o.wheelDY=r,setTimeout(function(){if(null!=o.wheelStartX){var e=s.scrollLeft-o.wheelStartX,t=s.scrollTop-o.wheelStartY,n=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,n&&(Gs=(Gs*Ks+n)/(Ks+1),++Ks)}},200)):(o.wheelDX+=i,o.wheelDY+=r))}}function ai(e,t,n){if("string"==typeof t&&(t=ca[t],!t))return!1;e.display.input.ensurePolled();var i=e.display.shift,r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),r=t(e)!=Oa}finally{e.display.shift=i,e.state.suppressEdits=!1}return r}function li(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var r=da(t,e.state.keyMaps[i],n,e);if(r)return r}return e.options.extraKeys&&da(t,e.options.extraKeys,n,e)||da(t,e.options.keyMap,n,e)}function ci(e,t,n,i){var r=e.state.keySeq;if(r){if(ha(t))return"handled";Qs.set(50,function(){e.state.keySeq==r&&(e.state.keySeq=null,e.display.input.reset())}),t=r+" "+t}var o=li(e,t,i);return"multi"==o&&(e.state.keySeq=t),"handled"==o&&Co(e,"keyHandled",e,t,n),("handled"==o||"multi"==o)&&(Ea(n),Dt(e)),r&&!o&&/\'$/.test(t)?(Ea(n),!0):!!o}function ui(e,t){var n=fa(t,!0);return n?t.shiftKey&&!e.state.keySeq?ci(e,"Shift-"+n,t,function(t){return ai(e,t,!0)})||ci(e,n,t,function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?ai(e,t):void 0}):ci(e,n,t,function(t){return ai(e,t)}):!1}function di(e,t,n){return ci(e,"'"+n+"'",t,function(t){return ai(e,t,!0)})}function hi(e){var t=this;if(t.curOp.focus=Wo(),!Io(t,e)){ys&&11>ws&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var i=ui(t,e);Ss&&(Js=i?n:null,!i&&88==n&&!nl&&(As?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||fi(t)}}function fi(e){function t(e){18!=e.keyCode&&e.altKey||(Qa(n,"CodeMirror-crosshair"),Ma(document,"keyup",t),Ma(document,"mouseover",t))}var n=e.display.lineDiv;Ja(n,"CodeMirror-crosshair"),Ta(document,"keyup",t),Ta(document,"mouseover",t)}function pi(e){16==e.keyCode&&(this.doc.sel.shift=!1),Io(this,e)}function mi(e){var t=this;if(!(Wn(t.display,e)||Io(t,e)||e.ctrlKey&&!e.altKey||As&&e.metaKey)){var n=e.keyCode,i=e.charCode;if(Ss&&n==Js)return Js=null,void Ea(e);if(!Ss||e.which&&!(e.which<10)||!ui(t,e)){var r=String.fromCharCode(null==i?n:i);di(t,e,r)||t.display.input.onKeyPress(e)}}}function gi(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,bi(e))},100)}function vi(e){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(Fa(e,"focus",e),e.state.focused=!0,Ja(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),xs&&setTimeout(function(){e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Dt(e))}function bi(e){e.state.delayingBlurEvent||(e.state.focused&&(Fa(e,"blur",e),e.state.focused=!1,Qa(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function yi(e,t){Wn(e.display,t)||wi(e,t)||Io(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function wi(e,t){return To(e,"gutterContextMenu")?Xn(e,t,"gutterContextMenu",!1):!1}function xi(e,t){if(Ds(e,t.from)<0)return e;if(Ds(e,t.to)<=0)return Xs(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=Xs(t).ch-t.to.ch),$s(n,i)}function ki(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var r=e.sel.ranges[i];n.push(new dt(xi(r.anchor,t),xi(r.head,t)))}return ht(n,e.sel.primIndex)}function _i(e,t,n){return e.line==t.line?$s(n.line,e.ch-t.ch+n.ch):$s(n.line+(e.line-t.line),e.ch)}function Si(e,t,n){for(var i=[],r=$s(e.first,0),o=r,s=0;s<t.length;s++){var a=t[s],l=_i(a.from,r,o),c=_i(Xs(a),r,o);if(r=a.to,o=c,"around"==n){var u=e.sel.ranges[s],d=Ds(u.head,u.anchor)<0;i[s]=new dt(d?c:l,d?l:c)}else i[s]=new dt(l,l)}return new ut(i,e.sel.primIndex)}function Ci(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return n&&(i.update=function(t,n,i,r){t&&(this.from=mt(e,t)),n&&(this.to=mt(e,n)),i&&(this.text=i),void 0!==r&&(this.origin=r)}),Fa(e,"beforeChange",e,i),e.cm&&Fa(e.cm,"beforeChange",e.cm,i),i.canceled?null:{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Ei(e,t,n){if(e.cm){if(!e.cm.curOp)return Mn(e.cm,Ei)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(To(e,"beforeChange")||e.cm&&To(e.cm,"beforeChange"))||(t=Ci(e,t,!0))){var i=Os&&!n&&lr(e,t.from,t.to);if(i)for(var r=i.length-1;r>=0;--r)Ii(e,{from:i[r].from,to:i[r].to,text:r?[""]:t.text});else Ii(e,t)}}function Ii(e,t){if(1!=t.text.length||""!=t.text[0]||0!=Ds(t.from,t.to)){var n=ki(e,t);co(e,t,n,e.cm?e.cm.curOp.id:0/0),Ai(e,t,n,or(e,t));var i=[];Yr(e,function(e,n){n||-1!=Lo(i,e.history)||(wo(e.history,t),i.push(e.history)),Ai(e,t,null,or(e,t))})}}function Ri(e,t,n){if(!e.cm||!e.cm.state.suppressEdits){for(var i,r=e.history,o=e.sel,s="undo"==t?r.done:r.undone,a="undo"==t?r.undone:r.done,l=0;l<s.length&&(i=s[l],n?!i.ranges||i.equals(e.sel):i.ranges);l++);if(l!=s.length){for(r.lastOrigin=r.lastSelOrigin=null;i=s.pop(),i.ranges;){if(fo(i,a),n&&!i.equals(e.sel))return void Et(e,i,{clearRedo:!1});o=i}var c=[];fo(o,a),a.push({changes:c,generation:r.generation}),r.generation=i.generation||++r.maxGeneration;for(var u=To(e,"beforeChange")||e.cm&&To(e.cm,"beforeChange"),l=i.changes.length-1;l>=0;--l){var d=i.changes[l];if(d.origin=t,u&&!Ci(e,d,!1))return void(s.length=0);c.push(so(e,d));var h=l?ki(e,d):Vo(s);Ai(e,d,h,ar(e,d)),!l&&e.cm&&e.cm.scrollIntoView({from:d.from,to:Xs(d)});var f=[];Yr(e,function(e,t){t||-1!=Lo(f,e.history)||(wo(e.history,d),f.push(e.history)),Ai(e,d,null,ar(e,d))})}}}}function Ti(e,t){if(0!=t&&(e.first+=t,e.sel=new ut(Oo(e.sel.ranges,function(e){return new dt($s(e.anchor.line+t,e.anchor.ch),$s(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Nn(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)$n(e.cm,i,"gutter")}}function Ai(e,t,n,i){if(e.cm&&!e.cm.curOp)return Mn(e.cm,Ai)(e,t,n,i);if(t.to.line<e.first)return void Ti(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);Ti(e,r),t={from:$s(e.first,0),to:$s(t.to.line+r,t.to.ch),text:[Vo(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:$s(o,Jr(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Xr(e,t.from,t.to),n||(n=ki(e,t)),e.cm?Mi(e.cm,t,i):Wr(e,t,i),It(e,n,Na)}}function Mi(e,t,n){var i=e.doc,r=e.display,s=t.from,a=t.to,l=!1,c=s.line;e.options.lineWrapping||(c=to(br(Jr(i,s.line))),i.iter(c,a.line+1,function(e){return e==r.maxLine?(l=!0,!0):void 0})),i.sel.contains(t.from,t.to)>-1&&Ro(e),Wr(i,t,n,o(e)),e.options.lineWrapping||(i.iter(c,s.line+t.text.length,function(e){var t=d(e);t>r.maxLineLength&&(r.maxLine=e,r.maxLineLength=t,r.maxLineChanged=!0,l=!1)}),l&&(e.curOp.updateMaxLine=!0)),i.frontier=Math.min(i.frontier,s.line),Pt(e,400);var u=t.text.length-(a.line-s.line)-1;t.full?Nn(e):s.line!=a.line||1!=t.text.length||qr(e.doc,t)?Nn(e,s.line,a.line+1,u):$n(e,s.line,"text");var h=To(e,"changes"),f=To(e,"change");if(f||h){var p={from:s,to:a,text:t.text,removed:t.removed,origin:t.origin};f&&Co(e,"change",e,p),h&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}function Fi(e,t,n,i,r){if(i||(i=n),Ds(i,n)<0){var o=i;i=n,n=o}"string"==typeof t&&(t=e.splitLines(t)),Ei(e,{from:n,to:i,text:t,origin:r})}function Vi(e,t){if(!Io(e,"scrollCursorIntoView")){var n=e.display,i=n.sizer.getBoundingClientRect(),r=null;if(t.top+i.top<0?r=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!Is){var o=Ho("div","​",null,"position: absolute; top: "+(t.top-n.viewOffset-Ht(e.display))+"px; height: "+(t.bottom-t.top+Wt(e)+n.barHeight)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(r),e.display.lineSpace.removeChild(o)}}}function Li(e,t,n,i){null==i&&(i=0);for(var r=0;5>r;r++){var o=!1,s=pn(e,t),a=n&&n!=t?pn(e,n):s,l=Ni(e,Math.min(s.left,a.left),Math.min(s.top,a.top)-i,Math.max(s.left,a.left),Math.max(s.bottom,a.bottom)+i),c=e.doc.scrollTop,u=e.doc.scrollLeft;if(null!=l.scrollTop&&(ri(e,l.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(o=!0)),null!=l.scrollLeft&&(oi(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-u)>1&&(o=!0)),!o)break}return s}function Oi(e,t,n,i,r){var o=Ni(e,t,n,i,r);null!=o.scrollTop&&ri(e,o.scrollTop),null!=o.scrollLeft&&oi(e,o.scrollLeft)}function Ni(e,t,n,i,r){var o=e.display,s=yn(e.display);0>n&&(n=0);var a=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,l=Gt(e),c={};r-n>l&&(r=n+l);var u=e.doc.height+zt(o),d=s>n,h=r>u-s;if(a>n)c.scrollTop=d?0:n;else if(r>a+l){var f=Math.min(n,(h?u:r)-l);f!=a&&(c.scrollTop=f)}var p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft,m=Kt(e)-(e.options.fixedGutter?o.gutters.offsetWidth:0),g=i-t>m;return g&&(i=t+m),10>t?c.scrollLeft=0:p>t?c.scrollLeft=Math.max(0,t-(g?0:10)):i>m+p-3&&(c.scrollLeft=i+(g?0:10)-m),c}function $i(e,t,n){(null!=t||null!=n)&&Pi(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=n&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+n)}function Di(e){Pi(e);var t=e.getCursor(),n=t,i=t;e.options.lineWrapping||(n=t.ch?$s(t.line,t.ch-1):t,i=$s(t.line,t.ch+1)),e.curOp.scrollToPos={from:n,to:i,margin:e.options.cursorScrollMargin,isCursor:!0}}function Pi(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=mn(e,t.from),i=mn(e,t.to),r=Ni(e,Math.min(n.left,i.left),Math.min(n.top,i.top)-t.margin,Math.max(n.right,i.right),Math.max(n.bottom,i.bottom)+t.margin);e.scrollTo(r.scrollLeft,r.scrollTop)}}function ji(e,t,n,i){var r,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?r=Ut(e,t):n="prev");var s=e.options.tabSize,a=Jr(o,t),l=Pa(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var c,u=a.text.match(/^\s*/)[0];if(i||/\S/.test(a.text)){if("smart"==n&&(c=o.mode.indent(r,a.text.slice(u.length),a.text),c==Oa||c>150)){if(!i)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?Pa(Jr(o,t-1).text,null,s):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var d="",h=0;if(e.options.indentWithTabs)for(var f=Math.floor(c/s);f;--f)h+=s,d+="	";if(c>h&&(d+=Fo(c-h)),d!=u)return Fi(o,d,$s(t,0),$s(t,u.length),"+input"),a.stateAfter=null,!0;for(var f=0;f<o.sel.ranges.length;f++){var p=o.sel.ranges[f];if(p.head.line==t&&p.head.ch<u.length){var h=$s(t,u.length);kt(o,f,new dt(h,h));break}}}function Bi(e,t,n,i){var r=t,o=t;return"number"==typeof t?o=Jr(e,pt(e,t)):r=to(t),null==r?null:(i(o,r)&&e.cm&&$n(e.cm,r,n),o)}function Ui(e,t){for(var n=e.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var o=t(n[r]);i.length&&Ds(o.from,Vo(i).to)<=0;){var s=i.pop();if(Ds(s.from,o.from)<0){o.from=s.from;break}}i.push(o)}An(e,function(){for(var t=i.length-1;t>=0;t--)Fi(e.doc,"",i[t].from,i[t].to,"+delete");Di(e)})}function Hi(e,t,n,i,r){function o(){var t=a+n;return t<e.first||t>=e.first+e.size?!1:(a=t,u=Jr(e,t))}function s(e){var t=(r?hs:fs)(u,l,n,!0);if(null==t){if(e||!o())return!1;l=r?(0>n?os:rs)(u):0>n?u.text.length:0}else l=t;return!0}var a=t.line,l=t.ch,c=n,u=Jr(e,a);if("char"==i)s();else if("column"==i)s(!0);else if("word"==i||"group"==i)for(var d=null,h="group"==i,f=e.cm&&e.cm.getHelper(t,"wordChars"),p=!0;!(0>n)||s(!p);p=!1){var m=u.text.charAt(l)||"\n",g=jo(m,f)?"w":h&&"\n"==m?"n":!h||/\s/.test(m)?null:"p";if(!h||p||g||(g="s"),d&&d!=g){0>n&&(n=1,s());break}if(g&&(d=g),n>0&&!s(!p))break}var v=Ft(e,$s(a,l),t,c,!0);return Ds(t,v)||(v.hitSide=!0),v}function zi(e,t,n,i){var r,o=e.doc,s=t.left;if("page"==i){var a=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);r=t.top+n*(a-(0>n?1.5:.5)*yn(e.display))}else"line"==i&&(r=n>0?t.bottom+3:t.top-3);for(;;){var l=vn(e,s,r);if(!l.outside)break;if(0>n?0>=r:r>=o.height){l.hitSide=!0;break}r+=5*n}return l}function qi(t,n,i,r){e.defaults[t]=n,i&&(ea[t]=r?function(e,t,n){n!=ta&&i(e,t,n)}:i)}function Wi(e){for(var t,n,i,r,o=e.split(/-(?!$)/),e=o[o.length-1],s=0;s<o.length-1;s++){var a=o[s];if(/^(cmd|meta|m)$/i.test(a))r=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else{if(!/^s(hift)$/i.test(a))throw new Error("Unrecognized modifier name: "+a);i=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),r&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function Ki(e){return"string"==typeof e?ua[e]:e}function Gi(e,t,n,i,r){if(i&&i.shared)return Yi(e,t,n,i,r);if(e.cm&&!e.cm.curOp)return Mn(e.cm,Gi)(e,t,n,i,r);var o=new ga(e,r),s=Ds(t,n);if(i&&Do(i,o,!1),s>0||0==s&&o.clearWhenEmpty!==!1)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=Ho("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(vr(e,t.line,t,n,o)||t.line!=n.line&&vr(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ns=!0}o.addToHistory&&co(e,{from:t,to:n,origin:"markText"},e.sel,0/0);var a,l=t.line,c=e.cm;if(e.iter(l,n.line+1,function(e){c&&o.collapsed&&!c.options.lineWrapping&&br(e)==c.display.maxLine&&(a=!0),o.collapsed&&l!=t.line&&eo(e,0),nr(e,new Zi(o,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l}),o.collapsed&&e.iter(t.line,n.line+1,function(t){kr(e,t)&&eo(t,0)}),o.clearOnEnter&&Ta(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(Os=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++ma,o.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),o.collapsed)Nn(c,t.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var u=t.line;u<=n.line;u++)$n(c,u,"text");o.atomic&&Tt(c.doc),Co(c,"markerAdded",c,o)}return o}function Yi(e,t,n,i,r){i=Do(i),i.shared=!1;var o=[Gi(e,t,n,i,r)],s=o[0],a=i.widgetNode;return Yr(e,function(e){a&&(i.widgetNode=a.cloneNode(!0)),o.push(Gi(e,mt(e,t),mt(e,n),i,r));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;s=Vo(o)}),new va(o,s)}function Qi(e){return e.findMarks($s(e.first,0),e.clipPos($s(e.lastLine())),function(e){return e.parent})}function Ji(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=i.find(),o=e.clipPos(r.from),s=e.clipPos(r.to);if(Ds(o,s)){var a=Gi(e,o,s,i.primary,i.primary.type);i.markers.push(a),a.parent=i}}}function Xi(e){for(var t=0;t<e.length;t++){var n=e[t],i=[n.primary.doc];Yr(n.primary.doc,function(e){i.push(e)});for(var r=0;r<n.markers.length;r++){var o=n.markers[r];-1==Lo(i,o.doc)&&(o.parent=null,n.markers.splice(r--,1))}}}function Zi(e,t,n){this.marker=e,this.from=t,this.to=n}function er(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function tr(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function nr(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function ir(e,t,n){if(e)for(var i,r=0;r<e.length;++r){var o=e[r],s=o.marker,a=null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t);if(a||o.from==t&&"bookmark"==s.type&&(!n||!o.marker.insertLeft)){var l=null==o.to||(s.inclusiveRight?o.to>=t:o.to>t);(i||(i=[])).push(new Zi(s,o.from,l?null:o.to))}}return i}function rr(e,t,n){if(e)for(var i,r=0;r<e.length;++r){var o=e[r],s=o.marker,a=null==o.to||(s.inclusiveRight?o.to>=t:o.to>t);if(a||o.from==t&&"bookmark"==s.type&&(!n||o.marker.insertLeft)){var l=null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t);(i||(i=[])).push(new Zi(s,l?null:o.from-t,null==o.to?null:o.to-t))}}return i}function or(e,t){if(t.full)return null;var n=vt(e,t.from.line)&&Jr(e,t.from.line).markedSpans,i=vt(e,t.to.line)&&Jr(e,t.to.line).markedSpans;if(!n&&!i)return null;var r=t.from.ch,o=t.to.ch,s=0==Ds(t.from,t.to),a=ir(n,r,s),l=rr(i,o,s),c=1==t.text.length,u=Vo(t.text).length+(c?r:0);if(a)for(var d=0;d<a.length;++d){var h=a[d];if(null==h.to){var f=er(l,h.marker);f?c&&(h.to=null==f.to?null:f.to+u):h.to=r}}if(l)for(var d=0;d<l.length;++d){var h=l[d];if(null!=h.to&&(h.to+=u),null==h.from){var f=er(a,h.marker);f||(h.from=u,c&&(a||(a=[])).push(h))}else h.from+=u,c&&(a||(a=[])).push(h)}a&&(a=sr(a)),l&&l!=a&&(l=sr(l));var p=[a];if(!c){var m,g=t.text.length-2;if(g>0&&a)for(var d=0;d<a.length;++d)null==a[d].to&&(m||(m=[])).push(new Zi(a[d].marker,null,null));for(var d=0;g>d;++d)p.push(m);p.push(l)}return p}function sr(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&n.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function ar(e,t){var n=go(e,t),i=or(e,t);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],s=i[r];if(o&&s)e:for(var a=0;a<s.length;++a){for(var l=s[a],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else s&&(n[r]=s)}return n}function lr(e,t,n){var i=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=Lo(i,n)||(i||(i=[])).push(n)}}),!i)return null;for(var r=[{from:t,to:n}],o=0;o<i.length;++o)for(var s=i[o],a=s.find(0),l=0;l<r.length;++l){var c=r[l];if(!(Ds(c.to,a.from)<0||Ds(c.from,a.to)>0)){var u=[l,1],d=Ds(c.from,a.from),h=Ds(c.to,a.to);(0>d||!s.inclusiveLeft&&!d)&&u.push({from:c.from,to:a.from}),(h>0||!s.inclusiveRight&&!h)&&u.push({from:a.to,to:c.to}),r.splice.apply(r,u),l+=u.length-1}}return r}function cr(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function ur(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function dr(e){return e.inclusiveLeft?-1:0}function hr(e){return e.inclusiveRight?1:0}function fr(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),r=t.find(),o=Ds(i.from,r.from)||dr(e)-dr(t);if(o)return-o;var s=Ds(i.to,r.to)||hr(e)-hr(t);return s?s:t.id-e.id}function pr(e,t){var n,i=Ns&&e.markedSpans;if(i)for(var r,o=0;o<i.length;++o)r=i[o],r.marker.collapsed&&null==(t?r.from:r.to)&&(!n||fr(n,r.marker)<0)&&(n=r.marker);return n}function mr(e){return pr(e,!0)}function gr(e){return pr(e,!1)}function vr(e,t,n,i,r){var o=Jr(e,t),s=Ns&&o.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var c=l.marker.find(0),u=Ds(c.from,n)||dr(l.marker)-dr(r),d=Ds(c.to,i)||hr(l.marker)-hr(r);if(!(u>=0&&0>=d||0>=u&&d>=0)&&(0>=u&&(Ds(c.to,n)>0||l.marker.inclusiveRight&&r.inclusiveLeft)||u>=0&&(Ds(c.from,i)<0||l.marker.inclusiveLeft&&r.inclusiveRight)))return!0}}}function br(e){for(var t;t=mr(e);)e=t.find(-1,!0).line;return e}function yr(e){for(var t,n;t=gr(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function wr(e,t){var n=Jr(e,t),i=br(n);return n==i?t:to(i)}function xr(e,t){if(t>e.lastLine())return t;var n,i=Jr(e,t);if(!kr(e,i))return t;for(;n=gr(i);)i=n.find(1,!0).line;return to(i)+1}function kr(e,t){var n=Ns&&t.markedSpans;if(n)for(var i,r=0;r<n.length;++r)if(i=n[r],i.marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&_r(e,t,i))return!0}}function _r(e,t,n){if(null==n.to){var i=n.marker.find(1,!0);return _r(e,i.line,er(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var r,o=0;o<t.markedSpans.length;++o)if(r=t.markedSpans[o],r.marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&_r(e,t,r))return!0}function Sr(e,t,n){io(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&$i(e,null,n)}function Cr(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Ka(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),qo(t.display.measure,Ho("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function Er(e,t,n,i){var r=new ba(e,n,i),o=e.cm;return o&&r.noHScroll&&(o.display.alignWidgets=!0),Bi(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length-1,Math.max(0,r.insertAt)),0,r),r.line=t,o&&!kr(e,t)){var i=io(t)<e.scrollTop;eo(t,t.height+Cr(r)),i&&$i(o,null,r.height),o.curOp.forceUpdate=!0}return!0}),r}function Ir(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),cr(e),ur(e,n);var r=i?i(e):1;r!=e.height&&eo(e,r)}function Rr(e){e.parent=null,cr(e)}function Tr(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);
if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[i])||(t[i]+=" "+n[2])}return e}function Ar(t,n){if(t.blankLine)return t.blankLine(n);if(t.innerMode){var i=e.innerMode(t,n);return i.mode.blankLine?i.mode.blankLine(i.state):void 0}}function Mr(t,n,i,r){for(var o=0;10>o;o++){r&&(r[0]=e.innerMode(t,i).mode);var s=t.token(n,i);if(n.pos>n.start)return s}throw new Error("Mode "+t.name+" failed to advance stream.")}function Fr(e,t,n,i){function r(e){return{start:d.start,end:d.pos,string:d.current(),type:o||null,state:e?aa(s.mode,u):u}}var o,s=e.doc,a=s.mode;t=mt(s,t);var l,c=Jr(s,t.line),u=Ut(e,t.line,n),d=new pa(c.text,e.options.tabSize);for(i&&(l=[]);(i||d.pos<t.ch)&&!d.eol();)d.start=d.pos,o=Mr(a,d,u),i&&l.push(r(!0));return i?l:r()}function Vr(e,t,n,i,r,o,s){var a=n.flattenSpans;null==a&&(a=e.options.flattenSpans);var l,c=0,u=null,d=new pa(t,e.options.tabSize),h=e.options.addModeClass&&[null];for(""==t&&Tr(Ar(n,i),o);!d.eol();){if(d.pos>e.options.maxHighlightLength?(a=!1,s&&Nr(e,t,i,d.pos),d.pos=t.length,l=null):l=Tr(Mr(n,d,i,h),o),h){var f=h[0].name;f&&(l="m-"+(l?f+" "+l:f))}if(!a||u!=l){for(;c<d.start;)c=Math.min(d.start,c+5e4),r(c,u);u=l}d.start=d.pos}for(;c<d.pos;){var p=Math.min(d.pos,c+5e4);r(p,u),c=p}}function Lr(e,t,n,i){var r=[e.state.modeGen],o={};Vr(e,t.text,e.doc.mode,n,function(e,t){r.push(e,t)},o,i);for(var s=0;s<e.state.overlays.length;++s){var a=e.state.overlays[s],l=1,c=0;Vr(e,t.text,a.mode,!0,function(e,t){for(var n=l;e>c;){var i=r[l];i>e&&r.splice(l,1,e,r[l+1],i),l+=2,c=Math.min(e,i)}if(t)if(a.opaque)r.splice(n,l-n,e,"cm-overlay "+t),l=n+2;else for(;l>n;n+=2){var o=r[n+1];r[n+1]=(o?o+" ":"")+"cm-overlay "+t}},o)}return{styles:r,classes:o.bgClass||o.textClass?o:null}}function Or(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=Ut(e,to(t)),r=Lr(e,t,t.text.length>e.options.maxHighlightLength?aa(e.doc.mode,i):i);t.stateAfter=i,t.styles=r.styles,r.classes?t.styleClasses=r.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.frontier&&e.doc.frontier++}return t.styles}function Nr(e,t,n,i){var r=e.doc.mode,o=new pa(t,e.options.tabSize);for(o.start=o.pos=i||0,""==t&&Ar(r,n);!o.eol();)Mr(r,o,n),o.start=o.pos}function $r(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?xa:wa;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Dr(e,t){var n=Ho("span",null,null,xs?"padding-right: .1px":null),i={pre:Ho("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,splitSpaces:(ys||xs)&&e.getOption("lineWrapping")};t.measure={};for(var r=0;r<=(t.rest?t.rest.length:0);r++){var o,s=r?t.rest[r-1]:t.line;i.pos=0,i.addToken=jr,Zo(e.display.measure)&&(o=ro(s))&&(i.addToken=Ur(i.addToken,o)),i.map=[];var a=t!=e.display.externalMeasured&&to(s);zr(s,i,Or(e,s,a)),s.styleClasses&&(s.styleClasses.bgClass&&(i.bgClass=Go(s.styleClasses.bgClass,i.bgClass||"")),s.styleClasses.textClass&&(i.textClass=Go(s.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(Xo(e.display.measure))),0==r?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return xs&&/\bcm-tab\b/.test(i.content.lastChild.className)&&(i.content.className="cm-tab-wrap-hack"),Fa(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=Go(i.pre.className,i.textClass||"")),i}function Pr(e){var t=Ho("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function jr(e,t,n,i,r,o,s){if(t){var a=e.splitSpaces?t.replace(/ {3,}/g,Br):t,l=e.cm.state.specialChars,c=!1;if(l.test(t))for(var u=document.createDocumentFragment(),d=0;;){l.lastIndex=d;var h=l.exec(t),f=h?h.index-d:t.length-d;if(f){var p=document.createTextNode(a.slice(d,d+f));u.appendChild(ys&&9>ws?Ho("span",[p]):p),e.map.push(e.pos,e.pos+f,p),e.col+=f,e.pos+=f}if(!h)break;if(d+=f+1,"	"==h[0]){var m=e.cm.options.tabSize,g=m-e.col%m,p=u.appendChild(Ho("span",Fo(g),"cm-tab"));p.setAttribute("role","presentation"),p.setAttribute("cm-text","	"),e.col+=g}else if("\r"==h[0]||"\n"==h[0]){var p=u.appendChild(Ho("span","\r"==h[0]?"␍":"␤","cm-invalidchar"));p.setAttribute("cm-text",h[0]),e.col+=1}else{var p=e.cm.options.specialCharPlaceholder(h[0]);p.setAttribute("cm-text",h[0]),u.appendChild(ys&&9>ws?Ho("span",[p]):p),e.col+=1}e.map.push(e.pos,e.pos+1,p),e.pos++}else{e.col+=t.length;var u=document.createTextNode(a);e.map.push(e.pos,e.pos+t.length,u),ys&&9>ws&&(c=!0),e.pos+=t.length}if(n||i||r||c||s){var v=n||"";i&&(v+=i),r&&(v+=r);var b=Ho("span",[u],v,s);return o&&(b.title=o),e.content.appendChild(b)}e.content.appendChild(u)}}function Br(e){for(var t=" ",n=0;n<e.length-2;++n)t+=n%2?" ":" ";return t+=" "}function Ur(e,t){return function(n,i,r,o,s,a,l){r=r?r+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+i.length;;){for(var d=0;d<t.length;d++){var h=t[d];if(h.to>c&&h.from<=c)break}if(h.to>=u)return e(n,i,r,o,s,a,l);e(n,i.slice(0,h.to-c),r,o,null,a,l),o=null,i=i.slice(h.to-c),c=h.to}}}function Hr(e,t,n,i){var r=!i&&n.widgetNode;r&&e.map.push(e.pos,e.pos+t,r),!i&&e.cm.display.input.needsContentAttribute&&(r||(r=e.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",n.id)),r&&(e.cm.display.input.setUneditable(r),e.content.appendChild(r)),e.pos+=t}function zr(e,t,n){var i=e.markedSpans,r=e.text,o=0;if(i)for(var s,a,l,c,u,d,h,f=r.length,p=0,m=1,g="",v=0;;){if(v==p){l=c=u=d=a="",h=null,v=1/0;for(var b,y=[],w=0;w<i.length;++w){var x=i[w],k=x.marker;"bookmark"==k.type&&x.from==p&&k.widgetNode?y.push(k):x.from<=p&&(null==x.to||x.to>p||k.collapsed&&x.to==p&&x.from==p)?(null!=x.to&&x.to!=p&&v>x.to&&(v=x.to,c=""),k.className&&(l+=" "+k.className),k.css&&(a=(a?a+";":"")+k.css),k.startStyle&&x.from==p&&(u+=" "+k.startStyle),k.endStyle&&x.to==v&&(b||(b=[])).push(k.endStyle,x.to),k.title&&!d&&(d=k.title),k.collapsed&&(!h||fr(h.marker,k)<0)&&(h=x)):x.from>p&&v>x.from&&(v=x.from)}if(b)for(var w=0;w<b.length;w+=2)b[w+1]==v&&(c+=" "+b[w]);if(!h||h.from==p)for(var w=0;w<y.length;++w)Hr(t,0,y[w]);if(h&&(h.from||0)==p){if(Hr(t,(null==h.to?f+1:h.to)-p,h.marker,null==h.from),null==h.to)return;h.to==p&&(h=!1)}}if(p>=f)break;for(var _=Math.min(f,v);;){if(g){var S=p+g.length;if(!h){var C=S>_?g.slice(0,_-p):g;t.addToken(t,C,s?s+l:l,u,p+C.length==v?c:"",d,a)}if(S>=_){g=g.slice(_-p),p=_;break}p=S,u=""}g=r.slice(o,o=n[m++]),s=$r(n[m++],t.cm.options)}}else for(var m=1;m<n.length;m+=2)t.addToken(t,r.slice(o,o=n[m]),$r(n[m+1],t.cm.options))}function qr(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Vo(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Wr(e,t,n,i){function r(e){return n?n[e]:null}function o(e,n,r){Ir(e,n,r,i),Co(e,"change",e,t)}function s(e,t){for(var n=e,o=[];t>n;++n)o.push(new ya(c[n],r(n),i));return o}var a=t.from,l=t.to,c=t.text,u=Jr(e,a.line),d=Jr(e,l.line),h=Vo(c),f=r(c.length-1),p=l.line-a.line;if(t.full)e.insert(0,s(0,c.length)),e.remove(c.length,e.size-c.length);else if(qr(e,t)){var m=s(0,c.length-1);o(d,d.text,f),p&&e.remove(a.line,p),m.length&&e.insert(a.line,m)}else if(u==d)if(1==c.length)o(u,u.text.slice(0,a.ch)+h+u.text.slice(l.ch),f);else{var m=s(1,c.length-1);m.push(new ya(h+u.text.slice(l.ch),f,i)),o(u,u.text.slice(0,a.ch)+c[0],r(0)),e.insert(a.line+1,m)}else if(1==c.length)o(u,u.text.slice(0,a.ch)+c[0]+d.text.slice(l.ch),r(0)),e.remove(a.line+1,p);else{o(u,u.text.slice(0,a.ch)+c[0],r(0)),o(d,h+d.text.slice(l.ch),f);var m=s(1,c.length-1);p>1&&e.remove(a.line+1,p-1),e.insert(a.line+1,m)}Co(e,"change",e,t)}function Kr(e){this.lines=e,this.parent=null;for(var t=0,n=0;t<e.length;++t)e[t].parent=this,n+=e[t].height;this.height=n}function Gr(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var r=e[i];t+=r.chunkSize(),n+=r.height,r.parent=this}this.size=t,this.height=n,this.parent=null}function Yr(e,t,n){function i(e,r,o){if(e.linked)for(var s=0;s<e.linked.length;++s){var a=e.linked[s];if(a.doc!=r){var l=o&&a.sharedHist;(!n||l)&&(t(a.doc,l),i(a.doc,e,l))}}}i(e,null,!0)}function Qr(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,s(e),n(e),e.options.lineWrapping||h(e),e.options.mode=t.modeOption,Nn(e)}function Jr(e,t){if(t-=e.first,0>t||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var i=0;;++i){var r=n.children[i],o=r.chunkSize();if(o>t){n=r;break}t-=o}return n.lines[t]}function Xr(e,t,n){var i=[],r=t.line;return e.iter(t.line,n.line+1,function(e){var o=e.text;r==n.line&&(o=o.slice(0,n.ch)),r==t.line&&(o=o.slice(t.ch)),i.push(o),++r}),i}function Zr(e,t,n){var i=[];return e.iter(t,n,function(e){i.push(e.text)}),i}function eo(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function to(e){if(null==e.parent)return null;for(var t=e.parent,n=Lo(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var r=0;i.children[r]!=t;++r)n+=i.children[r].chunkSize();return n+t.first}function no(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var r=e.children[i],o=r.height;if(o>t){e=r;continue e}t-=o,n+=r.chunkSize()}return n}while(!e.lines);for(var i=0;i<e.lines.length;++i){var s=e.lines[i],a=s.height;if(a>t)break;t-=a}return n+i}function io(e){e=br(e);for(var t=0,n=e.parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==e)break;t+=r.height}for(var o=n.parent;o;n=o,o=n.parent)for(var i=0;i<o.children.length;++i){var s=o.children[i];if(s==n)break;t+=s.height}return t}function ro(e){var t=e.order;return null==t&&(t=e.order=sl(e.text)),t}function oo(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function so(e,t){var n={from:K(t.from),to:Xs(t),text:Xr(e,t.from,t.to)};return po(e,n,t.from.line,t.to.line+1),Yr(e,function(e){po(e,n,t.from.line,t.to.line+1)},!0),n}function ao(e){for(;e.length;){var t=Vo(e);if(!t.ranges)break;e.pop()}}function lo(e,t){return t?(ao(e.done),Vo(e.done)):e.done.length&&!Vo(e.done).ranges?Vo(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Vo(e.done)):void 0}function co(e,t,n,i){var r=e.history;r.undone.length=0;var o,s=+new Date;if((r.lastOp==i||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&r.lastModTime>s-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(o=lo(r,r.lastOp==i))){var a=Vo(o.changes);0==Ds(t.from,t.to)&&0==Ds(t.from,a.to)?a.to=Xs(t):o.changes.push(so(e,t))}else{var l=Vo(r.done);for(l&&l.ranges||fo(e.sel,r.done),o={changes:[so(e,t)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=s,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=t.origin,a||Fa(e,"historyAdded")}function uo(e,t,n,i){var r=t.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function ho(e,t,n,i){var r=e.history,o=i&&i.origin;n==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||uo(e,o,Vo(r.done),t))?r.done[r.done.length-1]=t:fo(t,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=o,r.lastSelOp=n,i&&i.clearRedo!==!1&&ao(r.undone)}function fo(e,t){var n=Vo(t);n&&n.ranges&&n.equals(e)||t.push(e)}function po(e,t,n,i){var r=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),function(n){n.markedSpans&&((r||(r=t["spans_"+e.id]={}))[o]=n.markedSpans),++o})}function mo(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function go(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=0,r=[];i<t.text.length;++i)r.push(mo(n[i]));return r}function vo(e,t,n){for(var i=0,r=[];i<e.length;++i){var o=e[i];if(o.ranges)r.push(n?ut.prototype.deepCopy.call(o):o);else{var s=o.changes,a=[];r.push({changes:a});for(var l=0;l<s.length;++l){var c,u=s[l];if(a.push({from:u.from,to:u.to,text:u.text}),t)for(var d in u)(c=d.match(/^spans_(\d+)$/))&&Lo(t,Number(c[1]))>-1&&(Vo(a)[d]=u[d],delete u[d])}}}return r}function bo(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function yo(e,t,n,i){for(var r=0;r<e.length;++r){var o=e[r],s=!0;if(o.ranges){o.copied||(o=e[r]=o.deepCopy(),o.copied=!0);for(var a=0;a<o.ranges.length;a++)bo(o.ranges[a].anchor,t,n,i),bo(o.ranges[a].head,t,n,i)}else{for(var a=0;a<o.changes.length;++a){var l=o.changes[a];if(n<l.from.line)l.from=$s(l.from.line+i,l.from.ch),l.to=$s(l.to.line+i,l.to.ch);else if(t<=l.to.line){s=!1;break}}s||(e.splice(0,r+1),r=0)}}}function wo(e,t){var n=t.from.line,i=t.to.line,r=t.text.length-(i-n)-1;yo(e.done,n,i,r),yo(e.undone,n,i,r)}function xo(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function ko(e){return e.target||e.srcElement}function _o(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),As&&e.ctrlKey&&1==t&&(t=3),t}function So(e,t,n){var i=e._handlers&&e._handlers[t];return n?i&&i.length>0?i.slice():Aa:i||Aa}function Co(e,t){function n(e){return function(){e.apply(null,o)}}var i=So(e,t,!1);if(i.length){var r,o=Array.prototype.slice.call(arguments,2);zs?r=zs.delayedCallbacks:Va?r=Va:(r=Va=[],setTimeout(Eo,0));for(var s=0;s<i.length;++s)r.push(n(i[s]))}}function Eo(){var e=Va;Va=null;for(var t=0;t<e.length;++t)e[t]()}function Io(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Fa(e,n||t.type,e,t),xo(t)||t.codemirrorIgnore}function Ro(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==Lo(n,t[i])&&n.push(t[i])}function To(e,t){return So(e,t).length>0}function Ao(e){e.prototype.on=function(e,t){Ta(this,e,t)},e.prototype.off=function(e,t){Ma(this,e,t)}}function Mo(){this.id=null}function Fo(e){for(;Ba.length<=e;)Ba.push(Vo(Ba)+" ");return Ba[e]}function Vo(e){return e[e.length-1]}function Lo(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function Oo(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function No(){}function $o(e,t){var n;return Object.create?n=Object.create(e):(No.prototype=e,n=new No),t&&Do(t,n),n}function Do(e,t,n){t||(t={});for(var i in e)!e.hasOwnProperty(i)||n===!1&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function Po(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function jo(e,t){return t?t.source.indexOf("\\w")>-1&&qa(e)?!0:t.test(e):qa(e)}function Bo(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function Uo(e){return e.charCodeAt(0)>=768&&Wa.test(e)}function Ho(e,t,n,i){var r=document.createElement(e);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)r.appendChild(t[o]);return r}function zo(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function qo(e,t){return zo(e).appendChild(t)}function Wo(){for(var e=document.activeElement;e&&e.root&&e.root.activeElement;)e=e.root.activeElement;return e}function Ko(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function Go(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)n[i]&&!Ko(n[i]).test(t)&&(t+=" "+n[i]);return t}function Yo(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var i=t[n].CodeMirror;i&&e(i)}}function Qo(){Xa||(Jo(),Xa=!0)}function Jo(){var e;Ta(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Yo(qn)},100))}),Ta(window,"blur",function(){Yo(bi)})}function Xo(e){if(null==Ga){var t=Ho("span","​");qo(e,Ho("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Ga=t.offsetWidth<=1&&t.offsetHeight>2&&!(ys&&8>ws))}var n=Ga?Ho("span","​"):Ho("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Zo(e){if(null!=Ya)return Ya;var t=qo(e,document.createTextNode("AخA")),n=Ha(t,0,1).getBoundingClientRect();if(!n||n.left==n.right)return!1;var i=Ha(t,1,2).getBoundingClientRect();return Ya=i.right-n.right<3}function es(e){if(null!=il)return il;var t=qo(e,Ho("span","x")),n=t.getBoundingClientRect(),i=Ha(t,0,1).getBoundingClientRect();return il=Math.abs(n.left-i.left)>1}function ts(e,t,n,i){if(!e)return i(t,n,"ltr");for(var r=!1,o=0;o<e.length;++o){var s=e[o];(s.from<n&&s.to>t||t==n&&s.to==t)&&(i(Math.max(s.from,t),Math.min(s.to,n),1==s.level?"rtl":"ltr"),r=!0)}r||i(t,n,"ltr")}function ns(e){return e.level%2?e.to:e.from}function is(e){return e.level%2?e.from:e.to}function rs(e){var t=ro(e);return t?ns(t[0]):0}function os(e){var t=ro(e);return t?is(Vo(t)):e.text.length}function ss(e,t){var n=Jr(e.doc,t),i=br(n);i!=n&&(t=to(i));var r=ro(i),o=r?r[0].level%2?os(i):rs(i):0;return $s(t,o)}function as(e,t){for(var n,i=Jr(e.doc,t);n=gr(i);)i=n.find(1,!0).line,t=null;var r=ro(i),o=r?r[0].level%2?rs(i):os(i):i.text.length;return $s(null==t?to(i):t,o)}function ls(e,t){var n=ss(e,t.line),i=Jr(e.doc,n.line),r=ro(i);if(!r||0==r[0].level){var o=Math.max(0,i.text.search(/\S/)),s=t.line==n.line&&t.ch<=o&&t.ch;return $s(n.line,s?0:o)}return n}function cs(e,t,n){var i=e[0].level;return t==i?!0:n==i?!1:n>t}function us(e,t){ol=null;for(var n,i=0;i<e.length;++i){var r=e[i];if(r.from<t&&r.to>t)return i;if(r.from==t||r.to==t){if(null!=n)return cs(e,r.level,e[n].level)?(r.from!=r.to&&(ol=n),i):(r.from!=r.to&&(ol=i),n);n=i}}return n}function ds(e,t,n,i){if(!i)return t+n;do t+=n;while(t>0&&Uo(e.text.charAt(t)));return t}function hs(e,t,n,i){var r=ro(e);if(!r)return fs(e,t,n,i);for(var o=us(r,t),s=r[o],a=ds(e,t,s.level%2?-n:n,i);;){if(a>s.from&&a<s.to)return a;if(a==s.from||a==s.to)return us(r,a)==o?a:(s=r[o+=n],n>0==s.level%2?s.to:s.from);if(s=r[o+=n],!s)return null;a=n>0==s.level%2?ds(e,s.to,-1,i):ds(e,s.from,1,i)}}function fs(e,t,n,i){var r=t+n;if(i)for(;r>0&&Uo(e.text.charAt(r));)r+=n;return 0>r||r>e.text.length?null:r}var ps=navigator.userAgent,ms=navigator.platform,gs=/gecko\/\d/i.test(ps),vs=/MSIE \d/.test(ps),bs=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ps),ys=vs||bs,ws=ys&&(vs?document.documentMode||6:bs[1]),xs=/WebKit\//.test(ps),ks=xs&&/Qt\/\d+\.\d+/.test(ps),_s=/Chrome\//.test(ps),Ss=/Opera\//.test(ps),Cs=/Apple Computer/.test(navigator.vendor),Es=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(ps),Is=/PhantomJS/.test(ps),Rs=/AppleWebKit/.test(ps)&&/Mobile\/\w+/.test(ps),Ts=Rs||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(ps),As=Rs||/Mac/.test(ms),Ms=/win/i.test(ms),Fs=Ss&&ps.match(/Version\/(\d*\.\d*)/);Fs&&(Fs=Number(Fs[1])),Fs&&Fs>=15&&(Ss=!1,xs=!0);var Vs=As&&(ks||Ss&&(null==Fs||12.11>Fs)),Ls=gs||ys&&ws>=9,Os=!1,Ns=!1;m.prototype=Do({update:function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0";var r=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+r)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?i:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+o+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:t?i:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},zeroWidthHack:function(){var e=As&&!Es?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Mo,this.disableVert=new Mo},enableZeroWidthBar:function(e,t){function n(){var i=e.getBoundingClientRect(),r=document.elementFromPoint(i.left+1,i.bottom-1);r!=e?e.style.pointerEvents="none":t.set(1e3,n)}e.style.pointerEvents="auto",t.set(1e3,n)},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},m.prototype),g.prototype=Do({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},g.prototype),e.scrollbarModel={"native":m,"null":g},C.prototype.signal=function(e,t){To(e,t)&&this.events.push(arguments)},C.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Fa.apply(null,this.events[e])};var $s=e.Pos=function(e,t){return this instanceof $s?(this.line=e,void(this.ch=t)):new $s(e,t)},Ds=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch},Ps=null;nt.prototype=Do({init:function(e){function t(e){if(!Io(i,e)){if(i.somethingSelected())Ps=i.getSelections(),n.inaccurateSelection&&(n.prevInput="",n.inaccurateSelection=!1,o.value=Ps.join("\n"),Ua(o));else{if(!i.options.lineWiseCopyCut)return;var t=et(i);Ps=t.text,"cut"==e.type?i.setSelections(t.ranges,null,Na):(n.prevInput="",o.value=t.text.join("\n"),Ua(o))}"cut"==e.type&&(i.state.cutIncoming=!0)}}var n=this,i=this.cm,r=this.wrapper=it(),o=this.textarea=r.firstChild;e.wrapper.insertBefore(r,e.wrapper.firstChild),Rs&&(o.style.width="0px"),Ta(o,"input",function(){ys&&ws>=9&&n.hasSelection&&(n.hasSelection=null),n.poll()}),Ta(o,"paste",function(e){Io(i,e)||X(e,i)||(i.state.pasteIncoming=!0,n.fastPoll())}),Ta(o,"cut",t),Ta(o,"copy",t),Ta(e.scroller,"paste",function(t){Wn(e,t)||Io(i,t)||(i.state.pasteIncoming=!0,n.focus())}),Ta(e.lineSpace,"selectstart",function(t){Wn(e,t)||Ea(t)}),Ta(o,"compositionstart",function(){var e=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}}),Ta(o,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},prepareSelection:function(){var e=this.cm,t=e.display,n=e.doc,i=Ot(e);if(e.options.moveInputWithCursor){var r=pn(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+s.top-o.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+s.left-o.left))}return i},showSelection:function(e){var t=this.cm,n=t.display;qo(n.cursorDiv,e.cursors),qo(n.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},reset:function(e){if(!this.contextMenuPending){var t,n,i=this.cm,r=i.doc;if(i.somethingSelected()){this.prevInput="";var o=r.sel.primary();t=nl&&(o.to().line-o.from().line>100||(n=i.getSelection()).length>1e3);var s=t?"-":n||i.getSelection();this.textarea.value=s,i.state.focused&&Ua(this.textarea),ys&&ws>=9&&(this.hasSelection=s)}else e||(this.prevInput=this.textarea.value="",ys&&ws>=9&&(this.hasSelection=null));this.inaccurateSelection=t}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!Ts||Wo()!=this.textarea))try{this.textarea.focus()}catch(e){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var e=this;e.pollingFast||e.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},fastPoll:function(){function e(){var i=n.poll();i||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,e))}var t=!1,n=this;n.pollingFast=!0,n.polling.set(20,e)},poll:function(){var e=this.cm,t=this.textarea,n=this.prevInput;if(this.contextMenuPending||!e.state.focused||tl(t)&&!n&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var i=t.value;if(i==n&&!e.somethingSelected())return!1;if(ys&&ws>=9&&this.hasSelection===i||As&&/[-]/.test(i))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var r=i.charCodeAt(0);if(8203!=r||n||(n="​"),8666==r)return this.reset(),this.cm.execCommand("undo")}for(var o=0,s=Math.min(n.length,i.length);s>o&&n.charCodeAt(o)==i.charCodeAt(o);)++o;var a=this;return An(e,function(){J(e,i.slice(o),n.length-o,null,a.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?t.value=a.prevInput="":a.prevInput=i,a.composing&&(a.composing.range.clear(),a.composing.range=e.markText(a.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){ys&&ws>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){function t(){if(null!=s.selectionStart){var e=r.somethingSelected(),t="​"+(e?s.value:"");s.value="⇚",s.value=t,i.prevInput=e?"":"​",s.selectionStart=1,s.selectionEnd=t.length,o.selForContextMenu=r.doc.sel}}function n(){if(i.contextMenuPending=!1,i.wrapper.style.position="relative",s.style.cssText=u,ys&&9>ws&&o.scrollbars.setScrollTop(o.scroller.scrollTop=l),null!=s.selectionStart){(!ys||ys&&9>ws)&&t();var e=0,n=function(){o.selForContextMenu==r.doc.sel&&0==s.selectionStart&&s.selectionEnd>0&&"​"==i.prevInput?Mn(r,ca.selectAll)(r):e++<10?o.detectingSelectAll=setTimeout(n,500):o.input.reset()};o.detectingSelectAll=setTimeout(n,200)}}var i=this,r=i.cm,o=r.display,s=i.textarea,a=Kn(r,e),l=o.scroller.scrollTop;if(a&&!Ss){var c=r.options.resetSelectionOnContextMenu;c&&-1==r.doc.sel.contains(a)&&Mn(r,Et)(r.doc,ft(a),Na);var u=s.style.cssText;if(i.wrapper.style.position="absolute",s.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(ys?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",xs)var d=window.scrollY;if(o.input.focus(),xs&&window.scrollTo(null,d),o.input.reset(),r.somethingSelected()||(s.value=i.prevInput=" "),i.contextMenuPending=!0,o.selForContextMenu=r.doc.sel,clearTimeout(o.detectingSelectAll),ys&&ws>=9&&t(),Ls){Ra(e);var h=function(){Ma(window,"mouseup",h),setTimeout(n,20)};Ta(window,"mouseup",h)}else setTimeout(n,50)}},readOnlyChanged:function(e){e||this.reset()},setUneditable:No,needsContentAttribute:!1},nt.prototype),rt.prototype=Do({init:function(e){function t(e){if(!Io(i,e)){if(i.somethingSelected())Ps=i.getSelections(),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=et(i);Ps=t.text,"cut"==e.type&&i.operation(function(){i.setSelections(t.ranges,0,Na),i.replaceSelection("",null,"cut")})}if(e.clipboardData&&!Rs)e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",Ps.join("\n"));else{var n=it(),r=n.firstChild;i.display.lineSpace.insertBefore(n,i.display.lineSpace.firstChild),r.value=Ps.join("\n");var o=document.activeElement;Ua(r),setTimeout(function(){i.display.lineSpace.removeChild(n),o.focus()},50)}}}var n=this,i=n.cm,r=n.div=e.lineDiv;tt(r),Ta(r,"paste",function(e){Io(i,e)||X(e,i)}),Ta(r,"compositionstart",function(e){var t=e.data;if(n.composing={sel:i.doc.sel,data:t,startData:t},t){var r=i.doc.sel.primary(),o=i.getLine(r.head.line),s=o.indexOf(t,Math.max(0,r.head.ch-t.length));s>-1&&s<=r.head.ch&&(n.composing.sel=ft($s(r.head.line,s),$s(r.head.line,s+t.length)))}}),Ta(r,"compositionupdate",function(e){n.composing.data=e.data}),Ta(r,"compositionend",function(e){var t=n.composing;t&&(e.data==t.startData||/​/.test(e.data)||(t.data=e.data),setTimeout(function(){t.handled||n.applyComposition(t),n.composing==t&&(n.composing=null)},50))}),Ta(r,"touchstart",function(){n.forceCompositionEnd()}),Ta(r,"input",function(){n.composing||(i.isReadOnly()||!n.pollContent())&&An(n.cm,function(){Nn(i)})}),Ta(r,"copy",t),Ta(r,"cut",t)},prepareSelection:function(){var e=Ot(this.cm,!1);return e.focus=this.cm.state.focused,e},showSelection:function(e){e&&this.cm.display.view.length&&(e.focus&&this.showPrimarySelection(),this.showMultipleSelections(e))},showPrimarySelection:function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),n=at(this.cm,e.anchorNode,e.anchorOffset),i=at(this.cm,e.focusNode,e.focusOffset);if(!n||n.bad||!i||i.bad||0!=Ds(Y(n,i),t.from())||0!=Ds(G(n,i),t.to())){var r=ot(this.cm,t.from()),o=ot(this.cm,t.to());if(r||o){var s=this.cm.display.view,a=e.rangeCount&&e.getRangeAt(0);if(r){if(!o){var l=s[s.length-1].measure,c=l.maps?l.maps[l.maps.length-1]:l.map;o={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}}}else r={node:s[0].measure.map[2],offset:0};try{var u=Ha(r.node,r.offset,o.offset,o.node)}catch(d){}u&&(!gs&&this.cm.state.focused?(e.collapse(r.node,r.offset),u.collapsed||e.addRange(u)):(e.removeAllRanges(),e.addRange(u)),a&&null==e.anchorNode?e.addRange(a):gs&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){e.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(e){qo(this.cm.display.cursorDiv,e.cursors),qo(this.cm.display.selectionDiv,e.selection)},rememberSelection:function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return Ka(this.div,t)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}var t=this;this.selectionInEditor()?this.pollSelection():An(this.cm,function(){t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,e)},selectionChanged:function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var n=at(t,e.anchorNode,e.anchorOffset),i=at(t,e.focusNode,e.focusOffset);n&&i&&An(t,function(){Et(t.doc,ft(n,i),Na),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)})}},pollContent:function(){var e=this.cm,t=e.display,n=e.doc.sel.primary(),i=n.from(),r=n.to();if(i.line<t.viewFrom||r.line>t.viewTo-1)return!1;var o;if(i.line==t.viewFrom||0==(o=Pn(e,i.line)))var s=to(t.view[0].line),a=t.view[0].node;else var s=to(t.view[o].line),a=t.view[o-1].node.nextSibling;var l=Pn(e,r.line);if(l==t.view.length-1)var c=t.viewTo-1,u=t.lineDiv.lastChild;else var c=to(t.view[l+1].line)-1,u=t.view[l+1].node.previousSibling;for(var d=e.doc.splitLines(ct(e,a,u,s,c)),h=Xr(e.doc,$s(s,0),$s(c,Jr(e.doc,c).text.length));d.length>1&&h.length>1;)if(Vo(d)==Vo(h))d.pop(),h.pop(),c--;else{if(d[0]!=h[0])break;d.shift(),h.shift(),s++}for(var f=0,p=0,m=d[0],g=h[0],v=Math.min(m.length,g.length);v>f&&m.charCodeAt(f)==g.charCodeAt(f);)++f;for(var b=Vo(d),y=Vo(h),w=Math.min(b.length-(1==d.length?f:0),y.length-(1==h.length?f:0));w>p&&b.charCodeAt(b.length-p-1)==y.charCodeAt(y.length-p-1);)++p;d[d.length-1]=b.slice(0,b.length-p),d[0]=d[0].slice(f);var x=$s(s,f),k=$s(c,h.length?Vo(h).length-p:0);return d.length>1||d[0]||Ds(x,k)?(Fi(e.doc,d,x,k,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()
},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(e){this.cm.isReadOnly()?Mn(this.cm,Nn)(this.cm):e.data&&e.data!=e.startData&&Mn(this.cm,J)(this.cm,e.data,0,e.sel)},setUneditable:function(e){e.contentEditable="false"},onKeyPress:function(e){e.preventDefault(),this.cm.isReadOnly()||Mn(this.cm,J)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},readOnlyChanged:function(e){this.div.contentEditable=String("nocursor"!=e)},onContextMenu:No,resetPosition:No,needsContentAttribute:!0},rt.prototype),e.inputStyles={textarea:nt,contenteditable:rt},ut.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(0!=Ds(n.anchor,i.anchor)||0!=Ds(n.head,i.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new dt(K(this.ranges[t].anchor),K(this.ranges[t].head));return new ut(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(Ds(t,i.from())>=0&&Ds(e,i.to())<=0)return n}return-1}},dt.prototype={from:function(){return Y(this.anchor,this.head)},to:function(){return G(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var js,Bs,Us,Hs={left:0,right:0,top:0,bottom:0},zs=null,qs=0,Ws=0,Ks=0,Gs=null;ys?Gs=-.53:gs?Gs=15:_s?Gs=-.7:Cs&&(Gs=-1/3);var Ys=function(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}};e.wheelEventPixels=function(e){var t=Ys(e);return t.x*=Gs,t.y*=Gs,t};var Qs=new Mo,Js=null,Xs=e.changeEnd=function(e){return e.text?$s(e.from.line+e.text.length-1,Vo(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var n=this.options,i=n[e];(n[e]!=t||"mode"==e)&&(n[e]=t,ea.hasOwnProperty(e)&&Mn(this,ea[e])(this,t,i))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Ki(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Fn(function(t,n){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:i,modeSpec:t,opaque:n&&n.opaque}),this.state.modeGen++,Nn(this)}),removeOverlay:Fn(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var i=t[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return t.splice(n,1),this.state.modeGen++,void Nn(this)}}),indentLine:Fn(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),vt(this.doc,e)&&ji(this,e,t,n)}),indentSelection:Fn(function(e){for(var t=this.doc.sel.ranges,n=-1,i=0;i<t.length;i++){var r=t[i];if(r.empty())r.head.line>n&&(ji(this,r.head.line,e,!0),n=r.head.line,i==this.doc.sel.primIndex&&Di(this));else{var o=r.from(),s=r.to(),a=Math.max(n,o.line);n=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var l=a;n>l;++l)ji(this,l,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&c[i].from().ch>0&&kt(this.doc,i,new dt(o,c[i].to()),Na)}}}),getTokenAt:function(e,t){return Fr(this,e,t)},getLineTokens:function(e,t){return Fr(this,$s(e),t,!0)},getTokenTypeAt:function(e){e=mt(this.doc,e);var t,n=Or(this,Jr(this.doc,e.line)),i=0,r=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var s=i+r>>1;if((s?n[2*s-1]:0)>=o)r=s;else{if(!(n[2*s+1]<o)){t=n[2*s+2];break}i=s+1}}var a=t?t.indexOf("cm-overlay "):-1;return 0>a?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!sa.hasOwnProperty(t))return n;var i=sa[t],r=this.getModeAt(e);if("string"==typeof r[t])i[r[t]]&&n.push(i[r[t]]);else if(r[t])for(var o=0;o<r[t].length;o++){var s=i[r[t][o]];s&&n.push(s)}else r.helperType&&i[r.helperType]?n.push(i[r.helperType]):i[r.name]&&n.push(i[r.name]);for(var o=0;o<i._global.length;o++){var a=i._global[o];a.pred(r,this)&&-1==Lo(n,a.val)&&n.push(a.val)}return n},getStateAfter:function(e,t){var n=this.doc;return e=pt(n,null==e?n.first+n.size-1:e),Ut(this,e+1,t)},cursorCoords:function(e,t){var n,i=this.doc.sel.primary();return n=null==e?i.head:"object"==typeof e?mt(this.doc,e):e?i.from():i.to(),pn(this,n,t||"page")},charCoords:function(e,t){return fn(this,mt(this.doc,e),t||"page")},coordsChar:function(e,t){return e=hn(this,e,t||"page"),vn(this,e.left,e.top)},lineAtHeight:function(e,t){return e=hn(this,{top:e,left:0},t||"page").top,no(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var n,i=!1;if("number"==typeof e){var r=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>r&&(e=r,i=!0),n=Jr(this.doc,e)}else n=e;return dn(this,n,{top:0,left:0},t||"page").top+(i?this.doc.height-io(n):0)},defaultTextHeight:function(){return yn(this.display)},defaultCharWidth:function(){return wn(this.display)},setGutterMarker:Fn(function(e,t,n){return Bi(this.doc,e,"gutter",function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=n,!n&&Bo(i)&&(e.gutterMarkers=null),!0})}),clearGutter:Fn(function(e){var t=this,n=t.doc,i=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,$n(t,i,"gutter"),Bo(n.gutterMarkers)&&(n.gutterMarkers=null)),++i})}),lineInfo:function(e){if("number"==typeof e){if(!vt(this.doc,e))return null;var t=e;if(e=Jr(this.doc,e),!e)return null}else{var t=to(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,i,r){var o=this.display;e=pn(this,mt(this.doc,e));var s=e.bottom,a=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),o.sizer.appendChild(t),"over"==i)s=e.top;else if("above"==i||"near"==i){var l=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?s=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(s=e.bottom),a+t.offsetWidth>c&&(a=c-t.offsetWidth)}t.style.top=s+"px",t.style.left=t.style.right="","right"==r?(a=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?a=0:"middle"==r&&(a=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=a+"px"),n&&Oi(this,a,s,a+t.offsetWidth,s+t.offsetHeight)},triggerOnKeyDown:Fn(hi),triggerOnKeyPress:Fn(mi),triggerOnKeyUp:pi,execCommand:function(e){return ca.hasOwnProperty(e)?ca[e].call(null,this):void 0},triggerElectric:Fn(function(e){Z(this,e)}),findPosH:function(e,t,n,i){var r=1;0>t&&(r=-1,t=-t);for(var o=0,s=mt(this.doc,e);t>o&&(s=Hi(this.doc,s,r,n,i),!s.hitSide);++o);return s},moveH:Fn(function(e,t){var n=this;n.extendSelectionsBy(function(i){return n.display.shift||n.doc.extend||i.empty()?Hi(n.doc,i.head,e,t,n.options.rtlMoveVisually):0>e?i.from():i.to()},Da)}),deleteH:Fn(function(e,t){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):Ui(this,function(n){var r=Hi(i,n.head,e,t,!1);return 0>e?{from:r,to:n.head}:{from:n.head,to:r}})}),findPosV:function(e,t,n,i){var r=1,o=i;0>t&&(r=-1,t=-t);for(var s=0,a=mt(this.doc,e);t>s;++s){var l=pn(this,a,"div");if(null==o?o=l.left:l.left=o,a=zi(this,l,r,n),a.hitSide)break}return a},moveV:Fn(function(e,t){var n=this,i=this.doc,r=[],o=!n.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy(function(s){if(o)return 0>e?s.from():s.to();var a=pn(n,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),r.push(a.left);var l=zi(n,a,e,t);return"page"==t&&s==i.sel.primary()&&$i(n,null,fn(n,l,"div").top-a.top),l},Da),r.length)for(var s=0;s<i.sel.ranges.length;s++)i.sel.ranges[s].goalColumn=r[s]}),findWordAt:function(e){var t=this.doc,n=Jr(t,e.line).text,i=e.ch,r=e.ch;if(n){var o=this.getHelper(e,"wordChars");(e.xRel<0||r==n.length)&&i?--i:++r;for(var s=n.charAt(i),a=jo(s,o)?function(e){return jo(e,o)}:/\s/.test(s)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!jo(e)};i>0&&a(n.charAt(i-1));)--i;for(;r<n.length&&a(n.charAt(r));)++r}return new dt($s(e.line,i),$s(e.line,r))},toggleOverwrite:function(e){(null==e||e!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?Ja(this.display.cursorDiv,"CodeMirror-overwrite"):Qa(this.display.cursorDiv,"CodeMirror-overwrite"),Fa(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Wo()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Fn(function(e,t){(null!=e||null!=t)&&Pi(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Wt(this)-this.display.barHeight,width:e.scrollWidth-Wt(this)-this.display.barWidth,clientHeight:Gt(this),clientWidth:Kt(this)}},scrollIntoView:Fn(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:$s(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)Pi(this),this.curOp.scrollToPos=e;else{var n=Ni(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}}),setSize:Fn(function(e,t){function n(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var i=this;null!=e&&(i.display.wrapper.style.width=n(e)),null!=t&&(i.display.wrapper.style.height=n(t)),i.options.lineWrapping&&an(this);var r=i.display.viewFrom;i.doc.iter(r,i.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){$n(i,r,"widget");break}++r}),i.curOp.forceUpdate=!0,Fa(i,"refresh",this)}),operation:function(e){return An(this,e)},refresh:Fn(function(){var e=this.display.cachedTextHeight;Nn(this),this.curOp.forceUpdate=!0,ln(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),u(this),(null==e||Math.abs(e-yn(this.display))>.5)&&s(this),Fa(this,"refresh",this)}),swapDoc:Fn(function(e){var t=this.doc;return t.cm=null,Qr(this,e),ln(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,Co(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ao(e);var Zs=e.defaults={},ea=e.optionHandlers={},ta=e.Init={toString:function(){return"CodeMirror.Init"}};qi("value","",function(e,t){e.setValue(t)},!0),qi("mode",null,function(e,t){e.doc.modeOption=t,n(e)},!0),qi("indentUnit",2,n,!0),qi("indentWithTabs",!1),qi("smartIndent",!0),qi("tabSize",4,function(e){i(e),ln(e),Nn(e)},!0),qi("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var n=[],i=e.doc.first;e.doc.iter(function(e){for(var r=0;;){var o=e.text.indexOf(t,r);if(-1==o)break;r=o+t.length,n.push($s(i,o))}i++});for(var r=n.length-1;r>=0;r--)Fi(e.doc,t,n[r],$s(n[r].line,n[r].ch+t.length))}}),qi("specialChars",/[\t -­​-‏\u2028\u2029﻿]/g,function(t,n,i){t.state.specialChars=new RegExp(n.source+(n.test("	")?"":"|	"),"g"),i!=e.Init&&t.refresh()}),qi("specialCharPlaceholder",Pr,function(e){e.refresh()},!0),qi("electricChars",!0),qi("inputStyle",Ts?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),qi("rtlMoveVisually",!Ms),qi("wholeLineUpdateBefore",!0),qi("theme","default",function(e){a(e),l(e)},!0),qi("keyMap","default",function(t,n,i){var r=Ki(n),o=i!=e.Init&&Ki(i);o&&o.detach&&o.detach(t,r),r.attach&&r.attach(t,o||null)}),qi("extraKeys",null),qi("lineWrapping",!1,r,!0),qi("gutters",[],function(e){f(e.options),l(e)},!0),qi("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?S(e.display)+"px":"0",e.refresh()},!0),qi("coverGutterNextToScrollbar",!1,function(e){b(e)},!0),qi("scrollbarStyle","native",function(e){v(e),b(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),qi("lineNumbers",!1,function(e){f(e.options),l(e)},!0),qi("firstLineNumber",1,l,!0),qi("lineNumberFormatter",function(e){return e},l,!0),qi("showCursorWhenSelecting",!1,Lt,!0),qi("resetSelectionOnContextMenu",!0),qi("lineWiseCopyCut",!0),qi("readOnly",!1,function(e,t){"nocursor"==t?(bi(e),e.display.input.blur(),e.display.disabled=!0):e.display.disabled=!1,e.display.input.readOnlyChanged(t)}),qi("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),qi("dragDrop",!0,zn),qi("allowDropFileTypes",null),qi("cursorBlinkRate",530),qi("cursorScrollMargin",0),qi("cursorHeight",1,Lt,!0),qi("singleCursorHeightPerLine",!0,Lt,!0),qi("workTime",100),qi("workDelay",100),qi("flattenSpans",!0,i,!0),qi("addModeClass",!1,i,!0),qi("pollInterval",100),qi("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),qi("historyEventDelay",1250),qi("viewportMargin",10,function(e){e.refresh()},!0),qi("maxHighlightLength",1e4,i,!0),qi("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),qi("tabindex",null,function(e,t){e.display.input.getField().tabIndex=t||""}),qi("autofocus",null);var na=e.modes={},ia=e.mimeModes={};e.defineMode=function(t,n){e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2&&(n.dependencies=Array.prototype.slice.call(arguments,2)),na[t]=n},e.defineMIME=function(e,t){ia[e]=t},e.resolveMode=function(t){if("string"==typeof t&&ia.hasOwnProperty(t))t=ia[t];else if(t&&"string"==typeof t.name&&ia.hasOwnProperty(t.name)){var n=ia[t.name];"string"==typeof n&&(n={name:n}),t=$o(n,t),t.name=n.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){var n=e.resolveMode(n),i=na[n.name];if(!i)return e.getMode(t,"text/plain");var r=i(t,n);if(ra.hasOwnProperty(n.name)){var o=ra[n.name];for(var s in o)o.hasOwnProperty(s)&&(r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=o[s])}if(r.name=n.name,n.helperType&&(r.helperType=n.helperType),n.modeProps)for(var s in n.modeProps)r[s]=n.modeProps[s];return r},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var ra=e.modeExtensions={};e.extendMode=function(e,t){var n=ra.hasOwnProperty(e)?ra[e]:ra[e]={};Do(t,n)},e.defineExtension=function(t,n){e.prototype[t]=n},e.defineDocExtension=function(e,t){_a.prototype[e]=t},e.defineOption=qi;var oa=[];e.defineInitHook=function(e){oa.push(e)};var sa=e.helpers={};e.registerHelper=function(t,n,i){sa.hasOwnProperty(t)||(sa[t]=e[t]={_global:[]}),sa[t][n]=i},e.registerGlobalHelper=function(t,n,i,r){e.registerHelper(t,n,r),sa[t]._global.push({pred:i,val:r})};var aa=e.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n},la=e.startState=function(e,t,n){return e.startState?e.startState(t,n):!0};e.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state,e=n.mode}return n||{mode:e,state:t}};var ca=e.commands={selectAll:function(e){e.setSelection($s(e.firstLine(),0),$s(e.lastLine()),Na)},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Na)},killLine:function(e){Ui(e,function(t){if(t.empty()){var n=Jr(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:$s(t.head.line+1,0)}:{from:t.head,to:$s(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){Ui(e,function(t){return{from:$s(t.from().line,0),to:mt(e.doc,$s(t.to().line+1,0))}})},delLineLeft:function(e){Ui(e,function(e){return{from:$s(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){Ui(e,function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return{from:i,to:t.from()}})},delWrappedLineRight:function(e){Ui(e,function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection($s(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection($s(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return ss(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return ls(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return as(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},Da)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},Da)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return i.ch<e.getLine(i.line).search(/\S/)?ls(e,t.head):i},Da)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,r=0;r<n.length;r++){var o=n[r].from(),s=Pa(e.getLine(o.line),o.ch,i);t.push(new Array(i-s%i+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){An(e,function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++){var r=t[i].head,o=Jr(e.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new $s(r.line,r.ch-1)),r.ch>0)r=new $s(r.line,r.ch+1),e.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),$s(r.line,r.ch-2),r,"+transpose");else if(r.line>e.doc.first){var s=Jr(e.doc,r.line-1).text;s&&e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),$s(r.line-1,s.length-1),$s(r.line,1),"+transpose")}n.push(new dt(r,r))}e.setSelections(n)})},newlineAndIndent:function(e){An(e,function(){for(var t=e.listSelections().length,n=0;t>n;n++){var i=e.listSelections()[n];e.replaceRange(e.doc.lineSeparator(),i.anchor,i.head,"+input"),e.indentLine(i.from().line+1,null,!0)}Di(e)})},toggleOverwrite:function(e){e.toggleOverwrite()}},ua=e.keyMap={};ua.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},ua.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},ua.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},ua.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},ua["default"]=As?ua.macDefault:ua.pcDefault,e.normalizeKeyMap=function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete e[n];continue}for(var r=Oo(n.split(" "),Wi),o=0;o<r.length;o++){var s,a;o==r.length-1?(a=r.join(" "),s=i):(a=r.slice(0,o+1).join(" "),s="...");var l=t[a];if(l){if(l!=s)throw new Error("Inconsistent bindings for "+a)}else t[a]=s}delete e[n]}for(var c in t)e[c]=t[c];return e};var da=e.lookupKey=function(e,t,n,i){t=Ki(t);var r=t.call?t.call(e,i):t[e];if(r===!1)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return da(e,t.fallthrough,n,i);for(var o=0;o<t.fallthrough.length;o++){var s=da(e,t.fallthrough[o],n,i);if(s)return s}}},ha=e.isModifierKey=function(e){var t="string"==typeof e?e:rl[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},fa=e.keyName=function(e,t){if(Ss&&34==e.keyCode&&e["char"])return!1;var n=rl[e.keyCode],i=n;return null==i||e.altGraphKey?!1:(e.altKey&&"Alt"!=n&&(i="Alt-"+i),(Vs?e.metaKey:e.ctrlKey)&&"Ctrl"!=n&&(i="Ctrl-"+i),(Vs?e.ctrlKey:e.metaKey)&&"Cmd"!=n&&(i="Cmd-"+i),!t&&e.shiftKey&&"Shift"!=n&&(i="Shift-"+i),i)};e.fromTextArea=function(t,n){function i(){t.value=c.getValue()}if(n=n?Do(n):{},n.value=t.value,!n.tabindex&&t.tabIndex&&(n.tabindex=t.tabIndex),!n.placeholder&&t.placeholder&&(n.placeholder=t.placeholder),null==n.autofocus){var r=Wo();n.autofocus=r==t||null!=t.getAttribute("autofocus")&&r==document.body}if(t.form&&(Ta(t.form,"submit",i),!n.leaveSubmitMethodAlone)){var o=t.form,s=o.submit;try{var a=o.submit=function(){i(),o.submit=s,o.submit(),o.submit=a}}catch(l){}}n.finishInit=function(e){e.save=i,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,i(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(Ma(t.form,"submit",i),"function"==typeof t.form.submit&&(t.form.submit=s))}},t.style.display="none";var c=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return c};var pa=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};pa.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s ]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Pa(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Pa(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Pa(this.string,null,this.tabSize)-(this.lineStart?Pa(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,n){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&t!==!1&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);return r(o)==r(e)?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var ma=0,ga=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ma};Ao(ga),ga.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&xn(e),To(this,"clear")){var n=this.find();n&&Co(this,"clear",n.from,n.to)}for(var i=null,r=null,o=0;o<this.lines.length;++o){var s=this.lines[o],a=er(s.markedSpans,this);e&&!this.collapsed?$n(e,to(s),"text"):e&&(null!=a.to&&(r=to(s)),null!=a.from&&(i=to(s))),s.markedSpans=tr(s.markedSpans,a),null==a.from&&this.collapsed&&!kr(this.doc,s)&&e&&eo(s,yn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var l=br(this.lines[o]),c=d(l);c>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&Nn(e,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Tt(e.doc)),e&&Co(e,"markerCleared",e,this),t&&_n(e),this.parent&&this.parent.clear()}},ga.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,i,r=0;r<this.lines.length;++r){var o=this.lines[r],s=er(o.markedSpans,this);if(null!=s.from&&(n=$s(t?o:to(o),s.from),-1==e))return n;if(null!=s.to&&(i=$s(t?o:to(o),s.to),1==e))return i}return n&&{from:n,to:i}},ga.prototype.changed=function(){var e=this.find(-1,!0),t=this,n=this.doc.cm;e&&n&&An(n,function(){var i=e.line,r=to(e.line),o=Zt(n,r);if(o&&(sn(o),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!kr(t.doc,i)&&null!=t.height){var s=t.height;t.height=null;var a=Cr(t)-s;a&&eo(i,i.height+a)}})},ga.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=Lo(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ga.prototype.detachLine=function(e){if(this.lines.splice(Lo(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var ma=0,va=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};Ao(va),va.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Co(this,"clear")}},va.prototype.find=function(e,t){return this.primary.find(e,t)};var ba=e.LineWidget=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};Ao(ba),ba.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=to(n);if(null!=i&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(n.widgets=null);var o=Cr(this);eo(n,Math.max(0,n.height-o)),e&&An(e,function(){Sr(e,n,-o),$n(e,i,"widget")})}},ba.prototype.changed=function(){var e=this.height,t=this.doc.cm,n=this.line;this.height=null;var i=Cr(this)-e;i&&(eo(n,n.height+i),t&&An(t,function(){t.curOp.forceUpdate=!0,Sr(t,n,i)}))};var ya=e.Line=function(e,t,n){this.text=e,ur(this,t),this.height=n?n(this):1};Ao(ya),ya.prototype.lineNo=function(){return to(this)};var wa={},xa={};Kr.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;i>n;++n){var r=this.lines[n];this.height-=r.height,Rr(r),Co(r,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;i>e;++e)if(n(this.lines[e]))return!0}},Gr.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(r>e){var o=Math.min(t,r-e),s=i.height;if(i.removeInner(e,o),this.height-=s-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(t-=o))break;e=0}else e-=r}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Kr))){var a=[];this.collapse(a),this.children=[new Kr(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(o>=e){if(r.insertInner(e,t,n),r.lines&&r.lines.length>50){for(;r.lines.length>50;){var s=r.lines.splice(r.lines.length-25,25),a=new Kr(s);r.height-=a.height,this.children.splice(i+1,0,a),a.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new Gr(t);if(e.parent){e.size-=n.size,e.height-=n.height;var i=Lo(e.parent.children,e);e.parent.children.splice(i+1,0,n)}else{var r=new Gr(e.children);r.parent=e,e.children=[r,n],e=r}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(o>e){var s=Math.min(t,o-e);if(r.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=o}}};var ka=0,_a=e.Doc=function(e,t,n,i){if(!(this instanceof _a))return new _a(e,t,n,i);null==n&&(n=0),Gr.call(this,[new Kr([new ya("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var r=$s(n,0);this.sel=ft(r),this.history=new oo(null),this.id=++ka,this.modeOption=t,this.lineSep=i,this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Wr(this,{from:r,to:r,text:e}),Et(this,ft(r),Na)
};_a.prototype=$o(Gr.prototype,{constructor:_a,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Zr(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:Vn(function(e){var t=$s(this.first,0),n=this.first+this.size-1;Ei(this,{from:t,to:$s(n,Jr(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),Et(this,ft(t))}),replaceRange:function(e,t,n,i){t=mt(this,t),n=n?mt(this,n):t,Fi(this,e,t,n,i)},getRange:function(e,t,n){var i=Xr(this,mt(this,e),mt(this,t));return n===!1?i:i.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){return vt(this,e)?Jr(this,e):void 0},getLineNumber:function(e){return to(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Jr(this,e)),br(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return mt(this,e)},getCursor:function(e){var t,n=this.sel.primary();return t=null==e||"head"==e?n.head:"anchor"==e?n.anchor:"end"==e||"to"==e||e===!1?n.to():n.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Vn(function(e,t,n){_t(this,mt(this,"number"==typeof e?$s(e,t||0):e),null,n)}),setSelection:Vn(function(e,t,n){_t(this,mt(this,e),mt(this,t||e),n)}),extendSelection:Vn(function(e,t,n){wt(this,mt(this,e),t&&mt(this,t),n)}),extendSelections:Vn(function(e,t){xt(this,bt(this,e),t)}),extendSelectionsBy:Vn(function(e,t){var n=Oo(this.sel.ranges,e);xt(this,bt(this,n),t)}),setSelections:Vn(function(e,t,n){if(e.length){for(var i=0,r=[];i<e.length;i++)r[i]=new dt(mt(this,e[i].anchor),mt(this,e[i].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Et(this,ht(r,t),n)}}),addSelection:Vn(function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new dt(mt(this,e),mt(this,t||e))),Et(this,ht(i,i.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,i=0;i<n.length;i++){var r=Xr(this,n[i].from(),n[i].to());t=t?t.concat(r):r}return e===!1?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=Xr(this,n[i].from(),n[i].to());e!==!1&&(r=r.join(e||this.lineSeparator())),t[i]=r}return t},replaceSelection:function(e,t,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:Vn(function(e,t,n){for(var i=[],r=this.sel,o=0;o<r.ranges.length;o++){var s=r.ranges[o];i[o]={from:s.from(),to:s.to(),text:this.splitLines(e[o]),origin:n}}for(var a=t&&"end"!=t&&Si(this,i,t),o=i.length-1;o>=0;o--)Ei(this,i[o]);a?Ct(this,a):this.cm&&Di(this.cm)}),undo:Vn(function(){Ri(this,"undo")}),redo:Vn(function(){Ri(this,"redo")}),undoSelection:Vn(function(){Ri(this,"undo",!0)}),redoSelection:Vn(function(){Ri(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new oo(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:vo(this.history.done),undone:vo(this.history.undone)}},setHistory:function(e){var t=this.history=new oo(this.history.maxGeneration);t.done=vo(e.done.slice(0),null,!0),t.undone=vo(e.undone.slice(0),null,!0)},addLineClass:Vn(function(e,t,n){return Bi(this,e,"gutter"==t?"gutter":"class",function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[i]){if(Ko(n).test(e[i]))return!1;e[i]+=" "+n}else e[i]=n;return!0})}),removeLineClass:Vn(function(e,t,n){return Bi(this,e,"gutter"==t?"gutter":"class",function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",r=e[i];if(!r)return!1;if(null==n)e[i]=null;else{var o=r.match(Ko(n));if(!o)return!1;var s=o.index+o[0].length;e[i]=r.slice(0,o.index)+(o.index&&s!=r.length?" ":"")+r.slice(s)||null}return!0})}),addLineWidget:Vn(function(e,t,n){return Er(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Gi(this,mt(this,e),mt(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=mt(this,e),Gi(this,e,e,n,"bookmark")},findMarksAt:function(e){e=mt(this,e);var t=[],n=Jr(this,e.line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},findMarks:function(e,t,n){e=mt(this,e),t=mt(this,t);var i=[],r=e.line;return this.iter(e.line,t.line+1,function(o){var s=o.markedSpans;if(s)for(var a=0;a<s.length;a++){var l=s[a];r==e.line&&e.ch>l.to||null==l.from&&r!=e.line||r==t.line&&l.from>t.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++r}),i},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)}),e},posFromIndex:function(e){var t,n=this.first;return this.iter(function(i){var r=i.text.length+1;return r>e?(t=e,!0):(e-=r,void++n)}),mt(this,$s(n,t))},indexFromPos:function(e){e=mt(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new _a(Zr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new _a(Zr(this,t,n),e.mode||this.modeOption,t,this.lineSep);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Ji(i,Qi(this)),i},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){var i=this.linked[n];if(i.doc==t){this.linked.splice(n,1),t.unlinkDoc(this),Xi(Qi(this));break}}if(t.history==this.history){var r=[t.id];Yr(t,function(e){r.push(e.id)},!0),t.history=new oo(null),t.history.done=vo(this.history.done,r),t.history.undone=vo(this.history.undone,r)}},iterLinkedDocs:function(e){Yr(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):el(e)},lineSeparator:function(){return this.lineSep||"\n"}}),_a.prototype.eachLine=_a.prototype.iter;var Sa="iter insert remove copy getEditor constructor".split(" ");for(var Ca in _a.prototype)_a.prototype.hasOwnProperty(Ca)&&Lo(Sa,Ca)<0&&(e.prototype[Ca]=function(e){return function(){return e.apply(this.doc,arguments)}}(_a.prototype[Ca]));Ao(_a);var Ea=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Ia=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},Ra=e.e_stop=function(e){Ea(e),Ia(e)},Ta=e.on=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={}),r=i[t]||(i[t]=[]);r.push(n)}},Aa=[],Ma=e.off=function(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else for(var i=So(e,t,!1),r=0;r<i.length;++r)if(i[r]==n){i.splice(r,1);break}},Fa=e.signal=function(e,t){var n=So(e,t,!0);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)},Va=null,La=30,Oa=e.Pass={toString:function(){return"CodeMirror.Pass"}},Na={scroll:!1},$a={origin:"*mouse"},Da={origin:"+move"};Mo.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var Pa=e.countColumn=function(e,t,n,i,r){null==t&&(t=e.search(/[^\s ]/),-1==t&&(t=e.length));for(var o=i||0,s=r||0;;){var a=e.indexOf("	",o);if(0>a||a>=t)return s+(t-o);s+=a-o,s+=n-s%n,o=a+1}},ja=e.findColumn=function(e,t,n){for(var i=0,r=0;;){var o=e.indexOf("	",i);-1==o&&(o=e.length);var s=o-i;if(o==e.length||r+s>=t)return i+Math.min(s,t-r);if(r+=o-i,r+=n-r%n,i=o+1,r>=t)return i}},Ba=[""],Ua=function(e){e.select()};Rs?Ua=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:ys&&(Ua=function(e){try{e.select()}catch(t){}});var Ha,za=/[ßև֐-״؀-ۿ぀-ゟ゠-ヿ㐀-䶵一-鿌가-힯]/,qa=e.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||za.test(e))},Wa=/[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٞۖ-ۜ۞-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࠭ऀ-ं़ु-ै्॑-ॕॢॣঁ়াু-ৄ্ৗৢৣਁਂ਼ੁੂੇੈੋ-੍ੑੰੱੵઁં઼ુ-ૅેૈ્ૢૣଁ଼ାିୁ-ୄ୍ୖୗୢୣஂாீ்ௗా-ీె-ైొ-్ౕౖౢౣ಼ಿೂೆೌ್ೕೖೢೣാു-ൄ്ൗൢൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົຼ່-ໍཱ༹༘༙༵༷-ཾྀ-྄྆྇ྐ-ྗྙ-ྼ࿆ိ-ူဲ-့္်ွှၘၙၞ-ၠၱ-ၴႂႅႆႍႝ፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧᤨᤲ᤹-᤻ᨘᨗᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀᮁᮢ-ᮥᮨᮩᰬ-ᰳᰶ᰷᳐-᳔᳒-᳢᳠-᳨᳭᷀-᷽ᷦ-᷿‌‍⃐-⃰⳯-⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠥꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꨩ-ꨮꨱꨲꨵꨶꩃꩌꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯥꯨ꯭�-�ﬞ︀-️︠-︦ﾞﾟ]/;Ha=document.createRange?function(e,t,n,i){var r=document.createRange();return r.setEnd(i||e,n),r.setStart(e,t),r}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(r){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i};var Ka=e.contains=function(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do if(11==t.nodeType&&(t=t.host),t==e)return!0;while(t=t.parentNode)};ys&&11>ws&&(Wo=function(){try{return document.activeElement}catch(e){return document.body}});var Ga,Ya,Qa=e.rmClass=function(e,t){var n=e.className,i=Ko(t).exec(n);if(i){var r=n.slice(i.index+i[0].length);e.className=n.slice(0,i.index)+(r?i[1]+r:"")}},Ja=e.addClass=function(e,t){var n=e.className;Ko(t).test(n)||(e.className+=(n?" ":"")+t)},Xa=!1,Za=function(){if(ys&&9>ws)return!1;var e=Ho("div");return"draggable"in e||"dragDrop"in e}(),el=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;i>=t;){var r=e.indexOf("\n",t);-1==r&&(r=e.length);var o=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),t+=s+1):(n.push(o),t=r+1)}return n}:function(e){return e.split(/\r\n?|\n/)},tl=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},nl=function(){var e=Ho("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),il=null,rl=e.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};!function(){for(var e=0;10>e;e++)rl[e+48]=rl[e+96]=String(e);for(var e=65;90>=e;e++)rl[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)rl[e+111]=rl[e+63235]="F"+e}();var ol,sl=function(){function e(e){return 247>=e?n.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1773>=e?i.charAt(e-1536):e>=1774&&2220>=e?"r":e>=8192&&8203>=e?"w":8204==e?"b":"L"}function t(e,t,n){this.level=e,this.from=t,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",i="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",r=/[֐-״؀-ۿ܀-ࢬ]/,o=/[stwN]/,s=/[LRr]/,a=/[Lb1n]/,l=/[1n]/,c="L";return function(n){if(!r.test(n))return!1;for(var i,u=n.length,d=[],h=0;u>h;++h)d.push(i=e(n.charCodeAt(h)));for(var h=0,f=c;u>h;++h){var i=d[h];"m"==i?d[h]=f:f=i}for(var h=0,p=c;u>h;++h){var i=d[h];"1"==i&&"r"==p?d[h]="n":s.test(i)&&(p=i,"r"==i&&(d[h]="R"))}for(var h=1,f=d[0];u-1>h;++h){var i=d[h];"+"==i&&"1"==f&&"1"==d[h+1]?d[h]="1":","!=i||f!=d[h+1]||"1"!=f&&"n"!=f||(d[h]=f),f=i}for(var h=0;u>h;++h){var i=d[h];if(","==i)d[h]="N";else if("%"==i){for(var m=h+1;u>m&&"%"==d[m];++m);for(var g=h&&"!"==d[h-1]||u>m&&"1"==d[m]?"1":"N",v=h;m>v;++v)d[v]=g;h=m-1}}for(var h=0,p=c;u>h;++h){var i=d[h];"L"==p&&"1"==i?d[h]="L":s.test(i)&&(p=i)}for(var h=0;u>h;++h)if(o.test(d[h])){for(var m=h+1;u>m&&o.test(d[m]);++m);for(var b="L"==(h?d[h-1]:c),y="L"==(u>m?d[m]:c),g=b||y?"L":"R",v=h;m>v;++v)d[v]=g;h=m-1}for(var w,x=[],h=0;u>h;)if(a.test(d[h])){var k=h;for(++h;u>h&&a.test(d[h]);++h);x.push(new t(0,k,h))}else{var _=h,S=x.length;for(++h;u>h&&"L"!=d[h];++h);for(var v=_;h>v;)if(l.test(d[v])){v>_&&x.splice(S,0,new t(1,_,v));var C=v;for(++v;h>v&&l.test(d[v]);++v);x.splice(S,0,new t(2,C,v)),_=v}else++v;h>_&&x.splice(S,0,new t(1,_,h))}return 1==x[0].level&&(w=n.match(/^\s+/))&&(x[0].from=w[0].length,x.unshift(new t(0,0,w[0].length))),1==Vo(x).level&&(w=n.match(/\s+$/))&&(Vo(x).to-=w[0].length,x.push(new t(0,u-w[0].length,u))),2==x[0].level&&x.unshift(new t(1,x[0].to,x[0].to)),x[0].level!=Vo(x).level&&x.push(new t(x[0].level,u,u)),x}}();return e.version="5.11.0",e})},{}],617:[function(e,t,n){!function(i){"object"==typeof n&&"object"==typeof t?i(e("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){"use strict";function t(e,t,n){return/^(?:operator|sof|keyword c|case|new|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}e.defineMode("javascript",function(n,i){function r(e){for(var t,n=!1,i=!1;null!=(t=e.next());){if(!n){if("/"==t&&!i)return;"["==t?i=!0:i&&"]"==t&&(i=!1)}n=!n&&"\\"==t}}function o(e,t,n){return wt=e,xt=n,t}function s(e,n){var i=e.next();if('"'==i||"'"==i)return n.tokenize=a(i),n.tokenize(e,n);if("."==i&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return o("number","number");if("."==i&&e.match(".."))return o("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(i))return o(i);if("="==i&&e.eat(">"))return o("=>","operator");if("0"==i&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),o("number","number");if("0"==i&&e.eat(/o/i))return e.eatWhile(/[0-7]/i),o("number","number");if("0"==i&&e.eat(/b/i))return e.eatWhile(/[01]/i),o("number","number");if(/\d/.test(i))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),o("number","number");if("/"==i)return e.eat("*")?(n.tokenize=l,l(e,n)):e.eat("/")?(e.skipToEnd(),o("comment","comment")):t(e,n,1)?(r(e),e.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),o("regexp","string-2")):(e.eatWhile(Tt),o("operator","operator",e.current()));if("`"==i)return n.tokenize=c,c(e,n);if("#"==i)return e.skipToEnd(),o("error","error");if(Tt.test(i))return e.eatWhile(Tt),o("operator","operator",e.current());if(It.test(i)){e.eatWhile(It);var s=e.current(),u=Rt.propertyIsEnumerable(s)&&Rt[s];return u&&"."!=n.lastType?o(u.type,u.style,s):o("variable","variable",s)}}function a(e){return function(t,n){var i,r=!1;if(St&&"@"==t.peek()&&t.match(At))return n.tokenize=s,o("jsonld-keyword","meta");for(;null!=(i=t.next())&&(i!=e||r);)r=!r&&"\\"==i;return r||(n.tokenize=s),o("string","string")}}function l(e,t){for(var n,i=!1;n=e.next();){if("/"==n&&i){t.tokenize=s;break}i="*"==n}return o("comment","comment")}function c(e,t){for(var n,i=!1;null!=(n=e.next());){if(!i&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=s;break}i=!i&&"\\"==n}return o("quasi","string-2",e.current())}function u(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(0>n)){for(var i=0,r=!1,o=n-1;o>=0;--o){var s=e.string.charAt(o),a=Mt.indexOf(s);if(a>=0&&3>a){if(!i){++o;break}if(0==--i)break}else if(a>=3&&6>a)++i;else if(It.test(s))r=!0;else{if(/["'\/]/.test(s))return;if(r&&!i){++o;break}}}r&&!i&&(t.fatArrowAt=o)}}function d(e,t,n,i,r,o){this.indented=e,this.column=t,this.type=n,this.prev=r,this.info=o,null!=i&&(this.align=i)}function h(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var i=e.context;i;i=i.prev)for(var n=i.vars;n;n=n.next)if(n.name==t)return!0}function f(e,t,n,i,r){var o=e.cc;for(Vt.state=e,Vt.stream=r,Vt.marked=null,Vt.cc=o,Vt.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;){var s=o.length?o.pop():Ct?_:k;if(s(n,i)){for(;o.length&&o[o.length-1].lex;)o.pop()();return Vt.marked?Vt.marked:"variable"==n&&h(e,i)?"variable-2":t}}}function p(){for(var e=arguments.length-1;e>=0;e--)Vt.cc.push(arguments[e])}function m(){return p.apply(null,arguments),!0}function g(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var n=Vt.state;if(Vt.marked="def",n.context){if(t(n.localVars))return;n.localVars={name:e,next:n.localVars}}else{if(t(n.globalVars))return;i.globalVars&&(n.globalVars={name:e,next:n.globalVars})}}function v(){Vt.state.context={prev:Vt.state.context,vars:Vt.state.localVars},Vt.state.localVars=Lt}function b(){Vt.state.localVars=Vt.state.context.vars,Vt.state.context=Vt.state.context.prev}function y(e,t){var n=function(){var n=Vt.state,i=n.indented;if("stat"==n.lexical.type)i=n.lexical.indented;else for(var r=n.lexical;r&&")"==r.type&&r.align;r=r.prev)i=r.indented;n.lexical=new d(i,Vt.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function w(){var e=Vt.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function x(e){function t(n){return n==e?m():";"==e?p():m(t)}return t}function k(e,t){return"var"==e?m(y("vardef",t.length),G,x(";"),w):"keyword a"==e?m(y("form"),_,k,w):"keyword b"==e?m(y("form"),k,w):"{"==e?m(y("}"),z,w):";"==e?m():"if"==e?("else"==Vt.state.lexical.info&&Vt.state.cc[Vt.state.cc.length-1]==w&&Vt.state.cc.pop()(),m(y("form"),_,k,w,Z)):"function"==e?m(ot):"for"==e?m(y("form"),et,k,w):"variable"==e?m(y("stat"),$):"switch"==e?m(y("form"),_,y("}","switch"),x("{"),z,w,w):"case"==e?m(_,x(":")):"default"==e?m(x(":")):"catch"==e?m(y("form"),v,x("("),st,x(")"),k,w,b):"class"==e?m(y("form"),at,w):"export"==e?m(y("stat"),dt,w):"import"==e?m(y("stat"),ht,w):"module"==e?m(y("form"),Y,y("}"),x("{"),z,w,w):p(y("stat"),_,x(";"),w)}function _(e){return C(e,!1)}function S(e){return C(e,!0)}function C(e,t){if(Vt.state.fatArrowAt==Vt.stream.start){var n=t?V:F;if("("==e)return m(v,y(")"),U(Y,")"),w,x("=>"),n,b);if("variable"==e)return p(v,Y,x("=>"),n,b)}var i=t?T:R;return Ft.hasOwnProperty(e)?m(i):"function"==e?m(ot,i):"keyword c"==e?m(t?I:E):"("==e?m(y(")"),E,bt,x(")"),w,i):"operator"==e||"spread"==e?m(t?S:_):"["==e?m(y("]"),gt,w,i):"{"==e?H(P,"}",null,i):"quasi"==e?p(A,i):"new"==e?m(L(t)):m()}function E(e){return e.match(/[;\}\)\],]/)?p():p(_)}function I(e){return e.match(/[;\}\)\],]/)?p():p(S)}function R(e,t){return","==e?m(_):T(e,t,!1)}function T(e,t,n){var i=0==n?R:T,r=0==n?_:S;return"=>"==e?m(v,n?V:F,b):"operator"==e?/\+\+|--/.test(t)?m(i):"?"==t?m(_,x(":"),r):m(r):"quasi"==e?p(A,i):";"!=e?"("==e?H(S,")","call",i):"."==e?m(D,i):"["==e?m(y("]"),E,x("]"),w,i):void 0:void 0}function A(e,t){return"quasi"!=e?p():"${"!=t.slice(t.length-2)?m(A):m(_,M)}function M(e){return"}"==e?(Vt.marked="string-2",Vt.state.tokenize=c,m(A)):void 0}function F(e){return u(Vt.stream,Vt.state),p("{"==e?k:_)}function V(e){return u(Vt.stream,Vt.state),p("{"==e?k:S)}function L(e){return function(t){return"."==t?m(e?N:O):p(e?S:_)}}function O(e,t){return"target"==t?(Vt.marked="keyword",m(R)):void 0}function N(e,t){return"target"==t?(Vt.marked="keyword",m(T)):void 0}function $(e){return":"==e?m(w,k):p(R,x(";"),w)}function D(e){return"variable"==e?(Vt.marked="property",m()):void 0}function P(e,t){return"variable"==e||"keyword"==Vt.style?(Vt.marked="property",m("get"==t||"set"==t?j:B)):"number"==e||"string"==e?(Vt.marked=St?"property":Vt.style+" property",m(B)):"jsonld-keyword"==e?m(B):"modifier"==e?m(P):"["==e?m(_,x("]"),B):"spread"==e?m(_):void 0}function j(e){return"variable"!=e?p(B):(Vt.marked="property",m(ot))}function B(e){return":"==e?m(S):"("==e?p(ot):void 0}function U(e,t){function n(i){if(","==i){var r=Vt.state.lexical;return"call"==r.info&&(r.pos=(r.pos||0)+1),m(e,n)}return i==t?m():m(x(t))}return function(i){return i==t?m():p(e,n)}}function H(e,t,n){for(var i=3;i<arguments.length;i++)Vt.cc.push(arguments[i]);return m(y(t,n),U(e,t),w)}function z(e){return"}"==e?m():p(k,z)}function q(e){return Et&&":"==e?m(K):void 0}function W(e,t){return"="==t?m(S):void 0}function K(e){return"variable"==e?(Vt.marked="variable-3",m()):void 0}function G(){return p(Y,q,J,X)}function Y(e,t){return"modifier"==e?m(Y):"variable"==e?(g(t),m()):"spread"==e?m(Y):"["==e?H(Y,"]"):"{"==e?H(Q,"}"):void 0}function Q(e,t){return"variable"!=e||Vt.stream.match(/^\s*:/,!1)?("variable"==e&&(Vt.marked="property"),"spread"==e?m(Y):"}"==e?p():m(x(":"),Y,J)):(g(t),m(J))}function J(e,t){return"="==t?m(S):void 0}function X(e){return","==e?m(G):void 0}function Z(e,t){return"keyword b"==e&&"else"==t?m(y("form","else"),k,w):void 0}function et(e){return"("==e?m(y(")"),tt,x(")"),w):void 0}function tt(e){return"var"==e?m(G,x(";"),it):";"==e?m(it):"variable"==e?m(nt):p(_,x(";"),it)}function nt(e,t){return"in"==t||"of"==t?(Vt.marked="keyword",m(_)):m(R,it)}function it(e,t){return";"==e?m(rt):"in"==t||"of"==t?(Vt.marked="keyword",m(_)):p(_,x(";"),rt)}function rt(e){")"!=e&&m(_)}function ot(e,t){return"*"==t?(Vt.marked="keyword",m(ot)):"variable"==e?(g(t),m(ot)):"("==e?m(v,y(")"),U(st,")"),w,k,b):void 0}function st(e){return"spread"==e?m(st):p(Y,q,W)}function at(e,t){return"variable"==e?(g(t),m(lt)):void 0}function lt(e,t){return"extends"==t?m(_,lt):"{"==e?m(y("}"),ct,w):void 0}function ct(e,t){return"variable"==e||"keyword"==Vt.style?"static"==t?(Vt.marked="keyword",m(ct)):(Vt.marked="property","get"==t||"set"==t?m(ut,ot,ct):m(ot,ct)):"*"==t?(Vt.marked="keyword",m(ct)):";"==e?m(ct):"}"==e?m():void 0}function ut(e){return"variable"!=e?p():(Vt.marked="property",m())}function dt(e,t){return"*"==t?(Vt.marked="keyword",m(mt,x(";"))):"default"==t?(Vt.marked="keyword",m(_,x(";"))):p(k)}function ht(e){return"string"==e?m():p(ft,mt)}function ft(e,t){return"{"==e?H(ft,"}"):("variable"==e&&g(t),"*"==t&&(Vt.marked="keyword"),m(pt))}function pt(e,t){return"as"==t?(Vt.marked="keyword",m(ft)):void 0}function mt(e,t){return"from"==t?(Vt.marked="keyword",m(_)):void 0}function gt(e){return"]"==e?m():p(S,vt)}function vt(e){return"for"==e?p(bt,x("]")):","==e?m(U(I,"]")):p(U(S,"]"))}function bt(e){return"for"==e?m(et,bt):"if"==e?m(_,bt):void 0}function yt(e,t){return"operator"==e.lastType||","==e.lastType||Tt.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}var wt,xt,kt=n.indentUnit,_t=i.statementIndent,St=i.jsonld,Ct=i.json||St,Et=i.typescript,It=i.wordCharacters||/[\w$¡-￿]/,Rt=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),i=e("keyword c"),r=e("operator"),o={type:"atom",style:"atom"},s={"if":e("if"),"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":i,"break":i,"continue":i,"new":e("new"),"delete":i,"throw":i,"debugger":i,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":r,"typeof":r,"instanceof":r,"true":o,"false":o,"null":o,undefined:o,NaN:o,Infinity:o,"this":e("this"),"class":e("class"),"super":e("atom"),"yield":i,"export":e("export"),"import":e("import"),"extends":i};if(Et){var a={type:"variable",style:"variable-3"},l={"interface":e("class"),"implements":i,namespace:i,module:e("module"),"enum":e("module"),"public":e("modifier"),"private":e("modifier"),"protected":e("modifier"),"abstract":e("modifier"),as:r,string:a,number:a,"boolean":a,any:a};for(var c in l)s[c]=l[c]}return s}(),Tt=/[+\-*&%=<>!?|~^]/,At=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Mt="([{}])",Ft={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Vt={state:null,column:null,marked:null,cc:null},Lt={name:"this",next:{name:"arguments"}};return w.lex=!0,{startState:function(e){var t={tokenize:s,lastType:"sof",cc:[],lexical:new d((e||0)-kt,0,"block",!1),localVars:i.localVars,context:i.localVars&&{vars:i.localVars},indented:e||0};return i.globalVars&&"object"==typeof i.globalVars&&(t.globalVars=i.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),u(e,t)),t.tokenize!=l&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==wt?n:(t.lastType="operator"!=wt||"++"!=xt&&"--"!=xt?wt:"incdec",f(t,n,wt,xt,e))},indent:function(t,n){if(t.tokenize==l)return e.Pass;if(t.tokenize!=s)return 0;var r=n&&n.charAt(0),o=t.lexical;if(!/^\s*else\b/.test(n))for(var a=t.cc.length-1;a>=0;--a){var c=t.cc[a];if(c==w)o=o.prev;else if(c!=Z)break}"stat"==o.type&&"}"==r&&(o=o.prev),_t&&")"==o.type&&"stat"==o.prev.type&&(o=o.prev);var u=o.type,d=r==u;return"vardef"==u?o.indented+("operator"==t.lastType||","==t.lastType?o.info+1:0):"form"==u&&"{"==r?o.indented:"form"==u?o.indented+kt:"stat"==u?o.indented+(yt(t,n)?_t||kt:0):"switch"!=o.info||d||0==i.doubleIndentSwitch?o.align?o.column+(d?0:1):o.indented+(d?0:kt):o.indented+(/^(?:case|default)\b/.test(n)?kt:2*kt)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Ct?null:"/*",blockCommentEnd:Ct?null:"*/",lineComment:Ct?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Ct?"json":"javascript",jsonldMode:St,jsonMode:Ct,expressionAllowed:t,skipExpression:function(e){var t=e.cc[e.cc.length-1];(t==_||t==S)&&e.cc.pop()}}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})})},{"../../lib/codemirror":616}],618:[function(e,t,n){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===g(e)}function i(e){return"boolean"==typeof e}function r(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function l(e){return"symbol"==typeof e}function c(e){return void 0===e}function u(e){return"[object RegExp]"===g(e)}function d(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===g(e)}function f(e){return"[object Error]"===g(e)||e instanceof Error}function p(e){return"function"==typeof e}function m(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function g(e){return Object.prototype.toString.call(e)}n.isArray=t,n.isBoolean=i,n.isNull=r,n.isNullOrUndefined=o,n.isNumber=s,n.isString=a,n.isSymbol=l,n.isUndefined=c,n.isRegExp=u,n.isObject=d,n.isDate=h,n.isError=f,n.isFunction=p,n.isPrimitive=m,n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":687}],619:[function(e,t){(function(n){function i(e){this.curveType=a[e],this.curveType||(this.curveType={name:e}),this.curve=new o.ec(this.curveType.name),this.keys=void 0}function r(e,t,i){Array.isArray(e)||(e=e.toArray());var r=new n(e);if(i&&r.length<i){var o=new n(i-r.length);o.fill(0),r=n.concat([o,r])}return t?r.toString(t):r}var o=e("elliptic"),s=e("bn.js");t.exports=function(e){return new i(e)};var a={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};a.p224=a.secp224r1,a.p256=a.secp256r1=a.prime256v1,a.p192=a.secp192r1=a.prime192v1,a.p384=a.secp384r1,a.p521=a.secp521r1,i.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},i.prototype.computeSecret=function(e,t,i){t=t||"utf8",n.isBuffer(e)||(e=new n(e,t));var o=this.curve.keyFromPublic(e).getPublic(),s=o.mul(this.keys.getPrivate()).getX();return r(s,i,this.curveType.byteLength)},i.prototype.getPublicKey=function(e,t){var n=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(n[0]=n[n.length-1]%2?7:6),r(n,e)},i.prototype.getPrivateKey=function(e){return r(this.keys.getPrivate(),e)},i.prototype.setPublicKey=function(e,t){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),this.keys._importPublic(e),this},i.prototype.setPrivateKey=function(e,t){t=t||"utf8",n.isBuffer(e)||(e=new n(e,t));var i=new s(e);return i=i.toString(16),this.keys._importPrivate(i),this}}).call(this,e("buffer").Buffer)},{"bn.js":572,buffer:605,elliptic:639}],620:[function(e,t){(function(n){"use strict";function i(e){c.call(this,"digest"),this._hash=e,this.buffers=[]}function r(e){c.call(this,"digest"),this._hash=e}var o=e("inherits"),s=e("./md5"),a=e("ripemd160"),l=e("sha.js"),c=e("cipher-base");o(i,c),i.prototype._update=function(e){this.buffers.push(e)},i.prototype._final=function(){var e=n.concat(this.buffers),t=this._hash(e);return this.buffers=null,t},o(r,c),r.prototype._update=function(e){this._hash.update(e)},r.prototype._final=function(){return this._hash.digest()},t.exports=function(e){return e=e.toLowerCase(),"md5"===e?new i(s):"rmd160"===e||"ripemd160"===e?new i(a):new r(l(e))}}).call(this,e("buffer").Buffer)},{"./md5":622,buffer:605,"cipher-base":607,inherits:623,ripemd160:719,"sha.js":721}],621:[function(e,t,n){(function(e){"use strict";function t(t,n){if(t.length%o!==0){var i=t.length+(o-t.length%o);t=e.concat([t,s],i)}for(var r=[],a=n?t.readInt32BE:t.readInt32LE,l=0;l<t.length;l+=o)r.push(a.call(t,l));return r}function i(t,n,i){for(var r=new e(n),o=i?r.writeInt32BE:r.writeInt32LE,s=0;s<t.length;s++)o.call(r,t[s],4*s,!0);return r}function r(n,r,o,s){e.isBuffer(n)||(n=new e(n));var l=r(t(n,s),n.length*a);return i(l,o,s)}var o=4,s=new e(o);s.fill(0);var a=8;n.hash=r}).call(this,e("buffer").Buffer)},{buffer:605}],622:[function(e,t){"use strict";function n(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var n=1732584193,i=-271733879,c=-1732584194,u=271733878,d=0;d<e.length;d+=16){var h=n,f=i,p=c,m=u;n=r(n,i,c,u,e[d+0],7,-680876936),u=r(u,n,i,c,e[d+1],12,-389564586),c=r(c,u,n,i,e[d+2],17,606105819),i=r(i,c,u,n,e[d+3],22,-1044525330),n=r(n,i,c,u,e[d+4],7,-176418897),u=r(u,n,i,c,e[d+5],12,1200080426),c=r(c,u,n,i,e[d+6],17,-1473231341),i=r(i,c,u,n,e[d+7],22,-45705983),n=r(n,i,c,u,e[d+8],7,1770035416),u=r(u,n,i,c,e[d+9],12,-1958414417),c=r(c,u,n,i,e[d+10],17,-42063),i=r(i,c,u,n,e[d+11],22,-1990404162),n=r(n,i,c,u,e[d+12],7,1804603682),u=r(u,n,i,c,e[d+13],12,-40341101),c=r(c,u,n,i,e[d+14],17,-1502002290),i=r(i,c,u,n,e[d+15],22,1236535329),n=o(n,i,c,u,e[d+1],5,-165796510),u=o(u,n,i,c,e[d+6],9,-1069501632),c=o(c,u,n,i,e[d+11],14,643717713),i=o(i,c,u,n,e[d+0],20,-373897302),n=o(n,i,c,u,e[d+5],5,-701558691),u=o(u,n,i,c,e[d+10],9,38016083),c=o(c,u,n,i,e[d+15],14,-660478335),i=o(i,c,u,n,e[d+4],20,-405537848),n=o(n,i,c,u,e[d+9],5,568446438),u=o(u,n,i,c,e[d+14],9,-1019803690),c=o(c,u,n,i,e[d+3],14,-187363961),i=o(i,c,u,n,e[d+8],20,1163531501),n=o(n,i,c,u,e[d+13],5,-1444681467),u=o(u,n,i,c,e[d+2],9,-51403784),c=o(c,u,n,i,e[d+7],14,1735328473),i=o(i,c,u,n,e[d+12],20,-1926607734),n=s(n,i,c,u,e[d+5],4,-378558),u=s(u,n,i,c,e[d+8],11,-2022574463),c=s(c,u,n,i,e[d+11],16,1839030562),i=s(i,c,u,n,e[d+14],23,-35309556),n=s(n,i,c,u,e[d+1],4,-1530992060),u=s(u,n,i,c,e[d+4],11,1272893353),c=s(c,u,n,i,e[d+7],16,-155497632),i=s(i,c,u,n,e[d+10],23,-1094730640),n=s(n,i,c,u,e[d+13],4,681279174),u=s(u,n,i,c,e[d+0],11,-358537222),c=s(c,u,n,i,e[d+3],16,-722521979),i=s(i,c,u,n,e[d+6],23,76029189),n=s(n,i,c,u,e[d+9],4,-640364487),u=s(u,n,i,c,e[d+12],11,-421815835),c=s(c,u,n,i,e[d+15],16,530742520),i=s(i,c,u,n,e[d+2],23,-995338651),n=a(n,i,c,u,e[d+0],6,-198630844),u=a(u,n,i,c,e[d+7],10,1126891415),c=a(c,u,n,i,e[d+14],15,-1416354905),i=a(i,c,u,n,e[d+5],21,-57434055),n=a(n,i,c,u,e[d+12],6,1700485571),u=a(u,n,i,c,e[d+3],10,-1894986606),c=a(c,u,n,i,e[d+10],15,-1051523),i=a(i,c,u,n,e[d+1],21,-2054922799),n=a(n,i,c,u,e[d+8],6,1873313359),u=a(u,n,i,c,e[d+15],10,-30611744),c=a(c,u,n,i,e[d+6],15,-1560198380),i=a(i,c,u,n,e[d+13],21,1309151649),n=a(n,i,c,u,e[d+4],6,-145523070),u=a(u,n,i,c,e[d+11],10,-1120210379),c=a(c,u,n,i,e[d+2],15,718787259),i=a(i,c,u,n,e[d+9],21,-343485551),n=l(n,h),i=l(i,f),c=l(c,p),u=l(u,m)
}return Array(n,i,c,u)}function i(e,t,n,i,r,o){return l(c(l(l(t,e),l(i,o)),r),n)}function r(e,t,n,r,o,s,a){return i(t&n|~t&r,e,t,o,s,a)}function o(e,t,n,r,o,s,a){return i(t&r|n&~r,e,t,o,s,a)}function s(e,t,n,r,o,s,a){return i(t^n^r,e,t,o,s,a)}function a(e,t,n,r,o,s,a){return i(n^(t|~r),e,t,o,s,a)}function l(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}function c(e,t){return e<<t|e>>>32-t}var u=e("./helpers");t.exports=function(e){return u.hash(e,n,16)}},{"./helpers":621}],623:[function(e,t,n){arguments[4][274][0].apply(n,arguments)},{dup:274}],624:[function(e,t){(function(n){"use strict";function i(e,t){s.call(this),e=e.toLowerCase(),"string"==typeof t&&(t=new n(t));var i="sha512"===e||"sha384"===e?128:64;this._alg=e,this._key=t,t.length>i?t=r(e).update(t).digest():t.length<i&&(t=n.concat([t,a],i));for(var o=this._ipad=new n(i),l=this._opad=new n(i),c=0;i>c;c++)o[c]=54^t[c],l[c]=92^t[c];this._hash=r(e).update(o)}var r=e("create-hash/browser"),o=e("inherits"),s=e("stream").Transform,a=new n(128);a.fill(0),o(i,s),i.prototype.update=function(e,t){return this._hash.update(e,t),this},i.prototype._transform=function(e,t,n){this._hash.update(e),n()},i.prototype._flush=function(e){this.push(this.digest()),e()},i.prototype.digest=function(e){var t=this._hash.digest();return r(this._alg).update(this._opad).update(t).digest(e)},t.exports=function(e,t){return new i(e,t)}}).call(this,e("buffer").Buffer)},{buffer:605,"create-hash/browser":620,inherits:625,stream:729}],625:[function(e,t,n){arguments[4][274][0].apply(n,arguments)},{dup:274}],626:[function(e,t,n){"use strict";n.randomBytes=n.rng=n.pseudoRandomBytes=n.prng=e("randombytes"),n.createHash=n.Hash=e("create-hash"),n.createHmac=n.Hmac=e("create-hmac");var i=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(Object.keys(e("browserify-sign/algos")));n.getHashes=function(){return i};var r=e("pbkdf2");n.pbkdf2=r.pbkdf2,n.pbkdf2Sync=r.pbkdf2Sync;var o=e("browserify-cipher");["Cipher","createCipher","Cipheriv","createCipheriv","Decipher","createDecipher","Decipheriv","createDecipheriv","getCiphers","listCiphers"].forEach(function(e){n[e]=o[e]});var s=e("diffie-hellman");["DiffieHellmanGroup","createDiffieHellmanGroup","getDiffieHellman","createDiffieHellman","DiffieHellman"].forEach(function(e){n[e]=s[e]});var a=e("browserify-sign");["createSign","Sign","createVerify","Verify"].forEach(function(e){n[e]=a[e]}),n.createECDH=e("create-ecdh");var l=e("public-encrypt");["publicEncrypt","privateEncrypt","publicDecrypt","privateDecrypt"].forEach(function(e){n[e]=l[e]}),["createCredentials"].forEach(function(e){n[e]=function(){throw new Error(["sorry, "+e+" is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))}})},{"browserify-cipher":591,"browserify-sign":597,"browserify-sign/algos":596,"create-ecdh":619,"create-hash":620,"create-hmac":624,"diffie-hellman":634,pbkdf2:703,"public-encrypt":706,randombytes:717}],627:[function(e,t,n){"use strict";n.utils=e("./des/utils"),n.Cipher=e("./des/cipher"),n.DES=e("./des/des"),n.CBC=e("./des/cbc"),n.EDE=e("./des/ede")},{"./des/cbc":628,"./des/cipher":629,"./des/des":630,"./des/ede":631,"./des/utils":632}],628:[function(e,t,n){"use strict";function i(e){o.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}function r(e){function t(t){e.call(this,t),this._cbcInit()}s(t,e);for(var n=Object.keys(a),i=0;i<n.length;i++){var r=n[i];t.prototype[r]=a[r]}return t.create=function(e){return new t(e)},t}var o=e("minimalistic-assert"),s=e("inherits"),a={};n.instantiate=r,a._cbcInit=function(){var e=new i(this.options.iv);this._cbcState=e},a._update=function(e,t,n,i){var r=this._cbcState,o=this.constructor.super_.prototype,s=r.iv;if("encrypt"===this.type){for(var a=0;a<this.blockSize;a++)s[a]^=e[t+a];o._update.call(this,s,0,n,i);for(var a=0;a<this.blockSize;a++)s[a]=n[i+a]}else{o._update.call(this,e,t,n,i);for(var a=0;a<this.blockSize;a++)n[i+a]^=s[a];for(var a=0;a<this.blockSize;a++)s[a]=e[t+a]}}},{inherits:633,"minimalistic-assert":694}],629:[function(e,t){"use strict";function n(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}var i=e("minimalistic-assert");t.exports=n,n.prototype._init=function(){},n.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},n.prototype._buffer=function(e,t){for(var n=Math.min(this.buffer.length-this.bufferOff,e.length-t),i=0;n>i;i++)this.buffer[this.bufferOff+i]=e[t+i];return this.bufferOff+=n,n},n.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},n.prototype._updateEncrypt=function(e){var t=0,n=0,i=(this.bufferOff+e.length)/this.blockSize|0,r=new Array(i*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(r,n)));for(var o=e.length-(e.length-t)%this.blockSize;o>t;t+=this.blockSize)this._update(e,t,r,n),n+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return r},n.prototype._updateDecrypt=function(e){for(var t=0,n=0,i=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,r=new Array(i*this.blockSize);i>0;i--)t+=this._buffer(e,t),n+=this._flushBuffer(r,n);return t+=this._buffer(e,t),r},n.prototype.final=function(e){var t;e&&(t=this.update(e));var n;return n="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(n):n},n.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},n.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},n.prototype._unpad=function(e){return e},n.prototype._finalDecrypt=function(){i.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}},{"minimalistic-assert":694}],630:[function(e,t){"use strict";function n(){this.tmp=new Array(2),this.keys=null}function i(e){l.call(this,e);var t=new n;this._desState=t,this.deriveKeys(t,e.key)}var r=e("minimalistic-assert"),o=e("inherits"),s=e("../des"),a=s.utils,l=s.Cipher;o(i,l),t.exports=i,i.create=function(e){return new i(e)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];i.prototype.deriveKeys=function(e,t){e.keys=new Array(32),r.equal(t.length,this.blockSize,"Invalid key length");var n=a.readUInt32BE(t,0),i=a.readUInt32BE(t,4);a.pc1(n,i,e.tmp,0),n=e.tmp[0],i=e.tmp[1];for(var o=0;o<e.keys.length;o+=2){var s=c[o>>>1];n=a.r28shl(n,s),i=a.r28shl(i,s),a.pc2(n,i,e.keys,o)}},i.prototype._update=function(e,t,n,i){var r=this._desState,o=a.readUInt32BE(e,t),s=a.readUInt32BE(e,t+4);a.ip(o,s,r.tmp,0),o=r.tmp[0],s=r.tmp[1],"encrypt"===this.type?this._encrypt(r,o,s,r.tmp,0):this._decrypt(r,o,s,r.tmp,0),o=r.tmp[0],s=r.tmp[1],a.writeUInt32BE(n,o,i),a.writeUInt32BE(n,s,i+4)},i.prototype._pad=function(e,t){for(var n=e.length-t,i=t;i<e.length;i++)e[i]=n;return!0},i.prototype._unpad=function(e){for(var t=e[e.length-1],n=e.length-t;n<e.length;n++)r.equal(e[n],t);return e.slice(0,e.length-t)},i.prototype._encrypt=function(e,t,n,i,r){for(var o=t,s=n,l=0;l<e.keys.length;l+=2){var c=e.keys[l],u=e.keys[l+1];a.expand(s,e.tmp,0),c^=e.tmp[0],u^=e.tmp[1];var d=a.substitute(c,u),h=a.permute(d),f=s;s=(o^h)>>>0,o=f}a.rip(s,o,i,r)},i.prototype._decrypt=function(e,t,n,i,r){for(var o=n,s=t,l=e.keys.length-2;l>=0;l-=2){var c=e.keys[l],u=e.keys[l+1];a.expand(o,e.tmp,0),c^=e.tmp[0],u^=e.tmp[1];var d=a.substitute(c,u),h=a.permute(d),f=o;o=(s^h)>>>0,s=f}a.rip(o,s,i,r)}},{"../des":627,inherits:633,"minimalistic-assert":694}],631:[function(e,t){"use strict";function n(e,t){r.equal(t.length,24,"Invalid key length");var n=t.slice(0,8),i=t.slice(8,16),o=t.slice(16,24);this.ciphers="encrypt"===e?[l.create({type:"encrypt",key:n}),l.create({type:"decrypt",key:i}),l.create({type:"encrypt",key:o})]:[l.create({type:"decrypt",key:o}),l.create({type:"encrypt",key:i}),l.create({type:"decrypt",key:n})]}function i(e){a.call(this,e);var t=new n(this.type,this.options.key);this._edeState=t}var r=e("minimalistic-assert"),o=e("inherits"),s=e("../des"),a=s.Cipher,l=s.DES;o(i,a),t.exports=i,i.create=function(e){return new i(e)},i.prototype._update=function(e,t,n,i){var r=this._edeState;r.ciphers[0]._update(e,t,n,i),r.ciphers[1]._update(n,i,n,i),r.ciphers[2]._update(n,i,n,i)},i.prototype._pad=l.prototype._pad,i.prototype._unpad=l.prototype._unpad},{"../des":627,inherits:633,"minimalistic-assert":694}],632:[function(e,t,n){"use strict";n.readUInt32BE=function(e,t){var n=e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t];return n>>>0},n.writeUInt32BE=function(e,t,n){e[0+n]=t>>>24,e[1+n]=t>>>16&255,e[2+n]=t>>>8&255,e[3+n]=255&t},n.ip=function(e,t,n,i){for(var r=0,o=0,s=6;s>=0;s-=2){for(var a=0;24>=a;a+=8)r<<=1,r|=t>>>a+s&1;for(var a=0;24>=a;a+=8)r<<=1,r|=e>>>a+s&1}for(var s=6;s>=0;s-=2){for(var a=1;25>=a;a+=8)o<<=1,o|=t>>>a+s&1;for(var a=1;25>=a;a+=8)o<<=1,o|=e>>>a+s&1}n[i+0]=r>>>0,n[i+1]=o>>>0},n.rip=function(e,t,n,i){for(var r=0,o=0,s=0;4>s;s++)for(var a=24;a>=0;a-=8)r<<=1,r|=t>>>a+s&1,r<<=1,r|=e>>>a+s&1;for(var s=4;8>s;s++)for(var a=24;a>=0;a-=8)o<<=1,o|=t>>>a+s&1,o<<=1,o|=e>>>a+s&1;n[i+0]=r>>>0,n[i+1]=o>>>0},n.pc1=function(e,t,n,i){for(var r=0,o=0,s=7;s>=5;s--){for(var a=0;24>=a;a+=8)r<<=1,r|=t>>a+s&1;for(var a=0;24>=a;a+=8)r<<=1,r|=e>>a+s&1}for(var a=0;24>=a;a+=8)r<<=1,r|=t>>a+s&1;for(var s=1;3>=s;s++){for(var a=0;24>=a;a+=8)o<<=1,o|=t>>a+s&1;for(var a=0;24>=a;a+=8)o<<=1,o|=e>>a+s&1}for(var a=0;24>=a;a+=8)o<<=1,o|=e>>a+s&1;n[i+0]=r>>>0,n[i+1]=o>>>0},n.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var i=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];n.pc2=function(e,t,n,r){for(var o=0,s=0,a=i.length>>>1,l=0;a>l;l++)o<<=1,o|=e>>>i[l]&1;for(var l=a;l<i.length;l++)s<<=1,s|=t>>>i[l]&1;n[r+0]=o>>>0,n[r+1]=s>>>0},n.expand=function(e,t,n){var i=0,r=0;i=(1&e)<<5|e>>>27;for(var o=23;o>=15;o-=4)i<<=6,i|=e>>>o&63;for(var o=11;o>=3;o-=4)r|=e>>>o&63,r<<=6;r|=(31&e)<<1|e>>>31,t[n+0]=i>>>0,t[n+1]=r>>>0};var r=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];n.substitute=function(e,t){for(var n=0,i=0;4>i;i++){var o=e>>>18-6*i&63,s=r[64*i+o];n<<=4,n|=s}for(var i=0;4>i;i++){var o=t>>>18-6*i&63,s=r[256+64*i+o];n<<=4,n|=s}return n>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];n.permute=function(e){for(var t=0,n=0;n<o.length;n++)t<<=1,t|=e>>>o[n]&1;return t>>>0},n.padSplit=function(e,t,n){for(var i=e.toString(2);i.length<t;)i="0"+i;for(var r=[],o=0;t>o;o+=n)r.push(i.slice(o,o+n));return r.join(" ")}},{}],633:[function(e,t,n){arguments[4][274][0].apply(n,arguments)},{dup:274}],634:[function(e,t,n){(function(t){function i(e){var n=new t(s[e].prime,"hex"),i=new t(s[e].gen,"hex");return new a(n,i)}function r(e,n,i,s){return t.isBuffer(n)||void 0===l[n]?r(e,"binary",n,i):(n=n||"binary",s=s||"binary",i=i||new t([2]),t.isBuffer(i)||(i=new t(i,s)),"number"==typeof e?new a(o(e,i),i,!0):(t.isBuffer(e)||(e=new t(e,n)),new a(e,i,!0)))}var o=e("./lib/generatePrime"),s=e("./lib/primes.json"),a=e("./lib/dh"),l={binary:!0,hex:!0,base64:!0};n.DiffieHellmanGroup=n.createDiffieHellmanGroup=n.getDiffieHellman=i,n.createDiffieHellman=n.DiffieHellman=r}).call(this,e("buffer").Buffer)},{"./lib/dh":635,"./lib/generatePrime":636,"./lib/primes.json":637,buffer:605}],635:[function(e,t){(function(n){function i(e,t){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),this._pub=new l(e),this}function r(e,t){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),this._priv=new l(e),this}function o(e,t){var n=t.toString("hex"),i=[n,e.toString(16)].join("_");if(i in b)return b[i];var r=0;if(e.isEven()||!g.simpleSieve||!g.fermatTest(e)||!u.test(e))return r+=1,r+="02"===n||"05"===n?8:4,b[i]=r,r;u.test(e.shrn(1))||(r+=2);var o;switch(n){case"02":e.mod(d).cmp(h)&&(r+=8);break;case"05":o=e.mod(f),o.cmp(p)&&o.cmp(m)&&(r+=8);break;default:r+=4}return b[i]=r,r}function s(e,t,n){this.setGenerator(t),this.__prime=new l(e),this._prime=l.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,n?(this.setPublicKey=i,this.setPrivateKey=r):this._primeCode=8}function a(e,t){var i=new n(e.toArray());return t?i.toString(t):i}var l=e("bn.js"),c=e("miller-rabin"),u=new c,d=new l(24),h=new l(11),f=new l(10),p=new l(3),m=new l(7),g=e("./generatePrime"),v=e("randombytes");t.exports=s;var b={};Object.defineProperty(s.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=o(this.__prime,this.__gen)),this._primeCode}}),s.prototype.generateKeys=function(){return this._priv||(this._priv=new l(v(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},s.prototype.computeSecret=function(e){e=new l(e),e=e.toRed(this._prime);var t=e.redPow(this._priv).fromRed(),i=new n(t.toArray()),r=this.getPrime();if(i.length<r.length){var o=new n(r.length-i.length);o.fill(0),i=n.concat([o,i])}return i},s.prototype.getPublicKey=function(e){return a(this._pub,e)},s.prototype.getPrivateKey=function(e){return a(this._priv,e)},s.prototype.getPrime=function(e){return a(this.__prime,e)},s.prototype.getGenerator=function(e){return a(this._gen,e)},s.prototype.setGenerator=function(e,t){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),this.__gen=e,this._gen=new l(e),this}}).call(this,e("buffer").Buffer)},{"./generatePrime":636,"bn.js":572,buffer:605,"miller-rabin":693,randombytes:717}],636:[function(e,t){function n(){if(null!==b)return b;var e=1048576,t=[];t[0]=2;for(var n=1,i=3;e>i;i+=2){for(var r=Math.ceil(Math.sqrt(i)),o=0;n>o&&t[o]<=r&&i%t[o]!==0;o++);n!==o&&t[o]<=r||(t[n++]=i)}return b=t,t}function i(e){for(var t=n(),i=0;i<t.length;i++)if(0===e.modn(t[i]))return 0===e.cmpn(t[i])?!0:!1;return!0}function r(e){var t=a.mont(e);return 0===h.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function o(e,t){if(16>e)return new a(2===t||5===t?[140,123]:[140,39]);t=new a(t);for(var n,o;;){for(n=new a(s(Math.ceil(e/8)));n.bitLength()>e;)n.ishrn(1);if(n.isEven()&&n.iadd(d),n.testn(1)||n.iadd(h),t.cmp(h)){if(!t.cmp(f))for(;n.mod(p).cmp(m);)n.iadd(v)}else for(;n.mod(l).cmp(g);)n.iadd(v);if(o=n.shrn(1),i(o)&&i(n)&&r(o)&&r(n)&&u.test(o)&&u.test(n))return n}}var s=e("randombytes");t.exports=o,o.simpleSieve=i,o.fermatTest=r;var a=e("bn.js"),l=new a(24),c=e("miller-rabin"),u=new c,d=new a(1),h=new a(2),f=new a(5),p=(new a(16),new a(8),new a(10)),m=new a(3),g=(new a(7),new a(11)),v=new a(4),b=(new a(12),null)},{"bn.js":572,"miller-rabin":693,randombytes:717}],637:[function(e,t){t.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],638:[function(){!function(e,t){function n(e,t,n){var i=e.children(),r=!1;e.empty();for(var s=0,a=i.length;a>s;s++){var l=i.eq(s);if(e.append(l),n&&e.append(n),o(e,t)){l.remove(),r=!0;break}n&&n.detach()}return r}function i(t,n,s,a,l){var c=!1,u="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",d="script, .dotdotdot-keep";return t.contents().detach().each(function(){var h=this,f=e(h);if("undefined"==typeof h||3==h.nodeType&&0==e.trim(h.data).length)return!0;if(f.is(d))t.append(f);else{if(c)return!0;t.append(f),l&&t[t.is(u)?"after":"append"](l),o(s,a)&&(c=3==h.nodeType?r(f,n,s,a,l):i(f,n,s,a,l),c||(f.detach(),c=!0)),c||l&&l.detach()}}),c}function r(t,n,i,r,a){var u=t[0];if(!u)return!1;var h=c(u),f=-1!==h.indexOf(" ")?" ":"　",p="letter"==r.wrap?"":f,m=h.split(p),g=-1,v=-1,b=0,y=m.length-1;for(r.fallbackToLetter&&0==b&&0==y&&(p="",m=h.split(p),y=m.length-1);y>=b&&(0!=b||0!=y);){var w=Math.floor((b+y)/2);if(w==v)break;v=w,l(u,m.slice(0,v+1).join(p)+r.ellipsis),o(i,r)?(y=v,r.fallbackToLetter&&0==b&&0==y&&(p="",m=m[0].split(p),g=-1,v=-1,b=0,y=m.length-1)):(g=v,b=v)}if(-1==g||1==m.length&&0==m[0].length){var x=t.parent();t.detach();var k=a&&a.closest(x).length?a.length:0;x.contents().length>k?u=d(x.contents().eq(-1-k),n):(u=d(x,n,!0),k||x.detach()),u&&(h=s(c(u),r),l(u,h),k&&a&&e(u).parent().append(a))}else h=s(m.slice(0,g+1).join(p),r),l(u,h);return!0}function o(e,t){return e.innerHeight()>t.maxHeight}function s(t,n){for(;e.inArray(t.slice(-1),n.lastCharacter.remove)>-1;)t=t.slice(0,-1);return e.inArray(t.slice(-1),n.lastCharacter.noEllipsis)<0&&(t+=n.ellipsis),t}function a(e){return{width:e.innerWidth(),height:e.innerHeight()}}function l(e,t){e.innerText?e.innerText=t:e.nodeValue?e.nodeValue=t:e.textContent&&(e.textContent=t)}function c(e){return e.innerText?e.innerText:e.nodeValue?e.nodeValue:e.textContent?e.textContent:""}function u(e){do e=e.previousSibling;while(e&&1!==e.nodeType&&3!==e.nodeType);return e}function d(t,n,i){var r,o=t&&t[0];if(o){if(!i){if(3===o.nodeType)return o;if(e.trim(t.text()))return d(t.contents().last(),n)}for(r=u(o);!r;){if(t=t.parent(),t.is(n)||!t.length)return!1;r=u(t[0])}if(r)return d(e(r),n)}return!1}function h(t,n){return t?"string"==typeof t?(t=e(t,n),t.length?t:!1):t.jquery?t:!1:!1}function f(e){for(var t=e.innerHeight(),n=["paddingTop","paddingBottom"],i=0,r=n.length;r>i;i++){var o=parseInt(e.css(n[i]),10);isNaN(o)&&(o=0),t-=o}return t}if(!e.fn.dotdotdot){e.fn.dotdotdot=function(t){if(0==this.length)return e.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){e(this).dotdotdot(t)});var r=this;r.data("dotdotdot")&&r.trigger("destroy.dot"),r.data("dotdotdot-style",r.attr("style")||""),r.css("word-wrap","break-word"),"nowrap"===r.css("white-space")&&r.css("white-space","normal"),r.bind_events=function(){return r.bind("update.dot",function(t,a){t.preventDefault(),t.stopPropagation(),l.maxHeight="number"==typeof l.height?l.height:f(r),l.maxHeight+=l.tolerance,"undefined"!=typeof a&&(("string"==typeof a||a instanceof HTMLElement)&&(a=e("<div />").append(a).contents()),a instanceof e&&(s=a)),m=r.wrapInner('<div class="dotdotdot" />').children(),m.contents().detach().end().append(s.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var u=!1,d=!1;return c.afterElement&&(u=c.afterElement.clone(!0),u.show(),c.afterElement.detach()),o(m,l)&&(d="children"==l.wrap?n(m,l,u):i(m,r,m,l,u)),m.replaceWith(m.contents()),m=null,e.isFunction(l.callback)&&l.callback.call(r[0],d,s),c.isTruncated=d,d}).bind("isTruncated.dot",function(e,t){return e.preventDefault(),e.stopPropagation(),"function"==typeof t&&t.call(r[0],c.isTruncated),c.isTruncated}).bind("originalContent.dot",function(e,t){return e.preventDefault(),e.stopPropagation(),"function"==typeof t&&t.call(r[0],s),s}).bind("destroy.dot",function(e){e.preventDefault(),e.stopPropagation(),r.unwatch().unbind_events().contents().detach().end().append(s).attr("style",r.data("dotdotdot-style")||"").data("dotdotdot",!1)}),r},r.unbind_events=function(){return r.unbind(".dot"),r},r.watch=function(){if(r.unwatch(),"window"==l.watch){var t=e(window),n=t.width(),i=t.height();t.bind("resize.dot"+c.dotId,function(){n==t.width()&&i==t.height()&&l.windowResizeFix||(n=t.width(),i=t.height(),d&&clearInterval(d),d=setTimeout(function(){r.trigger("update.dot")},100))})}else u=a(r),d=setInterval(function(){if(r.is(":visible")){var e=a(r);(u.width!=e.width||u.height!=e.height)&&(r.trigger("update.dot"),u=e)}},500);return r},r.unwatch=function(){return e(window).unbind("resize.dot"+c.dotId),d&&clearInterval(d),r};var s=r.contents(),l=e.extend(!0,{},e.fn.dotdotdot.defaults,t),c={},u={},d=null,m=null;return l.lastCharacter.remove instanceof Array||(l.lastCharacter.remove=e.fn.dotdotdot.defaultArrays.lastCharacter.remove),l.lastCharacter.noEllipsis instanceof Array||(l.lastCharacter.noEllipsis=e.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),c.afterElement=h(l.after,r),c.isTruncated=!1,c.dotId=p++,r.data("dotdotdot",!0).bind_events().trigger("update.dot"),l.watch&&r.watch(),r},e.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},e.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","　",",",";",".","!","?"],noEllipsis:[]}},e.fn.dotdotdot.debug=function(){};var p=1,m=e.fn.html;e.fn.html=function(n){return n!=t&&!e.isFunction(n)&&this.data("dotdotdot")?this.trigger("update",[n]):m.apply(this,arguments)};var g=e.fn.text;e.fn.text=function(n){return n!=t&&!e.isFunction(n)&&this.data("dotdotdot")?(n=e("<div />").text(n).html(),this.trigger("update",[n])):g.apply(this,arguments)}}}(jQuery)},{}],639:[function(e,t,n){"use strict";var i=n;i.version=e("../package.json").version,i.utils=e("./elliptic/utils"),i.rand=e("brorand"),i.hmacDRBG=e("./elliptic/hmac-drbg"),i.curve=e("./elliptic/curve"),i.curves=e("./elliptic/curves"),i.ec=e("./elliptic/ec"),i.eddsa=e("./elliptic/eddsa")},{"../package.json":656,"./elliptic/curve":642,"./elliptic/curves":645,"./elliptic/ec":646,"./elliptic/eddsa":649,"./elliptic/hmac-drbg":652,"./elliptic/utils":654,brorand:573}],640:[function(e,t){"use strict";function n(e,t){this.type=e,this.p=new r(t.p,16),this.red=t.prime?r.red(t.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=t.n&&new r(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4)}function i(e,t){this.curve=e,this.type=t,this.precomputed=null}var r=e("bn.js"),o=e("../../elliptic"),s=o.utils,a=s.getNAF,l=s.getJSF,c=s.assert;t.exports=n,n.prototype.point=function(){throw new Error("Not implemented")},n.prototype.validate=function(){throw new Error("Not implemented")},n.prototype._fixedNafMul=function(e,t){c(e.precomputed);var n=e._getDoubles(),i=a(t,1),r=(1<<n.step+1)-(n.step%2===0?2:1);r/=3;for(var o=[],s=0;s<i.length;s+=n.step){for(var l=0,t=s+n.step-1;t>=s;t--)l=(l<<1)+i[t];o.push(l)}for(var u=this.jpoint(null,null,null),d=this.jpoint(null,null,null),h=r;h>0;h--){for(var s=0;s<o.length;s++){var l=o[s];l===h?d=d.mixedAdd(n.points[s]):l===-h&&(d=d.mixedAdd(n.points[s].neg()))}u=u.add(d)}return u.toP()},n.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var r=i.points,o=a(t,n),s=this.jpoint(null,null,null),l=o.length-1;l>=0;l--){for(var t=0;l>=0&&0===o[l];l--)t++;if(l>=0&&t++,s=s.dblp(t),0>l)break;var u=o[l];c(0!==u),s="affine"===e.type?s.mixedAdd(u>0?r[u-1>>1]:r[-u-1>>1].neg()):s.add(u>0?r[u-1>>1]:r[-u-1>>1].neg())}return"affine"===e.type?s.toP():s},n.prototype._wnafMulAdd=function(e,t,n,i){for(var r=this._wnafT1,o=this._wnafT2,s=this._wnafT3,c=0,u=0;i>u;u++){var d=t[u],h=d._getNAFPoints(e);r[u]=h.wnd,o[u]=h.points}for(var u=i-1;u>=1;u-=2){var f=u-1,p=u;if(1===r[f]&&1===r[p]){var m=[t[f],null,null,t[p]];0===t[f].y.cmp(t[p].y)?(m[1]=t[f].add(t[p]),m[2]=t[f].toJ().mixedAdd(t[p].neg())):0===t[f].y.cmp(t[p].y.redNeg())?(m[1]=t[f].toJ().mixedAdd(t[p]),m[2]=t[f].add(t[p].neg())):(m[1]=t[f].toJ().mixedAdd(t[p]),m[2]=t[f].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],v=l(n[f],n[p]);c=Math.max(v[0].length,c),s[f]=new Array(c),s[p]=new Array(c);for(var b=0;c>b;b++){var y=0|v[0][b],w=0|v[1][b];s[f][b]=g[3*(y+1)+(w+1)],s[p][b]=0,o[f]=m}}else s[f]=a(n[f],r[f]),s[p]=a(n[p],r[p]),c=Math.max(s[f].length,c),c=Math.max(s[p].length,c)}for(var x=this.jpoint(null,null,null),k=this._wnafT4,u=c;u>=0;u--){for(var _=0;u>=0;){for(var S=!0,b=0;i>b;b++)k[b]=0|s[b][u],0!==k[b]&&(S=!1);if(!S)break;_++,u--}if(u>=0&&_++,x=x.dblp(_),0>u)break;for(var b=0;i>b;b++){var d,C=k[b];0!==C&&(C>0?d=o[b][C-1>>1]:0>C&&(d=o[b][-C-1>>1].neg()),x="affine"===d.type?x.mixedAdd(d):x.add(d))}}for(var u=0;i>u;u++)o[u]=null;return x.toP()},n.BasePoint=i,i.prototype.eq=function(){throw new Error("Not implemented")
},i.prototype.validate=function(){return this.curve.validate(this)},n.prototype.decodePoint=function(e,t){e=s.toArray(e,t);var n=this.p.byteLength();if(4===e[0]&&e.length-1===2*n)return this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));if((2===e[0]||3===e[0])&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),3===e[0]);throw new Error("Unknown point format")},i.prototype.encodeCompressed=function(e){return this.encode(e,!0)},i.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))},i.prototype.encode=function(e,t){return s.encode(this._encode(t),e)},i.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},i.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1},i.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,r=0;t>r;r+=e){for(var o=0;e>o;o++)i=i.dbl();n.push(i)}return{step:e,points:n}},i.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=1===n?null:this.dbl(),r=1;n>r;r++)t[r]=t[r-1].add(i);return{wnd:e,points:t}},i.prototype._getBeta=function(){return null},i.prototype.dblp=function(e){for(var t=this,n=0;e>n;n++)t=t.dbl();return t}},{"../../elliptic":639,"bn.js":572}],641:[function(e,t){"use strict";function n(e){this.twisted=1!==(0|e.a),this.mOneA=this.twisted&&-1===(0|e.a),this.extended=this.mOneA,l.call(this,"edwards",e),this.a=new s(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new s(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new s(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),c(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1===(0|e.c)}function i(e,t,n,i,r){l.BasePoint.call(this,e,"projective"),null===t&&null===n&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new s(t,16),this.y=new s(n,16),this.z=i?new s(i,16):this.curve.one,this.t=r&&new s(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}var r=e("../curve"),o=e("../../elliptic"),s=e("bn.js"),a=e("inherits"),l=r.base,c=o.utils.assert;a(n,l),t.exports=n,n.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},n.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},n.prototype.jpoint=function(e,t,n,i){return this.point(e,t,n,i)},n.prototype.pointFromX=function(e,t){e=new s(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),r=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=i.redMul(r.redInvm()),a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var l=a.fromRed().isOdd();return(t&&!l||!t&&l)&&(a=a.redNeg()),this.point(e,a)},n.prototype.pointFromY=function(e,t){e=new s(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.one),r=n.redMul(this.d).redAdd(this.one),o=i.redMul(r.redInvm());if(0===o.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return a.isOdd()!==t&&(a=a.redNeg()),this.point(a,e)},n.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),i=t.redMul(this.a).redAdd(n),r=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return 0===i.cmp(r)},a(i,l.BasePoint),n.prototype.pointFromJSON=function(e){return i.fromJSON(this,e)},n.prototype.point=function(e,t,n,r){return new i(this,e,t,n,r)},i.fromJSON=function(e,t){return new i(e,t[0],t[1],t[2])},i.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},i.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},i.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),r=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=i.redAdd(t),s=o.redSub(n),a=i.redSub(t),l=r.redMul(s),c=o.redMul(a),u=r.redMul(a),d=s.redMul(o);return this.curve.point(l,c,d,u)},i.prototype._projDbl=function(){var e,t,n,i=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),o=this.y.redSqr();if(this.curve.twisted){var s=this.curve._mulA(r),a=s.redAdd(o);if(this.zOne)e=i.redSub(r).redSub(o).redMul(a.redSub(this.curve.two)),t=a.redMul(s.redSub(o)),n=a.redSqr().redSub(a).redSub(a);else{var l=this.z.redSqr(),c=a.redSub(l).redISub(l);e=i.redSub(r).redISub(o).redMul(c),t=a.redMul(s.redSub(o)),n=a.redMul(c)}}else{var s=r.redAdd(o),l=this.curve._mulC(this.c.redMul(this.z)).redSqr(),c=s.redSub(l).redSub(l);e=this.curve._mulC(i.redISub(s)).redMul(c),t=this.curve._mulC(s).redMul(r.redISub(o)),n=s.redMul(c)}return this.curve.point(e,t,n)},i.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},i.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),r=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(t),s=r.redSub(i),a=r.redAdd(i),l=n.redAdd(t),c=o.redMul(s),u=a.redMul(l),d=o.redMul(l),h=s.redMul(a);return this.curve.point(c,u,h,d)},i.prototype._projAdd=function(e){var t,n,i=this.z.redMul(e.z),r=i.redSqr(),o=this.x.redMul(e.x),s=this.y.redMul(e.y),a=this.curve.d.redMul(o).redMul(s),l=r.redSub(a),c=r.redAdd(a),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(s),d=i.redMul(l).redMul(u);return this.curve.twisted?(t=i.redMul(c).redMul(s.redSub(this.curve._mulA(o))),n=l.redMul(c)):(t=i.redMul(c).redMul(s.redSub(o)),n=this.curve._mulC(l).redMul(c)),this.curve.point(d,t,n)},i.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},i.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},i.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2)},i.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},i.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},i.prototype.getX=function(){return this.normalize(),this.x.fromRed()},i.prototype.getY=function(){return this.normalize(),this.y.fromRed()},i.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},i.prototype.toP=i.prototype.normalize,i.prototype.mixedAdd=i.prototype.add},{"../../elliptic":639,"../curve":642,"bn.js":572,inherits:655}],642:[function(e,t,n){"use strict";var i=n;i.base=e("./base"),i.short=e("./short"),i.mont=e("./mont"),i.edwards=e("./edwards")},{"./base":640,"./edwards":641,"./mont":643,"./short":644}],643:[function(e,t){"use strict";function n(e){a.call(this,"mont",e),this.a=new o(e.a,16).toRed(this.red),this.b=new o(e.b,16).toRed(this.red),this.i4=new o(4).toRed(this.red).redInvm(),this.two=new o(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function i(e,t,n){a.BasePoint.call(this,e,"projective"),null===t&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new o(t,16),this.z=new o(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}var r=e("../curve"),o=e("bn.js"),s=e("inherits"),a=r.base,l=e("../../elliptic"),c=l.utils;s(n,a),t.exports=n,n.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),i=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t),r=i.redSqrt();return 0===r.redSqr().cmp(i)},s(i,a.BasePoint),n.prototype.decodePoint=function(e,t){return this.point(c.toArray(e,t),1)},n.prototype.point=function(e,t){return new i(this,e,t)},n.prototype.pointFromJSON=function(e){return i.fromJSON(this,e)},i.prototype.precompute=function(){},i.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},i.fromJSON=function(e,t){return new i(e,t[0],t[1]||e.one)},i.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},i.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},i.prototype.dbl=function(){var e=this.x.redAdd(this.z),t=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),r=t.redSub(i),o=t.redMul(i),s=r.redMul(i.redAdd(this.curve.a24.redMul(r)));return this.curve.point(o,s)},i.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},i.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),r=e.x.redAdd(e.z),o=e.x.redSub(e.z),s=o.redMul(n),a=r.redMul(i),l=t.z.redMul(s.redAdd(a).redSqr()),c=t.x.redMul(s.redISub(a).redSqr());return this.curve.point(l,c)},i.prototype.mul=function(e){for(var t=e.clone(),n=this,i=this.curve.point(null,null),r=this,o=[];0!==t.cmpn(0);t.iushrn(1))o.push(t.andln(1));for(var s=o.length-1;s>=0;s--)0===o[s]?(n=n.diffAdd(i,r),i=i.dbl()):(i=n.diffAdd(i,r),n=n.dbl());return i},i.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},i.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},i.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},i.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../../elliptic":639,"../curve":642,"bn.js":572,inherits:655}],644:[function(e,t){"use strict";function n(e){c.call(this,"short",e),this.a=new a(e.a,16).toRed(this.red),this.b=new a(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function i(e,t,n,i){c.BasePoint.call(this,e,"affine"),null===t&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new a(t,16),this.y=new a(n,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function r(e,t,n,i){c.BasePoint.call(this,e,"jacobian"),null===t&&null===n&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new a(0)):(this.x=new a(t,16),this.y=new a(n,16),this.z=new a(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}var o=e("../curve"),s=e("../../elliptic"),a=e("bn.js"),l=e("inherits"),c=o.base,u=s.utils.assert;l(n,c),t.exports=n,n.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,n;if(e.beta)t=new a(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)n=new a(e.lambda,16);else{var r=this._getEndoRoots(this.n);0===this.g.mul(r[0]).x.cmp(this.g.x.redMul(t))?n=r[0]:(n=r[1],u(0===this.g.mul(n).x.cmp(this.g.x.redMul(t))))}var o;return o=e.basis?e.basis.map(function(e){return{a:new a(e.a,16),b:new a(e.b,16)}}):this._getEndoBasis(n),{beta:t,lambda:n,basis:o}}},n.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:a.mont(e),n=new a(2).toRed(t).redInvm(),i=n.redNeg(),r=new a(3).toRed(t).redNeg().redSqrt().redMul(n),o=i.redAdd(r).fromRed(),s=i.redSub(r).fromRed();return[o,s]},n.prototype._getEndoBasis=function(e){for(var t,n,i,r,o,s,l,c,u,d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,f=this.n.clone(),p=new a(1),m=new a(0),g=new a(0),v=new a(1),b=0;0!==h.cmpn(0);){var y=f.div(h);c=f.sub(y.mul(h)),u=g.sub(y.mul(p));var w=v.sub(y.mul(m));if(!i&&c.cmp(d)<0)t=l.neg(),n=p,i=c.neg(),r=u;else if(i&&2===++b)break;l=c,f=h,h=c,g=p,p=u,v=m,m=w}o=c.neg(),s=u;var x=i.sqr().add(r.sqr()),k=o.sqr().add(s.sqr());return k.cmp(x)>=0&&(o=t,s=n),i.negative&&(i=i.neg(),r=r.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:i,b:r},{a:o,b:s}]},n.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],r=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),s=r.mul(n.a),a=o.mul(i.a),l=r.mul(n.b),c=o.mul(i.b),u=e.sub(s).sub(a),d=l.add(c).neg();return{k1:u,k2:d}},n.prototype.pointFromX=function(e,t){e=new a(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(0!==i.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var r=i.fromRed().isOdd();return(t&&!r||!t&&r)&&(i=i.redNeg()),this.point(e,i)},n.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),r=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return 0===n.redSqr().redISub(r).cmpn(0)},n.prototype._endoWnafMulAdd=function(e,t){for(var n=this._endoWnafT1,i=this._endoWnafT2,r=0;r<e.length;r++){var o=this._endoSplit(t[r]),s=e[r],a=s._getBeta();o.k1.negative&&(o.k1.ineg(),s=s.neg(!0)),o.k2.negative&&(o.k2.ineg(),a=a.neg(!0)),n[2*r]=s,n[2*r+1]=a,i[2*r]=o.k1,i[2*r+1]=o.k2}for(var l=this._wnafMulAdd(1,n,i,2*r),c=0;2*r>c;c++)n[c]=null,i[c]=null;return l},l(i,c.BasePoint),n.prototype.point=function(e,t,n){return new i(this,e,t,n)},n.prototype.pointFromJSON=function(e,t){return i.fromJSON(this,e,t)},i.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(e){return n.point(e.x.redMul(n.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}},i.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},i.fromJSON=function(e,t,n){function i(t){return e.point(t[0],t[1],n)}"string"==typeof t&&(t=JSON.parse(t));var r=e.point(t[0],t[1],n);if(!t[2])return r;var o=t[2];return r.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[r].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[r].concat(o.naf.points.map(i))}},r},i.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},i.prototype.isInfinity=function(){return this.inf},i.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)},i.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),r=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),o=r.redSqr().redISub(this.x.redAdd(this.x)),s=r.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},i.prototype.getX=function(){return this.x.fromRed()},i.prototype.getY=function(){return this.y.fromRed()},i.prototype.mul=function(e){return e=new a(e,16),this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},i.prototype.mulAdd=function(e,t,n){var i=[this,t],r=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,r):this.curve._wnafMulAdd(1,i,r,2)},i.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},i.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(e){return e.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t},i.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e},l(r,c.BasePoint),n.prototype.jpoint=function(e,t,n){return new r(this,e,t,n)},r.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)},r.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},r.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),r=e.x.redMul(n),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(n.redMul(this.z)),a=i.redSub(r),l=o.redSub(s);if(0===a.cmpn(0))return 0!==l.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),u=c.redMul(a),d=i.redMul(c),h=l.redSqr().redIAdd(u).redISub(d).redISub(d),f=l.redMul(d.redISub(h)).redISub(o.redMul(u)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(h,f,p)},r.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),r=this.y,o=e.y.redMul(t).redMul(this.z),s=n.redSub(i),a=r.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=s.redSqr(),c=l.redMul(s),u=n.redMul(l),d=a.redSqr().redIAdd(c).redISub(u).redISub(u),h=a.redMul(u.redISub(d)).redISub(r.redMul(c)),f=this.z.redMul(s);return this.curve.jpoint(d,h,f)},r.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,n=0;e>n;n++)t=t.dbl();return t}for(var i=this.curve.a,r=this.curve.tinv,o=this.x,s=this.y,a=this.z,l=a.redSqr().redSqr(),c=s.redAdd(s),n=0;e>n;n++){var u=o.redSqr(),d=c.redSqr(),h=d.redSqr(),f=u.redAdd(u).redIAdd(u).redIAdd(i.redMul(l)),p=o.redMul(d),m=f.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),v=f.redMul(g);v=v.redIAdd(v).redISub(h);var b=c.redMul(a);e>n+1&&(l=l.redMul(h)),o=m,a=b,c=v}return this.curve.jpoint(o,c.redMul(r),a)},r.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},r.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),r=this.y.redSqr(),o=r.redSqr(),s=this.x.redAdd(r).redSqr().redISub(i).redISub(o);s=s.redIAdd(s);var a=i.redAdd(i).redIAdd(i),l=a.redSqr().redISub(s).redISub(s),c=o.redIAdd(o);c=c.redIAdd(c),c=c.redIAdd(c),e=l,t=a.redMul(s.redISub(l)).redISub(c),n=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),d=this.y.redSqr(),h=d.redSqr(),f=this.x.redAdd(d).redSqr().redISub(u).redISub(h);f=f.redIAdd(f);var p=u.redAdd(u).redIAdd(u),m=p.redSqr(),g=h.redIAdd(h);g=g.redIAdd(g),g=g.redIAdd(g),e=m.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(g),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,t,n)},r.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),r=this.y.redSqr(),o=r.redSqr(),s=this.x.redAdd(r).redSqr().redISub(i).redISub(o);s=s.redIAdd(s);var a=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=a.redSqr().redISub(s).redISub(s);e=l;var c=o.redIAdd(o);c=c.redIAdd(c),c=c.redIAdd(c),t=a.redMul(s.redISub(l)).redISub(c),n=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),d=this.y.redSqr(),h=this.x.redMul(d),f=this.x.redSub(u).redMul(this.x.redAdd(u));f=f.redAdd(f).redIAdd(f);var p=h.redIAdd(h);p=p.redIAdd(p);var m=p.redAdd(p);e=f.redSqr().redISub(m),n=this.y.redAdd(this.z).redSqr().redISub(d).redISub(u);var g=d.redSqr();g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g),t=f.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,n)},r.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,r=i.redSqr().redSqr(),o=t.redSqr(),s=n.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(r)),l=t.redAdd(t);l=l.redIAdd(l);var c=l.redMul(s),u=a.redSqr().redISub(c.redAdd(c)),d=c.redISub(u),h=s.redSqr();h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var f=a.redMul(d).redISub(h),p=n.redAdd(n).redMul(i);return this.curve.jpoint(u,f,p)},r.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),r=e.redAdd(e).redIAdd(e),o=r.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(i);s=s.redIAdd(s),s=s.redAdd(s).redIAdd(s),s=s.redISub(o);var a=s.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var c=r.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(l),u=t.redMul(c);u=u.redIAdd(u),u=u.redIAdd(u);var d=this.x.redMul(a).redISub(u);d=d.redIAdd(d),d=d.redIAdd(d);var h=this.y.redMul(c.redMul(l.redISub(c)).redISub(s.redMul(a)));h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var f=this.z.redAdd(s).redSqr().redISub(n).redISub(a);return this.curve.jpoint(d,h,f)},r.prototype.mul=function(e,t){return e=new a(e,t),this.curve._wnafMul(this,e)},r.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(0!==this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0))return!1;var i=t.redMul(this.z),r=n.redMul(e.z);return 0===this.y.redMul(r).redISub(e.y.redMul(i)).cmpn(0)},r.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},r.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../../elliptic":639,"../curve":642,"bn.js":572,inherits:655}],645:[function(e,t,n){"use strict";function i(e){this.curve="short"===e.type?new a.curve.short(e):"edwards"===e.type?new a.curve.edwards(e):new a.curve.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,l(this.g.validate(),"Invalid curve"),l(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function r(e,t){Object.defineProperty(o,e,{configurable:!0,enumerable:!0,get:function(){var n=new i(t);return Object.defineProperty(o,e,{configurable:!0,enumerable:!0,value:n}),n}})}var o=n,s=e("hash.js"),a=e("../elliptic"),l=a.utils.assert;o.PresetCurve=i,r("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:s.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),r("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:s.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),r("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:s.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),r("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:s.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),r("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:s.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),r("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"0",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["9"]}),r("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=e("./precomputed/secp256k1")}catch(u){c=void 0}r("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:s.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})},{"../elliptic":639,"./precomputed/secp256k1":653,"hash.js":663}],646:[function(e,t){"use strict";function n(e){return this instanceof n?("string"==typeof e&&(s(r.curves.hasOwnProperty(e),"Unknown curve "+e),e=r.curves[e]),e instanceof r.curves.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),void(this.hash=e.hash||e.curve.hash)):new n(e)}var i=e("bn.js"),r=e("../../elliptic"),o=r.utils,s=o.assert,a=e("./key"),l=e("./signature");t.exports=n,n.prototype.keyPair=function(e){return new a(this,e)},n.prototype.keyFromPrivate=function(e,t){return a.fromPrivate(this,e,t)},n.prototype.keyFromPublic=function(e,t){return a.fromPublic(this,e,t)},n.prototype.genKeyPair=function(e){e||(e={});for(var t=new r.hmacDRBG({hash:this.hash,pers:e.pers,entropy:e.entropy||r.rand(this.hash.hmacStrength),nonce:this.n.toArray()}),n=this.n.byteLength(),o=this.n.sub(new i(2));;){var s=new i(t.generate(n));if(!(s.cmp(o)>0))return s.iaddn(1),this.keyFromPrivate(s)}},n.prototype._truncateToN=function(e,t){var n=8*e.byteLength()-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},n.prototype.sign=function(e,t,n,o){"object"==typeof n&&(o=n,n=null),o||(o={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new i(e,16));for(var s=this.n.byteLength(),a=t.getPrivate().toArray("be",s),c=e.toArray("be",s),u=new r.hmacDRBG({hash:this.hash,entropy:a,nonce:c,pers:o.pers,persEnc:o.persEnc}),d=this.n.sub(new i(1)),h=0;!0;h++){var f=o.k?o.k(h):new i(u.generate(this.n.byteLength()));if(f=this._truncateToN(f,!0),!(f.cmpn(1)<=0||f.cmp(d)>=0)){var p=this.g.mul(f);if(!p.isInfinity()){var m=p.getX(),g=m.umod(this.n);if(0!==g.cmpn(0)){var v=f.invm(this.n).mul(g.mul(t.getPrivate()).iadd(e));if(v=v.umod(this.n),0!==v.cmpn(0)){var b=(p.getY().isOdd()?1:0)|(0!==m.cmp(g)?2:0);return o.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),b^=1),new l({r:g,s:v,recoveryParam:b})}}}}}},n.prototype.verify=function(e,t,n,r){e=this._truncateToN(new i(e,16)),n=this.keyFromPublic(n,r),t=new l(t,"hex");var o=t.r,s=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a=s.invm(this.n),c=a.mul(e).umod(this.n),u=a.mul(o).umod(this.n),d=this.g.mulAdd(c,n.getPublic(),u);return d.isInfinity()?!1:0===d.getX().umod(this.n).cmp(o)},n.prototype.recoverPubKey=function(e,t,n,r){s((3&n)===n,"The recovery param is more than two bits"),t=new l(t,r);var o=this.n,a=new i(e),c=t.r,u=t.s,d=1&n,h=n>>1;if(c.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");c=h?this.curve.pointFromX(c.add(this.curve.n),d):this.curve.pointFromX(c,d);var f=o.sub(a),p=t.r.invm(o);return this.g.mulAdd(f,c,u).mul(p)},n.prototype.getKeyRecoveryParam=function(e,t,n,i){if(t=new l(t,i),null!==t.recoveryParam)return t.recoveryParam;for(var r=0;4>r;r++){var o;try{o=this.recoverPubKey(e,t,r)}catch(e){continue}if(o.eq(n))return r}throw new Error("Unable to find valid recovery factor")}},{"../../elliptic":639,"./key":647,"./signature":648,"bn.js":572}],647:[function(e,t){"use strict";function n(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var i=e("bn.js");t.exports=n,n.fromPublic=function(e,t,i){return t instanceof n?t:new n(e,{pub:t,pubEnc:i})},n.fromPrivate=function(e,t,i){return t instanceof n?t:new n(e,{priv:t,privEnc:i})},n.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},n.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},n.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},n.prototype._importPrivate=function(e,t){this.priv=new i(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},n.prototype._importPublic=function(e,t){return e.x||e.y?void(this.pub=this.ec.curve.point(e.x,e.y)):void(this.pub=this.ec.curve.decodePoint(e,t))},n.prototype.derive=function(e){return e.mul(this.priv).getX()
},n.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)},n.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},n.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"bn.js":572}],648:[function(e,t){"use strict";function n(e,t){return e instanceof n?e:void(this._importDER(e,t)||(u(e.r&&e.s,"Signature without r or s"),this.r=new a(e.r,16),this.s=new a(e.s,16),this.recoveryParam=void 0===e.recoveryParam?null:e.recoveryParam))}function i(){this.place=0}function r(e,t){var n=e[t.place++];if(!(128&n))return n;for(var i=15&n,r=0,o=0,s=t.place;i>o;o++,s++)r<<=8,r|=e[s];return t.place=s,r}function o(e){for(var t=0,n=e.length-1;!e[t]&&!(128&e[t+1])&&n>t;)t++;return 0===t?e:e.slice(t)}function s(e,t){if(128>t)return void e.push(t);var n=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|n);--n;)e.push(t>>>(n<<3)&255);e.push(t)}var a=e("bn.js"),l=e("../../elliptic"),c=l.utils,u=c.assert;t.exports=n,n.prototype._importDER=function(e,t){e=c.toArray(e,t);var n=new i;if(48!==e[n.place++])return!1;var o=r(e,n);if(o+n.place!==e.length)return!1;if(2!==e[n.place++])return!1;var s=r(e,n),l=e.slice(n.place,s+n.place);if(n.place+=s,2!==e[n.place++])return!1;var u=r(e,n);if(e.length!==u+n.place)return!1;var d=e.slice(n.place,u+n.place);return 0===l[0]&&128&l[1]&&(l=l.slice(1)),0===d[0]&&128&d[1]&&(d=d.slice(1)),this.r=new a(l),this.s=new a(d),this.recoveryParam=null,!0},n.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&n[0]&&(n=[0].concat(n)),t=o(t),n=o(n);!(n[0]||128&n[1]);)n=n.slice(1);var i=[2];s(i,t.length),i=i.concat(t),i.push(2),s(i,n.length);var r=i.concat(n),a=[48];return s(a,r.length),a=a.concat(r),c.encode(a,e)}},{"../../elliptic":639,"bn.js":572}],649:[function(e,t){"use strict";function n(e){if(s("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof n))return new n(e);var e=r.curves[e].curve;this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=i.sha512}var i=e("hash.js"),r=e("../../elliptic"),o=r.utils,s=o.assert,a=o.parseBytes,l=e("./key"),c=e("./signature");t.exports=n,n.prototype.sign=function(e,t){e=a(e);var n=this.keyFromSecret(t),i=this.hashInt(n.messagePrefix(),e),r=this.g.mul(i),o=this.encodePoint(r),s=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),l=i.add(s).umod(this.curve.n);return this.makeSignature({R:r,S:l,Rencoded:o})},n.prototype.verify=function(e,t,n){e=a(e),t=this.makeSignature(t);var i=this.keyFromPublic(n),r=this.hashInt(t.Rencoded(),i.pubBytes(),e),o=this.g.mul(t.S()),s=t.R().add(i.pub().mul(r));return s.eq(o)},n.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return o.intFromLE(e.digest()).umod(this.curve.n)},n.prototype.keyFromPublic=function(e){return l.fromPublic(this,e)},n.prototype.keyFromSecret=function(e){return l.fromSecret(this,e)},n.prototype.makeSignature=function(e){return e instanceof c?e:new c(this,e)},n.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},n.prototype.decodePoint=function(e){e=o.parseBytes(e);var t=e.length-1,n=e.slice(0,t).concat(-129&e[t]),i=0!==(128&e[t]),r=o.intFromLE(n);return this.curve.pointFromY(r,i)},n.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},n.prototype.decodeInt=function(e){return o.intFromLE(e)},n.prototype.isPoint=function(e){return e instanceof this.pointClass}},{"../../elliptic":639,"./key":650,"./signature":651,"hash.js":663}],650:[function(e,t){"use strict";function n(e,t){this.eddsa=e,this._secret=s(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=s(t.pub)}var i=e("../../elliptic"),r=i.utils,o=r.assert,s=r.parseBytes,a=r.cachedProperty;n.fromPublic=function(e,t){return t instanceof n?t:new n(e,{pub:t})},n.fromSecret=function(e,t){return t instanceof n?t:new n(e,{secret:t})},n.prototype.secret=function(){return this._secret},a(n,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),a(n,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),a(n,"privBytes",function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i}),a(n,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),a(n,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),a(n,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),n.prototype.sign=function(e){return o(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},n.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},n.prototype.getSecret=function(e){return o(this._secret,"KeyPair is public only"),r.encode(this.secret(),e)},n.prototype.getPublic=function(e){return r.encode(this.pubBytes(),e)},t.exports=n},{"../../elliptic":639}],651:[function(e,t){"use strict";function n(e,t){this.eddsa=e,"object"!=typeof t&&(t=l(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),s(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof i&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}var i=e("bn.js"),r=e("../../elliptic"),o=r.utils,s=o.assert,a=o.cachedProperty,l=o.parseBytes;a(n,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),a(n,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),a(n,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),a(n,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),n.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},n.prototype.toHex=function(){return o.encode(this.toBytes(),"hex").toUpperCase()},t.exports=n},{"../../elliptic":639,"bn.js":572}],652:[function(e,t){"use strict";function n(e){if(!(this instanceof n))return new n(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this.reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=o.toArray(e.entropy,e.entropyEnc),i=o.toArray(e.nonce,e.nonceEnc),r=o.toArray(e.pers,e.persEnc);s(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,i,r)}var i=e("hash.js"),r=e("../elliptic"),o=r.utils,s=o.assert;t.exports=n,n.prototype._init=function(e,t,n){var i=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var r=0;r<this.V.length;r++)this.K[r]=0,this.V[r]=1;this._update(i),this.reseed=1,this.reseedInterval=281474976710656},n.prototype._hmac=function(){return new i.hmac(this.hash,this.K)},n.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},n.prototype.reseed=function(e,t,n,i){"string"!=typeof t&&(i=n,n=t,t=null),e=o.toBuffer(e,t),n=o.toBuffer(n,i),s(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this.reseed=1},n.prototype.generate=function(e,t,n,i){if(this.reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(i=n,n=t,t=null),n&&(n=o.toArray(n,i),this._update(n));for(var r=[];r.length<e;)this.V=this._hmac().update(this.V).digest(),r=r.concat(this.V);var s=r.slice(0,e);return this._update(n),this.reseed++,o.encode(s,t)}},{"../elliptic":639,"hash.js":663}],653:[function(e,t){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}
},{}],654:[function(e,t,n){"use strict";function i(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"!=typeof e){for(var i=0;i<e.length;i++)n[i]=0|e[i];return n}if(t){if("hex"===t){e=e.replace(/[^a-z0-9]+/gi,""),e.length%2!==0&&(e="0"+e);for(var i=0;i<e.length;i+=2)n.push(parseInt(e[i]+e[i+1],16))}}else for(var i=0;i<e.length;i++){var r=e.charCodeAt(i),o=r>>8,s=255&r;o?n.push(o,s):n.push(s)}return n}function r(e){return 1===e.length?"0"+e:e}function o(e){for(var t="",n=0;n<e.length;n++)t+=r(e[n].toString(16));return t}function s(e,t){for(var n=[],i=1<<t+1,r=e.clone();r.cmpn(1)>=0;){var o;if(r.isOdd()){var s=r.andln(i-1);o=s>(i>>1)-1?(i>>1)-s:s,r.isubn(o)}else o=0;n.push(o);for(var a=0!==r.cmpn(0)&&0===r.andln(i-1)?t+1:1,l=1;a>l;l++)n.push(0);r.iushrn(a)}return n}function a(e,t){var n=[[],[]];e=e.clone(),t=t.clone();for(var i=0,r=0;e.cmpn(-i)>0||t.cmpn(-r)>0;){var o=e.andln(3)+i&3,s=t.andln(3)+r&3;3===o&&(o=-1),3===s&&(s=-1);var a;if(0===(1&o))a=0;else{var l=e.andln(7)+i&7;a=3!==l&&5!==l||2!==s?o:-o}n[0].push(a);var c;if(0===(1&s))c=0;else{var l=t.andln(7)+r&7;c=3!==l&&5!==l||2!==o?s:-s}n[1].push(c),2*i===a+1&&(i=1-i),2*r===c+1&&(r=1-r),e.iushrn(1),t.iushrn(1)}return n}function l(e,t,n){var i="_"+t;e.prototype[t]=function(){return void 0!==this[i]?this[i]:this[i]=n.call(this)}}function c(e){return"string"==typeof e?d.toArray(e,"hex"):e}function u(e){return new h(e,"hex","le")}var d=n,h=e("bn.js");d.assert=function(e,t){if(!e)throw new Error(t||"Assertion failed")},d.toArray=i,d.zero2=r,d.toHex=o,d.encode=function(e,t){return"hex"===t?o(e):e},d.getNAF=s,d.getJSF=a,d.cachedProperty=l,d.parseBytes=c,d.intFromLE=u},{"bn.js":572}],655:[function(e,t,n){arguments[4][274][0].apply(n,arguments)},{dup:274}],656:[function(e,t){t.exports={_args:[[{raw:"elliptic@6.2.5",scope:null,escapedName:"elliptic",name:"elliptic",rawSpec:"6.2.5",spec:"6.2.5",type:"version"},"/tmp/build_50dbf1057aa7c45921f0230ec9bcd4b8"]],_from:"elliptic@6.2.5",_id:"elliptic@6.2.5",_inCache:!0,_location:"/elliptic",_nodeVersion:"6.0.0",_npmOperationalInternal:{host:"packages-12-west.internal.npmjs.com",tmp:"tmp/elliptic-6.2.5.tgz_1463781139171_0.8202476925216615"},_npmUser:{name:"indutny",email:"fedor@indutny.com"},_npmVersion:"3.8.6",_phantomChildren:{},_requested:{raw:"elliptic@6.2.5",scope:null,escapedName:"elliptic",name:"elliptic",rawSpec:"6.2.5",spec:"6.2.5",type:"version"},_requiredBy:["/","/browserify-sign","/create-ecdh"],_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-6.2.5.tgz",_shasum:"24846340477dfce75c56b8ff4b1d6d6ec258e06a",_shrinkwrap:null,_spec:"elliptic@6.2.5",_where:"/tmp/build_50dbf1057aa7c45921f0230ec9bcd4b8",author:{name:"Fedor Indutny",email:"fedor@indutny.com"},bugs:{url:"https://github.com/indutny/elliptic/issues"},dependencies:{"bn.js":"^4.0.0",brorand:"^1.0.1","hash.js":"^1.0.0",inherits:"^2.0.1"},description:"EC cryptography",devDependencies:{brfs:"^1.4.3",coveralls:"^2.11.3",grunt:"^0.4.5","grunt-browserify":"^5.0.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^8.6.2",istanbul:"^0.4.2",jscs:"^2.9.0",jshint:"^2.6.0",mocha:"^2.1.0"},directories:{},dist:{shasum:"24846340477dfce75c56b8ff4b1d6d6ec258e06a",tarball:"https://registry.npmjs.org/elliptic/-/elliptic-6.2.5.tgz"},files:["lib"],gitHead:"fa5ffdc2d008fd6b1eb6e34864c977ea2748b7ce",homepage:"https://github.com/indutny/elliptic",keywords:["EC","Elliptic","curve","Cryptography"],license:"MIT",main:"lib/elliptic.js",maintainers:[{name:"indutny",email:"fedor@indutny.com"}],name:"elliptic",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts:{jscs:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",jshint:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",lint:"npm run jscs && npm run jshint",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},version:"6.2.5"}},{}],657:[function(e,t){!function(e){"use strict";function n(e){function t(){return St>_t}function n(){return kt[_t]}function i(){return _t}function r(e){_t=e}function s(){_t+=1}function a(){_t=0,St=kt.length}function l(e,t){return{name:e,tokens:t||"",semantic:t||"",children:[]}}function c(e,t){var n;return null===t?null:(n=l(e),n.tokens=t.tokens,n.semantic=t.semantic,n.children.push(t),n)}function u(e,t){return null!==t&&(e.tokens+=t.tokens,e.semantic+=t.semantic),e.children.push(t),e}function d(e){var i;return t()?(i=n(),e(i)?(s(),l("token",i)):null):null}function h(e){return function(){return c("literal",d(function(t){return t===e}))}}function f(){var e=arguments;return function(){var t,n,o,s;for(s=i(),n=l("and"),t=0;t<e.length;t+=1){if(o=e[t](),null===o)return r(s),null;u(n,o)}return n}}function p(){var e=arguments;return function(){var t,n,o;for(o=i(),t=0;t<e.length;t+=1){if(n=e[t](),null!==n)return n;r(o)}return null}}function m(e){return function(){var t,n;return n=i(),t=e(),null!==t?t:(r(n),l("opt"))}}function g(e){return function(){var t=e();return null!==t&&(t.semantic=""),t}}function v(e){return function(){var t=e();return null!==t&&t.semantic.length>0&&(t.semantic=" "),t}}function b(e,t){return function(){var n,o,s,a,c;for(a=i(),n=l("star"),s=0,c=void 0===t?0:t;null!==(o=e());)s+=1,u(n,o);return s>=c?n:(r(a),null)}}function y(e){function t(e){return" "===e||"	"===e||"\r"===e||"\n"===e}var n,i;for(i="",n=0;n<e.length;n+=1)t(e[n])&&t(e[n+1])||(i+=e[n]);return t(i[0])&&(i=i.substring(1)),t(i[i.length-1])&&(i=i.substring(0,i.length-1)),i}function w(e){return e.charCodeAt(0)>=128}function x(){return c("cr",h("\r")())}function k(){return c("crlf",f(x,C)())}function _(){return c("dquote",h('"')())}function S(){return c("htab",h("	")())}function C(){return c("lf",h("\n")())}function E(){return c("sp",h(" ")())}function I(){return c("vchar",d(function(t){var n=t.charCodeAt(0),i=n>=33&&126>=n;return e.rfc6532&&(i=i||w(t)),i}))}function R(){return c("wsp",p(E,S)())}function T(){var e=c("quoted-pair",p(f(h("\\"),p(I,R)),at)());return null===e?null:(e.semantic=e.semantic[1],e)}function A(){return c("fws",p(ct,f(m(f(b(R),g(k))),b(R,1)))())}function M(){return c("ctext",p(function(){return d(function(t){var n=t.charCodeAt(0),i=n>=33&&39>=n||n>=42&&91>=n||n>=93&&126>=n;return e.rfc6532&&(i=i||w(t)),i})},ot)())}function F(){return c("ccontent",p(M,T,V)())}function V(){return c("comment",f(h("("),b(f(m(A),F)),m(A),h(")"))())}function L(){return c("cfws",p(f(b(f(m(A),V),1),m(A)),A)())}function O(){return c("atext",d(function(t){var n=t>="a"&&"z">=t||t>="A"&&"Z">=t||t>="0"&&"9">=t||["!","#","$","%","&","'","*","+","-","/","=","?","^","_","`","{","|","}","~"].indexOf(t)>=0;return e.rfc6532&&(n=n||w(t)),n}))}function N(){return c("atom",f(v(m(L)),b(O,1),v(m(L)))())}function $(){var e,t;return e=c("dot-atom-text",b(O,1)()),null===e?e:(t=b(f(h("."),b(O,1)))(),null!==t&&u(e,t),e)}function D(){return c("dot-atom",f(g(m(L)),$,g(m(L)))())}function P(){return c("qtext",p(function(){return d(function(t){var n=t.charCodeAt(0),i=33===n||n>=35&&91>=n||n>=93&&126>=n;return e.rfc6532&&(i=i||w(t)),i})},st)())}function j(){return c("qcontent",p(P,T)())}function B(){return c("quoted-string",f(g(m(L)),g(_),b(f(m(v(A)),j)),m(g(A)),g(_),g(m(L)))())}function U(){return c("word",p(N,B)())}function H(){return c("phrase",p(lt,b(U,1))())}function z(){return c("address",p(q,G)())}function q(){return c("mailbox",p(W,it)())}function W(){return c("name-addr",f(m(Y),K)())}function K(){return c("angle-addr",p(f(g(m(L)),h("<"),it,h(">"),g(m(L))),ut)())}function G(){return c("group",f(Y,h(":"),m(X),h(";"),g(m(L)))())}function Y(){return c("display-name",function(){var e=H();return null!==e&&(e.semantic=y(e.semantic)),e}())}function Q(){return c("mailbox-list",p(f(q,b(f(h(","),q))),ft)())}function J(){return c("address-list",p(f(z,b(f(h(","),z))),pt)())}function X(){return c("group-list",p(Q,g(L),mt)())}function Z(){return c("local-part",p(gt,D,B)())}function et(){return c("dtext",p(function(){return d(function(t){var n=t.charCodeAt(0),i=n>=33&&90>=n||n>=94&&126>=n;return e.rfc6532&&(i=i||w(t)),i})},bt)())}function tt(){return c("domain-literal",f(g(m(L)),h("["),b(f(m(A),et)),m(A),h("]"),g(m(L)))())}function nt(){return c("domain",function(){var t=p(vt,D,tt)();return e.rejectTLD&&t.semantic.indexOf(".")<0?null:t}())}function it(){return c("addr-spec",f(Z,h("@"),nt)())}function rt(){return e.strict?null:c("obs-NO-WS-CTL",d(function(e){var t=e.charCodeAt(0);return t>=1&&8>=t||11===t||12===t||t>=14&&31>=t||127===t}))}function ot(){return e.strict?null:c("obs-ctext",rt())}function st(){return e.strict?null:c("obs-qtext",rt())}function at(){return e.strict?null:c("obs-qp",f(h("\\"),p(h("\x00"),rt,C,x))())}function lt(){return e.strict?null:c("obs-phrase",f(U,b(p(U,h("."),v(L))))())}function ct(){return e.strict?null:c("obs-FWS",b(f(g(m(k)),R),1)())}function ut(){return e.strict?null:c("obs-angle-addr",f(g(m(L)),h("<"),dt,it,h(">"),g(m(L)))())}function dt(){return e.strict?null:c("obs-route",f(ht,h(":"))())}function ht(){return e.strict?null:c("obs-domain-list",f(b(p(g(L),h(","))),h("@"),nt,b(f(h(","),g(m(L)),m(f(h("@"),nt)))))())}function ft(){return e.strict?null:c("obs-mbox-list",f(b(f(g(m(L)),h(","))),q,b(f(h(","),m(f(q,g(L))))))())}function pt(){return e.strict?null:c("obs-addr-list",f(b(f(g(m(L)),h(","))),z,b(f(h(","),m(f(z,g(L))))))())}function mt(){return e.strict?null:c("obs-group-list",f(b(f(g(m(L)),h(",")),1),g(m(L)))())}function gt(){return e.strict?null:c("obs-local-part",f(U,b(f(h("."),U)))())}function vt(){return e.strict?null:c("obs-domain",f(N,b(f(h("."),N)))())}function bt(){return e.strict?null:c("obs-dtext",p(rt,T)())}function yt(e,t){var n,i,r;if(null===t||void 0===t)return null;for(i=[t];i.length>0;){if(r=i.shift(),r.name===e)return r;for(n=0;n<r.children.length;n+=1)i.push(r.children[n])}return null}function wt(e,t){var n,i,r,o;if(null===t||void 0===t)return null;for(i=[t],o=[];i.length>0;)for(r=i.shift(),r.name===e&&o.push(r),n=0;n<r.children.length;n+=1)i.push(r.children[n]);return o}function xt(t){function n(e){return null!==e?e.semantic:null}var i,r,o,s,a,l,c,u;if(null===t)return null;for(r={ast:t},o=wt("address",t),r.addresses=[],i=0;i<o.length;i+=1)s=o[i],a=yt("display-name",s),l=yt("addr-spec",s),c=yt("local-part",l),u=yt("domain",l),r.addresses.push({node:s,parts:{name:a,address:l,local:c,domain:u},name:n(a),address:n(l),local:n(c),domain:n(u)});if(e.simple)for(r=r.addresses,i=0;i<r.length;i+=1)delete r[i].node;return r}var kt,_t,St,Ct;if(e=o(e,{}),null===e)return null;if(kt=e.input,!e.strict){if(a(),e.strict=!0,Ct=J(kt),e.partial||!t())return xt(Ct);e.strict=!1}return a(),Ct=J(kt),!e.partial&&t()?null:xt(Ct)}function i(e){var t;return e=o(e,{rfc6532:!0,simple:!0}),null===e?null:(t=n(e),!t||!e.partial&&e.simple&&t.length>1||!e.simple&&t.addresses.length>1?null:e.simple?t&&t[0]:t&&t.addresses&&t.addresses[0])}function r(e){var t;return e=o(e,{rfc6532:!0,simple:!0}),null===e?null:(t=n(e),e.simple?t:t.addresses)}function o(e,t){function n(e){return"[object String]"===Object.prototype.toString.call(e)}function i(e){return e===Object(e)}function r(e){return null===e||void 0===e}var o,s;if(n(e))e={input:e};else if(!i(e))return null;if(!n(e.input))return null;if(!t)return null;o={rfc6532:!1,partial:!1,simple:!1,strict:!1,rejectTLD:!1};for(s in o)r(e[s])&&(e[s]=r(t[s])?o[s]:t[s]),e[s]=!!e[s];return e}n.parseOneAddress=i,n.parseAddressList=r,"undefined"!=typeof t&&"undefined"!=typeof t.exports?t.exports=n:e.emailAddresses=n}(this)},{}],658:[function(){!function(e){"function"==typeof define&&define.amd?define([],e):e()}(function(){"use strict";var e,t=Math,n=Number,i=Object.defineProperty,r={sinh:function(e){if(0===e)return e;var n=t.exp(e);return n/2-.5/n},cosh:function(e){var n=t.exp(e);return n/2+.5/n},tanh:function(e){if(0===e)return e;if(0>e){var n=t.exp(2*e);return(n-1)/(n+1)}var n=t.exp(-2*e);return(1-n)/(1+n)},asinh:function(e){return e===-1/0?-1/0:t.log(e+t.sqrt(e*e+1))},acosh:function(e){return e>=1?t.log(e+t.sqrt(e*e-1)):0/0},atanh:function(e){return e>=-1&&1>=e?t.log((1+e)/(1-e))/2:0/0},expm1:function(e){return 0===e?e:t.exp(e)-1},log10:function(e){return t.log(e)/t.LN10},log2:function(e){return t.log(e)/t.LN2},log1p:function(e){return 0===e?e:t.log(1+e)},sign:function(e){return isNaN(e)?0/0:0>e?-1:e>0?1:+e},cbrt:function(e){return 0===e?e:0>e?-t.pow(-e,1/3):t.pow(e,1/3)},hypot:function(){for(var e=0,n=0,i=arguments;e<i.length;e++)n+=i[e]*i[e];return t.sqrt(n)},trunc:function(e){return 0===e?e:0>e?t.ceil(e):t.floor(e)},fround:"function"==typeof Float32Array?function(e){return function(t){return e[0]=t,e[0]}}(new Float32Array(1)):function(e){return e},clz32:function(e){if(e===-1/0)return 32;if(0>e||(e|=0)<0)return 0;if(!e)return 32;for(var t=31;e>>=1;)t--;return t},imul:function(e,t){return(0|e)*(0|t)|0}},o={isNaN:function(e){return"number"==typeof e&&e!==e},isFinite:function(e){return"number"==typeof e&&e===e&&1/0!==e&&e!==-1/0},isInteger:function(e){return"number"==typeof e&&1/0!==e&&e!==-1/0&&t.floor(e)===e},isSafeInteger:function(e){return"number"==typeof e&&e>-9007199254740992&&9007199254740992>e&&t.floor(e)===e},parseFloat:parseFloat,parseInt:parseInt},s={EPSILON:2.220446049250313e-16,MAX_SAFE_INTEGER:9007199254740991,MIN_SAFE_INTEGER:-9007199254740991};for(e in r)"function"!=typeof t[e]&&(t[e]=r[e]);for(e in o)"function"!=typeof n[e]&&(n[e]=o[e]);try{e={},i(e,0,{});for(e in s)e in n||i(n,e,{value:s[e]})}catch(a){for(e in s)e in n||(n[e]=s[e])}})},{}],659:[function(e,t,n){!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["exports"],t):t("undefined"!=typeof n?n:e.esprima={})}(this,function(e){"use strict";function t(e,t){if(!e)throw new Error("ASSERT: "+t)}function n(e){return e>=48&&57>=e}function i(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function r(e){return"01234567".indexOf(e)>=0}function o(e){var t="0"!==e,n="01234567".indexOf(e);return yi>li&&r(si[li])&&(t=!0,n=8*n+"01234567".indexOf(si[li++]),"0123".indexOf(e)>=0&&yi>li&&r(si[li])&&(n=8*n+"01234567".indexOf(si[li++]))),{code:n,octal:t}}function s(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function a(e){return 10===e||13===e||8232===e||8233===e}function l(e){return 65536>e?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))}function c(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||92===e||e>=128&&oi.NonAsciiIdentifierStart.test(l(e))}function u(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e||92===e||e>=128&&oi.NonAsciiIdentifierPart.test(l(e))}function d(e){switch(e){case"enum":case"export":case"import":case"super":return!0;default:return!1}}function h(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function f(e){return"eval"===e||"arguments"===e}function p(e){switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function m(e,n,i,r,o){var s;t("number"==typeof i,"Comment must have valid position"),xi.lastCommentStart=i,s={type:e,value:n},ki.range&&(s.range=[i,r]),ki.loc&&(s.loc=o),ki.comments.push(s),ki.attachComment&&(ki.leadingComments.push(s),ki.trailingComments.push(s)),ki.tokenize&&(s.type=s.type+"Comment",ki.delegate&&(s=ki.delegate(s)),ki.tokens.push(s))}function g(e){var t,n,i,r;for(t=li-e,n={start:{line:ci,column:li-ui-e}};yi>li;)if(i=si.charCodeAt(li),++li,a(i))return di=!0,ki.comments&&(r=si.slice(t+e,li-1),n.end={line:ci,column:li-ui-1},m("Line",r,t,li-1,n)),13===i&&10===si.charCodeAt(li)&&++li,++ci,void(ui=li);ki.comments&&(r=si.slice(t+e,li),n.end={line:ci,column:li-ui},m("Line",r,t,li,n))}function v(){var e,t,n,i;for(ki.comments&&(e=li-2,t={start:{line:ci,column:li-ui-2}});yi>li;)if(n=si.charCodeAt(li),a(n))13===n&&10===si.charCodeAt(li+1)&&++li,di=!0,++ci,++li,ui=li;else if(42===n){if(47===si.charCodeAt(li+1))return++li,++li,void(ki.comments&&(i=si.slice(e+2,li-2),t.end={line:ci,column:li-ui},m("Block",i,e,li,t)));++li}else++li;ki.comments&&(t.end={line:ci,column:li-ui},i=si.slice(e+2,li),m("Block",i,e,li,t)),nt()}function b(){var e,t;for(di=!1,t=0===li;yi>li;)if(e=si.charCodeAt(li),s(e))++li;else if(a(e))di=!0,++li,13===e&&10===si.charCodeAt(li)&&++li,++ci,ui=li,t=!0;else if(47===e)if(e=si.charCodeAt(li+1),47===e)++li,++li,g(2),t=!0;else{if(42!==e)break;++li,++li,v()}else if(t&&45===e){if(45!==si.charCodeAt(li+1)||62!==si.charCodeAt(li+2))break;li+=3,g(3)}else{if(60!==e)break;if("!--"!==si.slice(li+1,li+4))break;++li,++li,++li,++li,g(4)}}function y(e){var t,n,r,o=0;for(n="u"===e?4:2,t=0;n>t;++t){if(!(yi>li&&i(si[li])))return"";r=si[li++],o=16*o+"0123456789abcdef".indexOf(r.toLowerCase())}return String.fromCharCode(o)}function w(){var e,t;for(e=si[li],t=0,"}"===e&&tt();yi>li&&(e=si[li++],i(e));)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&tt(),l(t)}function x(e){var t,n,i;return t=si.charCodeAt(e),t>=55296&&56319>=t&&(i=si.charCodeAt(e+1),i>=56320&&57343>=i&&(n=t,t=1024*(n-55296)+i-56320+65536)),t}function k(){var e,t,n;for(e=x(li),n=l(e),li+=n.length,92===e&&(117!==si.charCodeAt(li)&&tt(),++li,"{"===si[li]?(++li,t=w()):(t=y("u"),e=t.charCodeAt(0),t&&"\\"!==t&&c(e)||tt()),n=t);yi>li&&(e=x(li),u(e));)t=l(e),n+=t,li+=t.length,92===e&&(n=n.substr(0,n.length-1),117!==si.charCodeAt(li)&&tt(),++li,"{"===si[li]?(++li,t=w()):(t=y("u"),e=t.charCodeAt(0),t&&"\\"!==t&&u(e)||tt()),n+=t);return n}function _(){var e,t;for(e=li++;yi>li;){if(t=si.charCodeAt(li),92===t)return li=e,k();if(t>=55296&&57343>t)return li=e,k();if(!u(t))break;++li}return si.slice(e,li)}function S(){var e,t,n;return e=li,t=92===si.charCodeAt(li)?k():_(),n=1===t.length?Zn.Identifier:p(t)?Zn.Keyword:"null"===t?Zn.NullLiteral:"true"===t||"false"===t?Zn.BooleanLiteral:Zn.Identifier,{type:n,value:t,lineNumber:ci,lineStart:ui,start:e,end:li}}function C(){var e,t;switch(e={type:Zn.Punctuator,value:"",lineNumber:ci,lineStart:ui,start:li,end:li},t=si[li]){case"(":ki.tokenize&&(ki.openParenToken=ki.tokenValues.length),++li;break;case"{":ki.tokenize&&(ki.openCurlyToken=ki.tokenValues.length),xi.curlyStack.push("{"),++li;break;case".":++li,"."===si[li]&&"."===si[li+1]&&(li+=2,t="...");break;case"}":++li,xi.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++li;break;default:t=si.substr(li,4),">>>="===t?li+=4:(t=t.substr(0,3),"==="===t||"!=="===t||">>>"===t||"<<="===t||">>="===t?li+=3:(t=t.substr(0,2),"&&"===t||"||"===t||"=="===t||"!="===t||"+="===t||"-="===t||"*="===t||"/="===t||"++"===t||"--"===t||"<<"===t||">>"===t||"&="===t||"|="===t||"^="===t||"%="===t||"<="===t||">="===t||"=>"===t?li+=2:(t=si[li],"<>=!+-*%&|^/".indexOf(t)>=0&&++li)))}return li===e.start&&tt(),e.end=li,e.value=t,e}function E(e){for(var t="";yi>li&&i(si[li]);)t+=si[li++];return 0===t.length&&tt(),c(si.charCodeAt(li))&&tt(),{type:Zn.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:ci,lineStart:ui,start:e,end:li}}function I(e){var t,i;for(i="";yi>li&&(t=si[li],"0"===t||"1"===t);)i+=si[li++];return 0===i.length&&tt(),yi>li&&(t=si.charCodeAt(li),(c(t)||n(t))&&tt()),{type:Zn.NumericLiteral,value:parseInt(i,2),lineNumber:ci,lineStart:ui,start:e,end:li}}function R(e,t){var i,o;for(r(e)?(o=!0,i="0"+si[li++]):(o=!1,++li,i="");yi>li&&r(si[li]);)i+=si[li++];return o||0!==i.length||tt(),(c(si.charCodeAt(li))||n(si.charCodeAt(li)))&&tt(),{type:Zn.NumericLiteral,value:parseInt(i,8),octal:o,lineNumber:ci,lineStart:ui,start:t,end:li}}function T(){var e,t;for(e=li+1;yi>e;++e){if(t=si[e],"8"===t||"9"===t)return!1;if(!r(t))return!0}return!0}function A(){var e,i,o;if(o=si[li],t(n(o.charCodeAt(0))||"."===o,"Numeric literal must start with a decimal digit or a decimal point"),i=li,e="","."!==o){if(e=si[li++],o=si[li],"0"===e){if("x"===o||"X"===o)return++li,E(i);if("b"===o||"B"===o)return++li,I(i);if("o"===o||"O"===o)return R(o,i);if(r(o)&&T())return R(o,i)}for(;n(si.charCodeAt(li));)e+=si[li++];o=si[li]}if("."===o){for(e+=si[li++];n(si.charCodeAt(li));)e+=si[li++];o=si[li]}if("e"===o||"E"===o)if(e+=si[li++],o=si[li],("+"===o||"-"===o)&&(e+=si[li++]),n(si.charCodeAt(li)))for(;n(si.charCodeAt(li));)e+=si[li++];else tt();return c(si.charCodeAt(li))&&tt(),{type:Zn.NumericLiteral,value:parseFloat(e),lineNumber:ci,lineStart:ui,start:i,end:li}}function M(){var e,n,i,s,l,c="",u=!1;for(e=si[li],t("'"===e||'"'===e,"String literal must starts with a quote"),n=li,++li;yi>li;){if(i=si[li++],i===e){e="";break}if("\\"===i)if(i=si[li++],i&&a(i.charCodeAt(0)))++ci,"\r"===i&&"\n"===si[li]&&++li,ui=li;else switch(i){case"u":case"x":if("{"===si[li])++li,c+=w();else{if(s=y(i),!s)throw tt();c+=s}break;case"n":c+="\n";break;case"r":c+="\r";break;case"t":c+="	";break;case"b":c+="\b";break;case"f":c+="\f";break;case"v":c+="";break;case"8":case"9":c+=i,nt();break;default:r(i)?(l=o(i),u=l.octal||u,c+=String.fromCharCode(l.code)):c+=i}else{if(a(i.charCodeAt(0)))break;c+=i}}return""!==e&&(li=n,tt()),{type:Zn.StringLiteral,value:c,octal:u,lineNumber:gi,lineStart:vi,start:n,end:li}}function F(){var e,t,i,o,s,l,c,u,d="";for(o=!1,l=!1,t=li,s="`"===si[li],i=2,++li;yi>li;){if(e=si[li++],"`"===e){i=1,l=!0,o=!0;break}if("$"===e){if("{"===si[li]){xi.curlyStack.push("${"),++li,o=!0;break}d+=e}else if("\\"===e)if(e=si[li++],a(e.charCodeAt(0)))++ci,"\r"===e&&"\n"===si[li]&&++li,ui=li;else switch(e){case"n":d+="\n";break;case"r":d+="\r";break;case"t":d+="	";break;case"u":case"x":"{"===si[li]?(++li,d+=w()):(c=li,u=y(e),u?d+=u:(li=c,d+=e));break;case"b":d+="\b";break;case"f":d+="\f";break;case"v":d+="";break;default:"0"===e?(n(si.charCodeAt(li))&&X(ri.TemplateOctalLiteral),d+="\x00"):r(e)?X(ri.TemplateOctalLiteral):d+=e}else a(e.charCodeAt(0))?(++ci,"\r"===e&&"\n"===si[li]&&++li,ui=li,d+="\n"):d+=e}return o||tt(),s||xi.curlyStack.pop(),{type:Zn.Template,value:{cooked:d,raw:si.slice(t+1,li-i)},head:s,tail:l,lineNumber:ci,lineStart:ui,start:t,end:li}}function V(e,t){var n="￿",i=e;t.indexOf("u")>=0&&(i=i.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(e,t,i){var r=parseInt(t||i,16);return r>1114111&&tt(null,ri.InvalidRegExp),65535>=r?String.fromCharCode(r):n}).replace(/[�-�][�-�]/g,n));try{RegExp(i)}catch(r){tt(null,ri.InvalidRegExp)}try{return new RegExp(e,t)}catch(o){return null}}function L(){var e,n,i,r,o;for(e=si[li],t("/"===e,"Regular expression literal must start with a slash"),n=si[li++],i=!1,r=!1;yi>li;)if(e=si[li++],n+=e,"\\"===e)e=si[li++],a(e.charCodeAt(0))&&tt(null,ri.UnterminatedRegExp),n+=e;else if(a(e.charCodeAt(0)))tt(null,ri.UnterminatedRegExp);else if(i)"]"===e&&(i=!1);else{if("/"===e){r=!0;break}"["===e&&(i=!0)}return r||tt(null,ri.UnterminatedRegExp),o=n.substr(1,n.length-2),{value:o,literal:n}}function O(){var e,t,n,i;for(t="",n="";yi>li&&(e=si[li],u(e.charCodeAt(0)));)if(++li,"\\"===e&&yi>li)if(e=si[li],"u"===e){if(++li,i=li,e=y("u"))for(n+=e,t+="\\u";li>i;++i)t+=si[i];else li=i,n+="u",t+="\\u";nt()}else t+="\\",nt();else n+=e,t+=e;return{value:n,literal:t}}function N(){var e,t,n,i;return bi=!0,wi=null,b(),e=li,t=L(),n=O(),i=V(t.value,n.value),bi=!1,ki.tokenize?{type:Zn.RegularExpression,value:i,regex:{pattern:t.value,flags:n.value},lineNumber:ci,lineStart:ui,start:e,end:li}:{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:li}}function $(){var e,t,n,i;return b(),e=li,t={start:{line:ci,column:li-ui}},n=N(),t.end={line:ci,column:li-ui},ki.tokenize||(ki.tokens.length>0&&(i=ki.tokens[ki.tokens.length-1],i.range[0]===e&&"Punctuator"===i.type&&("/"===i.value||"/="===i.value)&&ki.tokens.pop()),ki.tokens.push({type:"RegularExpression",value:n.literal,regex:n.regex,range:[e,li],loc:t})),n}function D(e){return e.type===Zn.Identifier||e.type===Zn.Keyword||e.type===Zn.BooleanLiteral||e.type===Zn.NullLiteral}function P(){function e(e){return e&&e.length>1&&e[0]>="a"&&e[0]<="z"}var t,n,i;switch(n=ki.tokenValues[ki.tokens.length-1],t=null!==n,n){case"this":case"]":t=!1;break;case")":i=ki.tokenValues[ki.openParenToken-1],t="if"===i||"while"===i||"for"===i||"with"===i;break;case"}":t=!1,e(ki.tokenValues[ki.openCurlyToken-3])?(i=ki.tokenValues[ki.openCurlyToken-4],t=i?ti.indexOf(i)<0:!1):e(ki.tokenValues[ki.openCurlyToken-4])&&(i=ki.tokenValues[ki.openCurlyToken-5],t=i?ti.indexOf(i)<0:!0)}return t?$():C()}function j(){var e,t;return li>=yi?{type:Zn.EOF,lineNumber:ci,lineStart:ui,start:li,end:li}:(e=si.charCodeAt(li),c(e)?(t=S(),ai&&h(t.value)&&(t.type=Zn.Keyword),t):40===e||41===e||59===e?C():39===e||34===e?M():46===e?n(si.charCodeAt(li+1))?A():C():n(e)?A():ki.tokenize&&47===e?P():96===e||125===e&&"${"===xi.curlyStack[xi.curlyStack.length-1]?F():e>=55296&&57343>e&&(e=x(li),c(e))?S():C())}function B(){var e,t,n,i;return e={start:{line:ci,column:li-ui}},t=j(),e.end={line:ci,column:li-ui},t.type!==Zn.EOF&&(n=si.slice(t.start,t.end),i={type:ei[t.type],value:n,range:[t.start,t.end],loc:e},t.regex&&(i.regex={pattern:t.regex.pattern,flags:t.regex.flags}),ki.tokenValues&&ki.tokenValues.push("Punctuator"===i.type||"Keyword"===i.type?i.value:null),ki.tokenize&&(ki.range||delete i.range,ki.loc||delete i.loc,ki.delegate&&(i=ki.delegate(i))),ki.tokens.push(i)),t}function U(){var e;return bi=!0,hi=li,fi=ci,pi=ui,b(),e=wi,mi=li,gi=ci,vi=ui,wi="undefined"!=typeof ki.tokens?B():j(),bi=!1,e}function H(){bi=!0,b(),hi=li,fi=ci,pi=ui,mi=li,gi=ci,vi=ui,wi="undefined"!=typeof ki.tokens?B():j(),bi=!1}function z(){this.line=gi,this.column=mi-vi}function q(){this.start=new z,this.end=null}function W(e){this.start={line:e.lineNumber,column:e.start-e.lineStart},this.end=null}function K(){ki.range&&(this.range=[mi,0]),ki.loc&&(this.loc=new q)}function G(e){ki.range&&(this.range=[e.start,0]),ki.loc&&(this.loc=new W(e))}function Y(e){var t,n;for(t=0;t<ki.errors.length;t++)if(n=ki.errors[t],n.index===e.index&&n.message===e.message)return;ki.errors.push(e)}function Q(e,t){var n=new Error(e);try{throw n}catch(i){Object.create&&Object.defineProperty&&(n=Object.create(i),Object.defineProperty(n,"column",{value:t}))}finally{return n}}function J(e,t,n){var i,r,o;return i="Line "+e+": "+n,r=t-(bi?ui:pi)+1,o=Q(i,r),o.lineNumber=e,o.description=n,o.index=t,o}function X(e){var n,i;throw n=Array.prototype.slice.call(arguments,1),i=e.replace(/%(\d)/g,function(e,i){return t(i<n.length,"Message reference must be in range"),n[i]}),J(fi,hi,i)}function Z(e){var n,i,r;if(n=Array.prototype.slice.call(arguments,1),i=e.replace(/%(\d)/g,function(e,i){return t(i<n.length,"Message reference must be in range"),n[i]}),r=J(ci,hi,i),!ki.errors)throw r;Y(r)}function et(e,t){var n,i=t||ri.UnexpectedToken;return e?(t||(i=e.type===Zn.EOF?ri.UnexpectedEOS:e.type===Zn.Identifier?ri.UnexpectedIdentifier:e.type===Zn.NumericLiteral?ri.UnexpectedNumber:e.type===Zn.StringLiteral?ri.UnexpectedString:e.type===Zn.Template?ri.UnexpectedTemplate:ri.UnexpectedToken,e.type===Zn.Keyword&&(d(e.value)?i=ri.UnexpectedReserved:ai&&h(e.value)&&(i=ri.StrictReservedWord))),n=e.type===Zn.Template?e.value.raw:e.value):n="ILLEGAL",i=i.replace("%0",n),e&&"number"==typeof e.lineNumber?J(e.lineNumber,e.start,i):J(bi?ci:fi,bi?li:hi,i)}function tt(e,t){throw et(e,t)}function nt(e,t){var n=et(e,t);if(!ki.errors)throw n;Y(n)}function it(e){var t=U();(t.type!==Zn.Punctuator||t.value!==e)&&tt(t)}function rt(){var e;ki.errors?(e=wi,e.type===Zn.Punctuator&&","===e.value?U():e.type===Zn.Punctuator&&";"===e.value?(U(),nt(e)):nt(e,ri.UnexpectedToken)):it(",")}function ot(e){var t=U();(t.type!==Zn.Keyword||t.value!==e)&&tt(t)}function st(e){return wi.type===Zn.Punctuator&&wi.value===e}function at(e){return wi.type===Zn.Keyword&&wi.value===e}function lt(e){return wi.type===Zn.Identifier&&wi.value===e}function ct(){var e;return wi.type!==Zn.Punctuator?!1:(e=wi.value,"="===e||"*="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e)}function ut(){return 59===si.charCodeAt(mi)||st(";")?void U():void(di||(hi=mi,fi=gi,pi=vi,wi.type===Zn.EOF||st("}")||tt(wi)))}function dt(e){var t,n=_i,i=Si,r=Ci;return _i=!0,Si=!0,Ci=null,t=e(),null!==Ci&&tt(Ci),_i=n,Si=i,Ci=r,t}function ht(e){var t,n=_i,i=Si,r=Ci;return _i=!0,Si=!0,Ci=null,t=e(),_i=_i&&n,Si=Si&&i,Ci=r||Ci,t}function ft(e,t){var n,i,r=new K,o=[];for(it("[");!st("]");)if(st(","))U(),o.push(null);else{if(st("...")){i=new K,U(),e.push(wi),n=Zt(t),o.push(i.finishRestElement(n));break}o.push(vt(e,t)),st("]")||it(",")}return it("]"),r.finishArrayPattern(o)}function pt(e,t){var n,i,r,o=new K,s=st("[");if(wi.type===Zn.Identifier){if(i=wi,n=Zt(),st("="))return e.push(i),U(),r=Gt(),o.finishProperty("init",n,!1,new G(i).finishAssignmentPattern(n,r),!1,!0);if(!st(":"))return e.push(i),o.finishProperty("init",n,!1,n,!1,!0)}else n=xt();return it(":"),r=vt(e,t),o.finishProperty("init",n,s,r,!1,!1)}function mt(e,t){var n=new K,i=[];for(it("{");!st("}");)i.push(pt(e,t)),st("}")||it(",");return U(),n.finishObjectPattern(i)}function gt(e,t){return st("[")?ft(e,t):st("{")?mt(e,t):(at("let")&&("const"===t||"let"===t)&&nt(wi,ri.UnexpectedToken),e.push(wi),Zt(t))}function vt(e,t){var n,i,r,o=wi;return n=gt(e,t),st("=")&&(U(),i=xi.allowYield,xi.allowYield=!0,r=dt(Gt),xi.allowYield=i,n=new G(o).finishAssignmentPattern(n,r)),n}function bt(){var e,t=[],n=new K;for(it("[");!st("]");)st(",")?(U(),t.push(null)):st("...")?(e=new K,U(),e.finishSpreadElement(ht(Gt)),st("]")||(Si=_i=!1,it(",")),t.push(e)):(t.push(ht(Gt)),st("]")||it(","));return U(),n.finishArrayExpression(t)}function yt(e,t,n){var i,r;return Si=_i=!1,i=ai,r=dt(Rn),ai&&t.firstRestricted&&nt(t.firstRestricted,t.message),ai&&t.stricted&&nt(t.stricted,t.message),ai=i,e.finishFunctionExpression(null,t.params,t.defaults,r,n)}function wt(){var e,t,n=new K,i=xi.allowYield;return xi.allowYield=!1,e=Mn(),xi.allowYield=i,xi.allowYield=!1,t=yt(n,e,!1),xi.allowYield=i,t}function xt(){var e,t,n=new K;switch(e=U(),e.type){case Zn.StringLiteral:case Zn.NumericLiteral:return ai&&e.octal&&nt(e,ri.StrictOctalLiteral),n.finishLiteral(e);case Zn.Identifier:case Zn.BooleanLiteral:case Zn.NullLiteral:case Zn.Keyword:return n.finishIdentifier(e.value);case Zn.Punctuator:if("["===e.value)return t=dt(Gt),it("]"),t}tt(e)}function kt(){switch(wi.type){case Zn.Identifier:case Zn.StringLiteral:case Zn.BooleanLiteral:case Zn.NullLiteral:case Zn.NumericLiteral:case Zn.Keyword:return!0;case Zn.Punctuator:return"["===wi.value}return!1}function _t(e,t,n,i){var r,o,s,a,l=xi.allowYield;if(e.type===Zn.Identifier){if("get"===e.value&&kt())return n=st("["),t=xt(),s=new K,it("("),it(")"),xi.allowYield=!1,r=yt(s,{params:[],defaults:[],stricted:null,firstRestricted:null,message:null},!1),xi.allowYield=l,i.finishProperty("get",t,n,r,!1,!1);if("set"===e.value&&kt())return n=st("["),t=xt(),s=new K,it("("),o={params:[],defaultCount:0,defaults:[],firstRestricted:null,paramSet:{}},st(")")?nt(wi):(xi.allowYield=!1,An(o),xi.allowYield=l,0===o.defaultCount&&(o.defaults=[])),it(")"),xi.allowYield=!1,r=yt(s,o,!1),xi.allowYield=l,i.finishProperty("set",t,n,r,!1,!1)}else if(e.type===Zn.Punctuator&&"*"===e.value&&kt())return n=st("["),t=xt(),s=new K,xi.allowYield=!0,a=Mn(),xi.allowYield=l,xi.allowYield=!1,r=yt(s,a,!0),xi.allowYield=l,i.finishProperty("init",t,n,r,!0,!1);return t&&st("(")?(r=wt(),i.finishProperty("init",t,n,r,!0,!1)):null}function St(e){var t,n,i,r,o,s=wi,a=new K;
return t=st("["),st("*")?U():n=xt(),(i=_t(s,n,t,a))?i:(n||tt(wi),t||(r=n.type===ni.Identifier&&"__proto__"===n.name||n.type===ni.Literal&&"__proto__"===n.value,e.value&&r&&Z(ri.DuplicateProtoProperty),e.value|=r),st(":")?(U(),o=ht(Gt),a.finishProperty("init",n,t,o,!1,!1)):s.type===Zn.Identifier?st("=")?(Ci=wi,U(),o=dt(Gt),a.finishProperty("init",n,t,new G(s).finishAssignmentPattern(n,o),!1,!0)):a.finishProperty("init",n,t,n,!1,!0):void tt(wi))}function Ct(){var e=[],t={value:!1},n=new K;for(it("{");!st("}");)e.push(St(t)),st("}")||rt();return it("}"),n.finishObjectExpression(e)}function Et(e){var t;switch(e.type){case ni.Identifier:case ni.MemberExpression:case ni.RestElement:case ni.AssignmentPattern:break;case ni.SpreadElement:e.type=ni.RestElement,Et(e.argument);break;case ni.ArrayExpression:for(e.type=ni.ArrayPattern,t=0;t<e.elements.length;t++)null!==e.elements[t]&&Et(e.elements[t]);break;case ni.ObjectExpression:for(e.type=ni.ObjectPattern,t=0;t<e.properties.length;t++)Et(e.properties[t].value);break;case ni.AssignmentExpression:e.type=ni.AssignmentPattern,Et(e.left)}}function It(e){var t,n;return(wi.type!==Zn.Template||e.head&&!wi.head)&&tt(),t=new K,n=U(),t.finishTemplateElement({raw:n.value.raw,cooked:n.value.cooked},n.tail)}function Rt(){var e,t,n,i=new K;for(e=It({head:!0}),t=[e],n=[];!e.tail;)n.push(Yt()),e=It({head:!1}),t.push(e);return i.finishTemplateLiteral(t,n)}function Tt(){var e,t,n,i,r=[];if(it("("),st(")"))return U(),st("=>")||it("=>"),{type:ii.ArrowParameterPlaceHolder,params:[],rawParams:[]};if(n=wi,st("..."))return e=un(r),it(")"),st("=>")||it("=>"),{type:ii.ArrowParameterPlaceHolder,params:[e]};if(_i=!0,e=ht(Gt),st(",")){for(Si=!1,t=[e];yi>mi&&st(",");){if(U(),st("...")){for(_i||tt(wi),t.push(un(r)),it(")"),st("=>")||it("=>"),_i=!1,i=0;i<t.length;i++)Et(t[i]);return{type:ii.ArrowParameterPlaceHolder,params:t}}t.push(ht(Gt))}e=new G(n).finishSequenceExpression(t)}if(it(")"),st("=>")){if(e.type===ni.Identifier&&"yield"===e.name)return{type:ii.ArrowParameterPlaceHolder,params:[e]};if(_i||tt(wi),e.type===ni.SequenceExpression)for(i=0;i<e.expressions.length;i++)Et(e.expressions[i]);else Et(e);e={type:ii.ArrowParameterPlaceHolder,params:e.type===ni.SequenceExpression?e.expressions:[e]}}return _i=!1,e}function At(){var e,t,n,i;if(st("("))return _i=!1,ht(Tt);if(st("["))return ht(bt);if(st("{"))return ht(Ct);if(e=wi.type,i=new K,e===Zn.Identifier)"module"===xi.sourceType&&"await"===wi.value&&nt(wi),n=i.finishIdentifier(U().value);else if(e===Zn.StringLiteral||e===Zn.NumericLiteral)Si=_i=!1,ai&&wi.octal&&nt(wi,ri.StrictOctalLiteral),n=i.finishLiteral(U());else if(e===Zn.Keyword){if(!ai&&xi.allowYield&&at("yield"))return Ft();if(!ai&&at("let"))return i.finishIdentifier(U().value);if(Si=_i=!1,at("function"))return Vn();if(at("this"))return U(),i.finishThisExpression();if(at("class"))return Nn();tt(U())}else e===Zn.BooleanLiteral?(Si=_i=!1,t=U(),t.value="true"===t.value,n=i.finishLiteral(t)):e===Zn.NullLiteral?(Si=_i=!1,t=U(),t.value=null,n=i.finishLiteral(t)):st("/")||st("/=")?(Si=_i=!1,li=mi,t="undefined"!=typeof ki.tokens?$():N(),U(),n=i.finishLiteral(t)):e===Zn.Template?n=Rt():tt(U());return n}function Mt(){var e,t=[];if(it("("),!st(")"))for(;yi>mi&&(st("...")?(e=new K,U(),e.finishSpreadElement(dt(Gt))):e=dt(Gt),t.push(e),!st(")"));)rt();return it(")"),t}function Ft(){var e,t=new K;return e=U(),D(e)||tt(e),t.finishIdentifier(e.value)}function Vt(){return it("."),Ft()}function Lt(){var e;return it("["),e=dt(Yt),it("]"),e}function Ot(){var e,t,n=new K;if(ot("new"),st(".")){if(U(),wi.type===Zn.Identifier&&"target"===wi.value&&xi.inFunctionBody)return U(),n.finishMetaProperty("new","target");tt(wi)}return e=dt($t),t=st("(")?Mt():[],Si=_i=!1,n.finishNewExpression(e,t)}function Nt(){var e,t,n,i,r,o=xi.allowIn;for(r=wi,xi.allowIn=!0,at("super")&&xi.inFunctionBody?(t=new K,U(),t=t.finishSuper(),st("(")||st(".")||st("[")||tt(wi)):t=ht(at("new")?Ot:At);;)if(st("."))_i=!1,Si=!0,i=Vt(),t=new G(r).finishMemberExpression(".",t,i);else if(st("("))_i=!1,Si=!1,n=Mt(),t=new G(r).finishCallExpression(t,n);else if(st("["))_i=!1,Si=!0,i=Lt(),t=new G(r).finishMemberExpression("[",t,i);else{if(wi.type!==Zn.Template||!wi.head)break;e=Rt(),t=new G(r).finishTaggedTemplateExpression(t,e)}return xi.allowIn=o,t}function $t(){var e,n,i,r;for(t(xi.allowIn,"callee of new expression always allow in keyword."),r=wi,at("super")&&xi.inFunctionBody?(n=new K,U(),n=n.finishSuper(),st("[")||st(".")||tt(wi)):n=ht(at("new")?Ot:At);;)if(st("["))_i=!1,Si=!0,i=Lt(),n=new G(r).finishMemberExpression("[",n,i);else if(st("."))_i=!1,Si=!0,i=Vt(),n=new G(r).finishMemberExpression(".",n,i);else{if(wi.type!==Zn.Template||!wi.head)break;e=Rt(),n=new G(r).finishTaggedTemplateExpression(n,e)}return n}function Dt(){var e,t,n=wi;return e=ht(Nt),di||wi.type!==Zn.Punctuator||(st("++")||st("--"))&&(ai&&e.type===ni.Identifier&&f(e.name)&&Z(ri.StrictLHSPostfix),Si||Z(ri.InvalidLHSInAssignment),Si=_i=!1,t=U(),e=new G(n).finishPostfixExpression(t.value,e)),e}function Pt(){var e,t,n;return wi.type!==Zn.Punctuator&&wi.type!==Zn.Keyword?t=Dt():st("++")||st("--")?(n=wi,e=U(),t=ht(Pt),ai&&t.type===ni.Identifier&&f(t.name)&&Z(ri.StrictLHSPrefix),Si||Z(ri.InvalidLHSInAssignment),t=new G(n).finishUnaryExpression(e.value,t),Si=_i=!1):st("+")||st("-")||st("~")||st("!")?(n=wi,e=U(),t=ht(Pt),t=new G(n).finishUnaryExpression(e.value,t),Si=_i=!1):at("delete")||at("void")||at("typeof")?(n=wi,e=U(),t=ht(Pt),t=new G(n).finishUnaryExpression(e.value,t),ai&&"delete"===t.operator&&t.argument.type===ni.Identifier&&Z(ri.StrictDelete),Si=_i=!1):t=Dt(),t}function jt(e,t){var n=0;if(e.type!==Zn.Punctuator&&e.type!==Zn.Keyword)return 0;switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=t?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function Bt(){var e,t,n,i,r,o,s,a,l,c;if(e=wi,l=ht(Pt),i=wi,r=jt(i,xi.allowIn),0===r)return l;for(Si=_i=!1,i.prec=r,U(),t=[e,wi],s=dt(Pt),o=[l,i,s];(r=jt(wi,xi.allowIn))>0;){for(;o.length>2&&r<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),n=new G(t[t.length-1]).finishBinaryExpression(a,l,s),o.push(n);i=U(),i.prec=r,o.push(i),t.push(wi),n=dt(Pt),o.push(n)}for(c=o.length-1,n=o[c],t.pop();c>1;)n=new G(t.pop()).finishBinaryExpression(o[c-1].value,o[c-2],n),c-=2;return n}function Ut(){var e,t,n,i,r;return r=wi,e=ht(Bt),st("?")&&(U(),t=xi.allowIn,xi.allowIn=!0,n=dt(Gt),xi.allowIn=t,it(":"),i=dt(Gt),e=new G(r).finishConditionalExpression(e,n,i),Si=_i=!1),e}function Ht(){return st("{")?Rn():dt(Gt)}function zt(e,n){var i;switch(n.type){case ni.Identifier:Tn(e,n,n.name);break;case ni.RestElement:zt(e,n.argument);break;case ni.AssignmentPattern:zt(e,n.left);break;case ni.ArrayPattern:for(i=0;i<n.elements.length;i++)null!==n.elements[i]&&zt(e,n.elements[i]);break;case ni.YieldExpression:break;default:for(t(n.type===ni.ObjectPattern,"Invalid type"),i=0;i<n.properties.length;i++)zt(e,n.properties[i].value)}}function qt(e){var t,n,i,r,o,s,a,l;switch(o=[],s=0,r=[e],e.type){case ni.Identifier:break;case ii.ArrowParameterPlaceHolder:r=e.params;break;default:return null}for(a={paramSet:{}},t=0,n=r.length;n>t;t+=1)switch(i=r[t],i.type){case ni.AssignmentPattern:r[t]=i.left,i.right.type===ni.YieldExpression&&(i.right.argument&&tt(wi),i.right.type=ni.Identifier,i.right.name="yield",delete i.right.argument,delete i.right.delegate),o.push(i.right),++s,zt(a,i.left);break;default:zt(a,i),r[t]=i,o.push(null)}if(ai||!xi.allowYield)for(t=0,n=r.length;n>t;t+=1)i=r[t],i.type===ni.YieldExpression&&tt(wi);return a.message===ri.StrictParamDupe&&(l=ai?a.stricted:a.firstRestricted,tt(l,a.message)),0===s&&(o=[]),{params:r,defaults:o,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function Wt(e,t){var n,i,r;return di&&nt(wi),it("=>"),n=ai,i=xi.allowYield,xi.allowYield=!0,r=Ht(),ai&&e.firstRestricted&&tt(e.firstRestricted,e.message),ai&&e.stricted&&nt(e.stricted,e.message),ai=n,xi.allowYield=i,t.finishArrowFunctionExpression(e.params,e.defaults,r,r.type!==ni.BlockStatement)}function Kt(){var e,t,n,i;return e=null,t=new K,n=!1,ot("yield"),di||(i=xi.allowYield,xi.allowYield=!1,n=st("*"),n?(U(),e=Gt()):st(";")||st("}")||st(")")||wi.type===Zn.EOF||(e=Gt()),xi.allowYield=i),t.finishYieldExpression(e,n)}function Gt(){var e,t,n,i,r;return r=wi,e=wi,!xi.allowYield&&at("yield")?Kt():(t=Ut(),t.type===ii.ArrowParameterPlaceHolder||st("=>")?(Si=_i=!1,i=qt(t),i?(Ci=null,Wt(i,new G(r))):t):(ct()&&(Si||Z(ri.InvalidLHSInAssignment),ai&&t.type===ni.Identifier&&(f(t.name)&&nt(e,ri.StrictLHSAssignment),h(t.name)&&nt(e,ri.StrictReservedWord)),st("=")?Et(t):Si=_i=!1,e=U(),n=dt(Gt),t=new G(r).finishAssignmentExpression(e.value,t,n),Ci=null),t))}function Yt(){var e,t,n=wi;if(e=dt(Gt),st(",")){for(t=[e];yi>mi&&st(",");)U(),t.push(dt(Gt));e=new G(n).finishSequenceExpression(t)}return e}function Qt(){if(wi.type===Zn.Keyword)switch(wi.value){case"export":return"module"!==xi.sourceType&&nt(wi,ri.IllegalExportDeclaration),Un();case"import":return"module"!==xi.sourceType&&nt(wi,ri.IllegalImportDeclaration),Kn();case"const":return cn({inFor:!1});case"function":return Fn(new K);case"class":return On()}return at("let")&&ln()?cn({inFor:!1}):In()}function Jt(){for(var e=[];yi>mi&&!st("}");)e.push(Qt());return e}function Xt(){var e,t=new K;return it("{"),e=Jt(),it("}"),t.finishBlockStatement(e)}function Zt(e){var t,n=new K;return t=U(),t.type===Zn.Keyword&&"yield"===t.value?(ai&&nt(t,ri.StrictReservedWord),xi.allowYield||tt(t)):t.type!==Zn.Identifier?ai&&t.type===Zn.Keyword&&h(t.value)?nt(t,ri.StrictReservedWord):(ai||"let"!==t.value||"var"!==e)&&tt(t):"module"===xi.sourceType&&t.type===Zn.Identifier&&"await"===t.value&&nt(t),n.finishIdentifier(t.value)}function en(e){var t,n=null,i=new K,r=[];return t=gt(r,"var"),ai&&f(t.name)&&Z(ri.StrictVarName),st("=")?(U(),n=dt(Gt)):t.type===ni.Identifier||e.inFor||it("="),i.finishVariableDeclarator(t,n)}function tn(e){var t,n;for(t={inFor:e.inFor},n=[en(t)];st(",");)U(),n.push(en(t));return n}function nn(e){var t;return ot("var"),t=tn({inFor:!1}),ut(),e.finishVariableDeclaration(t)}function rn(e,t){var n,i=null,r=new K,o=[];return n=gt(o,e),ai&&n.type===ni.Identifier&&f(n.name)&&Z(ri.StrictVarName),"const"===e?at("in")||lt("of")||(it("="),i=dt(Gt)):(!t.inFor&&n.type!==ni.Identifier||st("="))&&(it("="),i=dt(Gt)),r.finishVariableDeclarator(n,i)}function on(e,t){for(var n=[rn(e,t)];st(",");)U(),n.push(rn(e,t));return n}function sn(){return{index:li,lineNumber:ci,lineStart:ui,hasLineTerminator:di,lastIndex:hi,lastLineNumber:fi,lastLineStart:pi,startIndex:mi,startLineNumber:gi,startLineStart:vi,lookahead:wi,tokenCount:ki.tokens?ki.tokens.length:0}}function an(e){li=e.index,ci=e.lineNumber,ui=e.lineStart,di=e.hasLineTerminator,hi=e.lastIndex,fi=e.lastLineNumber,pi=e.lastLineStart,mi=e.startIndex,gi=e.startLineNumber,vi=e.startLineStart,wi=e.lookahead,ki.tokens&&ki.tokens.splice(e.tokenCount,ki.tokens.length)}function ln(){var e,t;return t=sn(),U(),e=wi.type===Zn.Identifier||st("[")||st("{")||at("let")||at("yield"),an(t),e}function cn(e){var n,i,r=new K;return n=U().value,t("let"===n||"const"===n,"Lexical declaration must be either let or const"),i=on(n,e),ut(),r.finishLexicalDeclaration(i,n)}function un(e){var t,n=new K;return U(),st("{")&&X(ri.ObjectPatternAsRestParameter),e.push(wi),t=Zt(),st("=")&&X(ri.DefaultRestParameter),st(")")||X(ri.ParameterAfterRestParameter),n.finishRestElement(t)}function dn(e){return it(";"),e.finishEmptyStatement()}function hn(e){var t=Yt();return ut(),e.finishExpressionStatement(t)}function fn(e){var t,n,i;return ot("if"),it("("),t=Yt(),it(")"),n=In(),at("else")?(U(),i=In()):i=null,e.finishIfStatement(t,n,i)}function pn(e){var t,n,i;return ot("do"),i=xi.inIteration,xi.inIteration=!0,t=In(),xi.inIteration=i,ot("while"),it("("),n=Yt(),it(")"),st(";")&&U(),e.finishDoWhileStatement(t,n)}function mn(e){var t,n,i;return ot("while"),it("("),t=Yt(),it(")"),i=xi.inIteration,xi.inIteration=!0,n=In(),xi.inIteration=i,e.finishWhileStatement(t,n)}function gn(e){var t,n,i,r,o,s,a,l,c,u,d,h,f=xi.allowIn;if(t=o=s=null,n=!0,ot("for"),it("("),st(";"))U();else if(at("var"))t=new K,U(),xi.allowIn=!1,u=tn({inFor:!0}),xi.allowIn=f,1===u.length&&at("in")?(t=t.finishVariableDeclaration(u),U(),a=t,l=Yt(),t=null):1===u.length&&null===u[0].init&&lt("of")?(t=t.finishVariableDeclaration(u),U(),a=t,l=Gt(),t=null,n=!1):(t=t.finishVariableDeclaration(u),it(";"));else if(at("const")||at("let"))t=new K,c=U().value,ai||"in"!==wi.value?(xi.allowIn=!1,u=on(c,{inFor:!0}),xi.allowIn=f,1===u.length&&null===u[0].init&&at("in")?(t=t.finishLexicalDeclaration(u,c),U(),a=t,l=Yt(),t=null):1===u.length&&null===u[0].init&&lt("of")?(t=t.finishLexicalDeclaration(u,c),U(),a=t,l=Gt(),t=null,n=!1):(ut(),t=t.finishLexicalDeclaration(u,c))):(t=t.finishIdentifier(c),U(),a=t,l=Yt(),t=null);else if(r=wi,xi.allowIn=!1,t=ht(Gt),xi.allowIn=f,at("in"))Si||Z(ri.InvalidLHSInForIn),U(),Et(t),a=t,l=Yt(),t=null;else if(lt("of"))Si||Z(ri.InvalidLHSInForLoop),U(),Et(t),a=t,l=Gt(),t=null,n=!1;else{if(st(",")){for(i=[t];st(",");)U(),i.push(dt(Gt));t=new G(r).finishSequenceExpression(i)}it(";")}return"undefined"==typeof a&&(st(";")||(o=Yt()),it(";"),st(")")||(s=Yt())),it(")"),h=xi.inIteration,xi.inIteration=!0,d=dt(In),xi.inIteration=h,"undefined"==typeof a?e.finishForStatement(t,o,s,d):n?e.finishForInStatement(a,l,d):e.finishForOfStatement(a,l,d)}function vn(e){var t,n=null;return ot("continue"),59===si.charCodeAt(mi)?(U(),xi.inIteration||X(ri.IllegalContinue),e.finishContinueStatement(null)):di?(xi.inIteration||X(ri.IllegalContinue),e.finishContinueStatement(null)):(wi.type===Zn.Identifier&&(n=Zt(),t="$"+n.name,Object.prototype.hasOwnProperty.call(xi.labelSet,t)||X(ri.UnknownLabel,n.name)),ut(),null!==n||xi.inIteration||X(ri.IllegalContinue),e.finishContinueStatement(n))}function bn(e){var t,n=null;return ot("break"),59===si.charCodeAt(hi)?(U(),xi.inIteration||xi.inSwitch||X(ri.IllegalBreak),e.finishBreakStatement(null)):(di?xi.inIteration||xi.inSwitch||X(ri.IllegalBreak):wi.type===Zn.Identifier&&(n=Zt(),t="$"+n.name,Object.prototype.hasOwnProperty.call(xi.labelSet,t)||X(ri.UnknownLabel,n.name)),ut(),null!==n||xi.inIteration||xi.inSwitch||X(ri.IllegalBreak),e.finishBreakStatement(n))}function yn(e){var t=null;return ot("return"),xi.inFunctionBody||Z(ri.IllegalReturn),32===si.charCodeAt(hi)&&c(si.charCodeAt(hi+1))?(t=Yt(),ut(),e.finishReturnStatement(t)):di?e.finishReturnStatement(null):(st(";")||st("}")||wi.type===Zn.EOF||(t=Yt()),ut(),e.finishReturnStatement(t))}function wn(e){var t,n;return ai&&Z(ri.StrictModeWith),ot("with"),it("("),t=Yt(),it(")"),n=In(),e.finishWithStatement(t,n)}function xn(){var e,t,n=[],i=new K;for(at("default")?(U(),e=null):(ot("case"),e=Yt()),it(":");yi>mi&&!(st("}")||at("default")||at("case"));)t=Qt(),n.push(t);return i.finishSwitchCase(e,n)}function kn(e){var t,n,i,r,o;if(ot("switch"),it("("),t=Yt(),it(")"),it("{"),n=[],st("}"))return U(),e.finishSwitchStatement(t,n);for(r=xi.inSwitch,xi.inSwitch=!0,o=!1;yi>mi&&!st("}");)i=xn(),null===i.test&&(o&&X(ri.MultipleDefaultsInSwitch),o=!0),n.push(i);return xi.inSwitch=r,it("}"),e.finishSwitchStatement(t,n)}function _n(e){var t;return ot("throw"),di&&X(ri.NewlineAfterThrow),t=Yt(),ut(),e.finishThrowStatement(t)}function Sn(){var e,t,n,i,r=[],o={},s=new K;for(ot("catch"),it("("),st(")")&&tt(wi),e=gt(r),n=0;n<r.length;n++)t="$"+r[n].value,Object.prototype.hasOwnProperty.call(o,t)&&Z(ri.DuplicateBinding,r[n].value),o[t]=!0;return ai&&f(e.name)&&Z(ri.StrictCatchVariable),it(")"),i=Xt(),s.finishCatchClause(e,i)}function Cn(e){var t,n=null,i=null;return ot("try"),t=Xt(),at("catch")&&(n=Sn()),at("finally")&&(U(),i=Xt()),n||i||X(ri.NoCatchOrFinally),e.finishTryStatement(t,n,i)}function En(e){return ot("debugger"),ut(),e.finishDebuggerStatement()}function In(){var e,t,n,i,r=wi.type;if(r===Zn.EOF&&tt(wi),r===Zn.Punctuator&&"{"===wi.value)return Xt();if(Si=_i=!0,i=new K,r===Zn.Punctuator)switch(wi.value){case";":return dn(i);case"(":return hn(i)}else if(r===Zn.Keyword)switch(wi.value){case"break":return bn(i);case"continue":return vn(i);case"debugger":return En(i);case"do":return pn(i);case"for":return gn(i);case"function":return Fn(i);case"if":return fn(i);case"return":return yn(i);case"switch":return kn(i);case"throw":return _n(i);case"try":return Cn(i);case"var":return nn(i);case"while":return mn(i);case"with":return wn(i)}return e=Yt(),e.type===ni.Identifier&&st(":")?(U(),n="$"+e.name,Object.prototype.hasOwnProperty.call(xi.labelSet,n)&&X(ri.Redeclaration,"Label",e.name),xi.labelSet[n]=!0,t=In(),delete xi.labelSet[n],i.finishLabeledStatement(e,t)):(ut(),i.finishExpressionStatement(e))}function Rn(){var e,t,n,i,r,o,s,a,l=[],c=new K;for(it("{");yi>mi&&wi.type===Zn.StringLiteral&&(t=wi,e=Qt(),l.push(e),e.expression.type===ni.Literal);)n=si.slice(t.start+1,t.end-1),"use strict"===n?(ai=!0,i&&nt(i,ri.StrictOctalLiteral)):!i&&t.octal&&(i=t);for(r=xi.labelSet,o=xi.inIteration,s=xi.inSwitch,a=xi.inFunctionBody,xi.labelSet={},xi.inIteration=!1,xi.inSwitch=!1,xi.inFunctionBody=!0;yi>mi&&!st("}");)l.push(Qt());return it("}"),xi.labelSet=r,xi.inIteration=o,xi.inSwitch=s,xi.inFunctionBody=a,c.finishBlockStatement(l)}function Tn(e,t,n){var i="$"+n;ai?(f(n)&&(e.stricted=t,e.message=ri.StrictParamName),Object.prototype.hasOwnProperty.call(e.paramSet,i)&&(e.stricted=t,e.message=ri.StrictParamDupe)):e.firstRestricted||(f(n)?(e.firstRestricted=t,e.message=ri.StrictParamName):h(n)?(e.firstRestricted=t,e.message=ri.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet,i)&&(e.stricted=t,e.message=ri.StrictParamDupe)),e.paramSet[i]=!0}function An(e){var t,n,i,r,o=[];if(t=wi,"..."===t.value)return n=un(o),Tn(e,n.argument,n.argument.name),e.params.push(n),e.defaults.push(null),!1;for(n=vt(o),i=0;i<o.length;i++)Tn(e,o[i],o[i].value);return n.type===ni.AssignmentPattern&&(r=n.right,n=n.left,++e.defaultCount),e.params.push(n),e.defaults.push(r),!st(")")}function Mn(e){var t;if(t={params:[],defaultCount:0,defaults:[],firstRestricted:e},it("("),!st(")"))for(t.paramSet={};yi>mi&&An(t);)it(",");return it(")"),0===t.defaultCount&&(t.defaults=[]),{params:t.params,defaults:t.defaults,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}}function Fn(e,t){var n,i,r,o,s,a,l,c,u,d=null,p=[],m=[];return u=xi.allowYield,ot("function"),c=st("*"),c&&U(),t&&st("(")||(i=wi,d=Zt(),ai?f(i.value)&&nt(i,ri.StrictFunctionName):f(i.value)?(s=i,a=ri.StrictFunctionName):h(i.value)&&(s=i,a=ri.StrictReservedWord)),xi.allowYield=!c,o=Mn(s),p=o.params,m=o.defaults,r=o.stricted,s=o.firstRestricted,o.message&&(a=o.message),l=ai,n=Rn(),ai&&s&&tt(s,a),ai&&r&&nt(r,a),ai=l,xi.allowYield=u,e.finishFunctionDeclaration(d,p,m,n,c)}function Vn(){var e,t,n,i,r,o,s,a,l,c=null,u=[],d=[],p=new K;return l=xi.allowYield,ot("function"),a=st("*"),a&&U(),xi.allowYield=!a,st("(")||(e=wi,c=ai||a||!at("yield")?Zt():Ft(),ai?f(e.value)&&nt(e,ri.StrictFunctionName):f(e.value)?(n=e,i=ri.StrictFunctionName):h(e.value)&&(n=e,i=ri.StrictReservedWord)),r=Mn(n),u=r.params,d=r.defaults,t=r.stricted,n=r.firstRestricted,r.message&&(i=r.message),s=ai,o=Rn(),ai&&n&&tt(n,i),ai&&t&&nt(t,i),ai=s,xi.allowYield=l,p.finishFunctionExpression(c,u,d,o,a)}function Ln(){var e,t,n,i,r,o,s,a=!1;for(e=new K,it("{"),i=[];!st("}");)st(";")?U():(r=new K,t=wi,n=!1,o=st("["),st("*")?U():(s=xt(),"static"===s.name&&(kt()||st("*"))&&(t=wi,n=!0,o=st("["),st("*")?U():s=xt())),r=_t(t,s,o,r),r?(r["static"]=n,"init"===r.kind&&(r.kind="method"),n?r.computed||"prototype"!==(r.key.name||r.key.value.toString())||tt(t,ri.StaticPrototype):r.computed||"constructor"!==(r.key.name||r.key.value.toString())||(("method"!==r.kind||!r.method||r.value.generator)&&tt(t,ri.ConstructorSpecialMethod),a?tt(t,ri.DuplicateConstructor):a=!0,r.kind="constructor"),r.type=ni.MethodDefinition,delete r.method,delete r.shorthand,i.push(r)):tt(wi));return U(),e.finishClassBody(i)}function On(e){var t,n=null,i=null,r=new K,o=ai;return ai=!0,ot("class"),e&&wi.type!==Zn.Identifier||(n=Zt()),at("extends")&&(U(),i=dt(Nt)),t=Ln(),ai=o,r.finishClassDeclaration(n,i,t)}function Nn(){var e,t=null,n=null,i=new K,r=ai;return ai=!0,ot("class"),wi.type===Zn.Identifier&&(t=Zt()),at("extends")&&(U(),n=dt(Nt)),e=Ln(),ai=r,i.finishClassExpression(t,n,e)}function $n(){var e=new K;return wi.type!==Zn.StringLiteral&&X(ri.InvalidModuleSpecifier),e.finishLiteral(U())}function Dn(){var e,t,n,i=new K;return at("default")?(n=new K,U(),t=n.finishIdentifier("default")):t=Zt(),lt("as")&&(U(),e=Ft()),i.finishExportSpecifier(t,e)}function Pn(e){var t,n=null,i=null,r=[];if(wi.type===Zn.Keyword)switch(wi.value){case"let":case"const":return n=cn({inFor:!1}),e.finishExportNamedDeclaration(n,r,null);case"var":case"class":case"function":return n=Qt(),e.finishExportNamedDeclaration(n,r,null)}for(it("{");!st("}")&&(t=t||at("default"),r.push(Dn()),st("}")||(it(","),!st("}"))););return it("}"),lt("from")?(U(),i=$n(),ut()):t?X(wi.value?ri.UnexpectedToken:ri.MissingFromClause,wi.value):ut(),e.finishExportNamedDeclaration(n,r,i)}function jn(e){var t=null,n=null;return ot("default"),at("function")?(t=Fn(new K,!0),e.finishExportDefaultDeclaration(t)):at("class")?(t=On(!0),e.finishExportDefaultDeclaration(t)):(lt("from")&&X(ri.UnexpectedToken,wi.value),n=st("{")?Ct():st("[")?bt():Gt(),ut(),e.finishExportDefaultDeclaration(n))}function Bn(e){var t;return it("*"),lt("from")||X(wi.value?ri.UnexpectedToken:ri.MissingFromClause,wi.value),U(),t=$n(),ut(),e.finishExportAllDeclaration(t)}function Un(){var e=new K;return xi.inFunctionBody&&X(ri.IllegalExportDeclaration),ot("export"),at("default")?jn(e):st("*")?Bn(e):Pn(e)}function Hn(){var e,t,n=new K;return t=Ft(),lt("as")&&(U(),e=Zt()),n.finishImportSpecifier(e,t)}function zn(){var e=[];for(it("{");!st("}")&&(e.push(Hn()),st("}")||(it(","),!st("}"))););return it("}"),e}function qn(){var e,t=new K;return e=Ft(),t.finishImportDefaultSpecifier(e)}function Wn(){var e,t=new K;return it("*"),lt("as")||X(ri.NoAsAfterImportNamespace),U(),e=Ft(),t.finishImportNamespaceSpecifier(e)}function Kn(){var e,t=[],n=new K;return xi.inFunctionBody&&X(ri.IllegalImportDeclaration),ot("import"),wi.type===Zn.StringLiteral?e=$n():(st("{")?t=t.concat(zn()):st("*")?t.push(Wn()):D(wi)&&!at("default")?(t.push(qn()),st(",")&&(U(),st("*")?t.push(Wn()):st("{")?t=t.concat(zn()):tt(wi))):tt(U()),lt("from")||X(wi.value?ri.UnexpectedToken:ri.MissingFromClause,wi.value),U(),e=$n()),ut(),n.finishImportDeclaration(t,e)}function Gn(){for(var e,t,n,i,r=[];yi>mi&&(t=wi,t.type===Zn.StringLiteral)&&(e=Qt(),r.push(e),e.expression.type===ni.Literal);)n=si.slice(t.start+1,t.end-1),"use strict"===n?(ai=!0,i&&nt(i,ri.StrictOctalLiteral)):!i&&t.octal&&(i=t);for(;yi>mi&&(e=Qt(),"undefined"!=typeof e);)r.push(e);return r}function Yn(){var e,t;return H(),t=new K,e=Gn(),t.finishProgram(e,xi.sourceType)}function Qn(){var e,t,n,i=[];for(e=0;e<ki.tokens.length;++e)t=ki.tokens[e],n={type:t.type,value:t.value},t.regex&&(n.regex={pattern:t.regex.pattern,flags:t.regex.flags}),ki.range&&(n.range=t.range),ki.loc&&(n.loc=t.loc),i.push(n);ki.tokens=i}function Jn(e,t,n){var i,r;i=String,"string"==typeof e||e instanceof String||(e=i(e)),si=e,li=0,ci=si.length>0?1:0,ui=0,mi=li,gi=ci,vi=ui,yi=si.length,wi=null,xi={allowIn:!0,allowYield:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1,curlyStack:[]},ki={},t=t||{},t.tokens=!0,ki.tokens=[],ki.tokenValues=[],ki.tokenize=!0,ki.delegate=n,ki.openParenToken=-1,ki.openCurlyToken=-1,ki.range="boolean"==typeof t.range&&t.range,ki.loc="boolean"==typeof t.loc&&t.loc,"boolean"==typeof t.comment&&t.comment&&(ki.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(ki.errors=[]);try{if(H(),wi.type===Zn.EOF)return ki.tokens;for(U();wi.type!==Zn.EOF;)try{U()}catch(o){if(ki.errors){Y(o);break}throw o}r=ki.tokens,"undefined"!=typeof ki.errors&&(r.errors=ki.errors)}catch(s){throw s}finally{ki={}}return r}function Xn(e,t){var n,i;i=String,"string"==typeof e||e instanceof String||(e=i(e)),si=e,li=0,ci=si.length>0?1:0,ui=0,mi=li,gi=ci,vi=ui,yi=si.length,wi=null,xi={allowIn:!0,allowYield:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1,curlyStack:[],sourceType:"script"},ai=!1,ki={},"undefined"!=typeof t&&(ki.range="boolean"==typeof t.range&&t.range,ki.loc="boolean"==typeof t.loc&&t.loc,ki.attachComment="boolean"==typeof t.attachComment&&t.attachComment,ki.loc&&null!==t.source&&void 0!==t.source&&(ki.source=i(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(ki.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(ki.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(ki.errors=[]),ki.attachComment&&(ki.range=!0,ki.comments=[],ki.bottomRightStack=[],ki.trailingComments=[],ki.leadingComments=[]),"module"===t.sourceType&&(xi.sourceType=t.sourceType,ai=!0));try{n=Yn(),"undefined"!=typeof ki.comments&&(n.comments=ki.comments),"undefined"!=typeof ki.tokens&&(Qn(),n.tokens=ki.tokens),"undefined"!=typeof ki.errors&&(n.errors=ki.errors)}catch(r){throw r}finally{ki={}}return n}var Zn,ei,ti,ni,ii,ri,oi,si,ai,li,ci,ui,di,hi,fi,pi,mi,gi,vi,bi,yi,wi,xi,ki,_i,Si,Ci;Zn={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9,Template:10},ei={},ei[Zn.BooleanLiteral]="Boolean",ei[Zn.EOF]="<end>",ei[Zn.Identifier]="Identifier",ei[Zn.Keyword]="Keyword",ei[Zn.NullLiteral]="Null",ei[Zn.NumericLiteral]="Numeric",ei[Zn.Punctuator]="Punctuator",ei[Zn.StringLiteral]="String",ei[Zn.RegularExpression]="RegularExpression",ei[Zn.Template]="Template",ti=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],ni={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},ii={ArrowParameterPlaceHolder:"ArrowParameterPlaceHolder"},ri={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",DefaultRestParameter:"Unexpected token =",ObjectPatternAsRestParameter:"Unexpected token {",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ConstructorSpecialMethod:"Class constructor may not be an accessor",DuplicateConstructor:"A class may only have one constructor",StaticPrototype:"Classes may not have static property named prototype",MissingFromClause:"Unexpected token",NoAsAfterImportNamespace:"Unexpected token",InvalidModuleSpecifier:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalExportDeclaration:"Unexpected token",DuplicateBinding:"Duplicate binding %0"},oi={NonAsciiIdentifierStart:/[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]|�[�-��-��-����-��-��-��-��-��-��-��-��-��-��-��-��-�]|�[�-��-��-��-��-��-�]|�[�-���-�����-��-��-��-��-��-�����-��-��-��-��-��-��-��-��-��-��-�]|�[�-�]|�[�-��-��-��-��-���-��-���-��-��-��-����-��-����-���-�]|�[�-�����-��-���-�]|�[�-���-�]|�[�-�]|�[�-�]|[��-��-�][�-�]|�[�-�]|�[�-��-��-��-��-��-��-�]|�[�-���-�]|�[��]|�[�-��-��-��-�]|�[�-��-�������-��-���-��-��-��-��-��-��-��-���-��-��-��-��-��-��-��-��-��-��-��-��-�]|�[�-�]|�[�-��-������-��-��������-�������������-��-��-��-���-��-��-��-��-�]|�[�-��-�]|�[�-��-�]|�[�-�]|�[�-�]/,NonAsciiIdentifierPart:/[ªµ·ºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽͿΆ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԯԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠ-ࢲࣤ-ॣ०-९ॱ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟፩-፱ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧚ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧ᪰-᪽ᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶ᳸᳹ᴀ-᷵᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚝꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꧠ-ꧾꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︭︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]|�[�-��-��-����-��-��-��-���-��-���-��-��-��-��-��-��-�]|�[�-��-��-��-��-��-��-�]|�[�-���-�����-��-��-��-��-��-����-����-��-��-��-���-��-��-��-��-��-��-��-�]|�[�-�]|�[�-��-��-��-��-��-��-��-���-��-��-��-��-��-��-��-����-��-����-��-����-���-��-��-�]|�[�-���-��-��-��-���-��-��-�]|�[�-���-�]|�[�-�]|�[�-�]|[��-��-�][�-�]|�[�-�]|�[�-��-��-��-��-��-��-��-��-��-�]|�[�-��-��-�]|�[��]|�[�-��-��-��-���]|�[�-��-��-��-��-��-�]|�[�-��-�������-��-���-��-��-��-��-��-��-��-���-��-��-��-��-��-��-��-��-��-��-��-��-��-�]|�[�-��-�]|�[�-��-������-��-��������-�������������-��-��-��-���-��-��-��-��-�]|�[�-��-�]|�[�-��-�]|�[�-�]|�[�-�]|�[�-�]/},G.prototype=K.prototype={processComment:function(){var e,t,n,i,r,o,s=ki.bottomRightStack,a=s[s.length-1];
if(!(this.type===ni.Program&&this.body.length>0)){if(this.type===ni.BlockStatement&&0===this.body.length){for(t=[],r=ki.leadingComments.length-1;r>=0;--r)o=ki.leadingComments[r],this.range[1]>=o.range[1]&&(t.unshift(o),ki.leadingComments.splice(r,1),ki.trailingComments.splice(r,1));if(t.length)return void(this.innerComments=t)}if(ki.trailingComments.length>0){for(i=[],r=ki.trailingComments.length-1;r>=0;--r)o=ki.trailingComments[r],o.range[0]>=this.range[1]&&(i.unshift(o),ki.trailingComments.splice(r,1));ki.trailingComments=[]}else a&&a.trailingComments&&a.trailingComments[0].range[0]>=this.range[1]&&(i=a.trailingComments,delete a.trailingComments);for(;a&&a.range[0]>=this.range[0];)e=s.pop(),a=s[s.length-1];if(e){if(e.leadingComments){for(n=[],r=e.leadingComments.length-1;r>=0;--r)o=e.leadingComments[r],o.range[1]<=this.range[0]&&(n.unshift(o),e.leadingComments.splice(r,1));e.leadingComments.length||(e.leadingComments=void 0)}}else if(ki.leadingComments.length>0)for(n=[],r=ki.leadingComments.length-1;r>=0;--r)o=ki.leadingComments[r],o.range[1]<=this.range[0]&&(n.unshift(o),ki.leadingComments.splice(r,1));n&&n.length>0&&(this.leadingComments=n),i&&i.length>0&&(this.trailingComments=i),s.push(this)}},finish:function(){ki.range&&(this.range[1]=hi),ki.loc&&(this.loc.end={line:fi,column:hi-pi},ki.source&&(this.loc.source=ki.source)),ki.attachComment&&this.processComment()},finishArrayExpression:function(e){return this.type=ni.ArrayExpression,this.elements=e,this.finish(),this},finishArrayPattern:function(e){return this.type=ni.ArrayPattern,this.elements=e,this.finish(),this},finishArrowFunctionExpression:function(e,t,n,i){return this.type=ni.ArrowFunctionExpression,this.id=null,this.params=e,this.defaults=t,this.body=n,this.generator=!1,this.expression=i,this.finish(),this},finishAssignmentExpression:function(e,t,n){return this.type=ni.AssignmentExpression,this.operator=e,this.left=t,this.right=n,this.finish(),this},finishAssignmentPattern:function(e,t){return this.type=ni.AssignmentPattern,this.left=e,this.right=t,this.finish(),this},finishBinaryExpression:function(e,t,n){return this.type="||"===e||"&&"===e?ni.LogicalExpression:ni.BinaryExpression,this.operator=e,this.left=t,this.right=n,this.finish(),this},finishBlockStatement:function(e){return this.type=ni.BlockStatement,this.body=e,this.finish(),this},finishBreakStatement:function(e){return this.type=ni.BreakStatement,this.label=e,this.finish(),this},finishCallExpression:function(e,t){return this.type=ni.CallExpression,this.callee=e,this.arguments=t,this.finish(),this},finishCatchClause:function(e,t){return this.type=ni.CatchClause,this.param=e,this.body=t,this.finish(),this},finishClassBody:function(e){return this.type=ni.ClassBody,this.body=e,this.finish(),this},finishClassDeclaration:function(e,t,n){return this.type=ni.ClassDeclaration,this.id=e,this.superClass=t,this.body=n,this.finish(),this},finishClassExpression:function(e,t,n){return this.type=ni.ClassExpression,this.id=e,this.superClass=t,this.body=n,this.finish(),this},finishConditionalExpression:function(e,t,n){return this.type=ni.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=n,this.finish(),this},finishContinueStatement:function(e){return this.type=ni.ContinueStatement,this.label=e,this.finish(),this},finishDebuggerStatement:function(){return this.type=ni.DebuggerStatement,this.finish(),this},finishDoWhileStatement:function(e,t){return this.type=ni.DoWhileStatement,this.body=e,this.test=t,this.finish(),this},finishEmptyStatement:function(){return this.type=ni.EmptyStatement,this.finish(),this},finishExpressionStatement:function(e){return this.type=ni.ExpressionStatement,this.expression=e,this.finish(),this},finishForStatement:function(e,t,n,i){return this.type=ni.ForStatement,this.init=e,this.test=t,this.update=n,this.body=i,this.finish(),this},finishForOfStatement:function(e,t,n){return this.type=ni.ForOfStatement,this.left=e,this.right=t,this.body=n,this.finish(),this},finishForInStatement:function(e,t,n){return this.type=ni.ForInStatement,this.left=e,this.right=t,this.body=n,this.each=!1,this.finish(),this},finishFunctionDeclaration:function(e,t,n,i,r){return this.type=ni.FunctionDeclaration,this.id=e,this.params=t,this.defaults=n,this.body=i,this.generator=r,this.expression=!1,this.finish(),this},finishFunctionExpression:function(e,t,n,i,r){return this.type=ni.FunctionExpression,this.id=e,this.params=t,this.defaults=n,this.body=i,this.generator=r,this.expression=!1,this.finish(),this},finishIdentifier:function(e){return this.type=ni.Identifier,this.name=e,this.finish(),this},finishIfStatement:function(e,t,n){return this.type=ni.IfStatement,this.test=e,this.consequent=t,this.alternate=n,this.finish(),this},finishLabeledStatement:function(e,t){return this.type=ni.LabeledStatement,this.label=e,this.body=t,this.finish(),this},finishLiteral:function(e){return this.type=ni.Literal,this.value=e.value,this.raw=si.slice(e.start,e.end),e.regex&&(this.regex=e.regex),this.finish(),this},finishMemberExpression:function(e,t,n){return this.type=ni.MemberExpression,this.computed="["===e,this.object=t,this.property=n,this.finish(),this},finishMetaProperty:function(e,t){return this.type=ni.MetaProperty,this.meta=e,this.property=t,this.finish(),this},finishNewExpression:function(e,t){return this.type=ni.NewExpression,this.callee=e,this.arguments=t,this.finish(),this},finishObjectExpression:function(e){return this.type=ni.ObjectExpression,this.properties=e,this.finish(),this},finishObjectPattern:function(e){return this.type=ni.ObjectPattern,this.properties=e,this.finish(),this},finishPostfixExpression:function(e,t){return this.type=ni.UpdateExpression,this.operator=e,this.argument=t,this.prefix=!1,this.finish(),this},finishProgram:function(e,t){return this.type=ni.Program,this.body=e,this.sourceType=t,this.finish(),this},finishProperty:function(e,t,n,i,r,o){return this.type=ni.Property,this.key=t,this.computed=n,this.value=i,this.kind=e,this.method=r,this.shorthand=o,this.finish(),this},finishRestElement:function(e){return this.type=ni.RestElement,this.argument=e,this.finish(),this},finishReturnStatement:function(e){return this.type=ni.ReturnStatement,this.argument=e,this.finish(),this},finishSequenceExpression:function(e){return this.type=ni.SequenceExpression,this.expressions=e,this.finish(),this},finishSpreadElement:function(e){return this.type=ni.SpreadElement,this.argument=e,this.finish(),this},finishSwitchCase:function(e,t){return this.type=ni.SwitchCase,this.test=e,this.consequent=t,this.finish(),this},finishSuper:function(){return this.type=ni.Super,this.finish(),this},finishSwitchStatement:function(e,t){return this.type=ni.SwitchStatement,this.discriminant=e,this.cases=t,this.finish(),this},finishTaggedTemplateExpression:function(e,t){return this.type=ni.TaggedTemplateExpression,this.tag=e,this.quasi=t,this.finish(),this},finishTemplateElement:function(e,t){return this.type=ni.TemplateElement,this.value=e,this.tail=t,this.finish(),this},finishTemplateLiteral:function(e,t){return this.type=ni.TemplateLiteral,this.quasis=e,this.expressions=t,this.finish(),this},finishThisExpression:function(){return this.type=ni.ThisExpression,this.finish(),this},finishThrowStatement:function(e){return this.type=ni.ThrowStatement,this.argument=e,this.finish(),this},finishTryStatement:function(e,t,n){return this.type=ni.TryStatement,this.block=e,this.guardedHandlers=[],this.handlers=t?[t]:[],this.handler=t,this.finalizer=n,this.finish(),this},finishUnaryExpression:function(e,t){return this.type="++"===e||"--"===e?ni.UpdateExpression:ni.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0,this.finish(),this},finishVariableDeclaration:function(e){return this.type=ni.VariableDeclaration,this.declarations=e,this.kind="var",this.finish(),this},finishLexicalDeclaration:function(e,t){return this.type=ni.VariableDeclaration,this.declarations=e,this.kind=t,this.finish(),this},finishVariableDeclarator:function(e,t){return this.type=ni.VariableDeclarator,this.id=e,this.init=t,this.finish(),this},finishWhileStatement:function(e,t){return this.type=ni.WhileStatement,this.test=e,this.body=t,this.finish(),this},finishWithStatement:function(e,t){return this.type=ni.WithStatement,this.object=e,this.body=t,this.finish(),this},finishExportSpecifier:function(e,t){return this.type=ni.ExportSpecifier,this.exported=t||e,this.local=e,this.finish(),this},finishImportDefaultSpecifier:function(e){return this.type=ni.ImportDefaultSpecifier,this.local=e,this.finish(),this},finishImportNamespaceSpecifier:function(e){return this.type=ni.ImportNamespaceSpecifier,this.local=e,this.finish(),this},finishExportNamedDeclaration:function(e,t,n){return this.type=ni.ExportNamedDeclaration,this.declaration=e,this.specifiers=t,this.source=n,this.finish(),this},finishExportDefaultDeclaration:function(e){return this.type=ni.ExportDefaultDeclaration,this.declaration=e,this.finish(),this},finishExportAllDeclaration:function(e){return this.type=ni.ExportAllDeclaration,this.source=e,this.finish(),this},finishImportSpecifier:function(e,t){return this.type=ni.ImportSpecifier,this.local=e||t,this.imported=t,this.finish(),this},finishImportDeclaration:function(e,t){return this.type=ni.ImportDeclaration,this.specifiers=e,this.source=t,this.finish(),this},finishYieldExpression:function(e,t){return this.type=ni.YieldExpression,this.argument=e,this.delegate=t,this.finish(),this}},e.version="2.7.2",e.tokenize=Jn,e.parse=Xn,e.Syntax=function(){var e,t={};"function"==typeof Object.create&&(t=Object.create(null));for(e in ni)ni.hasOwnProperty(e)&&(t[e]=ni[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()})},{}],660:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,a,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,l=0;r>l;l++)c[l].apply(this,a);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,s,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=s;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],661:[function(e,t){(function(n){function i(e,t,i,o){n.isBuffer(e)||(e=new n(e,"binary")),t&&!n.isBuffer(t)&&(t=new n(t,"binary")),i/=8,o=o||0;for(var s,a,l=0,c=0,u=new n(i),d=new n(o),h=0,f=[];;){if(h++>0&&f.push(s),f.push(e),t&&f.push(t),s=r(n.concat(f)),f=[],a=0,i>0)for(;;){if(0===i)break;if(a===s.length)break;u[l++]=s[a],i--,a++}if(o>0&&a!==s.length)for(;;){if(0===o)break;if(a===s.length)break;d[c++]=s[a],o--,a++}if(0===i&&0===o)break}for(a=0;a<s.length;a++)s[a]=0;return{key:u,iv:d}}var r=e("create-hash/md5");t.exports=i}).call(this,e("buffer").Buffer)},{buffer:605,"create-hash/md5":622}],662:[function(e,t){!function(){"use strict";function e(t,n){function r(e,t){return function(){return e.apply(t,arguments)}}var o;if(n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=t,this.tapDelay=n.tapDelay||200,this.tapTimeout=n.tapTimeout||700,!e.notNeeded(t)){for(var s=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,l=0,c=s.length;c>l;l++)a[s[l]]=r(a[s[l]],a);i&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,n.hijacked||n,i):r.call(t,e,n,i)},t.addEventListener=function(e,n,i){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):r.call(t,e,n,i)}),"function"==typeof t.onclick&&(o=t.onclick,t.addEventListener("click",function(e){o(e)},!1),t.onclick=null)}}var n=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!n,r=/iP(ad|hone|od)/.test(navigator.userAgent)&&!n,o=r&&/OS 4_\d(_\d)?/.test(navigator.userAgent),s=r&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(r&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return i&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;r&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,i;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],r){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!o){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},e.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,n,a,l,c,u=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,s&&(c=e.changedTouches[0],u=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||u,u.fastClickScrollParent=this.targetElement.fastClickScrollParent),a=u.tagName.toLowerCase(),"label"===a){if(t=this.findControl(u)){if(this.focus(u),i)return!1;u=t}}else if(this.needsFocus(u))return e.timeStamp-n>100||r&&window.top!==window&&"input"===a?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,e),r&&"select"===a||(this.targetElement=null,e.preventDefault()),!1);return r&&!o&&(l=u.fastClickScrollParent,l&&l.fastClickLastScrollTop!==l.scrollTop)?!0:(this.needsClick(u)||(e.preventDefault(),this.sendClick(u,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0:!0},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;i&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,n,r,o;if("undefined"==typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction?!0:(o=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],o>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===e.style.touchAction||"manipulation"===e.style.touchAction?!0:!1)},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof t&&t.exports?(t.exports=e.attach,t.exports.FastClick=e):window.FastClick=e}()},{}],663:[function(e,t,n){var i=n;i.utils=e("./hash/utils"),i.common=e("./hash/common"),i.sha=e("./hash/sha"),i.ripemd=e("./hash/ripemd"),i.hmac=e("./hash/hmac"),i.sha1=i.sha.sha1,i.sha256=i.sha.sha256,i.sha224=i.sha.sha224,i.sha384=i.sha.sha384,i.sha512=i.sha.sha512,i.ripemd160=i.ripemd.ripemd160},{"./hash/common":664,"./hash/hmac":665,"./hash/ripemd":666,"./hash/sha":667,"./hash/utils":668}],664:[function(e,t,n){function i(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}var r=e("../hash"),o=r.utils,s=o.assert;n.BlockHash=i,i.prototype.update=function(e,t){if(e=o.toArray(e,t),this.pending=this.pending?this.pending.concat(e):e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=o.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},i.prototype.digest=function(e){return this.update(this._pad()),s(null===this.pending),this._digest(e)},i.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,i=new Array(n+this.padLength);i[0]=128;for(var r=1;n>r;r++)i[r]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)i[r++]=0;i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=e>>>24&255,i[r++]=e>>>16&255,i[r++]=e>>>8&255,i[r++]=255&e}else{i[r++]=255&e,i[r++]=e>>>8&255,i[r++]=e>>>16&255,i[r++]=e>>>24&255,i[r++]=0,i[r++]=0,i[r++]=0,i[r++]=0;for(var o=8;o<this.padLength;o++)i[r++]=0}return i}},{"../hash":663}],665:[function(e,t,n){function i(e,t,n){return this instanceof i?(this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,void this._init(o.toArray(t,n))):new i(e,t,n)}var r=e("../hash"),o=r.utils,s=o.assert;t.exports=i,i.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),s(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(var t=0;t<e.length;t++)e[t]^=54;this.inner=(new this.Hash).update(e);for(var t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},i.prototype.update=function(e,t){return this.inner.update(e,t),this},i.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},{"../hash":663}],666:[function(e,t,n){function i(){return this instanceof i?(f.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.endian="little")):new i}function r(e,t,n,i){return 15>=e?t^n^i:31>=e?t&n|~t&i:47>=e?(t|~n)^i:63>=e?t&i|n&~i:t^(n|~i)}function o(e){return 15>=e?0:31>=e?1518500249:47>=e?1859775393:63>=e?2400959708:2840853838}function s(e){return 15>=e?1352829926:31>=e?1548603684:47>=e?1836072691:63>=e?2053994217:0}var a=e("../hash"),l=a.utils,c=l.rotl32,u=l.sum32,d=l.sum32_3,h=l.sum32_4,f=a.common.BlockHash;l.inherits(i,f),n.ripemd160=i,i.blockSize=512,i.outSize=160,i.hmacStrength=192,i.padLength=64,i.prototype._update=function(e,t){for(var n=this.h[0],i=this.h[1],a=this.h[2],l=this.h[3],f=this.h[4],b=n,y=i,w=a,x=l,k=f,_=0;80>_;_++){var S=u(c(h(n,r(_,i,a,l),e[p[_]+t],o(_)),g[_]),f);n=f,f=l,l=c(a,10),a=i,i=S,S=u(c(h(b,r(79-_,y,w,x),e[m[_]+t],s(_)),v[_]),k),b=k,k=x,x=c(w,10),w=y,y=S}S=d(this.h[1],a,x),this.h[1]=d(this.h[2],l,k),this.h[2]=d(this.h[3],f,b),this.h[3]=d(this.h[4],n,y),this.h[4]=d(this.h[0],i,w),this.h[0]=S},i.prototype._digest=function(e){return"hex"===e?l.toHex32(this.h,"little"):l.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"../hash":663}],667:[function(e,t,n){function i(){return this instanceof i?(K.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=G,void(this.W=new Array(64))):new i}function r(){return this instanceof r?(i.call(this),void(this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])):new r}function o(){return this instanceof o?(K.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Y,void(this.W=new Array(160))):new o}function s(){return this instanceof s?(o.call(this),void(this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428])):new s}function a(){return this instanceof a?(K.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.W=new Array(80))):new a}function l(e,t,n){return e&t^~e&n}function c(e,t,n){return e&t^e&n^t&n}function u(e,t,n){return e^t^n}function d(e){return M(e,2)^M(e,13)^M(e,22)}function h(e){return M(e,6)^M(e,11)^M(e,25)}function f(e){return M(e,7)^M(e,18)^e>>>3}function p(e){return M(e,17)^M(e,19)^e>>>10}function m(e,t,n,i){return 0===e?l(t,n,i):1===e||3===e?u(t,n,i):2===e?c(t,n,i):void 0}function g(e,t,n,i,r){var o=e&n^~e&r;return 0>o&&(o+=4294967296),o}function v(e,t,n,i,r,o){var s=t&i^~t&o;return 0>s&&(s+=4294967296),s}function b(e,t,n,i,r){var o=e&n^e&r^n&r;return 0>o&&(o+=4294967296),o}function y(e,t,n,i,r,o){var s=t&i^t&o^i&o;return 0>s&&(s+=4294967296),s}function w(e,t){var n=N(e,t,28),i=N(t,e,2),r=N(t,e,7),o=n^i^r;return 0>o&&(o+=4294967296),o}function x(e,t){var n=$(e,t,28),i=$(t,e,2),r=$(t,e,7),o=n^i^r;return 0>o&&(o+=4294967296),o}function k(e,t){var n=N(e,t,14),i=N(e,t,18),r=N(t,e,9),o=n^i^r;return 0>o&&(o+=4294967296),o}function _(e,t){var n=$(e,t,14),i=$(e,t,18),r=$(t,e,9),o=n^i^r;return 0>o&&(o+=4294967296),o}function S(e,t){var n=N(e,t,1),i=N(e,t,8),r=D(e,t,7),o=n^i^r;return 0>o&&(o+=4294967296),o}function C(e,t){var n=$(e,t,1),i=$(e,t,8),r=P(e,t,7),o=n^i^r;return 0>o&&(o+=4294967296),o}function E(e,t){var n=N(e,t,19),i=N(t,e,29),r=D(e,t,6),o=n^i^r;return 0>o&&(o+=4294967296),o}function I(e,t){var n=$(e,t,19),i=$(t,e,29),r=P(e,t,6),o=n^i^r;return 0>o&&(o+=4294967296),o}var R=e("../hash"),T=R.utils,A=T.assert,M=T.rotr32,F=T.rotl32,V=T.sum32,L=T.sum32_4,O=T.sum32_5,N=T.rotr64_hi,$=T.rotr64_lo,D=T.shr64_hi,P=T.shr64_lo,j=T.sum64,B=T.sum64_hi,U=T.sum64_lo,H=T.sum64_4_hi,z=T.sum64_4_lo,q=T.sum64_5_hi,W=T.sum64_5_lo,K=R.common.BlockHash,G=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],Q=[1518500249,1859775393,2400959708,3395469782];T.inherits(i,K),n.sha256=i,i.blockSize=512,i.outSize=256,i.hmacStrength=192,i.padLength=64,i.prototype._update=function(e,t){for(var n=this.W,i=0;16>i;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=L(p(n[i-2]),n[i-7],f(n[i-15]),n[i-16]);var r=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4],m=this.h[5],g=this.h[6],v=this.h[7];A(this.k.length===n.length);for(var i=0;i<n.length;i++){var b=O(v,h(u),l(u,m,g),this.k[i],n[i]),y=V(d(r),c(r,o,s));v=g,g=m,m=u,u=V(a,b),a=s,s=o,o=r,r=V(b,y)}this.h[0]=V(this.h[0],r),this.h[1]=V(this.h[1],o),this.h[2]=V(this.h[2],s),this.h[3]=V(this.h[3],a),this.h[4]=V(this.h[4],u),this.h[5]=V(this.h[5],m),this.h[6]=V(this.h[6],g),this.h[7]=V(this.h[7],v)
},i.prototype._digest=function(e){return"hex"===e?T.toHex32(this.h,"big"):T.split32(this.h,"big")},T.inherits(r,i),n.sha224=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(e){return"hex"===e?T.toHex32(this.h.slice(0,7),"big"):T.split32(this.h.slice(0,7),"big")},T.inherits(o,K),n.sha512=o,o.blockSize=1024,o.outSize=512,o.hmacStrength=192,o.padLength=128,o.prototype._prepareBlock=function(e,t){for(var n=this.W,i=0;32>i;i++)n[i]=e[t+i];for(;i<n.length;i+=2){var r=E(n[i-4],n[i-3]),o=I(n[i-4],n[i-3]),s=n[i-14],a=n[i-13],l=S(n[i-30],n[i-29]),c=C(n[i-30],n[i-29]),u=n[i-32],d=n[i-31];n[i]=H(r,o,s,a,l,c,u,d),n[i+1]=z(r,o,s,a,l,c,u,d)}},o.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,i=this.h[0],r=this.h[1],o=this.h[2],s=this.h[3],a=this.h[4],l=this.h[5],c=this.h[6],u=this.h[7],d=this.h[8],h=this.h[9],f=this.h[10],p=this.h[11],m=this.h[12],S=this.h[13],C=this.h[14],E=this.h[15];A(this.k.length===n.length);for(var I=0;I<n.length;I+=2){var R=C,T=E,M=k(d,h),F=_(d,h),V=g(d,h,f,p,m,S),L=v(d,h,f,p,m,S),O=this.k[I],N=this.k[I+1],$=n[I],D=n[I+1],P=q(R,T,M,F,V,L,O,N,$,D),H=W(R,T,M,F,V,L,O,N,$,D),R=w(i,r),T=x(i,r),M=b(i,r,o,s,a,l),F=y(i,r,o,s,a,l),z=B(R,T,M,F),K=U(R,T,M,F);C=m,E=S,m=f,S=p,f=d,p=h,d=B(c,u,P,H),h=U(u,u,P,H),c=a,u=l,a=o,l=s,o=i,s=r,i=B(P,H,z,K),r=U(P,H,z,K)}j(this.h,0,i,r),j(this.h,2,o,s),j(this.h,4,a,l),j(this.h,6,c,u),j(this.h,8,d,h),j(this.h,10,f,p),j(this.h,12,m,S),j(this.h,14,C,E)},o.prototype._digest=function(e){return"hex"===e?T.toHex32(this.h,"big"):T.split32(this.h,"big")},T.inherits(s,o),n.sha384=s,s.blockSize=1024,s.outSize=384,s.hmacStrength=192,s.padLength=128,s.prototype._digest=function(e){return"hex"===e?T.toHex32(this.h.slice(0,12),"big"):T.split32(this.h.slice(0,12),"big")},T.inherits(a,K),n.sha1=a,a.blockSize=512,a.outSize=160,a.hmacStrength=80,a.padLength=64,a.prototype._update=function(e,t){for(var n=this.W,i=0;16>i;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=F(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);for(var r=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],l=this.h[4],i=0;i<n.length;i++){var c=~~(i/20),u=O(F(r,5),m(c,o,s,a),l,n[i],Q[c]);l=a,a=s,s=F(o,30),o=r,r=u}this.h[0]=V(this.h[0],r),this.h[1]=V(this.h[1],o),this.h[2]=V(this.h[2],s),this.h[3]=V(this.h[3],a),this.h[4]=V(this.h[4],l)},a.prototype._digest=function(e){return"hex"===e?T.toHex32(this.h,"big"):T.split32(this.h,"big")}},{"../hash":663}],668:[function(e,t,n){function i(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t){e=e.replace(/[^a-z0-9]+/gi,""),e.length%2!==0&&(e="0"+e);for(var i=0;i<e.length;i+=2)n.push(parseInt(e[i]+e[i+1],16))}}else for(var i=0;i<e.length;i++){var r=e.charCodeAt(i),o=r>>8,s=255&r;o?n.push(o,s):n.push(s)}else for(var i=0;i<e.length;i++)n[i]=0|e[i];return n}function r(e){for(var t="",n=0;n<e.length;n++)t+=a(e[n].toString(16));return t}function o(e){var t=e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24;return t>>>0}function s(e,t){for(var n="",i=0;i<e.length;i++){var r=e[i];"little"===t&&(r=o(r)),n+=l(r.toString(16))}return n}function a(e){return 1===e.length?"0"+e:e}function l(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}function c(e,t,n,i){var r=n-t;v(r%4===0);for(var o=new Array(r/4),s=0,a=t;s<o.length;s++,a+=4){var l;l="big"===i?e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3]:e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a],o[s]=l>>>0}return o}function u(e,t){for(var n=new Array(4*e.length),i=0,r=0;i<e.length;i++,r+=4){var o=e[i];"big"===t?(n[r]=o>>>24,n[r+1]=o>>>16&255,n[r+2]=o>>>8&255,n[r+3]=255&o):(n[r+3]=o>>>24,n[r+2]=o>>>16&255,n[r+1]=o>>>8&255,n[r]=255&o)}return n}function d(e,t){return e>>>t|e<<32-t}function h(e,t){return e<<t|e>>>32-t}function f(e,t){return e+t>>>0}function p(e,t,n){return e+t+n>>>0}function m(e,t,n,i){return e+t+n+i>>>0}function g(e,t,n,i,r){return e+t+n+i+r>>>0}function v(e,t){if(!e)throw new Error(t||"Assertion failed")}function b(e,t,n,i){var r=e[t],o=e[t+1],s=i+o>>>0,a=(i>s?1:0)+n+r;e[t]=a>>>0,e[t+1]=s}function y(e,t,n,i){var r=t+i>>>0,o=(t>r?1:0)+e+n;return o>>>0}function w(e,t,n,i){var r=t+i;return r>>>0}function x(e,t,n,i,r,o,s,a){var l=0,c=t;c=c+i>>>0,l+=t>c?1:0,c=c+o>>>0,l+=o>c?1:0,c=c+a>>>0,l+=a>c?1:0;var u=e+n+r+s+l;return u>>>0}function k(e,t,n,i,r,o,s,a){var l=t+i+o+a;return l>>>0}function _(e,t,n,i,r,o,s,a,l,c){var u=0,d=t;d=d+i>>>0,u+=t>d?1:0,d=d+o>>>0,u+=o>d?1:0,d=d+a>>>0,u+=a>d?1:0,d=d+c>>>0,u+=c>d?1:0;var h=e+n+r+s+l+u;return h>>>0}function S(e,t,n,i,r,o,s,a,l,c){var u=t+i+o+a+c;return u>>>0}function C(e,t,n){var i=t<<32-n|e>>>n;return i>>>0}function E(e,t,n){var i=e<<32-n|t>>>n;return i>>>0}function I(e,t,n){return e>>>n}function R(e,t,n){var i=e<<32-n|t>>>n;return i>>>0}var T=n,A=e("inherits");T.toArray=i,T.toHex=r,T.htonl=o,T.toHex32=s,T.zero2=a,T.zero8=l,T.join32=c,T.split32=u,T.rotr32=d,T.rotl32=h,T.sum32=f,T.sum32_3=p,T.sum32_4=m,T.sum32_5=g,T.assert=v,T.inherits=A,n.sum64=b,n.sum64_hi=y,n.sum64_lo=w,n.sum64_4_hi=x,n.sum64_4_lo=k,n.sum64_5_hi=_,n.sum64_5_lo=S,n.rotr64_hi=C,n.rotr64_lo=E,n.shr64_hi=I,n.shr64_lo=R},{inherits:669}],669:[function(e,t,n){arguments[4][274][0].apply(n,arguments)},{dup:274}],670:[function(e,t,n){n.read=function(e,t,n,i,r){var o,s,a=8*r-i-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?r-1:0,h=n?-1:1,f=e[t+d];for(d+=h,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+e[t+d],d+=h,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=i;u>0;s=256*s+e[t+d],d+=h,u-=8);if(0===o)o=1-c;else{if(o===l)return s?0/0:1/0*(f?-1:1);s+=Math.pow(2,i),o-=c}return(f?-1:1)*s*Math.pow(2,o-i)},n.write=function(e,t,n,i,r,o){var s,a,l,c=8*o-r-1,u=(1<<c)-1,d=u>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,p=i?1:-1,m=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),t+=s+d>=1?h/l:h*Math.pow(2,1-d),t*l>=2&&(s++,l/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*l-1)*Math.pow(2,r),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,r),s=0));r>=8;e[n+f]=255&a,f+=p,a/=256,r-=8);for(s=s<<r|a,c+=r;c>0;e[n+f]=255&s,f+=p,s/=256,c-=8);e[n+f-p]|=128*m}},{}],671:[function(e,t){var n=[].indexOf;t.exports=function(e,t){if(n)return e.indexOf(t);for(var i=0;i<e.length;++i)if(e[i]===t)return i;return-1}},{}],672:[function(e,t,n){!function(e,i){"function"==typeof define&&define.amd?define([],i):"object"==typeof n?t.exports=i():e.inflection=i()}(this,function(){var e=["accommodation","adulthood","advertising","advice","aggression","aid","air","aircraft","alcohol","anger","applause","arithmetic","assistance","athletics","bacon","baggage","beef","biology","blood","botany","bread","butter","carbon","cardboard","cash","chalk","chaos","chess","crossroads","countryside","dancing","deer","dignity","dirt","dust","economics","education","electricity","engineering","enjoyment","envy","equipment","ethics","evidence","evolution","fame","fiction","flour","flu","food","fuel","fun","furniture","gallows","garbage","garlic","genetics","gold","golf","gossip","grammar","gratitude","grief","guilt","gymnastics","happiness","hardware","harm","hate","hatred","health","heat","help","homework","honesty","honey","hospitality","housework","humour","hunger","hydrogen","ice","importance","inflation","information","innocence","iron","irony","jam","jewelry","judo","karate","knowledge","lack","laughter","lava","leather","leisure","lightning","linguine","linguini","linguistics","literature","litter","livestock","logic","loneliness","luck","luggage","macaroni","machinery","magic","management","mankind","marble","mathematics","mayonnaise","measles","methane","milk","money","mud","music","mumps","nature","news","nitrogen","nonsense","nurture","nutrition","obedience","obesity","oxygen","pasta","patience","physics","poetry","pollution","poverty","pride","psychology","publicity","punctuation","quartz","racism","relaxation","reliability","research","respect","revenge","rice","rubbish","rum","safety","scenery","seafood","seaside","series","shame","sheep","shopping","sleep","smoke","smoking","snow","soap","software","soil","spaghetti","species","steam","stuff","stupidity","sunshine","symmetry","tennis","thirst","thunder","timber","traffic","transportation","trust","underwear","unemployment","unity","validity","veal","vegetation","vegetarianism","vengeance","violence","vitality","warmth","wealth","weather","welfare","wheat","wildlife","wisdom","yoga","zinc","zoology"],t={plural:{men:new RegExp("^(m|wom)en$","gi"),people:new RegExp("(pe)ople$","gi"),children:new RegExp("(child)ren$","gi"),tia:new RegExp("([ti])a$","gi"),analyses:new RegExp("((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$","gi"),hives:new RegExp("(hi|ti)ves$","gi"),curves:new RegExp("(curve)s$","gi"),lrves:new RegExp("([lr])ves$","gi"),foves:new RegExp("([^fo])ves$","gi"),movies:new RegExp("(m)ovies$","gi"),aeiouyies:new RegExp("([^aeiouy]|qu)ies$","gi"),series:new RegExp("(s)eries$","gi"),xes:new RegExp("(x|ch|ss|sh)es$","gi"),mice:new RegExp("([m|l])ice$","gi"),buses:new RegExp("(bus)es$","gi"),oes:new RegExp("(o)es$","gi"),shoes:new RegExp("(shoe)s$","gi"),crises:new RegExp("(cris|ax|test)es$","gi"),octopi:new RegExp("(octop|vir)i$","gi"),aliases:new RegExp("(alias|canvas|status)es$","gi"),summonses:new RegExp("^(summons)es$","gi"),oxen:new RegExp("^(ox)en","gi"),matrices:new RegExp("(matr)ices$","gi"),vertices:new RegExp("(vert|ind)ices$","gi"),feet:new RegExp("^feet$","gi"),teeth:new RegExp("^teeth$","gi"),geese:new RegExp("^geese$","gi"),quizzes:new RegExp("(quiz)zes$","gi"),whereases:new RegExp("^(whereas)es$","gi"),criteria:new RegExp("^(criteri)a$","gi"),ss:new RegExp("ss$","gi"),s:new RegExp("s$","gi")},singular:{man:new RegExp("^(m|wom)an$","gi"),person:new RegExp("(pe)rson$","gi"),child:new RegExp("(child)$","gi"),ox:new RegExp("^(ox)$","gi"),axis:new RegExp("(ax|test)is$","gi"),octopus:new RegExp("(octop|vir)us$","gi"),alias:new RegExp("(alias|status|canvas)$","gi"),summons:new RegExp("^(summons)$","gi"),bus:new RegExp("(bu)s$","gi"),buffalo:new RegExp("(buffal|tomat|potat)o$","gi"),tium:new RegExp("([ti])um$","gi"),sis:new RegExp("sis$","gi"),ffe:new RegExp("(?:([^f])fe|([lr])f)$","gi"),hive:new RegExp("(hi|ti)ve$","gi"),aeiouyy:new RegExp("([^aeiouy]|qu)y$","gi"),x:new RegExp("(x|ch|ss|sh)$","gi"),matrix:new RegExp("(matr)ix$","gi"),vertex:new RegExp("(vert|ind)ex$","gi"),mouse:new RegExp("([m|l])ouse$","gi"),foot:new RegExp("^foot$","gi"),tooth:new RegExp("^tooth$","gi"),goose:new RegExp("^goose$","gi"),quiz:new RegExp("(quiz)$","gi"),whereas:new RegExp("^(whereas)$","gi"),criterion:new RegExp("^(criteri)on$","gi"),s:new RegExp("s$","gi"),common:new RegExp("$","gi")}},n=[[t.plural.men],[t.plural.people],[t.plural.children],[t.plural.tia],[t.plural.analyses],[t.plural.hives],[t.plural.curves],[t.plural.lrves],[t.plural.foves],[t.plural.aeiouyies],[t.plural.series],[t.plural.movies],[t.plural.xes],[t.plural.mice],[t.plural.buses],[t.plural.oes],[t.plural.shoes],[t.plural.crises],[t.plural.octopi],[t.plural.aliases],[t.plural.summonses],[t.plural.oxen],[t.plural.matrices],[t.plural.feet],[t.plural.teeth],[t.plural.geese],[t.plural.quizzes],[t.plural.whereases],[t.plural.criteria],[t.singular.man,"$1en"],[t.singular.person,"$1ople"],[t.singular.child,"$1ren"],[t.singular.ox,"$1en"],[t.singular.axis,"$1es"],[t.singular.octopus,"$1i"],[t.singular.alias,"$1es"],[t.singular.summons,"$1es"],[t.singular.bus,"$1ses"],[t.singular.buffalo,"$1oes"],[t.singular.tium,"$1a"],[t.singular.sis,"ses"],[t.singular.ffe,"$1$2ves"],[t.singular.hive,"$1ves"],[t.singular.aeiouyy,"$1ies"],[t.singular.matrix,"$1ices"],[t.singular.vertex,"$1ices"],[t.singular.x,"$1es"],[t.singular.mouse,"$1ice"],[t.singular.foot,"feet"],[t.singular.tooth,"teeth"],[t.singular.goose,"geese"],[t.singular.quiz,"$1zes"],[t.singular.whereas,"$1es"],[t.singular.criterion,"$1a"],[t.singular.s,"s"],[t.singular.common,"s"]],i=[[t.singular.man],[t.singular.person],[t.singular.child],[t.singular.ox],[t.singular.axis],[t.singular.octopus],[t.singular.alias],[t.singular.summons],[t.singular.bus],[t.singular.buffalo],[t.singular.tium],[t.singular.sis],[t.singular.ffe],[t.singular.hive],[t.singular.aeiouyy],[t.singular.x],[t.singular.matrix],[t.singular.mouse],[t.singular.foot],[t.singular.tooth],[t.singular.goose],[t.singular.quiz],[t.singular.whereas],[t.singular.criterion],[t.plural.men,"$1an"],[t.plural.people,"$1rson"],[t.plural.children,"$1"],[t.plural.criteria,"$1on"],[t.plural.tia,"$1um"],[t.plural.analyses,"$1$2sis"],[t.plural.hives,"$1ve"],[t.plural.curves,"$1"],[t.plural.lrves,"$1f"],[t.plural.foves,"$1fe"],[t.plural.movies,"$1ovie"],[t.plural.aeiouyies,"$1y"],[t.plural.series,"$1eries"],[t.plural.xes,"$1"],[t.plural.mice,"$1ouse"],[t.plural.buses,"$1"],[t.plural.oes,"$1"],[t.plural.shoes,"$1"],[t.plural.crises,"$1is"],[t.plural.octopi,"$1us"],[t.plural.aliases,"$1"],[t.plural.summonses,"$1"],[t.plural.oxen,"$1"],[t.plural.matrices,"$1ix"],[t.plural.vertices,"$1ex"],[t.plural.feet,"foot"],[t.plural.teeth,"tooth"],[t.plural.geese,"goose"],[t.plural.quizzes,"$1"],[t.plural.whereases,"$1"],[t.plural.ss,"ss"],[t.plural.s,""]],r=["and","or","nor","a","an","the","so","but","to","of","at","by","from","into","on","onto","off","out","in","over","with","for"],o=new RegExp("(_ids|_id)$","g"),s=new RegExp("_","g"),a=new RegExp("[ _]","g"),l=new RegExp("([A-Z])","g"),c=new RegExp("^_"),u={_apply_rules:function(e,t,n,i){if(i)e=i;else{var r=u.indexOf(n,e.toLowerCase())>-1;if(!r)for(var o=0,s=t.length;s>o;o++)if(e.match(t[o][0])){void 0!==t[o][1]&&(e=e.replace(t[o][0],t[o][1]));break}}return e},indexOf:function(e,t,n,i){n||(n=-1);for(var r=-1,o=n,s=e.length;s>o;o++)if(e[o]===t||i&&i(e[o],t)){r=o;break}return r},pluralize:function(t,i){return u._apply_rules(t,n,e,i)},singularize:function(t,n){return u._apply_rules(t,i,e,n)},inflect:function(t,r,o,s){return r=parseInt(r,10),isNaN(r)?t:0===r||r>1?u._apply_rules(t,n,e,s):u._apply_rules(t,i,e,o)},camelize:function(e,t){for(var n,i,r,o,s=e.split("/"),a=0,l=s.length;l>a;a++){for(n=s[a].split("_"),i=0,r=n.length;r>i;i++)0!==i&&(n[i]=n[i].toLowerCase()),o=n[i].charAt(0),o=t&&0===a&&0===i?o.toLowerCase():o.toUpperCase(),n[i]=o+n[i].substring(1);s[a]=n.join("")}return s.join("::")},underscore:function(e,t){if(t&&e===e.toUpperCase())return e;for(var n=e.split("::"),i=0,r=n.length;r>i;i++)n[i]=n[i].replace(l,"_$1"),n[i]=n[i].replace(c,"");return n.join("/").toLowerCase()},humanize:function(e,t){return e=e.toLowerCase(),e=e.replace(o,""),e=e.replace(s," "),t||(e=u.capitalize(e)),e},capitalize:function(e){return e=e.toLowerCase(),e.substring(0,1).toUpperCase()+e.substring(1)},dasherize:function(e){return e.replace(a,"-")},titleize:function(e){e=e.toLowerCase().replace(s," ");for(var t,n,i,o=e.split(" "),a=0,l=o.length;l>a;a++){for(t=o[a].split("-"),n=0,i=t.length;i>n;n++)u.indexOf(r,t[n].toLowerCase())<0&&(t[n]=u.capitalize(t[n]));o[a]=t.join("-")}return e=o.join(" "),e=e.substring(0,1).toUpperCase()+e.substring(1)},demodulize:function(e){var t=e.split("::");return t[t.length-1]},tableize:function(e){return e=u.underscore(e),e=u.pluralize(e)},classify:function(e){return e=u.camelize(e),e=u.singularize(e)},foreign_key:function(e,t){return e=u.demodulize(e),e=u.underscore(e)+(t?"":"_")+"id"},ordinalize:function(e){for(var t=e.split(" "),n=0,i=t.length;i>n;n++){var r=parseInt(t[n],10);if(!isNaN(r)){var o=t[n].substring(t[n].length-2),s=t[n].substring(t[n].length-1),a="th";"11"!=o&&"12"!=o&&"13"!=o&&("1"===s?a="st":"2"===s?a="nd":"3"===s&&(a="rd")),t[n]+=a}}return t.join(" ")},transform:function(e,t){for(var n=0,i=t.length;i>n;n++){var r=t[n];this.hasOwnProperty(r)&&(e=this[r](e))}return e}};return u.version="1.8.0",u})},{}],673:[function(){(function(e){e._getUnderscore=function(e){return"object"==typeof e&&null!==e&&"_"in e?e._:_(e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],674:[function(e){(function(t){t.Q=e("q"),t.BaseObject=e("./lib/baseObject"),t.extendable=e("./lib/extendable"),t.superExtendable=e("./lib/superExtendable"),t.gettable=e("./lib/gettable"),t.postExtendHookable=e("./lib/postExtendHookable"),e("./babel-plugins/dot-underscore-runtime"),e("./lib/q.fieldbook"),e("./lib/underscore.fieldbook"),e("./lib/objectUnderscore"),e("./lib/proto/index"),e("./lib/functionBuilder")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./babel-plugins/dot-underscore-runtime":673,"./lib/baseObject":675,"./lib/extendable":676,"./lib/functionBuilder":677,"./lib/gettable":678,"./lib/objectUnderscore":680,"./lib/postExtendHookable":681,"./lib/proto/index":682,"./lib/q.fieldbook":683,"./lib/superExtendable":685,"./lib/underscore.fieldbook":686,q:713}],675:[function(e,t){(function(n){function i(e){return e===this}function r(e){if(i(this))throw new Error('Constructor called without "new"');this.options=e||{},this.pickProperties(),this.cid=this.cid||_.uniqueId(this.constructorName),this.initialize.apply(this,arguments)}e("./objectUnderscore");var o=e("./superExtendable"),s=e("./gettable"),a=e("./singletonable");_.extend(r.prototype,{initialize:function(){},constructorName:"baseObject",pickProperties:function(e){e=e||this.options||{};var t=_.result(this,"propertyNames")||[],n=this;t.forEach(function(t){var i=e[t];null!=i&&(n[t]=i)})},propertyNames:function(){return[]}}),r.resultify=function(e){return function(){return _.result(this,e)}},r.addProperties=function(){var e=this.super_.prototype,t=_.result(e,"propertyNames",[]);return this.prototype.propertyNames=t.concat(_.toArray(arguments)),this},o(r),s(r),a(r);r.extend;t.exports=r,r.wrapObject=function(e){var t=Object.create(r.prototype);return _.extend(t,e),t},n.O=r.wrapObject}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./gettable":678,"./objectUnderscore":680,"./singletonable":684,"./superExtendable":685}],676:[function(e,t){var n=e("./postExtendHookable"),i=e("util"),r=function(e){var t=this,n=function(){return t.apply(this,arguments)};return e.constructorName&&(n.name=e.constructorName),_.extend(n,t),i.inherits(n,t),_.extend(n.prototype,e),n},o=function(e){return e.extend=r,n(e)};t.exports=o},{"./postExtendHookable":681,util:749}],677:[function(e,t){(function(n){var i=e("./baseObject");e("./proto/index");var r=t.exports=i.extend({q:function(e){return function(){var t=this,n=arguments;return Q().thenImmediate(function(){return e.apply(t,n)})}},qDone:function(){return function(e){var t=this,n=arguments;return Q().thenImmediate(function(){return e.apply(t,n).done()})}},pairsOrAttrs:function(e){var t=l(e).length,n=t-1;return function(){var t,i=this,r=_.head(arguments,n),o=_.rest(arguments,n);return 1===o.length?t=o[0]:(o=_.partition(o,function(e,t){return 0===(1&t)}),t=_.object(o[0],o[1])),e.apply(i,r.concat([t]))}},limitRecursion:function(e,t){return _.limitRecursion(t,e)},wrap:function(e,t){return function(){var n=_.toArray(arguments);return o(t,this,[e].concat(n))}},after:function(e,t){return function(){var n=e.apply(this,arguments);return o(t,this,arguments),n}},before:function(e,t){return function(){return o(t,this,arguments),e.apply(this,arguments)}},withResult:function(e,t){return function(){var n=this,i=e.apply(n,arguments);return o(t,n,[i,_.toArray(arguments)])}},chainable:function(e){return function(){var t=this;return e.apply(t,arguments),t}},bindApply:function(e,t,n){var i=[t].concat(n);return e.bind.apply(e,i)},async:function(e){if("GeneratorFunction"!==e.constructor.name)throw new Error("fn.async requires that fn is a generator (make sure async is the first transformation in the chain)");return Q.async(e)},memoize:function(e,t){var n=_.uniqueId("memoMethod");if(t){var i=t;t=function(){var e=this,t=o(i,e,arguments);return _.isObject(t)||_.isArray(t)?JSON.stringify(t):t}}var r=function(){var i=this;return i[n]||(i[n]=_.memoize(e,t),r.clear=function(){i[n]=null}),i[n].apply(i,arguments)};return r.clear=_.noop,r}}),o=r.applyFn=function(e,t,n){if(_.isString(e)){var i=e;return _.soakApply(t,i,n)}return e.apply(t,n)};_.each(["then","fail","spread","finally","tap"],function(e){r.prototype["q"+e.capitalize()]=function(t,n){return t=t.q(),function(){var i=this;return t.apply(i,arguments)[e](function(){return o(n,i,arguments)})}}});var s=new r,a=function(e,t){var n=l(t);return e.original=n,e},l=function(e){return e.original||e};Object.defineProperty(n,"FB",{get:function(){return new d}});var c=Function.prototype,u=function(e){c[e]=function(){var t=this,n=[t].concat(_.toArray(arguments));return a(s[e].apply(s,n),t)}},d=i.extend({initialize:function(){this.transformers=[]},func:function(e){return _.reduce(this.transformers,function(e,t){var n=t.name,i=t.args;return a(s[n].apply(s,[e].concat(i)),e)},e)}}),h=function(e){d.prototype[e]=function(){var t=this;return t.transformers.push({name:e,args:_.toArray(arguments)}),t}};_.each(r.prototype,function(e,t){u(t),h(t)}),r.register=function(e,t){r.prototype[e]=t,u(e),h(e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./baseObject":675,"./proto/index":682}],678:[function(e,t){var n={addGetters:function(e){var t=this,n=_.mapObject(e,function(e,t){if(_.isString(e)&&(e=[e]),_.isArray(e)){var n=_.soaker.apply(_,e);e=function(){return n(this)}}return{set:function(){throw new Error('Cannot set read-only property "'+t+'"')},get:e}});return Object.defineProperties(t.prototype,n),this},forwardProperties:function(e){var t=_.tail(arguments),n={};return _.each(t,function(t){n[t]=e+"."+t}),this.addGetters(n),this}};t.exports=function(e){return _.defaults(e,n),e}},{}],679:[function(e,t){t.exports=function(e,t,n){Object.defineProperty(e,t,{configurable:!0,get:function(){var i=n.call(e);return e[t]=i,i},set:function(n){delete e[t],e[t]=n}})}},{}],680:[function(e,t,n){(function(t,i){var r=n.enableObjectUnderscore=function(e){Object.defineProperty(Object.prototype,"_",{configurable:!0,get:function(){return e(this)},set:function(e){var t=this;Object.defineProperty(t,"_",{enumerable:!0,writable:!0,value:e,configurable:!0})}}),Object.defineProperty(i,"_",{get:e.constant(e),set:e.noop})};t.env.INTRUSIVE_NO_OBJECT_UNDERSCORE||r(e("underscore"))}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:705,underscore:"underscore"}],681:[function(e,t){t.exports=function(e){var t=e.extend;return e.extend=function(){var e=this,n=t.apply(e,arguments);return e._postExtend&&_.each(e._postExtend,function(t){n=t(e,n)||n}),n},e.registerPostExtendHook=function(e){var t=this;t._postExtend=t._postExtend||[],t._postExtend.push(e)},e}},{}],682:[function(e){(function(t){var n=e("inflection");_.defaults(String.prototype,{inflect:function(e){if("undasherize"===e)return this.replace(/-/g,"_");var t=_.tail(arguments);return t.unshift(this),n[e].apply(n,t)},multiWordToCamelCase:function(e){return this.inflect("dasherize").inflect("undasherize").inflect("camelize",e)},capitalize:function(){return this[0].toUpperCase()+this.slice(1)},toClass:function(){return"."+this},toId:function(){return"#"+this},startsWith:function(e){return this.slice(0,e.length)===String(e)},indefiniteArticle:function(){return/^[aeiou]/i.test(this)?"an":"a"},contains:function(e){return-1!==this.indexOf(e)},toBuffer:function(){return new t(this.toString())}})}).call(this,e("buffer").Buffer)},{buffer:605,inflection:672}],683:[function(e){(function(t,n){function i(e){return"GeneratorFunction"===e.constructor.name?e.async():e}var r=e("q"),o=r.makePromise;if(r.Promise=r.promise,n.process){var s=r.defer;r.defer=function(){var e=s();return _.each(["resolve","reject"],function(n){var i=e[n];t.domain&&(e[n]=t.domain.bind(function(){i.apply(e,arguments)}))}),e}}o.prototype.thenImmediate=function(e,t,n){if(n)throw new Error("thenImmediate does not handle progressed");if(this.isFulfilled()&&e)try{return r(e(this.inspect().value))}catch(i){return r.reject(i)}return o.prototype.then.apply(this,arguments)},o.prototype.tap=o.prototype.tap||function(e){return e=r(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},o.prototype.getPath=o.prototype.getPath||function(e){var t=e.split("."),n=this;return _.each(t,function(e){n=n.get(e)}),n},o.prototype.not=function(){return this.then(function(e){return!e})},o.prototype.soak=function(){var e=arguments;return this.then(function(t){var n=_(t);return n.soak.apply(n,e)})},o.prototype.soak=function(){var e=arguments;return this.then(function(t){var n=_(t);return n.soak.apply(n,e)})};var a=r.all;r.all=function(){var e=arguments;return 1===e.length?a.apply(r,arguments):(e=_(e).toArray(),a.call(r,e))},r.anyTrue=function(){return r.all.apply(this,arguments).then(function(e){return _.any(e)})},r.map=function(e,t){return t=i(t),r.all(_.map(e,t))},r.serialMap=function(e,t){t=i(t);var n=r(),o=[];return _.each(e,function(e,i){n=n.then(function(){return r(t(e,i)).then(function(e){o.push(e)})})}),n.then(function(){return o})},r.resolveObject=function(e,t){var n=arguments;return r(e).then(function(e){t=1===n.length?_.keys(e):_.rest(n)._.flatten();var i=t.map(function(t){return _.result(e,t)});return r.all(i).then(function(e){return _.object(t,e)})})}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:705,q:713}],684:[function(e,t){var n=e("./makeLazyProperty");t.exports=function(e){e.makeSingleton=function(e,t){var i=this;t=_.tail(arguments),n(i,e,function(){return _.applyConstructor(i,t)})}}},{"./makeLazyProperty":679}],685:[function(e,t){var n=e("./extendable"),i=function(e){var t=this.prototype,n=e(t);return this.extend(n)};t.exports=function(e){return null==e.extend&&n(e),e.superExtend=i,e}},{"./extendable":676}],686:[function(e){function t(e){var t;t=_.isString(e)?e.split("."):e,this.nodes=t.map(n)}function n(e){var t=e.split("()");return 2===t.length?new r(t[0]):"@"===t[0][0]?new o(t[0]):new s(t[0])}function i(e){this.key=e}function r(){i.apply(this,arguments)}function o(e){e=e.slice(1),i.apply(this,arguments)}function s(){i.apply(this,arguments)}var a=e("util");t.prototype.run=function(e,t,n){for(var i,r=e,o=this.nodes,s=0;s<o.length&&null!=r;s++){i=r;var a=o[s];r=a.run(r)}var l=n||t.length;return r&&l?r.apply(i,t):r},t.cache={},a.inherits(r,i),a.inherits(s,i),a.inherits(o,i),r.prototype.run=function(e){return e[this.key]&&e[this.key]()},o.prototype.run=function(e){return e.get(this.key)},s.prototype.run=function(e){return e[this.key]};var l={compactNullish:function(e){return _.reject(e,function(e){return null==e})},deepClone:function(e){return JSON.parse(JSON.stringify(e))},concat:function(){return[].concat.apply([],arguments)},soak:function(e,t){var n=e,i=t;if(null==n)return n;for(var r=[],o=2;o<arguments.length;o++)r.push(arguments[o]);var s=_.getParsedSoak(i);return s.run(n,r)},soakApply:function(e,t,n){var i=_.getParsedSoak(t);return i.run(e,n,!0)},soakCall:function(e,t){var n=arguments._.tail(2);return _.soakApply(e,t,n)},soaker:function(e){var t=_.rest(arguments),n=_.getParsedSoak(e);return function(e){return n.run(e,t)}},getParsedSoak:function(e){var n=_.isString(e)?e:JSON.stringify(e),i=t.cache[n];return i||(i=t.cache[n]=new t(e)),i},mapBySoak:function(){return _.fnBySoak("map",arguments)},filterBySoak:function(){return _.fnBySoak("filter",arguments)},rejectBySoak:function(){return _.fnBySoak("reject",arguments)},findBySoak:function(){return _.fnBySoak("find",arguments)},findIndexBySoak:function(){return _.fnBySoak("findIndex",arguments)},findLastIndexBySoak:function(){return _.fnBySoak("findLastIndex",arguments)},everyBySoak:function(){return _.fnBySoak("every",arguments)},someBySoak:function(){return _.fnBySoak("some",arguments)},fnBySoak:function(e,t){var n=t[0],i=_.rest(t),r=_.soaker.apply(_,i);return _[e](n,r)},mapMethod:function(e,t,n){_.isFunction(n)||(n=t[n]);var i=function(e){return n.call(t,e)};return _.map(e,i)},uniqString:function(e,t,n){var i={},r=_.iteratee(t,n);return _.filter(e,function(e){var t=r(e);return i[t]?!1:(i[t]=!0,!0)})},getRange:function(e,t,n){return t._.range(n).map(function(t){return e[t]})},rangeIterator:function(e,t,n){return n=n||1,function(i){for(var r=e;t>r;r+=n)i(r)}},iterateRange:function(e,t,n,i){3===arguments.length&&(i=n,n=1);var r=_.rangeIterator(e,t,n);r(i)},at:function(e,t){return e[t]},hasPrefix:function(e,t){return null==t?!1:null==e?!1:e.substring(0,t.length)===t},containsSorted:function(e,t){return-1!==_.indexOf(e,t,!0)},differenceSorted:function(e,t){return _.filter(e,function(e){return!_.containsSorted(t,e)})},clamp:function(e,t,n){return 2===arguments.length&&(n=t,t=0),Math.max(t,Math.min(e,n))},transposeObject:function(e){var t=Object.keys(e),n=[];return t.forEach(function(t){e[t].forEach(function(e,i){var r=n[i]||(n[i]={});r[t]=e})}),n},transpose:function(e){return _.zip.apply(_,e)},sum:function(e){return _.reduce(e,function(e,t){return e+t},0)},logResult:function(e,t){return _.isFunction(e)&&(t=e,e="Result"),e+=": ",function(){var n=t.apply(this,arguments);return console.log(e,n),n}},passThruLog:function(e){return console.log(e),e},pickFrom:function(e,t){var n=_(arguments).toArray().slice(2);return _.extend(e,_.pick(t,n))},pickArray:function(e,t){return t.map(function(t){return e[t]})},limitRecursion:function(e,t){var n=0;return function(){if(n++,n>e)throw new Error("Recursion limit ("+e+") exceeded");var i=t.apply(this,arguments);return n--,i}},findIndexWhere:function(e,t){return _.findIndex(e,_.matches(t))},thrower:function(e){return function(){throw new Error(e)}},bindAllFunctions:function(e){return _.bindAll.apply(_,[e].concat(_.functions(e))),e},debugBefore:function(e){return function(){return e.apply(this,arguments)}},debugOnRecurseLevel:function(e,t){return function(){e--;var n=t.apply(this,arguments);return e++,n}},debugIf:function(e,t){return t=t||"",_.isString(t)&&(t=new Function("v","return v"+t)),t(e),e},debugProperty:function(e,t,n){var i=e[t];Object.defineProperty(e,t,{get:function(){return i},set:function(e){i=e}})},stencil:function(e,t){return e?_.template(e)(t):null},makeSet:function(e){var t={};return e?(_.each(e,function(e){t[e]=!0}),t):t},filterObject:function(){return _.pick.apply(_,arguments)},spread:function(e){return function(t){var n=this;return e.apply(n,t)}},ensureChild:function(e,t,n){return null==n&&(n={}),null==e[t]&&(e[t]=n),e[t]},ensurePath:function(e,t,n){var i=_.last(t);return t=_.chain(t).initial().each(function(t){e=_.ensureChild(e,t)}),e=_.ensureChild(e,i,n)},reduceToObject:function(e,t,n){return arguments.length<3&&(n=t,t={}),_.reduce(e,function(e,t){return n(e,t),e},t)},applyConstructor:function(e,t){var n=[null].concat(t),i=Function.prototype.bind.apply(e,n);return new i},applyMethod:function(e,t,n){return e[t].apply(e,n)}};l.pluckSoak=l.mapBySoak,l.allBySoak=l.everyBySoak,l.anyBySoak=l.someBySoak,l.selectBySoak=l.filterBySoak,l.detectBySoak=l.findBySoak,_.mixin(l),String.prototype.stencil=function(e){return this._.stencil(e)},_.templateSettings.interpolate=/\{\{(.+?)\}\}/g,Object.defineProperty(_.prototype,"$",{get:function(){return $(this.value())}}),Object.defineProperty(_.prototype,"map$",{get:function(){var e=this.value(),t=e.map($);return this._chain?t._.chain():t}})},{util:749}],687:[function(e,t){t.exports=function(e){return!(null==e||!(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)))}},{}],688:[function(e,t){t.exports=e("./lib/index")},{"./lib/index":691}],689:[function(e,t){"use strict";function n(e,t,r){"object"==typeof e&&(r=t,t=e,e=null),e?this.selector=e:(this.className=n.NAMESPACE_PREFIX+"-"+i,i++,this.selector="."+this.className),this.stylesheet=r,this.style=t}var i=0,r=/@keyframes/,o=Object.prototype.toString;t.exports=n,n.NAMESPACE_PREFIX="jss",n.prototype.addChild=function(e,t){return this.children||(this.children={}),this.children[e]=t,this},n.prototype.toString=function(){var e=r.test(this.selector),t=this.style,n=this.selector+" {";
for(var i in t){var s=t[i];if("object"==typeof s){var a=o.call(s);if("[object Object]"==a){var l="{";for(var c in s)l+="\n    "+c+": "+s[c]+";";l+="\n  }",s=l,n+="\n  "+i+(e?" ":": ")+s}else if("[object Array]"==a)for(var u=0;u<s.length;u++)n+="\n  "+i+": "+s[u]+";"}else n+="\n  "+i+": "+s+";"}return n+="\n}"}},{}],690:[function(e,t){"use strict";function n(e,t,n){"object"==typeof t&&(n=t,t=!1),this.element=null,this.attached=!1,this.named=t||!1,this.attributes=n,this.rules={},this.classes={},this.text="","undefined"!=typeof document&&(this.element=this.createElement());for(var i in e)this.createRules(i,e[i])}var i=e("./Rule"),r=e("./plugins");t.exports=n,n.prototype.attach=function(){return this.attached?this:(this.text||this.deploy(),document.head.appendChild(this.element),this.attached=!0,this)},n.prototype.deploy=function(){return this.text=this.toString(),this.element.innerHTML="\n"+this.text+"\n",this},n.prototype.detach=function(){return this.attached?(this.element.parentNode.removeChild(this.element),this.attached=!1,this):this},n.prototype.addRule=function(e,t){var n=this.createRules(e,t);if(this.text)for(var i=this.element.sheet,r=0;r<n.length;r++)i.insertRule(n[r].toString(),i.cssRules.length);else this.deploy();return n},n.prototype.addRules=function(e){for(var t in e)this.addRule(t,e[t]);return this},n.prototype.getRule=function(e){return this.rules[e]},n.prototype.toString=function(){var e="",t=this.rules;for(var n in t)e&&(e+="\n"),e+=t[n].toString();return e},n.prototype.createRules=function(e,t){var n,o,s=[];this.named?o=e:n=e;var a=new i(n,t,this);s.push(a),this.rules[o||a.selector]=a,this.named&&(this.classes[o]=a.className),r.run(a);for(e in a.children)s.push(this.createRules(e,a.children[e]));return s},n.prototype.createElement=function(){var e=document.createElement("style");if(this.attributes)for(var t in this.attributes)e.setAttribute(t,this.attributes[t]);return e}},{"./Rule":689,"./plugins":692}],691:[function(e,t,n){"use strict";var i=e("./StyleSheet"),r=e("./Rule");n.StyleSheet=i,n.Rule=r,n.plugins=e("./plugins"),n.createStyleSheet=function(e,t,n){return new i(e,t,n)},n.createRule=function(e,t){var i=new r(e,t);return n.plugins.run(i),i},n.use=n.plugins.use},{"./Rule":689,"./StyleSheet":690,"./plugins":692}],692:[function(e,t,n){"use strict";n.registry=[],n.use=function(e){n.registry.push(e)},n.run=function(e){for(var t=0;t<n.registry.length;t++)n.registry[t](e)}},{}],693:[function(e,t){function n(e){this.rand=e||new r.Rand}var i=e("bn.js"),r=e("brorand");t.exports=n,n.create=function(e){return new n(e)},n.prototype._rand=function(e){var t=e.bitLength(),n=this.rand.generate(Math.ceil(t/8));n[0]|=3;var r=7&t;return 0!==r&&(n[n.length-1]>>=7-r),new i(n)},n.prototype.test=function(e,t,n){var r=e.bitLength(),o=i.mont(e),s=new i(1).toRed(o);t||(t=Math.max(1,r/48|0));for(var a=e.subn(1),l=a.subn(1),c=0;!a.testn(c);c++);for(var u=e.shrn(c),d=a.toRed(o),h=!0;t>0;t--){var f=this._rand(l);n&&n(f);var p=f.toRed(o).redPow(u);if(0!==p.cmp(s)&&0!==p.cmp(d)){for(var m=1;c>m;m++){if(p=p.redSqr(),0===p.cmp(s))return!1;if(0===p.cmp(d))break}if(m===c)return!1}}return h},n.prototype.getDivisor=function(e,t){var n=e.bitLength(),r=i.mont(e),o=new i(1).toRed(r);t||(t=Math.max(1,n/48|0));for(var s=e.subn(1),a=s.subn(1),l=0;!s.testn(l);l++);for(var c=e.shrn(l),u=s.toRed(r);t>0;t--){var d=this._rand(a),h=e.gcd(d);if(0!==h.cmpn(1))return h;var f=d.toRed(r).redPow(c);if(0!==f.cmp(o)&&0!==f.cmp(u)){for(var p=1;l>p;p++){if(f=f.redSqr(),0===f.cmp(o))return f.fromRed().subn(1).gcd(e);if(0===f.cmp(u))break}if(p===l)return f=f.redSqr(),f.fromRed().subn(1).gcd(e)}}return!1}},{"bn.js":572,brorand:573}],694:[function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}t.exports=n,n.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}},{}],695:[function(e,t){(function(n){!function(i){"use strict";function r(){var e=i.crypto||i.msCrypto;if(!u&&e&&e.getRandomValues)try{var t=new Uint8Array(16);f=u=function(){return e.getRandomValues(t),t},u()}catch(n){}if(!u){var r=new Array(16);d=u=function(){for(var e,t=0;16>t;t++)0===(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}function o(){if("function"==typeof e)try{var t=e("crypto").randomBytes;h=u=t&&function(){return t(16)},u()}catch(n){}}function s(e,t,n){var i=t&&n||0,r=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>r&&(t[i+r++]=v[e])});16>r;)t[i+r++]=0;return t}function a(e,t){var n=t||0,i=g;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}function l(e,t,n){var i=t&&n||0,r=t||[];e=e||{};var o=null!=e.clockseq?e.clockseq:x,s=null!=e.msecs?e.msecs:(new Date).getTime(),l=null!=e.nsecs?e.nsecs:_+1,c=s-k+(l-_)/1e4;if(0>c&&null==e.clockseq&&(o=o+1&16383),(0>c||s>k)&&null==e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");k=s,_=l,x=o,s+=122192928e5;var u=(1e4*(268435455&s)+l)%4294967296;r[i++]=u>>>24&255,r[i++]=u>>>16&255,r[i++]=u>>>8&255,r[i++]=255&u;var d=s/4294967296*1e4&268435455;r[i++]=d>>>8&255,r[i++]=255&d,r[i++]=d>>>24&15|16,r[i++]=d>>>16&255,r[i++]=o>>>8|128,r[i++]=255&o;for(var h=e.node||w,f=0;6>f;f++)r[i+f]=h[f];return t?t:a(r)}function c(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new m(16):null,e=null),e=e||{};var r=e.random||(e.rng||u)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var o=0;16>o;o++)t[i+o]=r[o];return t||a(r)}var u,d,h,f,p;i?r():o();for(var m="function"==typeof n?n:Array,g=[],v={},b=0;256>b;b++)g[b]=(b+256).toString(16).substr(1),v[g[b]]=b;var y=u(),w=[1|y[0],y[1],y[2],y[3],y[4],y[5]],x=16383&(y[6]<<8|y[7]),k=0,_=0,S=c;S.v1=l,S.v4=c,S.parse=s,S.unparse=a,S.BufferClass=m,S._rng=u,S._mathRNG=d,S._nodeRNG=h,S._whatwgRNG=f,"undefined"!=typeof t&&t.exports?t.exports=S:"function"==typeof define&&define.amd?define(function(){return S}):(p=i.uuid,S.noConflict=function(){return i.uuid=p,S},i.uuid=S)}("undefined"!=typeof window?window:null)}).call(this,e("buffer").Buffer)},{buffer:605,crypto:626}],696:[function(e,t){(function(){function e(e){this._value=e}function n(e,t,n,i){var r,o,s=Math.pow(10,t);return o=(n(e*s)/s).toFixed(t),i&&(r=new RegExp("0{1,"+i+"}$"),o=o.replace(r,"")),o}function i(e,t,n){var i;return i=t.indexOf("$")>-1?o(e,t,n):t.indexOf("%")>-1?s(e,t,n):t.indexOf(":")>-1?a(e,t):c(e._value,t,n)}function r(e,t){var n,i,r,o,s,a=t,c=["KB","MB","GB","TB","PB","EB","ZB","YB"],u=!1;if(t.indexOf(":")>-1)e._value=l(t);else if(t===v)e._value=0;else{for("."!==m[g].delimiters.decimal&&(t=t.replace(/\./g,"").replace(m[g].delimiters.decimal,".")),n=new RegExp("[^a-zA-Z]"+m[g].abbreviations.thousand+"(?:\\)|(\\"+m[g].currency.symbol+")?(?:\\))?)?$"),i=new RegExp("[^a-zA-Z]"+m[g].abbreviations.million+"(?:\\)|(\\"+m[g].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+m[g].abbreviations.billion+"(?:\\)|(\\"+m[g].currency.symbol+")?(?:\\))?)?$"),o=new RegExp("[^a-zA-Z]"+m[g].abbreviations.trillion+"(?:\\)|(\\"+m[g].currency.symbol+")?(?:\\))?)?$"),s=0;s<=c.length&&!(u=t.indexOf(c[s])>-1?Math.pow(1024,s+1):!1);s++);e._value=(u?u:1)*(a.match(n)?Math.pow(10,3):1)*(a.match(i)?Math.pow(10,6):1)*(a.match(r)?Math.pow(10,9):1)*(a.match(o)?Math.pow(10,12):1)*(t.indexOf("%")>-1?.01:1)*((t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1)*Number(t.replace(/[^0-9\.]+/g,"")),e._value=u?Math.ceil(e._value):e._value}return e._value}function o(e,t,n){var i,r,o=t.indexOf("$"),s=t.indexOf("("),a=t.indexOf("-"),l="";return t.indexOf(" $")>-1?(l=" ",t=t.replace(" $","")):t.indexOf("$ ")>-1?(l=" ",t=t.replace("$ ","")):t=t.replace("$",""),r=c(e._value,t,n),1>=o?r.indexOf("(")>-1||r.indexOf("-")>-1?(r=r.split(""),i=1,(s>o||a>o)&&(i=0),r.splice(i,0,m[g].currency.symbol+l),r=r.join("")):r=m[g].currency.symbol+l+r:r.indexOf(")")>-1?(r=r.split(""),r.splice(-1,0,l+m[g].currency.symbol),r=r.join("")):r=r+l+m[g].currency.symbol,r}function s(e,t,n){var i,r="",o=100*e._value;return t.indexOf(" %")>-1?(r=" ",t=t.replace(" %","")):t=t.replace("%",""),i=c(o,t,n),i.indexOf(")")>-1?(i=i.split(""),i.splice(-1,0,r+"%"),i=i.join("")):i=i+r+"%",i}function a(e){var t=Math.floor(e._value/60/60),n=Math.floor((e._value-60*t*60)/60),i=Math.round(e._value-60*t*60-60*n);return t+":"+(10>n?"0"+n:n)+":"+(10>i?"0"+i:i)}function l(e){var t=e.split(":"),n=0;return 3===t.length?(n+=60*Number(t[0])*60,n+=60*Number(t[1]),n+=Number(t[2])):2===t.length&&(n+=60*Number(t[0]),n+=Number(t[1])),Number(n)}function c(e,t,i){var r,o,s,a,l,c,u=!1,d=!1,h=!1,f="",p=!1,b=!1,y=!1,w=!1,x=!1,k="",_="",S=Math.abs(e),C=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],E="",I=!1;if(0===e&&null!==v)return v;if(t.indexOf("(")>-1?(u=!0,t=t.slice(1,-1)):t.indexOf("+")>-1&&(d=!0,t=t.replace(/\+/g,"")),t.indexOf("a")>-1&&(p=t.indexOf("aK")>=0,b=t.indexOf("aM")>=0,y=t.indexOf("aB")>=0,w=t.indexOf("aT")>=0,x=p||b||y||w,t.indexOf(" a")>-1?(f=" ",t=t.replace(" a","")):t=t.replace("a",""),S>=Math.pow(10,12)&&!x||w?(f+=m[g].abbreviations.trillion,e/=Math.pow(10,12)):S<Math.pow(10,12)&&S>=Math.pow(10,9)&&!x||y?(f+=m[g].abbreviations.billion,e/=Math.pow(10,9)):S<Math.pow(10,9)&&S>=Math.pow(10,6)&&!x||b?(f+=m[g].abbreviations.million,e/=Math.pow(10,6)):(S<Math.pow(10,6)&&S>=Math.pow(10,3)&&!x||p)&&(f+=m[g].abbreviations.thousand,e/=Math.pow(10,3))),t.indexOf("b")>-1)for(t.indexOf(" b")>-1?(k=" ",t=t.replace(" b","")):t=t.replace("b",""),s=0;s<=C.length;s++)if(r=Math.pow(1024,s),o=Math.pow(1024,s+1),e>=r&&o>e){k+=C[s],r>0&&(e/=r);break}return t.indexOf("o")>-1&&(t.indexOf(" o")>-1?(_=" ",t=t.replace(" o","")):t=t.replace("o",""),_+=m[g].ordinal(e)),t.indexOf("[.]")>-1&&(h=!0,t=t.replace("[.]",".")),a=e.toString().split(".")[0],l=t.split(".")[1],c=t.indexOf(","),l?(l.indexOf("[")>-1?(l=l.replace("]",""),l=l.split("["),E=n(e,l[0].length+l[1].length,i,l[1].length)):E=n(e,l.length,i),a=E.split(".")[0],E=E.split(".")[1].length?m[g].delimiters.decimal+E.split(".")[1]:"",h&&0===Number(E.slice(1))&&(E="")):a=n(e,null,i),a.indexOf("-")>-1&&(a=a.slice(1),I=!0),c>-1&&(a=a.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+m[g].delimiters.thousands)),0===t.indexOf(".")&&(a=""),(u&&I?"(":"")+(!u&&I?"-":"")+(!I&&d?"+":"")+a+E+(_?_:"")+(f?f:"")+(k?k:"")+(u&&I?")":"")}function u(e,t){m[e]=t}function d(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)}function h(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){var n=d(e),i=d(t);return n>i?n:i},-1/0)}var f,p="1.5.3",m={},g="en",v=null,b="0,0",y="undefined"!=typeof t&&t.exports;f=function(t){return f.isNumeral(t)?t=t.value():0===t||"undefined"==typeof t?t=0:Number(t)||(t=f.fn.unformat(t)),new e(Number(t))},f.version=p,f.isNumeral=function(t){return t instanceof e},f.language=function(e,t){if(!e)return g;if(e&&!t){if(!m[e])throw new Error("Unknown language : "+e);g=e}return(t||!m[e])&&u(e,t),f},f.languageData=function(e){if(!e)return m[g];if(!m[e])throw new Error("Unknown language : "+e);return m[e]},f.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),f.zeroFormat=function(e){v="string"==typeof e?e:null},f.defaultFormat=function(e){b="string"==typeof e?e:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var n,i,r=this.length>>>0,o=!1;for(1<arguments.length&&(i=t,o=!0),n=0;r>n;++n)this.hasOwnProperty(n)&&(o?i=e(i,this[n],n,this):(i=this[n],o=!0));if(!o)throw new TypeError("Reduce of empty array with no initial value");return i}),f.fn=e.prototype={clone:function(){return f(this)},format:function(e,t){return i(this,e?e:b,void 0!==t?t:Math.round)},unformat:function(e){return"[object Number]"===Object.prototype.toString.call(e)?e:r(this,e?e:b)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){function t(e,t){return e+n*t}var n=h.call(null,this._value,e);return this._value=[this._value,e].reduce(t,0)/n,this},subtract:function(e){function t(e,t){return e-n*t}var n=h.call(null,this._value,e);return this._value=[e].reduce(t,this._value*n)/n,this},multiply:function(e){function t(e,t){var n=h(e,t);return e*n*t*n/(n*n)}return this._value=[this._value,e].reduce(t,1),this},divide:function(e){function t(e,t){var n=h(e,t);return e*n/(t*n)}return this._value=[this._value,e].reduce(t),this},difference:function(e){return Math.abs(f(this._value).subtract(e).value())}},y&&(t.exports=f),"undefined"==typeof ender&&(this.numeral=f),"function"==typeof define&&define.amd&&define([],function(){return f})}).call(this)},{}],697:[function(e,t){!function(e){"use strict";function n(t,n){if(n=n||{},n.worker&&C.WORKERS_SUPPORTED){var i=d();return i.userStep=n.step,i.userChunk=n.chunk,i.userComplete=n.complete,i.userError=n.error,n.step=b(n.step),n.chunk=b(n.chunk),n.complete=b(n.complete),n.error=b(n.error),delete n.worker,void i.postMessage({input:t,config:n,workerId:i.id})}var r=null;return"string"==typeof t?r=n.download?new o(n):new a(n):(e.File&&t instanceof File||t instanceof Object)&&(r=new s(n)),r.stream(t)}function i(e,t){function n(){"object"==typeof t&&("string"==typeof t.delimiter&&1==t.delimiter.length&&-1==C.BAD_DELIMITERS.indexOf(t.delimiter)&&(l=t.delimiter),("boolean"==typeof t.quotes||t.quotes instanceof Array)&&(a=t.quotes),"string"==typeof t.newline&&(c=t.newline))}function i(e){if("object"!=typeof e)return[];var t=[];for(var n in e)t.push(n);return t}function r(e,t){var n="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var i=e instanceof Array&&e.length>0,r=!(t[0]instanceof Array);if(i){for(var s=0;s<e.length;s++)s>0&&(n+=l),n+=o(e[s],s);t.length>0&&(n+=c)}for(var a=0;a<t.length;a++){for(var u=i?e.length:t[a].length,d=0;u>d;d++){d>0&&(n+=l);var h=i&&r?e[d]:d;n+=o(t[a][h],d)}a<t.length-1&&(n+=c)}return n}function o(e,t){if("undefined"==typeof e||null===e)return"";e=e.toString().replace(/"/g,'""');var n="boolean"==typeof a&&a||a instanceof Array&&a[t]||s(e,C.BAD_DELIMITERS)||e.indexOf(l)>-1||" "==e.charAt(0)||" "==e.charAt(e.length-1);return n?'"'+e+'"':e}function s(e,t){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return!0;return!1}var a=!1,l=",",c="\r\n";if(n(),"string"==typeof e&&(e=JSON.parse(e)),e instanceof Array){if(!e.length||e[0]instanceof Array)return r(null,e);if("object"==typeof e[0])return r(i(e[0]),e)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data instanceof Array&&(e.fields||(e.fields=e.data[0]instanceof Array?e.fields:i(e.data[0])),e.data[0]instanceof Array||"object"==typeof e.data[0]||(e.data=[e.data])),r(e.fields||[],e.data||[]);throw"exception: Unable to serialize unrecognized input"}function r(t){function n(e){var t=g(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new l(t),this._handle.streamer=this,this._config=t}this._handle=null,this._paused=!1,this._finished=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},n.call(this,t),this.parseChunk=function(t){if(this.isFirstChunk&&b(this._config.beforeFirstChunk)){var n=this._config.beforeFirstChunk(t);void 0!==n&&(t=n)}this.isFirstChunk=!1;var i=this._partialLine+t;this._partialLine="";var r=this._handle.parse(i,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var o=r.meta.cursor;this._finished||(this._partialLine=i.substring(o-this._baseIndex),this._baseIndex=o),r&&r.data&&(this._rowCount+=r.data.length);var s=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(x)e.postMessage({results:r,workerId:C.WORKER_ID,finished:s});else if(b(this._config.chunk)){if(this._config.chunk(r,this._handle),this._paused)return;r=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(r.data),this._completeResults.errors=this._completeResults.errors.concat(r.errors),this._completeResults.meta=r.meta),!s||!b(this._config.complete)||r&&r.meta.aborted||this._config.complete(this._completeResults),s||r&&r.meta.paused||this._nextChunk(),r}},this._sendError=function(t){b(this._config.error)?this._config.error(t):x&&this._config.error&&e.postMessage({workerId:C.WORKER_ID,error:t,finished:!1})}}function o(e){function t(e){var t=e.getResponseHeader("Content-Range");return parseInt(t.substr(t.lastIndexOf("/")+1))}e=e||{},e.chunkSize||(e.chunkSize=C.RemoteChunkSize),r.call(this,e);var n;this._nextChunk=w?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)return void this._chunkLoaded();if(n=new XMLHttpRequest,w||(n.onload=v(this._chunkLoaded,this),n.onerror=v(this._chunkError,this)),n.open("GET",this._input,!w),this._config.chunkSize){var e=this._start+this._config.chunkSize-1;n.setRequestHeader("Range","bytes="+this._start+"-"+e),n.setRequestHeader("If-None-Match","webkit-no-cache")}try{n.send()}catch(t){this._chunkError(t.message)}w&&0==n.status?this._chunkError():this._start+=this._config.chunkSize},this._chunkLoaded=function(){if(4==n.readyState){if(n.status<200||n.status>=400)return void this._chunkError();this._finished=!this._config.chunkSize||this._start>t(n),this.parseChunk(n.responseText)}},this._chunkError=function(e){var t=n.statusText||e;this._sendError(t)}}function s(e){e=e||{},e.chunkSize||(e.chunkSize=C.LocalChunkSize),r.call(this,e);var t,n,i="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,i?(t=new FileReader,t.onload=v(this._chunkLoaded,this),t.onerror=v(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var r=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,r)}var o=t.readAsText(e,this._config.encoding);i||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function a(e){e=e||{},r.call(this,e);var t,n;this.stream=function(e){return t=e,n=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e=this._config.chunkSize,t=e?n.substr(0,e):n;return n=e?n.substr(e):"",this._finished=!n,this.parseChunk(t)}}}function l(e){function t(){if(x&&h&&(l("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+C.DefaultDelimiter+"'"),h=!1),e.skipEmptyLines)for(var t=0;t<x.data.length;t++)1==x.data[t].length&&""==x.data[t][0]&&x.data.splice(t--,1);return n()&&i(),r()}function n(){return e.header&&0==w.length}function i(){if(x){for(var e=0;n()&&e<x.data.length;e++)for(var t=0;t<x.data[e].length;t++)w.push(x.data[e][t]);x.data.splice(0,1)}}function r(){if(!x||!e.header&&!e.dynamicTyping)return x;for(var t=0;t<x.data.length;t++){for(var n={},i=0;i<x.data[t].length;i++){if(e.dynamicTyping){var r=x.data[t][i];x.data[t][i]="true"==r||"TRUE"==r?!0:"false"==r||"FALSE"==r?!1:a(r)}e.header&&(i>=w.length?(n.__parsed_extra||(n.__parsed_extra=[]),n.__parsed_extra.push(x.data[t][i])):n[w[i]]=x.data[t][i])}e.header&&(x.data[t]=n,i>w.length?l("FieldMismatch","TooManyFields","Too many fields: expected "+w.length+" fields but parsed "+i,t):i<w.length&&l("FieldMismatch","TooFewFields","Too few fields: expected "+w.length+" fields but parsed "+i,t))}return e.header&&x.meta&&(x.meta.fields=w),x}function o(t){for(var n,i,r,o=[",","	","|",";",C.RECORD_SEP,C.UNIT_SEP],s=0;s<o.length;s++){var a=o[s],l=0,u=0;r=void 0;for(var d=new c({delimiter:a,preview:10}).parse(t),h=0;h<d.data.length;h++){var f=d.data[h].length;u+=f,"undefined"!=typeof r?f>1&&(l+=Math.abs(f-r),r=f):r=f}d.data.length>0&&(u/=d.data.length),("undefined"==typeof i||i>l)&&u>1.99&&(i=l,n=a)}return e.delimiter=n,{successful:!!n,bestDelimiter:n}}function s(e){e=e.substr(0,1048576);var t=e.split("\r");if(1==t.length)return"\n";for(var n=0,i=0;i<t.length;i++)"\n"==t[i][0]&&n++;return n>=t.length/2?"\r\n":"\r"}function a(e){var t=f.test(e);return t?parseFloat(e):e}function l(e,t,n,i){x.errors.push({type:e,code:t,message:n,row:i})}var u,d,h,f=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,p=this,m=0,v=!1,y=!1,w=[],x={data:[],errors:[],meta:{}};if(b(e.step)){var k=e.step;e.step=function(i){if(x=i,n())t();else{if(t(),0==x.data.length)return;m+=i.data.length,e.preview&&m>e.preview?d.abort():k(x,p)}}}this.parse=function(n,i,r){if(e.newline||(e.newline=s(n)),h=!1,!e.delimiter){var a=o(n);a.successful?e.delimiter=a.bestDelimiter:(h=!0,e.delimiter=C.DefaultDelimiter),x.meta.delimiter=e.delimiter}var l=g(e);return e.preview&&e.header&&l.preview++,u=n,d=new c(l),x=d.parse(u,i,r),t(),v?{meta:{paused:!0}}:x||{meta:{paused:!1}}},this.paused=function(){return v},this.pause=function(){v=!0,d.abort(),u=u.substr(d.getCharIndex())},this.resume=function(){v=!1,p.streamer.parseChunk(u)},this.aborted=function(){return y},this.abort=function(){y=!0,d.abort(),x.meta.aborted=!0,b(e.complete)&&e.complete(x),u=""}}function c(e){e=e||{};var t=e.delimiter,n=e.newline,i=e.comments,r=e.step,o=e.preview,s=e.fastMode;if(("string"!=typeof t||C.BAD_DELIMITERS.indexOf(t)>-1)&&(t=","),i===t)throw"Comment character same as delimiter";i===!0?i="#":("string"!=typeof i||C.BAD_DELIMITERS.indexOf(i)>-1)&&(i=!1),"\n"!=n&&"\r"!=n&&"\r\n"!=n&&(n="\n");var a=0,l=!1;this.parse=function(e,c,u){function d(e){x.push(e),S=a}function h(t){return u?p():("undefined"==typeof t&&(t=e.substr(a)),_.push(t),a=g,d(_),w&&m(),p())}function f(t){a=t,d(_),_=[],R=e.indexOf(n,a)}function p(e){return{data:x,errors:k,meta:{delimiter:t,linebreak:n,aborted:l,truncated:!!e,cursor:S+(c||0)}}}function m(){r(p()),x=[],k=[]}if("string"!=typeof e)throw"Input must be a string";var g=e.length,v=t.length,b=n.length,y=i.length,w="function"==typeof r;a=0;var x=[],k=[],_=[],S=0;if(!e)return p();if(s||s!==!1&&-1===e.indexOf('"')){for(var C=e.split(n),E=0;E<C.length;E++){var _=C[E];if(a+=_.length,E!==C.length-1)a+=n.length;else if(u)return p();if(!i||_.substr(0,y)!=i){if(w){if(x=[],d(_.split(t)),m(),l)return p()}else d(_.split(t));if(o&&E>=o)return x=x.slice(0,o),p(!0)}}return p()}for(var I=e.indexOf(t,a),R=e.indexOf(n,a);;)if('"'!=e[a])if(i&&0===_.length&&e.substr(a,y)===i){if(-1==R)return p();a=R+b,R=e.indexOf(n,a),I=e.indexOf(t,a)}else if(-1!==I&&(R>I||-1===R))_.push(e.substring(a,I)),a=I+v,I=e.indexOf(t,a);else{if(-1===R)break;if(_.push(e.substring(a,R)),f(R+b),w&&(m(),l))return p();if(o&&x.length>=o)return p(!0)}else{var T=a;for(a++;;){var T=e.indexOf('"',T+1);if(-1===T)return u||k.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:x.length,index:a}),h();if(T===g-1){var A=e.substring(a,T).replace(/""/g,'"');return h(A)}if('"'!=e[T+1]){if(e[T+1]==t){_.push(e.substring(a,T).replace(/""/g,'"')),a=T+1+v,I=e.indexOf(t,a),R=e.indexOf(n,a);break}if(e.substr(T+1,b)===n){if(_.push(e.substring(a,T).replace(/""/g,'"')),f(T+1+b),I=e.indexOf(t,a),w&&(m(),l))return p();if(o&&x.length>=o)return p(!0);break}}else T++}}return h()},this.abort=function(){l=!0},this.getCharIndex=function(){return a}}function u(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}function d(){if(!C.WORKERS_SUPPORTED)return!1;if(!k&&null===C.SCRIPT_PATH)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");var t=C.SCRIPT_PATH||y;t+=(-1!==t.indexOf("?")?"&":"?")+"papaworker";var n=new e.Worker(t);return n.onmessage=h,n.id=S++,_[n.id]=n,n}function h(e){var t=e.data,n=_[t.workerId],i=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var r=function(){i=!0,f(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},o={abort:r,pause:p,resume:p};if(b(n.userStep)){for(var s=0;s<t.results.data.length&&(n.userStep({data:[t.results.data[s]],errors:t.results.errors,meta:t.results.meta},o),!i);s++);delete t.results}else b(n.userChunk)&&(n.userChunk(t.results,o,t.file),delete t.results)}t.finished&&!i&&f(t.workerId,t.results)}function f(e,t){var n=_[e];b(n.userComplete)&&n.userComplete(t),n.terminate(),delete _[e]}function p(){throw"Not implemented."}function m(t){var n=t.data;if("undefined"==typeof C.WORKER_ID&&n&&(C.WORKER_ID=n.workerId),"string"==typeof n.input)e.postMessage({workerId:C.WORKER_ID,results:C.parse(n.input,n.config),finished:!0});else if(e.File&&n.input instanceof File||n.input instanceof Object){var i=C.parse(n.input,n.config);i&&e.postMessage({workerId:C.WORKER_ID,results:i,finished:!0})}}function g(e){if("object"!=typeof e)return e;var t=e instanceof Array?[]:{};for(var n in e)t[n]=g(e[n]);return t}function v(e,t){return function(){e.apply(t,arguments)}}function b(e){return"function"==typeof e}var y,w=!e.document&&!!e.postMessage,x=w&&/(\?|&)papaworker(=|&|$)/.test(e.location.search),k=!1,_={},S=0,C={};if(C.parse=n,C.unparse=i,C.RECORD_SEP=String.fromCharCode(30),C.UNIT_SEP=String.fromCharCode(31),C.BYTE_ORDER_MARK="﻿",C.BAD_DELIMITERS=["\r","\n",'"',C.BYTE_ORDER_MARK],C.WORKERS_SUPPORTED=!w&&!!e.Worker,C.SCRIPT_PATH=null,C.LocalChunkSize=10485760,C.RemoteChunkSize=5242880,C.DefaultDelimiter=",",C.Parser=c,C.ParserHandle=l,C.NetworkStreamer=o,C.FileStreamer=s,C.StringStreamer=a,"undefined"!=typeof t&&t.exports?t.exports=C:b(e.define)&&e.define.amd?define(function(){return C}):e.Papa=C,e.jQuery){var E=e.jQuery;E.fn.parse=function(t){function n(){if(0==s.length)return void(b(t.complete)&&t.complete());var e=s[0];if(b(t.before)){var n=t.before(e.file,e.inputElem);if("object"==typeof n){if("abort"==n.action)return void i("AbortError",e.file,e.inputElem,n.reason);if("skip"==n.action)return void r();"object"==typeof n.config&&(e.instanceConfig=E.extend(e.instanceConfig,n.config))}else if("skip"==n)return void r()}var o=e.instanceConfig.complete;e.instanceConfig.complete=function(t){b(o)&&o(t,e.file,e.inputElem),r()},C.parse(e.file,e.instanceConfig)}function i(e,n,i,r){b(t.error)&&t.error({name:e},n,i,r)}function r(){s.splice(0,1),n()}var o=t.config||{},s=[];return this.each(function(){var t="INPUT"==E(this).prop("tagName").toUpperCase()&&"file"==E(this).attr("type").toLowerCase()&&e.FileReader;if(!t||!this.files||0==this.files.length)return!0;for(var n=0;n<this.files.length;n++)s.push({file:this.files[n],inputElem:this,instanceConfig:E.extend({},o)})}),n(),this}}x?e.onmessage=m:C.WORKERS_SUPPORTED&&(y=u(),document.body?document.addEventListener("DOMContentLoaded",function(){k=!0},!0):k=!0),o.prototype=Object.create(r.prototype),o.prototype.constructor=o,s.prototype=Object.create(r.prototype),s.prototype.constructor=s,a.prototype=Object.create(a.prototype),a.prototype.constructor=a}("undefined"!=typeof window?window:this)},{}],698:[function(e,t){t.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],699:[function(e,t,n){var i=e("asn1.js"),r=i.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});n.RSAPrivateKey=r;var o=i.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});n.RSAPublicKey=o;var s=i.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())});n.PublicKey=s;var a=i.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),l=i.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(a),this.key("subjectPrivateKey").octstr())});n.PrivateKey=l;var c=i.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});n.EncryptedPrivateKey=c;var u=i.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});n.DSAPrivateKey=u,n.DSAparam=i.define("DSAparam",function(){this.int()});var d=i.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(h),this.key("publicKey").optional().explicit(1).bitstr())});n.ECPrivateKey=d;var h=i.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});n.signature=i.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"asn1.js":260}],700:[function(e,t){(function(n){var i=/Proc-Type: 4,ENCRYPTED\r?\nDEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)\r?\n\r?\n([0-9A-z\n\r\+\/\=]+)\r?\n/m,r=/^-----BEGIN (.*) KEY-----\r?\n/m,o=/^-----BEGIN (.*) KEY-----\r?\n([0-9A-z\n\r\+\/\=]+)\r?\n-----END \1 KEY-----$/m,s=e("evp_bytestokey"),a=e("browserify-aes");t.exports=function(e,t){var l,c=e.toString(),u=c.match(i);if(u){var d="aes"+u[1],h=new n(u[2],"hex"),f=new n(u[3].replace(/\r?\n/g,""),"base64"),p=s(t,h.slice(0,8),parseInt(u[1],10)).key,m=[],g=a.createDecipheriv(d,p,h);m.push(g.update(f)),m.push(g.final()),l=n.concat(m)}else{var v=c.match(o);l=new n(v[2].replace(/\r?\n/g,""),"base64")}var b=c.match(r)[1]+" KEY";return{tag:b,data:l}}}).call(this,e("buffer").Buffer)},{"browserify-aes":577,buffer:605,evp_bytestokey:661}],701:[function(e,t){(function(n){function i(e){var t;"object"!=typeof e||n.isBuffer(e)||(t=e.passphrase,e=e.key),"string"==typeof e&&(e=new n(e));var i,s,l=a(e,t),c=l.tag,u=l.data;switch(c){case"PUBLIC KEY":switch(s=o.PublicKey.decode(u,"der"),i=s.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return o.RSAPublicKey.decode(s.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return s.subjectPrivateKey=s.subjectPublicKey,{type:"ec",data:s};case"1.2.840.10040.4.1":return s.algorithm.params.pub_key=o.DSAparam.decode(s.subjectPublicKey.data,"der"),{type:"dsa",data:s.algorithm.params};default:throw new Error("unknown key id "+i)}throw new Error("unknown key type "+c);case"ENCRYPTED PRIVATE KEY":u=o.EncryptedPrivateKey.decode(u,"der"),u=r(u,t);case"PRIVATE KEY":switch(s=o.PrivateKey.decode(u,"der"),i=s.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return o.RSAPrivateKey.decode(s.subjectPrivateKey,"der");
case"1.2.840.10045.2.1":return{curve:s.algorithm.curve,privateKey:o.ECPrivateKey.decode(s.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return s.algorithm.params.priv_key=o.DSAparam.decode(s.subjectPrivateKey,"der"),{type:"dsa",params:s.algorithm.params};default:throw new Error("unknown key id "+i)}throw new Error("unknown key type "+c);case"RSA PUBLIC KEY":return o.RSAPublicKey.decode(u,"der");case"RSA PRIVATE KEY":return o.RSAPrivateKey.decode(u,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:o.DSAPrivateKey.decode(u,"der")};case"EC PRIVATE KEY":return u=o.ECPrivateKey.decode(u,"der"),{curve:u.parameters.value,privateKey:u.privateKey};default:throw new Error("unknown key type "+c)}}function r(e,t){var i=e.algorithm.decrypt.kde.kdeparams.salt,r=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=s[e.algorithm.decrypt.cipher.algo.join(".")],a=e.algorithm.decrypt.cipher.iv,u=e.subjectPrivateKey,d=parseInt(o.split("-")[1],10)/8,h=c.pbkdf2Sync(t,i,r,d),f=l.createDecipheriv(o,h,a),p=[];return p.push(f.update(u)),p.push(f.final()),n.concat(p)}var o=e("./asn1"),s=e("./aesid.json"),a=e("./fixProc"),l=e("browserify-aes"),c=e("pbkdf2");t.exports=i,i.signature=o.signature}).call(this,e("buffer").Buffer)},{"./aesid.json":698,"./asn1":699,"./fixProc":700,"browserify-aes":577,buffer:605,pbkdf2:703}],702:[function(e,t,n){(function(e){function t(e,t){for(var n=0,i=e.length-1;i>=0;i--){var r=e[i];"."===r?e.splice(i,1):".."===r?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function i(e,t){if(e.filter)return e.filter(t);for(var n=[],i=0;i<e.length;i++)t(e[i],i,e)&&n.push(e[i]);return n}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return r.exec(e).slice(1)};n.resolve=function(){for(var n="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(n=s+"/"+n,r="/"===s.charAt(0))}return n=t(i(n.split("/"),function(e){return!!e}),!r).join("/"),(r?"/":"")+n||"."},n.normalize=function(e){var r=n.isAbsolute(e),o="/"===s(e,-1);return e=t(i(e.split("/"),function(e){return!!e}),!r).join("/"),e||r||(e="."),e&&o&&(e+="/"),(r?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(i(e,function(e){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function i(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var r=i(e.split("/")),o=i(t.split("/")),s=Math.min(r.length,o.length),a=s,l=0;s>l;l++)if(r[l]!==o[l]){a=l;break}for(var c=[],l=a;l<r.length;l++)c.push("..");return c=c.concat(o.slice(a)),c.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=o(e),n=t[0],i=t[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},n.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return o(e)[3]};var s="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return 0>t&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:705}],703:[function(e,t,n){(function(t){function i(e,t,n,i,o,s){if("function"==typeof o&&(s=o,o=void 0),"function"!=typeof s)throw new Error("No callback provided to pbkdf2");var a=r(e,t,n,i,o);setTimeout(function(){s(void 0,a)})}function r(e,n,i,r,a){if("number"!=typeof i)throw new TypeError("Iterations not a number");if(0>i)throw new TypeError("Bad iterations");if("number"!=typeof r)throw new TypeError("Key length not a number");if(0>r||r>s)throw new TypeError("Bad key length");a=a||"sha1",t.isBuffer(e)||(e=new t(e,"binary")),t.isBuffer(n)||(n=new t(n,"binary"));var l,c=1,u=new t(r),d=new t(n.length+4);n.copy(d,0,0,n.length);for(var h,f,p=1;c>=p;p++){d.writeUInt32BE(p,n.length);var m=o(a,e).update(d).digest();l||(l=m.length,f=new t(l),c=Math.ceil(r/l),h=r-(c-1)*l),m.copy(f,0,0,l);for(var g=1;i>g;g++){m=o(a,e).update(m).digest();for(var v=0;l>v;v++)f[v]^=m[v]}var b=(p-1)*l,y=p===c?h:l;f.copy(u,b,0,y)}return u}var o=e("create-hmac"),s=Math.pow(2,30)-1;n.pbkdf2=i,n.pbkdf2Sync=r}).call(this,e("buffer").Buffer)},{buffer:605,"create-hmac":624}],704:[function(e,t){(function(e){"use strict";function n(t,n,i,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,i)});case 4:return e.nextTick(function(){t.call(null,n,i,r)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}t.exports=!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?n:e.nextTick}).call(this,e("_process"))},{_process:705}],705:[function(e,t){function n(){c&&s&&(c=!1,s.length?l=s.concat(l):u=-1,l.length&&i())}function i(){if(!c){var e=setTimeout(n);c=!0;for(var t=l.length;t;){for(s=l,l=[];++u<t;)s&&s[u].run();u=-1,t=l.length}s=null,c=!1,clearTimeout(e)}}function r(e,t){this.fun=e,this.array=t}function o(){}var s,a=t.exports={},l=[],c=!1,u=-1;a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new r(e,t)),1!==l.length||c||setTimeout(i,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],706:[function(e,t,n){n.publicEncrypt=e("./publicEncrypt"),n.privateDecrypt=e("./privateDecrypt"),n.privateEncrypt=function(e,t){return n.publicEncrypt(e,t,!0)},n.publicDecrypt=function(e,t){return n.privateDecrypt(e,t,!0)}},{"./privateDecrypt":708,"./publicEncrypt":709}],707:[function(e,t){(function(n){function i(e){var t=new n(4);return t.writeUInt32BE(e,0),t}var r=e("create-hash");t.exports=function(e,t){for(var o,s=new n(""),a=0;s.length<t;)o=i(a++),s=n.concat([s,r("sha1").update(e).update(o).digest()]);return s.slice(0,t)}}).call(this,e("buffer").Buffer)},{buffer:605,"create-hash":620}],708:[function(e,t){(function(n){function i(e,t){var i=(e.modulus,e.modulus.byteLength()),r=(t.length,d("sha1").update(new n("")).digest()),s=r.length;if(0!==t[0])throw new Error("decryption error");var c=t.slice(1,s+1),u=t.slice(s+1),h=l(c,a(u,s)),f=l(u,a(h,i-s-1));if(o(r,f.slice(0,s)))throw new Error("decryption error");for(var p=s;0===f[p];)p++;if(1!==f[p++])throw new Error("decryption error");return f.slice(p)}function r(e,t,n){for(var i=t.slice(0,2),r=2,o=0;0!==t[r++];)if(r>=t.length){o++;break}{var s=t.slice(2,r-1);t.slice(r-1,r)}if(("0002"!==i.toString("hex")&&!n||"0001"!==i.toString("hex")&&n)&&o++,s.length<8&&o++,o)throw new Error("decryption error");return t.slice(r)}function o(e,t){e=new n(e),t=new n(t);var i=0,r=e.length;e.length!==t.length&&(i++,r=Math.min(e.length,t.length));for(var o=-1;++o<r;)i+=e[o]^t[o];return i}var s=e("parse-asn1"),a=e("./mgf"),l=e("./xor"),c=e("bn.js"),u=e("browserify-rsa"),d=e("create-hash"),h=e("./withPublic");t.exports=function(e,t,o){var a;a=e.padding?e.padding:o?1:4;var l=s(e),d=l.modulus.byteLength();if(t.length>d||new c(t).cmp(l.modulus)>=0)throw new Error("decryption error");var f;f=o?h(new c(t),l):u(t,l);var p=new n(d-f.length);if(p.fill(0),f=n.concat([p,f],d),4===a)return i(l,f);if(1===a)return r(l,f,o);if(3===a)return f;throw new Error("unknown padding")}}).call(this,e("buffer").Buffer)},{"./mgf":707,"./withPublic":710,"./xor":711,"bn.js":572,"browserify-rsa":595,buffer:605,"create-hash":620,"parse-asn1":701}],709:[function(e,t){(function(n){function i(e,t){var i=e.modulus.byteLength(),r=t.length,o=l("sha1").update(new n("")).digest(),s=o.length,h=2*s;if(r>i-h-2)throw new Error("message too long");var f=new n(i-r-h-2);f.fill(0);var p=i-s-1,m=a(s),g=u(n.concat([o,f,new n([1]),t],p),c(m,p)),v=u(m,c(g,s));return new d(n.concat([new n([0]),v,g],i))}function r(e,t,i){var r=t.length,s=e.modulus.byteLength();if(r>s-11)throw new Error("message too long");var a;return i?(a=new n(s-r-3),a.fill(255)):a=o(s-r-3),new d(n.concat([new n([0,i?1:2]),a,new n([0]),t],s))}function o(e){for(var t,i=new n(e),r=0,o=a(2*e),s=0;e>r;)s===o.length&&(o=a(2*e),s=0),t=o[s++],t&&(i[r++]=t);return i}var s=e("parse-asn1"),a=e("randombytes"),l=e("create-hash"),c=e("./mgf"),u=e("./xor"),d=e("bn.js"),h=e("./withPublic"),f=e("browserify-rsa");t.exports=function(e,t,n){var o;o=e.padding?e.padding:n?1:4;var a,l=s(e);if(4===o)a=i(l,t);else if(1===o)a=r(l,t,n);else{if(3!==o)throw new Error("unknown padding");if(a=new d(t),a.cmp(l.modulus)>=0)throw new Error("data too long for modulus")}return n?f(a,l):h(a,l)}}).call(this,e("buffer").Buffer)},{"./mgf":707,"./withPublic":710,"./xor":711,"bn.js":572,"browserify-rsa":595,buffer:605,"create-hash":620,"parse-asn1":701,randombytes:717}],710:[function(e,t){(function(n){function i(e,t){return new n(e.toRed(r.mont(t.modulus)).redPow(new r(t.publicExponent)).fromRed().toArray())}var r=e("bn.js");t.exports=i}).call(this,e("buffer").Buffer)},{"bn.js":572,buffer:605}],711:[function(e,t){t.exports=function(e,t){for(var n=e.length,i=-1;++i<n;)e[i]^=t[i];return e}},{}],712:[function(e,t,n){(function(e){!function(i){function r(e){throw new RangeError(V[e])}function o(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function s(e,t){var n=e.split("@"),i="";n.length>1&&(i=n[0]+"@",e=n[1]),e=e.replace(F,".");var r=e.split("."),s=o(r,t).join(".");return i+s}function a(e){for(var t,n,i=[],r=0,o=e.length;o>r;)t=e.charCodeAt(r++),t>=55296&&56319>=t&&o>r?(n=e.charCodeAt(r++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--)):i.push(t);return i}function l(e){return o(e,function(e){var t="";return e>65535&&(e-=65536,t+=N(e>>>10&1023|55296),e=56320|1023&e),t+=N(e)}).join("")}function c(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:k}function u(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function d(e,t,n){var i=0;for(e=n?O(e/E):e>>1,e+=O(e/t);e>L*S>>1;i+=k)e=O(e/L);return O(i+(L+1)*e/(e+C))}function h(e){var t,n,i,o,s,a,u,h,f,p,m=[],g=e.length,v=0,b=R,y=I;for(n=e.lastIndexOf(T),0>n&&(n=0),i=0;n>i;++i)e.charCodeAt(i)>=128&&r("not-basic"),m.push(e.charCodeAt(i));for(o=n>0?n+1:0;g>o;){for(s=v,a=1,u=k;o>=g&&r("invalid-input"),h=c(e.charCodeAt(o++)),(h>=k||h>O((x-v)/a))&&r("overflow"),v+=h*a,f=y>=u?_:u>=y+S?S:u-y,!(f>h);u+=k)p=k-f,a>O(x/p)&&r("overflow"),a*=p;t=m.length+1,y=d(v-s,t,0==s),O(v/t)>x-b&&r("overflow"),b+=O(v/t),v%=t,m.splice(v++,0,b)}return l(m)}function f(e){var t,n,i,o,s,l,c,h,f,p,m,g,v,b,y,w=[];for(e=a(e),g=e.length,t=R,n=0,s=I,l=0;g>l;++l)m=e[l],128>m&&w.push(N(m));for(i=o=w.length,o&&w.push(T);g>i;){for(c=x,l=0;g>l;++l)m=e[l],m>=t&&c>m&&(c=m);for(v=i+1,c-t>O((x-n)/v)&&r("overflow"),n+=(c-t)*v,t=c,l=0;g>l;++l)if(m=e[l],t>m&&++n>x&&r("overflow"),m==t){for(h=n,f=k;p=s>=f?_:f>=s+S?S:f-s,!(p>h);f+=k)y=h-p,b=k-p,w.push(N(u(p+y%b,0))),h=O(y/b);w.push(N(u(h,0))),s=d(n,v,i==o),n=0,++i}++n,++t}return w.join("")}function p(e){return s(e,function(e){return A.test(e)?h(e.slice(4).toLowerCase()):e})}function m(e){return s(e,function(e){return M.test(e)?"xn--"+f(e):e})}var g="object"==typeof n&&n&&!n.nodeType&&n,v="object"==typeof t&&t&&!t.nodeType&&t,b="object"==typeof e&&e;(b.global===b||b.window===b||b.self===b)&&(i=b);var y,w,x=2147483647,k=36,_=1,S=26,C=38,E=700,I=72,R=128,T="-",A=/^xn--/,M=/[^ -~]/,F=/[.。．｡]/g,V={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=k-_,O=Math.floor,N=String.fromCharCode;if(y={version:"1.4.1",ucs2:{decode:a,encode:l},decode:h,encode:f,toASCII:m,toUnicode:p},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return y});else if(g&&v)if(t.exports==g)v.exports=y;else for(w in y)y.hasOwnProperty(w)&&(g[w]=y[w]);else i.punycode=y}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],713:[function(e,t,n){(function(e){!function(e){if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof n)t.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else Q=e()}(function(){"use strict";function t(e){return function(){return Q.apply(e,arguments)}}function n(e){return e===Object(e)}function i(e){return"[object StopIteration]"===rt(e)||e instanceof W}function r(e,t){if(H&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(st)){for(var n=[],i=t;i;i=i.source)i.stack&&n.unshift(i.stack);n.unshift(e.stack);var r=n.join("\n"+st+"\n");e.stack=o(r)}}function o(e){for(var t=e.split("\n"),n=[],i=0;i<t.length;++i){var r=t[i];l(r)||s(r)||!r||n.push(r)}return n.join("\n")}function s(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function a(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var i=/.*@(.+):(\d+)$/.exec(e);return i?[i[1],Number(i[2])]:void 0}function l(e){var t=a(e);if(!t)return!1;var n=t[0],i=t[1];return n===q&&i>=K&&dt>=i}function c(){if(H)try{throw new Error}catch(e){var t=e.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],i=a(n);if(!i)return;return q=i[0],i[1]}}function u(e,t,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",new Error("").stack),e.apply(e,arguments)}}function d(e){return b(e)?e:y(e)?A(e):T(e)}function h(){function e(e){t=e,o.source=e,X(n,function(t,n){Y(function(){e.promiseDispatch.apply(e,n)})},void 0),n=void 0,i=void 0}var t,n=[],i=[],r=tt(h.prototype),o=tt(m.prototype);if(o.promiseDispatch=function(e,r,o){var s=J(arguments);n?(n.push(s),"when"===r&&o[1]&&i.push(o[1])):Y(function(){t.promiseDispatch.apply(t,s)})},o.valueOf=u(function(){if(n)return o;var e=v(t);return b(e)&&(t=e),e},"valueOf","inspect"),o.inspect=function(){return t?t.inspect():{state:"pending"}},d.longStackSupport&&H)try{throw new Error}catch(s){o.stack=s.stack.substring(s.stack.indexOf("\n")+1)}return r.promise=o,r.resolve=function(n){t||e(d(n))},r.fulfill=function(n){t||e(T(n))},r.reject=function(n){t||e(R(n))},r.notify=function(e){t||X(i,function(t,n){Y(function(){n(e)})},void 0)},r}function f(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=h();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function p(e){return f(function(t,n){for(var i=0,r=e.length;r>i;i++)d(e[i]).then(t,n)})}function m(e,t,n){void 0===t&&(t=function(e){return R(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var i=tt(m.prototype);if(i.promiseDispatch=function(n,r,o){var s;try{s=e[r]?e[r].apply(i,o):t.call(i,r,o)}catch(a){s=R(a)}n&&n(s)},i.inspect=n,n){var r=n();"rejected"===r.state&&(i.exception=r.reason),i.valueOf=u(function(){var e=n();return"pending"===e.state||"rejected"===e.state?i:e.value})}return i}function g(e,t,n,i){return d(e).then(t,n,i)}function v(e){if(b(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function b(e){return n(e)&&"function"==typeof e.promiseDispatch&&"function"==typeof e.inspect}function y(e){return n(e)&&"function"==typeof e.then}function w(e){return b(e)&&"pending"===e.inspect().state}function x(e){return!b(e)||"fulfilled"===e.inspect().state}function k(e){return b(e)&&"rejected"===e.inspect().state}function _(){ct||"undefined"==typeof window||window.Touch||!window.console||console.warn("[Q] Unhandled rejection reasons (should be empty):",at),ct=!0}function S(){for(var e=0;e<at.length;e++){var t=at[e];console.warn("Unhandled rejection reason:",t)}}function C(){at.length=0,lt.length=0,ct=!1,ut||(ut=!0,"undefined"!=typeof e&&e.on&&e.on("exit",S))}function E(e,t){ut&&(lt.push(e),at.push(t&&"undefined"!=typeof t.stack?t.stack:"(no stack) "+t),_())}function I(e){if(ut){var t=Z(lt,e);-1!==t&&(lt.splice(t,1),at.splice(t,1))}}function R(e){var t=m({when:function(t){return t&&I(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return E(t,e),t}function T(e){return m({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return it(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function A(e){var t=h();return Y(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function M(e){return m({isDef:function(){}},function(t,n){return $(e,t,n)},function(){return d(e).inspect()})}function F(e,t,n){return d(e).spread(t,n)}function V(e){return function(){function t(e,t){var s;if(ot){try{s=n[e](t)}catch(a){return R(a)}return s.done?s.value:g(s.value,r,o)}try{s=n[e](t)}catch(a){return i(a)?a.value:R(a)}return g(s,r,o)}var n=e.apply(this,arguments),r=t.bind(t,"next"),o=t.bind(t,"throw");return r()}}function L(e){d.done(d.async(e)())}function O(e){throw new W(e)}function N(e){return function(){return F([this,D(arguments)],function(t,n){return e.apply(t,n)})}}function $(e,t,n){return d(e).dispatch(t,n)}function D(e){return g(e,function(e){var t=0,n=h();return X(e,function(i,r,o){var s;b(r)&&"fulfilled"===(s=r.inspect()).state?e[o]=s.value:(++t,g(r,function(i){e[o]=i,0===--t&&n.resolve(e)},n.reject,function(e){n.notify({index:o,value:e})}))},void 0),0===t&&n.resolve(e),n.promise})}function P(e){return g(e,function(e){return e=et(e,d),g(D(et(e,function(e){return g(e,G,G)})),function(){return e})})}function j(e){return d(e).allSettled()}function B(e,t){return d(e).then(void 0,void 0,t)}function U(e,t){return d(e).nodeify(t)}var H=!1;try{throw new Error}catch(z){H=!!z.stack}var q,W,K=c(),G=function(){},Y=function(){function t(){for(;n.next;){n=n.next;var e=n.task;n.task=void 0;var i=n.domain;i&&(n.domain=void 0,i.enter());try{e()}catch(o){if(s)throw i&&i.exit(),setTimeout(t,0),i&&i.enter(),o;setTimeout(function(){throw o},0)}i&&i.exit()}r=!1}var n={task:void 0,next:null},i=n,r=!1,o=void 0,s=!1;if(Y=function(t){i=i.next={task:t,domain:s&&e.domain,next:null},r||(r=!0,o())},"undefined"!=typeof e&&e.nextTick)s=!0,o=function(){e.nextTick(t)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=function(){o=l,a.port1.onmessage=t,t()};var l=function(){a.port2.postMessage(0)};o=function(){setTimeout(t,0),l()}}else o=function(){setTimeout(t,0)};return Y}(),Q=Function.call,J=t(Array.prototype.slice),X=t(Array.prototype.reduce||function(e,t){var n=0,i=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=i)throw new TypeError}for(;i>n;n++)n in this&&(t=e(t,this[n],n));return t}),Z=t(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),et=t(Array.prototype.map||function(e,t){var n=this,i=[];return X(n,function(r,o,s){i.push(e.call(t,o,s,n))},void 0),i}),tt=Object.create||function(e){function t(){}return t.prototype=e,new t},nt=t(Object.prototype.hasOwnProperty),it=Object.keys||function(e){var t=[];for(var n in e)nt(e,n)&&t.push(n);return t},rt=t(Object.prototype.toString);W="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var ot;try{new Function("(function* (){ yield 1; })"),ot=!0}catch(z){ot=!1}var st="From previous event:";d.resolve=d,d.nextTick=Y,d.longStackSupport=!1,d.defer=h,h.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):e.resolve(arguments.length>2?J(arguments,1):n)}},d.promise=f,d.passByCopy=function(e){return e},m.prototype.passByCopy=function(){return this},d.join=function(e,t){return d(e).join(t)},m.prototype.join=function(e){return d([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},d.race=p,m.prototype.race=function(){return this.then(d.race)},d.makePromise=m,m.prototype.toString=function(){return"[object Promise]"},m.prototype.then=function(e,t,n){function i(t){try{return"function"==typeof e?e(t):t}catch(n){return R(n)}}function o(e){if("function"==typeof t){r(e,a);try{return t(e)}catch(n){return R(n)}}return R(e)}function s(e){return"function"==typeof n?n(e):e}var a=this,l=h(),c=!1;return Y(function(){a.promiseDispatch(function(e){c||(c=!0,l.resolve(i(e)))},"when",[function(e){c||(c=!0,l.resolve(o(e)))}])}),a.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=s(e)}catch(i){if(n=!0,!d.onerror)throw i;d.onerror(i)}n||l.notify(t)}]),l.promise},d.when=g,m.prototype.thenResolve=function(e){return this.then(function(){return e})},d.thenResolve=function(e,t){return d(e).thenResolve(t)},m.prototype.thenReject=function(e){return this.then(function(){throw e})},d.thenReject=function(e,t){return d(e).thenReject(t)},d.nearer=v,d.isPromise=b,d.isPromiseAlike=y,d.isPending=w,m.prototype.isPending=function(){return"pending"===this.inspect().state},d.isFulfilled=x,m.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},d.isRejected=k,m.prototype.isRejected=function(){return"rejected"===this.inspect().state};var at=[],lt=[],ct=!1,ut=!0;d.resetUnhandledRejections=C,d.getUnhandledReasons=function(){return at.slice()},d.stopUnhandledRejectionTracking=function(){C(),"undefined"!=typeof e&&e.on&&e.removeListener("exit",S),ut=!1},C(),d.reject=R,d.fulfill=T,d.master=M,d.spread=F,m.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},d.async=V,d.spawn=L,d["return"]=O,d.promised=N,d.dispatch=$,m.prototype.dispatch=function(e,t){var n=this,i=h();return Y(function(){n.promiseDispatch(i.resolve,e,t)}),i.promise},d.get=function(e,t){return d(e).dispatch("get",[t])},m.prototype.get=function(e){return this.dispatch("get",[e])},d.set=function(e,t,n){return d(e).dispatch("set",[t,n])},m.prototype.set=function(e,t){return this.dispatch("set",[e,t])},d.del=d["delete"]=function(e,t){return d(e).dispatch("delete",[t])},m.prototype.del=m.prototype["delete"]=function(e){return this.dispatch("delete",[e])},d.mapply=d.post=function(e,t,n){return d(e).dispatch("post",[t,n])},m.prototype.mapply=m.prototype.post=function(e,t){return this.dispatch("post",[e,t])},d.send=d.mcall=d.invoke=function(e,t){return d(e).dispatch("post",[t,J(arguments,2)])},m.prototype.send=m.prototype.mcall=m.prototype.invoke=function(e){return this.dispatch("post",[e,J(arguments,1)])},d.fapply=function(e,t){return d(e).dispatch("apply",[void 0,t])},m.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},d["try"]=d.fcall=function(e){return d(e).dispatch("apply",[void 0,J(arguments,1)])},m.prototype.fcall=function(){return this.dispatch("apply",[void 0,J(arguments)])},d.fbind=function(e){var t=d(e),n=J(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(J(arguments))])}},m.prototype.fbind=function(){var e=this,t=J(arguments);return function(){return e.dispatch("apply",[this,t.concat(J(arguments))])}},d.keys=function(e){return d(e).dispatch("keys",[])},m.prototype.keys=function(){return this.dispatch("keys",[])},d.all=D,m.prototype.all=function(){return D(this)},d.allResolved=u(P,"allResolved","allSettled"),m.prototype.allResolved=function(){return P(this)},d.allSettled=j,m.prototype.allSettled=function(){return this.then(function(e){return D(et(e,function(e){function t(){return e.inspect()}return e=d(e),e.then(t,t)}))})},d.fail=d["catch"]=function(e,t){return d(e).then(void 0,t)},m.prototype.fail=m.prototype["catch"]=function(e){return this.then(void 0,e)},d.progress=B,m.prototype.progress=function(e){return this.then(void 0,void 0,e)},d.fin=d["finally"]=function(e,t){return d(e)["finally"](t)},m.prototype.fin=m.prototype["finally"]=function(e){return e=d(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},d.done=function(e,t,n,i){return d(e).done(t,n,i)},m.prototype.done=function(t,n,i){var o=function(e){Y(function(){if(r(e,s),!d.onerror)throw e;d.onerror(e)})},s=t||n||i?this.then(t,n,i):this;"object"==typeof e&&e&&e.domain&&(o=e.domain.bind(o)),s.then(void 0,o)},d.timeout=function(e,t,n){return d(e).timeout(t,n)},m.prototype.timeout=function(e,t){var n=h(),i=setTimeout(function(){n.reject(new Error(t||"Timed out after "+e+" ms"))},e);return this.then(function(e){clearTimeout(i),n.resolve(e)},function(e){clearTimeout(i),n.reject(e)},n.notify),n.promise},d.delay=function(e,t){return void 0===t&&(t=e,e=void 0),d(e).delay(t)},m.prototype.delay=function(e){return this.then(function(t){var n=h();return setTimeout(function(){n.resolve(t)},e),n.promise})},d.nfapply=function(e,t){return d(e).nfapply(t)},m.prototype.nfapply=function(e){var t=h(),n=J(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},d.nfcall=function(e){var t=J(arguments,1);return d(e).nfapply(t)},m.prototype.nfcall=function(){var e=J(arguments),t=h();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},d.nfbind=d.denodeify=function(e){var t=J(arguments,1);return function(){var n=t.concat(J(arguments)),i=h();return n.push(i.makeNodeResolver()),d(e).fapply(n).fail(i.reject),i.promise}},m.prototype.nfbind=m.prototype.denodeify=function(){var e=J(arguments);return e.unshift(this),d.denodeify.apply(void 0,e)},d.nbind=function(e,t){var n=J(arguments,2);return function(){function i(){return e.apply(t,arguments)}var r=n.concat(J(arguments)),o=h();return r.push(o.makeNodeResolver()),d(i).fapply(r).fail(o.reject),o.promise}},m.prototype.nbind=function(){var e=J(arguments,0);return e.unshift(this),d.nbind.apply(void 0,e)},d.nmapply=d.npost=function(e,t,n){return d(e).npost(t,n)},m.prototype.nmapply=m.prototype.npost=function(e,t){var n=J(t||[]),i=h();return n.push(i.makeNodeResolver()),this.dispatch("post",[e,n]).fail(i.reject),i.promise},d.nsend=d.nmcall=d.ninvoke=function(e,t){var n=J(arguments,2),i=h();return n.push(i.makeNodeResolver()),d(e).dispatch("post",[t,n]).fail(i.reject),i.promise},m.prototype.nsend=m.prototype.nmcall=m.prototype.ninvoke=function(e){var t=J(arguments,1),n=h();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},d.nodeify=U,m.prototype.nodeify=function(e){return e?void this.then(function(t){Y(function(){e(null,t)})},function(t){Y(function(){e(t)})}):this};var dt=c();return d})}).call(this,e("_process"))},{_process:705}],714:[function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,o){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var c=e.length;l>0&&c>l&&(c=l);for(var u=0;c>u;++u){var d,h,f,p,m=e[u].replace(a,"%20"),g=m.indexOf(r);g>=0?(d=m.substr(0,g),h=m.substr(g+1)):(d=m,h=""),f=decodeURIComponent(d),p=decodeURIComponent(h),n(s,f)?i(s[f])?s[f].push(p):s[f]=[s[f],p]:s[f]=p}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],715:[function(e,t){"use strict";function n(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,s,a){return t=t||"&",s=s||"=",null===e&&(e=void 0),"object"==typeof e?n(o(e),function(o){var a=encodeURIComponent(i(o))+s;return r(e[o])?n(e[o],function(e){return a+encodeURIComponent(i(e))}).join(t):a+encodeURIComponent(i(e[o]))}).join(t):a?encodeURIComponent(i(a))+s+encodeURIComponent(i(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],716:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":714,"./encode":715}],717:[function(e,t){(function(e,n,i){"use strict";function r(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}function o(t,r){if(t>65536)throw new Error("requested too many random bytes");var o=new n.Uint8Array(t);t>0&&s.getRandomValues(o);var a=new i(o.buffer);return"function"==typeof r?e.nextTick(function(){r(null,a)}):a}var s=n.crypto||n.msCrypto;t.exports=s&&s.getRandomValues?o:r}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{_process:705,buffer:605}],718:[function(e,t){(function(e,n){!function(n){"use strict";function i(e,t,n,i){var r=Object.create((t||o).prototype),s=new p(i||[]);return r._invoke=d(e,n,s),r}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(i){return{type:"throw",arg:i}}}function o(){}function s(){}function a(){}function l(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function c(e){this.arg=e}function u(t){function n(e,i,o,s){var a=r(t[e],t,i);if("throw"!==a.type){var l=a.arg,u=l.value;return u instanceof c?Promise.resolve(u.arg).then(function(e){n("next",e,o,s)},function(e){n("throw",e,o,s)}):Promise.resolve(u).then(function(e){l.value=e,o(l)},s)}s(a.arg)}function i(e,t){function i(){return new Promise(function(i,r){n(e,t,i,r)})}return o=o?o.then(i,i):i()}"object"==typeof e&&e.domain&&(n=e.domain.bind(n));var o;this._invoke=i}function d(e,t,n){var i=S;return function(o,s){if(i===E)throw new Error("Generator is already running");if(i===I){if("throw"===o)throw s;return g()}for(;;){var a=n.delegate;if(a){if("return"===o||"throw"===o&&a.iterator[o]===v){n.delegate=null;var l=a.iterator["return"];if(l){var c=r(l,a.iterator,s);if("throw"===c.type){o="throw",s=c.arg;continue}}if("return"===o)continue}var c=r(a.iterator[o],a.iterator,s);if("throw"===c.type){n.delegate=null,o="throw",s=c.arg;continue}o="next",s=v;var u=c.arg;if(!u.done)return i=C,u;n[a.resultName]=u.value,n.next=a.nextLoc,n.delegate=null}if("next"===o)n.sent=n._sent=s;else if("throw"===o){if(i===S)throw i=I,s;n.dispatchException(s)&&(o="next",s=v)}else"return"===o&&n.abrupt("return",s);i=E;var c=r(e,t,n);if("normal"===c.type){i=n.done?I:C;var u={value:c.arg,done:n.done};if(c.arg!==R)return u;n.delegate&&"next"===o&&(s=v)}else"throw"===c.type&&(i=I,o="throw",s=c.arg)}}}function h(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(h,this),this.reset(!0)}function m(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function r(){for(;++n<e.length;)if(b.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=v,r.done=!0,r};return i.next=i}}return{next:g}}function g(){return{value:v,done:!0}}var v,b=Object.prototype.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},w=y.iterator||"@@iterator",x=y.toStringTag||"@@toStringTag",k="object"==typeof t,_=n.regeneratorRuntime;if(_)return void(k&&(t.exports=_));
_=n.regeneratorRuntime=k?t.exports:{},_.wrap=i;var S="suspendedStart",C="suspendedYield",E="executing",I="completed",R={},T=a.prototype=o.prototype;s.prototype=T.constructor=a,a.constructor=s,a[x]=s.displayName="GeneratorFunction",_.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return t?t===s||"GeneratorFunction"===(t.displayName||t.name):!1},_.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,x in e||(e[x]="GeneratorFunction")),e.prototype=Object.create(T),e},_.awrap=function(e){return new c(e)},l(u.prototype),_.async=function(e,t,n,r){var o=new u(i(e,t,n,r));return _.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},l(T),T[w]=function(){return this},T[x]="Generator",T.toString=function(){return"[object Generator]"},_.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},_.values=m,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,i){return o.type="throw",o.arg=e,n.next=t,!!i}if(this.done)throw e;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return t("end");if(r.tryLoc<=this.prev){var s=b.call(r,"catchLoc"),a=b.call(r,"finallyLoc");if(s&&a){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return t(r.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&b.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?this.next=r.finallyLoc:this.complete(o),R},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),f(n),R}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;f(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:m(e),resultName:t,nextLoc:n},R}}}("object"==typeof n?n:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:705}],719:[function(e,t){(function(e){function n(e){for(var t=[],n=0,i=0;n<e.length;n++,i+=8)t[i>>>5]|=e[n]<<24-i%32;return t}function i(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t}function r(e,t,n){for(var i=0;16>i;i++){var r=n+i,d=t[r];t[r]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}var b,y,w,x,k,_,S,C,E,I;_=b=e[0],S=y=e[1],C=w=e[2],E=x=e[3],I=k=e[4];var R;for(i=0;80>i;i+=1)R=b+t[n+h[i]]|0,R+=16>i?o(y,w,x)+g[0]:32>i?s(y,w,x)+g[1]:48>i?a(y,w,x)+g[2]:64>i?l(y,w,x)+g[3]:c(y,w,x)+g[4],R=0|R,R=u(R,p[i]),R=R+k|0,b=k,k=x,x=u(w,10),w=y,y=R,R=_+t[n+f[i]]|0,R+=16>i?c(S,C,E)+v[0]:32>i?l(S,C,E)+v[1]:48>i?a(S,C,E)+v[2]:64>i?s(S,C,E)+v[3]:o(S,C,E)+v[4],R=0|R,R=u(R,m[i]),R=R+I|0,_=I,I=E,E=u(C,10),C=S,S=R;R=e[1]+w+E|0,e[1]=e[2]+x+I|0,e[2]=e[3]+k+_|0,e[3]=e[4]+b+S|0,e[4]=e[0]+y+C|0,e[0]=R}function o(e,t,n){return e^t^n}function s(e,t,n){return e&t|~e&n}function a(e,t,n){return(e|~t)^n}function l(e,t,n){return e&n|t&~n}function c(e,t,n){return e^(t|~n)}function u(e,t){return e<<t|e>>>32-t}function d(t){var o=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof t&&(t=new e(t,"utf8"));var s=n(t),a=8*t.length,l=8*t.length;s[a>>>5]|=128<<24-a%32,s[(a+64>>>9<<4)+14]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8);for(var c=0;c<s.length;c+=16)r(o,s,c);for(c=0;5>c;c++){var u=o[c];o[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var d=i(o);return new e(d)}var h=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],p=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],g=[0,1518500249,1859775393,2400959708,2840853838],v=[1352829926,1548603684,1836072691,2053994217,0];t.exports=d}).call(this,e("buffer").Buffer)},{buffer:605}],720:[function(e,t){(function(e){function n(t,n){this._block=new e(t),this._finalSize=n,this._blockSize=t,this._len=0,this._s=0}n.prototype.update=function(t,n){"string"==typeof t&&(n=n||"utf8",t=new e(t,n));for(var i=this._len+=t.length,r=this._s||0,o=0,s=this._block;i>r;){for(var a=Math.min(t.length,o+this._blockSize-r%this._blockSize),l=a-o,c=0;l>c;c++)s[r%this._blockSize+c]=t[c+o];r+=l,o+=l,r%this._blockSize===0&&this._update(s)}return this._s=r,this},n.prototype.digest=function(e){var t=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),t%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(t,this._blockSize-4);var n=this._update(this._block)||this._hash();return e?n.toString(e):n},n.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=n}).call(this,e("buffer").Buffer)},{buffer:605}],721:[function(e,t,n){var n=t.exports=function(e){e=e.toLowerCase();var t=n[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};n.sha=e("./sha"),n.sha1=e("./sha1"),n.sha224=e("./sha224"),n.sha256=e("./sha256"),n.sha384=e("./sha384"),n.sha512=e("./sha512")},{"./sha":723,"./sha1":724,"./sha224":725,"./sha256":726,"./sha384":727,"./sha512":728}],722:[function(e,t,n){arguments[4][274][0].apply(n,arguments)},{dup:274}],723:[function(e,t){(function(n){function i(){this.init(),this._w=u,l.call(this,64,56)}function r(e){return e<<5|e>>>27}function o(e){return e<<30|e>>>2}function s(e,t,n,i){return 0===e?t&n|~t&i:2===e?t&n|t&i|n&i:t^n^i}var a=e("inherits"),l=e("./hash"),c=[1518500249,1859775393,-1894007588,-899497514],u=new Array(80);a(i,l),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},i.prototype._update=function(e){for(var t=this._w,n=0|this._a,i=0|this._b,a=0|this._c,l=0|this._d,u=0|this._e,d=0;16>d;++d)t[d]=e.readInt32BE(4*d);for(;80>d;++d)t[d]=t[d-3]^t[d-8]^t[d-14]^t[d-16];for(var h=0;80>h;++h){var f=~~(h/20),p=r(n)+s(f,i,a,l)+u+t[h]+c[f]|0;u=l,l=a,a=o(i),i=n,n=p}this._a=n+this._a|0,this._b=i+this._b|0,this._c=a+this._c|0,this._d=l+this._d|0,this._e=u+this._e|0},i.prototype._hash=function(){var e=new n(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},t.exports=i}).call(this,e("buffer").Buffer)},{"./hash":720,buffer:605,inherits:722}],724:[function(e,t){(function(n){function i(){this.init(),this._w=d,c.call(this,64,56)}function r(e){return e<<1|e>>>31}function o(e){return e<<5|e>>>27}function s(e){return e<<30|e>>>2}function a(e,t,n,i){return 0===e?t&n|~t&i:2===e?t&n|t&i|n&i:t^n^i}var l=e("inherits"),c=e("./hash"),u=[1518500249,1859775393,-1894007588,-899497514],d=new Array(80);l(i,c),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},i.prototype._update=function(e){for(var t=this._w,n=0|this._a,i=0|this._b,l=0|this._c,c=0|this._d,d=0|this._e,h=0;16>h;++h)t[h]=e.readInt32BE(4*h);for(;80>h;++h)t[h]=r(t[h-3]^t[h-8]^t[h-14]^t[h-16]);for(var f=0;80>f;++f){var p=~~(f/20),m=o(n)+a(p,i,l,c)+d+t[f]+u[p]|0;d=c,c=l,l=s(i),i=n,n=m}this._a=n+this._a|0,this._b=i+this._b|0,this._c=l+this._c|0,this._d=c+this._d|0,this._e=d+this._e|0},i.prototype._hash=function(){var e=new n(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},t.exports=i}).call(this,e("buffer").Buffer)},{"./hash":720,buffer:605,inherits:722}],725:[function(e,t){(function(n){function i(){this.init(),this._w=a,s.call(this,64,56)}var r=e("inherits"),o=e("./sha256"),s=e("./hash"),a=new Array(64);r(i,o),i.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},i.prototype._hash=function(){var e=new n(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},t.exports=i}).call(this,e("buffer").Buffer)},{"./hash":720,"./sha256":726,buffer:605,inherits:722}],726:[function(e,t){(function(n){function i(){this.init(),this._w=f,d.call(this,64,56)}function r(e,t,n){return n^e&(t^n)}function o(e,t,n){return e&t|n&(e|t)}function s(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function a(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function l(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function c(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}var u=e("inherits"),d=e("./hash"),h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],f=new Array(64);u(i,d),i.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},i.prototype._update=function(e){for(var t=this._w,n=0|this._a,i=0|this._b,u=0|this._c,d=0|this._d,f=0|this._e,p=0|this._f,m=0|this._g,g=0|this._h,v=0;16>v;++v)t[v]=e.readInt32BE(4*v);for(;64>v;++v)t[v]=c(t[v-2])+t[v-7]+l(t[v-15])+t[v-16]|0;for(var b=0;64>b;++b){var y=g+a(f)+r(f,p,m)+h[b]+t[b]|0,w=s(n)+o(n,i,u)|0;g=m,m=p,p=f,f=d+y|0,d=u,u=i,i=n,n=y+w|0}this._a=n+this._a|0,this._b=i+this._b|0,this._c=u+this._c|0,this._d=d+this._d|0,this._e=f+this._e|0,this._f=p+this._f|0,this._g=m+this._g|0,this._h=g+this._h|0},i.prototype._hash=function(){var e=new n(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},t.exports=i}).call(this,e("buffer").Buffer)},{"./hash":720,buffer:605,inherits:722}],727:[function(e,t){(function(n){function i(){this.init(),this._w=a,s.call(this,128,112)}var r=e("inherits"),o=e("./sha512"),s=e("./hash"),a=new Array(160);r(i,o),i.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},i.prototype._hash=function(){function e(e,n,i){t.writeInt32BE(e,i),t.writeInt32BE(n,i+4)}var t=new n(48);return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=i}).call(this,e("buffer").Buffer)},{"./hash":720,"./sha512":728,buffer:605,inherits:722}],728:[function(e,t){(function(n){function i(){this.init(),this._w=g,p.call(this,128,112)}function r(e,t,n){return n^e&(t^n)}function o(e,t,n){return e&t|n&(e|t)}function s(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function a(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function l(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function c(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function u(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function d(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function h(e,t){return t>>>0>e>>>0?1:0}var f=e("inherits"),p=e("./hash"),m=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],g=new Array(160);f(i,p),i.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},i.prototype._update=function(e){for(var t=this._w,n=0|this._ah,i=0|this._bh,f=0|this._ch,p=0|this._dh,g=0|this._eh,v=0|this._fh,b=0|this._gh,y=0|this._hh,w=0|this._al,x=0|this._bl,k=0|this._cl,_=0|this._dl,S=0|this._el,C=0|this._fl,E=0|this._gl,I=0|this._hl,R=0;32>R;R+=2)t[R]=e.readInt32BE(4*R),t[R+1]=e.readInt32BE(4*R+4);for(;160>R;R+=2){var T=t[R-30],A=t[R-30+1],M=l(T,A),F=c(A,T);T=t[R-4],A=t[R-4+1];var V=u(T,A),L=d(A,T),O=t[R-14],N=t[R-14+1],$=t[R-32],D=t[R-32+1],P=F+N|0,j=M+O+h(P,F)|0;P=P+L|0,j=j+V+h(P,L)|0,P=P+D|0,j=j+$+h(P,D)|0,t[R]=j,t[R+1]=P}for(var B=0;160>B;B+=2){j=t[B],P=t[B+1];var U=o(n,i,f),H=o(w,x,k),z=s(n,w),q=s(w,n),W=a(g,S),K=a(S,g),G=m[B],Y=m[B+1],Q=r(g,v,b),J=r(S,C,E),X=I+K|0,Z=y+W+h(X,I)|0;X=X+J|0,Z=Z+Q+h(X,J)|0,X=X+Y|0,Z=Z+G+h(X,Y)|0,X=X+P|0,Z=Z+j+h(X,P)|0;var et=q+H|0,tt=z+U+h(et,q)|0;y=b,I=E,b=v,E=C,v=g,C=S,S=_+X|0,g=p+Z+h(S,_)|0,p=f,_=k,f=i,k=x,i=n,x=w,w=X+et|0,n=Z+tt+h(w,X)|0}this._al=this._al+w|0,this._bl=this._bl+x|0,this._cl=this._cl+k|0,this._dl=this._dl+_|0,this._el=this._el+S|0,this._fl=this._fl+C|0,this._gl=this._gl+E|0,this._hl=this._hl+I|0,this._ah=this._ah+n+h(this._al,w)|0,this._bh=this._bh+i+h(this._bl,x)|0,this._ch=this._ch+f+h(this._cl,k)|0,this._dh=this._dh+p+h(this._dl,_)|0,this._eh=this._eh+g+h(this._el,S)|0,this._fh=this._fh+v+h(this._fl,C)|0,this._gh=this._gh+b+h(this._gl,E)|0,this._hh=this._hh+y+h(this._hl,I)|0},i.prototype._hash=function(){function e(e,n,i){t.writeInt32BE(e,i),t.writeInt32BE(n,i+4)}var t=new n(64);return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=i}).call(this,e("buffer").Buffer)},{"./hash":720,buffer:605,inherits:722}],729:[function(e,t){function n(){i.call(this)}t.exports=n;var i=e("events").EventEmitter,r=e("inherits");r(n,i),n.Readable=e("readable-stream/readable.js"),n.Writable=e("readable-stream/writable.js"),n.Duplex=e("readable-stream/duplex.js"),n.Transform=e("readable-stream/transform.js"),n.PassThrough=e("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function o(){u||(u=!0,e.end())}function s(){u||(u=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(l(),0===i.listenerCount(this,"error"))throw e}function l(){c.removeListener("data",n),e.removeListener("drain",r),c.removeListener("end",o),c.removeListener("close",s),c.removeListener("error",a),e.removeListener("error",a),c.removeListener("end",l),c.removeListener("close",l),e.removeListener("close",l)}var c=this;c.on("data",n),e.on("drain",r),e._isStdio||t&&t.end===!1||(c.on("end",o),c.on("close",s));var u=!1;return c.on("error",a),e.on("error",a),c.on("end",l),c.on("close",l),e.on("close",l),e.emit("pipe",c),e}},{events:660,inherits:730,"readable-stream/duplex.js":732,"readable-stream/passthrough.js":738,"readable-stream/readable.js":739,"readable-stream/transform.js":740,"readable-stream/writable.js":741}],730:[function(e,t,n){arguments[4][274][0].apply(n,arguments)},{dup:274}],731:[function(e,t,n){arguments[4][606][0].apply(n,arguments)},{dup:606}],732:[function(e,t){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":733}],733:[function(e,t){"use strict";function n(e){return this instanceof n?(l.call(this,e),c.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new n(e)}function i(){this.allowHalfOpen||this._writableState.ended||s(r,this)}function r(e){e.end()}var o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=n;var s=e("process-nextick-args"),a=e("core-util-is");a.inherits=e("inherits");var l=e("./_stream_readable"),c=e("./_stream_writable");a.inherits(n,l);for(var u=o(c.prototype),d=0;d<u.length;d++){var h=u[d];n.prototype[h]||(n.prototype[h]=c.prototype[h])}},{"./_stream_readable":735,"./_stream_writable":737,"core-util-is":618,inherits:730,"process-nextick-args":704}],734:[function(e,t){"use strict";function n(e){return this instanceof n?void i.call(this,e):new n(e)}t.exports=n;var i=e("./_stream_transform"),r=e("core-util-is");r.inherits=e("inherits"),r.inherits(n,i),n.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":736,"core-util-is":618,inherits:730}],735:[function(e,t){(function(n){"use strict";function i(e,t,n){return D?e.prependListener(t,n):void(e._events&&e._events[t]?I(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n))}function r(t,n){$=$||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof $&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(N||(N=e("string_decoder/").StringDecoder),this.decoder=new N(t.encoding),this.encoding=t.encoding)}function o(t){return $=$||e("./_stream_duplex"),this instanceof o?(this._readableState=new r(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),void R.call(this)):new o(t)}function s(e,t,n,i,r){var o=u(t,n);if(o)e.emit("error",o);else if(null===n)t.reading=!1,d(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!r){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&r){var l=new Error("stream.unshift() after end event");e.emit("error",l)}else{var c;!t.decoder||r||i||(n=t.decoder.write(n),c=!t.objectMode&&0===n.length),r||(t.reading=!1),c||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&h(e))),p(e,t)}else r||(t.reading=!1);return a(t)}function a(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function l(e){return e>=P?e=P:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function c(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=l(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function u(e,t){var n=null;return M.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function d(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,h(e)}}function h(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(O("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?E(f,e):f(e))}function f(e){O("emit readable"),e.emit("readable"),w(e)}function p(e,t){t.readingMore||(t.readingMore=!0,E(m,e,t))}function m(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(O("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;O("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&A(e,"data")&&(t.flowing=!0,w(e))}}function v(e){O("readable nexttick read 0"),e.read(0)}function b(e,t){t.resumeScheduled||(t.resumeScheduled=!0,E(y,e,t))}function y(e,t){t.reading||(O("resume read 0"),e.read(0)),t.resumeScheduled=!1,e.emit("resume"),w(e),t.flowing&&!t.reading&&e.read(0)}function w(e){var t=e._readableState;if(O("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function x(e,t){var n,i=t.buffer,r=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===i.length)return null;if(0===r)n=null;else if(s)n=i.shift();else if(!e||e>=r)n=o?i.join(""):1===i.length?i[0]:M.concat(i,r),i.length=0;else if(e<i[0].length){var a=i[0];n=a.slice(0,e),i[0]=a.slice(e)}else if(e===i[0].length)n=i.shift();else{n=o?"":F.allocUnsafe(e);for(var l=0,c=0,u=i.length;u>c&&e>l;c++){var d=i[0],h=Math.min(e-l,d.length);o?n+=d.slice(0,h):d.copy(n,l,0,h),h<d.length?i[0]=d.slice(h):i.shift(),l+=h}}return n}function k(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,E(_,t,e))}function _(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function S(e,t){for(var n=0,i=e.length;i>n;n++)t(e[n],n)}function C(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}t.exports=o;var E=e("process-nextick-args"),I=e("isarray");o.ReadableState=r;var R,T=e("events").EventEmitter,A=function(e,t){return e.listeners(t).length};!function(){try{R=e("stream")}catch(t){}finally{R||(R=e("events").EventEmitter)}}();var M=e("buffer").Buffer,F=e("buffer-shims"),V=e("core-util-is");V.inherits=e("inherits");var L=e("util"),O=void 0;O=L&&L.debuglog?L.debuglog("stream"):function(){};var N;V.inherits(o,R);var $,$,D="function"==typeof T.prototype.prependListener;o.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding,t!==n.encoding&&(e=F.from(e,t),t="")),s(this,n,e,t,!1)},o.prototype.unshift=function(e){var t=this._readableState;return s(this,t,e,"",!0)},o.prototype.isPaused=function(){return this._readableState.flowing===!1},o.prototype.setEncoding=function(t){return N||(N=e("string_decoder/").StringDecoder),this._readableState.decoder=new N(t),this._readableState.encoding=t,this};var P=8388608;o.prototype.read=function(e){O("read",e);var t=this._readableState,n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return O("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?k(this):h(this),null;if(e=c(e,t),0===e&&t.ended)return 0===t.length&&k(this),null;var i=t.needReadable;O("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,O("length less than watermark",i)),(t.ended||t.reading)&&(i=!1,O("reading or ended",i)),i&&(O("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=c(n,t));var r;return r=e>0?x(e,t):null,null===r&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&k(this),null!==r&&this.emit("data",r),r},o.prototype._read=function(){this.emit("error",new Error("not implemented"))},o.prototype.pipe=function(e,t){function r(e){O("onunpipe"),e===h&&s()}function o(){O("onend"),e.end()}function s(){O("cleanup"),e.removeListener("close",c),e.removeListener("finish",u),e.removeListener("drain",v),e.removeListener("error",l),e.removeListener("unpipe",r),h.removeListener("end",o),h.removeListener("end",s),h.removeListener("data",a),b=!0,!f.awaitDrain||e._writableState&&!e._writableState.needDrain||v()}function a(t){O("ondata");var n=e.write(t);!1===n&&((1===f.pipesCount&&f.pipes===e||f.pipesCount>1&&-1!==C(f.pipes,e))&&!b&&(O("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++),h.pause())}function l(t){O("onerror",t),d(),e.removeListener("error",l),0===A(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",u),d()}function u(){O("onfinish"),e.removeListener("close",c),d()}function d(){O("unpipe"),h.unpipe(e)}var h=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e)}f.pipesCount+=1,O("pipe count=%d opts=%j",f.pipesCount,t);var p=(!t||t.end!==!1)&&e!==n.stdout&&e!==n.stderr,m=p?o:s;f.endEmitted?E(m):h.once("end",m),e.on("unpipe",r);var v=g(h);e.on("drain",v);var b=!1;return h.on("data",a),i(e,"error",l),e.once("close",c),e.once("finish",u),e.emit("pipe",h),f.flowing||(O("pipe resume"),h.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;i>r;r++)n[r].emit("unpipe",this);return this}var o=C(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},o.prototype.on=function(e,t){var n=R.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&!this._readableState.endEmitted){var i=this._readableState;i.readableListening||(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading?i.length&&h(this,i):E(v,this))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(O("resume"),e.flowing=!0,b(this,e)),this},o.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this._readableState,n=!1,i=this;e.on("end",function(){if(O("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&i.push(e)}i.push(null)}),e.on("data",function(r){if(O("wrapped data"),t.decoder&&(r=t.decoder.write(r)),(!t.objectMode||null!==r&&void 0!==r)&&(t.objectMode||r&&r.length)){var o=i.push(r);o||(n=!0,e.pause())}});for(var r in e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));var o=["error","close","destroy","pause","resume"];return S(o,function(t){e.on(t,i.emit.bind(i,t))}),i._read=function(t){O("wrapped _read",t),n&&(n=!1,e.resume())},i},o._fromList=x}).call(this,e("_process"))},{"./_stream_duplex":733,_process:705,buffer:605,"buffer-shims":603,"core-util-is":618,events:660,inherits:730,isarray:731,"process-nextick-args":704,"string_decoder/":742,util:574}],736:[function(e,t){"use strict";function n(e){this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,n){var i=e._transformState;i.transforming=!1;var r=i.writecb;if(!r)return e.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,null!==n&&void 0!==n&&e.push(n),r(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function r(e){if(!(this instanceof r))return new r(e);s.call(this,e),this._transformState=new n(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){o(t,e)}):o(t)})}function o(e,t){if(t)return e.emit("error",t);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=r;var s=e("./_stream_duplex"),a=e("core-util-is");a.inherits=e("inherits"),a.inherits(r,s),r.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},r.prototype._transform=function(){throw new Error("Not implemented")},r.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},r.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":733,"core-util-is":618,inherits:730}],737:[function(e,t){(function(n){"use strict";
function i(){}function r(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function o(t,n){A=A||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof A&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new k(this)}function s(t){return A=A||e("./_stream_duplex"),this instanceof s||this instanceof A?(this._writableState=new o(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),void E.call(this)):new s(t)}function a(e,t){var n=new Error("write after end");e.emit("error",n),_(t,n)}function l(e,t,n,i){var r=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):R.isBuffer(n)||"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),_(i,o),r=!1),r}function c(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=T.from(t,n)),t}function u(e,t,n,i,o){n=c(t,n,i),R.isBuffer(n)&&(i="buffer");var s=t.objectMode?1:n.length;t.length+=s;var a=t.length<t.highWaterMark;if(a||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest=new r(n,i,o),l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else d(e,t,!1,s,n,i,o);return a}function d(e,t,n,i,r,o,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function h(e,t,n,i,r){--t.pendingcb,n?_(r,i):r(i),e._writableState.errorEmitted=!0,e.emit("error",i)}function f(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if(f(n),t)h(e,n,i,t,r);else{var o=b(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||v(e,n),i?S(m,e,n,o,r):m(e,n,o,r)}}function m(e,t,n,i){n||g(e,t),t.pendingcb--,i(),w(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function v(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),o=t.corkedRequestsFree;o.entry=n;for(var s=0;n;)r[s]=n,n=n.next,s+=1;d(e,t,!0,t.length,r,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new k(t)}else{for(;n;){var a=n.chunk,l=n.encoding,c=n.callback,u=t.objectMode?1:a.length;if(d(e,t,!1,u,a,l,c),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function b(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function y(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function w(e,t){var n=b(t);return n&&(0===t.pendingcb?(y(e,t),t.finished=!0,e.emit("finish")):y(e,t)),n}function x(e,t,n){t.ending=!0,w(e,t),n&&(t.finished?_(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function k(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var i=t.entry;for(t.entry=null;i;){var r=i.callback;e.pendingcb--,r(n),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}t.exports=s;var _=e("process-nextick-args"),S=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:_;s.WritableState=o;var C=e("core-util-is");C.inherits=e("inherits");var E,I={deprecate:e("util-deprecate")};!function(){try{E=e("stream")}catch(t){}finally{E||(E=e("events").EventEmitter)}}();var R=e("buffer").Buffer,T=e("buffer-shims");C.inherits(s,E);var A;o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:I.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var A;s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},s.prototype.write=function(e,t,n){var r=this._writableState,o=!1;return"function"==typeof t&&(n=t,t=null),R.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=i),r.ended?a(this,n):l(this,r,e,n)&&(r.pendingcb++,o=u(this,r,e,t,n)),o},s.prototype.cork=function(){var e=this._writableState;e.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||v(this,e))},s.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},s.prototype._write=function(e,t,n){n(new Error("not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,t,n){var i=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||x(this,i,n)}}).call(this,e("_process"))},{"./_stream_duplex":733,_process:705,buffer:605,"buffer-shims":603,"core-util-is":618,events:660,inherits:730,"process-nextick-args":704,"util-deprecate":746}],738:[function(e,t){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":734}],739:[function(e,t,n){(function(i){var r=function(){try{return e("stream")}catch(t){}}();n=t.exports=e("./lib/_stream_readable.js"),n.Stream=r||n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),!i.browser&&"disable"===i.env.READABLE_STREAM&&r&&(t.exports=r)}).call(this,e("_process"))},{"./lib/_stream_duplex.js":733,"./lib/_stream_passthrough.js":734,"./lib/_stream_readable.js":735,"./lib/_stream_transform.js":736,"./lib/_stream_writable.js":737,_process:705}],740:[function(e,t){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":736}],741:[function(e,t){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":737}],742:[function(e,t,n){function i(e){if(e&&!l(e))throw new Error("Unknown encoding: "+e)}function r(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=e("buffer").Buffer,l=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),i(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=r)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=t.charCodeAt(t.length-1);if(!(i>=55296&&56319>=i)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived),t+=e.toString(this.encoding,0,r);var r=t.length-1,i=t.charCodeAt(r);if(i>=55296&&56319>=i){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,r)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(2>=t&&n>>4==14){this.charLength=3;break}if(3>=t&&n>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,i=this.charBuffer,r=this.encoding;t+=i.slice(0,n).toString(r)}return t}},{buffer:605}],743:[function(e,t,n){!function(e,i){"use strict";var r="0.7.10",o="",s="?",a="function",l="undefined",c="object",u="string",d="major",h="model",f="name",p="type",m="vendor",g="version",v="architecture",b="console",y="mobile",w="tablet",x="smarttv",k="wearable",_="embedded",S={extend:function(e,t){for(var n in t)-1!=="browser cpu device engine os".indexOf(n)&&t[n].length%2===0&&(e[n]=t[n].concat(e[n]));return e},has:function(e,t){return"string"==typeof e?-1!==t.toLowerCase().indexOf(e.toLowerCase()):!1},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===u?e.split(".")[0]:i}},C={rgx:function(){for(var e,t,n,r,o,s,u,d=0,h=arguments;d<h.length&&!s;){var f=h[d],p=h[d+1];if(typeof e===l){e={};for(r in p)p.hasOwnProperty(r)&&(o=p[r],typeof o===c?e[o[0]]=i:e[o]=i)}for(t=n=0;t<f.length&&!s;)if(s=f[t++].exec(this.getUA()))for(r=0;r<p.length;r++)u=s[++n],o=p[r],typeof o===c&&o.length>0?2==o.length?e[o[0]]=typeof o[1]==a?o[1].call(this,u):o[1]:3==o.length?e[o[0]]=typeof o[1]!==a||o[1].exec&&o[1].test?u?u.replace(o[1],o[2]):i:u?o[1].call(this,u,o[2]):i:4==o.length&&(e[o[0]]=u?o[3].call(this,u.replace(o[1],o[2])):i):e[o]=u?u:i;d+=2}return e},str:function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(S.has(t[n][r],e))return n===s?i:n}else if(S.has(t[n],e))return n===s?i:n;return e}},E={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},I={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[f,g],[/\s(opr)\/([\w\.]+)/i],[[f,"Opera"],g],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[f,g],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[f,"IE"],g],[/(edge)\/((\d+)?[\w\.]+)/i],[f,g],[/(yabrowser)\/([\w\.]+)/i],[[f,"Yandex"],g],[/(comodo_dragon)\/([\w\.]+)/i],[[f,/_/g," "],g],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[f,g],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[[f,"UCBrowser"],g],[/(dolfin)\/([\w\.]+)/i],[[f,"Dolphin"],g],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[f,"Chrome"],g],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[g,[f,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[g,[f,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[g,[f,"Facebook"]],[/fxios\/([\w\.-]+)/i],[g,[f,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[g,[f,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[g,f],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[f,[g,C.str,E.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[f,g],[/(navigator|netscape)\/([\w\.-]+)/i],[[f,"Netscape"],g],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[f,g]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,S.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[v,/ower/,"",S.lowerize]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[v,S.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[h,m,[p,w]],[/applecoremedia\/[\w\.]+ \((ipad)/],[h,[m,"Apple"],[p,w]],[/(apple\s{0,1}tv)/i],[[h,"Apple TV"],[m,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[m,h,[p,w]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[h,[m,"Amazon"],[p,w]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[h,C.str,E.device.amazon.model],[m,"Amazon"],[p,y]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[h,m,[p,y]],[/\((ip[honed|\s\w*]+);/i],[h,[m,"Apple"],[p,y]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[m,h,[p,y]],[/\(bb10;\s(\w+)/i],[h,[m,"BlackBerry"],[p,y]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[h,[m,"Asus"],[p,w]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[m,"Sony"],[h,"Xperia Tablet"],[p,w]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[m,"Sony"],[h,"Xperia Phone"],[p,y]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[m,h,[p,b]],[/android.+;\s(shield)\sbuild/i],[h,[m,"Nvidia"],[p,b]],[/(playstation\s[34portablevi]+)/i],[h,[m,"Sony"],[p,b]],[/(sprint\s(\w+))/i],[[m,C.str,E.device.sprint.vendor],[h,C.str,E.device.sprint.model],[p,y]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[m,h,[p,w]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[m,[h,/_/g," "],[p,y]],[/(nexus\s9)/i],[h,[m,"HTC"],[p,w]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[h,[m,"Microsoft"],[p,b]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[m,"Microsoft"],[p,y]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],[h,[m,"Motorola"],[p,y]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[h,[m,"Motorola"],[p,w]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[m,"Samsung"],h,[p,w]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[m,"Samsung"],h,[p,y]],[/(samsung);smarttv/i],[m,h,[p,x]],[/\(dtv[\);].+(aquos)/i],[h,[m,"Sharp"],[p,x]],[/sie-(\w+)*/i],[h,[m,"Siemens"],[p,y]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[m,"Nokia"],h,[p,y]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[h,[m,"Acer"],[p,w]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[m,"LG"],h,[p,w]],[/(lg) netcast\.tv/i],[m,h,[p,x]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[h,[m,"LG"],[p,y]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[h,[m,"Lenovo"],[p,w]],[/linux;.+((jolla));/i],[m,h,[p,y]],[/((pebble))app\/[\d\.]+\s/i],[m,h,[p,k]],[/android.+;\s(glass)\s\d/i],[h,[m,"Google"],[p,k]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[h,/_/g," "],[m,"Xiaomi"],[p,y]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[[p,S.lowerize],m,h]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[g,[f,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[f,g],[/rv\:([\w\.]+).*(gecko)/i],[g,f]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[f,g],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[f,[g,C.str,E.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[f,"Windows"],[g,C.str,E.os.windows.version]],[/\((bb)(10);/i],[[f,"BlackBerry"],g],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[f,g],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[f,"Symbian"],g],[/\((series40);/i],[f],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[f,"Firefox OS"],g],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[f,g],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[f,"Chromium OS"],g],[/(sunos)\s?([\w\.]+\d)*/i],[[f,"Solaris"],g],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[f,g],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[f,"iOS"],[g,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[f,"Mac OS"],[g,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[f,g]]},R=function(t,n){if(!(this instanceof R))return new R(t,n).getResult();var i=t||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:o),r=n?S.extend(I,n):I;return this.getBrowser=function(){var e=C.rgx.apply(this,r.browser);return e.major=S.major(e.version),e},this.getCPU=function(){return C.rgx.apply(this,r.cpu)},this.getDevice=function(){return C.rgx.apply(this,r.device)},this.getEngine=function(){return C.rgx.apply(this,r.engine)},this.getOS=function(){return C.rgx.apply(this,r.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=e,this},this.setUA(i),this};R.VERSION=r,R.BROWSER={NAME:f,MAJOR:d,VERSION:g},R.CPU={ARCHITECTURE:v},R.DEVICE={MODEL:h,VENDOR:m,TYPE:p,CONSOLE:b,MOBILE:y,SMARTTV:x,TABLET:w,WEARABLE:k,EMBEDDED:_},R.ENGINE={NAME:f,VERSION:g},R.OS={NAME:f,VERSION:g},typeof n!==l?(typeof t!==l&&t.exports&&(n=t.exports=R),n.UAParser=R):typeof define===a&&define.amd?define(function(){return R}):e.UAParser=R;var T=e.jQuery||e.Zepto;if(typeof T!==l){var A=new R;T.ua=A.getResult(),T.ua.get=function(){return A.getUA()},T.ua.set=function(e){A.setUA(e);var t=A.getResult();for(var n in t)T.ua[n]=t[n]}}}("object"==typeof window?window:this)},{}],744:[function(e,t,n){"use strict";function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(e,t,n){if(e&&c.isObject(e)&&e instanceof i)return e;var r=new i;return r.parse(e,t,n),r}function o(e){return c.isString(e)&&(e=r(e)),e instanceof i?e.format():i.prototype.format.call(e)}function s(e,t){return r(e,!1,!0).resolve(t)}function a(e,t){return e?r(e,!1,!0).resolveObject(t):t}var l=e("punycode"),c=e("./util");n.parse=r,n.resolve=s,n.resolveObject=a,n.format=o,n.Url=i;var u=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r","\n","	"],p=["{","}","|","\\","^","`"].concat(f),m=["'"].concat(p),g=["%","/","?",";","#"].concat(m),v=["/","?","#"],b=255,y=/^[+a-z0-9A-Z_-]{0,63}$/,w=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},k={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=e("querystring");i.prototype.parse=function(e,t,n){if(!c.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),r=-1!==i&&i<e.indexOf("#")?"?":"#",o=e.split(r),s=/\\/g;o[0]=o[0].replace(s,"/"),e=o.join(r);var a=e;if(a=a.trim(),!n&&1===e.split("#").length){var d=h.exec(a);if(d)return this.path=a,this.href=a,this.pathname=d[1],d[2]?(this.search=d[2],this.query=t?S.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var f=u.exec(a);if(f){f=f[0];var p=f.toLowerCase();this.protocol=p,a=a.substr(f.length)}if(n||f||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var C="//"===a.substr(0,2);!C||f&&k[f]||(a=a.substr(2),this.slashes=!0)}if(!k[f]&&(C||f&&!_[f])){for(var E=-1,I=0;I<v.length;I++){var R=a.indexOf(v[I]);-1!==R&&(-1===E||E>R)&&(E=R)}var T,A;A=-1===E?a.lastIndexOf("@"):a.lastIndexOf("@",E),-1!==A&&(T=a.slice(0,A),a=a.slice(A+1),this.auth=decodeURIComponent(T)),E=-1;for(var I=0;I<g.length;I++){var R=a.indexOf(g[I]);-1!==R&&(-1===E||E>R)&&(E=R)}-1===E&&(E=a.length),this.host=a.slice(0,E),a=a.slice(E),this.parseHost(),this.hostname=this.hostname||"";var M="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!M)for(var F=this.hostname.split(/\./),I=0,V=F.length;V>I;I++){var L=F[I];if(L&&!L.match(y)){for(var O="",N=0,$=L.length;$>N;N++)O+=L.charCodeAt(N)>127?"x":L[N];if(!O.match(y)){var D=F.slice(0,I),P=F.slice(I+1),j=L.match(w);j&&(D.push(j[1]),P.unshift(j[2])),P.length&&(a="/"+P.join(".")+a),this.hostname=D.join(".");break}}}this.hostname=this.hostname.length>b?"":this.hostname.toLowerCase(),M||(this.hostname=l.toASCII(this.hostname));var B=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+B,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!x[p])for(var I=0,V=m.length;V>I;I++){var H=m[I];if(-1!==a.indexOf(H)){var z=encodeURIComponent(H);z===H&&(z=escape(H)),a=a.split(H).join(z)}}var q=a.indexOf("#");-1!==q&&(this.hash=a.substr(q),a=a.slice(0,q));var W=a.indexOf("?");if(-1!==W?(this.search=a.substr(W),this.query=a.substr(W+1),t&&(this.query=S.parse(this.query)),a=a.slice(0,W)):t&&(this.search="",this.query={}),a&&(this.pathname=a),_[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",K=this.search||"";this.path=B+K}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",i=this.hash||"",r=!1,o="";this.host?r=e+this.host:this.hostname&&(r=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(o=S.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||_[t])&&r!==!1?(r="//"+(r||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):r||(r=""),i&&"#"!==i.charAt(0)&&(i="#"+i),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+r+n+s+i},i.prototype.resolve=function(e){return this.resolveObject(r(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(c.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var n=new i,r=Object.keys(this),o=0;o<r.length;o++){var s=r[o];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),l=0;l<a.length;l++){var u=a[l];"protocol"!==u&&(n[u]=e[u])}return _[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!_[e.protocol]){for(var d=Object.keys(e),h=0;h<d.length;h++){var f=d[h];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||k[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",g=n.search||"";n.path=m+g}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),y=b||v||n.host&&e.pathname,w=y,x=n.pathname&&n.pathname.split("/")||[],p=e.pathname&&e.pathname.split("/")||[],S=n.protocol&&!_[n.protocol];if(S&&(n.hostname="",n.port=null,n.host&&(""===x[0]?x[0]=n.host:x.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),y=y&&(""===p[0]||""===x[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,x=p;else if(p.length)x||(x=[]),x.pop(),x=x.concat(p),n.search=e.search,n.query=e.query;else if(!c.isNullOrUndefined(e.search)){if(S){n.hostname=n.host=x.shift();var C=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;C&&(n.auth=C.shift(),n.host=n.hostname=C.shift())}return n.search=e.search,n.query=e.query,c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!x.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var E=x.slice(-1)[0],I=(n.host||e.host||x.length>1)&&("."===E||".."===E)||""===E,R=0,T=x.length;T>=0;T--)E=x[T],"."===E?x.splice(T,1):".."===E?(x.splice(T,1),R++):R&&(x.splice(T,1),R--);if(!y&&!w)for(;R--;R)x.unshift("..");!y||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),I&&"/"!==x.join("/").substr(-1)&&x.push("");var A=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(S){n.hostname=n.host=A?"":x.length?x.shift():"";var C=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;C&&(n.auth=C.shift(),n.host=n.hostname=C.shift())}return y=y||n.host&&x.length,y&&!A&&x.unshift(""),x.length?n.pathname=x.join("/"):(n.pathname=null,n.path=null),c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":745,punycode:712,querystring:716}],745:[function(e,t){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],746:[function(e,t){(function(e){function n(e,t){function n(){if(!r){if(i("throwDeprecation"))throw new Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}if(i("noDeprecation"))return e;var r=!1;return n}function i(t){try{if(!e.localStorage)return!1}catch(n){return!1}var i=e.localStorage[t];return null==i?!1:"true"===String(i).toLowerCase()}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],747:[function(e,t,n){arguments[4][274][0].apply(n,arguments)},{dup:274}],748:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],749:[function(e,t,n){(function(t,i){function r(e,t){var i={seen:[],stylize:s};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),m(t)?i.showHidden=t:t&&n._extend(i,t),x(i.showHidden)&&(i.showHidden=!1),x(i.depth)&&(i.depth=2),x(i.colors)&&(i.colors=!1),x(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),l(i,e,i.depth)}function o(e,t){var n=r.styles[t];return n?"["+r.colors[n][0]+"m"+e+"["+r.colors[n][1]+"m":e}function s(e){return e}function a(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function l(e,t,i){if(e.customInspect&&t&&E(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(i,e);return y(r)||(r=l(e,r,i)),r}var o=c(e,t);if(o)return o;var s=Object.keys(t),m=a(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),C(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(t);if(0===s.length){if(E(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(k(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(S(t))return e.stylize(Date.prototype.toString.call(t),"date");if(C(t))return u(t)}var v="",b=!1,w=["{","}"];if(p(t)&&(b=!0,w=["[","]"]),E(t)){var x=t.name?": "+t.name:"";v=" [Function"+x+"]"}if(k(t)&&(v=" "+RegExp.prototype.toString.call(t)),S(t)&&(v=" "+Date.prototype.toUTCString.call(t)),C(t)&&(v=" "+u(t)),0===s.length&&(!b||0==t.length))return w[0]+v+w[1];if(0>i)return k(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var _;return _=b?d(e,t,i,m,s):s.map(function(n){return h(e,t,i,m,n,b)}),e.seen.pop(),f(_,v,w)}function c(e,t){if(x(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return b(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,i,r){for(var o=[],s=0,a=t.length;a>s;++s)o.push(M(t,String(s))?h(e,t,n,i,String(s),!0):"");return r.forEach(function(r){r.match(/^\d+$/)||o.push(h(e,t,n,i,r,!0))}),o}function h(e,t,n,i,r,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]},c.get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),M(i,r)||(s="["+r+"]"),a||(e.seen.indexOf(c.value)<0?(a=g(n)?l(e,c.value,null):l(e,c.value,n-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special")),x(s)){if(o&&r.match(/^\d+$/))return a;s=JSON.stringify(""+r),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function f(e,t,n){var i=0,r=e.reduce(function(e,t){return i++,t.indexOf("\n")>=0&&i++,e+t.replace(/\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function p(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return null==e}function b(e){return"number"==typeof e}function y(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function x(e){return void 0===e}function k(e){return _(e)&&"[object RegExp]"===R(e)}function _(e){return"object"==typeof e&&null!==e}function S(e){return _(e)&&"[object Date]"===R(e)}function C(e){return _(e)&&("[object Error]"===R(e)||e instanceof Error)}function E(e){return"function"==typeof e}function I(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function R(e){return Object.prototype.toString.call(e)
}function T(e){return 10>e?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),O[e.getMonth()],t].join(" ")}function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var F=/%[sdj%]/g;n.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(r(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,o=i.length,s=String(e).replace(F,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return e}}),a=i[n];o>n;a=i[++n])s+=g(a)||!_(a)?" "+a:" "+r(a);return s},n.deprecate=function(e,r){function o(){if(!s){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),s=!0}return e.apply(this,arguments)}if(x(i.process))return function(){return n.deprecate(e,r).apply(this,arguments)};if(t.noDeprecation===!0)return e;var s=!1;return o};var V,L={};n.debuglog=function(e){if(x(V)&&(V=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!L[e])if(new RegExp("\\b"+e+"\\b","i").test(V)){var i=t.pid;L[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,i,t)}}else L[e]=function(){};return L[e]},n.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=p,n.isBoolean=m,n.isNull=g,n.isNullOrUndefined=v,n.isNumber=b,n.isString=y,n.isSymbol=w,n.isUndefined=x,n.isRegExp=k,n.isObject=_,n.isDate=S,n.isError=C,n.isFunction=E,n.isPrimitive=I,n.isBuffer=e("./support/isBuffer");var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",A(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!_(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":748,_process:705,inherits:747}],750:[function(e,t,n){!function(e,i){"undefined"!=typeof n&&"undefined"!=typeof t?t.exports=i():"function"==typeof define&&"object"==typeof define.amd?define(i):this[e]=i()}("validator",function(e){"use strict";function t(e,t){e=e||{};for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}function n(e){var t="(\\"+e.symbol.replace(/\./g,"\\.")+")"+(e.require_symbol?"":"?"),n="-?",i="[1-9]\\d*",r="[1-9]\\d{0,2}(\\"+e.thousands_separator+"\\d{3})*",o=["0",i,r],s="("+o.join("|")+")?",a="(\\"+e.decimal_separator+"\\d{2})?",l=s+a;return e.allow_negatives&&!e.parens_for_negatives&&(e.negative_sign_after_digits?l+=n:e.negative_sign_before_digits&&(l=n+l)),e.allow_negative_sign_placeholder?l="( (?!\\-))?"+l:e.allow_space_after_symbol?l=" ?"+l:e.allow_space_after_digits&&(l+="( (?!$))?"),e.symbol_after_digits?l+=t:l=t+l,e.allow_negatives&&(e.parens_for_negatives?l="(\\("+l+"\\)|"+l+")":e.negative_sign_before_digits||e.negative_sign_after_digits||(l=n+l)),new RegExp("^(?!-? )(?=.*\\d)"+l+"$")}e={version:"3.40.1"};var i=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~])+)*)|((")(((( |	)*(\x0d\x0a))?( |	)+)?(([--]|!|[#-[]|[]-~])|(\\[-	\x0d-])))*((( |	)*(\x0d\x0a))?( |	)+)?(")))$/i,r=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[ -퟿豈-﷏ﷰ-￯])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[ -퟿豈-﷏ﷰ-￯])+)*)|((")(((( |	)*(\x0d\x0a))?( |	)+)?(([--]|!|[#-[]|[]-~]|[ -퟿豈-﷏ﷰ-￯])|(\\([-	\x0d-]|[ -퟿豈-﷏ﷰ-￯]))))*((( |	)*(\x0d\x0a))?( |	)+)?(")))$/i,o=/^(?:[a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~\.]|[ -퟿豈-﷏ﷰ-￯])+(?:[a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~\.]|[ -퟿豈-﷏ﷰ-￯]|\s)*<(.+)>$/i,s=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,a=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/,l=/^(?:[0-9]{9}X|[0-9]{10})$/,c=/^(?:[0-9]{13})$/,u=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/,d=/^[0-9A-F]{1,4}$/i,h={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i},f=/^[A-Z]+$/i,p=/^[0-9A-Z]+$/i,m=/^[-+]?[0-9]+$/,g=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,v=/^(?:[-+]?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/,b=/^[0-9A-F]+$/i,y=/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i,w=/^[ -]+$/,x=/[^ -]/,k=/[^ -~｡-ﾟﾠ-ￜ￨-￮0-9a-zA-Z]/,_=/[ -~｡-ﾟﾠ-ￜ￨-￮0-9a-zA-Z]/,S=/[�-�][�-�]/,C=/^(?:[A-Z0-9+\/]{4})*(?:[A-Z0-9+\/]{2}==|[A-Z0-9+\/]{3}=|[A-Z0-9+\/]{4})$/i,E={"zh-CN":/^(\+?0?86\-?)?1[345789]\d{9}$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-HK":/^(\+?852\-?)?[569]\d{3}\-?\d{4}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"pt-PT":/^(\+351)?9[1236]\d{7}$/,"el-GR":/^(\+30)?((2\d{9})|(69\d{8}))$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-US":/^(\+?1)?[2-9]\d{2}[2-9](?!11)\d{6}$/,"en-ZM":/^(\+26)?09[567]\d{7}$/};e.extend=function(t,n){e[t]=function(){var t=Array.prototype.slice.call(arguments);return t[0]=e.toString(t[0]),n.apply(e,t)}},e.init=function(){for(var t in e)"function"==typeof e[t]&&"toString"!==t&&"toDate"!==t&&"extend"!==t&&"init"!==t&&e.extend(t,e[t])},e.toString=function(e){return"object"==typeof e&&null!==e&&e.toString?e=e.toString():null===e||"undefined"==typeof e||isNaN(e)&&!e.length?e="":"string"!=typeof e&&(e+=""),e},e.toDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)?e:(e=Date.parse(e),isNaN(e)?null:new Date(e))},e.toFloat=function(e){return parseFloat(e)},e.toInt=function(e,t){return parseInt(e,t||10)},e.toBoolean=function(e,t){return t?"1"===e||"true"===e:"0"!==e&&"false"!==e&&""!==e},e.equals=function(t,n){return t===e.toString(n)},e.contains=function(t,n){return t.indexOf(e.toString(n))>=0},e.matches=function(e,t,n){return"[object RegExp]"!==Object.prototype.toString.call(t)&&(t=new RegExp(t,n)),t.test(e)};var I={allow_display_name:!1,allow_utf8_local_part:!0,require_tld:!0};e.isEmail=function(n,s){if(s=t(s,I),s.allow_display_name){var a=n.match(o);a&&(n=a[1])}else if(/\s/.test(n))return!1;var l=n.split("@"),c=l.pop(),u=l.join("@");return e.isFQDN(c,{require_tld:s.require_tld})?s.allow_utf8_local_part?r.test(u):i.test(u):!1};var R={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1};e.isURL=function(n,i){if(!n||n.length>=2083||/\s/.test(n))return!1;if(0===n.indexOf("mailto:"))return!1;i=t(i,R);var r,o,s,a,l,c,u;if(u=n.split("://"),u.length>1){if(r=u.shift(),-1===i.protocols.indexOf(r))return!1}else{if(i.require_protocol)return!1;i.allow_protocol_relative_urls&&"//"===n.substr(0,2)&&(u[0]=n.substr(2))}return n=u.join("://"),u=n.split("#"),n=u.shift(),u=n.split("?"),n=u.shift(),u=n.split("/"),n=u.shift(),u=n.split("@"),u.length>1&&(o=u.shift(),o.indexOf(":")>=0&&o.split(":").length>2)?!1:(a=u.join("@"),u=a.split(":"),s=u.shift(),u.length&&(c=u.join(":"),l=parseInt(c,10),!/^[0-9]+$/.test(c)||0>=l||l>65535)?!1:e.isIP(s)||e.isFQDN(s,i)||"localhost"===s?i.host_whitelist&&-1===i.host_whitelist.indexOf(s)?!1:i.host_blacklist&&-1!==i.host_blacklist.indexOf(s)?!1:!0:!1)},e.isIP=function(t,n){if(n=e.toString(n),!n)return e.isIP(t,4)||e.isIP(t,6);if("4"===n){if(!u.test(t))return!1;var i=t.split(".").sort(function(e,t){return e-t});return i[3]<=255}if("6"===n){var r=t.split(":"),o=!1,s=e.isIP(r[r.length-1],4),a=s?7:8;if(r.length>a)return!1;if("::"===t)return!0;"::"===t.substr(0,2)?(r.shift(),r.shift(),o=!0):"::"===t.substr(t.length-2)&&(r.pop(),r.pop(),o=!0);for(var l=0;l<r.length;++l)if(""===r[l]&&l>0&&l<r.length-1){if(o)return!1;o=!0}else if(s&&l==r.length-1);else if(!d.test(r[l]))return!1;return o?r.length>=1:r.length===a}return!1};var T={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1};e.isFQDN=function(e,n){n=t(n,T),n.allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));var i=e.split(".");if(n.require_tld){var r=i.pop();if(!i.length||!/^([a-z¡-￿]{2,}|xn[a-z0-9-]{2,})$/i.test(r))return!1}for(var o,s=0;s<i.length;s++){if(o=i[s],n.allow_underscores){if(o.indexOf("__")>=0)return!1;o=o.replace(/_/g,"")}if(!/^[a-z¡-￿0-9-]+$/i.test(o))return!1;if("-"===o[0]||"-"===o[o.length-1]||o.indexOf("---")>=0)return!1}return!0},e.isBoolean=function(e){return["true","false","1","0"].indexOf(e)>=0},e.isAlpha=function(e){return f.test(e)},e.isAlphanumeric=function(e){return p.test(e)},e.isNumeric=function(e){return m.test(e)},e.isHexadecimal=function(e){return b.test(e)},e.isHexColor=function(e){return y.test(e)},e.isLowercase=function(e){return e===e.toLowerCase()},e.isUppercase=function(e){return e===e.toUpperCase()},e.isInt=function(e,t){return t=t||{},g.test(e)&&(!t.hasOwnProperty("min")||e>=t.min)&&(!t.hasOwnProperty("max")||e<=t.max)},e.isFloat=function(e,t){return t=t||{},""!==e&&v.test(e)&&(!t.hasOwnProperty("min")||e>=t.min)&&(!t.hasOwnProperty("max")||e<=t.max)},e.isDivisibleBy=function(t,n){return e.toFloat(t)%e.toInt(n)===0},e.isNull=function(e){return 0===e.length},e.isLength=function(e,t,n){var i=e.match(/[�-�][�-�]/g)||[],r=e.length-i.length;return r>=t&&("undefined"==typeof n||n>=r)},e.isByteLength=function(e,t,n){return e.length>=t&&("undefined"==typeof n||e.length<=n)},e.isUUID=function(e,t){var n=h[t?t:"all"];return n&&n.test(e)},e.isDate=function(e){return!isNaN(Date.parse(e))},e.isAfter=function(t,n){var i=e.toDate(n||new Date),r=e.toDate(t);return!!(r&&i&&r>i)},e.isBefore=function(t,n){var i=e.toDate(n||new Date),r=e.toDate(t);return r&&i&&i>r},e.isIn=function(t,n){var i;if("[object Array]"===Object.prototype.toString.call(n)){var r=[];for(i in n)r[i]=e.toString(n[i]);return r.indexOf(t)>=0}return"object"==typeof n?n.hasOwnProperty(t):n&&"function"==typeof n.indexOf?n.indexOf(t)>=0:!1},e.isCreditCard=function(e){var t=e.replace(/[^0-9]+/g,"");if(!s.test(t))return!1;for(var n,i,r,o=0,a=t.length-1;a>=0;a--)n=t.substring(a,a+1),i=parseInt(n,10),r?(i*=2,o+=i>=10?i%10+1:i):o+=i,r=!r;return!!(o%10===0?t:!1)},e.isISIN=function(e){if(!a.test(e))return!1;for(var t,n,i=e.replace(/[A-Z]/g,function(e){return parseInt(e,36)}),r=0,o=!0,s=i.length-2;s>=0;s--)t=i.substring(s,s+1),n=parseInt(t,10),o?(n*=2,r+=n>=10?n+1:n):r+=n,o=!o;return parseInt(e.substr(e.length-1),10)===(1e4-r)%10},e.isISBN=function(t,n){if(n=e.toString(n),!n)return e.isISBN(t,10)||e.isISBN(t,13);var i,r=t.replace(/[\s-]+/g,""),o=0;if("10"===n){if(!l.test(r))return!1;for(i=0;9>i;i++)o+=(i+1)*r.charAt(i);if(o+="X"===r.charAt(9)?100:10*r.charAt(9),o%11===0)return!!r}else if("13"===n){if(!c.test(r))return!1;var s=[1,3];for(i=0;12>i;i++)o+=s[i%2]*r.charAt(i);if(r.charAt(12)-(10-o%10)%10===0)return!!r}return!1},e.isMobilePhone=function(e,t){return t in E?E[t].test(e):!1};var A={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_space_after_digits:!1};e.isCurrency=function(e,i){return i=t(i,A),n(i).test(e)},e.isJSON=function(e){try{JSON.parse(e)}catch(t){return!1}return!0},e.isMultibyte=function(e){return x.test(e)},e.isAscii=function(e){return w.test(e)},e.isFullWidth=function(e){return k.test(e)},e.isHalfWidth=function(e){return _.test(e)},e.isVariableWidth=function(e){return k.test(e)&&_.test(e)},e.isSurrogatePair=function(e){return S.test(e)},e.isBase64=function(e){return C.test(e)},e.isMongoId=function(t){return e.isHexadecimal(t)&&24===t.length},e.ltrim=function(e,t){var n=t?new RegExp("^["+t+"]+","g"):/^\s+/g;return e.replace(n,"")},e.rtrim=function(e,t){var n=t?new RegExp("["+t+"]+$","g"):/\s+$/g;return e.replace(n,"")},e.trim=function(e,t){var n=t?new RegExp("^["+t+"]+|["+t+"]+$","g"):/^\s+|\s+$/g;return e.replace(n,"")},e.escape=function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\`/g,"&#96;")},e.stripLow=function(t,n){var i=n?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return e.blacklist(t,i)},e.whitelist=function(e,t){return e.replace(new RegExp("[^"+t+"]+","g"),"")},e.blacklist=function(e,t){return e.replace(new RegExp("["+t+"]+","g"),"")};var M={lowercase:!0};return e.normalizeEmail=function(n,i){if(i=t(i,M),!e.isEmail(n))return!1;var r=n.split("@",2);if(r[1]=r[1].toLowerCase(),"gmail.com"===r[1]||"googlemail.com"===r[1]){if(r[0]=r[0].toLowerCase().replace(/\./g,""),"+"===r[0][0])return!1;r[0]=r[0].split("+")[0],r[1]="gmail.com"}else i.lowercase&&(r[0]=r[0].toLowerCase());return r.join("@")},e.init(),e})},{}],751:[function(require,module,exports){function Context(){}var indexOf=require("indexof"),Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,n){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(e){return function(e,t,n){e[t]=n}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(e){return this instanceof Script?void(this.code=e):new Script(e)};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var n=t.contentWindow,i=n.eval,r=n.execScript;!i&&r&&(r.call(n,"null"),i=n.eval),forEach(Object_keys(e),function(t){n[t]=e[t]}),forEach(globals,function(t){e[t]&&(n[t]=e[t])});var o=Object_keys(n),s=i.call(n,this.code);return forEach(Object_keys(n),function(t){(t in e||-1===indexOf(o,t))&&(e[t]=n[t])}),forEach(globals,function(t){t in e||defineProp(e,t,n[t])}),document.body.removeChild(t),s},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),n=this.runInContext(t);return forEach(Object_keys(t),function(n){e[n]=t[n]}),n},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var n=Script(t);return n[e].apply(n,[].slice.call(arguments,1))}}),exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(n){t[n]=e[n]}),t}},{indexof:671}],externalForm:[function(e,t,n){"use strict";e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/init"),e("fieldbook"),e("../models/values");var i=e("../models/account"),r=e("./nameMaps"),o=e("./externalFormView");n.init=function(e){var t=e.userData,n=e.fields;i.set(t||{}),ExternalForm.account=i.account,this.view=new o({element:$(".external-form-container"),fields:n}),this.view.render()},n.parseNameMaps=function(e){this.recordNameMaps=r.parse(e)},n.csrf=e("../csrf")},{"../csrf":6,"../models/account":27,"../models/values":72,"./externalFormView":13,"./nameMaps":14,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/init":23,fieldbook:"fieldbook"}],fieldbook:[function(e,t,n){(function(t){"use strict";var i=480;e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/init"),t.BaseObject=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/baseObject"),t.AppError=e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/common/appError"),n.trackJs=e("./trackJs"),e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/fastClick"),e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/dev"),e("/tmp/build_96d1853f863eec5c2a9d5071e8378210/common/moment.fieldbook");var r=_.soak(window.screen,"orientation.type")||"portrait",o=-1!==r.indexOf("portrait"),s=o?window.screen.width:window.screen.height;t.isMobile=i>=s,window.forceMobile&&(t.isMobile=!0),n.version=e("../common/version"),n.csrf=e("./csrf"),n.models=e("./models"),n.actions=e("./actions"),n.actionQueue=e("./actionQueue"),n.views=e("./views"),n.routing=e("./routing"),n.env=e("./env"),n.performance=e("./performance"),n.BookSocket=e("./bookSocket"),n.SyncedTime=e("../common/syncedTime"),n.ValueTimestamp=e("./valueTimestamp"),n.globalEvents=e("./globalEvents");var a=e("ua-parser-js");t.isSafari=a(navigator.userAgent).browser.name.test(/Safari/),console.log(t.isSafari?"Using exception guarded navigation":"Using normal navigation"),t.ENABLE_NAVIGATION_EXCEPTION=!1,n.setupSafariOverrides=function(){t.history.replaceState,t.history.pushState;n.NAVIGATION_IN_PROCESS=!1;var e=function(e,i,r,o){if(!n.NAVIGATION_IN_PROCESS){var s=_.tail(arguments);try{if(t.ENABLE_NAVIGATION_EXCEPTION)throw new Error("test navigation error exception 18");return e.apply(this,s)}catch(a){if(!/exception 18/i.test(a.message))throw a;n.NAVIGATION_IN_PROCESS=!0,window.location.href=o}}};t.history.replaceState=t.history.replaceState.wrap(e),t.history.pushState=t.history.pushState.wrap(e)},t.isSafari&&n.setupSafariOverrides();var l=e("./viewModels/help/help");l.loadData()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../common/syncedTime":250,"../common/version":258,"./actionQueue":1,"./actions":2,"./bookSocket":4,"./csrf":6,"./env":8,"./globalEvents":22,"./models":47,"./performance":75,"./routing":76,"./trackJs":78,"./valueTimestamp":85,"./viewModels/help/help":93,"./views":188,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/baseObject":3,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/dev":7,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/fastClick":11,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/client/init":23,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/common/appError":237,"/tmp/build_96d1853f863eec5c2a9d5071e8378210/common/moment.fieldbook":246,"ua-parser-js":743}]},{},["fieldbook","externalForm"]);